{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"GoMT5 SDK Documentation","text":"<p>Complete Go SDK for MetaTrader 5 trading automation via gRPC</p> rocket_launch Quick Start <p>Your first project from scratch in 10 minutes</p> bolt Getting Started <p>New here? Start with setup and overview</p> map Project Map <p>Architecture overview</p> menu_book Glossary <p>MT5 terms and concepts</p> build MT5Service <p>Wrapper methods layer</p> settings MT5Account <p>Low-level gRPC protocol layer</p> auto_awesome MT5Sugar <p>High-level convenience API</p>"},{"location":"api/","title":"Api","text":"<p>Generated by godoc2md</p>"},{"location":"API_Reference/MT5Account/","title":"MT5Account API Reference","text":"<p>Note: Complete API reference for package/Helpers/MT5Account.go with enhanced navigation. Single-page format for easy browsing.</p> <p>MT5Account represents a low-level gRPC client for MetaTrader 5 terminal. All methods accept protobuf Request objects and return protobuf Data objects. This is the foundation layer that directly communicates with the MT5 gRPC server.</p>"},{"location":"API_Reference/MT5Account/#table-of-contents","title":"Table of Contents","text":""},{"location":"API_Reference/MT5Account/#constructor-connection","title":"\ud83c\udfd7\ufe0f Constructor &amp; Connection","text":"<ul> <li>NewMT5Account</li> <li>NewMT5AccountAuto</li> <li>Connect</li> <li>ConnectEx</li> <li>ConnectProxy</li> <li>Disconnect</li> <li>Reconnect</li> <li>CheckConnect</li> <li>IsConnected</li> <li>Close</li> </ul>"},{"location":"API_Reference/MT5Account/#account-information","title":"\ud83d\udcb0 Account Information","text":"<ul> <li>AccountSummary</li> <li>AccountInfoDouble</li> <li>AccountInfoInteger</li> <li>AccountInfoString</li> </ul>"},{"location":"API_Reference/MT5Account/#symbol-information","title":"\ud83d\udd22 Symbol Information","text":"<ul> <li>SymbolsTotal</li> <li>SymbolName</li> <li>SymbolSelect</li> <li>SymbolExist</li> <li>SymbolIsSynchronized</li> <li>SymbolInfoTick</li> <li>SymbolInfoDouble</li> <li>SymbolInfoInteger</li> <li>SymbolInfoString</li> <li>SymbolInfoMarginRate</li> <li>SymbolInfoSessionQuote</li> <li>SymbolInfoSessionTrade</li> <li>SymbolParamsMany</li> <li>TickValueWithSize</li> </ul>"},{"location":"API_Reference/MT5Account/#positions-orders","title":"\ud83d\udcca Positions &amp; Orders","text":"<ul> <li>PositionsTotal</li> <li>OpenedOrders</li> <li>OpenedOrdersTickets</li> <li>OrderCalcMargin</li> <li>OrderCalcProfit</li> <li>OrderCheck</li> </ul>"},{"location":"API_Reference/MT5Account/#history","title":"\ud83d\udcdc History","text":"<ul> <li>OrderHistory</li> <li>PositionsHistory</li> </ul>"},{"location":"API_Reference/MT5Account/#market-depth","title":"\ud83d\udcc8 Market Depth","text":"<ul> <li>MarketBookAdd</li> <li>MarketBookGet</li> <li>MarketBookRelease</li> </ul>"},{"location":"API_Reference/MT5Account/#trading-operations","title":"\ud83d\uded2 Trading Operations","text":"<ul> <li>OrderSend</li> <li>OrderModify</li> <li>OrderClose</li> </ul>"},{"location":"API_Reference/MT5Account/#streaming-methods","title":"\ud83d\udce1 Streaming Methods","text":"<ul> <li>OnSymbolTick</li> <li>OnPositionProfit</li> <li>OnPositionsAndPendingOrdersTickets</li> <li>OnTrade</li> <li>OnTradeTransaction</li> </ul>"},{"location":"API_Reference/MT5Account/#constructor-connection_1","title":"\ud83c\udfd7\ufe0f Constructor &amp; Connection","text":""},{"location":"API_Reference/MT5Account/#newmt5account","title":"NewMT5Account","text":"<p>Creates a new MT5Account instance with gRPC connection. Default grpcServer is \"mt5.mrpc.pro:443\" if empty string is provided. The connection is established with TLS, keepalive, and automatic reconnect configured.</p> <p>Signature <pre><code>func NewMT5Account(user uint64, password string, grpcServer string, id uuid.UUID) (*MT5Account, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description user uint64 MT5 account login number password string MT5 account password grpcServer string gRPC server address (e.g., \"mt5.mrpc.pro:443\", empty for default) id uuid.UUID Unique identifier for this account instance <p>Returns</p> <p>Returns <code>*MT5Account</code> instance with established gRPC connection, or error if connection fails.</p>"},{"location":"API_Reference/MT5Account/#newmt5accountauto","title":"NewMT5AccountAuto","text":"<p>Creates a new MT5Account instance with gRPC connection and auto-generated UUID. This is a convenience wrapper around NewMT5Account that automatically generates a random UUID for the session. Default grpcServer is \"mt5.mrpc.pro:443\" if empty string is provided. The connection is established with TLS, keepalive, and automatic reconnect configured.</p> <p>Signature <pre><code>func NewMT5AccountAuto(user uint64, password string, grpcServer string) (*MT5Account, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description user uint64 MT5 account login number password string MT5 account password grpcServer string gRPC server address (e.g., \"mt5.mrpc.pro:443\", empty for default) <p>Returns</p> <p>Returns <code>*MT5Account</code> instance with established gRPC connection and auto-generated UUID, or error if connection fails.</p> <p>Example <pre><code>// Create account with auto-generated UUID\naccount, err := mt5.NewMT5AccountAuto(12345678, \"password\", \"\")\nif err != nil {\n    log.Fatal(err)\n}\ndefer account.Close()\n</code></pre></p>"},{"location":"API_Reference/MT5Account/#connect","title":"Connect","text":"<p>Establishes basic connection to MT5 terminal. This is a simplified connection method that uses default settings. For advanced connection configuration, use ConnectEx instead.</p> <p>Signature <pre><code>func (a *MT5Account) Connect(ctx context.Context, req *pb.ConnectRequest) (*pb.ConnectData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.ConnectRequest Request with User, Password, and optional ServerName <p>Returns</p> <p>Returns <code>*pb.ConnectData</code> with session UUID and connection status, or error on failure.</p>"},{"location":"API_Reference/MT5Account/#connectex","title":"ConnectEx","text":"<p>Establishes connection to MT5 terminal with extended parameters. This method provides full control over connection settings including MT5 cluster name for connection, connection timeout settings, base chart symbol selection, and Expert Advisors to add.</p> <p>Signature <pre><code>func (a *MT5Account) ConnectEx(ctx context.Context, req *pb.ConnectExRequest) (*pb.ConnectData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.ConnectExRequest Request with User, Password, MtClusterName, BaseChartSymbol, TerminalReadinessWaitingTimeoutSeconds, ExpertsToAdd <p>Returns</p> <p>Returns <code>*pb.ConnectData</code> with session UUID and connection status, or error on failure.</p>"},{"location":"API_Reference/MT5Account/#connectproxy","title":"ConnectProxy","text":"<p>Establishes connection to MT5 terminal through proxy server. Use this method when MT5 terminal access requires proxy configuration.</p> <p>Signature <pre><code>func (a *MT5Account) ConnectProxy(ctx context.Context, req *pb.ConnectProxyRequest) (*pb.ConnectProxyData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.ConnectProxyRequest Request with proxy host, port, type, credentials and MT5 account credentials <p>Returns</p> <p>Returns <code>*pb.ConnectProxyData</code> with session UUID and connection status, or error on failure.</p>"},{"location":"API_Reference/MT5Account/#disconnect","title":"Disconnect","text":"<p>Closes the connection to MT5 terminal. This method gracefully terminates the active MT5 session.</p> <p>Signature <pre><code>func (a *MT5Account) Disconnect(ctx context.Context, req *pb.DisconnectRequest) (*pb.DisconnectData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.DisconnectRequest Empty request structure <p>Returns</p> <p>Returns <code>*pb.DisconnectData</code> with disconnection status, or error on failure.</p>"},{"location":"API_Reference/MT5Account/#reconnect","title":"Reconnect","text":"<p>Re-establishes connection to MT5 terminal. This method recreates the terminal session without changing connection parameters. Used internally by ExecuteWithReconnect on TERMINAL_INSTANCE_NOT_FOUND errors.</p> <p>Signature <pre><code>func (a *MT5Account) Reconnect(ctx context.Context, req *pb.ReconnectRequest) (*pb.ReconnectData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.ReconnectRequest Empty request structure <p>Returns</p> <p>Returns <code>*pb.ReconnectData</code> with new session UUID, or error on failure.</p>"},{"location":"API_Reference/MT5Account/#checkconnect","title":"CheckConnect","text":"<p>Verifies the current connection status to MT5 terminal. Use this method to ping the terminal and confirm the session is still active.</p> <p>Signature <pre><code>func (a *MT5Account) CheckConnect(ctx context.Context, req *pb.CheckConnectRequest) (*pb.CheckConnectData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.CheckConnectRequest Empty request structure <p>Returns</p> <p>Returns <code>*pb.CheckConnectData</code> with connection status flag, or error on failure.</p>"},{"location":"API_Reference/MT5Account/#isconnected","title":"IsConnected","text":"<p>Returns true if the account has an active gRPC connection.</p> <p>Signature <pre><code>func (a *MT5Account) IsConnected() bool\n</code></pre></p> <p>Returns</p> <p>Returns true if gRPC connection is active, false otherwise.</p>"},{"location":"API_Reference/MT5Account/#close","title":"Close","text":"<p>Closes the gRPC connection and cleans up resources.</p> <p>Signature <pre><code>func (a *MT5Account) Close() error\n</code></pre></p> <p>Returns</p> <p>Returns error if cleanup fails, nil on success.</p>"},{"location":"API_Reference/MT5Account/#account-information_1","title":"\ud83d\udcb0 Account Information","text":""},{"location":"API_Reference/MT5Account/#accountsummary","title":"AccountSummary","text":"<p>Retrieves all account information in one call. This is the recommended method for getting account data as it returns all properties in a single request, avoiding multiple round-trips.</p> <p>Signature <pre><code>func (a *MT5Account) AccountSummary(ctx context.Context, req *pb.AccountSummaryRequest) (*pb.AccountSummaryData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.AccountSummaryRequest Empty request structure <p>Returns</p> <p>Returns <code>*pb.AccountSummaryData</code> with Login, Balance, Equity, UserName, Leverage, TradeMode, CompanyName, Currency, ServerTime, UtcTimezoneShift, and Credit.</p>"},{"location":"API_Reference/MT5Account/#accountinfodouble","title":"AccountInfoDouble","text":"<p>Retrieves a double-type account property. Use this method when you need a specific numeric account property. For multiple properties, use AccountSummary instead.</p> <p>Signature <pre><code>func (a *MT5Account) AccountInfoDouble(ctx context.Context, req *pb.AccountInfoDoubleRequest) (*pb.AccountInfoDoubleData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.AccountInfoDoubleRequest Request with property_id (ACCOUNT_BALANCE, ACCOUNT_EQUITY, ACCOUNT_MARGIN, ACCOUNT_MARGIN_FREE, ACCOUNT_PROFIT, etc) <p>Returns</p> <p>Returns <code>*pb.AccountInfoDoubleData</code> with the requested double value.</p>"},{"location":"API_Reference/MT5Account/#accountinfointeger","title":"AccountInfoInteger","text":"<p>Retrieves an integer-type account property. Use this method when you need a specific integer account property.</p> <p>Signature <pre><code>func (a *MT5Account) AccountInfoInteger(ctx context.Context, req *pb.AccountInfoIntegerRequest) (*pb.AccountInfoIntegerData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.AccountInfoIntegerRequest Request with property_id (ACCOUNT_LOGIN, ACCOUNT_LEVERAGE, ACCOUNT_LIMIT_ORDERS, ACCOUNT_TRADE_MODE, ACCOUNT_MARGIN_SO_MODE, etc) <p>Returns</p> <p>Returns <code>*pb.AccountInfoIntegerData</code> with the requested int64 value.</p>"},{"location":"API_Reference/MT5Account/#accountinfostring","title":"AccountInfoString","text":"<p>Retrieves a string-type account property. Use this method when you need a specific string account property.</p> <p>Signature <pre><code>func (a *MT5Account) AccountInfoString(ctx context.Context, req *pb.AccountInfoStringRequest) (*pb.AccountInfoStringData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.AccountInfoStringRequest Request with property_id (ACCOUNT_NAME, ACCOUNT_SERVER, ACCOUNT_CURRENCY, ACCOUNT_COMPANY) <p>Returns</p> <p>Returns <code>*pb.AccountInfoStringData</code> with the requested string value.</p>"},{"location":"API_Reference/MT5Account/#symbol-information_1","title":"\ud83d\udd22 Symbol Information","text":""},{"location":"API_Reference/MT5Account/#symbolstotal","title":"SymbolsTotal","text":"<p>Returns the number of available symbols. Use this method to count symbols either in Market Watch or all available symbols.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolsTotal(ctx context.Context, req *pb.SymbolsTotalRequest) (*pb.SymbolsTotalData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolsTotalRequest Request with Selected flag (true for Market Watch symbols only, false for all symbols) <p>Returns</p> <p>Returns <code>*pb.SymbolsTotalData</code> with total count of symbols.</p>"},{"location":"API_Reference/MT5Account/#symbolname","title":"SymbolName","text":"<p>Returns the name of a symbol by its position in the list. Use this method to iterate through available symbols by index.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolName(ctx context.Context, req *pb.SymbolNameRequest) (*pb.SymbolNameData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolNameRequest Request with Pos (zero-based index) and Selected flag (true for Market Watch, false for all symbols) <p>Returns</p> <p>Returns <code>*pb.SymbolNameData</code> with symbol name at the specified position.</p>"},{"location":"API_Reference/MT5Account/#symbolselect","title":"SymbolSelect","text":"<p>Adds or removes a symbol from Market Watch window. Use this method to manage which symbols are visible in Market Watch.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolSelect(ctx context.Context, req *pb.SymbolSelectRequest) (*pb.SymbolSelectData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolSelectRequest Request with Symbol name and Select flag (true to add, false to remove) <p>Returns</p> <p>Returns <code>*pb.SymbolSelectData</code> with success status of the operation.</p>"},{"location":"API_Reference/MT5Account/#symbolexist","title":"SymbolExist","text":"<p>Checks if a symbol with specified name exists. Use this method to verify symbol availability before requesting data or placing orders.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolExist(ctx context.Context, req *pb.SymbolExistRequest) (*pb.SymbolExistData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolExistRequest Request with Symbol name <p>Returns</p> <p>Returns <code>*pb.SymbolExistData</code> with Exist flag and IsCustom flag indicating if it's a custom symbol.</p>"},{"location":"API_Reference/MT5Account/#symbolissynchronized","title":"SymbolIsSynchronized","text":"<p>Checks if symbol data is synchronized with trade server. Use this method to ensure symbol quotes are up-to-date before trading operations.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolIsSynchronized(ctx context.Context, req *pb.SymbolIsSynchronizedRequest) (*pb.SymbolIsSynchronizedData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolIsSynchronizedRequest Request with Symbol name <p>Returns</p> <p>Returns <code>*pb.SymbolIsSynchronizedData</code> with IsSynchronized flag.</p>"},{"location":"API_Reference/MT5Account/#symbolinfotick","title":"SymbolInfoTick","text":"<p>Retrieves the last tick data for a symbol. Use this method to get the most recent price update with timestamp.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolInfoTick(ctx context.Context, req *pb.SymbolInfoTickRequest) (*pb.MrpcMqlTick, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolInfoTickRequest Request with Symbol name <p>Returns</p> <p>Returns <code>*pb.MrpcMqlTick</code> with Bid, Ask, Last, Volume, Time, TimeMS, Flags, VolumReal and spread values.</p>"},{"location":"API_Reference/MT5Account/#symbolinfodouble","title":"SymbolInfoDouble","text":"<p>Retrieves a double-type symbol property. Use this method to get numeric symbol properties like prices, volumes, and trading parameters.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolInfoDouble(ctx context.Context, req *pb.SymbolInfoDoubleRequest) (*pb.SymbolInfoDoubleData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolInfoDoubleRequest Request with Symbol name and PropertyId (BID, ASK, POINT, VOLUME_MIN, VOLUME_MAX, VOLUME_STEP, TRADE_TICK_SIZE, etc) <p>Returns</p> <p>Returns <code>*pb.SymbolInfoDoubleData</code> with the requested double value.</p>"},{"location":"API_Reference/MT5Account/#symbolinfointeger","title":"SymbolInfoInteger","text":"<p>Retrieves an integer-type symbol property. Use this method to get integer symbol properties like digits, spread, and trading restrictions.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolInfoInteger(ctx context.Context, req *pb.SymbolInfoIntegerRequest) (*pb.SymbolInfoIntegerData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolInfoIntegerRequest Request with Symbol name and PropertyId (DIGITS, SPREAD, STOPS_LEVEL, FREEZE_LEVEL, TRADE_MODE, TRADE_EXECUTION_MODE, etc) <p>Returns</p> <p>Returns <code>*pb.SymbolInfoIntegerData</code> with the requested int64 value.</p>"},{"location":"API_Reference/MT5Account/#symbolinfostring","title":"SymbolInfoString","text":"<p>Retrieves a string-type symbol property. Use this method to get text symbol properties like description and currency information.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolInfoString(ctx context.Context, req *pb.SymbolInfoStringRequest) (*pb.SymbolInfoStringData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolInfoStringRequest Request with Symbol name and PropertyId (DESCRIPTION, CURRENCY_BASE, CURRENCY_PROFIT, CURRENCY_MARGIN, PATH, etc) <p>Returns</p> <p>Returns <code>*pb.SymbolInfoStringData</code> with the requested string value.</p>"},{"location":"API_Reference/MT5Account/#symbolinfomarginrate","title":"SymbolInfoMarginRate","text":"<p>Retrieves margin requirements for different order types. Use this method to calculate margin before placing orders.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolInfoMarginRate(ctx context.Context, req *pb.SymbolInfoMarginRateRequest) (*pb.SymbolInfoMarginRateData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolInfoMarginRateRequest Request with Symbol name and OrderType (ORDER_TYPE_BUY, ORDER_TYPE_SELL, etc) <p>Returns</p> <p>Returns <code>*pb.SymbolInfoMarginRateData</code> with InitialMarginRate and MaintenanceMarginRate values.</p>"},{"location":"API_Reference/MT5Account/#symbolinfosessionquote","title":"SymbolInfoSessionQuote","text":"<p>Retrieves quote session times for a symbol. Use this method to check when quotes are available for trading.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolInfoSessionQuote(ctx context.Context, req *pb.SymbolInfoSessionQuoteRequest) (*pb.SymbolInfoSessionQuoteData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolInfoSessionQuoteRequest Request with Symbol name, DayOfWeek (SUNDAY=0 to SATURDAY=6) and SessionIndex <p>Returns</p> <p>Returns <code>*pb.SymbolInfoSessionQuoteData</code> with session From and To times in seconds from day start.</p>"},{"location":"API_Reference/MT5Account/#symbolinfosessiontrade","title":"SymbolInfoSessionTrade","text":"<p>Retrieves trade session times for a symbol. Use this method to check when trading operations are allowed.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolInfoSessionTrade(ctx context.Context, req *pb.SymbolInfoSessionTradeRequest) (*pb.SymbolInfoSessionTradeData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolInfoSessionTradeRequest Request with Symbol name, DayOfWeek (SUNDAY=0 to SATURDAY=6) and SessionIndex <p>Returns</p> <p>Returns <code>*pb.SymbolInfoSessionTradeData</code> with session From and To times in seconds from day start.</p>"},{"location":"API_Reference/MT5Account/#symbolparamsmany","title":"SymbolParamsMany","text":"<p>Retrieves detailed parameters for multiple symbols in one call. This is the recommended method for getting comprehensive symbol data as it returns all properties for multiple symbols in a single request, avoiding multiple round-trips.</p> <p>Signature <pre><code>func (a *MT5Account) SymbolParamsMany(ctx context.Context, req *pb.SymbolParamsManyRequest) (*pb.SymbolParamsManyData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.SymbolParamsManyRequest Request with array of Symbol names <p>Returns</p> <p>Returns <code>*pb.SymbolParamsManyData</code> with array of SymbolParams containing Bid, Ask, Digits, Spread, VolumeMin, VolumeMax, VolumeStep, ContractSize, Point, margins, and other trading parameters for each symbol.</p>"},{"location":"API_Reference/MT5Account/#tickvaluewithsize","title":"TickValueWithSize","text":"<p>Retrieves tick value and size information for multiple symbols. Use this method to get tick values for profit/loss calculations and contract size data.</p> <p>Signature <pre><code>func (a *MT5Account) TickValueWithSize(ctx context.Context, req *pb.TickValueWithSizeRequest) (*pb.TickValueWithSizeData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.TickValueWithSizeRequest Request with array of SymbolNames <p>Returns</p> <p>Returns <code>*pb.TickValueWithSizeData</code> with array of TickSizeSymbol containing tick values, tick size, and contract size for each symbol.</p>"},{"location":"API_Reference/MT5Account/#positions-orders_1","title":"\ud83d\udcca Positions &amp; Orders","text":""},{"location":"API_Reference/MT5Account/#positionstotal","title":"PositionsTotal","text":"<p>Returns the number of currently open positions. Use this method for quick check of open positions count without retrieving full details.</p> <p>Signature <pre><code>func (a *MT5Account) PositionsTotal(ctx context.Context) (*pb.PositionsTotalData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control <p>Returns</p> <p>Returns <code>*pb.PositionsTotalData</code> with Total count of open positions.</p>"},{"location":"API_Reference/MT5Account/#openedorders","title":"OpenedOrders","text":"<p>Retrieves all currently opened orders and positions with full details. This method returns comprehensive information about all active trading positions and pending orders including profit/loss, prices, volumes, and timestamps.</p> <p>Signature <pre><code>func (a *MT5Account) OpenedOrders(ctx context.Context, req *pb.OpenedOrdersRequest) (*pb.OpenedOrdersData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OpenedOrdersRequest Request with InputSortMode (sort type: by open time, close time, or ticket ID) <p>Returns</p> <p>Returns <code>*pb.OpenedOrdersData</code> with arrays of opened_orders (pending orders) and position_infos (open positions) containing full details.</p>"},{"location":"API_Reference/MT5Account/#openedorderstickets","title":"OpenedOrdersTickets","text":"<p>Retrieves only ticket numbers of currently opened orders and positions. This is a lightweight alternative to OpenedOrders when you only need ticket IDs for subsequent operations or monitoring.</p> <p>Signature <pre><code>func (a *MT5Account) OpenedOrdersTickets(ctx context.Context, req *pb.OpenedOrdersTicketsRequest) (*pb.OpenedOrdersTicketsData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OpenedOrdersTicketsRequest Empty request structure <p>Returns</p> <p>Returns <code>*pb.OpenedOrdersTicketsData</code> with arrays of opened_orders_tickets and opened_position_tickets.</p>"},{"location":"API_Reference/MT5Account/#ordercalcmargin","title":"OrderCalcMargin","text":"<p>Calculates required margin for an order. Use this method to determine how much margin will be required before placing an order.</p> <p>Signature <pre><code>func (a *MT5Account) OrderCalcMargin(ctx context.Context, req *pb.OrderCalcMarginRequest) (*pb.OrderCalcMarginData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderCalcMarginRequest Request with Symbol, OrderType, Volume, and OpenPrice <p>Returns</p> <p>Returns <code>*pb.OrderCalcMarginData</code> with Margin value in account currency.</p>"},{"location":"API_Reference/MT5Account/#ordercalcprofit","title":"OrderCalcProfit","text":"<p>Calculates potential profit for a trade. Use this method to estimate profit/loss before placing an order or to calculate current profit at a specified price level.</p> <p>Signature <pre><code>func (a *MT5Account) OrderCalcProfit(ctx context.Context, req *pb.OrderCalcProfitRequest) (*pb.OrderCalcProfitData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderCalcProfitRequest Request with OrderType, Symbol, Volume, OpenPrice, and ClosePrice <p>Returns</p> <p>Returns <code>*pb.OrderCalcProfitData</code> with Profit value in account currency.</p>"},{"location":"API_Reference/MT5Account/#ordercheck","title":"OrderCheck","text":"<p>Validates an order before sending it to the server. Use this method to pre-validate trading requests without actually placing orders. Useful for checking margin requirements and detecting potential errors.</p> <p>Signature <pre><code>func (a *MT5Account) OrderCheck(ctx context.Context, req *pb.OrderCheckRequest) (*pb.OrderCheckData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderCheckRequest Request with Action, Symbol, Volume, Price, OrderType, StopLoss, TakeProfit and other order parameters <p>Returns</p> <p>Returns <code>*pb.OrderCheckData</code> with validation result including margin requirements, estimated profit, and MqlTradeCheckResult structure with validation status and possible error codes.</p>"},{"location":"API_Reference/MT5Account/#history_1","title":"\ud83d\udcdc History","text":""},{"location":"API_Reference/MT5Account/#orderhistory","title":"OrderHistory","text":"<p>Retrieves historical orders within a specified time range. Use this method to analyze past order activity with pagination support for large datasets.</p> <p>Signature <pre><code>func (a *MT5Account) OrderHistory(ctx context.Context, req *pb.OrderHistoryRequest) (*pb.OrdersHistoryData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderHistoryRequest Request with FromDate, ToDate (unix timestamps), optional Symbol filter, Offset and Limit for pagination <p>Returns</p> <p>Returns <code>*pb.OrdersHistoryData</code> with array of historical Order objects including execution details, prices, volumes, and final status.</p>"},{"location":"API_Reference/MT5Account/#positionshistory","title":"PositionsHistory","text":"<p>Retrieves closed positions with profit/loss information. Use this method to analyze trading performance and calculate statistics for closed positions within a time range.</p> <p>Signature <pre><code>func (a *MT5Account) PositionsHistory(ctx context.Context, req *pb.PositionsHistoryRequest) (*pb.PositionsHistoryData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.PositionsHistoryRequest Request with FromDate, ToDate (unix timestamps), optional Symbol filter, Offset and Limit for pagination <p>Returns</p> <p>Returns <code>*pb.PositionsHistoryData</code> with array of closed Position objects including entry/exit prices, volumes, swap, commission, net profit, and close timestamps.</p>"},{"location":"API_Reference/MT5Account/#market-depth_1","title":"\ud83d\udcc8 Market Depth","text":""},{"location":"API_Reference/MT5Account/#marketbookadd","title":"MarketBookAdd","text":"<p>Subscribes to Depth of Market (DOM) updates for a symbol. Use this method to start receiving Level 2 market data with bid/ask prices and volumes at different price levels.</p> <p>Signature <pre><code>func (a *MT5Account) MarketBookAdd(ctx context.Context, req *pb.MarketBookAddRequest) (*pb.MarketBookAddData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.MarketBookAddRequest Request with Symbol name <p>Returns</p> <p>Returns <code>*pb.MarketBookAddData</code> with subscription status.</p>"},{"location":"API_Reference/MT5Account/#marketbookget","title":"MarketBookGet","text":"<p>Retrieves current market depth snapshot for a symbol. Use this method to get the current order book state with all price levels, volumes, and order types (buy/sell) at each level.</p> <p>Signature <pre><code>func (a *MT5Account) MarketBookGet(ctx context.Context, req *pb.MarketBookGetRequest) (*pb.MarketBookGetData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.MarketBookGetRequest Request with Symbol name <p>Returns</p> <p>Returns <code>*pb.MarketBookGetData</code> with array of BookStruct entries containing Type (buy/sell), Price, Volume, and VolumeDouble for each price level in the order book.</p>"},{"location":"API_Reference/MT5Account/#marketbookrelease","title":"MarketBookRelease","text":"<p>Unsubscribes from Depth of Market (DOM) updates. Use this method to stop receiving Level 2 market data and free resources.</p> <p>Signature <pre><code>func (a *MT5Account) MarketBookRelease(ctx context.Context, req *pb.MarketBookReleaseRequest) (*pb.MarketBookReleaseData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.MarketBookReleaseRequest Request with Symbol name <p>Returns</p> <p>Returns <code>*pb.MarketBookReleaseData</code> with unsubscription status.</p>"},{"location":"API_Reference/MT5Account/#trading-operations_1","title":"\ud83d\uded2 Trading Operations","text":""},{"location":"API_Reference/MT5Account/#ordersend","title":"OrderSend","text":"<p>Places a market or pending order. This is the main trading method for opening positions and placing pending orders. Supports all order types: market buy/sell, buy/sell limit, buy/sell stop, and stop-limit.</p> <p>Signature <pre><code>func (a *MT5Account) OrderSend(ctx context.Context, req *pb.OrderSendRequest) (*pb.OrderSendData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderSendRequest Request with Symbol, Operation, Volume, Price, Slippage, StopLoss, TakeProfit, Comment, ExpertId, StopLimitPrice, ExpirationTimeType, and ExpirationTime <p>Returns</p> <p>Returns <code>*pb.OrderSendData</code> with returned code, deal ticket, order ticket, execution price, volume, bid/ask prices, comment, and request ID.</p>"},{"location":"API_Reference/MT5Account/#ordermodify","title":"OrderModify","text":"<p>Modifies an existing pending order or position. Use this method to change price levels (entry price for pending orders, StopLoss and TakeProfit for positions and pending orders).</p> <p>Signature <pre><code>func (a *MT5Account) OrderModify(ctx context.Context, req *pb.OrderModifyRequest) (*pb.OrderModifyData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderModifyRequest Request with Ticket, Price (for pending orders), StopLoss, TakeProfit, and optional Expiration <p>Returns</p> <p>Returns <code>*pb.OrderModifyData</code> with modification status and MqlTradeResult structure.</p>"},{"location":"API_Reference/MT5Account/#orderclose","title":"OrderClose","text":"<p>Closes an existing market position or deletes a pending order. Use this method to exit positions at current market price or cancel pending orders.</p> <p>Signature <pre><code>func (a *MT5Account) OrderClose(ctx context.Context, req *pb.OrderCloseRequest) (*pb.OrderCloseData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderCloseRequest Request with Ticket, Volume, and Slippage <p>Returns</p> <p>Returns <code>*pb.OrderCloseData</code> with ReturnedCode, ReturnedStringCode, ReturnedCodeDescription, and CloseMode (market close, partial close, or pending order remove).</p>"},{"location":"API_Reference/MT5Account/#streaming-methods_1","title":"\ud83d\udce1 Streaming Methods","text":""},{"location":"API_Reference/MT5Account/#onsymboltick","title":"OnSymbolTick","text":"<p>Streams real-time tick data for a symbol. This method provides continuous price updates (Bid/Ask) as they arrive from the server. The stream automatically reconnects on connection loss.</p> <p>Signature <pre><code>func (a *MT5Account) OnSymbolTick(ctx context.Context, req *pb.OnSymbolTickRequest) (&lt;-chan *pb.OnSymbolTickData, &lt;-chan error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control (cancel to stop streaming) req *pb.OnSymbolTickRequest Request with Symbol name <p>Returns</p> <p>Returns two channels: data channel receives <code>*pb.OnSymbolTickData</code> with Bid, Ask, Last, Volume, Time for each tick; error channel receives errors if stream fails (both channels closed on context cancellation).</p>"},{"location":"API_Reference/MT5Account/#onpositionprofit","title":"OnPositionProfit","text":"<p>Streams real-time profit/loss updates for open positions. This method provides continuous P&amp;L updates as market prices change, useful for monitoring account performance and implementing risk management.</p> <p>Signature <pre><code>func (a *MT5Account) OnPositionProfit(ctx context.Context, req *pb.OnPositionProfitRequest) (&lt;-chan *pb.OnPositionProfitData, &lt;-chan error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control (cancel to stop streaming) req *pb.OnPositionProfitRequest Request with optional Symbol filter <p>Returns</p> <p>Returns two channels: data channel receives <code>*pb.OnPositionProfitData</code> with Ticket, Symbol, Profit, and current price; error channel receives errors if stream fails (both channels closed on context cancellation).</p>"},{"location":"API_Reference/MT5Account/#onpositionsandpendingorderstickets","title":"OnPositionsAndPendingOrdersTickets","text":"<p>Streams changes in open positions and pending orders. This method notifies whenever positions are opened/closed or pending orders are added/removed, providing only ticket numbers for efficient monitoring.</p> <p>Signature <pre><code>func (a *MT5Account) OnPositionsAndPendingOrdersTickets(ctx context.Context, req *pb.OnPositionsAndPendingOrdersTicketsRequest) (&lt;-chan *pb.OnPositionsAndPendingOrdersTicketsData, &lt;-chan error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control (cancel to stop streaming) req *pb.OnPositionsAndPendingOrdersTicketsRequest Empty request structure <p>Returns</p> <p>Returns two channels: data channel receives <code>*pb.OnPositionsAndPendingOrdersTicketsData</code> with arrays of PositionTickets and PendingOrderTickets; error channel receives errors if stream fails (both channels closed on context cancellation).</p>"},{"location":"API_Reference/MT5Account/#ontrade","title":"OnTrade","text":"<p>Streams trade events in real-time. This method provides notifications about all trading operations: order placement, modification, execution, and cancellation.</p> <p>Signature <pre><code>func (a *MT5Account) OnTrade(ctx context.Context, req *pb.OnTradeRequest) (&lt;-chan *pb.OnTradeData, &lt;-chan error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control (cancel to stop streaming) req *pb.OnTradeRequest Empty request structure <p>Returns</p> <p>Returns two channels: data channel receives <code>*pb.OnTradeData</code> with trade event details; error channel receives errors if stream fails (both channels closed on context cancellation).</p>"},{"location":"API_Reference/MT5Account/#ontradetransaction","title":"OnTradeTransaction","text":"<p>Streams detailed trade transaction events. This method provides low-level notifications about every change in trading state, including order state changes, deal executions, and position modifications.</p> <p>Signature <pre><code>func (a *MT5Account) OnTradeTransaction(ctx context.Context, req *pb.OnTradeTransactionRequest) (&lt;-chan *pb.OnTradeTransactionData, &lt;-chan error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control (cancel to stop streaming) req *pb.OnTradeTransactionRequest Empty request structure <p>Returns</p> <p>Returns two channels: data channel receives <code>*pb.OnTradeTransactionData</code> with MqlTradeTransaction containing Type, OrderState, DealTicket, OrderTicket, Symbol, Price, Volume; error channel receives errors if stream fails (both channels closed on context cancellation).</p>"},{"location":"API_Reference/MT5Service/","title":"MT5Service API Reference","text":"<p>Note: Complete API reference for examples/mt5/MT5Service.go with enhanced navigation. Single-page format for easy browsing.</p> <p>MT5Service is the mid-level API wrapper that bridges MT5Account (low-level gRPC) and MT5Sugar (high-level convenience). It unwraps protobuf structures and provides Go native types while maintaining full control over request parameters and contexts.</p>"},{"location":"API_Reference/MT5Service/#table-of-contents","title":"Table of Contents","text":""},{"location":"API_Reference/MT5Service/#constructor-utilities","title":"\ud83c\udfd7\ufe0f Constructor &amp; Utilities","text":"<ul> <li>NewMT5Service</li> <li>GetAccount</li> </ul>"},{"location":"API_Reference/MT5Service/#account-information","title":"\ud83d\udcb0 Account Information","text":"<ul> <li>GetAccountSummary</li> <li>GetAccountDouble</li> <li>GetAccountInteger</li> <li>GetAccountString</li> </ul>"},{"location":"API_Reference/MT5Service/#symbol-information","title":"\ud83d\udd22 Symbol Information","text":"<ul> <li>GetSymbolsTotal</li> <li>GetSymbolName</li> <li>SymbolSelect</li> <li>SymbolExist</li> <li>IsSymbolSynchronized</li> <li>GetSymbolTick</li> <li>GetSymbolDouble</li> <li>GetSymbolInteger</li> <li>GetSymbolString</li> <li>GetSymbolMarginRate</li> <li>GetSymbolSessionQuote</li> <li>GetSymbolSessionTrade</li> <li>GetSymbolParamsMany</li> </ul>"},{"location":"API_Reference/MT5Service/#market-depth","title":"\ud83d\udcc8 Market Depth","text":"<ul> <li>SubscribeMarketDepth</li> <li>GetMarketDepth</li> <li>UnsubscribeMarketDepth</li> </ul>"},{"location":"API_Reference/MT5Service/#positions-orders","title":"\ud83d\udcca Positions &amp; Orders","text":"<ul> <li>GetPositionsTotal</li> <li>GetOpenedOrders</li> <li>GetOpenedTickets</li> </ul>"},{"location":"API_Reference/MT5Service/#order-calculations-validation","title":"\u2696\ufe0f Order Calculations &amp; Validation","text":"<ul> <li>CalculateMargin</li> <li>CalculateProfit</li> <li>CheckOrder</li> </ul>"},{"location":"API_Reference/MT5Service/#history","title":"\ud83d\udcdc History","text":"<ul> <li>GetOrderHistory</li> <li>GetPositionsHistory</li> </ul>"},{"location":"API_Reference/MT5Service/#trading-operations","title":"\ud83d\uded2 Trading Operations","text":"<ul> <li>PlaceOrder</li> <li>ModifyOrder</li> <li>CloseOrder</li> </ul>"},{"location":"API_Reference/MT5Service/#streaming-methods","title":"\ud83d\udce1 Streaming Methods","text":"<ul> <li>StreamTicks</li> <li>StreamPositionProfits</li> <li>StreamOpenedTickets</li> <li>StreamTradeUpdates</li> <li>StreamTransactions</li> </ul>"},{"location":"API_Reference/MT5Service/#constructor-utilities_1","title":"\ud83c\udfd7\ufe0f Constructor &amp; Utilities","text":""},{"location":"API_Reference/MT5Service/#newmt5service","title":"NewMT5Service","text":"<p>Creates a new MT5Service wrapping an MT5Account instance. This is the main entry point for using the mid-level API. It wraps an existing low-level MT5Account and provides convenient Go native types instead of raw protobuf structures.</p> <p>Signature <pre><code>func NewMT5Service(account *MT5Account) *MT5Service\n</code></pre></p> <p>Parameters</p> Parameter Type Description account *MT5Account MT5Account instance (low-level gRPC client) <p>Returns</p> <p>Returns new <code>*MT5Service</code> instance wrapping the provided account.</p>"},{"location":"API_Reference/MT5Service/#getaccount","title":"GetAccount","text":"<p>Returns the underlying MT5Account for direct low-level access. Use this when you need to work with raw protobuf structures or access methods not wrapped by MT5Service.</p> <p>Signature <pre><code>func (s *MT5Service) GetAccount() *MT5Account\n</code></pre></p> <p>Returns</p> <p>Returns <code>*MT5Account</code> instance used by this service.</p>"},{"location":"API_Reference/MT5Service/#account-information_1","title":"\ud83d\udcb0 Account Information","text":""},{"location":"API_Reference/MT5Service/#getaccountsummary","title":"GetAccountSummary","text":"<p>Retrieves all account information in one call. This is the RECOMMENDED method for getting account data - it returns everything you need in a clean Go struct with native types instead of protobuf.</p> <p>Signature <pre><code>func (s *MT5Service) GetAccountSummary(ctx context.Context) (*AccountSummary, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control <p>Returns</p> <p>Returns <code>*AccountSummary</code> struct with all account properties (Login, Balance, Equity, UserName, Leverage, TradeMode, CompanyName, Currency, ServerTime, UtcTimezoneShift, Credit) using Go native types with automatic time conversion, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#getaccountdouble","title":"GetAccountDouble","text":"<p>Retrieves a double-type account property by ID. This method returns the value directly as float64 instead of wrapped protobuf structure. More convenient than MT5Account.AccountInfoDouble for single property queries.</p> <p>Signature <pre><code>func (s *MT5Service) GetAccountDouble(ctx context.Context, propertyID pb.AccountInfoDoublePropertyType) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control propertyID pb.AccountInfoDoublePropertyType Property ID enum (ACCOUNT_BALANCE, ACCOUNT_EQUITY, ACCOUNT_MARGIN, ACCOUNT_MARGIN_FREE, ACCOUNT_PROFIT, etc.) <p>Returns</p> <p>Returns property value as float64, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#getaccountinteger","title":"GetAccountInteger","text":"<p>Retrieves an integer-type account property by ID. This method returns the value directly as int64 instead of wrapped protobuf structure. More convenient than MT5Account.AccountInfoInteger for single property queries.</p> <p>Signature <pre><code>func (s *MT5Service) GetAccountInteger(ctx context.Context, propertyID pb.AccountInfoIntegerPropertyType) (int64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control propertyID pb.AccountInfoIntegerPropertyType Property ID enum (ACCOUNT_LOGIN, ACCOUNT_LEVERAGE, ACCOUNT_LIMIT_ORDERS, ACCOUNT_TRADE_MODE, ACCOUNT_MARGIN_SO_MODE, etc.) <p>Returns</p> <p>Returns property value as int64, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#getaccountstring","title":"GetAccountString","text":"<p>Retrieves a string-type account property by ID. This method returns the value directly as string instead of wrapped protobuf structure. More convenient than MT5Account.AccountInfoString for single property queries.</p> <p>Signature <pre><code>func (s *MT5Service) GetAccountString(ctx context.Context, propertyID pb.AccountInfoStringPropertyType) (string, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control propertyID pb.AccountInfoStringPropertyType Property ID enum (ACCOUNT_CURRENCY, ACCOUNT_COMPANY, ACCOUNT_NAME, ACCOUNT_SERVER) <p>Returns</p> <p>Returns property value as string, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#symbol-information_1","title":"\ud83d\udd22 Symbol Information","text":""},{"location":"API_Reference/MT5Service/#getsymbolstotal","title":"GetSymbolsTotal","text":"<p>Returns the count of available symbols. This method returns the count directly as int32 instead of wrapped protobuf. More convenient than MT5Account.SymbolsTotal for quick symbol counting.</p> <p>Signature <pre><code>func (s *MT5Service) GetSymbolsTotal(ctx context.Context, selectedOnly bool) (int32, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control selectedOnly bool If true, count only symbols in Market Watch; if false, count all symbols <p>Returns</p> <p>Returns number of symbols as int32, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#getsymbolname","title":"GetSymbolName","text":"<p>Retrieves symbol name by index position. Use this to iterate through available symbols. Set selectedOnly=true to get symbols from Market Watch only, false for all symbols.</p> <p>Signature <pre><code>func (s *MT5Service) GetSymbolName(ctx context.Context, index int32, selectedOnly bool) (string, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control index int32 Zero-based index of symbol in list selectedOnly bool If true, search only Market Watch; if false, search all symbols <p>Returns</p> <p>Returns symbol name as string, or error if index out of range or request fails.</p>"},{"location":"API_Reference/MT5Service/#symbolselect","title":"SymbolSelect","text":"<p>Adds or removes a symbol from Market Watch window. Returns true if operation successful. Use select_=true to add symbol to Market Watch, false to remove it.</p> <p>Signature <pre><code>func (s *MT5Service) SymbolSelect(ctx context.Context, symbol string, select_ bool) (bool, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name (e.g., \"EURUSD\", \"GBPUSD\") select_ bool If true, add to Market Watch; if false, remove from Market Watch <p>Returns</p> <p>Returns true if operation successful, false otherwise, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#symbolexist","title":"SymbolExist","text":"<p>Checks if a symbol exists in the terminal. Returns two booleans: exists (whether symbol exists) and isCustom (whether it's a custom symbol). Use this before working with a symbol to avoid errors.</p> <p>Signature <pre><code>func (s *MT5Service) SymbolExist(ctx context.Context, symbol string) (bool, bool, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name to check (e.g., \"EURUSD\") <p>Returns</p> <p>Returns <code>exists</code> (true if symbol exists), <code>isCustom</code> (true if custom symbol), and error if request fails.</p>"},{"location":"API_Reference/MT5Service/#issymbolsynchronized","title":"IsSymbolSynchronized","text":"<p>Checks if symbol data is synchronized with the trade server. Returns true if symbol is fully synchronized and ready for trading operations. Use this to ensure quotes are up-to-date before placing orders.</p> <p>Signature <pre><code>func (s *MT5Service) IsSymbolSynchronized(ctx context.Context, symbol string) (bool, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name to check (e.g., \"EURUSD\") <p>Returns</p> <p>Returns true if symbol synchronized, false otherwise, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#getsymboltick","title":"GetSymbolTick","text":"<p>Retrieves the last tick for a symbol. Returns SymbolTick struct with Go native types including time.Time for timestamp (no manual Unix conversion needed). More convenient than MT5Account.SymbolInfoTick.</p> <p>Signature <pre><code>func (s *MT5Service) GetSymbolTick(ctx context.Context, symbol string) (*SymbolTick, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name (e.g., \"EURUSD\", \"GBPUSD\") <p>Returns</p> <p>Returns <code>*SymbolTick</code> struct with current tick data (Bid, Ask, Last, Volume, Time, Spread), or error if symbol not found or request fails.</p>"},{"location":"API_Reference/MT5Service/#getsymboldouble","title":"GetSymbolDouble","text":"<p>Retrieves a double-type symbol property. Returns float64 value directly instead of wrapped protobuf. Use this for single property queries like Bid, Ask, Point, etc. For multiple properties, use GetSymbolParamsMany instead.</p> <p>Signature <pre><code>func (s *MT5Service) GetSymbolDouble(ctx context.Context, symbol string, property pb.SymbolInfoDoubleProperty) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name (e.g., \"EURUSD\") property pb.SymbolInfoDoubleProperty Property ID enum (BID, ASK, POINT, VOLUME_MIN, VOLUME_MAX, VOLUME_STEP, TRADE_TICK_SIZE, etc.) <p>Returns</p> <p>Returns property value as float64, or error if symbol not found or request fails.</p>"},{"location":"API_Reference/MT5Service/#getsymbolinteger","title":"GetSymbolInteger","text":"<p>Retrieves an integer-type symbol property. Returns int64 value directly instead of wrapped protobuf. Use this for single property queries like Digits, Spread, StopsLevel, etc. For multiple properties, use GetSymbolParamsMany instead.</p> <p>Signature <pre><code>func (s *MT5Service) GetSymbolInteger(ctx context.Context, symbol string, property pb.SymbolInfoIntegerProperty) (int64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name (e.g., \"EURUSD\") property pb.SymbolInfoIntegerProperty Property ID enum (DIGITS, SPREAD, STOPS_LEVEL, FREEZE_LEVEL, TRADE_MODE, TRADE_EXECUTION_MODE, etc.) <p>Returns</p> <p>Returns property value as int64, or error if symbol not found or request fails.</p>"},{"location":"API_Reference/MT5Service/#getsymbolstring","title":"GetSymbolString","text":"<p>Retrieves a string-type symbol property. Returns string value directly instead of wrapped protobuf. Use this for single property queries like Description, Path, Currency, etc.</p> <p>Signature <pre><code>func (s *MT5Service) GetSymbolString(ctx context.Context, symbol string, property pb.SymbolInfoStringProperty) (string, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name (e.g., \"EURUSD\") property pb.SymbolInfoStringProperty Property ID enum (DESCRIPTION, CURRENCY_BASE, CURRENCY_PROFIT, CURRENCY_MARGIN, PATH, etc.) <p>Returns</p> <p>Returns property value as string, or error if symbol not found or request fails.</p>"},{"location":"API_Reference/MT5Service/#getsymbolmarginrate","title":"GetSymbolMarginRate","text":"<p>Retrieves margin rates for a symbol and order type. Returns clean SymbolMarginRate struct instead of nested protobuf fields. Use this to understand margin requirements before placing orders.</p> <p>Signature <pre><code>func (s *MT5Service) GetSymbolMarginRate(ctx context.Context, symbol string, orderType pb.ENUM_ORDER_TYPE) (*SymbolMarginRate, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name (e.g., \"EURUSD\") orderType pb.ENUM_ORDER_TYPE Order type enum (ORDER_TYPE_BUY, ORDER_TYPE_SELL, ORDER_TYPE_BUY_LIMIT, etc.) <p>Returns</p> <p>Returns <code>*SymbolMarginRate</code> struct with InitialMarginRate and MaintenanceMarginRate, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#getsymbolsessionquote","title":"GetSymbolSessionQuote","text":"<p>Retrieves quote session times for a symbol. Returns SessionTime struct with time.Time fields instead of protobuf timestamps (no manual .AsTime() conversions needed). Use this to check when quotes are available.</p> <p>Signature <pre><code>func (s *MT5Service) GetSymbolSessionQuote(ctx context.Context, symbol string, dayOfWeek pb.DayOfWeek, sessionIndex uint32) (*SessionTime, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name (e.g., \"EURUSD\") dayOfWeek pb.DayOfWeek Day of week enum (SUNDAY=0 to SATURDAY=6) sessionIndex uint32 Session index (0-based, usually 0 for main session) <p>Returns</p> <p>Returns <code>*SessionTime</code> struct with From and To times, or error if session not found or request fails.</p>"},{"location":"API_Reference/MT5Service/#getsymbolsessiontrade","title":"GetSymbolSessionTrade","text":"<p>Retrieves trade session times for a symbol. Returns SessionTime struct with time.Time fields. Similar to GetSymbolSessionQuote but for trading sessions instead of quote sessions.</p> <p>Signature <pre><code>func (s *MT5Service) GetSymbolSessionTrade(ctx context.Context, symbol string, dayOfWeek pb.DayOfWeek, sessionIndex uint32) (*SessionTime, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name (e.g., \"EURUSD\") dayOfWeek pb.DayOfWeek Day of week enum (SUNDAY=0 to SATURDAY=6) sessionIndex uint32 Session index (0-based, usually 0 for main session) <p>Returns</p> <p>Returns <code>*SessionTime</code> struct with From and To times, or error if session not found or request fails.</p>"},{"location":"API_Reference/MT5Service/#getsymbolparamsmany","title":"GetSymbolParamsMany","text":"<p>Retrieves comprehensive parameters for multiple symbols. This is the RECOMMENDED method for getting symbol information - returns all important parameters in one call with clean Go structs. Supports filtering, sorting, and pagination for large symbol lists.</p> <p>Signature <pre><code>func (s *MT5Service) GetSymbolParamsMany(ctx context.Context, symbolName *string, sortType *pb.AH_SYMBOL_PARAMS_MANY_SORT_TYPE, pageNumber *int32, itemsPerPage *int32) ([]SymbolParams, int32, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbolName *string Optional filter by symbol name (nil for all symbols) sortType *pb.AH_SYMBOL_PARAMS_MANY_SORT_TYPE Optional sort type enum (nil for default sorting) pageNumber *int32 Optional page number for pagination (nil for page 1) itemsPerPage *int32 Optional items per page (nil for all items) <p>Returns</p> <p>Returns slice of <code>SymbolParams</code> structs, total count of symbols matching filter, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#market-depth_1","title":"\ud83d\udcc8 Market Depth","text":""},{"location":"API_Reference/MT5Service/#subscribemarketdepth","title":"SubscribeMarketDepth","text":"<p>Subscribes to Depth of Market (DOM) updates for a symbol. Must be called before GetMarketDepth. Returns true if subscription successful. Use this to start receiving Level 2 market data.</p> <p>Signature <pre><code>func (s *MT5Service) SubscribeMarketDepth(ctx context.Context, symbol string) (bool, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name to subscribe to (e.g., \"EURUSD\") <p>Returns</p> <p>Returns true if subscription successful, false otherwise, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#getmarketdepth","title":"GetMarketDepth","text":"<p>Retrieves current Depth of Market (DOM) snapshot for a symbol. Requires prior SubscribeMarketDepth call. Returns slice of BookInfo entries with price levels, volumes, and order types.</p> <p>Signature <pre><code>func (s *MT5Service) GetMarketDepth(ctx context.Context, symbol string) ([]BookInfo, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name (must be subscribed first) <p>Returns</p> <p>Returns slice of <code>BookInfo</code> entries with Type (buy/sell), Price, and Volume for each level, or error if not subscribed or request fails.</p>"},{"location":"API_Reference/MT5Service/#unsubscribemarketdepth","title":"UnsubscribeMarketDepth","text":"<p>Unsubscribes from Depth of Market updates. Call this to stop receiving DOM updates and free resources. Returns true if unsubscription successful.</p> <p>Signature <pre><code>func (s *MT5Service) UnsubscribeMarketDepth(ctx context.Context, symbol string) (bool, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control symbol string Symbol name to unsubscribe from <p>Returns</p> <p>Returns true if unsubscription successful, false otherwise, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#positions-orders_1","title":"\ud83d\udcca Positions &amp; Orders","text":""},{"location":"API_Reference/MT5Service/#getpositionstotal","title":"GetPositionsTotal","text":"<p>Returns the count of open positions. Returns int32 directly instead of wrapped protobuf. More convenient than MT5Account.PositionsTotal for quick position counting.</p> <p>Signature <pre><code>func (s *MT5Service) GetPositionsTotal(ctx context.Context) (int32, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control <p>Returns</p> <p>Returns number of open positions as int32, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#getopenedorders","title":"GetOpenedOrders","text":"<p>Retrieves all open positions and pending orders. Returns protobuf data directly (no unnecessary mapping). This matches the C# MT5Service approach for maximum compatibility.</p> <p>Signature <pre><code>func (s *MT5Service) GetOpenedOrders(ctx context.Context, sortMode pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE) (*pb.OpenedOrdersData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control sortMode pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE Sort mode enum for ordering results <p>Returns</p> <p>Returns <code>*pb.OpenedOrdersData</code> containing positions and pending orders with full details, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#getopenedtickets","title":"GetOpenedTickets","text":"<p>Retrieves ticket numbers of open positions and pending orders. This is a lightweight alternative to GetOpenedOrders when you only need ticket IDs. Returns two slices: position tickets and order tickets.</p> <p>Signature <pre><code>func (s *MT5Service) GetOpenedTickets(ctx context.Context) ([]int64, []int64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control <p>Returns</p> <p>Returns <code>positionTickets</code> (slice of open position ticket numbers), <code>orderTickets</code> (slice of pending order ticket numbers), and error if request fails.</p>"},{"location":"API_Reference/MT5Service/#order-calculations-validation_1","title":"\u2696\ufe0f Order Calculations &amp; Validation","text":""},{"location":"API_Reference/MT5Service/#calculatemargin","title":"CalculateMargin","text":"<p>Calculates required margin for a potential order. Use this before placing orders to check if you have enough free margin. Returns margin amount as float64 directly.</p> <p>Signature <pre><code>func (s *MT5Service) CalculateMargin(ctx context.Context, req *pb.OrderCalcMarginRequest) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderCalcMarginRequest Request with Symbol, OrderType, Volume, and OpenPrice <p>Returns</p> <p>Returns required margin in account currency as float64, or error if calculation fails.</p>"},{"location":"API_Reference/MT5Service/#calculateprofit","title":"CalculateProfit","text":"<p>Calculates potential profit for a hypothetical order. Useful for profit/risk calculations before placing actual orders. Returns profit amount as float64 directly.</p> <p>Signature <pre><code>func (s *MT5Service) CalculateProfit(ctx context.Context, req *pb.OrderCalcProfitRequest) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderCalcProfitRequest Request with OrderType, Symbol, Volume, OpenPrice, and ClosePrice <p>Returns</p> <p>Returns estimated profit in account currency as float64, or error if calculation fails.</p>"},{"location":"API_Reference/MT5Service/#checkorder","title":"CheckOrder","text":"<p>Validates an order before sending it to the broker. Returns clean OrderCheckResult struct instead of nested protobuf. Use this to validate orders before PlaceOrder to avoid rejections.</p> <p>Signature <pre><code>func (s *MT5Service) CheckOrder(ctx context.Context, req *pb.OrderCheckRequest) (*OrderCheckResult, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderCheckRequest Request with MqlTradeRequest structure containing trading parameters <p>Returns</p> <p>Returns <code>*OrderCheckResult</code> with validation results including margin requirements and error codes, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#history_1","title":"\ud83d\udcdc History","text":""},{"location":"API_Reference/MT5Service/#getorderhistory","title":"GetOrderHistory","text":"<p>Retrieves historical orders and deals for a time period with pagination. Returns protobuf data directly (no unnecessary mapping). This matches the C# MT5Service approach.</p> <p>Signature <pre><code>func (s *MT5Service) GetOrderHistory(ctx context.Context, from time.Time, to time.Time, sortMode pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE, pageNumber int32, itemsPerPage int32) (*pb.OrdersHistoryData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control from time.Time Start time of history range to time.Time End time of history range sortMode pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE Sort mode enum for ordering results pageNumber int32 Page number for pagination (1-based) itemsPerPage int32 Number of items per page <p>Returns</p> <p>Returns <code>*pb.OrdersHistoryData</code> containing orders and deals with execution details, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#getpositionshistory","title":"GetPositionsHistory","text":"<p>Retrieves closed positions with aggregated P&amp;L data. Returns protobuf data directly (no unnecessary mapping). Supports filtering by time range and pagination.</p> <p>Signature <pre><code>func (s *MT5Service) GetPositionsHistory(ctx context.Context, sortType pb.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE, from *time.Time, to *time.Time, pageNumber *int32, itemsPerPage *int32) (*pb.PositionsHistoryData, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control sortType pb.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE Sort type enum for ordering results from *time.Time Optional start time for position open time filter (nil for no filter) to *time.Time Optional end time for position open time filter (nil for no filter) pageNumber *int32 Optional page number for pagination (nil for page 1) itemsPerPage *int32 Optional items per page (nil for all items) <p>Returns</p> <p>Returns <code>*pb.PositionsHistoryData</code> containing closed positions with profit/loss details, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#trading-operations_1","title":"\ud83d\uded2 Trading Operations","text":""},{"location":"API_Reference/MT5Service/#placeorder","title":"PlaceOrder","text":"<p>Sends a market or pending order to MT5 terminal. Returns clean OrderResult struct with Go native types instead of nested protobuf. Check ReturnedCode for success (10009 means success).</p> <p>Signature <pre><code>func (s *MT5Service) PlaceOrder(ctx context.Context, req *pb.OrderSendRequest) (*OrderResult, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderSendRequest Request with Symbol, Operation, Volume, Price, Slippage, StopLoss, TakeProfit, Comment, ExpertId, StopLimitPrice, ExpirationTimeType, and ExpirationTime <p>Returns</p> <p>Returns <code>*OrderResult</code> struct with execution details (Ticket, Price, Volume, ReturnedCode, Comment), or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#modifyorder","title":"ModifyOrder","text":"<p>Modifies an existing order or position (change SL/TP/price). Returns OrderResult with modification details. Check ReturnedCode for success (10009 means success).</p> <p>Signature <pre><code>func (s *MT5Service) ModifyOrder(ctx context.Context, req *pb.OrderModifyRequest) (*OrderResult, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderModifyRequest Request with Ticket, Price (for pending orders), StopLoss, TakeProfit, and optional Expiration <p>Returns</p> <p>Returns <code>*OrderResult</code> struct with modification status and details, or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#closeorder","title":"CloseOrder","text":"<p>Closes a position or deletes a pending order. Returns operation return code (10009 = success). Simpler than PlaceOrder for closing operations.</p> <p>Signature <pre><code>func (s *MT5Service) CloseOrder(ctx context.Context, req *pb.OrderCloseRequest) (uint32, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for timeout and cancellation control req *pb.OrderCloseRequest Request with Ticket, Volume, and Slippage <p>Returns</p> <p>Returns operation return code as uint32 (10009 = success), or error if request fails.</p>"},{"location":"API_Reference/MT5Service/#streaming-methods_1","title":"\ud83d\udce1 Streaming Methods","text":""},{"location":"API_Reference/MT5Service/#streamticks","title":"StreamTicks","text":"<p>Streams real-time ticks for specified symbols. Returns channel of SymbolTick structs with Go native types instead of protobuf (time.Time fields, no manual conversions). The channels close when streaming stops.</p> <p>Signature <pre><code>func (s *MT5Service) StreamTicks(ctx context.Context, symbols []string) (&lt;-chan *SymbolTick, &lt;-chan error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for cancellation (closing ctx stops the stream) symbols []string Slice of symbol names to stream (e.g., []string{\"EURUSD\", \"GBPUSD\"}) <p>Returns</p> <p>Returns read-only channel of <code>*SymbolTick</code> structs with tick data, and read-only channel of errors. Always read from both channels in a select statement.</p>"},{"location":"API_Reference/MT5Service/#streampositionprofits","title":"StreamPositionProfits","text":"<p>Streams real-time profit/loss updates for open positions. Provides P&amp;L updates as market moves, new positions opened, positions modified, and positions closed. The channels close when streaming stops.</p> <p>Signature <pre><code>func (s *MT5Service) StreamPositionProfits(ctx context.Context) (&lt;-chan *pb.OnPositionProfitData, &lt;-chan error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for cancellation (closing ctx stops the stream) <p>Returns</p> <p>Returns read-only channel of <code>*pb.OnPositionProfitData</code> with profit updates, and read-only channel of errors. Always read from both channels in a select statement.</p>"},{"location":"API_Reference/MT5Service/#streamopenedtickets","title":"StreamOpenedTickets","text":"<p>Streams updates to the list of open position and pending order tickets. This is a lightweight alternative to StreamTradeUpdates when you only need ticket IDs. The channels close when streaming stops.</p> <p>Signature <pre><code>func (s *MT5Service) StreamOpenedTickets(ctx context.Context) (&lt;-chan *pb.OnPositionsAndPendingOrdersTicketsData, &lt;-chan error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for cancellation (closing ctx stops the stream) <p>Returns</p> <p>Returns read-only channel of <code>*pb.OnPositionsAndPendingOrdersTicketsData</code> with ticket lists, and read-only channel of errors. Always read from both channels in a select statement.</p>"},{"location":"API_Reference/MT5Service/#streamtradeupdates","title":"StreamTradeUpdates","text":"<p>Streams trade events (new/disappeared orders and positions, history updates). Provides real-time notifications about orders and positions opened, orders and positions closed/cancelled, and history orders and deals. The channels close when streaming stops.</p> <p>Signature <pre><code>func (s *MT5Service) StreamTradeUpdates(ctx context.Context) (&lt;-chan *pb.OnTradeData, &lt;-chan error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for cancellation (closing ctx stops the stream) <p>Returns</p> <p>Returns read-only channel of <code>*pb.OnTradeData</code> with trade events, and read-only channel of errors. Always read from both channels in a select statement.</p>"},{"location":"API_Reference/MT5Service/#streamtransactions","title":"StreamTransactions","text":"<p>Streams all trade transaction events (most detailed streaming method). This is the most comprehensive trade event stream providing detailed transaction information about order placement, modification, deletion, deal execution, position opening, modification, closing, and all intermediate states.</p> <p>Signature <pre><code>func (s *MT5Service) StreamTransactions(ctx context.Context) (&lt;-chan *pb.OnTradeTransactionData, &lt;-chan error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ctx context.Context Context for cancellation (closing ctx stops the stream) <p>Returns</p> <p>Returns read-only channel of <code>*pb.OnTradeTransactionData</code> with transaction details, and read-only channel of errors. Always read from both channels in a select statement.</p>"},{"location":"API_Reference/MT5Sugar/","title":"MT5Sugar API Reference","text":"<p>Note: Complete API reference for examples/mt5/MT5Sugar.go with enhanced navigation. Single-page format for easy browsing.</p> <p>MT5Sugar is the high-level API wrapper providing ultra-simple one-liner methods for all common MT5 operations. It automatically handles contexts, timeouts, and provides smart defaults for all parameters.</p>"},{"location":"API_Reference/MT5Sugar/#table-of-contents","title":"Table of Contents","text":""},{"location":"API_Reference/MT5Sugar/#connection-health","title":"\ud83d\udce1 Connection &amp; Health","text":"<ul> <li>NewMT5Sugar</li> <li>QuickConnect</li> <li>IsConnected</li> <li>Ping</li> <li>GetAccount</li> <li>GetService</li> </ul>"},{"location":"API_Reference/MT5Sugar/#account-information","title":"\ud83d\udcb0 Account Information","text":"<ul> <li>GetAccountInfo</li> <li>GetBalance</li> <li>GetEquity</li> <li>GetMargin</li> <li>GetFreeMargin</li> <li>GetMarginLevel</li> <li>GetProfit</li> <li>GetDailyStats</li> </ul>"},{"location":"API_Reference/MT5Sugar/#position-queries","title":"\ud83d\udcca Position Queries","text":"<ul> <li>GetOpenPositions</li> <li>GetPositionByTicket</li> <li>GetPositionsBySymbol</li> <li>CountOpenPositions</li> <li>HasOpenPosition</li> <li>GetProfitBySymbol</li> <li>GetTotalProfit</li> </ul>"},{"location":"API_Reference/MT5Sugar/#price-information","title":"\ud83d\udcc8 Price Information","text":"<ul> <li>GetBid</li> <li>GetAsk</li> <li>GetSpread</li> <li>GetPriceInfo</li> <li>WaitForPrice</li> </ul>"},{"location":"API_Reference/MT5Sugar/#symbol-information","title":"\ud83d\udd22 Symbol Information","text":"<ul> <li>GetAllSymbols</li> <li>GetSymbolInfo</li> <li>GetSymbolDigits</li> <li>GetMinStopLevel</li> <li>IsSymbolAvailable</li> </ul>"},{"location":"API_Reference/MT5Sugar/#market-orders","title":"\ud83d\uded2 Market Orders","text":"<ul> <li>BuyMarket</li> <li>BuyMarketWithSLTP</li> <li>BuyMarketWithPips</li> <li>SellMarket</li> <li>SellMarketWithSLTP</li> <li>SellMarketWithPips</li> </ul>"},{"location":"API_Reference/MT5Sugar/#pending-orders","title":"\u23f3 Pending Orders","text":"<ul> <li>BuyLimit</li> <li>BuyLimitWithSLTP</li> <li>BuyStop</li> <li>SellLimit</li> <li>SellLimitWithSLTP</li> <li>SellStop</li> </ul>"},{"location":"API_Reference/MT5Sugar/#position-management","title":"\u270f\ufe0f Position Management","text":"<ul> <li>ClosePosition</li> <li>ClosePositionPartial</li> <li>CloseAllPositions</li> <li>ModifyPositionSLTP</li> </ul>"},{"location":"API_Reference/MT5Sugar/#history-statistics","title":"\ud83d\udcdc History &amp; Statistics","text":"<ul> <li>GetDealsToday</li> <li>GetDealsYesterday</li> <li>GetDealsThisWeek</li> <li>GetDealsThisMonth</li> <li>GetDealsDateRange</li> <li>GetProfitToday</li> <li>GetProfitThisWeek</li> <li>GetProfitThisMonth</li> </ul>"},{"location":"API_Reference/MT5Sugar/#risk-management","title":"\u2696\ufe0f Risk Management","text":"<ul> <li>CalculatePositionSize</li> <li>CalculateRequiredMargin</li> <li>CalculateSLTP</li> <li>CanOpenPosition</li> <li>GetMaxLotSize</li> </ul>"},{"location":"API_Reference/MT5Sugar/#connection-health_1","title":"\ud83d\udce1 Connection &amp; Health","text":""},{"location":"API_Reference/MT5Sugar/#newmt5sugar","title":"NewMT5Sugar","text":"<p>Creates a new MT5Sugar instance with the provided credentials. This is the main entry point for using the Sugar API. It initializes both the low-level Account and mid-level Service layers automatically.</p> <p>Signature <pre><code>func NewMT5Sugar(user uint64, password string, grpcServer string) (*MT5Sugar, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description user uint64 MT5 account login number password string MT5 account password grpcServer string gRPC server address (host:port, e.g., \"mt5.server.com:443\") <p>Returns</p> <p>Returns <code>*MT5Sugar</code> instance ready for connection, or error if initialization fails.</p>"},{"location":"API_Reference/MT5Sugar/#quickconnect","title":"QuickConnect","text":"<p>Connects to MT5 terminal using cluster name (RECOMMENDED). This is the easiest connection method - just provide your broker's cluster name. Automatically sets up EURUSD as base chart symbol and uses 30-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) QuickConnect(clusterName string) error\n</code></pre></p> <p>Parameters</p> Parameter Type Description clusterName string MT5 cluster identifier (e.g., \"FxPro-MT5 Demo\", \"ICMarkets-Live02\") <p>Returns</p> <p>Returns error if connection fails, nil on success.</p>"},{"location":"API_Reference/MT5Sugar/#isconnected","title":"IsConnected","text":"<p>Checks if the connection to MT5 terminal is alive. This is a quick boolean check using 3-second timeout. Returns false if connection is dead or health check times out. Does not return errors.</p> <p>Signature <pre><code>func (s *MT5Sugar) IsConnected() bool\n</code></pre></p> <p>Returns</p> <p>Returns true if connected and alive, false otherwise.</p>"},{"location":"API_Reference/MT5Sugar/#ping","title":"Ping","text":"<p>Verifies the connection health to MT5 terminal with detailed error reporting. Unlike IsConnected(), this method returns an error explaining why connection failed. Uses 3-second timeout. Useful for debugging connection issues.</p> <p>Signature <pre><code>func (s *MT5Sugar) Ping() error\n</code></pre></p> <p>Returns</p> <p>Returns error with details if ping fails or connection is dead, nil if healthy.</p>"},{"location":"API_Reference/MT5Sugar/#getaccount","title":"GetAccount","text":"<p>Returns the underlying MT5Account instance for low-level operations. Use this when you need direct access to protobuf structures or maximum control over request parameters. Required for closing the gRPC connection.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetAccount() *MT5Account\n</code></pre></p> <p>Returns</p> <p>Returns <code>*MT5Account</code> instance used by the underlying Service layer.</p>"},{"location":"API_Reference/MT5Sugar/#getservice","title":"GetService","text":"<p>Returns the underlying MT5Service instance for operations that require more control than Sugar API provides. Use this when you need access to mid-level API features like custom timeouts or advanced parameters.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetService() *MT5Service\n</code></pre></p> <p>Returns</p> <p>Returns <code>*MT5Service</code> instance used by this Sugar wrapper.</p>"},{"location":"API_Reference/MT5Sugar/#account-information_1","title":"\ud83d\udcb0 Account Information","text":""},{"location":"API_Reference/MT5Sugar/#getaccountinfo","title":"GetAccountInfo","text":"<p>Retrieves complete account information in one call. This is more efficient than calling individual Get* methods. Perfect for account monitoring dashboards or trading reports. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetAccountInfo() (*AccountInfo, error)\n</code></pre></p> <p>Returns</p> <p>Returns <code>*AccountInfo</code> structure with all account data, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getbalance","title":"GetBalance","text":"<p>Returns the current account balance (deposit amount). This is the initial deposit plus/minus closed position profits/losses, not affected by floating profit. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetBalance() (float64, error)\n</code></pre></p> <p>Returns</p> <p>Returns current balance as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getequity","title":"GetEquity","text":"<p>Returns the current account equity (balance + floating profit). Equity = Balance + Profit from open positions. This is the real-time value of your account including unrealized gains/losses. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetEquity() (float64, error)\n</code></pre></p> <p>Returns</p> <p>Returns current equity as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getmargin","title":"GetMargin","text":"<p>Returns the amount of margin currently used by open positions. This is the collateral locked by the broker for your active trades. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetMargin() (float64, error)\n</code></pre></p> <p>Returns</p> <p>Returns used margin as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getfreemargin","title":"GetFreeMargin","text":"<p>Returns the amount of margin available for new positions. Free Margin = Equity - Used Margin. This is how much you can use for new trades. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetFreeMargin() (float64, error)\n</code></pre></p> <p>Returns</p> <p>Returns free margin as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getmarginlevel","title":"GetMarginLevel","text":"<p>Returns the margin level percentage. Margin Level = (Equity / Used Margin) * 100. Values below 100% indicate danger of margin call. Returns 0 if no positions are open. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetMarginLevel() (float64, error)\n</code></pre></p> <p>Returns</p> <p>Returns margin level percentage as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getprofit","title":"GetProfit","text":"<p>Returns the total floating profit/loss from all open positions. This is the unrealized profit that's not yet added to balance. Positive values mean profit, negative mean loss. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetProfit() (float64, error)\n</code></pre></p> <p>Returns</p> <p>Returns total floating P/L as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#position-queries_1","title":"\ud83d\udcca Position Queries","text":""},{"location":"API_Reference/MT5Sugar/#getopenpositions","title":"GetOpenPositions","text":"<p>Returns all currently open positions as protobuf PositionInfo structures. The positions are sorted by open time (oldest first). Each PositionInfo contains full details: ticket, symbol, type, volume, open price, current profit, SL/TP, etc. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetOpenPositions() ([]*pb.PositionInfo, error)\n</code></pre></p> <p>Returns</p> <p>Returns slice of <code>*pb.PositionInfo</code> with all open positions, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getpositionbyticket","title":"GetPositionByTicket","text":"<p>Finds and returns a specific position by its ticket number. This is useful when you need detailed information about a position you opened earlier. Returns nil if position not found (may have been closed). Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetPositionByTicket(ticket uint64) (*pb.PositionInfo, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description ticket uint64 Position ticket number to search for <p>Returns</p> <p>Returns <code>*pb.PositionInfo</code> for the position, or error if not found or query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getpositionsbysymbol","title":"GetPositionsBySymbol","text":"<p>Returns all open positions for a specific trading symbol. Filters positions by symbol name. Useful for monitoring exposure to a single currency pair or asset. Returns empty slice if no positions found. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetPositionsBySymbol(symbol string) ([]*pb.PositionInfo, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol to filter by (e.g., \"EURUSD\", \"XAUUSD\") <p>Returns</p> <p>Returns slice of <code>*pb.PositionInfo</code> for the symbol, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#countopenpositions","title":"CountOpenPositions","text":"<p>Returns the total number of currently open positions. This is more efficient than len(GetOpenPositions()) as it queries the count directly from MT5 without retrieving full position details. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) CountOpenPositions() (int, error)\n</code></pre></p> <p>Returns</p> <p>Returns total number of open positions (int), or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#hasopenposition","title":"HasOpenPosition","text":"<p>Checks if there are any open positions for a specific symbol. This is a quick boolean check - more efficient than GetPositionsBySymbol when you only need to know if positions exist. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) HasOpenPosition(symbol string) (bool, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol to check (e.g., \"EURUSD\", \"GBPUSD\") <p>Returns</p> <p>Returns true if at least one position exists, false otherwise, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getprofitbysymbol","title":"GetProfitBySymbol","text":"<p>Calculates and returns total floating profit/loss for a specific symbol. This sums up profit from all positions matching the symbol. Useful for tracking per-symbol performance. Returns 0 if no positions for symbol. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetProfitBySymbol(symbol string) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol to calculate profit for (e.g., \"EURUSD\") <p>Returns</p> <p>Returns total profit/loss for symbol as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#gettotalprofit","title":"GetTotalProfit","text":"<p>Calculates and returns total floating profit/loss from all open positions. This sums up the profit field from all positions. Positive value means total profit, negative means total loss. Returns 0 if no positions open. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetTotalProfit() (float64, error)\n</code></pre></p> <p>Returns</p> <p>Returns total profit/loss as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#price-information_1","title":"\ud83d\udcc8 Price Information","text":""},{"location":"API_Reference/MT5Sugar/#getbid","title":"GetBid","text":"<p>Returns the current BID price for the specified symbol. BID is the price at which you can SELL. This is the real-time market price. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetBid(symbol string) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\") <p>Returns</p> <p>Returns current BID price as float64, or error if symbol not found or query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getask","title":"GetAsk","text":"<p>Returns the current ASK price for the specified symbol. ASK is the price at which you can BUY. This is the real-time market price. The spread is ASK - BID. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetAsk(symbol string) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\") <p>Returns</p> <p>Returns current ASK price as float64, or error if symbol not found or query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getspread","title":"GetSpread","text":"<p>Returns the current spread in points for the specified symbol. Spread is the difference between ASK and BID in points (not price units). For EURUSD with 5 digits, 1 point = 0.00001. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetSpread(symbol string) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\") <p>Returns</p> <p>Returns current spread in points as float64, or error if symbol not found.</p>"},{"location":"API_Reference/MT5Sugar/#getpriceinfo","title":"GetPriceInfo","text":"<p>Returns complete price information for the specified symbol. This is a convenience method that retrieves BID, ASK, spread, and timestamp all in one call. More efficient than calling individual methods. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetPriceInfo(symbol string) (*PriceInfo, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\") <p>Returns</p> <p>Returns <code>*PriceInfo</code> structure with all price data, or error if symbol not found.</p>"},{"location":"API_Reference/MT5Sugar/#waitforprice","title":"WaitForPrice","text":"<p>Waits for a price update for the specified symbol with timeout. This method polls for valid price data (BID &gt; 0 and ASK &gt; 0) until timeout expires. Useful for waiting for market to open or for first price tick after connection.</p> <p>Signature <pre><code>func (s *MT5Sugar) WaitForPrice(symbol string, timeout time.Duration) (*PriceInfo, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol to wait for (e.g., \"EURUSD\") timeout time.Duration Maximum time to wait (e.g., 5*time.Second) <p>Returns</p> <p>Returns <code>*PriceInfo</code> with valid price data, or error if timeout expires.</p>"},{"location":"API_Reference/MT5Sugar/#symbol-information_1","title":"\ud83d\udd22 Symbol Information","text":""},{"location":"API_Reference/MT5Sugar/#getallsymbols","title":"GetAllSymbols","text":"<p>Retrieves a list of all available trading symbols. This returns symbol names only (not full info). Useful for discovering available instruments or building symbol selection menus. Uses 15-second timeout (longer than single symbol queries due to potentially large number of symbols).</p> <p>Signature <pre><code>func (s *MT5Sugar) GetAllSymbols() ([]string, error)\n</code></pre></p> <p>Returns</p> <p>Returns slice of symbol names ([]string), or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getsymbolinfo","title":"GetSymbolInfo","text":"<p>Retrieves comprehensive information about a symbol in one call. This is more efficient than calling individual methods for each property. Perfect for validation before placing orders. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetSymbolInfo(symbol string) (*SymbolInfo, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\") <p>Returns</p> <p>Returns <code>*SymbolInfo</code> structure with all important symbol parameters, or error if symbol not found.</p>"},{"location":"API_Reference/MT5Sugar/#getsymboldigits","title":"GetSymbolDigits","text":"<p>Returns the number of decimal places for the symbol price. For example, EURUSD typically has 5 digits (1.08123), gold might have 2. This is essential for proper price formatting and calculations. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetSymbolDigits(symbol string) (int32, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\") <p>Returns</p> <p>Returns number of decimal places (int32), or error if symbol not found.</p>"},{"location":"API_Reference/MT5Sugar/#getminstoplevel","title":"GetMinStopLevel","text":"<p>Returns the minimum allowed distance for Stop Loss/Take Profit in points. This is broker-enforced minimum distance from current price to SL/TP. If 0, there's no minimum (market execution). Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetMinStopLevel(symbol string) (int64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\") <p>Returns</p> <p>Returns minimum stop level in points (int64), or error if symbol not found.</p>"},{"location":"API_Reference/MT5Sugar/#issymbolavailable","title":"IsSymbolAvailable","text":"<p>Checks if a symbol exists and is available for trading. This verifies both existence and trading permissions. More comprehensive than just checking if symbol name is valid. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) IsSymbolAvailable(symbol string) (bool, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Symbol name to check (e.g., \"EURUSD\") <p>Returns</p> <p>Returns true if symbol exists and is tradeable, false otherwise, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#market-orders_1","title":"\ud83d\uded2 Market Orders","text":""},{"location":"API_Reference/MT5Sugar/#buymarket","title":"BuyMarket","text":"<p>Opens a BUY position at current market price (instant execution). This is the simplest way to open a long position. Order executes immediately at best available ASK price. Uses 10-second timeout for order execution.</p> <p>Signature <pre><code>func (s *MT5Sugar) BuyMarket(symbol string, volume float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") volume float64 Lot size (e.g., 0.01 = micro lot, 0.1 = mini lot, 1.0 = standard lot) <p>Returns</p> <p>Returns position ticket number (uint64), or error if order rejected or fails.</p>"},{"location":"API_Reference/MT5Sugar/#buymarketwithsltp","title":"BuyMarketWithSLTP","text":"<p>Opens a BUY position with Stop Loss and Take Profit. This is the recommended way to open positions with risk management built-in. Order executes immediately at market price with SL/TP set. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) BuyMarketWithSLTP(symbol string, volume, sl, tp float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") volume float64 Lot size (e.g., 0.01, 0.1, 1.0) sl float64 Stop Loss price (must be BELOW entry price for BUY) tp float64 Take Profit price (must be ABOVE entry price for BUY) <p>Returns</p> <p>Returns position ticket number (uint64), or error if order rejected.</p>"},{"location":"API_Reference/MT5Sugar/#buymarketwithpips","title":"BuyMarketWithPips","text":"<p>Opens a BUY position with SL/TP specified in pips (not price!). This is more intuitive than BuyMarketWithSLTP - you specify risk/reward in pips and the method calculates exact prices automatically. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) BuyMarketWithPips(symbol string, volume, stopLossPips, takeProfitPips float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\") volume float64 Lot size (e.g., 0.1) stopLossPips float64 Stop Loss distance in pips from entry (e.g., 50) takeProfitPips float64 Take Profit distance in pips from entry (e.g., 100) <p>Returns</p> <p>Returns position ticket number (uint64), or error if order rejected.</p>"},{"location":"API_Reference/MT5Sugar/#sellmarket","title":"SellMarket","text":"<p>Opens a SELL position at current market price (instant execution). This is the simplest way to open a short position. Order executes immediately at best available BID price. Uses 10-second timeout for order execution.</p> <p>Signature <pre><code>func (s *MT5Sugar) SellMarket(symbol string, volume float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") volume float64 Lot size (e.g., 0.01 = micro lot, 0.1 = mini lot, 1.0 = standard lot) <p>Returns</p> <p>Returns position ticket number (uint64), or error if order rejected or fails.</p>"},{"location":"API_Reference/MT5Sugar/#sellmarketwithsltp","title":"SellMarketWithSLTP","text":"<p>Opens a SELL position with Stop Loss and Take Profit. This is the recommended way to open short positions with risk management built-in. Order executes immediately at market price with SL/TP set. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) SellMarketWithSLTP(symbol string, volume, sl, tp float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") volume float64 Lot size (e.g., 0.01, 0.1, 1.0) sl float64 Stop Loss price (must be ABOVE entry price for SELL) tp float64 Take Profit price (must be BELOW entry price for SELL) <p>Returns</p> <p>Returns position ticket number (uint64), or error if order rejected.</p>"},{"location":"API_Reference/MT5Sugar/#sellmarketwithpips","title":"SellMarketWithPips","text":"<p>Opens a SELL position with SL/TP specified in pips (not price!). This is more intuitive than SellMarketWithSLTP - you specify risk/reward in pips and the method calculates exact prices automatically. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) SellMarketWithPips(symbol string, volume, stopLossPips, takeProfitPips float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\") volume float64 Lot size (e.g., 0.1) stopLossPips float64 Stop Loss distance in pips from entry (e.g., 50) takeProfitPips float64 Take Profit distance in pips from entry (e.g., 100) <p>Returns</p> <p>Returns position ticket number (uint64), or error if order rejected.</p>"},{"location":"API_Reference/MT5Sugar/#pending-orders_1","title":"\u23f3 Pending Orders","text":""},{"location":"API_Reference/MT5Sugar/#buylimit","title":"BuyLimit","text":"<p>Places a pending BUY LIMIT order (executes when price drops to specified level). Buy Limit is used to buy at a lower price than current market. Order remains pending until price reaches the specified level or order is cancelled. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) BuyLimit(symbol string, volume, price float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") volume float64 Lot size (e.g., 0.01, 0.1, 1.0) price float64 Entry price (must be BELOW current ASK for Buy Limit) <p>Returns</p> <p>Returns pending order ticket number (uint64), or error if order rejected.</p>"},{"location":"API_Reference/MT5Sugar/#buylimitwithsltp","title":"BuyLimitWithSLTP","text":"<p>Places a BUY LIMIT order with Stop Loss and Take Profit. Combines pending order functionality with automatic risk management. Order remains pending until price reaches entry level. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) BuyLimitWithSLTP(symbol string, volume, price, sl, tp float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") volume float64 Lot size (e.g., 0.01, 0.1, 1.0) price float64 Entry price (must be BELOW current ASK) sl float64 Stop Loss price (must be BELOW entry price) tp float64 Take Profit price (must be ABOVE entry price) <p>Returns</p> <p>Returns pending order ticket number (uint64), or error if order rejected.</p>"},{"location":"API_Reference/MT5Sugar/#buystop","title":"BuyStop","text":"<p>Places a pending BUY STOP order (executes when price rises to specified level). Buy Stop is used to buy at a higher price than current market (breakout trading). Order remains pending until price reaches level or order is cancelled. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) BuyStop(symbol string, volume, price float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") volume float64 Lot size (e.g., 0.01, 0.1, 1.0) price float64 Entry price (must be ABOVE current ASK for Buy Stop) <p>Returns</p> <p>Returns pending order ticket number (uint64), or error if order rejected.</p>"},{"location":"API_Reference/MT5Sugar/#selllimit","title":"SellLimit","text":"<p>Places a pending SELL LIMIT order (executes when price rises to specified level). Sell Limit is used to sell at a higher price than current market. Order remains pending until price reaches the specified level or order is cancelled. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) SellLimit(symbol string, volume, price float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") volume float64 Lot size (e.g., 0.01, 0.1, 1.0) price float64 Entry price (must be ABOVE current BID for Sell Limit) <p>Returns</p> <p>Returns pending order ticket number (uint64), or error if order rejected.</p>"},{"location":"API_Reference/MT5Sugar/#selllimitwithsltp","title":"SellLimitWithSLTP","text":"<p>Places a SELL LIMIT order with Stop Loss and Take Profit. Combines pending order functionality with automatic risk management. Order remains pending until price reaches entry level. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) SellLimitWithSLTP(symbol string, volume, price, sl, tp float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") volume float64 Lot size (e.g., 0.01, 0.1, 1.0) price float64 Entry price (must be ABOVE current BID) sl float64 Stop Loss price (must be ABOVE entry price) tp float64 Take Profit price (must be BELOW entry price) <p>Returns</p> <p>Returns pending order ticket number (uint64), or error if order rejected.</p>"},{"location":"API_Reference/MT5Sugar/#sellstop","title":"SellStop","text":"<p>Places a pending SELL STOP order (executes when price drops to specified level). Sell Stop is used to sell at a lower price than current market (breakout trading). Order remains pending until price reaches level or order is cancelled. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) SellStop(symbol string, volume, price float64) (uint64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") volume float64 Lot size (e.g., 0.01, 0.1, 1.0) price float64 Entry price (must be BELOW current BID for Sell Stop) <p>Returns</p> <p>Returns pending order ticket number (uint64), or error if order rejected.</p>"},{"location":"API_Reference/MT5Sugar/#position-management_1","title":"\u270f\ufe0f Position Management","text":""},{"location":"API_Reference/MT5Sugar/#closeposition","title":"ClosePosition","text":"<p>Closes a position completely by ticket number. This is the simplest way to close an open position. Closes at current market price (BID for long positions, ASK for short positions). Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) ClosePosition(ticket uint64) error\n</code></pre></p> <p>Parameters</p> Parameter Type Description ticket uint64 Position ticket number to close <p>Returns</p> <p>Returns error if close fails or position not found, nil on success.</p>"},{"location":"API_Reference/MT5Sugar/#closepositionpartial","title":"ClosePositionPartial","text":"<p>Closes a specified volume of a position (partial close). This allows you to take partial profit or reduce exposure while keeping position open. Not all brokers support partial closes. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) ClosePositionPartial(ticket uint64, volume float64) error\n</code></pre></p> <p>Parameters</p> Parameter Type Description ticket uint64 Position ticket number volume float64 Volume to close (must be less than position volume) <p>Returns</p> <p>Returns error if close fails, volume invalid, or broker doesn't support partial close.</p>"},{"location":"API_Reference/MT5Sugar/#closeallpositions","title":"CloseAllPositions","text":"<p>Closes all currently open positions across all symbols. Iterates through all positions and attempts to close each one. Continues even if some closes fail. Returns count of successfully closed positions. Uses 30-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) CloseAllPositions() (int, error)\n</code></pre></p> <p>Returns</p> <p>Returns number of positions successfully closed (int), and error if operation fails.</p>"},{"location":"API_Reference/MT5Sugar/#modifypositionsltp","title":"ModifyPositionSLTP","text":"<p>Modifies both Stop Loss and Take Profit in one operation. This is the recommended way to update risk management levels. Uses 10-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) ModifyPositionSLTP(ticket uint64, sl, tp float64) error\n</code></pre></p> <p>Parameters</p> Parameter Type Description ticket uint64 Position ticket number sl float64 New Stop Loss price (must be valid for position direction) tp float64 New Take Profit price (must be valid for position direction) <p>Returns</p> <p>Returns error if modification rejected or fails, nil on success.</p>"},{"location":"API_Reference/MT5Sugar/#history-statistics_1","title":"\ud83d\udcdc History &amp; Statistics","text":""},{"location":"API_Reference/MT5Sugar/#getdealstoday","title":"GetDealsToday","text":"<p>Returns all closed positions (deals) from today (00:00 to now). Automatically calculates today's date range. Each deal contains full information: ticket, symbol, volume, profit, open/close times, etc. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetDealsToday() ([]*pb.PositionHistoryInfo, error)\n</code></pre></p> <p>Returns</p> <p>Returns slice of <code>*pb.PositionHistoryInfo</code> with today's deals, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getdealsyesterday","title":"GetDealsYesterday","text":"<p>Returns all closed positions (deals) from yesterday (full day). Automatically calculates yesterday's date range (00:00 to 23:59:59). Useful for analyzing previous day's performance. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetDealsYesterday() ([]*pb.PositionHistoryInfo, error)\n</code></pre></p> <p>Returns</p> <p>Returns slice of <code>*pb.PositionHistoryInfo</code> with yesterday's deals, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getdealsthisweek","title":"GetDealsThisWeek","text":"<p>Returns all closed positions (deals) from this week. Week starts on Monday. Automatically calculates start of week (Monday 00:00) to current time. Useful for weekly performance tracking. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetDealsThisWeek() ([]*pb.PositionHistoryInfo, error)\n</code></pre></p> <p>Returns</p> <p>Returns slice of <code>*pb.PositionHistoryInfo</code> with this week's deals, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getdealsthismonth","title":"GetDealsThisMonth","text":"<p>Returns all closed positions (deals) from this month. Automatically calculates start of month (1st day 00:00) to current time. Useful for monthly performance tracking and reports. Uses 30-second timeout (longer than day/week queries due to potentially large data volume).</p> <p>Signature <pre><code>func (s *MT5Sugar) GetDealsThisMonth() ([]*pb.PositionHistoryInfo, error)\n</code></pre></p> <p>Returns</p> <p>Returns slice of <code>*pb.PositionHistoryInfo</code> with this month's deals, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getdealsdaterange","title":"GetDealsDateRange","text":"<p>Returns all closed positions (deals) within a custom date range. You specify exact start and end times. Useful for custom period analysis, backtesting, or generating reports for specific time frames. Uses 30-second timeout (longer to accommodate large date ranges with many deals).</p> <p>Signature <pre><code>func (s *MT5Sugar) GetDealsDateRange(from, to time.Time) ([]*pb.PositionHistoryInfo, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description from time.Time Start date/time for the range (inclusive) to time.Time End date/time for the range (inclusive) <p>Returns</p> <p>Returns slice of <code>*pb.PositionHistoryInfo</code> with deals in range, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getprofittoday","title":"GetProfitToday","text":"<p>Calculates and returns total realized profit/loss from today's closed positions. This sums up the profit from all deals closed today (00:00 to now). Positive means net profit, negative means net loss. Returns 0 if no deals today. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetProfitToday() (float64, error)\n</code></pre></p> <p>Returns</p> <p>Returns total profit/loss from today's deals as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getprofitthisweek","title":"GetProfitThisWeek","text":"<p>Calculates and returns total realized profit/loss from this week's deals. This sums up profit from all deals closed this week (Monday to now). Positive means net profit, negative means net loss. Returns 0 if no deals this week. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetProfitThisWeek() (float64, error)\n</code></pre></p> <p>Returns</p> <p>Returns total profit/loss from this week's deals as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getprofitthismonth","title":"GetProfitThisMonth","text":"<p>Calculates and returns total realized profit/loss from this month's deals. This sums up profit from all deals closed this month (1st to now). Positive means net profit, negative means net loss. Returns 0 if no deals this month. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetProfitThisMonth() (float64, error)\n</code></pre></p> <p>Returns</p> <p>Returns total profit/loss from this month's deals as float64, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#getdailystats","title":"GetDailyStats","text":"<p>Calculates trading statistics for today (00:00 to now). This analyzes all closed positions from today and provides performance metrics. Perfect for daily reports and performance tracking. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetDailyStats() (*DailyStats, error)\n</code></pre></p> <p>Returns</p> <p>Returns <code>*DailyStats</code> structure with today's performance, or error if query fails.</p>"},{"location":"API_Reference/MT5Sugar/#risk-management_1","title":"\u2696\ufe0f Risk Management","text":""},{"location":"API_Reference/MT5Sugar/#calculatepositionsize","title":"CalculatePositionSize","text":"<p>Calculates the optimal lot size based on risk percentage with automatic margin limit protection. This is THE MOST IMPORTANT risk management tool - automatically calculates position size considering BOTH risk and margin limits.</p> <p>Algorithm: 1. Calculate size based on risk: (Balance * RiskPercent / 100) / (StopLossPips * PipValue) 2. Calculate max size based on free margin (with 80% safety buffer) 3. Return MINIMUM of the two - prevents margin calls!</p> <p>Signature <pre><code>func (s *MT5Sugar) CalculatePositionSize(symbol string, riskPercent, stopLossPips float64) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\") riskPercent float64 Percentage of balance to risk (e.g., 2.0 = 2%) stopLossPips float64 Stop Loss distance in points (not price!) <p>Returns</p> <p>Returns recommended lot size (float64), or error if calculation fails or insufficient margin.</p>"},{"location":"API_Reference/MT5Sugar/#calculaterequiredmargin","title":"CalculateRequiredMargin","text":"<p>Calculates how much margin is required to open a position. This helps you plan your trades and manage account exposure. Considers leverage and symbol specifications. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) CalculateRequiredMargin(symbol string, volume float64) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\") volume float64 Desired lot size (e.g., 0.1) <p>Returns</p> <p>Returns required margin amount (float64), or error if calculation fails.</p>"},{"location":"API_Reference/MT5Sugar/#calculatesltp","title":"CalculateSLTP","text":"<p>Calculates Stop Loss and Take Profit prices from entry price and pip distances. This converts pip distances to actual prices based on symbol specifications. Handles both BUY and SELL directions correctly. Uses 3-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) CalculateSLTP(symbol, direction string, entryPrice, stopLossPips, takeProfitPips float64) (float64, float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\") direction string \"BUY\" or \"SELL\" entryPrice float64 Entry price (use 0 for current market price) stopLossPips float64 Distance to SL in points (e.g., 50) takeProfitPips float64 Distance to TP in points (e.g., 100) <p>Returns</p> <p>Returns <code>sl</code> (Stop Loss price), <code>tp</code> (Take Profit price), and error if calculation fails.</p>"},{"location":"API_Reference/MT5Sugar/#canopenposition","title":"CanOpenPosition","text":"<p>Checks if it's possible to open a position with specified volume. This performs comprehensive validation: margin check, volume limits, symbol availability. Always call this before PlaceOrder to prevent rejections. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) CanOpenPosition(symbol string, volume float64) (bool, string, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\") volume float64 Desired lot size (e.g., 0.1) <p>Returns</p> <p>Returns <code>can</code> (true if position can be opened), <code>reason</code> (explanation if can't open, empty if can), and error if check failed.</p>"},{"location":"API_Reference/MT5Sugar/#getmaxlotsize","title":"GetMaxLotSize","text":"<p>Calculates the maximum lot size you can open with current free margin. This helps prevent margin calls by showing your maximum trading capacity. Uses conservative estimate with safety buffer. Uses 5-second timeout.</p> <p>Signature <pre><code>func (s *MT5Sugar) GetMaxLotSize(symbol string) (float64, error)\n</code></pre></p> <p>Parameters</p> Parameter Type Description symbol string Trading symbol (e.g., \"EURUSD\") <p>Returns</p> <p>Returns maximum safe lot size (float64), or error if calculation fails.</p>"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/","title":"ENUMs Usage Reference - All Methods","text":"<p>Complete reference for ENUM usage across all GoMT5 API methods</p>"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#summary-statistics","title":"\ud83d\udcca Summary Statistics","text":"Method Group With ENUMs Total Percentage Account Information 4 4 100% \u2705 Symbol Information 7 14 50% Positions &amp; Orders 3 5 60% Market Depth/DOM 1 3 33% Trading Operations 6 6 100% \u2705 Streaming Methods 3 5 60% TOTAL 24 37 65%"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#1-account-information-4-methods","title":"1. Account Information (4 methods)","text":""},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#all-methods-use-enums","title":"\u2705 All methods use ENUMs","text":"Method Description Input ENUMs Output ENUMs AccountSummary Get all account data in one call (RECOMMENDED) - <code>MrpcEnumAccountTradeMode</code> - Account type (DEMO/CONTEST/REAL) AccountInfoDouble Get double properties (Balance, Equity, Margin, etc.) <code>AccountInfoDoublePropertyType</code> - Property selector (14 values: ACCOUNT_BALANCE, ACCOUNT_EQUITY, ACCOUNT_MARGIN, ACCOUNT_MARGIN_FREE, ACCOUNT_MARGIN_LEVEL, ACCOUNT_PROFIT, ACCOUNT_CREDIT, ACCOUNT_MARGIN_SO_CALL, ACCOUNT_MARGIN_SO_SO, ACCOUNT_MARGIN_INITIAL, ACCOUNT_MARGIN_MAINTENANCE, ACCOUNT_ASSETS, ACCOUNT_LIABILITIES, ACCOUNT_COMMISSION_BLOCKED) - AccountInfoInteger Get integer properties (Login, Leverage, etc.) <code>AccountInfoIntegerPropertyType</code> - Property selector (11 values: ACCOUNT_LOGIN, ACCOUNT_TRADE_MODE, ACCOUNT_LEVERAGE, ACCOUNT_LIMIT_ORDERS, ACCOUNT_MARGIN_SO_MODE, ACCOUNT_TRADE_ALLOWED, ACCOUNT_TRADE_EXPERT, ACCOUNT_MARGIN_MODE, ACCOUNT_CURRENCY_DIGITS, ACCOUNT_FIFO_CLOSE, ACCOUNT_HEDGE_ALLOWED) \u26a0\ufe0f Returns <code>int64</code> values that may represent ENUMs (e.g., ACCOUNT_TRADE_MODE: 0=DEMO, 1=CONTEST, 2=REAL) AccountInfoString Get string properties (Currency, Company, etc.) <code>AccountInfoStringPropertyType</code> - Property selector (4 values: ACCOUNT_NAME, ACCOUNT_SERVER, ACCOUNT_CURRENCY, ACCOUNT_COMPANY) -"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#2-symbol-information-14-methods","title":"2. Symbol Information (14 methods)","text":""},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#7-methods-use-enums","title":"7 methods use ENUMs","text":"Method Description Input ENUMs Output ENUMs SymbolsTotal Count total/selected symbols - - SymbolExist Check if symbol exists - - SymbolName Get symbol name by index - - SymbolSelect Add/remove symbol from Market Watch - - SymbolIsSynchronized Check sync status with server - - SymbolInfoDouble Get double properties (Bid, Ask, Point, Volume, etc.) <code>SymbolInfoDoubleProperty</code> - Property selector (SYMBOL_BID, SYMBOL_ASK, SYMBOL_POINT, SYMBOL_VOLUME_MIN, SYMBOL_VOLUME_MAX, etc.) - SymbolInfoInteger Get integer properties (Digits, Spread, Stops Level) <code>SymbolInfoIntegerProperty</code> - Property selector \u26a0\ufe0f Returns <code>int64</code> values that may represent ENUMs: BMT5_ENUM_SYMBOL_TRADE_MODE, BMT5_ENUM_SYMBOL_TRADE_EXECUTION, BMT5_ENUM_SYMBOL_CALC_MODE, BMT5_ENUM_SYMBOL_SWAP_MODE, BMT5_ENUM_SYMBOL_ORDER_GTC_MODE, BMT5_ENUM_SYMBOL_OPTION_RIGHT, BMT5_ENUM_SYMBOL_CHART_MODE, BMT5_ENUM_SYMBOL_SECTOR, BMT5_ENUM_SYMBOL_INDUSTRY SymbolInfoString Get string properties (Description, Base/Profit Currency) <code>SymbolInfoStringProperty</code> - Property selector (SYMBOL_BASIS, SYMBOL_CATEGORY, SYMBOL_COUNTRY, SYMBOL_CURRENCY_BASE, SYMBOL_CURRENCY_PROFIT, SYMBOL_DESCRIPTION, etc.) - SymbolInfoMarginRate Get margin requirements for order types <code>ENUM_ORDER_TYPE</code> - Order type for margin calculation (ORDER_TYPE_BUY, ORDER_TYPE_SELL, ORDER_TYPE_BUY_LIMIT, ORDER_TYPE_SELL_LIMIT, ORDER_TYPE_BUY_STOP, ORDER_TYPE_SELL_STOP, etc.) - SymbolInfoTick Get last tick data with timestamp - - SymbolInfoSessionQuote Get quote session times <code>DayOfWeek</code> - Day of week (SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY) - SymbolInfoSessionTrade Get trade session times <code>DayOfWeek</code> - Day of week (SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY) - SymbolParamsMany Get detailed parameters for multiple symbols <code>AH_SYMBOL_PARAMS_MANY_SORT_TYPE</code> - Sort mode (AH_PARAMS_MANY_SORT_TYPE_SYMBOL_NAME_ASC, AH_PARAMS_MANY_SORT_TYPE_SYMBOL_NAME_DESC, AH_PARAMS_MANY_SORT_TYPE_MQL_INDEX_ASC, AH_PARAMS_MANY_SORT_TYPE_MQL_INDEX_DESC) - TickValueWithSize Get tick value and size information for symbols - -"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#3-positions-orders-information-5-methods","title":"3. Positions &amp; Orders Information (5 methods)","text":""},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#3-methods-use-enums","title":"3 methods use ENUMs","text":"Method Description Input ENUMs Output ENUMs PositionsTotal Count open positions - - OpenedOrders Get all opened orders &amp; positions with full details <code>BMT5_ENUM_OPENED_ORDER_SORT_TYPE</code> - Sort mode In PositionInfo: BMT5_ENUM_POSITION_TYPE (Position type: BUY/SELL), BMT5_ENUM_POSITION_REASON (Open reason)In OpenedOrderInfo: BMT5_ENUM_ORDER_TYPE (Order type), BMT5_ENUM_ORDER_STATE (Order state), BMT5_ENUM_ORDER_TYPE_TIME (Order lifetime), BMT5_ENUM_ORDER_TYPE_FILLING (Fill mode) OpenedOrdersTickets Get only ticket numbers (lightweight) - - OrderHistory Get historical orders with pagination <code>BMT5_ENUM_ORDER_HISTORY_SORT_TYPE</code> - Sort mode In OrderHistoryData: BMT5_ENUM_ORDER_STATE, BMT5_ENUM_ORDER_TYPE, BMT5_ENUM_ORDER_TYPE_TIME, BMT5_ENUM_ORDER_TYPE_FILLINGIn DealHistoryData: BMT5_ENUM_DEAL_ENTRY_TYPE, BMT5_ENUM_DEAL_TYPE, BMT5_ENUM_DEAL_REASON PositionsHistory Get historical positions with P&amp;L <code>AH_ENUM_POSITIONS_HISTORY_SORT_TYPE</code> - Sort mode (AH_SORT_BY_OPEN_TIME_ASC, AH_SORT_BY_OPEN_TIME_DESC, AH_SORT_BY_CLOSE_TIME_ASC, AH_SORT_BY_CLOSE_TIME_DESC, AH_SORT_BY_PROFIT_ASC, AH_SORT_BY_PROFIT_DESC) <code>AH_ENUM_POSITIONS_HISTORY_ORDER_TYPE</code> - Order type in PositionHistoryInfo (AH_ORDER_TYPE_BUY, AH_ORDER_TYPE_SELL, AH_ORDER_TYPE_BUY_LIMIT, AH_ORDER_TYPE_SELL_LIMIT, AH_ORDER_TYPE_BUY_STOP, AH_ORDER_TYPE_SELL_STOP, AH_ORDER_TYPE_BUY_STOP_LIMIT, AH_ORDER_TYPE_SELL_STOP_LIMIT)"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#4-market-depth-dom-3-methods","title":"4. Market Depth / DOM (3 methods)","text":""},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#1-method-uses-enums","title":"1 method uses ENUMs","text":"Method Description Input ENUMs Output ENUMs MarketBookAdd Subscribe to Depth of Market updates - - MarketBookRelease Unsubscribe from DOM - - MarketBookGet Get current market depth snapshot - <code>BookType</code> - Order type in order book (in MrpcMqlBookInfo.Type field): BOOK_TYPE_SELL (sell order/Offer), BOOK_TYPE_BUY (buy order/Bid), BOOK_TYPE_SELL_MARKET (market sell), BOOK_TYPE_BUY_MARKET (market buy)"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#5-trading-operations-6-methods","title":"5. Trading Operations (6 methods)","text":""},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#all-methods-use-enums_1","title":"\u2705 All methods use ENUMs","text":"Method Description Input ENUMs Output ENUMs OrderSend Send market or pending order <code>TMT5_ENUM_ORDER_TYPE</code> - Order type (TMT5_ORDER_TYPE_BUY, TMT5_ORDER_TYPE_SELL, TMT5_ORDER_TYPE_BUY_LIMIT, TMT5_ORDER_TYPE_SELL_LIMIT, TMT5_ORDER_TYPE_BUY_STOP, TMT5_ORDER_TYPE_SELL_STOP, TMT5_ORDER_TYPE_BUY_STOP_LIMIT, TMT5_ORDER_TYPE_SELL_STOP_LIMIT, TMT5_ORDER_TYPE_CLOSE_BY)<code>TMT5_ENUM_ORDER_TYPE_TIME</code> - Order lifetime (TMT5_ORDER_TIME_GTC, TMT5_ORDER_TIME_DAY, TMT5_ORDER_TIME_SPECIFIED, TMT5_ORDER_TIME_SPECIFIED_DAY) - OrderModify Modify existing order parameters <code>TMT5_ENUM_ORDER_TYPE_TIME</code> - Order lifetime (used in ExpirationTimeType field) - OrderClose Close market or pending order - <code>MRPC_ORDER_CLOSE_MODE</code> - Close mode: MRPC_MARKET_ORDER_CLOSE (close market position), MRPC_MARKET_ORDER_PARTIAL_CLOSE (partial close), MRPC_PENDING_ORDER_REMOVE (remove pending order) OrderCheck Validate order before sending <code>MRPC_ENUM_TRADE_REQUEST_ACTIONS</code> - Trade operation action<code>ENUM_ORDER_TYPE_TF</code> - Order type (for TradeFunction)<code>MRPC_ENUM_ORDER_TYPE_FILLING</code> - Fill mode<code>MRPC_ENUM_ORDER_TYPE_TIME</code> - Order lifetime - OrderCalcMargin Calculate required margin <code>ENUM_ORDER_TYPE_TF</code> - Order type (for TradeFunction) - OrderCalcProfit Calculate potential profit/loss <code>ENUM_ORDER_TYPE_TF</code> - Order type (for TradeFunction) -"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#6-streaming-methods-5-methods","title":"6. Streaming Methods (5 methods)","text":""},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#3-methods-use-enums_1","title":"3 methods use ENUMs","text":"Method Description Input ENUMs Output ENUMs OnSymbolTick Stream tick data (Bid/Ask updates) - - OnTrade Stream trade events - <code>MT5_SUB_ENUM_EVENT_GROUP_TYPE</code> - Event type (in OnTradeData.Type field) OnPositionProfit Stream position P&amp;L updates - <code>MT5_SUB_ENUM_EVENT_GROUP_TYPE</code> - Event type (in OnPositionProfitData.Type field) OnPositionsAndPendingOrdersTickets Stream ticket changes - - OnTradeTransaction Stream trade transaction events - 9 unique ENUM types, 11 field uses:1. <code>MT5_SUB_ENUM_EVENT_GROUP_TYPE</code> (OnTradeTransactionData.Type)2. <code>SUB_ENUM_TRADE_TRANSACTION_TYPE</code> (MqlTradeTransaction.Type)3. <code>SUB_ENUM_ORDER_TYPE</code> (used 2\u00d7: MqlTradeTransaction.OrderType, MqlTradeRequest.OrderType)4. <code>SUB_ENUM_ORDER_STATE</code> (MqlTradeTransaction.OrderState)5. <code>SUB_ENUM_DEAL_TYPE</code> (MqlTradeTransaction.DealType)6. <code>SUB_ENUM_ORDER_TYPE_TIME</code> (used 2\u00d7: MqlTradeTransaction.OrderTimeType, MqlTradeRequest.TypeTime)7. <code>SUB_ENUM_TRADE_REQUEST_ACTIONS</code> (MqlTradeRequest.TradeOperationType)8. <code>SUB_ENUM_ORDER_TYPE_FILLING</code> (MqlTradeRequest.OrderTypeFilling)9. <code>MqlErrorTradeCode</code> (MqlTradeResult.TradeReturnCode)"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#code-usage-examples","title":"\ud83d\udd27 Code Usage Examples","text":""},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#1-account-information","title":"1. Account Information","text":"<pre><code>// AccountSummary - Output ENUM\nsummary, _ := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\nswitch summary.AccountTradeMode {\ncase pb.MrpcEnumAccountTradeMode_MRPC_ACCOUNT_TRADE_MODE_DEMO:\n    fmt.Println(\"Demo account\")\ncase pb.MrpcEnumAccountTradeMode_MRPC_ACCOUNT_TRADE_MODE_REAL:\n    fmt.Println(\"Real account\")\n}\n\n// AccountInfoDouble - Input ENUM\nreq := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE,\n}\ndata, _ := account.AccountInfoDouble(ctx, req)\nfmt.Printf(\"Balance: %.2f\\n\", data.RequestedValue)\n</code></pre>"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#2-trading-operations","title":"2. Trading Operations","text":"<pre><code>// OrderSend - Input ENUMs\nreq := &amp;pb.OrderSendRequest{\n    Symbol:    \"EURUSD\",\n    Volume:    0.01,\n    OrderType: pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY,\n    TypeTime:  pb.TMT5_ENUM_ORDER_TYPE_TIME_TMT5_ORDER_TIME_GTC,\n}\nresult, _ := account.OrderSend(ctx, req)\n\n// OrderModify - Input ENUM\nmodifyReq := &amp;pb.OrderModifyRequest{\n    Ticket:             ticket,\n    StopLoss:           &amp;newSL,\n    ExpirationTimeType: pb.TMT5_ENUM_ORDER_TYPE_TIME_TMT5_ORDER_TIME_DAY,\n}\nmodifyResult, _ := account.OrderModify(ctx, modifyReq)\n\n// OrderClose - Output ENUM\ncloseResult, _ := account.OrderClose(ctx, closeReq)\nswitch closeResult.CloseMode {\ncase pb.MRPC_ORDER_CLOSE_MODE_MRPC_MARKET_ORDER_CLOSE:\n    fmt.Println(\"Market order closed\")\ncase pb.MRPC_ORDER_CLOSE_MODE_MRPC_PENDING_ORDER_REMOVE:\n    fmt.Println(\"Pending order removed\")\n}\n</code></pre>"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#3-symbol-information","title":"3. Symbol Information","text":"<pre><code>// SymbolInfoSessionQuote - Input ENUM\nreq := &amp;pb.SymbolInfoSessionQuoteRequest{\n    Symbol:    \"EURUSD\",\n    DayOfWeek: pb.BMT5_ENUM_DAY_OF_WEEK_BMT5_MONDAY,\n}\nsessionData, _ := account.SymbolInfoSessionQuote(ctx, req)\n</code></pre>"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#4-positions-orders","title":"4. Positions &amp; Orders","text":"<pre><code>// OpenedOrders - Input ENUM\nreq := &amp;pb.OpenedOrdersRequest{\n    SortType: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_SORT_BY_TICKET_ASC,\n}\norders, _ := account.OpenedOrders(ctx, req)\n\n// PositionsHistory - Input ENUM\nhistReq := &amp;pb.PositionsHistoryRequest{\n    SortType: pb.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE_AH_SORT_BY_PROFIT_DESC,\n}\nhistory, _ := account.PositionsHistory(ctx, histReq)\n\n// Check Output ENUM in result\nfor _, pos := range history.HistoryPositions {\n    switch pos.OrderType {\n    case pb.AH_ENUM_POSITIONS_HISTORY_ORDER_TYPE_AH_ORDER_TYPE_BUY:\n        fmt.Println(\"Buy position\")\n    case pb.AH_ENUM_POSITIONS_HISTORY_ORDER_TYPE_AH_ORDER_TYPE_SELL:\n        fmt.Println(\"Sell position\")\n    }\n}\n</code></pre>"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#5-market-depth-dom","title":"5. Market Depth / DOM","text":"<pre><code>// MarketBookGet - Output ENUM\nreq := &amp;pb.MarketBookGetRequest{\n    Symbol: \"EURUSD\",\n}\nbookData, _ := account.MarketBookGet(ctx, req)\n\n// Check order types in the book\nfor _, bookInfo := range bookData.MqlBookInfos {\n    switch bookInfo.Type {\n    case pb.BookType_BOOK_TYPE_SELL:\n        fmt.Printf(\"Sell order: Price=%.5f, Volume=%d\\n\", bookInfo.Price, bookInfo.Volume)\n    case pb.BookType_BOOK_TYPE_BUY:\n        fmt.Printf(\"Buy order: Price=%.5f, Volume=%d\\n\", bookInfo.Price, bookInfo.Volume)\n    case pb.BookType_BOOK_TYPE_SELL_MARKET:\n        fmt.Printf(\"Market sell: Price=%.5f, Volume=%d\\n\", bookInfo.Price, bookInfo.Volume)\n    case pb.BookType_BOOK_TYPE_BUY_MARKET:\n        fmt.Printf(\"Market buy: Price=%.5f, Volume=%d\\n\", bookInfo.Price, bookInfo.Volume)\n    }\n}\n</code></pre>"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#6-streaming-methods","title":"6. Streaming Methods","text":"<pre><code>// OnTrade - Output ENUM\ndataChan, errChan := account.OnTrade(ctx, &amp;pb.OnTradeRequest{})\ngo func() {\n    for event := range dataChan {\n        // Check event type\n        switch event.Type {\n        case pb.MT5_SUB_ENUM_EVENT_GROUP_TYPE_OnTrade:\n            fmt.Println(\"Trade event received\")\n            // Process trade data\n        }\n    }\n}()\n\n// OnPositionProfit - Output ENUM\nprofitChan, profitErrChan := account.OnPositionProfit(ctx, &amp;pb.OnPositionProfitRequest{\n    TimerPeriodMilliseconds: 1000,\n    IgnoreEmptyData:         true,\n})\ngo func() {\n    for event := range profitChan {\n        // Check event type (same ENUM as OnTrade)\n        switch event.Type {\n        case pb.MT5_SUB_ENUM_EVENT_GROUP_TYPE_OrderProfit:\n            fmt.Printf(\"Position profit updates: %d new, %d updated, %d deleted\\n\",\n                len(event.NewPositions),\n                len(event.UpdatedPositions),\n                len(event.DeletedPositions))\n        }\n    }\n}()\n\n// OnTradeTransaction - Output ENUMs (9 unique types, 11 uses)\ntxChan, txErrChan := account.OnTradeTransaction(ctx, &amp;pb.OnTradeTransactionRequest{})\ngo func() {\n    for tx := range txChan {\n        // ENUM #1: MT5_SUB_ENUM_EVENT_GROUP_TYPE\n        switch tx.Type {\n        case pb.MT5_SUB_ENUM_EVENT_GROUP_TYPE_TradeTransaction:\n            fmt.Println(\"Trade transaction event\")\n        }\n\n        // ENUM #2-6: In MqlTradeTransaction\n        if tx.TradeTransaction != nil {\n            switch tx.TradeTransaction.Type {\n            case pb.SUB_ENUM_TRADE_TRANSACTION_TYPE_TRADE_TRANSACTION_ORDER_ADD:\n                fmt.Println(\"Order added\")\n            case pb.SUB_ENUM_TRADE_TRANSACTION_TYPE_TRADE_TRANSACTION_DEAL_ADD:\n                fmt.Println(\"Deal added\")\n            }\n\n            switch tx.TradeTransaction.OrderType {\n            case pb.SUB_ENUM_ORDER_TYPE_ORDER_TYPE_BUY:\n                fmt.Println(\"Buy order\")\n            case pb.SUB_ENUM_ORDER_TYPE_ORDER_TYPE_SELL:\n                fmt.Println(\"Sell order\")\n            }\n\n            switch tx.TradeTransaction.OrderState {\n            case pb.SUB_ENUM_ORDER_STATE_ORDER_STATE_STARTED:\n                fmt.Println(\"Order started\")\n            case pb.SUB_ENUM_ORDER_STATE_ORDER_STATE_FILLED:\n                fmt.Println(\"Order filled\")\n            }\n\n            switch tx.TradeTransaction.DealType {\n            case pb.SUB_ENUM_DEAL_TYPE_DEAL_TYPE_BUY:\n                fmt.Println(\"Buy deal\")\n            case pb.SUB_ENUM_DEAL_TYPE_DEAL_TYPE_SELL:\n                fmt.Println(\"Sell deal\")\n            }\n\n            switch tx.TradeTransaction.OrderTimeType {\n            case pb.SUB_ENUM_ORDER_TYPE_TIME_ORDER_TIME_GTC:\n                fmt.Println(\"Good Till Cancel\")\n            }\n        }\n\n        // ENUM #7-8: In MqlTradeRequest\n        if tx.TradeRequest != nil {\n            switch tx.TradeRequest.TradeOperationType {\n            case pb.SUB_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL:\n                fmt.Println(\"Deal action\")\n            case pb.SUB_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_PENDING:\n                fmt.Println(\"Pending order action\")\n            }\n\n            switch tx.TradeRequest.OrderTypeFilling {\n            case pb.SUB_ENUM_ORDER_TYPE_FILLING_ORDER_FILLING_FOK:\n                fmt.Println(\"Fill or Kill\")\n            case pb.SUB_ENUM_ORDER_TYPE_FILLING_ORDER_FILLING_IOC:\n                fmt.Println(\"Immediate or Cancel\")\n            }\n        }\n\n        // ENUM #9: In MqlTradeResult\n        if tx.TradeResult != nil {\n            switch tx.TradeResult.TradeReturnCode {\n            case pb.MqlErrorTradeCode_TRADE_RETCODE_DONE:\n                fmt.Println(\"Trade successful\")\n            case pb.MqlErrorTradeCode_TRADE_RETCODE_REJECT:\n                fmt.Println(\"Trade rejected\")\n            }\n        }\n    }\n}()\n</code></pre>"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#important-notes","title":"\ud83d\udcdd Important Notes","text":""},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#full-name-required-in-go","title":"\ud83d\udd34 Full Name Required in Go","text":"<p>In Go, you MUST write the full ENUM name with prefix:</p> <p>\u2705 Correct: <pre><code>pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE\npb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY\npb.MrpcEnumAccountTradeMode_MRPC_ACCOUNT_TRADE_MODE_DEMO\n</code></pre></p> <p>\u274c Incorrect (won't compile): <pre><code>ACCOUNT_BALANCE           // error: undefined\nORDER_TYPE_BUY           // error: undefined\nACCOUNT_TRADE_MODE_DEMO  // error: undefined\n</code></pre></p>"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#full-name-format","title":"\ud83d\udd34 Full Name Format","text":"<pre><code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;\n\u2502   \u2502            \u2502\n\u2502   \u2502            \u2514\u2500 Constant name\n\u2502   \u2514\u2500 ENUM type\n\u2514\u2500 Package prefix\n</code></pre>"},{"location":"All_Guides/ENUMS_USAGE_REFERENCE/#special-cases","title":"\u26a0\ufe0f Special Cases","text":"<p>1. AccountInfoInteger and SymbolInfoInteger:</p> <ul> <li>Some properties return values that represent ENUMs, but are returned as <code>int64</code></li> <li>These are NOT typed ENUMs, just numbers!</li> <li>You need to manually compare with known values</li> </ul> <p>2. PositionsHistory:</p> <ul> <li>Does NOT return Deal ENUMs (BMT5_ENUM_DEAL_TYPE, BMT5_ENUM_DEAL_REASON, BMT5_ENUM_DEAL_ENTRY_TYPE)</li> <li>Returns only POSITION information, not deals</li> <li>Output ENUM: only AH_ENUM_POSITIONS_HISTORY_ORDER_TYPE</li> </ul> <p>3. OrderModify:</p> <ul> <li>Uses Input ENUM for ExpirationTimeType</li> <li>Does NOT use ENUMs in response (only ReturnedCode as uint32)</li> </ul> <p>4. ReturnedCode:</p> <ul> <li>ReturnedCode field in all trading operations is NOT an ENUM</li> <li>It's a plain uint32 operation return code</li> <li>See RETURN_CODES_REFERENCE.md for code list</li> </ul> <p>5. Streaming Methods - OnPositionProfit:</p> <ul> <li>OnPositionProfit USES Output ENUM: <code>MT5_SUB_ENUM_EVENT_GROUP_TYPE</code> (in Type field of OnPositionProfitData structure)</li> <li>This same ENUM is used in OnTrade and OnTradeTransaction</li> <li>Represents event type in stream (OrderProfit, OrderPlaced, OrderModified, TradeTransaction, etc.)</li> </ul> <p>6. OnTradeTransaction - most complex:</p> <ul> <li>Uses 11 fields with ENUMs (9 unique types) in four nested structures:</li> <li><code>OnTradeTransactionData.Type</code> - MT5_SUB_ENUM_EVENT_GROUP_TYPE</li> <li><code>MqlTradeTransaction</code> - 5 ENUMs (Type, OrderType, OrderState, DealType, OrderTimeType)</li> <li><code>MqlTradeRequest</code> - 4 ENUMs (TradeOperationType, OrderType, OrderTypeFilling, TypeTime)</li> <li><code>MqlTradeResult.TradeReturnCode</code> - MqlErrorTradeCode</li> <li>Some ENUM types are reused in different structures (SUB_ENUM_ORDER_TYPE, SUB_ENUM_ORDER_TYPE_TIME)</li> </ul> <p>7. Methods with Multiple Nested ENUMs:</p> <ul> <li>OrderHistory returns 7 different ENUMs (4 in OrderHistoryData + 3 in DealHistoryData)</li> <li>OpenedOrders returns 6 different ENUMs (3 in PositionInfo + 3 in OpenedOrderInfo)</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/","title":"Getting Started with GoMT5","text":"<p>Welcome to GoMT5 - a comprehensive educational project for learning MT5 trading automation from scratch using Go.</p>"},{"location":"All_Guides/GETTING_STARTED/#prerequisites-and-installation","title":"\ud83d\ude80 Prerequisites and Installation","text":"<p>Before starting work with GoMT5, you need to set up your development environment.</p>"},{"location":"All_Guides/GETTING_STARTED/#step-1-install-go-121","title":"Step 1: Install Go 1.21+","text":"<p>GoMT5 requires Go version 1.21 or higher.</p> <p>Download and install:</p> <ul> <li>Official website: Go Downloads</li> <li>Choose the installer for your platform</li> </ul> <p>Verify installation:</p> <pre><code>go version\n# Should show: go1.21.x or higher\n</code></pre>"},{"location":"All_Guides/GETTING_STARTED/#step-2-install-code-editor","title":"Step 2: Install Code Editor","text":"<p>Visual Studio Code (Recommended):</p> <ul> <li> <p>Download: VS Code</p> </li> <li> <p>Extensions to install:</p> </li> <li> <p>Go (official Go extension from Google)</p> </li> <li>Go Test Explorer (optional)</li> <li>Go Template Support (optional)</li> </ul> <p>GoLand (Alternative):</p> <ul> <li> <p>Download: GoLand by JetBrains</p> </li> <li> <p>Professional IDE for Go with advanced features</p> </li> </ul> <p>You can also use:</p> <ul> <li>Vim/Neovim with vim-go</li> <li>Sublime Text</li> <li>Any text editor + command line</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#step-3-clone-the-repository","title":"Step 3: Clone the Repository","text":"<p>Clone the GoMT5 project from GitHub:</p> <pre><code>git clone https://github.com/MetaRPC/GoMT5\ncd GoMT5\n</code></pre> <p>If you don't have Git installed:</p> <ul> <li>Download from git-scm.com</li> <li>Or download the project as ZIP from GitHub and extract</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#step-4-understanding-the-connection-flow","title":"Step 4: Understanding the Connection Flow","text":"<p>GoMT5 connects to the MT5 terminal via gRPC gateway.</p> <p>Connection flow: <pre><code>GoMT5 \u2192 gRPC \u2192 mt5term Gateway \u2192 MT5 Terminal\n</code></pre></p> <p>What is mt5term Gateway?</p> <ul> <li>External gateway process that bridges GoMT5 with the MT5 terminal</li> <li>Handles connection pooling and session management</li> <li>Connection settings are specified in <code>examples/demos/config/config.json</code></li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#configuration-file-configjson","title":"\ud83d\uddc2\ufe0f Configuration File: config.json","text":"<ul> <li>Before starting work, let's specify your actual credentials in the configuration file.</li> <li>It's better to use a Demo account for learning.</li> </ul> <p>Option 1: In config.json located at path <code>examples/demos/config/config.json</code> there are all fields you need to fill.</p> <pre><code>{\n  \"user\": 591129415,\n  \"password\": \"IpoHj17tYu67@\",\n  \"host\": \"mt5.mrpc.pro\",\n  \"port\": 443,\n  \"grpc_server\": \"mt5.mrpc.pro:443\",\n  \"mt_cluster\": \"FxPro-MT5 Demo\",\n  \"test_symbol\": \"EURUSD\",\n  \"test_volume\": 0.01\n}\n</code></pre> <p>Option 2: Or set up environment variables and substitute your credentials.</p> <pre><code># Linux/Mac\nexport MT5_USER=591129415\nexport MT5_PASSWORD=\"YourPassword\"\nexport MT5_HOST=\"mt5.mrpc.pro\"\nexport MT5_PORT=443\nexport MT5_CLUSTER=\"FxPro-MT5 Demo\" (Or any other broker-server)\n\n# Windows PowerShell\n$env:MT5_USER=\"591129415\"\n$env:MT5_PASSWORD=\"YourPassword\"\n$env:MT5_HOST=\"mt5.mrpc.pro\"\n</code></pre> <p>Configuration parameters explanation:</p> Parameter Description Example user Your MT5 account login number <code>591129415</code> password Your MT5 account password (master password) <code>\"YourPassword\"</code> mt_cluster MT5 server name from your broker <code>\"FxPro-MT5 Demo\"</code> host Gateway host address (provided by MetaRPC) <code>\"mt5.mrpc.pro\"</code> port Gateway port number <code>443</code> (HTTPS) grpc_server Full gRPC server address (combination of host:port) <code>\"mt5.mrpc.pro:443\"</code> test_symbol Default trading symbol for examples <code>\"EURUSD\"</code> test_volume Default volume for testing <code>0.01</code> <p>Important notes:</p> <ul> <li>user, password, mt_cluster - These are your MT5 account credentials</li> <li>host, port - Provided by the MetaRPC team</li> <li>grpc_server - Must match the <code>host:port</code> format</li> <li>test_symbol - Change to your preferred trading symbol</li> <li>test_volume - Adjust for your account size</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#mt5-account-setup","title":"\ud83d\udccb MT5 Account Setup","text":"<p>If you don't have an MT5 demo account yet or need help creating one, refer to the beginner's guide:</p> <p>\ud83d\udc49 MT5 for Beginners - Creating Demo Account</p> <p>This guide covers:</p> <ul> <li>Downloading and installing MT5 terminal</li> <li>Step-by-step demo account creation</li> <li>Understanding master password and investor password</li> <li>Choosing a broker (optional)</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#about-the-project","title":"\ud83c\udfaf About the Project","text":"<p>This project is a demonstration of capabilities of our team's gateway for reproducing methods and functionality. It is designed to help you build your own trading logic system in the future.</p> <p>We will guide you through all major aspects - from basic manual trading to a fully customizable algorithmic trading system. This journey will reveal the full potential of your acquired knowledge and fundamental understanding of trading and markets.</p> <p>What you will learn:</p> <ul> <li>What gRPC methods do and how to use them directly</li> <li>How methods can be modified for your needs</li> <li>How to optimize your Go code for performance</li> <li>How to create convenient input/output systems</li> <li>How to effectively track positions by symbols</li> <li>How to build intelligent risk management systems</li> <li>How to work with Go channels and goroutines for real-time streaming</li> </ul> <p>All we ask from you:</p> <p>The desire to learn, learn, and learn again. In the end, this will lead to significant results and, most importantly, to a solid foundation of knowledge in algorithmic trading with Go.</p>"},{"location":"All_Guides/GETTING_STARTED/#project-architecture-three-tier-system","title":"\ud83c\udfd7\ufe0f Project Architecture: Three-Tier System","text":"<p>The project consists of three interconnected files in the <code>examples/mt5/</code> directory, each building upon the previous one. Understanding this chain is key to mastering GoMT5.</p>"},{"location":"All_Guides/GETTING_STARTED/#tier-1-mt5accountgo-low-level-grpc-foundation","title":"Tier 1: MT5Account.go - Low-Level gRPC Foundation","text":"<p>What it is: Direct gRPC calls to the MT5 terminal - the absolute foundation of everything.</p> <p>\ud83d\udcd6 MT5Account Master Overview</p> <p>File: <code>package/Helpers/MT5Account.go</code> (2300+ lines)</p> <ul> <li>Raw protocol buffer messages and gRPC communication</li> <li>Maximum control and flexibility over each request/response</li> <li>All other tiers use this internally</li> <li>Automatic reconnection with exponential backoff</li> <li>40+ methods, covering all MT5 operations</li> <li>Best for: Advanced users who need granular control</li> </ul> <p>Key features:</p> <ul> <li>Context-based timeout management</li> <li>Two-channel streaming (dataChan, errChan)</li> <li>Built-in retry logic for network failures</li> <li>Session management with UUID tracking</li> </ul> <p>\ud83d\udcda Two-Level Documentation:</p> <p>For each MT5Account method, two types of documentation are available:</p> <ol> <li>Main reference - brief method description, parameters, return values</li> <li> <p>Example: <code>docs/MT5Account/1. Account_information/AccountInfoDouble.md</code></p> </li> <li> <p>HOW_IT_WORK - detailed step-by-step explanation with live code examples</p> </li> <li>Example: <code>docs/MT5Account/HOW_IT_WORK/1. Account_information_HOW/AccountInfoDouble_HOW.md</code></li> <li>Line-by-line breakdown of actual code from demo files</li> <li>Detailed comments for each step</li> <li>Explanation of protobuf structures and gRPC calls operation</li> </ol> <p>This allows you to quickly find reference OR deeply understand how the method works.</p>"},{"location":"All_Guides/GETTING_STARTED/#tier-2-mt5servicego-convenient-wrappers","title":"Tier 2: MT5Service.go - Convenient Wrappers","text":"<p>What it is: Wrapper methods that simplify working with MT5Account gRPC calls.</p> <p>\ud83d\udcd6 MT5Service API Overview</p> <p>File: <code>examples/mt5/MT5Service.go</code> (1160+ lines)</p> <ul> <li>Simplified error handling and response parsing</li> <li>Pre-configured common operations</li> <li>Go-style return types (no protobuf in signatures)</li> <li>Easier to work with than raw gRPC</li> <li>50+ methods for common trading scenarios</li> <li>Best for: Most common trading scenarios</li> </ul> <p>Key features: - Clean API without using protobuf - Helper functions for common patterns - Structured error handling - Type-safe operations</p>"},{"location":"All_Guides/GETTING_STARTED/#tier-3-mt5sugargo-high-level-helpers","title":"Tier 3: MT5Sugar.go - High-Level Helpers","text":"<p>What it is: Syntactic sugar and helper methods for maximum productivity.</p> <p>\ud83d\udcd6 MT5Sugar API Overview</p> <p>File: <code>examples/mt5/MT5Sugar.go</code> (2200+ lines)</p> <ul> <li>One-line operations for common tasks</li> <li>Smart defaults and automatic parameter inference</li> <li>Risk-based position size calculation</li> <li>SL/TP calculation based on pips</li> <li>Most intuitive and beginner-friendly</li> <li>Best for: Quick prototyping and simple strategies</li> </ul> <p>Key features:</p> <ul> <li><code>BuyMarket(symbol, volume)</code> - one line to open a position</li> <li><code>CalculatePositionSize(symbol, riskPercent, slPips)</code> - automatic volume calculation by risk</li> <li><code>BuyMarketWithPips(symbol, volume, slPips, tpPips)</code> - open with SL/TP in pips</li> <li><code>GetBalance()</code>, <code>GetEquity()</code> - instant account information</li> <li><code>CloseAllPositions()</code> - emergency exit</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#understanding-the-chain","title":"\ud83d\udcda Understanding the Chain","text":"<p>This three-file chain represents the evolution from low-level control to high-level convenience:</p> <pre><code>MT5Sugar.go (easiest, highest abstraction)\n    \u2193 uses\nMT5Service.go (convenient wrappers)\n    \u2193 uses\nMT5Account.go (raw gRPC, foundation)\n    \u2193 communicates with\nMT5 Terminal (via gateway)\n</code></pre> <p>Each overview document includes:</p> <ul> <li>Detailed method descriptions with parameters</li> <li>Return types and error handling patterns</li> <li>Usage examples and best practices</li> <li>Common patterns and pitfalls to avoid</li> <li>Go-specific guidance (goroutines, channels, context)</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#recommended-learning-paths","title":"\ud83c\udf93 Recommended Learning Paths","text":"<p>Path A: For Go Developers (Bottom-Up Approach)</p> <p>If you have experience with Go and want to understand everything deeply:</p> <ol> <li>Start with MT5Account - Study the gRPC foundation and context patterns</li> <li>Move to MT5Service - Understand convenient wrappers</li> <li>Finish with MT5Sugar - Appreciate high-level abstractions</li> </ol> <p>\u2705 This path gives you full control and deep understanding.</p> <p>Path B: For Traders (Top-Down Approach)</p> <p>If you're new to trading automation and want quick results:</p> <ol> <li>Start with MT5Sugar - Easy, intuitive methods for quick trading</li> <li>Move to MT5Service - Learn more advanced patterns as needed</li> <li>Deep dive into MT5Account - Understand the foundation for full control</li> </ol> <p>\u2705 This path allows you to start trading quickly, leaving room for growth.</p>"},{"location":"All_Guides/GETTING_STARTED/#demo-examples","title":"\ud83d\udcc2 Demo Examples","text":"<p>You can explore demo files that showcase various aspects of the SDK. These files are organized by complexity level and are located in the <code>examples/demos/</code> folder.</p> <p>Each file includes inline code comments explaining what each operation does.</p>"},{"location":"All_Guides/GETTING_STARTED/#examplesdemoslowlevel-mt5account-low-level","title":"examples/demos/lowlevel/ (MT5Account - Low Level)","text":"<p>Protobuf/gRPC methods - full control, maximum flexibility:</p> <ul> <li>01_general_operations.go - Information methods (account, symbols, positions, ticks)</li> <li>02_trading_operations.go - Trading operations (calculations, validation, orders)</li> <li>03_streaming_methods.go - Streaming methods (real-time ticks, deals, positions)</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#examplesdemosservice-mt5service-mid-level","title":"examples/demos/service/ (MT5Service - Mid Level)","text":"<p>Go wrappers over protobuf - native types, more convenient to work with:</p> <ul> <li>04_service_demo.go - Service API wrappers (account, symbols, positions, orders)</li> <li>05_service_streaming.go - Service API streaming methods (ticks, deals, profits)</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#examplesdemossugar-mt5sugar-high-level","title":"examples/demos/sugar/ (MT5Sugar - High Level)","text":"<p>High-level API - maximum simplification, one line of code:</p> <ul> <li>06_sugar_basics.go - Basics: connection, balance, prices</li> <li>07_sugar_trading.go - Trading: market/pending orders, SL/TP</li> <li>08_sugar_positions.go - Positions: queries, modification, closing</li> <li>09_sugar_history.go - History: deals, profit over period</li> <li>10_sugar_advanced.go - Advanced: risk management, symbol info, helpers</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#examplesdemosorchestrators-strategies","title":"examples/demos/orchestrators/ (Strategies)","text":"<p>Full-fledged trading strategies - examples of complex automation:</p> <ul> <li>11_trailing_stop.go - Automatic trailing stop manager</li> <li>12_position_scaler.go - Position scaling</li> <li>13_grid_trader.go - Grid trading for sideways market</li> <li>14_risk_manager.go - Automatic risk management</li> <li>15_portfolio_rebalancer.go - Portfolio rebalancing</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#examplesdemoshelpers","title":"examples/demos/helpers/","text":"<p>Helper utilities and tools:</p> <ul> <li>17_protobuf_inspector.go - Interactive protobuf types explorer</li> <li>connection.go - Connection helper</li> <li>error_helper.go - Error handling</li> <li>progress_bar.go - Progress indicator</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#examplesdemosusercode","title":"examples/demos/usercode/","text":"<p>Sandbox for your custom code:</p> <ul> <li>18_usercode.go - Template file for your own trading logic</li> </ul> <p>\ud83d\udcd6 User Code Sandbox Guide</p>"},{"location":"All_Guides/GETTING_STARTED/#running-examples-with-maingo","title":"\ud83c\udfae Running Examples with main.go","text":""},{"location":"All_Guides/GETTING_STARTED/#what-is-maingo","title":"What is main.go?","text":"<p><code>examples/demos/main.go</code> is the single entry point for all GoMT5 demo examples. It works as a dispatcher that:</p> <ol> <li>Runs any example by number or readable name (alias)</li> <li>Manages connection to MT5 via gRPC (creation, validation, closing)</li> <li>Loads configuration from <code>config/config.json</code> (credentials, server)</li> <li>Ensures clean exit (graceful shutdown, connection closing)</li> <li>Shows interactive menu for example selection (if run without parameters)</li> </ol> <p>Benefits of centralized main.go:</p> <ul> <li>No need to copy connection code into each example</li> <li>All examples use one configuration</li> <li>Easy to switch between examples</li> <li>Automatic error handling and cleanup</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#two-ways-to-run","title":"\ud83d\udfe2 Two Ways to Run","text":""},{"location":"All_Guides/GETTING_STARTED/#method-1-interactive-menu-recommended-for-learning","title":"Method 1: Interactive Menu (recommended for learning)","text":"<p>Run without parameters - a menu with all available examples will appear:</p> <pre><code>cd examples/demos\ngo run main.go\n</code></pre> <p>You will see: <pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551              GoMT5 - DEMONSTRATION EXAMPLES               \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\nSelect an example to run:\n\n[LOW-LEVEL] MT5Account - Direct gRPC/Protobuf\n  1  - General operations (account, symbols, positions)\n  2  - Trading operations (orders, modify, close)\n  3  - Streaming methods (real-time ticks, trades)\n\n[MID-LEVEL] MT5Service - Go Wrappers\n  4  - Service API demo\n  5  - Service streaming demo\n\n[HIGH-LEVEL] MT5Sugar - Convenience API\n  6  - Sugar basics (connection, balance, prices)\n  7  - Sugar trading (market orders, pending orders)\n  8  - Sugar positions (query, modify, close)\n  9  - Sugar history (deals, profit calculations)\n  10 - Sugar advanced (risk management, symbol info)\n\n[ORCHESTRATORS] Trading Strategies\n  11 - Trailing Stop Manager\n  12 - Position Scaler (pyramiding/averaging)\n  13 - Grid Trader\n  14 - Risk Manager\n  15 - Portfolio Rebalancer\n\n[PRESETS] Complete Systems\n  16 - Adaptive Market Preset\n\n[TOOLS]\n  17 - Protobuf Inspector (explore data structures)\n  18 - User Code Sandbox (your custom code)\n\nEnter number or alias (or 'x' to exit):\n</code></pre></p>"},{"location":"All_Guides/GETTING_STARTED/#method-2-direct-run-quick-access","title":"Method 2: Direct Run (quick access)","text":"<p>If you know what you want to run, use number or alias:</p> <pre><code>cd examples/demos\n\n# By number\ngo run main.go 1        # Will run example #1\ngo run main.go 11       # Will run Trailing Stop\ngo run main.go 18       # Will run User Sandbox\n\n# By alias (more memorable)\ngo run main.go lowlevel01       # Same as 1\ngo run main.go trailing         # Same as 11\ngo run main.go usercode         # Same as 18\ngo run main.go inspect          # Protobuf Inspector\n</code></pre>"},{"location":"All_Guides/GETTING_STARTED/#full-command-table","title":"\ud83d\udccb Full Command Table","text":""},{"location":"All_Guides/GETTING_STARTED/#low-level-mt5account-direct-grpc-calls","title":"LOW-LEVEL (MT5Account) \u2014 Direct gRPC Calls","text":"Number Aliases File Description 1 <code>lowlevel01</code> <code>lowlevel/01_general_operations.go</code> Information methods: account, symbols, positions, ticks 2 <code>lowlevel02</code> <code>lowlevel/02_trading_operations.go</code> Trading operations: calculations, validation, orders 3 <code>lowlevel03</code>, <code>streaming</code>, <code>stream</code> <code>lowlevel/03_streaming_methods.go</code> Real-time streaming: ticks, deals, positions <p>When to use: Learning low-level protobuf structures, maximum control.</p>"},{"location":"All_Guides/GETTING_STARTED/#mid-level-mt5service-go-wrappers","title":"MID-LEVEL (MT5Service) \u2014 Go Wrappers","text":"Number Aliases File Description 4 <code>service</code>, <code>mid</code> <code>service/04_service_demo.go</code> Service API wrappers: account, symbols, positions, orders 5 <code>service05</code>, <code>servicestreaming</code>, <code>service-streaming</code> <code>service/05_service_streaming.go</code> Service streaming methods: ticks, deals, profits <p>When to use: More convenient work with Go types, less boilerplate code.</p>"},{"location":"All_Guides/GETTING_STARTED/#high-level-mt5sugar-simplified-api","title":"HIGH-LEVEL (MT5Sugar) \u2014 Simplified API","text":"Number Aliases File Description 6 <code>sugar06</code>, <code>sugarbasics</code>, <code>basics</code> <code>sugar/06_sugar_basics.go</code> Basics: connection, balance, prices 7 <code>sugar07</code>, <code>sugartrading</code>, <code>trading</code> <code>sugar/07_sugar_trading.go</code> Trading: market/pending orders, SL/TP 8 <code>sugar08</code>, <code>sugarpositions</code>, <code>positions</code> <code>sugar/08_sugar_positions.go</code> Positions: queries, modification, closing 9 <code>sugar09</code>, <code>sugarhistory</code>, <code>history</code> <code>sugar/09_sugar_history.go</code> History: deals over period, profit calculation 10 <code>sugar10</code>, <code>sugaradvanced</code>, <code>advanced</code> <code>sugar/10_sugar_advanced.go</code> Advanced: risk management, symbol info <p>When to use: Quick prototyping, simple scripts, one line of code.</p>"},{"location":"All_Guides/GETTING_STARTED/#orchestrators-trading-strategies","title":"ORCHESTRATORS \u2014 Trading Strategies","text":"Number Aliases File Description 11 <code>trailing</code>, <code>trailingstop</code> <code>orchestrators/11_trailing_stop.go</code> Automatic trailing stop manager 12 <code>scaler</code>, <code>positionscaler</code> <code>orchestrators/12_position_scaler.go</code> Position scaling (pyramiding/averaging) 13 <code>grid</code>, <code>gridtrading</code> <code>orchestrators/13_grid_trader.go</code> Grid trading for sideways market 14 <code>risk</code>, <code>riskmanager</code> <code>orchestrators/14_risk_manager.go</code> Automatic risk management 15 <code>rebalancer</code>, <code>portfolio</code> <code>orchestrators/15_portfolio_rebalancer.go</code> Portfolio rebalancing <p>When to use: Learning complex strategies, combining multiple API methods.</p>"},{"location":"All_Guides/GETTING_STARTED/#presets-ready-made-systems","title":"PRESETS \u2014 Ready-Made Systems","text":"Number Aliases File Description 16 <code>adaptive</code>, <code>preset</code> <code>presets/16_AdaptiveOrchestratorPreset.go</code> Adaptive trading system (multiple orchestrators) <p>When to use: Learning complete trading systems.</p>"},{"location":"All_Guides/GETTING_STARTED/#tools-tools","title":"TOOLS \u2014 Tools","text":"Number Aliases File Description 17 <code>inspect</code>, <code>inspector</code>, <code>proto</code> <code>helpers/17_protobuf_inspector.go</code> Interactive protobuf structures explorer 18 <code>usercode</code>, <code>user</code>, <code>sandbox</code>, <code>custom</code> <code>usercode/18_usercode.go</code> Sandbox for your code <p>When to use:</p> <ul> <li>17: Exploring protobuf message structure</li> <li>18: Writing your own trading logic</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#initial-setup-mandatory","title":"Initial Setup (mandatory!)","text":"<p>Before running any examples, you must install dependencies:</p> <pre><code># 1. Navigate to the examples directory\ncd examples/demos\n\n# 2. Install all dependencies (only once)\ngo mod tidy\n</code></pre> <p>What <code>go mod tidy</code> does:</p> <ul> <li>\u2705 Downloads all necessary Go modules</li> <li>\u2705 Adds missing dependencies to <code>go.mod</code></li> <li>\u2705 Removes unused packages</li> <li>\u2705 Updates <code>go.sum</code> file with checksums</li> <li>\u2705 Prepares the project for running</li> </ul> <p>\u26a0\ufe0f Important: This command needs to be run only ONCE before the first run. After that, all examples will work.</p>"},{"location":"All_Guides/GETTING_STARTED/#usage-examples","title":"Usage Examples","text":""},{"location":"All_Guides/GETTING_STARTED/#initial-learning-with-interactive-menu","title":"Initial Learning (with interactive menu)","text":"<pre><code>cd examples/demos\n\n# Run menu (dependencies already installed above)\ngo run main.go\n\n# Select an example (enter number and press Enter)\n# Start with 1, 2, 3 to understand the basics\n</code></pre>"},{"location":"All_Guides/GETTING_STARTED/#quick-testing-of-specific-functions","title":"Quick Testing of Specific Functions","text":"<pre><code>cd examples/demos\n\n# Testing Sugar API (simplest)\ngo run main.go basics          # Balance, prices\ngo run main.go trading         # Opening orders\ngo run main.go positions       # Working with positions\n\n# Testing orchestrators\ngo run main.go trailing        # Trailing stop\ngo run main.go grid            # Grid trading\ngo run main.go scaler          # Pyramiding/averaging\n\n# Data exploration\ngo run main.go inspect         # View protobuf structures\n\n# Working with your code\ngo run main.go usercode        # Your sandbox\n</code></pre>"},{"location":"All_Guides/GETTING_STARTED/#learning-sequence-recommended","title":"Learning Sequence (recommended)","text":"<pre><code># 1. Start with low level (understanding basics)\ngo run main.go 1               # How gRPC calls work\ngo run main.go 2               # How trading operations execute\n\n# 2. Move to mid level (Go wrappers)\ngo run main.go service         # More convenient API\n\n# 3. Explore high level (simplification)\ngo run main.go basics          # Sugar API - one line of code\ngo run main.go trading         # Simple trading operations\ngo run main.go advanced        # Risk management\n\n# 4. Explore orchestrators (strategies)\ngo run main.go trailing        # Ready-made strategy\ngo run main.go grid            # Complex logic\n\n# 5. Write your code\ngo run main.go usercode        # Your trading logic\n</code></pre>"},{"location":"All_Guides/GETTING_STARTED/#how-maingo-handles-commands","title":"How main.go Handles Commands","text":"<p>Inside <code>main.go</code> there is a large <code>switch</code> block that routes commands:</p> <pre><code>switch arg {\ncase \"1\", \"lowlevel01\":\n    return lowlevel.RunGeneral01()      // \u2192 lowlevel/01_general_operations.go\n\ncase \"11\", \"trailing\", \"trailingstop\":\n    return RunOrchestrator_TrailingStop()  // \u2192 orchestrators/11_trailing_stop.go\n\ncase \"18\", \"usercode\", \"user\", \"sandbox\", \"custom\":\n    return usercode.RunUserCode()          // \u2192 usercode/18_usercode.go\n}\n</code></pre> <p>Each command calls the corresponding function, which:</p> <ol> <li>Gets the connection to MT5 (already created by main.go)</li> <li>Executes the demonstration</li> <li>Returns control to main.go</li> <li>main.go automatically closes the connection</li> </ol> <p>This means: You do NOT need to worry about connection/disconnection in each example!</p>"},{"location":"All_Guides/GETTING_STARTED/#development-dependencies","title":"\ud83d\udd27 Development Dependencies","text":"<p>GoMT5 uses the following key packages:</p> <pre><code>import (\n    // gRPC and protobuf\n    \"google.golang.org/grpc\"\n    \"google.golang.org/protobuf/types/known/emptypb\"\n\n    // Protobuf definitions for MT5\n    pb \"github.com/MetaRPC/GoMT5/package\"\n)\n</code></pre>"},{"location":"All_Guides/GETTING_STARTED/#exploring-advanced-features","title":"\ud83c\udfaf Exploring Advanced Features","text":"<p>After mastering the three-tier chain (MT5Account \u2192 MT5Service \u2192 MT5Sugar), you can explore advanced features:</p>"},{"location":"All_Guides/GETTING_STARTED/#real-time-streaming","title":"Real-Time Streaming","text":"<p>Learn how to work with real-time data streams in Go:</p> <p>\ud83d\udcd6 gRPC Stream Management</p> <p>Topics covered in the guide:</p> <ul> <li>Context-based stream management</li> <li>Reading from two channels (data and errors)</li> <li>Goroutine management and leak prevention</li> <li>Automatic reconnection patterns</li> <li>Multiple concurrent streams</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#protobuf-inspector","title":"Protobuf Inspector","text":"<p>Interactive tool for exploring MT5 API types:</p> <p>\ud83d\udcd6 Protobuf Inspector Guide</p> <p>Run with:</p> <pre><code>cd examples/demos\ngo run main.go inspect\n</code></pre> <p>Features:</p> <ul> <li>Explore 267 protobuf types</li> <li>Search types and fields</li> <li>View enum values</li> <li>Understand message structures</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#building-your-own-system","title":"\ud83d\udee0\ufe0f Building Your Own System","text":"<p>After studying all examples and understanding the architecture, you can start building your own trading system:</p> <p>Sandbox location: <code>examples/demos/usercode/18_usercode.go</code></p> <p>This file is prepared as a starter template for your custom code. Before you start coding here, make sure you've studied:</p> <ol> <li>The three-tier API (MT5Account \u2192 MT5Service \u2192 MT5Sugar)</li> <li>At least a few helper examples to understand the patterns</li> <li>Error handling patterns from examples</li> <li>Stream management, if you need real-time data</li> </ol> <p>\ud83d\udcd6 User Code Sandbox Guide</p> <p>Quick start:</p> <pre><code>cd examples/demos\ngo run main.go 18\n# Edit usercode/18_usercode.go and uncomment examples\n</code></pre>"},{"location":"All_Guides/GETTING_STARTED/#error-handling","title":"Error Handling","text":"<p>GoMT5 has comprehensive error handling:</p> <p>File: <code>package/Helpers/errors.go</code></p> <p>Features:</p> <ul> <li><code>ErrNotConnected</code> - sentinel error for connection problems</li> <li><code>ApiError</code> - wraps protobuf errors with Go methods</li> <li>Trading operation return codes - constants for all MT5 return codes</li> <li>Helper functions: <code>IsRetCodeSuccess()</code>, <code>IsRetCodeRetryable()</code></li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#return-codes-reference","title":"Return Codes Reference","text":"<p>Understanding return code meanings when executing trading operations:</p> <p>\ud83d\udcd6 Return Codes Reference</p> <p>Common codes:</p> <ul> <li><code>10009</code> - Success (market order)</li> <li><code>10008</code> - Success (pending order)</li> <li><code>10019</code> - Insufficient margin</li> <li><code>10016</code> - Invalid stops (SL/TP too close)</li> <li><code>10018</code> - Market closed</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#grpc-stream-management","title":"gRPC Stream Management","text":"<p>If you're working with real-time streaming (ticks, events):</p> <p>\ud83d\udcd6 gRPC Stream Management</p> <p>Critical patterns:</p> <ul> <li>Always use <code>context.WithCancel()</code> or <code>context.WithTimeout()</code></li> <li>Always <code>defer cancel()</code></li> <li>Always read from BOTH channels (data and errors)</li> <li>Use <code>sync.WaitGroup</code> for multiple streams</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#complete-documentation","title":"\ud83d\udcd6 Complete Documentation","text":""},{"location":"All_Guides/GETTING_STARTED/#core-api-documentation","title":"Core API Documentation","text":"<ul> <li>MT5Account Master Overview - Complete low-level API reference</li> <li>MT5Service API Overview - Mid-level wrappers API</li> <li>MT5Sugar API Overview - High-level Sugar API</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#guides-and-tutorials","title":"Guides and Tutorials","text":"<ul> <li>User Code Sandbox Guide - Quick start for custom code</li> <li>gRPC Stream Management - Working with real-time streams</li> <li>Protobuf Inspector Guide - Interactive type explorer</li> <li>Return Codes Reference - Trading operation return codes</li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#code-examples","title":"Code Examples","text":"<p>All examples are located in <code>examples/demos/</code> numbered 01-17.</p>"},{"location":"All_Guides/GETTING_STARTED/#support-and-community","title":"\ud83d\udcac Support and Community","text":"<p>If you encounter problems in the code or have questions about the gateway:</p> <p>Support repository: https://github.com/Moongoord/MetaRPC-Gateway-Support</p> <p>This is a discussion repository where you can:</p> <ul> <li>Ask questions about the gateway</li> <li>Report issues</li> <li>Share your experience</li> <li>Get help from the community</li> </ul> <p>Note: This repository is currently under development and will be available to everyone soon.</p>"},{"location":"All_Guides/GETTING_STARTED/#conclusion","title":"\ud83c\udf93 Conclusion","text":"<p>The MetaRPC team strives to create favorable conditions for learning fundamental trading principles and building algorithmic trading systems with Go.</p> <p>We believe that with diligence and desire to learn, you will be able to master everything - from low-level protocol communication to complex trading systems.</p> <p>Your journey starts here:</p> <ol> <li>Set up the environment (above)</li> <li>Create or configure your MT5 demo account (MT5 for Beginners)</li> <li>Choose a learning path (bottom-up or top-down)</li> <li>Run your first example: <code>go run main.go 1</code></li> <li>Study the code, experiment and create</li> </ol> <p>Good luck on your algorithmic trading journey with Go!</p> <p>\"The foundation of success in algorithmic trading is not only understanding markets, but also understanding the code that interacts with them. Master both, and you will have unlimited possibilities.\"</p> <p>\u2014 MetaRPC Team</p>"},{"location":"All_Guides/GETTING_STARTED/#quick-start-checklist","title":"\ud83d\ude80 Quick Start Checklist","text":"<ul> <li>[ ] Install Go 1.21+ (<code>go version</code>)</li> <li>[ ] Clone the repository</li> <li>[ ] Install VS Code with Go extension</li> <li>[ ] Create <code>config.json</code> with your MT5 credentials</li> <li>[ ] Run <code>cd examples/demos &amp;&amp; go mod tidy</code></li> <li>[ ] Run first example: <code>go run main.go 1</code></li> <li>[ ] Explore the three API tiers</li> <li>[ ] Try protobuf inspector: <code>go run main.go inspect</code></li> <li>[ ] Read the streaming guide if you need real-time data</li> <li>[ ] Start building in <code>18_usercode.go</code></li> </ul>"},{"location":"All_Guides/GETTING_STARTED/#want-results-here-and-now","title":"\u26a1 Want Results Here and Now?","text":"<p>Don't want to clone the entire repository and study the architecture?</p> <p>Need a quick start in your own directory?</p> <p>If you can't wait to try the gRPC gateway capabilities as soon as possible and see your first working code in 10 minutes:</p> <p>\ud83d\udcd6 Your First Project - Project from Scratch</p> <p>What you'll get:</p> <ul> <li>\u2705 Create your project from scratch (without cloning the repository)</li> <li>\u2705 Connect only necessary dependencies</li> <li>\u2705 Write your first low-level method in 10 minutes</li> <li>\u2705 Get account balance and see the result</li> <li>\u2705 Start working with the gateway in your code immediately</li> </ul> <p>Difference in approaches:</p> This Document (GETTING_STARTED) Your First Project Clone ready-made repository Create project from scratch Study examples and architecture Write working code immediately Full SDK immersion Minimal quick start For deep understanding For instant result <p>\ud83d\udca1 Recommendation: After a quick start with Your First Project, return to this document to learn the complete architecture and all SDK capabilities.</p>"},{"location":"All_Guides/GETTING_STARTED/#go-specific-tips","title":"Go-Specific Tips","text":"<p>Effective Go practices used in this project:</p> <ul> <li>Context everywhere - All methods accept <code>context.Context</code> for timeout management</li> <li>Error handling - Always check errors, Go has no exceptions</li> <li>Channels for streams - Two-channel pattern (data, errors)</li> <li>Goroutines - Background processing for streams</li> <li>Defer for cleanup - <code>defer cancel()</code> ensures resource cleanup</li> <li>Interfaces - Clean abstractions between tiers</li> <li>Composition - Sugar embeds Service, Service uses Account</li> </ul> <p>Resources for Go beginners:</p> <ul> <li>Tour of Go - Official interactive tutorial</li> <li>Effective Go - Best practices guide</li> <li>Go by Example - Learning by examples</li> </ul>"},{"location":"All_Guides/GLOSSARY/","title":"GoMT5 Glossary","text":"<p>Project-specific terms and concepts. This glossary covers GoMT5 architecture, components, and trading automation terminology used throughout the codebase.</p>"},{"location":"All_Guides/GLOSSARY/#architectural-terms","title":"\ud83c\udfd7\ufe0f Architectural Terms","text":""},{"location":"All_Guides/GLOSSARY/#three-tier-architecture","title":"Three-Tier Architecture","text":"<p>Core design pattern of GoMT5 with three abstraction levels:</p> <ul> <li>Tier 1 (MT5Account): Low-level gRPC communication with MT5 terminal</li> <li>Tier 2 (MT5Service): Wrapper methods with simplified signatures</li> <li>Tier 3 (MT5Sugar): High-level convenience methods with auto-normalization</li> </ul>"},{"location":"All_Guides/GLOSSARY/#mt5account","title":"MT5Account","text":"<p>Tier 1 - Low-Level API</p> <p>Base layer providing direct access to MT5 terminal via gRPC protocol.</p> <p>Key characteristics:</p> <ul> <li>Raw gRPC calls to MT5 terminal</li> <li>Built-in connection resilience with automatic reconnection</li> <li>Works with protobuf Request/Response objects</li> <li>Full control, maximum complexity</li> <li>40+ methods for all MT5 operations</li> <li>Context-based timeout management</li> <li>Two-channel streaming (dataChan, errChan)</li> </ul> <p>When to use: Custom integrations, need proto-level control, building custom wrappers.</p> <p>Location: <code>package/Helpers/MT5Account.go</code> (2300+ lines)</p> <p>Documentation: MT5Account.Master.Overview.md</p> <p>Key patterns: <pre><code>// Context with timeout\nctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\ndefer cancel()\n\n// Protobuf request/response\nreq := &amp;pb.AccountSummaryRequest{}\nreply, err := account.AccountSummary(ctx, req)\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#mt5service","title":"MT5Service","text":"<p>Tier 2 - Wrappers API</p> <p>Middle layer providing simplified method signatures without proto complexity.</p> <p>Key characteristics:</p> <ul> <li>Direct data return (no proto objects in signatures)</li> <li>Type conversion (proto \u2192 Go primitives/structs)</li> <li>Simplified method names</li> <li>No auto-normalization (you control precision)</li> <li>50+ methods for common scenarios</li> <li>Helper functions for common patterns</li> </ul> <p>When to use: Need wrappers but not auto-normalization, building custom strategies.</p> <p>Location: <code>examples/mt5/MT5Service.go</code> (1160+ lines)</p> <p>Documentation: MT5Service.Overview.md</p> <p>Example: <pre><code>// Service level - clean Go types\naccountInfo, err := service.GetAccountSummary(ctx)\nfmt.Printf(\"Balance: %.2f\\n\", accountInfo.Balance)\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#mt5sugar","title":"MT5Sugar","text":"<p>Tier 3 - Convenience API \u2b50</p> <p>High-level API for common trading operations.</p> <p>Key characteristics:</p> <ul> <li>Auto-normalization of volumes and prices</li> <li>Risk management helpers</li> <li>Batch operations (CloseAllPositions, etc.)</li> <li>Pip-based helpers (BuyMarketWithPips, etc.)</li> <li>One-line operations</li> <li>Simplest API, handles edge cases</li> <li>Best starting point for 95% of use cases</li> </ul> <p>When to use: Rapid development, prototyping, simple strategies.</p> <p>Location: <code>examples/mt5/MT5Sugar.go</code> (2200+ lines)</p> <p>Documentation: MT5Sugar.API_Overview.md</p> <p>Examples: <pre><code>// One line to get balance\nbalance, _ := sugar.GetBalance()\n\n// One line to open position\nticket, _ := sugar.BuyMarket(\"EURUSD\", 0.01)\n\n// Risk-based position sizing (2% with 50 pip SL)\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#technical-concepts","title":"\ud83d\udd27 Technical Concepts","text":""},{"location":"All_Guides/GLOSSARY/#auto-normalization","title":"Auto-Normalization","text":"<p>Automatic adjustment of trading parameters to broker requirements.</p> <p>What gets normalized:</p> <ul> <li>Volumes: Rounded to broker's volume step (e.g., 0.01 lot)</li> <li>Prices: Rounded to symbol's tick size/digits (e.g., 5 decimal places for EURUSD)</li> <li>Stop Loss / Take Profit: Adjusted to symbol precision</li> </ul> <p>Where: Only MT5Sugar tier (MT5Service does not auto-normalize)</p> <p>Example: <pre><code>// You pass: volume=0.0234, price=1.09876543\n// Sugar normalizes to: volume=0.02, price=1.09877\nticket, _ := sugar.BuyMarket(\"EURUSD\", 0.0234)\n</code></pre></p> <p>Methods: <pre><code>// Normalize price to symbol digits\nnormalizedPrice := sugar.NormalizePrice(\"EURUSD\", 1.09876543)\n\n// Normalize volume to broker step\nnormalizedVolume := sugar.NormalizeVolume(\"EURUSD\", 0.0234)\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#risk-based-volume-calculation","title":"Risk-Based Volume Calculation","text":"<p>Calculate position size based on dollar risk rather than fixed lot size.</p> <p>Formula: <code>volume = riskAmount / (stopLossPips \u00d7 pipValue)</code></p> <p>Parameters:</p> <ul> <li><code>riskAmount</code> - Dollar amount you're willing to risk (e.g., $50)</li> <li><code>stopLossPips</code> - Distance to SL in pips (e.g., 20 pips)</li> <li>Result: Lot size that risks exactly $50 if SL hits</li> </ul> <p>Methods (MT5Sugar): <pre><code>// Calculate volume for given risk\nvolume, err := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n// 2% risk with 50 pip SL\n\n// Buy with risk-based calculation\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nticket, err := sugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n\n// Sell with risk-based calculation\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nticket, err := sugar.SellMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre></p> <p>Use case: Consistent risk management across all trades.</p>"},{"location":"All_Guides/GLOSSARY/#points-vs-pips","title":"Points vs Pips","text":"<p>Point: Smallest price movement for a symbol (1 tick).</p> <p>Pip: Traditional forex unit (0.0001 for most pairs).</p> <p>Relationship:</p> <ul> <li>5-digit brokers: 1 pip = 10 points (EURUSD: 1.10000 \u2192 1.10010 = 1 pip)</li> <li>3-digit brokers: 1 pip = 1 point (USDJPY: 110.00 \u2192 110.01 = 1 pip)</li> </ul> <p>In GoMT5: All APIs use points for consistency.</p> <p>Conversion: <pre><code>point, _ := service.GetPoint(ctx, \"EURUSD\")  // 0.00001\npips := points / 10.0  // For 5-digit pairs\n</code></pre></p> <p>Why points? Universal across all instruments (forex, metals, indices, crypto).</p>"},{"location":"All_Guides/GLOSSARY/#pip-based-methods","title":"Pip-Based Methods","text":"<p>Convenience methods that work with pips instead of points for forex traders.</p> <p>Methods (MT5Sugar):</p> <pre><code>// Market orders with SL/TP in pips\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 0.01, 20, 30)\n// SL 20 pips, TP 30 pips\n\nticket, _ := sugar.SellMarketWithPips(\"GBPUSD\", 0.01, 20, 30)\n\n// Pending orders in pips\nticket, _ := sugar.BuyLimitPips(\"EURUSD\", 0.01, 20, 15, 30)\n// 20 pips below Ask, SL 15 pips, TP 30 pips\n\nticket, _ := sugar.BuyStopPips(\"EURUSD\", 0.01, 20, 15, 30)\n// 20 pips above Ask\n\nticket, _ := sugar.SellLimitPips(\"EURUSD\", 0.01, 20, 15, 30)\n// 20 pips above Bid\n\nticket, _ := sugar.SellStopPips(\"EURUSD\", 0.01, 20, 15, 30)\n// 20 pips below Bid\n</code></pre> <p>Benefits:</p> <ul> <li>No manual price calculations needed</li> <li>Think in pips (familiar for forex traders)</li> <li>Automatic normalization</li> <li>Fewer errors than absolute prices</li> </ul>"},{"location":"All_Guides/GLOSSARY/#trailing-stop","title":"Trailing Stop","text":"<p>Dynamic Stop Loss that follows price in profit direction.</p> <p>How it works:</p> <ol> <li>Position opens with initial SL</li> <li>When profit reaches threshold (e.g., +40 pips)</li> <li>SL moves to breakeven or better</li> <li>SL continues to follow price at fixed distance</li> <li>Locks in profit as price moves favorably</li> </ol> <p>Implementation example: <pre><code>currentProfit := position.Profit\ntrailingThreshold := 40.0 // pips\ntrailingDistance := 200.0  // distance in points (20 pips * 10 for 5-digit)\n\nif currentProfit &gt;= trailingThreshold*pipValue {\n    point, _ := service.GetPoint(ctx, symbol)\n    newSL := currentPrice - trailingDistance*point\n\n    if newSL &gt; currentSL {\n        err := sugar.ModifyPosition(ticket, newSL, tp)\n    }\n}\n</code></pre></p> <p>Use case: Locking in profit on trending markets.</p>"},{"location":"All_Guides/GLOSSARY/#hedging","title":"Hedging","text":"<p>Opening opposite position to lock in current profit/loss level.</p> <p>How it works:</p> <ol> <li>Main position open (e.g., BUY EURUSD 0.1 lot)</li> <li>Price moves against you (-50 pips)</li> <li>Hedge triggered: SELL EURUSD 0.1 lot</li> <li>Net position = 0 (loss locked at -50 pips)</li> </ol> <p>Purpose:</p> <ul> <li>Lock losses instead of closing at stop-loss</li> <li>Protect position during volatility/news</li> <li>Wait for better opportunity to exit</li> </ul> <p>Implementation: <pre><code>// Main position\nbuyTicket, _ := sugar.BuyMarket(\"EURUSD\", 0.1)\n\n// ... price moves against you ...\n\n// Hedge\nsellTicket, _ := sugar.SellMarket(\"EURUSD\", 0.1)\n// Net position = 0, loss locked\n</code></pre></p> <p>\u26a0\ufe0f Note: Not all brokers/regulations allow hedging. US brokers typically do not support hedging.</p>"},{"location":"All_Guides/GLOSSARY/#pending-order","title":"Pending Order","text":"<p>Order that executes automatically when price reaches specified level.</p> <p>Types:</p> <ul> <li>BUY LIMIT: Buy at price BELOW current (expect pullback, then up)</li> <li>SELL LIMIT: Sell at price ABOVE current (expect rally, then down)</li> <li>BUY STOP: Buy at price ABOVE current (breakout up)</li> <li>SELL STOP: Sell at price BELOW current (breakout down)</li> </ul> <p>Methods (absolute price): <pre><code>ticket, _ := service.BuyLimit(ctx, symbol, volume, price, sl, tp, 0)\nticket, _ := service.SellLimit(ctx, symbol, volume, price, sl, tp, 0)\nticket, _ := service.BuyStop(ctx, symbol, volume, price, sl, tp, 0)\nticket, _ := service.SellStop(ctx, symbol, volume, price, sl, tp, 0)\n</code></pre></p> <p>Methods (pip-based - Sugar): <pre><code>ticket, _ := sugar.BuyLimitPips(symbol, volume, offsetPips, slPips, tpPips)\nticket, _ := sugar.SellStopPips(symbol, volume, offsetPips, slPips, tpPips)\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#grpc-and-protocol-terms","title":"\ud83d\udd0c gRPC and Protocol Terms","text":""},{"location":"All_Guides/GLOSSARY/#grpc","title":"gRPC","text":"<p>High-performance RPC (Remote Procedure Call) framework using HTTP/2.</p> <p>In GoMT5:</p> <ul> <li>MT5Account tier sends gRPC requests to MT5 terminal</li> <li>Terminal runs gRPC server (configured via gateway)</li> <li>Request/Response pattern for all operations</li> <li>Context-based timeout management</li> </ul> <p>Connection setup: <pre><code>account, err := mt5.NewMT5Account(ctx, \"mt5.mrpc.pro:443\")\nif err != nil {\n    log.Fatal(err)\n}\n\nerr = account.ConnectEx(ctx, &amp;pb.ConnectExRequest{\n    Uuid:      591129415,\n    Password:  \"password\",\n    MtCluster: \"FxPro-MT5 Demo\",\n})\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#context-pattern","title":"Context Pattern","text":"<p>Standard Go way to manage request lifetime, deadlines, and cancellation.</p> <p>All methods accept context.Context: <pre><code>// Context with timeout\nctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\ndefer cancel()\n\n// Use in API calls\nresult, err := account.AccountSummary(ctx, req)\n\n// Context with cancellation (for streams)\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n</code></pre></p> <p>Why context?</p> <ul> <li>Timeout management</li> <li>Cancellation propagation</li> <li>Cleanup guarantees with defer</li> <li>Standard Go pattern</li> </ul> <p>Documentation: Go Context Package</p>"},{"location":"All_Guides/GLOSSARY/#channel-pattern","title":"Channel Pattern","text":"<p>Go's built-in mechanism for goroutine communication, used for streaming.</p> <p>Streaming returns two channels: <pre><code>dataChan, errChan := account.OnSymbolTick(ctx, req)\n\nfor {\n    select {\n    case data, ok := &lt;-dataChan:\n        if !ok {\n            return\n        }\n        // Process tick data\n\n    case err, ok := &lt;-errChan:\n        if !ok {\n            return\n        }\n        // Handle error\n\n    case &lt;-ctx.Done():\n        return\n    }\n}\n</code></pre></p> <p>Critical rules:</p> <ul> <li>Always read from BOTH channels (prevents goroutine leaks)</li> <li>Always use context cancellation (cleanup)</li> <li>Always defer cancel() (ensures cleanup)</li> </ul> <p>Documentation: gRPC Stream Management</p>"},{"location":"All_Guides/GLOSSARY/#return-codes","title":"Return Codes","text":"<p>Protobuf return codes indicating operation success/failure.</p> <p>Common codes:</p> <ul> <li>10009 = Success (TRADE_RETCODE_DONE)</li> <li>10008 = Pending order placed (TRADE_RETCODE_PLACED)</li> <li>10004 = Requote</li> <li>10006 = Request rejected</li> <li>10013 = Invalid request</li> <li>10014 = Invalid volume</li> <li>10015 = Invalid price</li> <li>10016 = Invalid stops</li> <li>10018 = Market closed</li> <li>10019 = Not enough money</li> <li>10031 = No connection to trade server</li> </ul> <p>Always check <code>ReturnedCode</code> in trading operations.</p> <p>Helper functions: <pre><code>import mt5 \"github.com/MetaRPC/GoMT5/package/Helpers\"\n\nif mt5.IsRetCodeSuccess(result.ReturnedCode) {\n    fmt.Println(\"Trade successful!\")\n}\n\nif mt5.IsRetCodeRetryable(result.ReturnedCode) {\n    // Retry with exponential backoff\n}\n\nmessage := mt5.GetRetCodeMessage(result.ReturnedCode)\n</code></pre></p> <p>Documentation: Return Codes Reference</p>"},{"location":"All_Guides/GLOSSARY/#trading-terms-project-context","title":"\ud83c\udf93 Trading Terms (Project Context)","text":""},{"location":"All_Guides/GLOSSARY/#basic-trading-terms","title":"Basic Trading Terms","text":"<p>Core trading concepts that every trader must understand before working with MT5.</p> Term Description Example / Details Bid Price at which broker buys from you (you sell at Bid) EURUSD Bid: 1.10000 Ask Price at which broker sells to you (you buy at Ask) EURUSD Ask: 1.10002 Spread Difference between Ask and Bid (broker's commission) Ask 1.10002 - Bid 1.10000 = 2 pips spread Long / Buy Opening a BUY position (profit when price goes up) Buy EURUSD at 1.10000, close at 1.10050 = +50 pips profit Short / Sell Opening a SELL position (profit when price goes down) Sell EURUSD at 1.10000, close at 1.09950 = +50 pips profit Position Open trade (BUY or SELL) that can result in profit or loss BUY 0.1 lot EURUSD at 1.10000 (currently in profit +$50) Order Command to open a position Market Order (immediate), Pending Order (at specific price) Market Order Order that executes immediately at current price BUY EURUSD at current Ask price Pending Order Order that triggers automatically when price reaches level BUY LIMIT at 1.09950 (when price drops to that level) Lot / Volume Position size (1 lot = 100,000 units of base currency) 0.01 lot = 1,000 units (micro lot) Stop Loss (SL) Price level for automatic loss-limiting exit SL at 1.09950 limits loss to 50 pips Take Profit (TP) Price level for automatic profit-taking exit TP at 1.10050 locks in 50 pips profit Pip Standard unit of price movement (0.0001 for most forex) EURUSD: 1.10000 \u2192 1.10001 = 1 pip Point Smallest price movement (1 tick) For 5-digit broker: 1 pip = 10 points Leverage Borrowed capital from broker (e.g., 1:100) With 1:100, you control $100,000 with $1,000 margin Margin Funds locked as collateral for open positions Open 1 lot EURUSD with 1:100 leverage = $1,000 margin Free Margin Available funds for opening new positions Balance $10,000 - Margin $1,000 = Free Margin $9,000 Balance Account funds without considering open positions Initial deposit + closed trades profit/loss Equity Current account value (Balance \u00b1 floating profit/loss) Balance $10,000 + Floating profit $500 = Equity $10,500 Floating P/L Unrealized profit/loss of open positions Position currently in +$50 profit (not yet closed) Margin Level Ratio of Equity to Margin (%) Equity $10,500 / Margin $1,000 = 1050% Margin Call Warning when Margin Level drops below threshold Broker warns at 100% Margin Level Stop Out Forced closure of positions when Margin Level critically low Broker closes positions at 50% Margin Level Drawdown Decline from peak balance/equity Peak $11,000 \u2192 Current $10,000 = $1,000 drawdown (9.09%) Slippage Difference between expected and executed price Requested 1.10000, executed at 1.10003 = 3 pips slippage <p>Critical for API usage:</p> <ul> <li><code>GetBid()</code> / <code>GetAsk()</code> - Current prices</li> <li><code>GetBalance()</code> / <code>GetEquity()</code> / <code>GetMargin()</code> - Account state</li> <li><code>BuyMarket()</code> / <code>SellMarket()</code> - Open positions</li> <li><code>ClosePosition()</code> - Close positions</li> <li><code>ModifyPosition(ticket, sl, tp)</code> - Modify SL/TP</li> </ul>"},{"location":"All_Guides/GLOSSARY/#risk-amount","title":"Risk Amount","text":"<p>Dollar amount you're willing to risk if Stop Loss hits.</p> <p>Example: $50 risk per trade means if SL hits, you lose exactly $50.</p> <p>Used in:</p> <pre><code>// Calculate volume for 2% risk with 50 pip SL\nvolume, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n\n// Open with risk-based calculation\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n// Risk exactly 2% of balance\n</code></pre>"},{"location":"All_Guides/GLOSSARY/#breakeven","title":"Breakeven","text":"<p>Moving Stop Loss to entry price to eliminate risk.</p> <p>Example:</p> <ul> <li>Entry: BUY at 1.10000</li> <li>Price rises to 1.10050 (+50 pips profit)</li> <li>Move SL from 1.09950 to 1.10000 (breakeven)</li> <li>Now risk-free: worst case = breakeven</li> </ul> <p>Implementation: <pre><code>entryPrice := position.PriceOpen\nbreakevenThreshold := 40.0 // pips\n\nif currentProfit &gt;= breakevenThreshold*pipValue {\n    err := sugar.ModifyPosition(ticket, entryPrice, tp)\n}\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#grid-trading","title":"Grid Trading","text":"<p>Strategy placing multiple pending orders at equal intervals above and below current price.</p> <p>How it works:</p> <ol> <li>Place Buy Limit orders below current price (e.g., every 20 pips)</li> <li>Place Sell Limit orders above current price (e.g., every 20 pips)</li> <li>As price oscillates, orders trigger and close at TP</li> <li>Works best in ranging markets</li> </ol> <p>Example: <pre><code>Price: 1.10000\nBuy Limits:  1.09980 (-20 pips), 1.09960 (-40 pips), 1.09940 (-60 pips)\nSell Limits: 1.10020 (+20 pips), 1.10040 (+40 pips), 1.10060 (+60 pips)\n</code></pre></p> <p>Implementation: <pre><code>gridStep := 20.0 // pips\nlevels := 5\n\nfor i := 1; i &lt;= levels; i++ {\n    sugar.BuyLimitPips(\"EURUSD\", 0.01, float64(i)*gridStep, 15, 30)\n    sugar.SellLimitPips(\"EURUSD\", 0.01, float64(i)*gridStep, 15, 30)\n}\n</code></pre></p> <p>\u26a0\ufe0f Risk: High volatility can trigger many orders, increasing exposure.</p>"},{"location":"All_Guides/GLOSSARY/#scalping","title":"Scalping","text":"<p>Fast trading strategy with small profits (5-25 pips) and tight stops (10-20 pips).</p> <p>Characteristics:</p> <ul> <li>Very short hold times (seconds-minutes)</li> <li>High win rate, small profit per trade</li> <li>Risk:Reward typically 1:1 to 1:2</li> <li>Requires low spreads</li> </ul> <p>Implementation: <pre><code>// Scalp with 10 pip SL, 15 pip TP\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 0.01, 10, 15)\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#news-trading","title":"News Trading","text":"<p>Placing orders on both sides of price before major news events.</p> <p>How it works:</p> <ol> <li>Before news: Place Buy Stop above + Sell Stop below</li> <li>News releases: Price breaks in one direction</li> <li>One order triggers, cancel the other</li> <li>Capture volatility spike</li> </ol> <p>Example: <pre><code>Current price: 1.10000\nBuy Stop:  1.10030 (+30 pips)\nSell Stop: 1.09970 (-30 pips)\nNews \u2192 Price spikes to 1.10050 \u2192 Buy Stop triggers \u2192 Cancel Sell Stop\n</code></pre></p> <p>Implementation: <pre><code>buyTicket, _ := sugar.BuyStopPips(\"EURUSD\", 0.01, 30, 20, 40)\nsellTicket, _ := sugar.SellStopPips(\"EURUSD\", 0.01, 30, 20, 40)\n\n// ... wait for news ...\n\n// Cancel unfilled order\nsugar.DeleteOrder(sellTicket)\n</code></pre></p> <p>\u26a0\ufe0f Risk: Slippage during news can trigger both orders.</p>"},{"location":"All_Guides/GLOSSARY/#volume-limits","title":"Volume Limits","text":"<p>Broker restrictions on position size.</p> <p>Get via: <pre><code>limits, err := service.GetVolumeLimits(ctx, \"EURUSD\")\nminVol := limits.MinVolume    // e.g., 0.01\nmaxVol := limits.MaxVolume    // e.g., 100.0\nstepVol := limits.VolumeStep  // e.g., 0.01\n</code></pre></p> <p>Used for: Auto-normalization in MT5Sugar.</p> <p>Validation: <pre><code>if volume &lt; minVol {\n    volume = minVol\n}\nif volume &gt; maxVol {\n    volume = maxVol\n}\n\n// Round to step\nvolume = math.Round(volume/stepVol) * stepVol\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#maingo","title":"main.go","text":"<p>Main entry point that routes commands to corresponding examples.</p> <p>Key characteristics:</p> <ul> <li>Single entry point for all executable code</li> <li>Command routing by number or alias</li> <li>Helpful error messages for unknown commands</li> <li>Clean shutdown handling</li> </ul> <p>How it works: <pre><code>go run main.go 4\n    \u2193\nmain.go routes to\n    \u2193\nhelpers/04_market_orders.go\n    \u2193\nRunMarketOrdersDemo()\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#config-package","title":"config Package","text":"<p>Configuration loader with support for JSON files and environment variables.</p> <p>Methods:</p> <pre><code>import \"your-project/examples/demos/config\"\n\n// Load from config.json or env vars\ncfg, err := config.LoadConfig()\n\n// Use configuration\nfmt.Printf(\"Host: %s\\n\", cfg.Host)\nfmt.Printf(\"Cluster: %s\\n\", cfg.Cluster)\n</code></pre> <p>Priority: 1. <code>config/config.json</code> (if exists) 2. Environment variables (fallback) 3. Error if nothing found</p> <p>Location: <code>examples/demos/config/config.go</code></p> <p>Documentation: Detailed comments in config.go header</p>"},{"location":"All_Guides/GLOSSARY/#protobuf-inspector","title":"Protobuf Inspector","text":"<p>Interactive tool for exploring MT5 API types.</p> <p>Features:</p> <ul> <li>Explore 267 protobuf types</li> <li>Search types and fields</li> <li>View enum values (67 enums)</li> <li>Understand message structures</li> </ul> <p>Commands:</p> <ul> <li><code>list</code> - Show all types</li> <li><code>&lt;TypeName&gt;</code> - Explore type</li> <li><code>search &lt;text&gt;</code> - Find types</li> <li><code>field &lt;name&gt;</code> - Find types with field</li> <li><code>enum &lt;name&gt;</code> - Show enum values</li> </ul> <p>How to run: <pre><code>cd examples/demos\ngo run main.go inspect\n</code></pre></p> <p>Location: <code>examples/demos/helpers/17_protobuf_inspector.go</code></p> <p>Documentation: Protobuf Inspector Guide</p>"},{"location":"All_Guides/GLOSSARY/#configuration-terms","title":"\u2699\ufe0f Configuration Terms","text":""},{"location":"All_Guides/GLOSSARY/#configjson","title":"config.json","text":"<p>Configuration file for MT5 connection settings. Simply put, where you enter your account credentials to run demonstration examples.</p> <p>Location: <code>examples/demos/config/config.json</code></p> <p>Format: <pre><code>{\n  \"user\": 591129415,\n  \"password\": \"YourPassword\",\n  \"host\": \"mt5.mrpc.pro\",\n  \"port\": 443,\n  \"grpc_server\": \"mt5.mrpc.pro:443\",\n  \"mt_cluster\": \"FxPro-MT5 Demo\",\n  \"test_symbol\": \"EURUSD\",\n  \"test_volume\": 0.01\n}\n</code></pre></p>"},{"location":"All_Guides/GLOSSARY/#environment-variables","title":"Environment Variables","text":"<p>Alternative to config.json for configuration.</p> <p>Variables:</p> <pre><code># Required\nMT5_USER=591129415\nMT5_PASSWORD=\"YourPassword\"\nMT5_HOST=\"mt5.mrpc.pro\"\n\n# Optional (have defaults)\nMT5_PORT=443\nMT5_CLUSTER=\"FxPro-MT5 Demo\"\nMT5_TEST_SYMBOL=\"EURUSD\"\nMT5_TEST_VOLUME=0.01\n</code></pre> <p>Set (Linux/Mac): <pre><code>export MT5_USER=591129415\nexport MT5_PASSWORD=\"YourPassword\"\n</code></pre></p> <p>Set (Windows PowerShell): <pre><code>$env:MT5_USER=\"591129415\"\n$env:MT5_PASSWORD=\"YourPassword\"\n</code></pre></p> <p>Priority: config.json takes precedence over env vars.</p>"},{"location":"All_Guides/GLOSSARY/#cross-component-terms","title":"\ud83d\udd17 Cross-Component Terms","text":""},{"location":"All_Guides/GLOSSARY/#goroutine","title":"Goroutine","text":"<p>Lightweight execution thread in Go.</p> <p>In GoMT5:</p> <ul> <li>Streaming methods spawn background goroutines</li> <li>Must cancel context to stop goroutines</li> <li>Must read from both channels to prevent leaks</li> </ul> <p>Example: <pre><code>// Streaming spawns goroutine\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\n// Background processing\ngo func() {\n    for data := range dataChan {\n        processData(data)\n    }\n}()\n\n// Stop goroutine\ncancel()  // Triggers ctx.Done()\n</code></pre></p> <p>Critical: Always <code>defer cancel()</code> to prevent goroutine leaks.</p> <p>Documentation: gRPC Stream Management</p>"},{"location":"All_Guides/GLOSSARY/#batch-operations","title":"Batch Operations","text":"<p>Executing action across multiple positions/orders at once.</p> <p>Methods (MT5Sugar): <pre><code>// Close positions\ncount, _ := sugar.CloseAllPositions(\"\")          // All positions\ncount, _ := sugar.CloseAllPositions(\"EURUSD\")    // By symbol\n\n// Delete orders\ncount, _ := sugar.DeleteAllOrders(\"\")            // All pending orders\ncount, _ := sugar.DeleteAllOrders(\"EURUSD\")      // By symbol\n</code></pre></p> <p>Use case: Emergency exits, end-of-session cleanup, strategy resets.</p>"},{"location":"All_Guides/GLOSSARY/#history-queries","title":"History Queries","text":"<p>Retrieving past orders and positions for analysis.</p> <p>Methods (MT5Account): <pre><code>// Get order history with pagination\nreq := &amp;pb.OrderHistoryRequest{\n    FromDate: fromTimestamp,\n    ToDate:   toTimestamp,\n    Offset:   0,\n    Limit:    100,\n}\nhistory, err := account.OrderHistory(ctx, req)\n\n// Get position history\nreq := &amp;pb.PositionsHistoryRequest{\n    FromDate: fromTimestamp,\n    ToDate:   toTimestamp,\n    Offset:   0,\n    Limit:    100,\n}\npositions, err := account.PositionsHistory(ctx, req)\n</code></pre></p> <p>Use case: Performance analysis, trade logs, strategy validation.</p>"},{"location":"All_Guides/GLOSSARY/#educational-project","title":"Educational Project","text":"<p>GoMT5 examples and helpers are educational materials and API demonstrations, NOT production trading systems.</p> <p>Implications:</p> <ul> <li>\u2705 Study code and patterns</li> <li>\u2705 Modify for your needs</li> <li>\u2705 Test on demo accounts</li> <li>\u2705 Use as templates for building your strategies</li> <li>\u274c Don't use as-is with real money</li> <li>\u274c Don't expect production-grade risk management</li> <li>\u274c Don't expect proper error handling for all edge cases</li> </ul> <p>Remember: These are educational examples, not battle-tested production systems.</p>"},{"location":"All_Guides/GLOSSARY/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>MT5Account Master Overview - Complete low-level API reference</li> <li>MT5Service API Overview - Mid-level wrappers API</li> <li>MT5Sugar API Overview - High-level Sugar API</li> <li>gRPC Stream Management - Guide to streaming subscriptions</li> <li>Return Codes Reference - Complete return codes reference</li> <li>User Code Sandbox Guide - How to write custom code</li> <li>Getting Started - Setup and quick start guide</li> </ul>"},{"location":"All_Guides/GLOSSARY/#go-specific-terms","title":"Go-Specific Terms","text":""},{"location":"All_Guides/GLOSSARY/#defer-statement","title":"defer Statement","text":"<p>Go's cleanup mechanism that executes when function returns.</p> <p>Critical pattern: <pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()  // \u2705 ALWAYS cleanup\n</code></pre></p> <p>Why important: Guarantees goroutine cleanup and resource release.</p>"},{"location":"All_Guides/GLOSSARY/#select-statement","title":"select Statement","text":"<p>Go's multiplexer for channel operations.</p> <p>Use in streaming: <pre><code>for {\n    select {\n    case data := &lt;-dataChan:\n        // Process data\n    case err := &lt;-errChan:\n        // Handle error\n    case &lt;-ctx.Done():\n        return  // Cleanup\n    }\n}\n</code></pre></p> <p>Why important: Read from multiple channels simultaneously.</p>"},{"location":"All_Guides/GLOSSARY/#interface-composition","title":"Interface Composition","text":"<p>Go's way of combining types.</p> <p>In GoMT5: <pre><code>type MT5Sugar struct {\n    *MT5Service  // Embeds MT5Service\n}\n\ntype MT5Service struct {\n    account *MT5Account  // Uses MT5Account\n}\n</code></pre></p> <p>Result: Sugar has all Service methods + its own methods.</p> <p>\"Trade safely, code cleanly, and may your contexts always cancel gracefully.\"</p>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/","title":"gRPC Streaming and Subscription Management Guide","text":"<p>Complete guide to working with real-time subscriptions in GoMT5</p> <p>This document covers:</p> <ul> <li>\u2705 How to subscribe properly to market data streams</li> <li>\u2705 How to stop subscriptions without goroutine leaks</li> <li>\u2705 Common patterns from simple to advanced</li> <li>\u2705 Architecture and built-in safety mechanisms</li> <li>\u2705 Troubleshooting and best practices</li> </ul>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Quick Start - Simple Subscription</li> <li>Available Streaming Methods</li> <li>Complete Patterns (Simple \u2192 Advanced)</li> <li>Problem: Why Streams Need Management</li> <li>Solutions and Best Practices</li> <li>Architecture and Safety</li> <li>Troubleshooting</li> </ol>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#quick-start-simple-subscription","title":"Quick Start - Simple Subscription","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#1-simplest-pattern-auto-timeout","title":"1\ufe0f\u20e3 Simplest Pattern (Auto-timeout)","text":"<p>Use context.WithTimeout - automatically stops after time expires:</p> <pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    \"your-project/examples/mt5\"\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/google/uuid\"\n)\n\nfunc main() {\n    // Setup connection\n    account, _ := mt5.NewMT5Account(591129415, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    account.ConnectEx(context.Background(), &amp;pb.ConnectExRequest{\n        Uuid:      591129415,\n        Password:  \"password\",\n        MtCluster: \"FxPro-MT5 Demo\",\n    })\n\n    // \u2705 Stream for 10 seconds - stops automatically!\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    req := &amp;pb.OnSymbolTickRequest{SymbolNames: []string{\"EURUSD\", \"GBPUSD\"}}\n    dataChan, errChan := account.OnSymbolTick(ctx, req)\n\n    tickCount := 0\n    for {\n        select {\n        case data, ok := &lt;-dataChan:\n            if !ok {\n                fmt.Println(\"Stream finished\")\n                return\n            }\n            tickCount++\n            fmt.Printf(\"[%d] %s: Bid=%.5f, Ask=%.5f\\n\",\n                tickCount, data.Tick.Symbol, data.Tick.Bid, data.Tick.Ask)\n\n        case err, ok := &lt;-errChan:\n            if !ok {\n                return\n            }\n            fmt.Printf(\"Error: %v\\n\", err)\n\n        case &lt;-ctx.Done():\n            fmt.Println(\"Timeout reached - stopping\")\n            return\n        }\n    }\n    // Done! Context cancelled, goroutines cleaned up \u2705\n}\n</code></pre> <p>When to use: Quick examples, testing, short monitoring sessions</p>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#2-manual-control-pattern","title":"2\ufe0f\u20e3 Manual Control Pattern","text":"<p>For full control - you decide when to stop (e.g., manually via Ctrl+C):</p> <pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\n// Start monitoring in background\ngo func() {\n    req := &amp;pb.OnSymbolTickRequest{SymbolNames: []string{\"EURUSD\"}}\n    dataChan, errChan := account.OnSymbolTick(ctx, req)\n\n    for {\n        select {\n        case data, ok := &lt;-dataChan:\n            if !ok {\n                return\n            }\n            fmt.Printf(\"Price: %.5f\\n\", data.Tick.Bid)\n\n        case err, ok := &lt;-errChan:\n            if !ok {\n                return\n            }\n            fmt.Printf(\"Error: %v\\n\", err)\n\n        case &lt;-ctx.Done():\n            fmt.Println(\"Monitoring stopped\")\n            return\n        }\n    }\n}()\n\n// ... do other work ...\n\n// Stop when needed\ncancel()\ntime.Sleep(100 * time.Millisecond) // Give goroutine time to cleanup\n</code></pre> <p>When to use: Long-term monitoring, background services, production applications</p>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#available-streaming-methods","title":"Available Streaming Methods","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#mt5account-low-level-streams","title":"MT5Account (Low-level Streams)","text":"<p>All streaming methods return two channels: <code>&lt;-chan *Data</code> and <code>&lt;-chan error</code></p> Method Description Returns <code>OnSymbolTick()</code> Real-time price ticks for symbols <code>(&lt;-chan *OnSymbolTickData, &lt;-chan error)</code> <code>OnTrade()</code> Trade events (orders executed, modified, etc.) <code>(&lt;-chan *OnTradeData, &lt;-chan error)</code> <code>OnPositionProfit()</code> Position P&amp;L updates <code>(&lt;-chan *OnPositionProfitData, &lt;-chan error)</code> <code>OnPositionsAndPendingOrdersTickets()</code> Order/position tickets <code>(&lt;-chan *OnPositionsAndPendingOrdersTicketsData, &lt;-chan error)</code> <code>OnTradeTransaction()</code> Low-level trade transaction events <code>(&lt;-chan *OnTradeTransactionData, &lt;-chan error)</code> <p>All require <code>context.Context</code> for stopping!</p> <p>Documentation: Streaming Methods Overview</p> <p>Demonstration: <code>examples/demos/lowlevel/03_streaming_methods.go</code> - examples of using all streaming methods from MT5Account</p>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#complete-patterns-simple-advanced","title":"Complete Patterns (Simple \u2192 Advanced)","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#pattern-1-quick-example-5-10-seconds","title":"Pattern 1: Quick Example (5-10 seconds)","text":"<pre><code>// \u2705 Auto-timeout - perfect for testing\nctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\ndefer cancel()\n\nreq := &amp;pb.OnSymbolTickRequest{SymbolNames: []string{\"EURUSD\"}}\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\nfor {\n    select {\n    case data, ok := &lt;-dataChan:\n        if !ok {\n            return\n        }\n        fmt.Printf(\"Tick: %.5f\\n\", data.Tick.Bid)\n\n    case err := &lt;-errChan:\n        fmt.Printf(\"Error: %v\\n\", err)\n\n    case &lt;-ctx.Done():\n        fmt.Println(\"Timeout - stopping\")\n        return\n    }\n}\n// Stops after 10 seconds automatically \u2705\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#pattern-2-event-limited-streaming","title":"Pattern 2: Event-limited Streaming","text":"<pre><code>// \u2705 Stop after processing N events\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\nreq := &amp;pb.OnSymbolTickRequest{SymbolNames: []string{\"EURUSD\"}}\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\nconst maxEvents = 100\ncount := 0\n\nfor {\n    select {\n    case data, ok := &lt;-dataChan:\n        if !ok {\n            return\n        }\n        count++\n        fmt.Printf(\"[%d] %s: %.5f\\n\", count, data.Tick.Symbol, data.Tick.Bid)\n\n        if count &gt;= maxEvents {\n            fmt.Println(\"Max events reached - stopping\")\n            cancel()\n            return\n        }\n\n    case err := &lt;-errChan:\n        fmt.Printf(\"Error: %v\\n\", err)\n\n    case &lt;-ctx.Done():\n        return\n    }\n}\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#pattern-3-condition-based-stop","title":"Pattern 3: Condition-based Stop","text":"<pre><code>// \u2705 Stop when specific condition is met\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\nreq := &amp;pb.OnSymbolTickRequest{SymbolNames: []string{\"EURUSD\"}}\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\nfor {\n    select {\n    case data, ok := &lt;-dataChan:\n        if !ok {\n            return\n        }\n        fmt.Printf(\"Price: %.5f\\n\", data.Tick.Bid)\n\n        // Stop if price crosses threshold\n        if data.Tick.Bid &gt; 1.10000 {\n            fmt.Println(\"Target price reached!\")\n            cancel()\n            return\n        }\n\n    case err := &lt;-errChan:\n        fmt.Printf(\"Error: %v\\n\", err)\n\n    case &lt;-ctx.Done():\n        return\n    }\n}\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#pattern-4-background-service-with-manual-control","title":"Pattern 4: Background Service with Manual Control","text":"<pre><code>type PriceMonitor struct {\n    ctx    context.Context\n    cancel context.CancelFunc\n    done   chan struct{}\n}\n\nfunc NewPriceMonitor() *PriceMonitor {\n    ctx, cancel := context.WithCancel(context.Background())\n    return &amp;PriceMonitor{\n        ctx:    ctx,\n        cancel: cancel,\n        done:   make(chan struct{}),\n    }\n}\n\nfunc (pm *PriceMonitor) Start(account *mt5.MT5Account, symbols []string) {\n    go pm.monitorPrices(account, symbols)\n}\n\nfunc (pm *PriceMonitor) monitorPrices(account *mt5.MT5Account, symbols []string) {\n    defer close(pm.done)\n\n    req := &amp;pb.OnSymbolTickRequest{SymbolNames: symbols}\n    dataChan, errChan := account.OnSymbolTick(pm.ctx, req)\n\n    for {\n        select {\n        case data, ok := &lt;-dataChan:\n            if !ok {\n                fmt.Println(\"Data channel closed\")\n                return\n            }\n            pm.processTick(data)\n\n        case err, ok := &lt;-errChan:\n            if !ok {\n                fmt.Println(\"Error channel closed\")\n                return\n            }\n            fmt.Printf(\"Stream error: %v\\n\", err)\n\n        case &lt;-pm.ctx.Done():\n            fmt.Println(\"Monitoring stopped gracefully\")\n            return\n        }\n    }\n}\n\nfunc (pm *PriceMonitor) processTick(data *pb.OnSymbolTickData) {\n    fmt.Printf(\"%s: %.5f / %.5f\\n\",\n        data.Tick.Symbol, data.Tick.Bid, data.Tick.Ask)\n    // Your logic here...\n}\n\nfunc (pm *PriceMonitor) Stop() {\n    pm.cancel()\n\n    // Wait for goroutine to finish (with timeout)\n    select {\n    case &lt;-pm.done:\n        fmt.Println(\"Monitor stopped gracefully\")\n    case &lt;-time.After(5 * time.Second):\n        fmt.Println(\"Monitor stop timeout\")\n    }\n}\n\n// Usage:\nmonitor := NewPriceMonitor()\nmonitor.Start(account, []string{\"EURUSD\", \"GBPUSD\"})\n\nfmt.Println(\"Press Enter to stop monitoring...\")\nbufio.NewReader(os.Stdin).ReadBytes('\\n')\n\nmonitor.Stop()\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#pattern-5-multiple-concurrent-streams","title":"Pattern 5: Multiple Concurrent Streams","text":"<pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\n// WaitGroup to track goroutines\nvar wg sync.WaitGroup\n\n// Start tick stream\nwg.Add(1)\ngo func() {\n    defer wg.Done()\n\n    req := &amp;pb.OnSymbolTickRequest{SymbolNames: []string{\"EURUSD\"}}\n    dataChan, errChan := account.OnSymbolTick(ctx, req)\n\n    for {\n        select {\n        case data, ok := &lt;-dataChan:\n            if !ok {\n                return\n            }\n            fmt.Printf(\"Tick: %.5f\\n\", data.Tick.Bid)\n\n        case err := &lt;-errChan:\n            fmt.Printf(\"Tick error: %v\\n\", err)\n\n        case &lt;-ctx.Done():\n            return\n        }\n    }\n}()\n\n// Start trade stream\nwg.Add(1)\ngo func() {\n    defer wg.Done()\n\n    req := &amp;pb.OnTradeRequest{}\n    dataChan, errChan := account.OnTrade(ctx, req)\n\n    for {\n        select {\n        case data, ok := &lt;-dataChan:\n            if !ok {\n                return\n            }\n            fmt.Printf(\"Trade: %v\\n\", data.Type)\n\n        case err := &lt;-errChan:\n            fmt.Printf(\"Trade error: %v\\n\", err)\n\n        case &lt;-ctx.Done():\n            return\n        }\n    }\n}()\n\n// Run for 30 seconds or until manual stop\ntime.Sleep(30 * time.Second)\n\n// Stop all streams\ncancel()\n\n// Wait for all goroutines to finish\nwg.Wait()\nfmt.Println(\"All streams stopped\")\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#pattern-6-error-handling-and-retry-logic","title":"Pattern 6: Error Handling and Retry Logic","text":"<pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\nmaxRetries := 3\nretryDelay := 2 * time.Second\n\nfor attempt := 1; attempt &lt;= maxRetries; attempt++ {\n    fmt.Printf(\"Attempt %d/%d\\n\", attempt, maxRetries)\n\n    req := &amp;pb.OnSymbolTickRequest{SymbolNames: []string{\"EURUSD\"}}\n    dataChan, errChan := account.OnSymbolTick(ctx, req)\n\n    streamBroken := false\n\n    for !streamBroken {\n        select {\n        case data, ok := &lt;-dataChan:\n            if !ok {\n                fmt.Println(\"Data channel closed\")\n                streamBroken = true\n                break\n            }\n            fmt.Printf(\"Price: %.5f\\n\", data.Tick.Bid)\n            attempt = 0 // Reset on successful data\n\n        case err, ok := &lt;-errChan:\n            if !ok {\n                streamBroken = true\n                break\n            }\n            fmt.Printf(\"Stream error: %v\\n\", err)\n            streamBroken = true\n\n        case &lt;-ctx.Done():\n            fmt.Println(\"Context cancelled\")\n            return\n        }\n    }\n\n    if attempt &lt; maxRetries &amp;&amp; ctx.Err() == nil {\n        fmt.Printf(\"Reconnecting in %v...\\n\", retryDelay)\n        time.Sleep(retryDelay)\n\n        // Note: ExecuteStreamWithReconnect handles this automatically!\n        // This pattern is for demonstration - usually not needed\n    }\n}\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#problem-why-streams-need-management","title":"Problem: Why Streams Need Management","text":"<p>When working with gRPC streaming in GoMT5, understanding the stream lifecycle is critical:</p> <p>Stream subscriptions (<code>OnSymbolTick</code>, <code>OnTrade</code>, etc.) are active goroutines with network connections that continue running even after losing reference.</p>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#problem-explanation","title":"Problem Explanation","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#current-implementation","title":"Current Implementation","text":"<pre><code>func (a *MT5Account) OnSymbolTick(ctx context.Context, req *pb.OnSymbolTickRequest)\n    (&lt;-chan *pb.OnSymbolTickData, &lt;-chan error) {\n    // Spawns goroutine...\n    // \u274c Goroutine runs until context is cancelled\n    // \u274c Need to read from BOTH channels to prevent goroutine leak\n}\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#what-happens-without-proper-cleanup","title":"What Happens Without Proper Cleanup","text":"<pre><code>// \u274c BAD: Goroutine continues running forever\ndataChan, errChan := account.OnSymbolTick(context.Background(), req)\n\nfor data := range dataChan {\n    fmt.Printf(\"%s: %.5f\\n\", data.Tick.Symbol, data.Tick.Bid)\n\n    if someCondition {\n        break  // \u274c PROBLEM: Goroutine still running in background!\n               // \u274c PROBLEM: errChan not consumed - goroutine blocked!\n    }\n}\n</code></pre> <p>Result:</p> <ul> <li>Background goroutine continues consuming resources</li> <li>MT5 terminal continues sending updates</li> <li>Goroutine leak - blocked on writing to errChan</li> <li>Memory gradually accumulates</li> <li>Multiple abandoned streams = serious memory leak</li> </ul>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#solutions-and-best-practices","title":"Solutions and Best Practices","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#solution-1-always-use-contextcontext-with-cancel","title":"Solution 1: Always Use context.Context with Cancel \u2705","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#pattern-1-contextwithcancel","title":"Pattern 1: context.WithCancel","text":"<pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()  // \u2705 CRITICAL: Ensures cleanup\n\nreq := &amp;pb.OnSymbolTickRequest{SymbolNames: []string{\"EURUSD\"}}\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\nfor {\n    select {\n    case data, ok := &lt;-dataChan:\n        if !ok {\n            return\n        }\n        fmt.Printf(\"%s: %.5f\\n\", data.Tick.Symbol, data.Tick.Bid)\n\n        if someCondition {\n            cancel()  // \u2705 CORRECT: Stops goroutine\n            return\n        }\n\n    case err, ok := &lt;-errChan:\n        if !ok {\n            return\n        }\n        fmt.Printf(\"Error: %v\\n\", err)\n\n    case &lt;-ctx.Done():\n        return\n    }\n}\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#pattern-2-timeout-with-contextwithtimeout","title":"Pattern 2: Timeout with context.WithTimeout","text":"<pre><code>ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)\ndefer cancel()\n\nreq := &amp;pb.OnSymbolTickRequest{SymbolNames: []string{\"EURUSD\"}}\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\nfor {\n    select {\n    case data := &lt;-dataChan:\n        if data != nil {\n            fmt.Printf(\"Price: %.5f\\n\", data.Tick.Bid)\n        }\n\n    case err := &lt;-errChan:\n        if err != nil {\n            fmt.Printf(\"Error: %v\\n\", err)\n        }\n\n    case &lt;-ctx.Done():\n        fmt.Println(\"Stream reached timeout or was cancelled\")\n        return\n    }\n}\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#solution-2-always-read-from-both-channels","title":"Solution 2: Always Read from BOTH Channels \u2705","text":"<p>CRITICAL: Streaming methods return TWO channels. You MUST read from both!</p>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#wrong-goroutine-leak","title":"\u274c WRONG - Goroutine Leak","text":"<pre><code>// \u274c BAD: Only reading dataChan - errChan blocks goroutine!\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\nfor data := range dataChan {\n    // Process data...\n    // \u274c PROBLEM: If error occurs, goroutine blocks on writing to errChan!\n}\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#correct-read-both-channels","title":"\u2705 CORRECT - Read Both Channels","text":"<pre><code>// \u2705 GOOD: Read both channels using select\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\nfor {\n    select {\n    case data, ok := &lt;-dataChan:\n        if !ok {\n            return  // Channel closed\n        }\n        // Process data\n\n    case err, ok := &lt;-errChan:  // \u2705 CRITICAL: Must read errors!\n        if !ok {\n            return  // Channel closed\n        }\n        // Process error\n\n    case &lt;-ctx.Done():\n        return\n    }\n}\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#common-streaming-mistakes","title":"Common Streaming Mistakes","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#mistake-1-no-context-cancellation","title":"\u274c Mistake 1: No Context Cancellation","text":"<pre><code>// \u274c WRONG: No way to stop stream\ndataChan, errChan := account.OnSymbolTick(context.Background(), req)\n\nfor {\n    select {\n    case data := &lt;-dataChan:\n        fmt.Println(data.Tick.Bid)\n        // If you want to stop - YOU CAN'T!\n    case err := &lt;-errChan:\n        fmt.Println(err)\n    }\n}\n</code></pre> <p>Fix: <pre><code>// \u2705 CORRECT: Can cancel anytime\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n// Now can call cancel() to stop\n</code></pre></p>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#mistake-2-exit-without-cancel","title":"\u274c Mistake 2: Exit Without Cancel","text":"<pre><code>// \u274c WRONG: Break doesn't stop goroutine\nctx, cancel := context.WithCancel(context.Background())\n// defer cancel()  // \u274c MISSING!\n\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\nfor {\n    select {\n    case data := &lt;-dataChan:\n        if data.Tick.Symbol == \"EURUSD\" {\n            break  // \u274c Goroutine still running!\n        }\n    case err := &lt;-errChan:\n        // ...\n    }\n}\n// \u274c cancel() never called - goroutine leak!\n</code></pre> <p>Fix: <pre><code>// \u2705 CORRECT: defer cancel() ensures cleanup\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()  // \u2705 ALWAYS executes\n\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\nfor {\n    select {\n    case data := &lt;-dataChan:\n        if data.Tick.Symbol == \"EURUSD\" {\n            return  // \u2705 defer will call cancel()\n        }\n    case err := &lt;-errChan:\n        // ...\n    case &lt;-ctx.Done():\n        return\n    }\n}\n</code></pre></p>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#mistake-3-reading-only-data-channel","title":"\u274c Mistake 3: Reading Only Data Channel","text":"<pre><code>// \u274c WRONG: Not reading errChan - goroutine blocks!\ndataChan, _ := account.OnSymbolTick(ctx, req)  // \u274c Ignoring errChan\n\nfor data := range dataChan {\n    fmt.Println(data.Tick.Bid)\n    // \u274c PROBLEM: If error occurs, goroutine blocks forever!\n}\n</code></pre> <p>Fix: <pre><code>// \u2705 CORRECT: Read both channels\ndataChan, errChan := account.OnSymbolTick(ctx, req)\n\nfor {\n    select {\n    case data, ok := &lt;-dataChan:\n        if !ok {\n            return\n        }\n        fmt.Println(data.Tick.Bid)\n\n    case err, ok := &lt;-errChan:  // \u2705 MUST read errors!\n        if !ok {\n            return\n        }\n        fmt.Printf(\"Error: %v\\n\", err)\n\n    case &lt;-ctx.Done():\n        return\n    }\n}\n</code></pre></p>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#complete-example-proper-stream-management","title":"Complete Example: Proper Stream Management","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#example-1-simple-tick-monitoring-with-timeout","title":"Example 1: Simple Tick Monitoring with Timeout","text":"<pre><code>func MonitorTicks(account *mt5.MT5Account, symbols []string, duration time.Duration, maxTicks int) error {\n    ctx, cancel := context.WithTimeout(context.Background(), duration)\n    defer cancel()\n\n    req := &amp;pb.OnSymbolTickRequest{SymbolNames: symbols}\n    dataChan, errChan := account.OnSymbolTick(ctx, req)\n\n    tickCount := 0\n\n    fmt.Printf(\"Starting tick monitoring (max %d ticks or %v)...\\n\", maxTicks, duration)\n\n    for {\n        select {\n        case data, ok := &lt;-dataChan:\n            if !ok {\n                fmt.Println(\"Data channel closed\")\n                return nil\n            }\n\n            tickCount++\n            fmt.Printf(\"[%d] %s: Bid=%.5f, Ask=%.5f\\n\",\n                tickCount, data.Tick.Symbol, data.Tick.Bid, data.Tick.Ask)\n\n            if tickCount &gt;= maxTicks {\n                fmt.Println(\"Max ticks reached - stopping\")\n                return nil\n            }\n\n        case err, ok := &lt;-errChan:\n            if !ok {\n                return nil\n            }\n            return fmt.Errorf(\"stream error: %w\", err)\n\n        case &lt;-ctx.Done():\n            fmt.Printf(\"Monitoring stopped (%d ticks processed)\\n\", tickCount)\n            return nil\n        }\n    }\n}\n\n// Usage:\nMonitorTicks(account, []string{\"EURUSD\", \"GBPUSD\"}, 30*time.Second, 100)\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#example-2-production-ready-service","title":"Example 2: Production-ready Service","text":"<pre><code>type StreamService struct {\n    account *mt5.MT5Account\n    ctx     context.Context\n    cancel  context.CancelFunc\n    wg      sync.WaitGroup\n}\n\nfunc NewStreamService(account *mt5.MT5Account) *StreamService {\n    ctx, cancel := context.WithCancel(context.Background())\n    return &amp;StreamService{\n        account: account,\n        ctx:     ctx,\n        cancel:  cancel,\n    }\n}\n\nfunc (s *StreamService) StartTickMonitoring(symbols []string, handler func(*pb.OnSymbolTickData)) {\n    s.wg.Add(1)\n\n    go func() {\n        defer s.wg.Done()\n\n        req := &amp;pb.OnSymbolTickRequest{SymbolNames: symbols}\n        dataChan, errChan := s.account.OnSymbolTick(s.ctx, req)\n\n        for {\n            select {\n            case data, ok := &lt;-dataChan:\n                if !ok {\n                    return\n                }\n                handler(data)\n\n            case err, ok := &lt;-errChan:\n                if !ok {\n                    return\n                }\n                log.Printf(\"Tick stream error: %v\", err)\n\n            case &lt;-s.ctx.Done():\n                log.Println(\"Tick monitoring stopped\")\n                return\n            }\n        }\n    }()\n}\n\nfunc (s *StreamService) StartTradeMonitoring(handler func(*pb.OnTradeData)) {\n    s.wg.Add(1)\n\n    go func() {\n        defer s.wg.Done()\n\n        req := &amp;pb.OnTradeRequest{}\n        dataChan, errChan := s.account.OnTrade(s.ctx, req)\n\n        for {\n            select {\n            case data, ok := &lt;-dataChan:\n                if !ok {\n                    return\n                }\n                handler(data)\n\n            case err, ok := &lt;-errChan:\n                if !ok {\n                    return\n                }\n                log.Printf(\"Trade stream error: %v\", err)\n\n            case &lt;-s.ctx.Done():\n                log.Println(\"Trade monitoring stopped\")\n                return\n            }\n        }\n    }()\n}\n\nfunc (s *StreamService) Stop() {\n    s.cancel()\n\n    // Wait for all goroutines to finish (with timeout)\n    done := make(chan struct{})\n    go func() {\n        s.wg.Wait()\n        close(done)\n    }()\n\n    select {\n    case &lt;-done:\n        log.Println(\"All streams stopped gracefully\")\n    case &lt;-time.After(5 * time.Second):\n        log.Println(\"Stream stop timeout - some goroutines may still be running\")\n    }\n}\n\n// Usage:\nservice := NewStreamService(account)\n\nservice.StartTickMonitoring([]string{\"EURUSD\", \"GBPUSD\"}, func(data *pb.OnSymbolTickData) {\n    fmt.Printf(\"%s: %.5f\\n\", data.Tick.Symbol, data.Tick.Bid)\n})\n\nservice.StartTradeMonitoring(func(data *pb.OnTradeData) {\n    fmt.Printf(\"Trade event: %v\\n\", data.Type)\n})\n\n// ... do work ...\n\nservice.Stop()  // \u2705 Gracefully stops all streams\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#recommendations","title":"Recommendations","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#do","title":"\u2705 DO:","text":"<ol> <li>Always use <code>context.WithCancel</code> or <code>context.WithTimeout</code> with streaming methods</li> <li>Always use <code>defer cancel()</code> to ensure cleanup</li> <li>Always read from BOTH channels (dataChan and errChan) using <code>select</code></li> <li>Check <code>ok</code> value when reading from channels (<code>data, ok := &lt;-dataChan</code>)</li> <li>Use <code>sync.WaitGroup</code> to track goroutines in production code</li> <li>Add timeout in Stop() methods to prevent hanging</li> </ol>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#dont","title":"\u274c DON'T:","text":"<ol> <li>Never start streaming without context cancellation</li> <li>Never ignore error channel - causes goroutine leaks</li> <li>Never forget <code>defer cancel()</code></li> <li>Never use <code>context.Background()</code> without wrapping</li> <li>Never assume channels close automatically</li> <li>Never block main goroutine waiting for streams</li> </ol>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#troubleshooting-and-goroutine-leaks","title":"Troubleshooting and Goroutine Leaks","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#checking-for-goroutine-leaks","title":"Checking for Goroutine Leaks","text":"<pre><code>import \"runtime\"\n\n// Before streaming\nbefore := runtime.NumGoroutine()\nfmt.Printf(\"Goroutines before: %d\\n\", before)\n\n// Your streaming code here...\n{\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnSymbolTick(ctx, req)\n\n    // ... process stream ...\n}\n\n// After streaming (wait a bit for cleanup)\ntime.Sleep(100 * time.Millisecond)\nafter := runtime.NumGoroutine()\nfmt.Printf(\"Goroutines after: %d\\n\", after)\nfmt.Printf(\"Leaked goroutines: %d\\n\", after-before)\n// Should be ~0 if properly cleaned up\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#debugging-goroutine-stacks","title":"Debugging Goroutine Stacks","text":"<pre><code>import (\n    \"os\"\n    \"runtime/pprof\"\n)\n\n// Dump goroutine stacks to file\nf, _ := os.Create(\"goroutines.txt\")\ndefer f.Close()\npprof.Lookup(\"goroutine\").WriteTo(f, 1)\n</code></pre>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#common-leak-patterns","title":"Common Leak Patterns","text":"<ol> <li> <p>Not reading error channel: <pre><code>// \u274c Leak: goroutine blocks on writing to errChan\ndataChan, _ := account.OnSymbolTick(ctx, req)\n</code></pre></p> </li> <li> <p>Context never cancelled: <pre><code>// \u274c Leak: goroutine runs forever\ndataChan, errChan := account.OnSymbolTick(context.Background(), req)\n// Forgot defer cancel()\n</code></pre></p> </li> <li> <p>Exit without cleanup: <pre><code>// \u274c Leak: goroutine still running after break\nfor data := range dataChan {\n    if condition {\n        break  // Missing cancel()\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#architecture-notes","title":"Architecture Notes","text":""},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#how-go-streaming-works-in-mt5account","title":"How Go Streaming Works in MT5Account","text":"<p>Data flow:</p> <pre><code>User code (select on channels)\n    \u2193\nTwo channels: dataChan, errChan\n    \u2193\nExecuteStreamWithReconnect (background goroutine)\n    \u2193\ngRPC ClientStream\n    \u2193\nNetwork (to MT5 terminal)\n</code></pre> <p>Context propagation: <pre><code>User code \u2192 context.Context \u2192 gRPC call \u2192 Network\n</code></pre></p> <p>When you cancel context:</p> <ol> <li><code>ctx.Done()</code> channel closes</li> <li>Background goroutine sees <code>&lt;-ctx.Done()</code></li> <li>Goroutine closes both dataChan and errChan \u2705</li> <li>gRPC stream is cancelled</li> <li>Network connection closes</li> <li>Resources freed \u2705</li> </ol>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#mt5account-cleanup-mechanism","title":"MT5Account Cleanup Mechanism","text":"<p>The <code>ExecuteStreamWithReconnect</code> method ensures proper cleanup:</p> <pre><code>// In MT5Account.go (lines 362-380)\nfunc ExecuteStreamWithReconnect[TRequest, TReply, TData any](\n    ctx context.Context,\n    account *MT5Account,\n    // ...\n) (&lt;-chan TData, &lt;-chan error) {\n    dataChan := make(chan TData)      // Unbuffered channel for data\n    errChan := make(chan error, 1)    // Buffer 1 for errors\n\n    go func() {\n        defer close(dataChan)  // \u2705 ALWAYS closes channels\n        defer close(errChan)   // \u2705 ALWAYS closes channels\n\n        for {\n            // ... streaming logic with automatic reconnection ...\n            // On ctx.Done() goroutine exits\n        }\n    }()\n\n    return dataChan, errChan\n}\n</code></pre> <p>This means:</p> <ul> <li>\u2705 Channels always close on context cancellation</li> <li>\u2705 Goroutine always exits gracefully</li> <li>\u2705 Automatic reconnection on network errors (with exponential backoff)</li> <li>\u2705 You still MUST read from both channels to prevent blocking</li> <li>\u2705 You still MUST cancel context for clean shutdown</li> </ul> <p>Remember:</p> <ul> <li>gRPC streams are active goroutines with network connections</li> <li>Go channels must be consumed or goroutines block</li> <li><code>defer close()</code> in ExecuteStreamWithReconnect prevents leaks</li> <li>But <code>context.Cancel()</code> ensures graceful shutdown</li> <li>ALWAYS read from both dataChan and errChan!</li> </ul>"},{"location":"All_Guides/GRPC_STREAM_MANAGEMENT/#see-also","title":"See Also","text":"<ul> <li>Streaming Methods Overview - Complete streaming methods documentation</li> <li>USERCODE_SANDBOX_GUIDE.md - Quick start guide</li> <li>Go Concurrency Patterns - Official Go blog</li> </ul> <p>Remember: Streams are powerful tools for real-time market data, but they require proper lifecycle management. Master context cancellation, always read from both channels, and your streaming code will be robust and leak-free. Happy streaming!</p>"},{"location":"All_Guides/MT5_For_Beginners/","title":"MT5 for Beginners: Your First Steps in Trading","text":"<p>Welcome! This guide is designed for complete beginners who have never worked with MetaTrader 5 or trading. We'll walk you through everything you need to know to get started.</p>"},{"location":"All_Guides/MT5_For_Beginners/#what-is-metatrader-5-mt5","title":"What is MetaTrader 5 (MT5)?","text":"<p>MetaTrader 5 is a powerful trading platform used by millions of traders worldwide. It allows you to:</p> <ul> <li>Trade forex, stocks, commodities, and cryptocurrencies</li> <li>Analyze markets with charts and indicators</li> <li>Execute automated trading strategies</li> <li>Monitor your positions in real-time</li> </ul> <p>Think of MT5 as your \"cockpit\" for accessing financial markets. GoMT5 allows you to programmatically control this cockpit using Go.</p>"},{"location":"All_Guides/MT5_For_Beginners/#demo-vs-live-account-start-safely","title":"Demo vs Live Account: Start Safely","text":""},{"location":"All_Guides/MT5_For_Beginners/#why-start-with-a-demo-account","title":"Why start with a demo account?","text":"<p>A demo account is a risk-free practice account with virtual money. We strongly recommend starting with demo for several reasons:</p> <ul> <li>\u2705 Zero risk - practice with virtual funds (typically $10,000 - $100,000)</li> <li>\u2705 Real market conditions - live prices and market behavior</li> <li>\u2705 Learn the platform - understand how MT5 works before risking real money</li> <li>\u2705 Test your code - perfect for developing and testing your GoMT5 applications</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#live-account","title":"Live Account","text":"<p>A live account uses your real money. Only move to live trading when you:</p> <ul> <li>Understand how MT5 works</li> <li>Have thoroughly tested your strategies on demo</li> <li>Are aware of the risks involved</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#quick-start-creating-a-demo-account","title":"Quick Start: Creating a Demo Account","text":"<p>The fastest way to get started is to create a demo account directly through the MT5 terminal application.</p>"},{"location":"All_Guides/MT5_For_Beginners/#step-1-download-and-install-mt5-terminal","title":"Step 1: Download and Install MT5 Terminal","text":"<ol> <li> <p>Visit the official MetaTrader website: https://www.metatrader5.com/en/download</p> </li> <li> <p>Download the version for your operating system (Windows/Mac/Linux)</p> </li> <li> <p>Install the application</p> </li> </ol>"},{"location":"All_Guides/MT5_For_Beginners/#step-2-launch-mt5-and-locate-the-navigator-panel","title":"Step 2: Launch MT5 and Locate the Navigator Panel","text":"<p>When you open the MetaTrader 5 application, you'll typically see a popup window offering to:</p> <ul> <li> <p>Register for the MQL community</p> </li> <li> <p>Open a new account or log into an existing one</p> </li> </ul> <p>If this popup doesn't appear automatically, you need to find the Navigator panel.</p> <p></p> <p>Finding the Navigator Panel:</p> <p>The Navigator panel is usually located on the left side of the screen, below the Market Watch panel.</p> <p>Inside the Navigator panel you'll see several sections: - Accounts - Subscriptions - Indicators - Expert Advisors - And others</p>"},{"location":"All_Guides/MT5_For_Beginners/#step-3-opening-a-new-demo-account","title":"Step 3: Opening a New Demo Account","text":"<ol> <li>In the Navigator panel, find the Accounts section</li> <li>Right-click on \"Accounts\"</li> <li>Select \"Open an account\" from the context menu</li> </ol> <p>This will open the broker server search panel.</p>"},{"location":"All_Guides/MT5_For_Beginners/#step-4-select-metaquotes-demo-server","title":"Step 4: Select MetaQuotes Demo Server","text":"<p>In the broker search window, you'll see a list of available MT5 servers.</p> <p>For your first demo account, we'll use the simplest option:</p> <ul> <li>Look for \"MetaQuotes-Demo\" or \"MetaQuotes Ltd\" in the list</li> <li>This is the standard demo server provided by MetaTrader developers</li> <li>If you don't see it immediately, use the search field at the top to find it</li> </ul> <p>Select the MetaQuotes server and click Next.</p> <p></p>"},{"location":"All_Guides/MT5_For_Beginners/#step-5-account-type-selection","title":"Step 5: Account Type Selection","text":"<p>On the next screen, you'll have options:</p> <ul> <li>Open a new demo account (top option)</li> <li>Log into an existing account (demo or live)</li> </ul> <p>Select \"Open a new demo account\" and click Next.</p> <p></p>"},{"location":"All_Guides/MT5_For_Beginners/#step-6-fill-in-your-personal-information","title":"Step 6: Fill in Your Personal Information","text":"<p>Now you'll see a form requesting your details:</p> <ul> <li>Name: Your first name</li> <li>Last Name: Your last name</li> <li>Email: Your email address</li> <li>Phone: Optional (can skip for demo)</li> <li>Account Type: Choose your preferred account settings</li> <li>Deposit: Virtual amount (e.g., $10,000)</li> <li>Leverage: 1:100 is a good starting point</li> <li>Currency: USD, EUR, etc.</li> </ul> <p>Check the box to agree to the terms and conditions, then click Next.</p> <p></p>"},{"location":"All_Guides/MT5_For_Beginners/#step-7-save-your-account-credentials","title":"Step 7: Save Your Account Credentials","text":"<p>MT5 will now create your demo account and display your credentials:</p> <p>Important credentials displayed:</p> <ul> <li>Login: Your account number (e.g., 591129415)</li> <li>Password: Your master password for trading</li> <li>Investor Password: Read-only password (for monitoring)</li> <li>Server: Server name (e.g., \"MetaQuotes-Demo\")</li> </ul> <p>\u26a0\ufe0f CRITICALLY IMPORTANT: Save these credentials immediately! You'll need them for: - Logging back into MT5 - Configuring GoMT5 in <code>examples/demos/config/config.json</code></p> <p>Click Finish to complete account creation.</p> <p></p>"},{"location":"All_Guides/MT5_For_Beginners/#step-8-configure-gomt5-with-your-credentials","title":"Step 8: Configure GoMT5 with Your Credentials","text":"<p>Now that you have an MT5 demo account, you need to configure GoMT5 to connect to it.</p> <ol> <li>Open your GoMT5 project</li> <li>Navigate to <code>examples/demos/config/config.json</code></li> <li>Fill in the credentials you just saved:</li> </ol> <pre><code>{\n  \"user\": 591129415,\n  \"password\": \"YourPasswordHere\",\n  \"host\": \"mt5.mrpc.pro\",\n  \"port\": 443,\n  \"grpc_server\": \"mt5.mrpc.pro:443\",\n  \"mt_cluster\": \"MetaQuotes-Demo\",\n  \"test_symbol\": \"EURUSD\",\n  \"test_volume\": 0.01\n}\n</code></pre> <p>Important notes:</p> <ul> <li>user: Replace with your login number</li> <li>password: Replace with your password</li> <li>mt_cluster: Use the exact server name from MT5 (e.g., \"MetaQuotes-Demo\")</li> <li>host, port, grpc_server: Provided by MetaRPC team (leave as is)</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#step-9-verify-mt5-connection","title":"Step 9: Verify MT5 Connection","text":"<p>Back in the MT5 terminal:</p> <ol> <li>MT5 should automatically log you into your new demo account</li> <li>Check the bottom right corner of the terminal window</li> <li>You should see:</li> <li>Green connection indicator (means connected to server)</li> <li>Your account balance (e.g., $10,000)</li> </ol> <p>You're now ready to test!</p>"},{"location":"All_Guides/MT5_For_Beginners/#step-10-start-testing-gomt5","title":"Step 10: Start Testing GoMT5","text":"<p>With your MT5 demo account created and <code>config.json</code> configured, you can start running examples:</p> <pre><code># Navigate to the examples folder\ncd examples/demos\n\n# Install dependencies (one time only)\ngo mod tidy\n\n# Run your first example\ngo run main.go 1\n</code></pre> <p>When trading operations occur, your demo account balance will increase or decrease accordingly. Experiment freely - it's virtual money, so there's no risk!</p> <p>All trades executed by GoMT5 will appear in your MT5 terminal in real-time.</p>"},{"location":"All_Guides/MT5_For_Beginners/#understanding-mt5-password-types","title":"\ud83e\udde9 Understanding MT5 Password Types","text":"<p>MT5 uses two types of passwords for security and flexibility:</p>"},{"location":"All_Guides/MT5_For_Beginners/#master-password-main-password","title":"Master Password (Main Password)","text":"<ul> <li>Full access to your trading account</li> <li>Can open/close trades, deposit/withdraw funds, change settings</li> <li>This is the password you created during account registration</li> <li>Use this password for:</li> <li>Trading (including GoMT5 applications)</li> <li>Changing account settings</li> <li>Withdrawing funds (live accounts)</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#investor-password-read-only-password","title":"Investor Password (Read-Only Password)","text":"<ul> <li>View-only access to your account</li> <li>Can see trades, balance, history - but cannot trade</li> <li>Useful for:</li> <li>Sharing your trading performance with others (investors, friends)</li> <li>Monitoring your account without risk</li> <li>Audit and analytics tools</li> </ul> <p>How to get your investor password:</p> <ol> <li>In MT5, go to Tools \u2192 Options</li> <li>Select the Server tab</li> <li>Click Change next to \"Investor Password\"</li> <li>Set a new investor password</li> </ol>"},{"location":"All_Guides/MT5_For_Beginners/#choosing-a-broker-optional","title":"Choosing a Broker (Optional)","text":"<p>While you can use the MetaQuotes demo server for practice, you may want to choose a specific broker for:</p> <ul> <li>Live trading later</li> <li>Better demo conditions (spreads, instruments)</li> <li>Specific regional support</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#popular-mt5-brokers","title":"Popular MT5 Brokers:","text":"<p>Note: This is not financial advice. Always do your own research before choosing a broker.</p> <ul> <li>IC Markets - Popular for forex and low spreads</li> <li>Pepperstone - Well-regulated, beginner-friendly</li> <li>OANDA - Strong reputation, accepts US clients</li> <li>XM - Easy account opening, many account types</li> <li>RoboForex - Good for automated trading</li> <li>FxPro - Excellent demo trading conditions (used in GoMT5 examples)</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#what-to-look-for","title":"What to look for:","text":"<ul> <li> <p>\u2705 Regulation - Check if regulated by FCA, ASIC, CySEC, etc.</p> </li> <li> <p>\u2705 MT5 Support - Make sure they offer MT5 (not just MT4).</p> </li> <li> <p>\u2705 Demo Account - Free demo without expiration (though demo accounts typically last 30 days, then become inactive).</p> </li> <li> <p>\u2705 Good Spreads - Lower spreads = lower trading costs.</p> </li> <li> <p>\u2705 Customer Support - Responsive support in your language.</p> </li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#whats-next","title":"What's Next?","text":"<p>Now that you have a demo account and understand the basics, you're ready for:</p>"},{"location":"All_Guides/MT5_For_Beginners/#1-setting-up-gomt5","title":"1. Setting Up GoMT5","text":"<p>Follow our main getting started guide to connect GoMT5 to your MT5 account:</p> <p>\ud83d\udc49 Getting Started with GoMT5</p>"},{"location":"All_Guides/MT5_For_Beginners/#2-understanding-api-architecture","title":"2. Understanding API Architecture","text":"<p>GoMT5 is built in three levels, from low-level to high-level. You can choose where to start depending on your needs:</p>"},{"location":"All_Guides/MT5_For_Beginners/#level-1-mt5account-low-level-grpc-foundation","title":"Level 1: MT5Account (Low-Level gRPC Foundation)","text":"<p>\ud83d\udc49 MT5Account Overview</p> <ul> <li>Direct gRPC calls to MT5 terminal</li> <li>Foundation of everything - all other levels use this internally</li> <li>Maximum control and flexibility</li> <li>Best for: Advanced users who need fine-grained control</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#level-2-mt5service-convenient-wrappers","title":"Level 2: MT5Service (Convenient Wrappers)","text":"<p>\ud83d\udc49 MT5Service Overview</p> <ul> <li>Wrapper methods over MT5Account gRPC calls</li> <li>Simplified error handling and response parsing</li> <li>Easier to work with than raw gRPC</li> <li>Best for: Most common trading scenarios</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#level-3-mt5sugar-high-level-helpers","title":"Level 3: MT5Sugar (High-Level Helpers)","text":"<p>\ud83d\udc49 MT5Sugar API Overview</p> <ul> <li>Syntactic sugar and convenience methods</li> <li>Chainable operations, smart defaults</li> <li>Most intuitive and beginner-friendly</li> <li>Best for: Rapid prototyping and simple strategies</li> </ul> <p>\ud83d\udca1 Recommendation:</p> <ul> <li>Start with MT5Sugar if you're new to the SDK - it's the easiest</li> <li>Move to MT5Service when you need more control</li> <li>Dive into MT5Account when you need maximum flexibility or want to understand how everything works under the hood</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#important-reminders","title":"Important Reminders","text":""},{"location":"All_Guides/MT5_For_Beginners/#security","title":"\ud83d\udee1\ufe0f Security","text":"<ul> <li>Never share your master password with anyone</li> <li>Use investor password for monitoring/analytics tools</li> <li>Keep your credentials safe (use password managers)</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#risk-management","title":"\ud83d\udcca Risk Management","text":"<ul> <li>Demo accounts are risk-free, but form good habits:</li> <li>Always use Stop Loss</li> <li>Don't risk more than 1-2% per trade</li> <li>Understand position sizing calculations</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#testing","title":"\ud83e\uddea Testing","text":"<ul> <li>Test all your GoMT5 code on demo first</li> <li>Verify strategies over weeks/months, not days</li> <li>Paper trading (demo) doesn't guarantee live results</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#education","title":"\ud83d\udcda Education","text":"<ul> <li>Trading has a steep learning curve</li> <li>Focus on learning, not earning</li> <li>Consider courses, books, and communities</li> </ul>"},{"location":"All_Guides/MT5_For_Beginners/#useful-go-commands","title":"Useful Go Commands","text":"<p>A few helpful commands you'll need when working with GoMT5:</p> <pre><code># Install dependencies\ngo mod tidy\n\n# Run an example\ngo run main.go 1\n\n# Check Go version\ngo version\n\n# Build the project\ngo build\n\n# Run tests\ngo test ./...\n</code></pre> <p>Ready to start coding? Head over to Getting Started to connect GoMT5 to your MT5 account!</p> <p>Good luck with your trading journey! \ud83d\ude80</p>"},{"location":"All_Guides/PROJECT_MAP/","title":"GoMT5 Project Map","text":"<p>Complete reference to project structure. Shows what is located where, what is user-facing vs internal, and how components are connected.</p>"},{"location":"All_Guides/PROJECT_MAP/#project-overview","title":"\ud83d\uddfa\ufe0f Project Overview","text":"<pre><code>GoMT5/\n\u251c\u2500\u2500 \ud83d\udce6 package/ - Independent module (portable)\n\u2502   \u251c\u2500\u2500 Helpers/MT5Account.go (Layer 1 - Foundation)\n\u2502   \u251c\u2500\u2500 Helpers/errors.go (Error handling &amp; trade return codes)\n\u2502   \u251c\u2500\u2500 Proto definitions (*.pb.go)\n\u2502   \u2514\u2500\u2500 gRPC stubs (*_grpc.pb.go)\n\u2502\n\u251c\u2500\u2500 \ud83d\udce6 examples/mt5/ - High-level API layers\n\u2502   \u251c\u2500\u2500 MT5Service.go (Layer 2 - Wrappers)\n\u2502   \u2514\u2500\u2500 MT5Sugar.go (Layer 3 - Convenience)\n\u2502\n\u251c\u2500\u2500 \ud83c\udfaf User Code (Orchestrators, Presets, Examples)\n\u251c\u2500\u2500 \ud83d\udcda Documentation\n\u2514\u2500\u2500 \u2699\ufe0f Configuration and build\n\nExternal dependencies:\n\u2514\u2500\u2500 \ud83d\udd0c gRPC &amp; Proto (Go modules)\n</code></pre>"},{"location":"All_Guides/PROJECT_MAP/#core-api-three-layer-architecture","title":"\ud83d\udce6 Core API (Three-layer architecture)","text":"<p>What: Three-tier architecture for MT5 trading automation.</p> <p>User interaction: Import and use, but typically don't modify.</p> <pre><code>package/Helpers/\n\u251c\u2500\u2500 MT5Account.go              \u2190 LAYER 1: Low-level gRPC \u2b50 FOUNDATION\n\u2502   \u2514\u2500\u2500 Direct gRPC calls to MT5 terminal\n\u2502   \u2514\u2500\u2500 Connection management with retry logic\n\u2502   \u2514\u2500\u2500 Proto Request/Response handling\n\u2502   \u2514\u2500\u2500 Built-in connection resilience\n\u2502   \u2514\u2500\u2500 Independent Go module (portable)\n\u2502\n\u2514\u2500\u2500 errors.go                  \u2190 Error handling &amp; trade result codes\n    \u2514\u2500\u2500 ErrNotConnected sentinel error\n    \u2514\u2500\u2500 ApiError wrapper (3-level: API/MQL/Trade)\n    \u2514\u2500\u2500 Trade return code constants &amp; helpers\n    \u2514\u2500\u2500 Centralized error inspection methods\n\nexamples/mt5/\n\u251c\u2500\u2500 MT5Service.go              \u2190 LAYER 2: Wrapper methods\n\u2502   \u2514\u2500\u2500 Simplified signatures (no proto objects)\n\u2502   \u2514\u2500\u2500 Type conversion (proto \u2192 Go primitives)\n\u2502   \u2514\u2500\u2500 Direct data return\n\u2502   \u2514\u2500\u2500 Extension methods for convenience\n\u2502\n\u2514\u2500\u2500 MT5Sugar.go                \u2190 LAYER 3: Convenience layer \u2b50\n    \u2514\u2500\u2500 Auto-normalization (volumes, prices)\n    \u2514\u2500\u2500 Risk management (CalculateVolume, BuyByRisk)\n    \u2514\u2500\u2500 Points-based methods (BuyLimitPoints, etc.)\n    \u2514\u2500\u2500 Batch operations (CloseAll, CancelAll)\n    \u2514\u2500\u2500 Snapshots (GetAccountSnapshot, GetSymbolSnapshot)\n    \u2514\u2500\u2500 Smart helpers (conversions, limits)\n\ngo.mod / go.sum                \u2190 Module dependencies\n</code></pre> <p>Architecture flow: <pre><code>MT5Sugar \u2192 uses \u2192 MT5Service \u2192 uses \u2192 MT5Account \u2192 gRPC \u2192 MT5 Terminal\n       \u2193                \u2193                    \u2193\nexamples/mt5/    examples/mt5/      package/Helpers/\n</code></pre></p> <p>\ud83d\udca1 Creating Your Own Project:</p> <p>For your own standalone project using GoMT5, you only need to import the <code>package</code> module:</p> <pre><code>import pb \"github.com/MetaRPC/GoMT5/package\"\n</code></pre> <p>The <code>package</code> module contains everything you need to start:</p> <ul> <li>\u2705 All protobuf definitions (proto-generated code)</li> <li>\u2705 gRPC stubs and service contracts</li> <li>\u2705 MT5Account (Layer 1 - Foundation)</li> <li>\u2705 Independent Go module (can be used without examples/)</li> </ul> <p>This makes the package portable and easy to integrate into any Go project!</p> <p>User decision:</p> <ul> <li>Building your own app: Import <code>package</code> and use MT5Account directly</li> <li>Learning/Examples: Use the full GoMT5 repo with all 3 layers</li> <li>95% of demo cases: Start with <code>MT5Sugar</code> (highest level, easiest)</li> <li>Need wrappers: Move to <code>MT5Service</code> (without auto-normalization)</li> <li>Need raw proto: Move to <code>MT5Account</code> (full control)</li> </ul> <p>Documentation:</p> <ul> <li>MT5Account API Reference \u2b50 FOUNDATION OF EVERYTHING</li> <li>MT5Service API Reference</li> <li>MT5Sugar API Reference</li> </ul>"},{"location":"All_Guides/PROJECT_MAP/#user-code-your-trading-strategies","title":"\ud83c\udfaf User Code (Your Trading Strategies)","text":""},{"location":"All_Guides/PROJECT_MAP/#orchestrators-examplesdemosorchestrators","title":"Orchestrators (examples/demos/orchestrators/)","text":"<p>What: Ready-made trading strategy implementations.</p> <pre><code>examples/demos/orchestrators/\n\u251c\u2500\u2500 13_grid_trader.go             \u2190 Grid trading (sideways markets)\n\u251c\u2500\u2500 11_trailing_stop.go           \u2190 Trailing stop (price following)\n\u251c\u2500\u2500 12_position_scaler.go         \u2190 Position scaling\n\u251c\u2500\u2500 14_risk_manager.go            \u2190 Risk manager\n\u251c\u2500\u2500 15_portfolio_rebalancer.go    \u2190 Portfolio rebalancing\n\u2514\u2500\u2500 orchestrators.go              \u2190 Base interface/functionality\n</code></pre> <p>Purpose: Educational examples showing complete strategy workflows:</p> <ul> <li>Entry logic (risk-based volume where applicable)</li> <li>Position monitoring with progress bars</li> <li>Exit management and cleanup</li> <li>Performance tracking (balance, equity, P/L)</li> <li>Configurable parameters via properties</li> </ul> <p>How to use:</p> <ol> <li>Study existing orchestrators</li> <li>Copy one as a template</li> <li>Modify for your strategy</li> <li>Test on demo account</li> </ol> <p>How to run: <pre><code>go run examples/demos/main.go grid         # Grid Trader\ngo run examples/demos/main.go trailing     # Trailing Stop\ngo run examples/demos/main.go scaler       # Position Scaler\ngo run examples/demos/main.go risk         # Risk Manager\ngo run examples/demos/main.go portfolio    # Portfolio Rebalancer\n</code></pre></p> <p>Documentation: - Grid Trader - Trailing Stop - Position Scaler - Risk Manager - Portfolio Rebalancer</p>"},{"location":"All_Guides/PROJECT_MAP/#presets-examplesdemospresets","title":"Presets (examples/demos/presets/)","text":"<p>What: Combinations of multiple orchestrators with adaptive logic based on market analysis.</p> <p>User interaction: \u2705 Advanced usage - combine multiple strategies.</p> <pre><code>examples/demos/presets/\n\u2514\u2500\u2500 16_AdaptiveOrchestratorPreset.go    \u2190 Intelligent multi-strategy\n</code></pre> <p>Purpose: Demonstrate how to:</p> <ul> <li>Combine multiple orchestrators</li> <li>Adaptive decision making (volatility \u2192 strategy)</li> <li>Market condition analysis (simplified demo)</li> <li>Multi-phase trading sessions</li> <li>Performance tracking by phases</li> </ul> <p>How to run: <pre><code>go run examples/demos/main.go preset       # Adaptive Market Preset\ngo run examples/demos/main.go adaptive     # Same thing\n</code></pre></p>"},{"location":"All_Guides/PROJECT_MAP/#examples-examplesdemos","title":"Examples (examples/demos/)","text":"<p>What: Runnable examples demonstrating API usage at different layers.</p> <p>User interaction: \u2705 Learning materials - run to understand the API.</p> <pre><code>examples/demos/\n\u251c\u2500\u2500 lowlevel/                          \u2190 MT5Account examples (proto level) \u2b50 FOUNDATION\n\u2502   \u251c\u2500\u2500 01_general_operations.go       \u2190 General operations (connection, account, symbols)\n\u2502   \u251c\u2500\u2500 02_trading_operations.go       \u2190 Trading operations (orders, positions)\n\u2502   \u2514\u2500\u2500 03_streaming_methods.go        \u2190 Streaming methods (real-time subscriptions)\n\u2502\n\u251c\u2500\u2500 service/                           \u2190 MT5Service examples (wrapper level)\n\u2502   \u251c\u2500\u2500 04_service_demo.go             \u2190 Service API demonstration\n\u2502   \u2514\u2500\u2500 05_service_streaming.go        \u2190 Service streaming methods\n\u2502\n\u251c\u2500\u2500 sugar/                             \u2190 MT5Sugar examples (convenience level)\n\u2502   \u251c\u2500\u2500 06_sugar_basics.go             \u2190 Sugar API basics (balance, prices)\n\u2502   \u251c\u2500\u2500 07_sugar_trading.go            \u2190 Trading (market/limit orders)\n\u2502   \u251c\u2500\u2500 08_sugar_positions.go          \u2190 Position management\n\u2502   \u251c\u2500\u2500 09_sugar_history.go            \u2190 History and statistics\n\u2502   \u2514\u2500\u2500 10_sugar_advanced.go           \u2190 Advanced Sugar capabilities\n\u2502\n\u2514\u2500\u2500 usercode/                          \u2190 User code sandbox\n    \u2514\u2500\u2500 18_usercode.go                 \u2190 Your custom strategies\n</code></pre> <p>How to run: <pre><code># Low-level examples (MT5Account - FOUNDATION OF EVERYTHING)\ngo run examples/demos/main.go lowlevel01   # General operations\ngo run examples/demos/main.go lowlevel02   # Trading operations\ngo run examples/demos/main.go lowlevel03   # Streaming methods\n\n# Service examples (MT5Service - wrappers)\ngo run examples/demos/main.go service04    # Service API demo\ngo run examples/demos/main.go service05    # Service streaming methods\n\n# Sugar examples (MT5Sugar - convenience API)\ngo run examples/demos/main.go sugar06      # Sugar basics\ngo run examples/demos/main.go sugar07      # Sugar trading\ngo run examples/demos/main.go sugar08      # Sugar positions\ngo run examples/demos/main.go sugar09      # Sugar history\ngo run examples/demos/main.go sugar10      # Advanced Sugar\n\n# UserCode (your code)\ngo run examples/demos/main.go usercode     # Custom strategies\n</code></pre></p>"},{"location":"All_Guides/PROJECT_MAP/#maingo-examplesdemos","title":"main.go (examples/demos/)","text":"<p>What: Main entry point that routes <code>go run</code> commands to corresponding examples/orchestrators/presets.</p> <p>User interaction: \ud83d\udccb Runner + Documentation - launches everything.</p> <pre><code>main.go\n\u251c\u2500\u2500 main()                              \u2190 Entry point, parses arguments\n\u251c\u2500\u2500 RouteCommand()                      \u2190 Maps aliases to runners\n\u251c\u2500\u2500 RunOrchestrator()                   \u2190 Launches orchestrators\n\u251c\u2500\u2500 RunPreset()                         \u2190 Launches presets\n\u251c\u2500\u2500 RunExample()                        \u2190 Launches examples\n\u2514\u2500\u2500 Documentation in header             \u2190 Full command reference\n</code></pre> <p>How it works:</p> <pre><code>go run examples/demos/main.go grid\n    \u2193\nmain(args)  // args[0] = \"grid\"\n    \u2193\nRouteCommand(\"grid\")\n    \u2193\nRunOrchestrator(\"grid\")\n    \u2193\nGridTrader.Run()\n</code></pre> <p>Purpose:</p> <ul> <li>Single entry point for all runnable code</li> <li>Command routing with aliases (grid, trailing, preset, etc.)</li> <li>Helpful error messages for unknown commands</li> <li>Ctrl+C handling for graceful shutdown</li> </ul> <p>Available commands: See header comment in <code>main.go</code> for full list.</p>"},{"location":"All_Guides/PROJECT_MAP/#helpers-examplesdemoshelpers","title":"Helpers (examples/demos/helpers/)","text":"<p>What: Utilities for examples and orchestrators.</p> <pre><code>examples/demos/helpers/\n\u251c\u2500\u2500 connection.go                 \u2190 MT5 connection setup\n\u251c\u2500\u2500 error_helper.go               \u2190 Error handling and return codes\n\u251c\u2500\u2500 progress_bar.go               \u2190 Visual progress bars\n\u2514\u2500\u2500 17_protobuf_inspector.go      \u2190 Protobuf structure inspector (runnable)\n</code></pre> <p>ConnectionHelper: <pre><code>// Create and connect to MT5\naccount, err := connection.CreateAndConnect(host, port, user, password)\nservice := mt5.NewMT5Service(account)\nsugar := mt5.NewMT5Sugar(service)\n</code></pre></p> <p>ProgressBarHelper: <pre><code>// Visual countdown during orchestrator operation\nhelpers.ShowProgressBar(\n    durationSeconds: 60,\n    message: \"Monitoring positions\",\n    ctx: ctx,\n)\n</code></pre></p> <p>ErrorHelper: <pre><code>// Check return codes and handle errors\nif !helpers.IsSuccess(returnCode) {\n    helpers.PrintError(returnCode, \"Order placement failed\")\n}\n</code></pre></p> <p>ProtobufInspector: <pre><code>// Inspect protobuf structures for debugging\ninspector.InspectMessage(response)\n</code></pre></p>"},{"location":"All_Guides/PROJECT_MAP/#documentation-docs","title":"\ud83d\udcda Documentation (docs/)","text":"<p>What: Complete API and strategy documentation.</p> <p>User interaction: \ud83d\udcd6 Read first! Comprehensive reference.</p> <pre><code>docs/\n\u251c\u2500\u2500 index.md                           \u2190 Home page - project introduction\n\u2502\n\u251c\u2500\u2500 mkdocs.yml                         \u2190 MkDocs configuration\n\u251c\u2500\u2500 styles/custom.css                  \u2190 Custom theme (ocean aurora)\n\u251c\u2500\u2500 javascripts/ux.js                  \u2190 Interactive features\n\u2502\n\u251c\u2500\u2500 All_Guides/                        \u2190 Guides\n\u2502   \u251c\u2500\u2500 MT5_For_Beginners.md           \u2190 Demo account registration\n\u2502   \u251c\u2500\u2500 GETTING_STARTED.md             \u2190 \u2b50 Start here! Setup and first steps\n\u2502   \u251c\u2500\u2500 Your_First_Project.md          \u2190 Your first project\n\u2502   \u251c\u2500\u2500 GLOSSARY.md                    \u2190 \u2b50 Terms and definitions\n\u2502   \u251c\u2500\u2500 GRPC_STREAM_MANAGEMENT.md      \u2190 Managing streaming subscriptions\n\u2502   \u251c\u2500\u2500 RETURN_CODES_REFERENCE.md      \u2190 Proto return code reference\n\u2502   \u251c\u2500\u2500 PROTOBUF_INSPECTOR_GUIDE.md    \u2190 Protobuf inspector tool\n\u2502   \u2514\u2500\u2500 USERCODE_SANDBOX_GUIDE.md      \u2190 How to write custom strategies\n\u2502\n\u251c\u2500\u2500 PROJECT_MAP.md                     \u2190 \u2b50 This file - complete structure\n\u2502\n\u251c\u2500\u2500 API_Reference/                     \u2190 Concise API documentation\n\u2502   \u2502                                     (slightly enhanced for better navigation)\n\u2502   \u251c\u2500\u2500 MT5Account.md                  \u2190 \u2b50 Layer 1 API (foundation of everything) \u2192 from package/Helpers/MT5Account.go\n\u2502   \u251c\u2500\u2500 MT5Service.md                  \u2190 Layer 2 API \u2192 from examples/mt5/MT5Service.go\n\u2502   \u2514\u2500\u2500 MT5Sugar.md                    \u2190 Layer 3 API \u2192 from examples/mt5/MT5Sugar.go\n\u2502\n\u251c\u2500\u2500 MT5Account/                        \u2190 \u2b50 FOUNDATION OF EVERYTHING - Detailed Layer 1 documentation\n\u2502   \u251c\u2500\u2500 MT5Account.Master.Overview.md  \u2190 \u2b50 Complete API reference\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 1. Account_information/        \u2190 Account methods (~4 files)\n\u2502   \u2502   \u251c\u2500\u2500 AccountInfoDouble.md       \u2190 Get account double parameters\n\u2502   \u2502   \u251c\u2500\u2500 AccountSummary.md          \u2190 Complete account summary\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other account methods\n\u2502   \u2502   \u2514\u2500\u2500 \ud83d\udca1 Each example linked with examples/demos/lowlevel\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 2. Symbol_information/         \u2190 Symbol/market data methods (~9 files)\n\u2502   \u2502   \u251c\u2500\u2500 SymbolInfoTick.md          \u2190 Current symbol tick\n\u2502   \u2502   \u251c\u2500\u2500 SymbolInfoDouble.md        \u2190 Symbol double parameters\n\u2502   \u2502   \u251c\u2500\u2500 SymbolsTotal.md            \u2190 Total symbols count\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other symbol methods\n\u2502   \u2502   \u2514\u2500\u2500 \ud83d\udca1 Examples in examples/demos/lowlevel\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 3. Position_Orders_Information/ \u2190 Position/order methods (~6 files)\n\u2502   \u2502   \u251c\u2500\u2500 OpenedOrders.md            \u2190 List of open orders\n\u2502   \u2502   \u251c\u2500\u2500 PositionsTotal.md          \u2190 Total positions count\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other position methods\n\u2502   \u2502   \u2514\u2500\u2500 \ud83d\udca1 Examples in examples/demos/lowlevel\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 4. Trading_Operations/         \u2190 Trading operation methods (~7 files)\n\u2502   \u2502   \u251c\u2500\u2500 OrderSend.md               \u2190 Send order (main method)\n\u2502   \u2502   \u251c\u2500\u2500 OrderCheck.md              \u2190 Check order before sending\n\u2502   \u2502   \u251c\u2500\u2500 OrderCalcMargin.md         \u2190 Calculate margin\n\u2502   \u2502   \u251c\u2500\u2500 OrderCalcProfit.md         \u2190 Calculate profit\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other trading methods\n\u2502   \u2502   \u2514\u2500\u2500 \ud83d\udca1 Examples in examples/demos/lowlevel/02_trading_operations.go\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 5. Market_Depth(DOM)/          \u2190 Market depth methods (~4 files)\n\u2502   \u2502   \u251c\u2500\u2500 MarketBookAdd.md           \u2190 Subscribe to market depth\n\u2502   \u2502   \u251c\u2500\u2500 MarketBookGet.md           \u2190 Get market depth data\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other DOM methods\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 6. Additional_Methods/         \u2190 Additional methods (~5 files)\n\u2502   \u2502   \u251c\u2500\u2500 SymbolInfoMarginRate.md    \u2190 Symbol margin rates\n\u2502   \u2502   \u251c\u2500\u2500 SymbolInfoSessionQuote.md  \u2190 Quote trading sessions\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other auxiliary methods\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 7. Streaming_Methods/          \u2190 Real-time subscription methods\n\u2502       \u251c\u2500\u2500 OnSymbolTick.md            \u2190 Subscribe to symbol ticks\n\u2502       \u251c\u2500\u2500 OnTrade.md                 \u2190 Subscribe to trade events\n\u2502       \u251c\u2500\u2500 OnPositionProfit.md        \u2190 Subscribe to profit changes\n\u2502       \u2514\u2500\u2500 ...                        \u2190 And other streaming methods\n\u2502       \u2514\u2500\u2500 \ud83d\udca1 Stream management examples in All_Guides/GRPC_STREAM_MANAGEMENT\n\u2502\n\u251c\u2500\u2500 MT5Service/                        \u2190 Service level method documentation\n\u2502   \u251c\u2500\u2500 MT5Service.Overview.md          \u2190 \u2b50 Complete Service API reference\n\u2502   \u251c\u2500\u2500 1. Account_Methods.md          \u2190 Account helper methods\n\u2502   \u251c\u2500\u2500 2. Symbol_Methods.md           \u2190 Symbol helper methods\n\u2502   \u251c\u2500\u2500 3. Position_Orders_Methods.md  \u2190 Position/order helper methods\n\u2502   \u251c\u2500\u2500 4. Trading_Methods.md          \u2190 Trading helper methods\n\u2502   \u251c\u2500\u2500 5. MarketDepth_Methods.md      \u2190 Market depth helper methods\n\u2502   \u2514\u2500\u2500 6. Streaming_Methods.md        \u2190 Streaming helper methods\n\u2502\n\u251c\u2500\u2500 MT5Sugar/                          \u2190 Sugar level method documentation\n\u2502   \u251c\u2500\u2500 MT5Sugar.API_Overview.md        \u2190 \u2b50 Complete Sugar API reference\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 1. Connection/                  \u2190 Connection methods (~3 files)\n\u2502   \u2502   \u251c\u2500\u2500 QuickConnect.md            \u2190 Quick connection\n\u2502   \u2502   \u251c\u2500\u2500 IsConnected.md             \u2190 Check connection\n\u2502   \u2502   \u2514\u2500\u2500 Ping.md                    \u2190 Connection test\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 2. Balance_Margin/              \u2190 Balance and margin (~6 files)\n\u2502   \u2502   \u251c\u2500\u2500 GetBalance.md              \u2190 Get balance\n\u2502   \u2502   \u251c\u2500\u2500 GetEquity.md               \u2190 Get equity\n\u2502   \u2502   \u251c\u2500\u2500 GetFreeMargin.md           \u2190 Free margin\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other balance methods\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 3. Prices_Quotes/               \u2190 Prices and quotes (~5 files)\n\u2502   \u2502   \u251c\u2500\u2500 GetBid.md                  \u2190 Get Bid\n\u2502   \u2502   \u251c\u2500\u2500 GetAsk.md                  \u2190 Get Ask\n\u2502   \u2502   \u251c\u2500\u2500 GetSpread.md               \u2190 Get spread\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other price methods\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 4. Simple_Trading/              \u2190 Simple trading (~6 files)\n\u2502   \u2502   \u251c\u2500\u2500 BuyMarket.md               \u2190 Buy at market\n\u2502   \u2502   \u251c\u2500\u2500 SellMarket.md              \u2190 Sell at market\n\u2502   \u2502   \u251c\u2500\u2500 BuyLimit.md                \u2190 Buy Limit order\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other simple orders\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 5. Trading_SLTP/                \u2190 Trading with SL/TP (~4 files)\n\u2502   \u2502   \u251c\u2500\u2500 BuyMarketWithSLTP.md       \u2190 Buy with SL/TP\n\u2502   \u2502   \u251c\u2500\u2500 SellMarketWithSLTP.md      \u2190 Sell with SL/TP\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other orders with SL/TP\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 6. Position_Management/         \u2190 Position management (~7 files)\n\u2502   \u2502   \u251c\u2500\u2500 ClosePosition.md           \u2190 Close position\n\u2502   \u2502   \u251c\u2500\u2500 CloseAllPositions.md       \u2190 Close all positions\n\u2502   \u2502   \u251c\u2500\u2500 ModifyPositionSLTP.md      \u2190 Modify SL/TP\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other management methods\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 7. Position_Information/        \u2190 Position information (~7 files)\n\u2502   \u2502   \u251c\u2500\u2500 HasOpenPosition.md         \u2190 Has open position\n\u2502   \u2502   \u251c\u2500\u2500 CountOpenPositions.md      \u2190 Count positions\n\u2502   \u2502   \u251c\u2500\u2500 GetPositionTickets.md      \u2190 Get position tickets\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other information methods\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 8. History_Statistics/          \u2190 History and statistics (~10 files)\n\u2502   \u2502   \u251c\u2500\u2500 GetDealsToday.md           \u2190 Deals today\n\u2502   \u2502   \u251c\u2500\u2500 GetProfitThisWeek.md       \u2190 Profit this week\n\u2502   \u2502   \u251c\u2500\u2500 GetDealsDateRange.md       \u2190 Deals for period\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other history methods\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 9. Symbol_Information/          \u2190 Symbol information (~6 files)\n\u2502   \u2502   \u251c\u2500\u2500 GetSymbolInfo.md           \u2190 Complete symbol information\n\u2502   \u2502   \u251c\u2500\u2500 GetAllSymbols.md           \u2190 All available symbols\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other symbol methods\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 10. Risk_Management/            \u2190 Risk management (~4 files)\n\u2502   \u2502   \u251c\u2500\u2500 CalculatePositionSize.md   \u2190 Calculate position size\n\u2502   \u2502   \u251c\u2500\u2500 CanOpenPosition.md         \u2190 Can open position\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other risk methods\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 11. Trading_Helpers/            \u2190 Trading helpers (~3 files)\n\u2502   \u2502   \u251c\u2500\u2500 BuyMarketWithPips.md       \u2190 Buy with SL/TP in pips\n\u2502   \u2502   \u251c\u2500\u2500 CalculateSLTP.md           \u2190 Calculate SL/TP\n\u2502   \u2502   \u2514\u2500\u2500 ...                        \u2190 And other helpers\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 12. Account_Information/        \u2190 Account information (~4 files)\n\u2502       \u251c\u2500\u2500 AccountInfo.md             \u2190 Account information\n\u2502       \u251c\u2500\u2500 GetDailyStats.md           \u2190 Daily statistics\n\u2502       \u2514\u2500\u2500 ...                        \u2190 And other account methods\n\u2502\n\u2514\u2500\u2500 Orchestrators/                     \u2190 Strategy documentation\n    \u251c\u2500\u2500 13_Grid_trader.md              \u2190 Grid trading\n    \u251c\u2500\u2500 11_Trailing_stop.md            \u2190 Trailing stop\n    \u251c\u2500\u2500 12_Position_scaler.md          \u2190 Position scaling\n    \u251c\u2500\u2500 14_Risk_manager.md             \u2190 Risk manager\n    \u251c\u2500\u2500 15_Portfolio_rebalancer.md     \u2190 Portfolio rebalancing\n    \u251c\u2500\u2500 16_AdaptiveOrchestratorPreset.md \u2190 Adaptive preset\n    \u2514\u2500\u2500 Strategies.Master.Overview.md  \u2190 Complete strategy overview\n</code></pre> <p>Structure:</p> <ul> <li>Each method has its own <code>.md</code> file with examples</li> <li>Overview files (<code>*.Master.Overview.md</code>) provide navigation</li> <li><code>HOW_IT_WORKS.md</code> files explain algorithms step by step</li> <li>Links between related methods</li> <li>Usage examples in each file</li> </ul> <p>\u2b50 Important about MT5Account: - FOUNDATION OF EVERYTHING - all methods here are the foundation - Each documentation example is linked with real code in <code>examples/demos/lowlevel/</code> - Understanding MT5Account is critical for effective use of MT5Service and MT5Sugar</p>"},{"location":"All_Guides/PROJECT_MAP/#grpc-proto-go-modules","title":"\ud83d\udd0c gRPC &amp; Proto (Go modules)","text":"<p>What: Protocol Buffer and gRPC libraries for communication with MT5 terminal.</p> <p>User interaction: \ud83d\udccb Reference only - managed via Go modules.</p> <p>Key dependencies:</p> <ul> <li><code>google.golang.org/grpc</code> - gRPC client</li> <li><code>google.golang.org/protobuf</code> - Protocol Buffers runtime</li> <li><code>github.com/MetaRPC/GoMT5/package</code> - MT5 Proto definitions (independent module)</li> </ul> <p>Package structure:</p> <pre><code>package/\n\u251c\u2500\u2500 Helpers/\n\u2502   \u2514\u2500\u2500 MT5Account.go          \u2190 Layer 1 implementation\n\u251c\u2500\u2500 *.pb.go                    \u2190 Generated protobuf code\n\u251c\u2500\u2500 *_grpc.pb.go               \u2190 Generated gRPC stubs\n\u251c\u2500\u2500 go.mod                     \u2190 Independent module\n\u2514\u2500\u2500 go.sum                     \u2190 Module dependencies\n</code></pre> <p>How it works:</p> <ol> <li><code>package/</code> is an independent Go module</li> <li>Contains both proto-generated code and MT5Account implementation</li> <li>Can be imported separately: <code>github.com/MetaRPC/GoMT5/package</code></li> <li>MT5Service and MT5Sugar import from package module</li> <li>All layers use proto-generated types from package</li> </ol> <p>Proto-generated types:</p> <ul> <li><code>mt5_term_api.*</code> - Trading API types</li> <li>Request/Response message types</li> <li>Enum definitions</li> <li>Service contracts</li> </ul> <p>Purpose:</p> <ul> <li>Define gRPC service contracts</li> <li>Type-safe communication with MT5 terminal</li> <li>Used by MT5Account layer</li> <li>Hidden by MT5Service and MT5Sugar layers</li> </ul>"},{"location":"All_Guides/PROJECT_MAP/#component-interaction-diagram","title":"\ud83d\udcca Component Interaction Diagram","text":"<pre><code>YOUR CODE (User)\n  \u251c\u2500 Orchestrators (strategy implementations)\n  \u251c\u2500 Presets (multi-strategies)\n  \u2514\u2500 Examples (learning materials)\n                  \u2502\n                  \u2502 uses\n                  \u2193\nMT5Sugar (Layer 3 - Convenience)\n  \u251c\u2500 Auto-normalization\n  \u251c\u2500 Risk management\n  \u251c\u2500 Points-based methods\n  \u2514\u2500 Batch operations\n                  \u2502\n                  \u2502 uses\n                  \u2193\nMT5Service (Layer 2 - Wrappers)\n  \u251c\u2500 Direct data return\n  \u251c\u2500 Type conversion\n  \u2514\u2500 Simplified signatures\n                  \u2502\n                  \u2502 uses\n                  \u2193\nMT5Account (Layer 1 - Low level) \u2b50 FOUNDATION\n  \ud83d\udccd Location: package/Helpers/MT5Account.go\n  \u251c\u2500 Proto Request/Response\n  \u251c\u2500 gRPC communication\n  \u251c\u2500 Connection management\n  \u251c\u2500 Auto-reconnection\n  \u2514\u2500 Independent Go module (portable)\n                  \u2502\n                  \u2502 gRPC\n                  \u2193\nMT5 Gateway (mt5term) or MT5 Terminal\n  \u2514\u2500 MetaTrader 5 with gRPC server\n</code></pre>"},{"location":"All_Guides/PROJECT_MAP/#file-naming-conventions","title":"\ud83d\udd0d File Naming Conventions","text":""},{"location":"All_Guides/PROJECT_MAP/#core-api-multi-location","title":"Core API (Multi-location)","text":"<p>Layer 1 (Foundation): - <code>package/Helpers/MT5Account.go</code> - Low-level gRPC (independent module)</p> <p>Layers 2-3 (High-level wrappers): - <code>examples/mt5/MT5Service.go</code> - Wrapper methods - <code>examples/mt5/MT5Sugar.go</code> - Convenience API - <code>go.mod / go.sum</code> - Dependencies</p>"},{"location":"All_Guides/PROJECT_MAP/#user-code-examplesdemos","title":"User Code (examples/demos/)","text":"<ul> <li><code>*_orchestrator.go</code> / <code>NN_name.go</code> - Single strategy implementations</li> <li><code>*_preset.go</code> - Multi-strategies</li> <li><code>main.go</code> - Entry point and command router</li> <li><code>*_helper.go</code> - Utilities (connection, error, progress_bar)</li> </ul>"},{"location":"All_Guides/PROJECT_MAP/#documentation-docs_1","title":"Documentation (docs/)","text":"<ul> <li><code>*.Master.Overview.md</code> - Complete category overviews</li> <li><code>*.Overview.md</code> - Section overviews</li> <li><code>MethodName.md</code> - Individual method documentation</li> <li><code>*_HOW.md</code> - Algorithm explanations</li> </ul>"},{"location":"All_Guides/PROJECT_MAP/#what-to-modify-vs-what-to-leave-alone","title":"\ud83d\udcc2 What to Modify vs What to Leave Alone","text":""},{"location":"All_Guides/PROJECT_MAP/#modify-user-code","title":"\u2705 MODIFY (User Code)","text":"<p>Recommended starting point: <pre><code>examples/demos/usercode/18_usercode.go  \u2190 \u2b50 SANDBOX - start writing your code here!\n                                           All 3 API levels already initialized and ready.\n                                           Run: go run main.go 18\n</code></pre></p> <p>Other files for modification: <pre><code>examples/demos/orchestrators/  \u2190 Copy and customize for your strategies\nexamples/demos/presets/        \u2190 Create your multi-strategies\nexamples/demos/lowlevel/       \u2190 Add your low-level examples\nexamples/demos/service/        \u2190 Add your service examples\nexamples/demos/sugar/          \u2190 Add your sugar examples\nexamples/demos/usercode/       \u2190 Create your custom files alongside 18_usercode.go\nexamples/demos/config/         \u2190 Configure for your MT5 terminal/gateway\nexamples/demos/main.go         \u2190 Add new command routing if needed\nREADME.md                      \u2190 Update with your changes\n</code></pre></p>"},{"location":"All_Guides/PROJECT_MAP/#read-core-api","title":"\ud83d\udcd6 READ (Core API)","text":"<pre><code>package/Helpers/MT5Account.go  \u2190 Use but don't modify (import and call) \u2b50 FOUNDATION\nexamples/mt5/MT5Service.go     \u2190 Use but don't modify\nexamples/mt5/MT5Sugar.go       \u2190 Use but don't modify\ndocs/                          \u2190 Reference documentation\n</code></pre>"},{"location":"All_Guides/PROJECT_MAP/#leave-alone-generatedbuild","title":"\ud83d\udd12 LEAVE ALONE (Generated/Build)","text":"<pre><code>.vscode/                       \u2190 VS Code settings\ngo.work.sum                    \u2190 Go workspace (auto-generated)\ndocs/site/                     \u2190 Built documentation (auto-generated by MkDocs)\ndocs/styles/                   \u2190 Documentation theme (don't change without understanding)\ndocs/javascripts/              \u2190 Documentation scripts (don't change without understanding)\n</code></pre>"},{"location":"All_Guides/PROJECT_MAP/#project-philosophy","title":"\ud83c\udfaf Project Philosophy","text":"<p>Goal: Make MT5 trading automation accessible through progressive complexity.</p> <p>Three-tier design:</p> <ol> <li>Low level (MT5Account): Full control, proto/gRPC \u2b50 FOUNDATION OF EVERYTHING</li> <li>Wrappers (MT5Service): Simplified method calls</li> <li>Convenience (MT5Sugar): Auto-everything, batteries included</li> </ol> <p>User code:</p> <ul> <li>Orchestrators: Ready-made strategy templates</li> <li>Presets: Adaptive multi-strategies</li> <li>Examples: Learning materials at all levels</li> </ul>"},{"location":"All_Guides/PROJECT_MAP/#troubleshooting","title":"\ud83d\udee0\ufe0f Troubleshooting","text":""},{"location":"All_Guides/PROJECT_MAP/#build-issues","title":"Build Issues","text":"<pre><code># Clean and rebuild\ngo clean\ngo build ./...\n\n# Restore modules\ngo mod tidy\ngo mod download\n\n# Check Go version\ngo version   # Should be 1.21 or higher\n</code></pre>"},{"location":"All_Guides/PROJECT_MAP/#runtime-issues","title":"Runtime Issues","text":"<pre><code>1. Always test on demo account first\n2. Check return codes (10009 = success, 10031 = connection error)\n3. Monitor console output for errors\n4. Use retry logic for intermittent issues\n5. Verify broker allows your strategy type (hedging, etc.)\n</code></pre>"},{"location":"All_Guides/PROJECT_MAP/#performance-considerations","title":"\ud83d\udcc8 Performance Considerations","text":""},{"location":"All_Guides/PROJECT_MAP/#connection-management","title":"Connection Management","text":"<ul> <li>Single gRPC connection shared across operations</li> <li>Built-in auto-reconnection handles temporary failures</li> <li>Retry logic with exponential backoff (1s \u2192 2s \u2192 4s)</li> </ul>"},{"location":"All_Guides/PROJECT_MAP/#rate-limiting","title":"Rate Limiting","text":"<ul> <li>3-second delays between order placements (demo examples)</li> <li>Gateway may enforce additional rate limits</li> <li>Adjust delays based on broker requirements</li> </ul>"},{"location":"All_Guides/PROJECT_MAP/#resource-usage","title":"Resource Usage","text":"<ul> <li>Async/await everywhere for non-blocking I/O</li> <li>Context for graceful shutdown</li> <li>Proper cleanup in defer blocks</li> </ul>"},{"location":"All_Guides/PROJECT_MAP/#best-practices","title":"\ud83d\udcdd Best Practices","text":""},{"location":"All_Guides/PROJECT_MAP/#code-organization","title":"Code Organization","text":"<pre><code>\u2705 DO: Separate concerns (analysis, execution, monitoring)\n\u2705 DO: Use context for lifecycle management\n\u2705 DO: Add comprehensive error handling\n\u2705 DO: Document your strategy logic clearly\n\u2705 DO: Use ProgressBarHelper for long operations\n\n\u274c DON'T: Mix strategy logic with API calls\n\u274c DON'T: Use time.Sleep (use time.After with context)\n\u274c DON'T: Ignore return codes\n\u274c DON'T: Test on live accounts without extensive demo testing\n</code></pre>"},{"location":"All_Guides/PROJECT_MAP/#strategy-development","title":"Strategy Development","text":"<pre><code>\u2705 DO: Start with existing orchestrator as template\n\u2705 DO: Test each component separately\n\u2705 DO: Log all trading decisions and outcomes\n\u2705 DO: Use demo accounts for development\n\u2705 DO: Implement proper risk management\n\n\u274c DON'T: Over-optimize on limited data\n\u274c DON'T: Ignore edge cases and failures\n\u274c DON'T: Use fixed lots without risk calculation\n\u274c DON'T: Deploy without backtesting and forward testing\n</code></pre> <p>\ud83d\udca1 Remember: This is an educational project. All orchestrators and presets are demonstration examples, not production-ready trading systems. Always test on demo accounts, thoroughly understand the code, and implement proper risk management before considering live trading.</p> <p>\"Trade safely, code cleanly, and may your gRPC connections always be stable.\"</p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/","title":"Protobuf Inspector - Interactive Type Explorer","text":"<p>Interactive developer utility for exploring MT5 protobuf types, fields, enums, and data structures from the MT5 gRPC API</p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#what-this-tool-does","title":"\ud83c\udfaf What This Tool Does","text":"<p>The Protobuf Inspector is an interactive command-line tool that helps you explore the structure of the MT5 gRPC API:</p> <ul> <li>\u2705 Interactive search for types, fields, and enums</li> <li>\u2705 Real-time inspection of protobuf message structures</li> <li>\u2705 Field-level discovery - find which types contain specific fields</li> <li>\u2705 Enum value exploration - see all possible enum values</li> <li>\u2705 Type browsing - list all available types in the API</li> </ul>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#getting-started","title":"\ud83d\ude80 Getting Started","text":""},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#running-the-inspector","title":"Running the Inspector","text":"<pre><code>cd examples/demos\ngo run main.go inspect\n</code></pre> <p>You will see an interactive prompt:</p> <pre><code>\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n    MT5 PROTOBUF TYPE INSPECTOR\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nAvailable: 267 types, 67 enums\n\nType 'help' for available commands\nType 'list' to see all types\nType a type name to inspect it\n\n&gt;\n</code></pre>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#available-commands","title":"\ud83d\udcd6 Available Commands","text":"Command Description Example <code>list</code> or <code>ls</code> Show all available protobuf types <code>list</code> <code>&lt;TypeName&gt;</code> Inspect specific type structure <code>PositionInfo</code> <code>search &lt;text&gt;</code> or <code>find &lt;text&gt;</code> Search for types containing text <code>search Order</code> <code>field &lt;name&gt;</code> Find all types with a specific field <code>field Balance</code> <code>enum &lt;name&gt;</code> Show all enum values <code>enum BMT5_ENUM_ORDER_TYPE</code> <code>help</code> or <code>?</code> Show help message <code>help</code> <code>exit</code> or <code>quit</code> Exit the inspector <code>exit</code>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#practical-examples","title":"\ud83d\udca1 Practical Examples","text":""},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#example-1-find-out-what-fields-positioninfo-has","title":"Example 1: Find out what fields PositionInfo has","text":"<p>Command: <pre><code>&gt; PositionInfo\n</code></pre></p> <p>Output: <pre><code>\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nTYPE: PositionInfo\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nFields:\n  Index: uint32 (#1)\n  Ticket: uint64 (#2)\n  OpenTime: google.protobuf.Timestamp (#3)\n  Volume: double (#4)\n  PriceOpen: double (#5)\n  StopLoss: double (#6)\n  TakeProfit: double (#7)\n  PriceCurrent: double (#8)\n  Swap: double (#9)\n  Profit: double (#10)\n  LastUpdateTime: google.protobuf.Timestamp (#11)\n  Type: BMT5_ENUM_POSITION_TYPE (#12)\n  MagicNumber: int64 (#13)\n  Identifier: int64 (#14)\n  Reason: BMT5_ENUM_POSITION_REASON (#15)\n  Symbol: string (#16)\n  Comment: string (#17)\n  ExternalId: string (#18)\n  PositionCommission: double (#19)\n  AccountLogin: int64 (#20)\n</code></pre></p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#example-2-find-which-types-have-the-ticket-field","title":"Example 2: Find which types have the \"Ticket\" field","text":"<p>Command: <pre><code>&gt; field Ticket\n</code></pre></p> <p>Output: <pre><code>Field 'Ticket' found in 15 types:\n  \u2022 PositionInfo\n  \u2022 OrderInfo\n  \u2022 DealInfo\n  \u2022 HistoryOrdersGetByTicketRequest\n  \u2022 HistoryDealsGetByTicketRequest\n  \u2022 OrderCloseRequest\n  \u2022 OrderModifyRequest\n  \u2022 PositionCloseRequest\n  \u2022 PositionModifyRequest\n  ...\n</code></pre></p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#example-3-see-all-order_type-enum-values","title":"Example 3: See all ORDER_TYPE enum values","text":"<p>Command: <pre><code>&gt; enum BMT5_ENUM_ORDER_TYPE\n</code></pre></p> <p>Output: <pre><code>\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nENUM: BMT5_ENUM_ORDER_TYPE\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nValues:\n  BMT5_ORDER_TYPE_BUY         = 0\n  BMT5_ORDER_TYPE_SELL        = 1\n  BMT5_ORDER_TYPE_BUY_LIMIT   = 2\n  BMT5_ORDER_TYPE_SELL_LIMIT  = 3\n  BMT5_ORDER_TYPE_BUY_STOP    = 4\n  BMT5_ORDER_TYPE_SELL_STOP   = 5\n  BMT5_ORDER_TYPE_BUY_STOP_LIMIT  = 6\n  BMT5_ORDER_TYPE_SELL_STOP_LIMIT = 7\n  BMT5_ORDER_TYPE_CLOSE_BY    = 8\n\nTotal: 9 values\n</code></pre></p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#example-4-find-all-types-related-to-position","title":"Example 4: Find all types related to \"Position\"","text":"<p>Command: <pre><code>&gt; search Position\n</code></pre></p> <p>Output: <pre><code>Found 8 types matching 'Position':\n  \u2022 PositionInfo\n  \u2022 PositionsGetRequest\n  \u2022 PositionsGetData\n  \u2022 PositionCloseRequest\n  \u2022 PositionCloseData\n  \u2022 PositionModifyRequest\n  \u2022 PositionModifyData\n  \u2022 BMT5_ENUM_POSITION_TYPE\n</code></pre></p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#example-5-show-all-available-types","title":"Example 5: Show all available types","text":"<p>Command: <pre><code>&gt; list\n</code></pre></p> <p>Output: <pre><code>All available types (267):\n\n[A]\n  \u2022 AccountInfo\n  \u2022 AccountSummaryData\n  \u2022 AccountSummaryRequest\n  ...\n\n[B]\n  \u2022 BalanceOperationData\n  \u2022 BookInfoRequest\n  ...\n\n[C]\n  \u2022 ChartPriceCurrentData\n  \u2022 ChartPriceCurrentRequest\n  ...\n</code></pre></p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#common-use-cases","title":"\ud83d\udd0d Common Use Cases","text":""},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#use-case-1-getting-field-not-found-error","title":"USE CASE 1: \"Getting 'field not found' error\"","text":"<p>Problem: Your code has <code>position.Ballance</code> but it doesn't work</p> <p>Solution: <pre><code>&gt; field Balance\n</code></pre></p> <p>Result: Shows the correct field name and which type has it <pre><code>Field 'Balance' found in:\n  \u2022 AccountSummaryData\n  \u2022 AccountInfo\n</code></pre></p> <p>Fix: Use <code>accountInfo.Balance</code>, not <code>position.Balance</code></p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#use-case-2-what-fields-does-x-have","title":"USE CASE 2: \"What fields does X have?\"","text":"<p>Problem: Don't know what data is in <code>PositionInfo</code></p> <p>Solution: <pre><code>&gt; PositionInfo\n</code></pre></p> <p>Result: Shows all fields (Ticket, Type, Symbol, Profit, etc.)</p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#use-case-3-what-are-valid-enum-values","title":"USE CASE 3: \"What are valid enum values?\"","text":"<p>Problem: Don't know what value to use for <code>OrderType</code></p> <p>Solution: <pre><code>&gt; enum BMT5_ENUM_ORDER_TYPE\n</code></pre></p> <p>Result: Shows all values: <pre><code>BMT5_ORDER_TYPE_BUY = 0\nBMT5_ORDER_TYPE_SELL = 1\nBMT5_ORDER_TYPE_BUY_LIMIT = 2\n...\n</code></pre></p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#use-case-4-need-to-find-position-related-types","title":"USE CASE 4: \"Need to find position-related types\"","text":"<p>Problem: Exploring the API, need to see all position-related structures</p> <p>Solution: <pre><code>&gt; search Position\n</code></pre></p> <p>Result: Shows all types with \"Position\" in the name</p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#use-case-5-want-to-browse-whats-available","title":"USE CASE 5: \"Want to browse what's available\"","text":"<p>Problem: New to the API, want to explore</p> <p>Solution: <pre><code>&gt; list\n</code></pre></p> <p>Result: Shows all available types, grouped alphabetically (actual count displayed by tool)</p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#statistics","title":"\ud83d\udcca Statistics","text":"<ul> <li>Total Types: 267 (all MT5 gRPC protobuf message types)</li> <li>Total Enums: 67 (with 1400+ enum values)</li> <li>Coverage: 100% of MT5 gRPC API</li> </ul>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#important-enums-frequently-used","title":"\ud83d\udd11 Important Enums (Frequently Used)","text":"Enum Name Description Common Values <code>BMT5_ENUM_ORDER_TYPE</code> Order types BUY, SELL, BUY_LIMIT, SELL_LIMIT, BUY_STOP, SELL_STOP <code>BMT5_ENUM_ORDER_TYPE_FILLING</code> Fill policies FOK, IOC, Return, BOC <code>BMT5_ENUM_ORDER_TYPE_TIME</code> Time in force GTC, Day, Specified, Specified Day <code>BMT5_ENUM_DEAL_REASON</code> Deal execution reason Client, Expert, SL, TP, Mobile <code>BMT5_ENUM_DEAL_ENTRY_TYPE</code> Deal entry type In, Out, InOut, Out By <code>BMT5_ENUM_POSITION_TYPE</code> Position direction BUY, SELL <code>BMT5_ENUM_POSITION_REASON</code> Why position opened Client, Expert, Dealer, Mobile <code>MqlErrorCode</code> MQL error codes 211 different error codes <code>MqlErrorTradeCode</code> Trading operation errors REQUOTE, REJECT, MARKET_CLOSED, etc. <code>SymbolInfoDoubleProperty</code> Symbol price properties BID, ASK, POINT, SWAP_LONG, SWAP_SHORT <code>SymbolInfoIntegerProperty</code> Symbol integer properties DIGITS, SPREAD, TRADE_MODE, etc. <code>MRPC_ENUM_TRADE_REQUEST_ACTIONS</code> Trade actions DEAL, PENDING, SLTP, MODIFY, REMOVE"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#features","title":"\u2728 Features","text":"Feature Description Case-insensitive search <code>search Order</code> = <code>search order</code> Partial field matching <code>field profit</code> finds both <code>Profit</code> and <code>TakeProfit</code> Type categorization Shows <code>[Request]</code>, <code>[Reply]</code>, <code>[Type]</code>, <code>[Info]</code> tags Array indicators \ud83d\udcda icon for repeated/array fields Protobuf field numbers Shows field <code>#N</code> for each field Smart error messages Suggests alternatives when type not found"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#example-interactive-session","title":"\ud83c\udfac Example Interactive Session","text":"<pre><code>$ go run main.go inspect\n\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n    MT5 PROTOBUF TYPE INSPECTOR\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\n&gt; search Order\nFound 42 types matching 'Order':\n  \u2022 OrderInfo\n  \u2022 OrderSendRequest\n  \u2022 OrderSendData\n  \u2022 OrderCheckRequest\n  \u2022 OrderCalcMarginRequest\n  ...\n\n&gt; OrderInfo\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nTYPE: OrderInfo\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nFields:\n  Ticket: uint64 (#1)\n  Type: BMT5_ENUM_ORDER_TYPE (#2)\n  State: BMT5_ENUM_ORDER_STATE (#3)\n  TypeFilling: BMT5_ENUM_ORDER_TYPE_FILLING (#4)\n  ...\n\n&gt; field Magic\nField 'Magic' found in 8 types:\n  \u2022 OrderInfo\n  \u2022 PositionInfo\n  \u2022 DealInfo\n  \u2022 MqlTradeRequest\n  ...\n\n&gt; enum BMT5_ENUM_ORDER_STATE\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nENUM: BMT5_ENUM_ORDER_STATE\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nValues:\n  BMT5_ORDER_STATE_STARTED       = 0\n  BMT5_ORDER_STATE_PLACED        = 1\n  BMT5_ORDER_STATE_CANCELED      = 2\n  BMT5_ORDER_STATE_PARTIAL       = 3\n  BMT5_ORDER_STATE_FILLED        = 4\n  BMT5_ORDER_STATE_REJECTED      = 5\n  BMT5_ORDER_STATE_EXPIRED       = 6\n  BMT5_ORDER_STATE_REQUEST_ADD   = 7\n  BMT5_ORDER_STATE_REQUEST_MODIFY = 8\n  BMT5_ORDER_STATE_REQUEST_CANCEL = 9\n\nTotal: 10 values\n\n&gt; exit\nGoodbye!\n</code></pre>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#implementation-details","title":"\ud83d\udcbb Implementation Details","text":"<p>The Protobuf Inspector uses Go reflection to:</p> <ol> <li>Register all protobuf types at startup</li> <li>Build an in-memory index of types, fields, and enums</li> <li>Provide instant search and lookup</li> <li>Format output with color and structure</li> </ol> <p>Source file: <code>examples/demos/helpers/17_protobuf_inspector.go</code></p> <p>Enum registration: All 1400+ enum values across 67 enums are manually registered in the code (Go protobuf doesn't support automatic enum value discovery via reflection).</p>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#technical-notes","title":"\ud83d\udd27 Technical Notes","text":"<ul> <li>No MT5 connection required - This is a purely offline tool that inspects type definitions</li> <li>Complete coverage - All 267 types and 67 enums from the MT5 gRPC API</li> <li>Instant search - In-memory index for fast lookup</li> <li>Development only - Not intended for production use</li> </ul>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#when-to-use-this-tool","title":"\ud83c\udfaf When to Use This Tool","text":"<p>\u2705 Use the inspector when:</p> <ul> <li>Learning the MT5 gRPC API structure</li> <li>Debugging \"field not found\" errors</li> <li>Exploring available protobuf types</li> <li>Looking up enum values</li> <li>Finding the correct request/response types for API calls</li> <li>Understanding message structures before writing code</li> </ul> <p>\u274c Don't use for:</p> <ul> <li>Inspecting runtime data (use debugger instead)</li> <li>Production code (this is a development tool)</li> <li>Testing API connectivity (use demo connections instead)</li> </ul>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#tips-and-tricks","title":"\ud83d\udcdd Tips and Tricks","text":"<ol> <li>Start with search - If you know the general area, use <code>search &lt;keyword&gt;</code> first</li> <li>Use field search - When you see a field name but don't know which type, use <code>field &lt;name&gt;</code></li> <li>Explore enums early - Understanding enum values saves debugging time later</li> <li>List is your friend - When stuck, use <code>list</code> to browse available types</li> <li>Case doesn't matter - Type commands in lowercase, it's faster</li> </ol>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#quick-start-workflow","title":"\ud83d\ude80 Quick Start Workflow","text":"<p>Beginner workflow for exploring the API:</p> <pre><code># 1. Start the inspector\ngo run main.go inspect\n\n# 2. Browse what's available\n&gt; list\n\n# 3. Search for what you need\n&gt; search Position\n\n# 4. Inspect a type\n&gt; PositionInfo\n\n# 5. Check enum values\n&gt; enum BMT5_ENUM_POSITION_TYPE\n\n# 6. Find related types\n&gt; field Ticket\n</code></pre>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#learning-session-example","title":"\ud83c\udf93 Learning Session Example","text":"<p>Goal: \"I want to close a position, what do I need?\"</p> <pre><code>&gt; search position close\nFound 2 types:\n  \u2022 PositionCloseRequest\n  \u2022 PositionCloseData\n\n&gt; PositionCloseRequest\nFields:\n  Ticket: uint64 (#1)\n  Deviation: uint64 (#2)\n  Comment: string (#3)\n\n&gt; PositionCloseData\nFields:\n  ReturnedCode: uint32 (#1)\n  OrderTicket: uint64 (#2)\n\n# Now you know:\n# - Use PositionCloseRequest with Ticket field\n# - You'll get PositionCloseData back\n# - Check ReturnedCode == 10009 for success\n</code></pre>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#troubleshooting","title":"\ud83c\udd98 Troubleshooting","text":"<p>Q: Type not found <pre><code>&gt; MyType\n\u274c Type not found: MyType\n\ud83d\udca1 Try: search my\n</code></pre></p> <p>A: Use search with partial name to find similar types</p> <p>Q: Too many results</p> <pre><code>&gt; search data\nFound 156 types...\n</code></pre> <p>A: Be more specific in your search query</p> <p>Q: What's the difference between OrderInfo and OrderSendRequest?</p> <p>A: Use the inspector:</p> <ul> <li><code>OrderInfo</code> - Information about an existing order</li> <li><code>OrderSendRequest</code> - Request to create a new order</li> </ul> <p>Rule:</p> <ul> <li><code>*Request</code> - Input for API method</li> <li><code>*Reply/*Data</code> - Output from API method</li> <li><code>*Info</code> - Structured data about entities</li> </ul>"},{"location":"All_Guides/PROTOBUF_INSPECTOR_GUIDE/#summary","title":"\ud83c\udf89 Summary","text":"<p>The Protobuf Inspector is your first stop when working with the MT5 gRPC API. Use it to:</p> <ol> <li>\ud83d\udd0d Discover available types</li> <li>\ud83d\udcd6 Learn message structures</li> <li>\ud83d\udc1b Debug field name issues</li> <li>\u2705 Verify enum values</li> <li>\ud83d\ude80 Speed up development</li> </ol> <p>Remember: Type <code>help</code> at any time for command reference!</p> <p>Next Steps:</p> <ul> <li>Run <code>go run main.go inspect</code> and explore!</li> <li>Check MT5Account Master Overview for complete API documentation</li> <li>Try the demo examples in <code>examples/demos/</code></li> </ul>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/","title":"MT5 Return Codes (RetCodes) Reference - Go","text":""},{"location":"All_Guides/RETURN_CODES_REFERENCE/#what-is-retcode","title":"What is RetCode?","text":"<p>RetCode (Return Code) is a status code that MT5 terminal returns after executing a trading operation. The code indicates success or the reason for failure.</p> <p>RetCodes appear only in trading methods because only trading operations go through the broker and can be rejected for various reasons (insufficient margin, invalid price, market closed, etc.).</p>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#retcode-source","title":"\ud83d\udccc RetCode Source","text":"<p>RetCodes are standard MQL5 codes defined in official MetaQuotes documentation:</p> <p>MQL5 Documentation: Trade Result Codes (ENUM_TRADE_RETCODE)</p> <p>These codes are:</p> <ul> <li>Unified across all languages (C#, Python, Java, Node.js, Go, PHP)</li> <li>Unified with MT5 terminal - returned directly from the trading server</li> <li>Defined in protobuf - enum <code>MqlErrorTradeCode</code> in the API proto contract</li> <li>Available as Go constants - defined in <code>package/Helpers/errors.go</code></li> </ul>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#where-is-retcode-used-in-the-api","title":"Where is RetCode Used in the API?","text":"<p>RetCode is returned in all trading operations that modify positions or orders:</p>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#1-ordersend-opening-orders","title":"1. OrderSend (Opening Orders)","text":"<pre><code>import (\n    \"errors\"\n    \"fmt\"\n\n    mt5 \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\n// Using Sugar API\nticket, err := sugar.BuyMarket(\"EURUSD\", 0.01)\nif err != nil {\n    // Check if it's an ApiError with RetCode\n    var apiErr *mt5.ApiError\n    if errors.As(err, &amp;apiErr) {\n        fmt.Printf(\"RetCode: %d\\n\", apiErr.MqlErrorTradeIntCode())\n        fmt.Printf(\"Description: %s\\n\", apiErr.MqlErrorTradeDescription())\n    }\n}\n\n// Using Account API (low level)\nsendData, err := account.OrderSend(ctx, req)\nif err != nil {\n    fmt.Printf(\"gRPC error: %v\\n\", err)\n    return\n}\n\n// IMPORTANT: Always check ReturnedCode!\nif sendData.ReturnedCode == mt5.TradeRetCodeDone {\n    fmt.Printf(\"\u2705 Order opened! Ticket: %d\\n\", sendData.OrderTicket)\n} else {\n    fmt.Printf(\"\u274c Order failed: %s\\n\",\n        mt5.GetRetCodeMessage(sendData.ReturnedCode))\n}\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#2-ordermodify-modifying-sltp","title":"2. OrderModify (Modifying SL/TP)","text":"<pre><code>import (\n    \"context\"\n    \"fmt\"\n\n    mt5 \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    pb \"github.com/MetaRPC/GoMT5/package\"\n)\n\nmodifyData, err := account.OrderModify(ctx, &amp;pb.OrderModifyRequest{\n    Ticket: ticket,\n    Sl:     1.0850,\n    Tp:     1.0950,\n})\n\nif err != nil {\n    fmt.Printf(\"gRPC error: %v\\n\", err)\n    return\n}\n\nif mt5.IsRetCodeSuccess(modifyData.ReturnedCode) {\n    fmt.Println(\"\u2705 SL/TP modified successfully\")\n} else {\n    fmt.Printf(\"\u274c Modification failed: %s\\n\",\n        mt5.GetRetCodeMessage(modifyData.ReturnedCode))\n}\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#3-positionclose-closing-positions","title":"3. PositionClose (Closing Positions)","text":"<pre><code>import (\n    \"context\"\n    \"errors\"\n    \"fmt\"\n\n    mt5 \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    pb \"github.com/MetaRPC/GoMT5/package\"\n)\n\n// Using Sugar API\nerr := sugar.ClosePosition(ticket)\nif err != nil {\n    var apiErr *mt5.ApiError\n    if errors.As(err, &amp;apiErr) {\n        if apiErr.MqlErrorTradeIntCode() == 10036 {\n            fmt.Println(\"\u26a0\ufe0f Position already closed\")\n        }\n    }\n}\n\n// Using Account API\ncloseData, err := account.PositionClose(ctx, &amp;pb.PositionCloseRequest{\n    Ticket: ticket,\n})\n\nif closeData.ReturnedCode == mt5.TradeRetCodeDone {\n    fmt.Println(\"\u2705 Position closed\")\n}\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#why-retcode-only-in-trading-methods","title":"Why RetCode Only in Trading Methods?","text":"<p>Informational methods (getting prices, symbols, balance) DO NOT return RetCode because:</p> <ul> <li>They don't go through the broker</li> <li>They cannot be \"rejected\" - either data exists or there's a gRPC error</li> <li>They work with local terminal data</li> </ul> <p>Trading methods return RetCode because:</p> <ul> <li>Request is sent to broker via trading server</li> <li>Broker validates: margin, symbol rules, trading hours, limits</li> <li>Broker can reject request for dozens of reasons</li> <li>Each reason has its own unique code</li> </ul>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#complete-retcode-list","title":"Complete RetCode List","text":""},{"location":"All_Guides/RETURN_CODES_REFERENCE/#success-codes","title":"\u2705 Success Codes","text":"Code Go Constant Description When Returned 10009 <code>TradeRetCodeDone</code> Request completed successfully Market order opened/closed 10010 <code>TradeRetCodeDonePartial</code> Partial execution Only part of volume executed 10008 <code>TradeRetCodePlaced</code> Pending order placed Limit/Stop order placed"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#requote-codes-retry-recommended","title":"\u26a0\ufe0f Requote Codes (Retry Recommended)","text":"Code Go Constant Description Action 10004 <code>TradeRetCodeRequote</code> Requote Price changed, retry request 10020 <code>TradeRetCodePriceChanged</code> Price changed Similar to requote, retry <p>Helper function: <pre><code>if mt5.IsRetCodeRequote(retCode) {\n    // Retry with updated price\n}\n</code></pre></p>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#request-validation-errors","title":"\u274c Request Validation Errors","text":"Code Go Constant Description Common Cause 10013 <code>TradeRetCodeInvalidRequest</code> Invalid request Incorrect parameters 10014 <code>TradeRetCodeInvalidVolume</code> Invalid volume Volume &lt; MinVolume or &gt; MaxVolume 10015 <code>TradeRetCodeInvalidPrice</code> Invalid price Price doesn't match symbol rules 10016 <code>TradeRetCodeInvalidStops</code> Invalid stops SL/TP too close to price (check StopLevel) 10022 <code>TradeRetCodeInvalidExpiration</code> Invalid expiration Expiration time incorrect 10030 <code>TradeRetCodeInvalidFill</code> Invalid order filling type Fill type not allowed 10035 <code>TradeRetCodeInvalidOrder</code> Invalid order type Order type prohibited for symbol 10038 <code>TradeRetCodeInvalidCloseVolume</code> Invalid close volume Close volume exceeds position volume"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#trading-restrictions","title":"\ud83d\udeab Trading Restrictions","text":"Code Go Constant Description Reason 10017 <code>TradeRetCodeTradeDisabled</code> Trading disabled Trading disabled for symbol 10018 <code>TradeRetCodeMarketClosed</code> Market closed Outside trading hours 10026 <code>TradeRetCodeServerDisablesAt</code> Autotrading disabled by server Server disabled auto-trading 10027 <code>TradeRetCodeClientDisablesAt</code> Autotrading disabled by client Terminal disabled auto-trading 10032 <code>TradeRetCodeOnlyReal</code> Only real accounts Action unavailable on demo 10042 <code>TradeRetCodeLongOnly</code> Only long positions allowed Short positions prohibited 10043 <code>TradeRetCodeShortOnly</code> Only short positions allowed Long positions prohibited 10044 <code>TradeRetCodeCloseOnly</code> Only position closing allowed Opening new positions prohibited 10045 <code>TradeRetCodeFifoClose</code> Position close only by FIFO rule FIFO rule enforced 10046 <code>TradeRetCodeHedgeProhibited</code> Opposite positions prohibited Hedging disabled"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#resource-limits","title":"\ud83d\udcb0 Resource Limits","text":"Code Go Constant Description Solution 10019 <code>TradeRetCodeNoMoney</code> Insufficient funds Check free margin 10033 <code>TradeRetCodeLimitOrders</code> Pending orders limit Close some pending orders 10034 <code>TradeRetCodeLimitVolume</code> Volume limit Reduce position volume 10040 <code>TradeRetCodeLimitPositions</code> Positions limit Close some positions"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#technical-issues-retryable","title":"\ud83d\udd27 Technical Issues (Retryable)","text":"Code Go Constant Description Retryable 10011 <code>TradeRetCodeError</code> Processing error No 10012 <code>TradeRetCodeTimeout</code> Request timeout Yes 10021 <code>TradeRetCodeNoQuotes</code> No quotes Yes 10024 <code>TradeRetCodeTooManyRequests</code> Rate limiting Yes (with delay) 10028 <code>TradeRetCodeLocked</code> Request locked for processing Yes 10029 <code>TradeRetCodeFrozen</code> Order or position frozen Yes 10031 <code>TradeRetCodeNoConnection</code> No connection Yes <p>Helper function: <pre><code>if mt5.IsRetCodeRetryable(retCode) {\n    // Safe to retry with exponential backoff\n    time.Sleep(time.Second * 2)\n    // Retry operation...\n}\n</code></pre></p>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#state-management","title":"\ud83d\udd04 State Management","text":"Code Go Constant Description Meaning 10023 <code>TradeRetCodeOrderChanged</code> Order state changed Order already modified/closed 10025 <code>TradeRetCodeNoChanges</code> No changes New parameters = current parameters 10036 <code>TradeRetCodePositionClosed</code> Position closed Position doesn't exist 10039 <code>TradeRetCodeCloseOrderExist</code> Close order exists Cannot close more than position volume"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#rejection-codes","title":"\ud83d\udea8 Rejection Codes","text":"Code Go Constant Description Reason 10006 <code>TradeRetCodeReject</code> Request rejected Broker rejected 10007 <code>TradeRetCodeCancel</code> Request canceled Canceled by trader 10041 <code>TradeRetCodeRejectCancel</code> Pending order activation rejected Activation rejected and canceled"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#go-helper-functions","title":"Go Helper Functions","text":"<p>The <code>package/Helpers</code> (mt5 package) provides helper functions for working with RetCodes:</p>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#isretcodesuccess","title":"IsRetCodeSuccess()","text":"<pre><code>func IsRetCodeSuccess(retCode uint32) bool\n\n// Usage\nif mt5.IsRetCodeSuccess(sendData.ReturnedCode) {\n    fmt.Println(\"Trade successful!\")\n}\n\n// Returns true only for retCode == 10009 (TradeRetCodeDone)\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#isretcoderequote","title":"IsRetCodeRequote()","text":"<pre><code>func IsRetCodeRequote(retCode uint32) bool\n\n// Usage\nif mt5.IsRetCodeRequote(sendData.ReturnedCode) {\n    fmt.Println(\"Price changed, retrying...\")\n    // Retry with updated price\n}\n\n// Returns true for 10004 or 10020\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#isretcoderetryable","title":"IsRetCodeRetryable()","text":"<pre><code>func IsRetCodeRetryable(retCode uint32) bool\n\n// Usage\nif mt5.IsRetCodeRetryable(sendData.ReturnedCode) {\n    // These errors are temporary, retry with delay\n    time.Sleep(time.Second * 2)\n    // Retry operation\n}\n\n// Returns true for: Timeout, NoConnection, Frozen, Locked, TooManyRequests, NoQuotes\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#getretcodemessage","title":"GetRetCodeMessage()","text":"<pre><code>func GetRetCodeMessage(retCode uint32) string\n\n// Usage\nif sendData.ReturnedCode != mt5.TradeRetCodeDone {\n    fmt.Printf(\"Error: %s\\n\", mt5.GetRetCodeMessage(sendData.ReturnedCode))\n}\n\n// Returns human-readable description for any RetCode\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#usage-examples","title":"Usage Examples","text":""},{"location":"All_Guides/RETURN_CODES_REFERENCE/#example-1-basic-order-placement-with-retcode-check","title":"Example 1: Basic Order Placement with RetCode Check","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n\n    mt5 \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    pb \"github.com/MetaRPC/GoMT5/package\"\n)\n\nfunc main() {\n    // Connection (see GETTING_STARTED.md for connection details)\n    account := mt5.NewMT5Account()\n\n    ctx := context.Background()\n\n    _, err := account.Connect(ctx, &amp;pb.ConnectRequest{\n        Host:     \"localhost\",\n        Port:     7775,\n        User:     \"12345678\",\n        Password: \"your_password\",\n    })\n    if err != nil {\n        fmt.Printf(\"Connection error: %v\\n\", err)\n        return\n    }\n    defer account.Disconnect(ctx)\n\n    // Place buy market order\n    req := &amp;pb.OrderSendRequest{\n        Request: &amp;pb.MqlTradeRequest{\n            Action: pb.MRPC_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n            Symbol: \"EURUSD\",\n            Volume: 0.01,\n            Type:   pb.BMT5_ENUM_ORDER_TYPE_BMT5_ORDER_TYPE_BUY,\n        },\n    }\n\n    sendData, err := account.OrderSend(ctx, req)\n    if err != nil {\n        fmt.Printf(\"gRPC error: %v\\n\", err)\n        return\n    }\n\n    // Check RetCode\n    if sendData.ReturnedCode == mt5.TradeRetCodeDone {\n        fmt.Printf(\"\u2705 Order opened successfully!\\n\")\n        fmt.Printf(\"   Ticket: #%d\\n\", sendData.OrderTicket)\n        fmt.Printf(\"   Volume: %.2f lots\\n\", sendData.Volume)\n        fmt.Printf(\"   Price: %.5f\\n\", sendData.Price)\n    } else {\n        fmt.Printf(\"\u274c Order failed!\\n\")\n        fmt.Printf(\"   RetCode: %d\\n\", sendData.ReturnedCode)\n        fmt.Printf(\"   Description: %s\\n\",\n            mt5.GetRetCodeMessage(sendData.ReturnedCode))\n    }\n}\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#example-2-handling-common-errors-switch-statement","title":"Example 2: Handling Common Errors (Switch Statement)","text":"<pre><code>import (\n    \"errors\"\n    \"fmt\"\n    \"time\"\n\n    mt5 \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nticket, err := sugar.BuyMarket(\"GBPUSD\", 0.5)\nif err != nil {\n    var apiErr *mt5.ApiError\n    if errors.As(err, &amp;apiErr) {\n        retCode := apiErr.MqlErrorTradeIntCode()\n\n        switch retCode {\n        case mt5.TradeRetCodeNoMoney:\n            fmt.Println(\"\u26a0\ufe0f Insufficient funds!\")\n            fmt.Println(\"   Solution: Reduce volume or add margin\")\n\n        case mt5.TradeRetCodeMarketClosed:\n            fmt.Println(\"\u26a0\ufe0f Market closed\")\n            fmt.Println(\"   Solution: Try during trading hours\")\n\n        case mt5.TradeRetCodeInvalidStops:\n            fmt.Println(\"\u26a0\ufe0f SL/TP too close to market price\")\n            fmt.Println(\"   Solution: Increase distance (check StopLevel)\")\n\n        case mt5.TradeRetCodeInvalidVolume:\n            fmt.Println(\"\u26a0\ufe0f Invalid volume\")\n            // Get symbol limits\n            minVol, _ := sugar.GetSymbolMinVolume(\"GBPUSD\")\n            maxVol, _ := sugar.GetSymbolMaxVolume(\"GBPUSD\")\n            step, _ := sugar.GetSymbolVolumeStep(\"GBPUSD\")\n            fmt.Printf(\"   Min: %.2f, Max: %.2f, Step: %.2f\\n\",\n                minVol, maxVol, step)\n\n        case mt5.TradeRetCodeRequote,\n             mt5.TradeRetCodePriceChanged:\n            fmt.Println(\"\u26a0\ufe0f Price changed, retrying...\")\n            time.Sleep(time.Millisecond * 100)\n            // Retry order\n\n        default:\n            fmt.Printf(\"\u274c Error: %s\\n\", apiErr.MqlErrorTradeDescription())\n        }\n    }\n} else {\n    fmt.Printf(\"\u2705 Order #%d opened\\n\", ticket)\n}\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#example-3-retry-logic-for-temporary-errors","title":"Example 3: Retry Logic for Temporary Errors","text":"<pre><code>import (\n    \"errors\"\n    \"fmt\"\n    \"time\"\n\n    mt5 \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc PlaceOrderWithRetry(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    volume float64,\n    maxRetries int,\n) (uint64, error) {\n\n    for attempt := 1; attempt &lt;= maxRetries; attempt++ {\n        ticket, err := sugar.BuyMarket(symbol, volume)\n\n        // Success\n        if err == nil {\n            return ticket, nil\n        }\n\n        // Check if retryable\n        var apiErr *mt5.ApiError\n        if errors.As(err, &amp;apiErr) {\n            retCode := apiErr.MqlErrorTradeIntCode()\n\n            // Requote - retry immediately\n            if mt5.IsRetCodeRequote(uint32(retCode)) {\n                fmt.Printf(\"Requote on attempt %d, retrying...\\n\", attempt)\n                time.Sleep(time.Millisecond * 100)\n                continue\n            }\n\n            // Retryable error - exponential backoff\n            if mt5.IsRetCodeRetryable(uint32(retCode)) {\n                waitTime := time.Second * time.Duration(attempt)\n                fmt.Printf(\"Temporary error on attempt %d, waiting %v...\\n\",\n                    attempt, waitTime)\n                time.Sleep(waitTime)\n                continue\n            }\n\n            // Permanent error - stop retrying\n            return 0, fmt.Errorf(\"permanent error: %s\",\n                apiErr.MqlErrorTradeDescription())\n        }\n\n        // Other error (gRPC, network, etc.)\n        return 0, err\n    }\n\n    return 0, fmt.Errorf(\"failed after %d attempts\", maxRetries)\n}\n\n// Usage\nticket, err := PlaceOrderWithRetry(sugar, \"EURUSD\", 0.01, 3)\nif err != nil {\n    fmt.Printf(\"Failed to place order: %v\\n\", err)\n} else {\n    fmt.Printf(\"Order placed: #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#example-4-using-helperscheckretcode","title":"Example 4: Using helpers.CheckRetCode()","text":"<pre><code>import \"github.com/MetaRPC/GoMT5/examples/demos/helpers\"\n\nsendData, err := account.OrderSend(ctx, req)\nhelpers.Fatal(err, \"OrderSend failed\")\n\n// CheckRetCode prints formatted message and returns true on success\nif helpers.CheckRetCode(sendData.ReturnedCode, \"Order placement\") {\n    fmt.Printf(\"Order ticket: %d\\n\", sendData.OrderTicket)\n}\n\n// Output on success:\n//   \u2713 Order placement successful (RetCode: 10009)\n\n// Output on failure (e.g., market closed):\n//   \u274c Order placement failed (RetCode: 10018)\n//      Market is closed\n//      \ud83d\udca1 Hint: Market closed - check trading hours\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#example-5-modifying-sltp-with-validation","title":"Example 5: Modifying SL/TP with Validation","text":"<pre><code>import (\n    \"context\"\n    \"fmt\"\n\n    mt5 \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    pb \"github.com/MetaRPC/GoMT5/package\"\n)\n\nmodifyData, err := account.OrderModify(ctx, &amp;pb.OrderModifyRequest{\n    Ticket: 123456,\n    Sl:     1.0850,\n    Tp:     1.0950,\n})\n\nif err != nil {\n    fmt.Printf(\"gRPC error: %v\\n\", err)\n    return\n}\n\nswitch modifyData.ReturnedCode {\ncase mt5.TradeRetCodeDone:\n    fmt.Println(\"\u2705 SL/TP updated successfully\")\n\ncase mt5.TradeRetCodeNoChanges:\n    fmt.Println(\"\u26a0\ufe0f New SL/TP same as current - no action taken\")\n\ncase mt5.TradeRetCodePositionClosed:\n    fmt.Println(\"\u26a0\ufe0f Position already closed by SL/TP or manually\")\n\ncase mt5.TradeRetCodeInvalidStops:\n    fmt.Println(\"\u274c Invalid SL/TP distance\")\n    // Get symbol stop level\n    stopLevel, _ := sugar.GetSymbolStopLevel(\"EURUSD\")\n    fmt.Printf(\"   Minimum distance: %d points\\n\", stopLevel)\n\ndefault:\n    fmt.Printf(\"\u274c Modification failed: %s\\n\",\n        mt5.GetRetCodeMessage(modifyData.ReturnedCode))\n}\n</code></pre>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#best-practices","title":"Best Practices","text":""},{"location":"All_Guides/RETURN_CODES_REFERENCE/#do","title":"\u2705 DO:","text":"<ol> <li> <p>Always check ReturnedCode after trading operations    <pre><code>if sendData.ReturnedCode == mt5.TradeRetCodeDone {\n    // Success\n}\n</code></pre></p> </li> <li> <p>Use helper functions for cleaner code    <pre><code>if mt5.IsRetCodeSuccess(retCode) { ... }\nif mt5.IsRetCodeRequote(retCode) { ... }\n</code></pre></p> </li> <li> <p>Retry requotes (10004, 10020)    <pre><code>if mt5.IsRetCodeRequote(retCode) {\n    // Retry with updated price\n}\n</code></pre></p> </li> <li> <p>Check margin before trading to avoid 10019    <pre><code>freeMargin, _ := sugar.GetFreeMargin()\nrequiredMargin, _ := sugar.CalculateMargin(\"EURUSD\", 0.01)\nif freeMargin &lt; requiredMargin {\n    fmt.Println(\"Insufficient margin!\")\n}\n</code></pre></p> </li> </ol>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#dont","title":"\u274c DON'T:","text":"<ol> <li> <p>Don't ignore ReturnedCode - checking only <code>err != nil</code> is NOT enough!    <pre><code>// WRONG:\nsendData, err := account.OrderSend(ctx, req)\nif err == nil {\n    // This doesn't mean trade succeeded!\n}\n\n// CORRECT:\nif err == nil &amp;&amp; sendData.ReturnedCode == 10009 {\n    // Now we know trade succeeded\n}\n</code></pre></p> </li> <li> <p>Don't use magic numbers - use constants    <pre><code>// WRONG:\nif retCode == 10009 { ... }\n\n// CORRECT:\nif retCode == mt5.TradeRetCodeDone { ... }\n</code></pre></p> </li> <li> <p>Don't retry permanent errors (insufficient margin, market closed)    <pre><code>// Use IsRetCodeRetryable() to check\n</code></pre></p> </li> <li> <p>Don't assume success = no error <pre><code>// Need to check both gRPC error AND RetCode\nif err != nil {\n    return err // gRPC/network error\n}\nif sendData.ReturnedCode != 10009 {\n    return fmt.Errorf(\"trade failed: %s\",\n        mt5.GetRetCodeMessage(sendData.ReturnedCode))\n}\n</code></pre></p> </li> </ol>"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#quick-reference-table","title":"Quick Reference Table","text":"Category RetCodes Action Success 10008, 10009, 10010 Continue normally Requote 10004, 10020 Retry immediately Temporary 10012, 10021, 10024, 10028, 10029, 10031 Retry with delay Validation 10013-10016, 10022, 10030, 10035, 10038 Fix parameters Restrictions 10017, 10018, 10026, 10027, 10032, 10042-10046 Check trading conditions Limits 10019, 10033, 10034, 10040 Reduce volume/positions State 10023, 10025, 10036, 10039 Check current state Rejection 10006, 10007, 10041 Check request Technical 10011 Contact support"},{"location":"All_Guides/RETURN_CODES_REFERENCE/#constants-reference","title":"Constants Reference","text":"<p>All RetCode constants are defined in <code>package/Helpers/errors.go</code>:</p> <pre><code>package mt5\n\nconst (\n    // Success codes\n    TradeRetCodeDone        uint32 = 10009 // Request completed successfully\n    TradeRetCodeDonePartial uint32 = 10010 // Only part of the request was completed\n    TradeRetCodePlaced      uint32 = 10008 // Order placed (pending order activated)\n\n    // Requote codes\n    TradeRetCodeRequote      uint32 = 10004 // Requote (price changed, need to retry)\n    TradeRetCodePriceChanged uint32 = 10020 // Prices changed (requote)\n\n    // Request rejection codes\n    TradeRetCodeReject            uint32 = 10006 // Request rejected\n    TradeRetCodeCancel            uint32 = 10007 // Request canceled by trader\n    TradeRetCodeInvalidRequest    uint32 = 10013 // Invalid request\n    TradeRetCodeInvalidVolume     uint32 = 10014 // Invalid volume in the request\n    TradeRetCodeInvalidPrice      uint32 = 10015 // Invalid price in the request\n    TradeRetCodeInvalidStops      uint32 = 10016 // Invalid stops in the request (SL/TP too close)\n    TradeRetCodeInvalidExpiration uint32 = 10022 // Invalid order expiration date in the request\n    TradeRetCodeInvalidFill       uint32 = 10030 // Invalid order filling type\n    TradeRetCodeInvalidOrder      uint32 = 10035 // Incorrect or prohibited order type\n    TradeRetCodeInvalidCloseVolume uint32 = 10038 // Invalid close volume (exceeds position volume)\n\n    // Trading restriction codes\n    TradeRetCodeTradeDisabled    uint32 = 10017 // Trade is disabled\n    TradeRetCodeMarketClosed     uint32 = 10018 // Market is closed\n    TradeRetCodeServerDisablesAt uint32 = 10026 // Autotrading disabled by server\n    TradeRetCodeClientDisablesAt uint32 = 10027 // Autotrading disabled by client terminal\n    TradeRetCodeOnlyReal         uint32 = 10032 // Operation is allowed only for live accounts\n    TradeRetCodeLongOnly         uint32 = 10042 // Only long positions allowed\n    TradeRetCodeShortOnly        uint32 = 10043 // Only short positions allowed\n    TradeRetCodeCloseOnly        uint32 = 10044 // Only position close operations allowed\n    TradeRetCodeFifoClose        uint32 = 10045 // Position close only by FIFO rule\n    TradeRetCodeHedgeProhibited  uint32 = 10046 // Opposite positions on same symbol prohibited (hedging disabled)\n\n    // Resource limit codes\n    TradeRetCodeNoMoney        uint32 = 10019 // Not enough money to complete the request (insufficient margin)\n    TradeRetCodeLimitOrders    uint32 = 10033 // The number of pending orders has reached the limit\n    TradeRetCodeLimitVolume    uint32 = 10034 // The volume of orders and positions for the symbol has reached the limit\n    TradeRetCodeLimitPositions uint32 = 10040 // The number of open positions has reached the limit\n\n    // Technical issue codes\n    TradeRetCodeError           uint32 = 10011 // Request processing error\n    TradeRetCodeTimeout         uint32 = 10012 // Request canceled by timeout\n    TradeRetCodeNoQuotes        uint32 = 10021 // No quotes to process the request\n    TradeRetCodeTooManyRequests uint32 = 10024 // Too frequent requests\n    TradeRetCodeLocked          uint32 = 10028 // Request locked for processing\n    TradeRetCodeFrozen          uint32 = 10029 // Order or position frozen\n    TradeRetCodeNoConnection    uint32 = 10031 // No connection with the trade server\n\n    // State management codes\n    TradeRetCodeOrderChanged    uint32 = 10023 // Order state changed\n    TradeRetCodeNoChanges       uint32 = 10025 // No changes in request\n    TradeRetCodePositionClosed  uint32 = 10036 // Position with the specified identifier already closed\n    TradeRetCodeCloseOrderExist uint32 = 10039 // A close order already exists for a specified position\n    TradeRetCodeRejectCancel    uint32 = 10041 // Pending order activation rejected and canceled\n)\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/","title":"User Code Sandbox Guide","text":""},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#what-is-this","title":"What is this?","text":"<p>This is your sandbox for writing custom MT5 trading code in Go. Connection setup is already done - you only need to add your trading logic!</p>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#quick-start","title":"Quick Start","text":"<ol> <li>Case already active in main.go</li> <li>Open <code>examples/demos/main.go</code></li> <li> <p>Case \"18\" for user code sandbox is ready to use</p> </li> <li> <p>Open <code>usercode/18_usercode.go</code></p> </li> <li> <p>Write your code or uncomment examples</p> </li> <li> <p>Run: <pre><code>cd examples/demos\ngo run main.go 18\n</code></pre></p> </li> </ol> <p>That's it! Your code will execute with full MT5 connection.</p>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#how-to-use","title":"How to use","text":""},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#option-1-uncomment-examples","title":"Option 1: Uncomment examples","text":"<p>The file contains 3 ready-to-use examples:</p> <pre><code>// Example 1: Get account balance (Sugar - easiest)\n// balance, err := sugar.GetBalance()\n// if err != nil {\n//     fmt.Printf(\"Error: %v\\n\", err)\n//     return\n// }\n// fmt.Printf(\"Balance: %.2f\\n\", balance)\n</code></pre> <p>Just remove <code>//</code> to activate!</p>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#option-2-write-your-own-code","title":"Option 2: Write your own code","text":"<p>Add your logic between the markers:</p> <pre><code>// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// YOUR CODE HERE\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\n// Your trading strategy here...\n\n// TODO: Your code here\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#available-commands","title":"Available commands","text":"<p>Run your code with:</p> <pre><code># From examples/demos directory\ngo run main.go 18\ngo run main.go usercode\ngo run main.go user\ngo run main.go sandbox\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#whats-already-configured","title":"What's already configured","text":"<p>\u2713 Connection - MT5 terminal connected via gRPC</p> <p>\u2713 Configuration - Loaded from <code>config/config.json</code> or environment variables</p> <p>\u2713 MT5Account - Low-level gRPC client (variable: <code>account</code>)</p> <p>\u2713 MT5Service - Mid-level wrapper (variable: <code>service</code>)</p> <p>\u2713 MT5Sugar - High-level Sugar API (variable: <code>sugar</code>)</p> <p>\u2713 Context - For timeouts and cancellation (variable: <code>ctx</code>)</p>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#can-i-mix-api-levels","title":"Can I mix API levels?","text":"<p>Yes! You can use all three levels in the same file:</p> <pre><code>// Low-level (direct gRPC protobuf)\nreq := &amp;pb.AccountSummaryRequest{}\nreply, err := account.AccountSummary(ctx, req)\n\n// Mid-level (MT5Service)\naccountInfo, err := service.GetAccountSummary(ctx)\n\n// High-level (MT5Sugar)\nbalance, err := sugar.GetBalance()\n</code></pre> <p>All three variables are available simultaneously:</p> <ul> <li><code>account</code> - for full control (gRPC protobuf)</li> <li><code>service</code> - for convenient methods (Service layer)</li> <li><code>sugar</code> - for simplest usage (Sugar API)</li> </ul>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#quick-reference","title":"Quick reference","text":""},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#get-account-information","title":"Get account information","text":"<pre><code>// Sugar API (easiest)\nbalance, err := sugar.GetBalance()\nfmt.Printf(\"Balance: %.2f\\n\", balance)\n\n// Service API (more details)\naccountInfo, err := service.GetAccountSummary(ctx)\nfmt.Printf(\"Balance: %.2f %s\\n\", accountInfo.Balance, accountInfo.Currency)\nfmt.Printf(\"Equity:  %.2f\\n\", accountInfo.Equity)\n\n// Account API (full control)\nreq := &amp;pb.AccountSummaryRequest{}\nreply, err := account.AccountSummary(ctx, req)\nfmt.Printf(\"Balance: %.2f\\n\", reply.AccountBalance)\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#get-current-price","title":"Get current price","text":"<pre><code>// Sugar API\nbid, _ := sugar.GetBid(\"EURUSD\")\nask, _ := sugar.GetAsk(\"EURUSD\")\nfmt.Printf(\"EURUSD: Bid=%.5f, Ask=%.5f\\n\", bid, ask)\n\n// Service API\ntick, err := service.GetSymbolTick(ctx, \"EURUSD\")\nfmt.Printf(\"EURUSD Bid: %.5f, Ask: %.5f\\n\", tick.Bid, tick.Ask)\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#open-market-order","title":"Open market order","text":"<pre><code>// Sugar API (easiest)\nticket, err := sugar.BuyMarket(\"EURUSD\", 0.01)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n} else {\n    fmt.Printf(\"Order opened: #%d\\n\", ticket)\n}\n\n// With SL/TP in pips\nticket, err := sugar.BuyMarketWithPips(\"EURUSD\", 0.01, 20, 30)\n\n// Calculate position size based on risk (2% with 50 pip SL)\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nticket, err := sugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#place-pending-order","title":"Place pending order","text":"<pre><code>// Buy Limit 20 pips below current Ask\nticket, err := sugar.BuyLimitPips(\"EURUSD\", 0.01, 20, 15, 30)\n\n// Buy Stop 20 pips above current Ask\nticket, err := sugar.BuyStopPips(\"EURUSD\", 0.01, 20, 15, 30)\n\n// Sell Limit with absolute price\nticket, err := sugar.SellLimit(\"EURUSD\", 0.01, 1.1050, 1.1070, 1.1030)\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#get-open-positions","title":"Get open positions","text":"<pre><code>// Sugar API\npositions, err := sugar.GetOpenPositions()\nfmt.Printf(\"Open positions: %d\\n\", len(positions))\nfor _, pos := range positions {\n    fmt.Printf(\"  #%d %s %.2f lot, Profit: %.2f\\n\",\n        pos.Ticket, pos.Symbol, pos.Volume, pos.Profit)\n}\n\n// Service API with filters\npositions, err := service.GetOpenedOrders(ctx, \"EURUSD\", \"\")\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#close-positions","title":"Close positions","text":"<pre><code>// Close specific position\nerr := sugar.ClosePosition(ticket)\n\n// Close all positions for symbol\nerr := sugar.CloseAllPositions(\"EURUSD\")\n\n// Close all positions (all symbols)\nerr := sugar.CloseAllPositions(\"\")\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#modify-position","title":"Modify position","text":"<pre><code>// Modify SL/TP\nerr := sugar.ModifyPosition(ticket, 1.0850, 1.0950)\n\n// Set trailing stop\nerr := sugar.SetTrailingStop(ticket, 20)  // 20 pips trailing\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#calculate-position-size","title":"Calculate position size","text":"<pre><code>// Calculate position size based on risk\nvolume, err := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 20)\nfmt.Printf(\"Volume for 2%% risk with 20 pip SL: %.2f lot\\n\", volume)\n\n// Then use calculated volume\nticket, err := sugar.BuyMarket(\"EURUSD\", volume)\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#return-codes-retcodes","title":"Return Codes (RetCodes)","text":"<p>Always check RetCode after trading operations!</p> <pre><code>result, err := service.BuyMarket(ctx, \"EURUSD\", 0.01, 0, 0, 0)\nif err != nil {\n    fmt.Printf(\"gRPC error: %v\\n\", err)\n    return\n}\n\n// Check RetCode\nif result.ReturnedCode == 10009 {  // Success for market orders\n    fmt.Printf(\"\u2705 Order opened: #%d\\n\", result.Order)\n} else if result.ReturnedCode == 10008 {  // Success for pending orders\n    fmt.Printf(\"\u2705 Pending order placed: #%d\\n\", result.Order)\n} else {\n    fmt.Printf(\"\u274c Order failed: %s (code %d)\\n\",\n        result.ReturnedCodeDescription, result.ReturnedCode)\n}\n</code></pre> <p>Common RetCodes:</p> <ul> <li><code>10009</code> - Market order executed successfully</li> <li><code>10008</code> - Pending order placed successfully</li> <li><code>10019</code> - Insufficient money (insufficient margin)</li> <li><code>10016</code> - Invalid stops (SL/TP too close to price)</li> <li><code>10018</code> - Market closed</li> </ul> <p>Full list: RETURN_CODES_REFERENCE.md</p>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#error-handling","title":"Error handling","text":"<p>GoMT5 has two types of errors you must check:</p>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#1-grpc-transport-errors","title":"1. gRPC transport errors","text":"<pre><code>result, err := service.BuyMarket(ctx, \"EURUSD\", 0.01, 0, 0, 0)\nif err != nil {\n    fmt.Printf(\"Connection or network error: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#2-trading-operation-errors-retcode","title":"2. Trading operation errors (RetCode)","text":"<pre><code>if result.ReturnedCode != 10009 {\n    fmt.Printf(\"Trade rejected: %s\\n\", result.ReturnedCodeDescription)\n}\n</code></pre> <p>Always check BOTH!</p>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#documentation","title":"Documentation","text":"<ul> <li>MT5Account Master Overview - Complete API reference (40+ methods)</li> <li>MT5Service API Overview - Mid-level wrapper (50+ methods)</li> <li>MT5Sugar API Overview - High-level Sugar API (62 methods)</li> <li>Protobuf Inspector Guide - Interactive type explorer</li> </ul>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#configuration","title":"Configuration","text":""},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#method-1-configjson-recommended","title":"Method 1: config.json (Recommended)","text":"<p>Create <code>examples/demos/config/config.json</code>:</p> <pre><code>{\n  \"user\": 591129415,\n  \"password\": \"YourPassword\",\n  \"host\": \"mt5.mrpc.pro\",\n  \"port\": 443,\n  \"grpc_server\": \"mt5.mrpc.pro:443\",\n  \"mt_cluster\": \"FxPro-MT5 Demo\",\n  \"test_symbol\": \"EURUSD\",\n  \"test_volume\": 0.01\n}\n</code></pre>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#method-2-environment-variables","title":"Method 2: Environment variables","text":"<pre><code># Linux/Mac\nexport MT5_USER=591129415\nexport MT5_PASSWORD=\"YourPassword\"\nexport MT5_HOST=\"mt5.mrpc.pro\"\nexport MT5_CLUSTER=\"FxPro-MT5 Demo\"\n\n# Windows PowerShell\n$env:MT5_USER=\"591129415\"\n$env:MT5_PASSWORD=\"YourPassword\"\n$env:MT5_HOST=\"mt5.mrpc.pro\"\n</code></pre> <p>See config.go for details.</p>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#tips","title":"Tips","text":"<ol> <li>Start simple - Uncomment one example at a time</li> <li> <p>Use Sugar API - Methods like <code>BuyMarketWithPips()</code> and <code>CalculatePositionSize()</code> are easier than low-level</p> </li> <li> <p>Check RetCode - Always validate trading operations (10009 = success)</p> </li> <li>Test on demo - Make sure you're using demo account first!</li> <li> <p>Read documentation - RETURN_CODES_REFERENCE.md explains all error codes</p> </li> <li> <p>Use context - The <code>ctx</code> variable is already configured with timeout</p> </li> <li>Explore types - Use <code>go run main.go inspect</code> to explore protobuf types</li> <li>Check examples - See <code>examples/demos/helpers/</code> for 17+ working examples</li> </ol>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#common-mistakes","title":"Common mistakes","text":"<p>\u274c Forgot to check err <pre><code>ticket, _ := sugar.BuyMarket(\"EURUSD\", 0.01)  // DON'T ignore errors!\n</code></pre></p> <p>\u2705 Always check errors <pre><code>ticket, err := sugar.BuyMarket(\"EURUSD\", 0.01)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n</code></pre></p> <p>\u274c Not checking RetCode <pre><code>result, _ := service.BuyMarket(ctx, \"EURUSD\", 0.01, 0, 0, 0)\n// Assuming it's success!\n</code></pre></p> <p>\u2705 Check RetCode for trading operations <pre><code>result, err := service.BuyMarket(ctx, \"EURUSD\", 0.01, 0, 0, 0)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\nif result.ReturnedCode != 10009 {\n    fmt.Printf(\"Trade failed: %s\\n\", result.ReturnedCodeDescription)\n    return\n}\n</code></pre></p>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#getting-help","title":"Getting help","text":"<ul> <li>Protobuf types: Run <code>go run main.go inspect</code> to explore API types</li> <li>Error codes: See RETURN_CODES_REFERENCE.md</li> <li>Examples: Check <code>examples/demos/helpers/</code> for working code</li> <li>API documentation: See docs folder for complete reference</li> </ul>"},{"location":"All_Guides/USERCODE_SANDBOX_GUIDE/#example-complete-trading-strategy","title":"Example: Complete trading strategy","text":"<p>Here's a complete example demonstrating proper error handling:</p> <pre><code>func UserCodeMain() error {\n    // Setup\n    ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)\n    defer cancel()\n\n    cfg, err := config.LoadConfig()\n    if err != nil {\n        return fmt.Errorf(\"config error: %w\", err)\n    }\n\n    account, err := mt5.NewMT5Account(ctx, cfg.GrpcServer)\n    if err != nil {\n        return fmt.Errorf(\"connection error: %w\", err)\n    }\n\n    err = account.ConnectEx(ctx, &amp;pb.ConnectExRequest{\n        Uuid:      cfg.User,\n        Password:  cfg.Password,\n        MtCluster: cfg.Cluster,\n    })\n    if err != nil {\n        return fmt.Errorf(\"login error: %w\", err)\n    }\n\n    service := mt5service.NewMT5Service(account)\n    sugar := mt5sugar.NewMT5Sugar(service)\n\n    // Get account information\n    balance, err := sugar.GetBalance()\n    if err != nil {\n        return fmt.Errorf(\"balance error: %w\", err)\n    }\n    fmt.Printf(\"Balance: %.2f\\n\", balance)\n\n    // Calculate position size based on risk (1% with 50 pip SL)\n    volume, err := sugar.CalculatePositionSize(\"EURUSD\", 1.0, 50)\n    if err != nil {\n        return fmt.Errorf(\"position size error: %w\", err)\n    }\n\n    // Open position with calculated volume\n    ticket, err := sugar.BuyMarketWithPips(\"EURUSD\", volume, 50, 100)\n    if err != nil {\n        return fmt.Errorf(\"order error: %w\", err)\n    }\n\n    fmt.Printf(\"\u2705 Position opened: #%d with %.2f lot\\n\", ticket, volume)\n\n    return nil\n}\n</code></pre> <p>Happy trading! \ud83d\ude80</p>"},{"location":"All_Guides/Your_First_Project/","title":"Your First Project in 10 Minutes","text":"<p>Practice Before Theory - create a working MT5 trading project before diving into documentation</p>"},{"location":"All_Guides/Your_First_Project/#why-this-guide","title":"Why This Guide?","text":"<p>I want to show you through a simple example how easy it is to use our gRPC gateway for working with MetaTrader 5.</p> <p>Before you dive into learning the basics and project fundamentals - let's create your first project.</p> <p>We'll download one Go module <code>package</code>, which contains:</p> <ul> <li>\u2705 Protobuf definitions of all MT5 methods</li> <li>\u2705 MT5Account - ready-to-use gRPC client</li> <li>\u2705 Error handler - ApiError types and return codes</li> <li>\u2705 Everything necessary to get started</li> </ul> <p>This is the foundation for your future algorithmic trading system.</p> <p>\ud83d\udca1 After you get your first results, proceed to GETTING_STARTED.md for a deep understanding of the SDK architecture.</p>"},{"location":"All_Guides/Your_First_Project/#step-1-install-go-121-or-higher","title":"Step 1: Install Go 1.21 or Higher","text":"<p>If you don't have Go installed yet:</p> <p>Download and install:</p> <ul> <li>Go Download</li> </ul> <p>Verify installation:</p> <pre><code>go version\n# Should show: go version go1.21.x or higher\n</code></pre>"},{"location":"All_Guides/Your_First_Project/#step-2-create-a-new-go-project","title":"Step 2: Create a New Go Project","text":"<p>Open terminal (command line) and execute:</p> <pre><code># Create project folder\nmkdir MyMT5Project\ncd MyMT5Project\n\n# Initialize Go module\ngo mod init mymt5project\n</code></pre> <p>What happened:</p> <ul> <li>\u2705 Created <code>MyMT5Project</code> folder</li> <li>\u2705 Created <code>go.mod</code> file inside - your project manifest</li> <li>\u2705 Now you can add dependencies</li> </ul>"},{"location":"All_Guides/Your_First_Project/#step-3-install-the-gomt5-package-module","title":"Step 3: Install the GoMT5 package Module","text":"<p>This is the most important step - installing the single module that contains everything you need:</p> <pre><code>go get github.com/MetaRPC/GoMT5/package\n</code></pre> <p>\ud83d\udccc Important for beginners: After running the command, you will NOT see new folders in your project. This is normal! Go modules are installed in the system cache (<code>C:\\Users\\&lt;username&gt;\\go\\pkg\\mod</code>), not copied to the project.</p> <p>How to verify the installation was successful?</p> <p>Method 1: Open the <code>go.mod</code> file and make sure a line with the package appeared:</p> <pre><code>github.com/MetaRPC/GoMT5/package v0.0.0-XXXXXXXXXXXXXXXX-XXXXXXXXXXXX\n</code></pre> <p>(Version may differ - this is normal)</p> <p>Method 2: Run the verification command:</p> <pre><code>go list -m github.com/MetaRPC/GoMT5/package\n</code></pre> <p>If you see the package version - everything is installed correctly! \u2705</p>"},{"location":"All_Guides/Your_First_Project/#step-4-create-configjson-configuration-file","title":"Step 4: Create config.json Configuration File","text":"<p>Create a <code>config.json</code> file in the project root:</p> <pre><code>{\n  \"user\": 591129415,\n  \"password\": \"YourPassword123\",\n  \"host\": \"mt5.mrpc.pro\",\n  \"port\": 443,\n  \"grpc_server\": \"mt5.mrpc.pro:443\",\n  \"mt_cluster\": \"YourBroker-MT5 Demo\",\n  \"test_symbol\": \"EURUSD\",\n  \"test_volume\": 0.01\n}\n</code></pre> <p>Parameter explanations:</p> Parameter Description Where to Get user Your MT5 account number (login) In MT5 terminal: Tools \u2192 Options \u2192 Login password Master password for MT5 account The one you received during registration host gRPC gateway host <code>mt5.mrpc.pro</code> (public gateway) port gRPC gateway port <code>443</code> (standard HTTPS port) grpc_server Full gRPC gateway address <code>mt5.mrpc.pro:443</code> (host:port) mt_cluster Your broker's cluster name In MT5 terminal: see server name test_symbol Trading symbol for examples <code>EURUSD</code>, <code>GBPUSD</code>, <code>BTCUSD</code>, etc. test_volume Volume for test orders <code>0.01</code> (minimum lot) <p>Replace:</p> <ul> <li><code>user</code>, <code>password</code>, <code>mt_cluster</code> - with your MT5 demo account data</li> <li><code>grpc_server</code>, <code>host</code>, <code>port</code> - can be left as is (MetaRPC public gateway)</li> </ul>"},{"location":"All_Guides/Your_First_Project/#step-5-create-configuration-structure","title":"Step 5: Create Configuration Structure","text":"<p>Create a <code>config.go</code> file in the project root:</p> <pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"os\"\n)\n\n// Config contains MT5 connection settings\ntype Config struct {\n    User       uint64  `json:\"user\"`\n    Password   string  `json:\"password\"`\n    Host       string  `json:\"host\"`\n    Port       int     `json:\"port\"`\n    GrpcServer string  `json:\"grpc_server\"`\n    MtCluster  string  `json:\"mt_cluster\"`\n    TestSymbol string  `json:\"test_symbol\"`\n    TestVolume float64 `json:\"test_volume\"`\n}\n\n// LoadConfig loads configuration from JSON file\nfunc LoadConfig() (*Config, error) {\n    file, err := os.Open(\"config.json\")\n    if err != nil {\n        return nil, err\n    }\n    defer file.Close()\n\n    var config Config\n    decoder := json.NewDecoder(file)\n    if err := decoder.Decode(&amp;config); err != nil {\n        return nil, err\n    }\n\n    return &amp;config, nil\n}\n</code></pre>"},{"location":"All_Guides/Your_First_Project/#step-6-write-code-to-connect-and-get-account-information","title":"Step 6: Write Code to Connect and Get Account Information","text":"<p>Create a <code>main.go</code> file in the project root:</p> <pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"log\"\n\n    mt5 \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    pb \"github.com/MetaRPC/GoMT5/package\"\n)\n\nfunc main() {\n\n    // ============================================================================\n    // STEP 1: LOAD CONFIGURATION\n    // ============================================================================\n\n    config, err := LoadConfig()\n    if err != nil {\n        log.Fatalf(\"\u274c Error loading config.json: %v\", err)\n    }\n\n    fmt.Println(\"\ud83d\udccb Connection configuration:\")\n    fmt.Printf(\"   User: %d\\n\", config.User)\n    fmt.Printf(\"   Cluster: %s\\n\", config.MtCluster)\n    fmt.Printf(\"   gRPC Server: %s\\n\", config.GrpcServer)\n    fmt.Printf(\"   Symbol: %s\\n\\n\", config.TestSymbol)\n\n    // ============================================================================\n    // STEP 2: CREATE MT5ACCOUNT\n    // ============================================================================\n\n    fmt.Println(\"\ud83d\udd0c Creating MT5Account...\")\n\n    // Create MT5Account with auto-generated UUID\n    account, err := mt5.NewMT5AccountAuto(\n        config.User,\n        config.Password,\n        config.GrpcServer,\n    )\n    if err != nil {\n        log.Fatalf(\"\u274c Error creating MT5Account: %v\", err)\n    }\n    defer account.Close()\n\n    fmt.Printf(\"\u2705 MT5Account created (UUID: %s)\\n\\n\", account.Id.String())\n\n    // ============================================================================\n    // STEP 3: CONNECT TO MT5\n    // ============================================================================\n\n    fmt.Println(\"\ud83d\udd17 Connecting to MT5 terminal...\")\n\n    ctx := context.Background()\n\n    // Prepare connection request\n    connectReq := &amp;pb.ConnectExRequest{\n        User:          config.User,\n        Password:      config.Password,\n        MtClusterName: config.MtCluster,\n    }\n\n    // Execute connection\n    connectData, err := account.ConnectEx(ctx, connectReq)\n    if err != nil {\n        log.Fatalf(\"\u274c Connection error: %v\", err)\n    }\n\n    fmt.Printf(\"\u2705 Connected successfully!\\n\")\n    fmt.Printf(\"   Instance ID: %s\\n\\n\", connectData.TerminalInstanceGuid)\n\n    // ============================================================================\n    // STEP 4: GET ACCOUNT INFORMATION\n    // ============================================================================\n\n    // Create account information request\n    accountReq := &amp;pb.AccountSummaryRequest{}\n\n    // Execute request\n    accountData, err := account.AccountSummary(ctx, accountReq)\n    if err != nil {\n        log.Fatalf(\"\u274c Error getting account data: %v\", err)\n    }\n\n    // ============================================================================\n    // STEP 5: OUTPUT RESULTS\n    // ============================================================================\n\n    fmt.Println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551              ACCOUNT INFORMATION                       \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Println()\n    fmt.Printf(\"   Login:              %d\\n\", accountData.AccountLogin)\n    fmt.Printf(\"   Username:           %s\\n\", accountData.AccountUserName)\n    fmt.Printf(\"   Company:            %s\\n\", accountData.AccountCompanyName)\n    fmt.Printf(\"   Currency:           %s\\n\", accountData.AccountCurrency)\n    fmt.Println()\n    fmt.Printf(\"\ud83d\udcb0 Balance:            %.2f %s\\n\", accountData.AccountBalance, accountData.AccountCurrency)\n    fmt.Printf(\"\ud83d\udc8e Equity:             %.2f %s\\n\", accountData.AccountEquity, accountData.AccountCurrency)\n    fmt.Println()\n    fmt.Printf(\"   Credit:             %.2f %s\\n\", accountData.AccountCredit, accountData.AccountCurrency)\n    fmt.Printf(\"   Leverage:           1:%d\\n\", accountData.AccountLeverage)\n    fmt.Println()\n\n    if accountData.ServerTime != nil {\n        serverTime := accountData.ServerTime.AsTime()\n        fmt.Printf(\"   Server time:        %s\\n\", serverTime.Format(\"2006-01-02 15:04:05\"))\n        fmt.Printf(\"   UTC timezone:       %+d minutes\\n\", accountData.UtcTimezoneServerTimeShiftMinutes)\n    }\n\n    fmt.Println()\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // ============================================================================\n    // STEP 6: DISCONNECT FROM MT5\n    // ============================================================================\n\n    fmt.Println(\"\\n\ud83d\udd0c Disconnecting from MT5...\")\n\n    disconnectReq := &amp;pb.DisconnectRequest{}\n    _, err = account.Disconnect(ctx, disconnectReq)\n    if err != nil {\n        log.Printf(\"\u26a0\ufe0f  Warning on disconnect: %v\", err)\n    } else {\n        fmt.Println(\"\u2705 Disconnected successfully!\")\n    }\n\n    fmt.Println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551   \ud83c\udf89 CONGRATULATIONS! YOUR FIRST PROJECT WORKS! \ud83c\udf89    \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\\n\")\n}\n</code></pre>"},{"location":"All_Guides/Your_First_Project/#step-7-run-the-project","title":"Step 7: Run the Project","text":"<p>Save all files and execute:</p> <pre><code>go mod tidy\ngo run .\n</code></pre> <p>What does <code>go mod tidy</code> do?</p> <p>This command automatically:</p> <ul> <li>\u2705 Downloads all missing dependencies (gRPC, protobuf, UUID)</li> <li>\u2705 Removes unused dependencies from <code>go.mod</code></li> <li>\u2705 Updates <code>go.sum</code> file with checksums</li> </ul> <p>Now, when all code files are created, <code>go mod tidy</code> will see the real imports and pull in the necessary dependencies.</p> <p>Expected result:</p> <pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551         GoMT5 - Your First Project with MT5            \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\n\ud83d\udccb Connection configuration:\n   User: 591129415\n   Cluster: FxPro-MT5 Demo\n   gRPC Server: mt5.mrpc.pro:443\n   Symbol: EURUSD\n\n\ud83d\udd0c Creating MT5Account...\n\u2705 MT5Account created (UUID: 12345678-90ab-cdef-1234-567890abcdef)\n\n\ud83d\udd17 Connecting to MT5 terminal...\n\u2705 Connected successfully!\n   Instance ID: 98765432-10ab-cdef-5678-901234567890\n\n\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551              ACCOUNT INFORMATION                       \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\n   Login:              591129415\n   Username:           Demo User\n   Company:            FxPro Financial Services Ltd\n   Currency:           USD\n\n\ud83d\udcb0 Balance:            10000.00 USD\n\ud83d\udc8e Equity:             10000.00 USD\n\n   Credit:             0.00 USD\n   Leverage:           1:100\n\n   Server time:        2025-01-22 15:30:45\n   UTC timezone:       +120 minutes\n\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\n\ud83d\udd0c Disconnecting from MT5...\n\u2705 Disconnected successfully!\n\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551   \ud83c\udf89 CONGRATULATIONS! YOUR FIRST PROJECT WORKS! \ud83c\udf89     \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>"},{"location":"All_Guides/Your_First_Project/#congratulations-you-did-it","title":"\ud83c\udf89 Congratulations! You Did It!","text":"<p>You just:</p> <p>\u2705 Created a new Go project from scratch</p> <p>\u2705 Integrated the single Go module <code>package</code> for working with MT5</p> <p>\u2705 Configured connection settings</p> <p>\u2705 Connected to MT5 terminal via gRPC</p> <p>\u2705 Got complete account information programmatically</p> <p>This was a low-level approach using <code>MT5Account</code> and protobuf directly.</p>"},{"location":"All_Guides/Your_First_Project/#your-project-structure","title":"\ud83d\udcc1 Your Project Structure","text":"<p>After completing all steps, your project structure should look like this:</p> <pre><code>MyMT5Project/\n\u251c\u2500\u2500 config.json          # MT5 connection configuration\n\u251c\u2500\u2500 config.go            # Load configuration from JSON\n\u251c\u2500\u2500 main.go              # Main application code\n\u251c\u2500\u2500 go.mod               # Go module with dependencies\n\u2514\u2500\u2500 go.sum               # Dependency checksums\n</code></pre> <p>Contents of go.mod:</p> <pre><code>module mymt5project\n\ngo 1.21\n\nrequire (\n    github.com/MetaRPC/GoMT5/package v0.0.0-20260120212705-d4be7827736c // indirect\n    github.com/google/uuid v1.6.0 // indirect\n    // ... other automatically installed dependencies (grpc, protobuf, etc.)\n)\n</code></pre>"},{"location":"All_Guides/Your_First_Project/#whats-next","title":"\ud83d\ude80 What's Next?","text":"<p>Now that you have a working project, you can:</p>"},{"location":"All_Guides/Your_First_Project/#1-add-more-functionality","title":"1. Add More Functionality","text":"<p>Examples of what you can do:</p>"},{"location":"All_Guides/Your_First_Project/#get-current-quotes","title":"Get Current Quotes","text":"<pre><code>tickReq := &amp;pb.SymbolInfoTickRequest{\n    Symbol: config.TestSymbol,\n}\n\ntick, err := account.SymbolInfoTick(ctx, tickReq)\nif err == nil {\n    fmt.Printf(\"Bid: %.5f, Ask: %.5f\\n\", tick.Bid, tick.Ask)\n}\n</code></pre>"},{"location":"All_Guides/Your_First_Project/#get-all-open-positions","title":"Get All Open Positions","text":"<pre><code>ordersReq := &amp;pb.OpenedOrdersRequest{\n    // InputSortMode is optional (default 0 - sort by open time)\n}\n\nordersData, err := account.OpenedOrders(ctx, ordersReq)\nif err == nil {\n    fmt.Printf(\"Open positions: %d\\n\", len(ordersData.PositionInfos))\n    for _, pos := range ordersData.PositionInfos {\n        fmt.Printf(\"  #%d %s %.2f lots, Profit: %.2f\\n\",\n            pos.Ticket, pos.Symbol, pos.Volume, pos.Profit)\n    }\n}\n</code></pre> <p>Optional: If you need sorting, use <code>InputSortMode</code>: <pre><code>ordersReq := &amp;pb.OpenedOrdersRequest{\n    InputSortMode: 0, // 0 = by time (ASC), 1 = by time (DESC), 2 = by ticket (ASC), 3 = by ticket (DESC)\n}\n</code></pre></p>"},{"location":"All_Guides/Your_First_Project/#open-a-market-order","title":"Open a Market Order","text":"<pre><code>comment := \"GoMT5 Test Order\"\norderReq := &amp;pb.OrderSendRequest{\n    Symbol:    config.TestSymbol,\n    Operation: pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY,\n    Volume:    0.01, // 0.01 lot\n    Comment:   &amp;comment,\n}\n\norderData, err := account.OrderSend(ctx, orderReq)\nif err == nil {\n    fmt.Printf(\"Order opened: Deal #%d, Order #%d\\n\", orderData.Deal, orderData.Order)\n}\n</code></pre>"},{"location":"All_Guides/Your_First_Project/#streaming-data","title":"Streaming Data","text":"<pre><code>// Subscribe to real-time ticks (with limit: 5 seconds or 10 events)\ntickReq := &amp;pb.OnSymbolTickRequest{\n    SymbolNames: []string{config.TestSymbol},\n}\n\ndataChan, errChan := account.OnSymbolTick(ctx, tickReq)\n\n// Create context with 5-second timeout\nstreamCtx, cancel := context.WithTimeout(ctx, 5*time.Second)\ndefer cancel()\n\neventCount := 0\nmaxEvents := 10\n\nfmt.Println(\"\ud83d\udd04 Receiving tick stream (maximum 5 seconds or 10 events)...\")\n\nfor {\n    select {\n    case data := &lt;-dataChan:\n        tick := data.SymbolTick\n        eventCount++\n        fmt.Printf(\"[%d] %s - Bid: %.5f, Ask: %.5f\\n\",\n            eventCount, time.Now().Format(\"15:04:05\"), tick.Bid, tick.Ask)\n\n        if eventCount &gt;= maxEvents {\n            fmt.Println(\"\u2705 Received maximum number of events\")\n            return\n        }\n    case err := &lt;-errChan:\n        log.Printf(\"\u274c Stream error: %v\", err)\n        return\n    case &lt;-streamCtx.Done():\n        fmt.Printf(\"\u2705 Received %d events in 5 seconds\\n\", eventCount)\n        return\n    }\n}\n</code></pre>"},{"location":"All_Guides/Your_First_Project/#2-learn-the-complete-sdk-architecture","title":"2. Learn the Complete SDK Architecture","text":"<p>The GoMT5 repository has three API layers:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502  MT5Sugar (Layer 3) - Convenient API       \n\u2502  examples/mt5/MT5Sugar.go                   \n\u2502  sugar.BuyMarket(\"EURUSD\", 0.01)            \n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n              \u2193 uses\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502  MT5Service (Layer 2) - Wrappers            \n\u2502  examples/mt5/MT5Service.go                 \n\u2502  service.GetBalance()                       \n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n              \u2193 uses\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502  MT5Account (Layer 1) - Base gRPC \u2b50        \n\u2502  package/Helpers/MT5Account.go              \n\u2502  account.AccountSummary(ctx, req)          \n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n</code></pre> <p>You just used Layer 1 (MT5Account) - this is the foundation of everything!</p> <p>To use layers 2 and 3:</p> <ul> <li>Clone the GoMT5 repository</li> <li>Study GETTING_STARTED.md</li> <li>Look at examples in <code>examples/demos/</code></li> </ul>"},{"location":"All_Guides/Your_First_Project/#3-study-ready-made-examples","title":"3. Study Ready-Made Examples","text":"<p>The GoMT5 repository has many examples:</p> <ul> <li><code>examples/demos/lowlevel/</code> - examples with MT5Account (what you used)</li> <li><code>examples/demos/service/</code> - examples with MT5Service</li> <li><code>examples/demos/sugar/</code> - examples with MT5Sugar</li> </ul>"},{"location":"All_Guides/Your_First_Project/#4-read-documentation","title":"4. Read Documentation","text":"<ul> <li>MT5Account API Reference - \u2b50 complete reference for the base level</li> <li>PROJECT_MAP.md - project map and architecture</li> <li>GRPC_STREAM_MANAGEMENT.md - working with streaming data</li> <li>RETURN_CODES_REFERENCE.md - operation return codes</li> </ul>"},{"location":"All_Guides/Your_First_Project/#what-is-the-package-module","title":"What is the <code>package</code> Module?","text":"<p><code>package</code> is an independent Go module that contains:</p> <ul> <li>MT5Account (base gRPC client)</li> <li>All protobuf definitions of MT5 API</li> <li>gRPC stubs for all methods</li> <li>Helper types and structures</li> </ul> <p>This is a portable module - you can use it in any Go project!</p>"},{"location":"All_Guides/Your_First_Project/#how-to-work-with-environment-variables-instead-of-configjson","title":"How to Work with Environment Variables Instead of config.json?","text":"<p>You can use environment variables:</p> <pre><code>import (\n    \"os\"\n    \"strconv\"\n)\n\nfunc LoadConfigFromEnv() (*Config, error) {\n    userStr := os.Getenv(\"MT5_USER\")\n    user, err := strconv.ParseUint(userStr, 10, 64)\n    if err != nil {\n        return nil, err\n    }\n\n    portStr := os.Getenv(\"MT5_PORT\")\n    port, err := strconv.Atoi(portStr)\n    if err != nil {\n        port = 443 // default value\n    }\n\n    volumeStr := os.Getenv(\"MT5_TEST_VOLUME\")\n    volume, err := strconv.ParseFloat(volumeStr, 64)\n    if err != nil {\n        volume = 0.01 // default value\n    }\n\n    return &amp;Config{\n        User:       user,\n        Password:   os.Getenv(\"MT5_PASSWORD\"),\n        Host:       os.Getenv(\"MT5_HOST\"),\n        Port:       port,\n        GrpcServer: os.Getenv(\"MT5_GRPC_SERVER\"),\n        MtCluster:  os.Getenv(\"MT5_CLUSTER\"),\n        TestSymbol: os.Getenv(\"MT5_TEST_SYMBOL\"),\n        TestVolume: volume,\n    }, nil\n}\n</code></pre> <p>Set variables:</p> <pre><code># Windows (PowerShell)\n$env:MT5_USER=\"591129415\"\n$env:MT5_PASSWORD=\"YourPassword123\"\n$env:MT5_HOST=\"mt5.mrpc.pro\"\n$env:MT5_PORT=\"443\"\n$env:MT5_GRPC_SERVER=\"mt5.mrpc.pro:443\"\n$env:MT5_CLUSTER=\"FxPro-MT5 Demo\"\n$env:MT5_TEST_SYMBOL=\"EURUSD\"\n$env:MT5_TEST_VOLUME=\"0.01\"\n</code></pre>"},{"location":"All_Guides/Your_First_Project/#how-to-use-layer-2-mt5service-and-layer-3-mt5sugar","title":"How to Use Layer 2 (MT5Service) and Layer 3 (MT5Sugar)?","text":"<p>These layers are in the main GoMT5 repository:</p> <ol> <li>Clone the repository:</li> </ol> <pre><code>git clone https://github.com/MetaRPC/GoMT5.git\n</code></pre> <ol> <li> <p>Copy needed files to your project:</p> </li> <li> <p><code>examples/mt5/MT5Service.go</code> (Layer 2)</p> </li> <li> <p><code>examples/mt5/MT5Sugar.go</code> (Layer 3)</p> </li> <li> <p>Use convenient methods:</p> </li> </ol> <pre><code>// Layer 2 - Service\nservice := mt5.NewMT5Service(account)\nbalance, _ := service.GetBalance()\n\n// Layer 3 - Sugar\nsugar := mt5.NewMT5Sugar(service)\nticket, _ := sugar.BuyMarket(\"EURUSD\", 0.01)\n</code></pre> <p>See details in GETTING_STARTED.md</p>"},{"location":"All_Guides/Your_First_Project/#summary-what-we-did","title":"\ud83d\udcdd Summary: What We Did","text":"<p>In this guide, you created a minimalist project that:</p> <ol> <li> <p>\u2705 Uses only Go modules - doesn't require cloning the repository</p> </li> <li> <p>\u2705 Imports the package module - the only dependency for MT5</p> </li> <li> <p>\u2705 Connects to MT5 via gRPC gateway</p> </li> <li> <p>\u2705 Reads configuration from <code>config.json</code></p> </li> <li> <p>\u2705 Uses MT5Account (Layer 1 - base level)</p> </li> <li> <p>\u2705 Gets account information and outputs to console</p> </li> </ol> <p>This is the foundation for any of your MT5 projects in Go.</p> <p>Good luck developing trading systems! \ud83d\ude80</p> <p>\"Trade safely, code cleanly, and may your gRPC connections always be stable.\"</p>"},{"location":"MT5Account/MT5Account.Master.Overview/","title":"MT5Account - Master Overview","text":"<p>One page to orient fast: what lives where, how to choose the right API, and jump links to every overview and method spec in this docs set.</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#start-here-section-overviews","title":"\ud83d\udea6 Start here - Section Overviews","text":"<ul> <li> <p>Account_Information - Overview   Account balance/equity/margin/leverage, complete snapshot or single properties.</p> </li> <li> <p>Symbol_Information - Overview   Quotes, symbol properties, trading rules, Market Watch management.</p> </li> <li> <p>Position_Orders_Information - Overview   Open positions, pending orders, historical deals, order history.</p> </li> <li> <p>Trading_Operations - Overview   Order execution, position management, margin calculations, trade validation.</p> </li> <li> <p>Market_Depth_DOM - Overview   Level II quotes, order book data, market depth subscription.</p> </li> <li> <p>Additional_Methods - Overview   Advanced symbol info, trading sessions, margin rates, batch operations.</p> </li> <li> <p>Streaming_Methods - Overview   Real-time streams: ticks, trades, profit updates, transaction log.</p> </li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#how-to-pick-an-api","title":"\ud83e\udded How to pick an API","text":"If you need\u2026 Go to\u2026 Typical calls Account snapshot Account_Information <code>AccountSummary</code>, <code>AccountInfoDouble</code>, <code>AccountInfoInteger</code> Quotes &amp; symbol properties Symbol_Information <code>SymbolInfoTick</code>, <code>SymbolInfoDouble</code>, <code>SymbolsTotal</code> Current positions &amp; orders Position_Orders_Information <code>PositionsTotal</code>, <code>OpenedOrders</code>, <code>OpenedOrdersTickets</code> Historical trades Position_Orders_Information <code>OrderHistory</code>, <code>PositionsHistory</code> Level II / Order book Market_Depth_DOM <code>MarketBookAdd</code>, <code>MarketBookGet</code>, <code>MarketBookRelease</code> Trading operations Trading_Operations <code>OrderSend</code>, <code>OrderModify</code>, <code>OrderClose</code> Pre-trade calculations Trading_Operations <code>OrderCalcMargin</code>, <code>OrderCheck</code> Advanced symbol data Additional_Methods <code>SymbolParamsMany</code>, <code>SymbolInfoSessionTrade</code> Real-time updates Streaming_Methods <code>OnSymbolTick</code>, <code>OnTrade</code>, <code>OnPositionProfit</code>"},{"location":"MT5Account/MT5Account.Master.Overview/#usage-pattern-grpc-protocol","title":"\ud83d\udd0c Usage pattern (gRPC protocol)","text":"<p>Every method follows gRPC client-server pattern:</p> <pre><code>// Create client connection\nconn, err := grpc.Dial(\"localhost:8002\", grpc.WithInsecure())\nif err != nil {\n    log.Fatal(err)\n}\ndefer conn.Close()\n\n// Create MT5Account client\nclient := pb.NewAccountHelperClient(conn)\n\n// Make request with context\nctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\ndefer cancel()\n\n// Call method\nresult, err := client.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\n// Use result\nfmt.Printf(\"Balance: $%.2f\\n\", result.AccountBalance)\n</code></pre> <p>Every method follows the same shape:</p> <ul> <li>Proto Service/Method: <code>Service.Method(Request) \u2192 Reply</code></li> <li>Go client: <code>client.Method(ctx, &amp;Request{...})</code></li> <li>Reply structure: Contains either <code>Data</code> payload or <code>Error</code></li> <li>Return codes: Trading operations return status codes (10009 = success)</li> </ul> <p>Timestamps: Use <code>google.protobuf.Timestamp</code> (convert with <code>timestamppb.New(time)</code> and <code>.AsTime()</code>).</p> <p>Streaming methods: Return <code>stream</code> object, use <code>stream.Recv()</code> in loop to receive updates.</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#full-index-all-method-specs","title":"\ud83d\udcda Full Index \u00b7 All Method Specs","text":""},{"location":"MT5Account/MT5Account.Master.Overview/#account-information","title":"\ud83d\udcc4 Account Information","text":"<ul> <li>Overview: Account_Information.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#complete-snapshot","title":"Complete Snapshot","text":"<ul> <li>AccountSummary.md - All account info at once (balance, equity, margin, etc.)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#individual-properties","title":"Individual Properties","text":"<ul> <li>AccountInfoDouble.md - Single double value (balance, equity, margin, profit, etc.)</li> <li>AccountInfoInteger.md - Single integer value (login, leverage, limit orders, etc.)</li> <li>AccountInfoString.md - Single string value (name, server, currency, company)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#symbol-information","title":"\ud83d\udcca Symbol Information","text":"<ul> <li>Overview: Symbol_Information.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#current-quotes","title":"Current Quotes","text":"<ul> <li>SymbolInfoTick.md - Current quote for symbol (bid, ask, last, volume, time)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#symbol-inventory-management","title":"Symbol Inventory &amp; Management","text":"<ul> <li>SymbolsTotal.md - Count of available symbols</li> <li>SymbolName.md - Get symbol name by index</li> <li>SymbolSelect.md - Enable/disable symbol in Market Watch</li> <li>SymbolExist.md - Check if symbol exists</li> <li>SymbolIsSynchronized.md - Check symbol data sync status</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#symbol-properties","title":"Symbol Properties","text":"<ul> <li>SymbolInfoDouble.md - Single double property (bid, ask, point, volume min/max, etc.)</li> <li>SymbolInfoInteger.md - Single integer property (digits, spread, stops level, etc.)</li> <li>SymbolInfoString.md - Single string property (description, currency, path)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#positions-orders","title":"\ud83d\udce6 Positions &amp; Orders","text":"<ul> <li>Overview: Position_Orders_Information.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#current-state","title":"Current State","text":"<ul> <li>PositionsTotal.md - Count of open positions</li> <li>OpenedOrders.md - Full details of all open positions and pending orders</li> <li>OpenedOrdersTickets.md - Ticket numbers only (lightweight)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#historical-data","title":"Historical Data","text":"<ul> <li>OrderHistory.md - Historical orders within time range (with pagination)</li> <li>PositionsHistory.md - Closed positions within time range (with pagination)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#trading-actions","title":"\ud83d\udee0 Trading Actions","text":"<ul> <li>Overview: Trading_Operations.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#order-execution-management","title":"Order Execution &amp; Management","text":"<ul> <li>OrderSend.md - Place market or pending orders</li> <li>OrderModify.md - Modify SL/TP or order parameters</li> <li>OrderClose.md - Close positions (full or partial)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#pre-trade-calculations","title":"Pre-Trade Calculations","text":"<ul> <li>OrderCalcMargin.md - Calculate margin required for trade</li> <li>OrderCalcProfit.md - Calculate potential profit</li> <li>OrderCheck.md - Validate trade request before execution</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#market-depth-dom","title":"\ud83d\udcc8 Market Depth (DOM)","text":"<ul> <li>Overview: Market_Depth.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#level-ii-quotes","title":"Level II Quotes","text":"<ul> <li>MarketBookAdd.md - Subscribe to Market Depth for symbol</li> <li>MarketBookGet.md - Get current order book data</li> <li>MarketBookRelease.md - Unsubscribe from Market Depth</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#additional-methods","title":"\ud83d\udd27 Additional Methods","text":"<ul> <li>Overview: Additional_Methods.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#advanced-symbol-information","title":"Advanced Symbol Information","text":"<ul> <li>SymbolInfoMarginRate.md - Margin rates for symbol and order type</li> <li>SymbolInfoSessionQuote.md - Quote session times</li> <li>SymbolInfoSessionTrade.md - Trade session times</li> <li>SymbolParamsMany.md - Detailed parameters for multiple symbols (112 fields!)</li> <li>TickValueWithSize.md - Tick value and size information for symbols</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#subscriptions-streaming","title":"\ud83d\udce1 Subscriptions (Streaming)","text":"<ul> <li>Overview: Streaming_Methods.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#real-time-price-updates","title":"Real-Time Price Updates","text":"<ul> <li>OnSymbolTick.md - Real-time tick stream for symbols</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#trading-events","title":"Trading Events","text":"<ul> <li>OnTrade.md - Position/order changes (opened, closed, modified)</li> <li>OnTradeTransaction.md - Detailed transaction log (complete audit trail)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#position-monitoring","title":"Position Monitoring","text":"<ul> <li>OnPositionProfit.md - Periodic profit/loss updates</li> <li>OnPositionsAndPendingOrdersTickets.md - Periodic ticket lists (lightweight)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#quick-navigation-by-use-case","title":"\ud83c\udfaf Quick Navigation by Use Case","text":"I want to... Use this method ACCOUNT INFORMATION Get complete account snapshot AccountSummary Get account balance AccountInfoDouble (BALANCE) Get account equity AccountInfoDouble (EQUITY) Get account leverage AccountInfoInteger (LEVERAGE) Get account currency AccountInfoString (CURRENCY) SYMBOL INFORMATION Get current price for symbol SymbolInfoTick List all available symbols SymbolsTotal + SymbolName Add symbol to Market Watch SymbolSelect (true) Get symbol digits (decimal places) SymbolInfoInteger (DIGITS) Get point size for symbol SymbolInfoDouble (POINT) Get complete symbol data (batch) SymbolParamsMany Get tick value for P&amp;L calculations TickValueWithSize POSITIONS &amp; ORDERS Count open positions PositionsTotal Get all open positions (full details) OpenedOrders Get position ticket numbers only OpenedOrdersTickets Get historical orders OrderHistory Get historical deals/trades PositionsHistory MARKET DEPTH Subscribe to Level II quotes MarketBookAdd Get order book data MarketBookGet Unsubscribe from Level II MarketBookRelease TRADING OPERATIONS Open market BUY position OrderSend (type=BUY) Open market SELL position OrderSend (type=SELL) Place BUY LIMIT order OrderSend (type=BUY_LIMIT) Place SELL LIMIT order OrderSend (type=SELL_LIMIT) Place BUY STOP order OrderSend (type=BUY_STOP) Place SELL STOP order OrderSend (type=SELL_STOP) Modify SL/TP of position OrderModify Close a position OrderClose Calculate margin before trade OrderCalcMargin Calculate potential profit OrderCalcProfit Validate trade before execution OrderCheck REAL-TIME SUBSCRIPTIONS Stream live prices OnSymbolTick Monitor trade events OnTrade Track profit changes OnPositionProfit Monitor ticket changes OnPositionsAndPendingOrdersTickets Detailed transaction log OnTradeTransaction"},{"location":"MT5Account/MT5Account.Master.Overview/#api-architecture","title":"\ud83c\udfd7\ufe0f API Architecture","text":""},{"location":"MT5Account/MT5Account.Master.Overview/#layer-1-mt5account-low-level-you-are-here","title":"Layer 1: MT5Account (Low-Level) - You are here!","text":"<p>What: Direct proto/gRPC communication with MT5 terminal.</p> <p>When to use: - Need full control over protocol - Building custom wrappers - Proto-level integration required</p> <p>Characteristics: - Works with proto Request/Response objects - Raw gRPC method calls - Complete access to all MT5 functions - Highest complexity</p> <p>Location: Core gRPC client (generated from proto files)</p> <p>Documentation: This folder (you are here!)</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#layer-2-mt5service","title":"Layer 2: MT5Service","text":"<p>What: Simplified wrapper methods without proto complexity.</p> <p>When to use: - Want simplified API but not auto-normalization - Building custom convenience layers - Need direct data returns</p> <p>Characteristics: - Simple method signatures - Type conversions (proto \u2192 Go primitives) - No proto objects in return values - No auto-normalization</p> <p>Location: <code>examples/mt5/MT5Service.go</code></p> <p>Documentation: MT5Service.Overview.md (if exists)</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#layer-3-mt5sugar","title":"Layer 3: MT5Sugar","text":"<p>What: High-level convenience API with ~60 smart methods.</p> <p>When to use: - Most trading scenarios (95% of cases) - Want auto-normalization - Need risk management helpers - Building strategies quickly</p> <p>Characteristics: - Auto-normalization of volumes/prices - Risk-based position sizing - Batch operations - Smart helpers</p> <p>Location: <code>examples/mt5/MT5Sugar.go</code></p> <p>Documentation: MT5Sugar.API_Overview.md</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#learning-path","title":"\ud83c\udf93 Learning Path","text":"<p>Recommended sequence: Start from foundation (MT5Account) \u2192 Build up to convenience layers (MT5Service \u2192 MT5Sugar)</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#step-1-master-the-foundation-mt5account-you-are-here","title":"Step 1: Master the Foundation (MT5Account) - You are here!","text":"<p>Why first: MT5Account is the foundation - everything else is built on top of it. Understanding the protocol level gives you complete control.</p> <pre><code>1. Read: This documentation folder (docs/MT5Account/)\n2. Study: Proto definitions and gRPC communication\n3. Understand: Request/Response patterns\n4. Learn: Return codes and error handling\n5. Practice: Low-level method calls\n</code></pre> <p>Goal: Deep understanding of MT5 protocol and terminal communication.</p> <p>Documentation: MT5Account.Master.Overview.md (you are here!)</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#step-2-understand-wrappers-mt5service","title":"Step 2: Understand Wrappers (MT5Service)","text":"<p>Why second: Once you know the foundation, see how MT5Service simplifies it by wrapping proto objects.</p> <pre><code>1. Study: How MT5Service wraps MT5Account methods\n2. Compare: Wrapper vs low-level implementations\n3. Learn: Type conversions (proto \u2192 Go primitives)\n4. Practice: Simplified method calls without proto objects\n</code></pre> <p>Goal: Learn to build clean API wrappers on top of complex protocols.</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#step-3-use-convenience-layer-mt5sugar","title":"Step 3: Use Convenience Layer (MT5Sugar)","text":"<p>Why last: With foundation + wrappers understood, appreciate how MT5Sugar adds auto-normalization and smart helpers.</p> <pre><code>1. Study: MT5Sugar convenience methods (~60 methods)\n2. Learn: Auto-normalization, risk management, batch operations\n3. Use: High-level methods for rapid strategy development\n4. Build: Trading strategies using Sugar API\n</code></pre> <p>Goal: Rapid strategy development with production-ready convenience methods.</p> <p>Documentation: MT5Sugar.API_Overview.md</p> <p>Summary: MT5Account (foundation) \u2192 MT5Service (wrappers) \u2192 MT5Sugar (convenience)</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#key-concepts","title":"\ud83d\udca1 Key Concepts","text":""},{"location":"MT5Account/MT5Account.Master.Overview/#proto-return-codes","title":"Proto Return Codes","text":"<ul> <li>10009 = Success / DONE</li> <li>10004 = Requote</li> <li>10006 = Request rejected</li> <li>10013 = Invalid request</li> <li>10014 = Invalid volume</li> <li>10015 = Invalid price</li> <li>10016 = Invalid stops</li> <li>10018 = Market closed</li> <li>10019 = Not enough money</li> <li>10031 = No connection with trade server</li> </ul> <p>Always check <code>ReturnedCode</code> field in trading operations.</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#important-notes","title":"\u26a0\ufe0f Important Notes","text":"<ul> <li>Demo account first: Always test on demo before live trading.</li> <li>Check return codes: Every trading operation returns status code (10009 = success).</li> <li>Validate parameters: Use <code>OrderCheck()</code> before <code>OrderSend()</code>.</li> <li>Handle errors: Network/protocol errors can occur.</li> <li>Context management: Always use context with timeout for requests.</li> <li>Stream cleanup: Cancel context to stop streams properly.</li> <li>UTC timestamps: All times are in UTC, not local time.</li> <li>Broker limitations: Not all brokers support all features (DOM, hedging, etc.).</li> </ul> <p>\"Trade safe, code clean, and may your gRPC streams always flow smoothly.\"</p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/","title":"\ud83d\udcca Getting Account Double Properties","text":"<p>Request: specific double-type account property from MT5 terminal using property identifier.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.AccountInfoDouble(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountInformation</code></li> <li>Proto definition: <code>AccountInfoDouble</code> (defined in <code>mt5-term-api-account-information.proto</code>)</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountInformation</code></li> <li>Method: <code>AccountInfoDouble(AccountInfoDoubleRequest) \u2192 AccountInfoDoubleReply</code></li> <li>Low\u2011level client (generated): <code>AccountInformationClient.AccountInfoDouble(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieve a specific double-type account property by ID (balance, equity, margin, etc.).</li> <li>Why you need it. Get individual account metrics without fetching all data. Useful for focused checks.</li> <li>When to use. Use <code>AccountSummary()</code> for multiple properties. Use this method for single property queries.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to query specific numeric account properties:</p> <ul> <li>Check account balance before trading</li> <li>Monitor margin usage and margin level</li> <li>Verify free margin availability</li> <li>Track floating profit/loss</li> <li>Monitor margin call and stop out levels</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 AccountInfoDouble - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// AccountInfoDouble retrieves a double-type account property.\n// Returns AccountInfoDoubleData with the requested numeric value.\nfunc (a *MT5Account) AccountInfoDouble(\n    ctx context.Context,\n    req *pb.AccountInfoDoubleRequest,\n) (*pb.AccountInfoDoubleData, error)\n</code></pre> <p>Request message:</p> <pre><code>message AccountInfoDoubleRequest {\n  AccountInfoDoublePropertyType property_id = 1;\n}\n</code></pre> <p>Reply message:</p> <pre><code>message AccountInfoDoubleReply {\n  oneof response {\n    AccountInfoDoubleData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.AccountInfoDoubleRequest</code> Request with property_id specifying which property to retrieve <code>req.property_id</code> <code>AccountInfoDoublePropertyType</code> (enum) Property identifier (see enum below) <p>Context options:</p> <pre><code>// 1. With timeout (recommended)\nctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\ndefer cancel()\n\n// 2. With deadline\nctx, cancel := context.WithDeadline(context.Background(), time.Now().Add(3*time.Second))\ndefer cancel()\n\n// 3. With cancellation\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#output-accountinfodoubledata","title":"\u2b06\ufe0f Output \u2014 <code>AccountInfoDoubleData</code>","text":"Field Type Go Type Description <code>requested_value</code> <code>double</code> <code>float64</code> The value of the requested account property"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":"<p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE</code></p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#accountinfodoublepropertytype","title":"<code>AccountInfoDoublePropertyType</code>","text":"<p>Defined in <code>mt5-term-api-account-information.proto</code>:</p> <pre><code>enum AccountInfoDoublePropertyType {\n  ACCOUNT_BALANCE = 0;           // Account balance in the deposit currency\n  ACCOUNT_CREDIT = 1;            // Account credit in the deposit currency\n  ACCOUNT_PROFIT = 2;            // Current profit of an account in the deposit currency\n  ACCOUNT_EQUITY = 3;            // Account equity in the deposit currency\n  ACCOUNT_MARGIN = 4;            // Account margin used in the deposit currency\n  ACCOUNT_MARGIN_FREE = 5;       // Free margin of an account in the deposit currency\n  ACCOUNT_MARGIN_LEVEL = 6;      // Account margin level in percents\n  ACCOUNT_MARGIN_SO_CALL = 7;    // Margin call level (in % or deposit currency)\n  ACCOUNT_MARGIN_SO_SO = 8;      // Margin stop out level (in % or deposit currency)\n  ACCOUNT_MARGIN_INITIAL = 9;    // Initial margin (reserved for pending orders)\n  ACCOUNT_MARGIN_MAINTENANCE = 10; // Maintenance margin (minimum equity reserved)\n  ACCOUNT_ASSETS = 11;           // Current assets of an account\n  ACCOUNT_LIABILITIES = 12;      // Current liabilities on an account\n  ACCOUNT_COMMISSION_BLOCKED = 13; // Current blocked commission amount\n}\n</code></pre> <p>Go constants (generated):</p> <pre><code>const (\n    AccountInfoDoublePropertyType_ACCOUNT_BALANCE           = 0\n    AccountInfoDoublePropertyType_ACCOUNT_CREDIT            = 1\n    AccountInfoDoublePropertyType_ACCOUNT_PROFIT            = 2\n    AccountInfoDoublePropertyType_ACCOUNT_EQUITY            = 3\n    AccountInfoDoublePropertyType_ACCOUNT_MARGIN            = 4\n    AccountInfoDoublePropertyType_ACCOUNT_MARGIN_FREE       = 5\n    AccountInfoDoublePropertyType_ACCOUNT_MARGIN_LEVEL      = 6\n    AccountInfoDoublePropertyType_ACCOUNT_MARGIN_SO_CALL    = 7\n    AccountInfoDoublePropertyType_ACCOUNT_MARGIN_SO_SO      = 8\n    AccountInfoDoublePropertyType_ACCOUNT_MARGIN_INITIAL    = 9\n    AccountInfoDoublePropertyType_ACCOUNT_MARGIN_MAINTENANCE = 10\n    AccountInfoDoublePropertyType_ACCOUNT_ASSETS            = 11\n    AccountInfoDoublePropertyType_ACCOUNT_LIABILITIES       = 12\n    AccountInfoDoublePropertyType_ACCOUNT_COMMISSION_BLOCKED = 13\n)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Prefer AccountSummary: For multiple properties, use <code>AccountSummary()</code> instead to avoid multiple round-trips.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Property types: Margin call and stop out levels can be in percents or deposit currency depending on account settings.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#1-get-account-balance","title":"1) Get account balance","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    \"github.com/google/uuid\"\n)\n\nfunc main() {\n    account, err := mt5.NewMT5Account(591129415, \"password\", \"server:443\", uuid.New())\n    if err != nil {\n        panic(err)\n    }\n    defer account.Close()\n\n    // Connect first\n    err = account.Connect()\n    if err != nil {\n        panic(err)\n    }\n\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    // Get balance\n    req := &amp;pb.AccountInfoDoubleRequest{\n        PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE,\n    }\n\n    data, err := account.AccountInfoDouble(ctx, req)\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Account Balance: %.2f\\n\", data.RequestedValue)\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#2-get-current-equity","title":"2) Get current equity","text":"<pre><code>func GetEquity(account *mt5.MT5Account) (float64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoDoubleRequest{\n        PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_EQUITY,\n    }\n\n    data, err := account.AccountInfoDouble(ctx, req)\n    if err != nil {\n        return 0, fmt.Errorf(\"failed to get equity: %w\", err)\n    }\n\n    return data.RequestedValue, nil\n}\n\n// Usage:\nequity, err := GetEquity(account)\nif err != nil {\n    log.Fatal(err)\n}\nfmt.Printf(\"Current Equity: %.2f\\n\", equity)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#3-check-margin-level-before-trading","title":"3) Check margin level before trading","text":"<pre><code>func CheckMarginLevel(account *mt5.MT5Account, minLevel float64) (bool, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoDoubleRequest{\n        PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN_LEVEL,\n    }\n\n    data, err := account.AccountInfoDouble(ctx, req)\n    if err != nil {\n        return false, err\n    }\n\n    marginLevel := data.RequestedValue\n    fmt.Printf(\"Margin Level: %.2f%%\\n\", marginLevel)\n\n    // Check if margin level is above minimum\n    if marginLevel &lt; minLevel {\n        return false, fmt.Errorf(\"margin level %.2f%% is below minimum %.2f%%\",\n            marginLevel, minLevel)\n    }\n\n    return true, nil\n}\n\n// Usage:\n// Check if margin level is at least 200%\nok, err := CheckMarginLevel(account, 200.0)\nif !ok {\n    log.Println(\"Insufficient margin level, cannot trade\")\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#4-get-free-margin","title":"4) Get free margin","text":"<pre><code>func GetFreeMargin(account *mt5.MT5Account) (float64, error) {\n    ctx := context.Background() // Will use default 3s timeout\n\n    req := &amp;pb.AccountInfoDoubleRequest{\n        PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN_FREE,\n    }\n\n    data, err := account.AccountInfoDouble(ctx, req)\n    if err != nil {\n        return 0, err\n    }\n\n    return data.RequestedValue, nil\n}\n\n// Usage:\nfreeMargin, _ := GetFreeMargin(account)\nfmt.Printf(\"Free Margin: %.2f\\n\", freeMargin)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#5-monitor-floating-profitloss","title":"5) Monitor floating profit/loss","text":"<pre><code>func MonitorProfit(account *mt5.MT5Account, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n\n        req := &amp;pb.AccountInfoDoubleRequest{\n            PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_PROFIT,\n        }\n\n        data, err := account.AccountInfoDouble(ctx, req)\n        cancel()\n\n        if err != nil {\n            fmt.Printf(\"Error: %v\\n\", err)\n            continue\n        }\n\n        profit := data.RequestedValue\n        sign := \"+\"\n        if profit &lt; 0 {\n            sign = \"\"\n        }\n\n        fmt.Printf(\"[%s] Floating P/L: %s%.2f\\n\",\n            time.Now().Format(\"15:04:05\"),\n            sign,\n            profit)\n    }\n}\n\n// Usage:\n// MonitorProfit(account, 5*time.Second) // Update every 5 seconds\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#6-check-multiple-properties-sequentially","title":"6) Check multiple properties sequentially","text":"<pre><code>type MarginInfo struct {\n    UsedMargin  float64\n    FreeMargin  float64\n    MarginLevel float64\n}\n\nfunc GetMarginInfo(account *mt5.MT5Account) (*MarginInfo, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    info := &amp;MarginInfo{}\n\n    // Get used margin\n    usedReq := &amp;pb.AccountInfoDoubleRequest{\n        PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN,\n    }\n    usedData, err := account.AccountInfoDouble(ctx, usedReq)\n    if err != nil {\n        return nil, err\n    }\n    info.UsedMargin = usedData.RequestedValue\n\n    // Get free margin\n    freeReq := &amp;pb.AccountInfoDoubleRequest{\n        PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN_FREE,\n    }\n    freeData, err := account.AccountInfoDouble(ctx, freeReq)\n    if err != nil {\n        return nil, err\n    }\n    info.FreeMargin = freeData.RequestedValue\n\n    // Get margin level\n    levelReq := &amp;pb.AccountInfoDoubleRequest{\n        PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN_LEVEL,\n    }\n    levelData, err := account.AccountInfoDouble(ctx, levelReq)\n    if err != nil {\n        return nil, err\n    }\n    info.MarginLevel = levelData.RequestedValue\n\n    return info, nil\n}\n\n// Usage:\ninfo, err := GetMarginInfo(account)\nif err != nil {\n    log.Fatal(err)\n}\nfmt.Printf(\"Margin Info:\\n\")\nfmt.Printf(\"  Used: %.2f\\n\", info.UsedMargin)\nfmt.Printf(\"  Free: %.2f\\n\", info.FreeMargin)\nfmt.Printf(\"  Level: %.2f%%\\n\", info.MarginLevel)\n\n// Note: For better performance, use AccountSummary() instead\n// to get all properties in one call\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#safe-trading-check","title":"Safe trading check","text":"<pre><code>func CanTrade(account *mt5.MT5Account, requiredMargin float64) (bool, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    // Check free margin\n    req := &amp;pb.AccountInfoDoubleRequest{\n        PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN_FREE,\n    }\n\n    data, err := account.AccountInfoDouble(ctx, req)\n    if err != nil {\n        return false, err\n    }\n\n    freeMargin := data.RequestedValue\n\n    // Check if we have enough free margin\n    if freeMargin &lt; requiredMargin {\n        return false, fmt.Errorf(\"insufficient margin: need %.2f, have %.2f\",\n            requiredMargin, freeMargin)\n    }\n\n    return true, nil\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#margin-level-warning-system","title":"Margin level warning system","text":"<pre><code>func CheckMarginWarning(account *mt5.MT5Account) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoDoubleRequest{\n        PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN_LEVEL,\n    }\n\n    data, err := account.AccountInfoDouble(ctx, req)\n    if err != nil {\n        return err\n    }\n\n    level := data.RequestedValue\n\n    // Check margin level thresholds\n    switch {\n    case level &lt; 100:\n        return fmt.Errorf(\"CRITICAL: Margin level %.2f%% - Stop out imminent!\", level)\n    case level &lt; 200:\n        log.Printf(\"WARNING: Margin level %.2f%% - Margin call zone\", level)\n    case level &lt; 500:\n        log.Printf(\"CAUTION: Margin level %.2f%% - Monitor closely\", level)\n    default:\n        log.Printf(\"OK: Margin level %.2f%%\", level)\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>AccountSummary - Get all account properties in one call (RECOMMENDED)</li> <li>AccountInfoInteger - Get specific integer account properties</li> <li>AccountInfoString - Get specific string account properties</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/","title":"\ud83d\udd22 Getting Account Integer Properties","text":"<p>Request: specific integer-type account property from MT5 terminal using property identifier.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.AccountInfoInteger(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountInformation</code></li> <li>Proto definition: <code>AccountInfoInteger</code> (defined in <code>mt5-term-api-account-information.proto</code>)</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountInformation</code></li> <li>Method: <code>AccountInfoInteger(AccountInfoIntegerRequest) \u2192 AccountInfoIntegerReply</code></li> <li>Low\u2011level client (generated): <code>AccountInformationClient.AccountInfoInteger(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieve a specific integer-type account property by ID (login, leverage, trade mode, limits).</li> <li>Why you need it. Get account configuration and permission settings.</li> <li>When to use. Query individual settings. For multiple properties, use <code>AccountSummary()</code>.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to query specific integer account properties:</p> <ul> <li>Get account login number</li> <li>Check account leverage</li> <li>Verify trading permissions</li> <li>Check position limits</li> <li>Validate account configuration</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 AccountInfoInteger - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// AccountInfoInteger retrieves an integer-type account property.\n// Returns AccountInfoIntegerData with the requested int64 value.\nfunc (a *MT5Account) AccountInfoInteger(\n    ctx context.Context,\n    req *pb.AccountInfoIntegerRequest,\n) (*pb.AccountInfoIntegerData, error)\n</code></pre> <p>Request message:</p> <pre><code>message AccountInfoIntegerRequest {\n  AccountInfoIntegerPropertyType property_id = 1;\n}\n</code></pre> <p>Reply message:</p> <pre><code>message AccountInfoIntegerReply {\n  oneof response {\n    AccountInfoIntegerData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.AccountInfoIntegerRequest</code> Request with property_id specifying which property to retrieve <code>req.property_id</code> <code>AccountInfoIntegerPropertyType</code> (enum) Property identifier (see enum below)"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#output-accountinfointegerdata","title":"\u2b06\ufe0f Output \u2014 <code>AccountInfoIntegerData</code>","text":"Field Type Go Type Description <code>requested_value</code> <code>int64</code> <code>int64</code> The value of the requested account property"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":"<p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.AccountInfoIntegerPropertyType_ACCOUNT_LOGIN</code></p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#accountinfointegerpropertytype","title":"<code>AccountInfoIntegerPropertyType</code>","text":"<p>Defined in <code>mt5-term-api-account-information.proto</code>:</p> <pre><code>enum AccountInfoIntegerPropertyType {\n  ACCOUNT_LOGIN = 0;          // Account number (login)\n  ACCOUNT_TRADE_MODE = 1;     // Account trade mode (DEMO/CONTEST/REAL)\n  ACCOUNT_LEVERAGE = 2;       // Account leverage (e.g., 100 for 1:100)\n  ACCOUNT_LIMIT_ORDERS = 3;   // Maximum allowed open positions + pending orders (0 = unlimited)\n  ACCOUNT_MARGIN_SO_MODE = 4; // Margin stop out mode (percent or deposit currency)\n  ACCOUNT_TRADE_ALLOWED = 5;  // Trading allowed for this account (1 or 0)\n  ACCOUNT_TRADE_EXPERT = 6;   // Expert Advisor trading allowed (1 or 0)\n  ACCOUNT_MARGIN_MODE = 7;    // Margin calculation mode\n  ACCOUNT_CURRENCY_DIGITS = 8; // Decimal places for account currency\n  ACCOUNT_FIFO_CLOSE = 9;     // Positions must be closed in FIFO order (1 or 0)\n  ACCOUNT_HEDGE_ALLOWED = 10; // Opposite positions on same symbol allowed (1 or 0)\n}\n</code></pre> <p>Go constants (generated):</p> <pre><code>const (\n    AccountInfoIntegerPropertyType_ACCOUNT_LOGIN          = 0\n    AccountInfoIntegerPropertyType_ACCOUNT_TRADE_MODE     = 1\n    AccountInfoIntegerPropertyType_ACCOUNT_LEVERAGE       = 2\n    AccountInfoIntegerPropertyType_ACCOUNT_LIMIT_ORDERS   = 3\n    AccountInfoIntegerPropertyType_ACCOUNT_MARGIN_SO_MODE = 4\n    AccountInfoIntegerPropertyType_ACCOUNT_TRADE_ALLOWED  = 5\n    AccountInfoIntegerPropertyType_ACCOUNT_TRADE_EXPERT   = 6\n    AccountInfoIntegerPropertyType_ACCOUNT_MARGIN_MODE    = 7\n    AccountInfoIntegerPropertyType_ACCOUNT_CURRENCY_DIGITS = 8\n    AccountInfoIntegerPropertyType_ACCOUNT_FIFO_CLOSE     = 9\n    AccountInfoIntegerPropertyType_ACCOUNT_HEDGE_ALLOWED  = 10\n)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: Built-in protection against transient gRPC errors.</li> <li>Default timeout: Default <code>3s</code> timeout applied if context has no deadline.</li> <li>Boolean values: Properties like TRADE_ALLOWED return <code>1</code> (true) or <code>0</code> (false).</li> <li>Prefer AccountSummary: For multiple properties, use <code>AccountSummary()</code> to avoid multiple round-trips.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#1-get-account-login-number","title":"1) Get account login number","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    \"github.com/google/uuid\"\n)\n\nfunc main() {\n    account, err := mt5.NewMT5Account(591129415, \"password\", \"server:443\", uuid.New())\n    if err != nil {\n        panic(err)\n    }\n    defer account.Close()\n\n    err = account.Connect()\n    if err != nil {\n        panic(err)\n    }\n\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_LOGIN,\n    }\n\n    data, err := account.AccountInfoInteger(ctx, req)\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Account Login: %d\\n\", data.RequestedValue)\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#2-check-account-leverage","title":"2) Check account leverage","text":"<pre><code>func GetLeverage(account *mt5.MT5Account) (int64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_LEVERAGE,\n    }\n\n    data, err := account.AccountInfoInteger(ctx, req)\n    if err != nil {\n        return 0, fmt.Errorf(\"failed to get leverage: %w\", err)\n    }\n\n    return data.RequestedValue, nil\n}\n\n// Usage:\nleverage, _ := GetLeverage(account)\nfmt.Printf(\"Account Leverage: 1:%d\\n\", leverage)\n// Output: Account Leverage: 1:100\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#3-check-if-trading-is-allowed","title":"3) Check if trading is allowed","text":"<pre><code>func IsTradingAllowed(account *mt5.MT5Account) (bool, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_TRADE_ALLOWED,\n    }\n\n    data, err := account.AccountInfoInteger(ctx, req)\n    if err != nil {\n        return false, err\n    }\n\n    // Value is 1 for true, 0 for false\n    return data.RequestedValue == 1, nil\n}\n\n// Usage:\nallowed, err := IsTradingAllowed(account)\nif err != nil {\n    log.Fatal(err)\n}\n\nif !allowed {\n    log.Println(\"Trading is disabled for this account\")\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#4-check-if-expert-advisor-trading-is-allowed","title":"4) Check if Expert Advisor trading is allowed","text":"<pre><code>func IsEAAllowed(account *mt5.MT5Account) bool {\n    ctx := context.Background()\n\n    req := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_TRADE_EXPERT,\n    }\n\n    data, err := account.AccountInfoInteger(ctx, req)\n    if err != nil {\n        return false\n    }\n\n    return data.RequestedValue == 1\n}\n\n// Usage:\nif IsEAAllowed(account) {\n    fmt.Println(\"Expert Advisor trading is enabled\")\n} else {\n    fmt.Println(\"Expert Advisor trading is disabled\")\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#5-get-account-trade-mode","title":"5) Get account trade mode","text":"<pre><code>func GetTradeMode(account *mt5.MT5Account) (string, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_TRADE_MODE,\n    }\n\n    data, err := account.AccountInfoInteger(ctx, req)\n    if err != nil {\n        return \"\", err\n    }\n\n    // Convert to string\n    switch data.RequestedValue {\n    case 0:\n        return \"DEMO\", nil\n    case 1:\n        return \"CONTEST\", nil\n    case 2:\n        return \"REAL\", nil\n    default:\n        return fmt.Sprintf(\"UNKNOWN(%d)\", data.RequestedValue), nil\n    }\n}\n\n// Usage:\nmode, _ := GetTradeMode(account)\nfmt.Printf(\"Account Type: %s\\n\", mode)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#6-check-position-limits","title":"6) Check position limits","text":"<pre><code>func CheckPositionLimits(account *mt5.MT5Account) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_LIMIT_ORDERS,\n    }\n\n    data, err := account.AccountInfoInteger(ctx, req)\n    if err != nil {\n        return err\n    }\n\n    limit := data.RequestedValue\n\n    if limit == 0 {\n        fmt.Println(\"No limit on positions and orders\")\n    } else {\n        fmt.Printf(\"Maximum allowed positions + orders: %d\\n\", limit)\n    }\n\n    return nil\n}\n\n// Usage:\nCheckPositionLimits(account)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#validate-account-configuration","title":"Validate account configuration","text":"<pre><code>type AccountConfig struct {\n    Login        int64\n    Leverage     int64\n    TradeMode    string\n    TradeAllowed bool\n    EAAllowed    bool\n    HedgeAllowed bool\n}\n\nfunc GetAccountConfig(account *mt5.MT5Account) (*AccountConfig, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    config := &amp;AccountConfig{}\n\n    // Get login\n    loginReq := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_LOGIN,\n    }\n    loginData, err := account.AccountInfoInteger(ctx, loginReq)\n    if err != nil {\n        return nil, err\n    }\n    config.Login = loginData.RequestedValue\n\n    // Get leverage\n    levReq := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_LEVERAGE,\n    }\n    levData, err := account.AccountInfoInteger(ctx, levReq)\n    if err != nil {\n        return nil, err\n    }\n    config.Leverage = levData.RequestedValue\n\n    // Get trade mode\n    modeReq := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_TRADE_MODE,\n    }\n    modeData, err := account.AccountInfoInteger(ctx, modeReq)\n    if err != nil {\n        return nil, err\n    }\n\n    switch modeData.RequestedValue {\n    case 0:\n        config.TradeMode = \"DEMO\"\n    case 1:\n        config.TradeMode = \"CONTEST\"\n    case 2:\n        config.TradeMode = \"REAL\"\n    }\n\n    // Get trading permissions\n    tradeReq := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_TRADE_ALLOWED,\n    }\n    tradeData, err := account.AccountInfoInteger(ctx, tradeReq)\n    if err != nil {\n        return nil, err\n    }\n    config.TradeAllowed = tradeData.RequestedValue == 1\n\n    eaReq := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_TRADE_EXPERT,\n    }\n    eaData, err := account.AccountInfoInteger(ctx, eaReq)\n    if err != nil {\n        return nil, err\n    }\n    config.EAAllowed = eaData.RequestedValue == 1\n\n    hedgeReq := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_HEDGE_ALLOWED,\n    }\n    hedgeData, err := account.AccountInfoInteger(ctx, hedgeReq)\n    if err != nil {\n        return nil, err\n    }\n    config.HedgeAllowed = hedgeData.RequestedValue == 1\n\n    return config, nil\n}\n\n// Usage:\nconfig, err := GetAccountConfig(account)\nif err != nil {\n    log.Fatal(err)\n}\n\nfmt.Printf(\"Account Configuration:\\n\")\nfmt.Printf(\"  Login: %d\\n\", config.Login)\nfmt.Printf(\"  Leverage: 1:%d\\n\", config.Leverage)\nfmt.Printf(\"  Type: %s\\n\", config.TradeMode)\nfmt.Printf(\"  Trading: %v\\n\", config.TradeAllowed)\nfmt.Printf(\"  EA Trading: %v\\n\", config.EAAllowed)\nfmt.Printf(\"  Hedging: %v\\n\", config.HedgeAllowed)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#pre-flight-trading-checks","title":"Pre-flight trading checks","text":"<pre><code>func CanStartTrading(account *mt5.MT5Account) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Check if trading is allowed\n    tradeReq := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_TRADE_ALLOWED,\n    }\n    tradeData, err := account.AccountInfoInteger(ctx, tradeReq)\n    if err != nil {\n        return err\n    }\n\n    if tradeData.RequestedValue != 1 {\n        return fmt.Errorf(\"trading is disabled for this account\")\n    }\n\n    // Check if EA trading is allowed (if using EA)\n    eaReq := &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_TRADE_EXPERT,\n    }\n    eaData, err := account.AccountInfoInteger(ctx, eaReq)\n    if err != nil {\n        return err\n    }\n\n    if eaData.RequestedValue != 1 {\n        log.Println(\"WARNING: Expert Advisor trading is disabled\")\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>AccountSummary - Get all account properties in one call (RECOMMENDED)</li> <li>AccountInfoDouble - Get specific double account properties</li> <li>AccountInfoString - Get specific string account properties</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/","title":"\ud83d\udcdd Getting Account String Properties","text":"<p>Request: specific string-type account property from MT5 terminal using property identifier.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.AccountInfoString(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountInformation</code></li> <li>Proto definition: <code>AccountInfoString</code> (defined in <code>mt5-term-api-account-information.proto</code>)</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountInformation</code></li> <li>Method: <code>AccountInfoString(AccountInfoStringRequest) \u2192 AccountInfoStringReply</code></li> <li>Low\u2011level client (generated): <code>AccountInformationClient.AccountInfoString(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieve a specific string-type account property by ID (name, server, currency, broker).</li> <li>Why you need it. Get account text information like client name, broker, currency code.</li> <li>When to use. Query individual text properties. For all properties, use <code>AccountSummary()</code>.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to query specific string account properties:</p> <ul> <li>Get client/account name</li> <li>Check trade server name</li> <li>Verify account currency</li> <li>Get broker company name</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 AccountInfoString - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// AccountInfoString retrieves a string-type account property.\n// Returns AccountInfoStringData with the requested string value.\nfunc (a *MT5Account) AccountInfoString(\n    ctx context.Context,\n    req *pb.AccountInfoStringRequest,\n) (*pb.AccountInfoStringData, error)\n</code></pre> <p>Request message:</p> <pre><code>message AccountInfoStringRequest {\n  AccountInfoStringPropertyType property_id = 1;\n}\n</code></pre> <p>Reply message:</p> <pre><code>message AccountInfoStringReply {\n  oneof response {\n    AccountInfoStringData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.AccountInfoStringRequest</code> Request with property_id specifying which property to retrieve <code>req.property_id</code> <code>AccountInfoStringPropertyType</code> (enum) Property identifier (see enum below)"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#output-accountinfostringdata","title":"\u2b06\ufe0f Output \u2014 <code>AccountInfoStringData</code>","text":"Field Type Go Type Description <code>requested_value</code> <code>string</code> <code>string</code> The value of the requested account property"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":"<p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.AccountInfoStringPropertyType_ACCOUNT_NAME</code></p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#accountinfostringpropertytype","title":"<code>AccountInfoStringPropertyType</code>","text":"<p>Defined in <code>mt5-term-api-account-information.proto</code>:</p> <pre><code>enum AccountInfoStringPropertyType {\n  ACCOUNT_NAME = 0;     // Client name\n  ACCOUNT_SERVER = 1;   // Trade server name\n  ACCOUNT_CURRENCY = 2; // Account currency (e.g., \"USD\", \"EUR\")\n  ACCOUNT_COMPANY = 3;  // Name of company that serves the account (broker)\n}\n</code></pre> <p>Go constants (generated):</p> <pre><code>const (\n    AccountInfoStringPropertyType_ACCOUNT_NAME     = 0\n    AccountInfoStringPropertyType_ACCOUNT_SERVER   = 1\n    AccountInfoStringPropertyType_ACCOUNT_CURRENCY = 2\n    AccountInfoStringPropertyType_ACCOUNT_COMPANY  = 3\n)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: Built-in protection against transient gRPC errors.</li> <li>Default timeout: Default <code>3s</code> timeout applied if context has no deadline.</li> <li>Currency codes: Returns standard 3-letter currency codes (USD, EUR, GBP, etc.).</li> <li>Prefer AccountSummary: For multiple properties, use <code>AccountSummary()</code> to avoid multiple round-trips.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#1-get-account-currency","title":"1) Get account currency","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    \"github.com/google/uuid\"\n)\n\nfunc main() {\n    account, err := mt5.NewMT5Account(591129415, \"password\", \"server:443\", uuid.New())\n    if err != nil {\n        panic(err)\n    }\n    defer account.Close()\n\n    err = account.Connect()\n    if err != nil {\n        panic(err)\n    }\n\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_CURRENCY,\n    }\n\n    data, err := account.AccountInfoString(ctx, req)\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Account Currency: %s\\n\", data.RequestedValue)\n    // Output: Account Currency: USD\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#2-get-client-name","title":"2) Get client name","text":"<pre><code>func GetClientName(account *mt5.MT5Account) (string, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_NAME,\n    }\n\n    data, err := account.AccountInfoString(ctx, req)\n    if err != nil {\n        return \"\", fmt.Errorf(\"failed to get client name: %w\", err)\n    }\n\n    return data.RequestedValue, nil\n}\n\n// Usage:\nname, _ := GetClientName(account)\nfmt.Printf(\"Account Holder: %s\\n\", name)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#3-get-trade-server-name","title":"3) Get trade server name","text":"<pre><code>func GetServerName(account *mt5.MT5Account) string {\n    ctx := context.Background()\n\n    req := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_SERVER,\n    }\n\n    data, err := account.AccountInfoString(ctx, req)\n    if err != nil {\n        return \"unknown\"\n    }\n\n    return data.RequestedValue\n}\n\n// Usage:\nserver := GetServerName(account)\nfmt.Printf(\"Connected to: %s\\n\", server)\n// Output: Connected to: MetaQuotes-Demo\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#4-get-broker-company-name","title":"4) Get broker company name","text":"<pre><code>func GetBrokerName(account *mt5.MT5Account) (string, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_COMPANY,\n    }\n\n    data, err := account.AccountInfoString(ctx, req)\n    if err != nil {\n        return \"\", err\n    }\n\n    return data.RequestedValue, nil\n}\n\n// Usage:\nbroker, err := GetBrokerName(account)\nif err != nil {\n    log.Fatal(err)\n}\nfmt.Printf(\"Broker: %s\\n\", broker)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#5-display-account-info-banner","title":"5) Display account info banner","text":"<pre><code>func PrintAccountBanner(account *mt5.MT5Account) {\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    // Get client name\n    nameReq := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_NAME,\n    }\n    nameData, _ := account.AccountInfoString(ctx, nameReq)\n\n    // Get broker\n    brokerReq := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_COMPANY,\n    }\n    brokerData, _ := account.AccountInfoString(ctx, brokerReq)\n\n    // Get server\n    serverReq := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_SERVER,\n    }\n    serverData, _ := account.AccountInfoString(ctx, serverReq)\n\n    // Get currency\n    currReq := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_CURRENCY,\n    }\n    currData, _ := account.AccountInfoString(ctx, currReq)\n\n    // Print banner\n    fmt.Println(\"=\" + strings.Repeat(\"=\", 50))\n    fmt.Printf(\"  Account: %s\\n\", nameData.RequestedValue)\n    fmt.Printf(\"  Broker:  %s\\n\", brokerData.RequestedValue)\n    fmt.Printf(\"  Server:  %s\\n\", serverData.RequestedValue)\n    fmt.Printf(\"  Currency: %s\\n\", currData.RequestedValue)\n    fmt.Println(\"=\" + strings.Repeat(\"=\", 50))\n}\n\n// Usage:\nPrintAccountBanner(account)\n/* Output:\n===================================================\n  Account: John Doe\n  Broker:  XM Global Limited\n  Server:  XM-Real 34\n  Currency: USD\n===================================================\n*/\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#6-verify-account-currency-before-trading","title":"6) Verify account currency before trading","text":"<pre><code>func VerifyCurrency(account *mt5.MT5Account, expectedCurrency string) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_CURRENCY,\n    }\n\n    data, err := account.AccountInfoString(ctx, req)\n    if err != nil {\n        return fmt.Errorf(\"failed to get currency: %w\", err)\n    }\n\n    currency := data.RequestedValue\n\n    if currency != expectedCurrency {\n        return fmt.Errorf(\"currency mismatch: expected %s, got %s\",\n            expectedCurrency, currency)\n    }\n\n    fmt.Printf(\"Currency verified: %s\\n\", currency)\n    return nil\n}\n\n// Usage:\nerr := VerifyCurrency(account, \"USD\")\nif err != nil {\n    log.Fatal(err)\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#get-all-string-properties","title":"Get all string properties","text":"<pre><code>type AccountStringInfo struct {\n    Name     string\n    Server   string\n    Currency string\n    Company  string\n}\n\nfunc GetAccountStringInfo(account *mt5.MT5Account) (*AccountStringInfo, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    info := &amp;AccountStringInfo{}\n\n    // Get name\n    nameReq := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_NAME,\n    }\n    nameData, err := account.AccountInfoString(ctx, nameReq)\n    if err != nil {\n        return nil, err\n    }\n    info.Name = nameData.RequestedValue\n\n    // Get server\n    serverReq := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_SERVER,\n    }\n    serverData, err := account.AccountInfoString(ctx, serverReq)\n    if err != nil {\n        return nil, err\n    }\n    info.Server = serverData.RequestedValue\n\n    // Get currency\n    currReq := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_CURRENCY,\n    }\n    currData, err := account.AccountInfoString(ctx, currReq)\n    if err != nil {\n        return nil, err\n    }\n    info.Currency = currData.RequestedValue\n\n    // Get company\n    compReq := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_COMPANY,\n    }\n    compData, err := account.AccountInfoString(ctx, compReq)\n    if err != nil {\n        return nil, err\n    }\n    info.Company = compData.RequestedValue\n\n    return info, nil\n}\n\n// Usage:\ninfo, err := GetAccountStringInfo(account)\nif err != nil {\n    log.Fatal(err)\n}\n\nfmt.Printf(\"%+v\\n\", info)\n// Output: {Name:John Doe Server:XM-Real 34 Currency:USD Company:XM Global Limited}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#connection-validation","title":"Connection validation","text":"<pre><code>func ValidateConnection(account *mt5.MT5Account, expectedServer string) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    req := &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_SERVER,\n    }\n\n    data, err := account.AccountInfoString(ctx, req)\n    if err != nil {\n        return fmt.Errorf(\"failed to verify server: %w\", err)\n    }\n\n    server := data.RequestedValue\n\n    if server != expectedServer {\n        return fmt.Errorf(\"connected to wrong server: expected %s, got %s\",\n            expectedServer, server)\n    }\n\n    log.Printf(\"Successfully connected to %s\", server)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>AccountSummary - Get all account properties in one call (RECOMMENDED)</li> <li>AccountInfoDouble - Get specific double account properties</li> <li>AccountInfoInteger - Get specific integer account properties</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/","title":"\u2705 Getting an Account Summary","text":"<p>Request: full account summary (<code>AccountSummaryData</code>) from MT5. Fetch all core account metrics in a single call.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.AccountSummary(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>AccountSummary</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>AccountSummary(AccountSummaryRequest) \u2192 AccountSummaryReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperClient.AccountSummary(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Single RPC returning account state: balance, equity, currency, leverage, trade mode, server time.</li> <li>Why you need it. Fast dashboard/CLI status; double\u2011check login/currency/leverage; heartbeat via <code>ServerTime</code>.</li> <li>Sanity check. If you see <code>AccountLogin</code>, <code>AccountCurrency</code>, <code>AccountLeverage</code>, <code>AccountEquity</code> \u2192 connection is alive.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to display real\u2011time account state and sanity\u2011check connectivity:</p> <ul> <li>Dashboard/CLI status in one call.</li> <li>Verify balance &amp; equity before trading.</li> <li>Terminal heartbeat via <code>ServerTime</code> and <code>UtcTimezoneServerTimeShiftMinutes</code>.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 AccountSummary - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// AccountSummary retrieves full account information in a single call.\n// Returns AccountSummaryData with Balance, Equity, Leverage, Currency, and other account properties.\nfunc (a *MT5Account) AccountSummary(\n    ctx context.Context,\n    req *pb.AccountSummaryRequest,\n) (*pb.AccountSummaryData, error)\n</code></pre> <p>Request message:</p> <p><code>AccountSummaryRequest {}</code> (empty message)</p> <p>Reply message:</p> <pre><code>AccountSummaryReply {\n  oneof response {\n    AccountSummaryData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.AccountSummaryRequest</code> Empty request message (pass <code>&amp;pb.AccountSummaryRequest{}</code>) <p>Context options:</p> <pre><code>// 1. With timeout (recommended)\nctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\ndefer cancel()\n\n// 2. With deadline\nctx, cancel := context.WithDeadline(context.Background(), time.Now().Add(3*time.Second))\ndefer cancel()\n\n// 3. With cancellation\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#output-accountsummarydata","title":"\u2b06\ufe0f Output \u2014 <code>AccountSummaryData</code>","text":"Field Type Go Type Description <code>AccountLogin</code> <code>int64</code> <code>int64</code> Trading account login (ID). <code>AccountBalance</code> <code>double</code> <code>float64</code> Balance excluding floating P/L. <code>AccountEquity</code> <code>double</code> <code>float64</code> Equity = balance + floating P/L. <code>AccountUserName</code> <code>string</code> <code>string</code> Account holder name. <code>AccountLeverage</code> <code>int64</code> <code>int64</code> Leverage (e.g., <code>100</code> for 1:100). <code>AccountTradeMode</code> <code>MrpcEnumAccountTradeMode</code> (enum) <code>int32</code> See <code>MrpcEnumAccountTradeMode</code> below. <code>AccountCompanyName</code> <code>string</code> <code>string</code> Broker/company display name. <code>AccountCurrency</code> <code>string</code> <code>string</code> Deposit currency (e.g., <code>\"USD\"</code>, <code>\"EUR\"</code>). <code>ServerTime</code> <code>google.protobuf.Timestamp</code> <code>*timestamppb.Timestamp</code> Server time (UTC) at response. <code>UtcTimezoneServerTimeShiftMinutes</code> <code>int64</code> <code>int64</code> Server offset relative to UTC (minutes). <code>AccountCredit</code> <code>double</code> <code>float64</code> Credit amount."},{"location":"MT5Account/1.%20Account_information/AccountSummary/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":"<p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.MrpcEnumAccountTradeMode_MRPC_ACCOUNT_TRADE_MODE_DEMO</code></p>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#mrpcenumaccounttrademode","title":"<code>MrpcEnumAccountTradeMode</code>","text":"<p>Defined in <code>mt5-term-api-account-helper.proto</code>:</p> <pre><code>enum MrpcEnumAccountTradeMode {\n  MRPC_ACCOUNT_TRADE_MODE_DEMO = 0;     // demo/practice\n  MRPC_ACCOUNT_TRADE_MODE_CONTEST = 1;  // contest\n  MRPC_ACCOUNT_TRADE_MODE_REAL = 2;     // real trading\n}\n</code></pre> <p>Go constants (generated):</p> <pre><code>const (\n    MrpcEnumAccountTradeMode_MRPC_ACCOUNT_TRADE_MODE_DEMO    = 0\n    MrpcEnumAccountTradeMode_MRPC_ACCOUNT_TRADE_MODE_CONTEST = 1\n    MrpcEnumAccountTradeMode_MRPC_ACCOUNT_TRADE_MODE_REAL    = 2\n)\n</code></pre> <p>Helper function to convert enum to string:</p> <pre><code>func AccountTradeModeToString(mode int32) string {\n    switch mode {\n    case 0:\n        return \"DEMO\"\n    case 1:\n        return \"CONTEST\"\n    case 2:\n        return \"REAL\"\n    default:\n        return fmt.Sprintf(\"UNKNOWN(%d)\", mode)\n    }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>10s</code> timeout is applied automatically.</li> <li>Convert timestamp: Use <code>.AsTime()</code> method on <code>timestamppb.Timestamp</code> to convert to <code>time.Time</code>.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/1.%20Account_information/AccountSummary/#1-basic-usage-with-timeout","title":"1) Basic usage with timeout","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    \"github.com/google/uuid\"\n)\n\nfunc main() {\n    account, err := mt5.NewMT5Account(591129415, \"password\", \"server:443\", uuid.New())\n    if err != nil {\n        panic(err)\n    }\n    defer account.Close()\n\n    // Connect first\n    err = account.Connect()\n    if err != nil {\n        panic(err)\n    }\n\n    // Create context with timeout\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Get account summary\n    summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Account Login: %d\\n\", summary.AccountLogin)\n    fmt.Printf(\"Balance: %.2f %s\\n\", summary.AccountBalance, summary.AccountCurrency)\n    fmt.Printf(\"Equity: %.2f\\n\", summary.AccountEquity)\n    fmt.Printf(\"Leverage: 1:%d\\n\", summary.AccountLeverage)\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#2-compact-status-line-for-cli","title":"2) Compact status line for CLI","text":"<pre><code>func PrintAccountStatus(account *mt5.MT5Account) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    s, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        fmt.Printf(\"\u274c Error: %v\\n\", err)\n        return\n    }\n\n    status := fmt.Sprintf(\n        \"Acc %d | %s | Bal %.2f | Eq %.2f | Lev 1:%d | Mode %s\",\n        s.AccountLogin,\n        s.AccountCurrency,\n        s.AccountBalance,\n        s.AccountEquity,\n        s.AccountLeverage,\n        AccountTradeModeToString(s.AccountTradeMode),\n    )\n\n    fmt.Println(status)\n}\n\n// Output: Acc 123456 | USD | Bal 10000.00 | Eq 10050.25 | Lev 1:100 | Mode DEMO\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#3-server-time-with-timezone-shift","title":"3) Server time with timezone shift","text":"<pre><code>func PrintServerTime(account *mt5.MT5Account) {\n    ctx := context.Background()\n\n    s, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        panic(err)\n    }\n\n    // Convert protobuf Timestamp to time.Time\n    serverUTC := s.ServerTime.AsTime()\n\n    // Apply timezone shift\n    shift := time.Duration(s.UtcTimezoneServerTimeShiftMinutes) * time.Minute\n    serverLocal := serverUTC.Add(shift)\n\n    fmt.Printf(\"Server time (UTC): %s\\n\", serverUTC.Format(time.RFC3339))\n    fmt.Printf(\"Server time (local): %s\\n\", serverLocal.Format(time.RFC3339))\n    fmt.Printf(\"Timezone shift: %+d minutes\\n\", s.UtcTimezoneServerTimeShiftMinutes)\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#4-using-context-cancellation","title":"4) Using context cancellation","text":"<pre><code>func main() {\n    account, err := mt5.NewMT5Account(591129415, \"password\", \"server:443\", uuid.New())\n    if err != nil {\n        panic(err)\n    }\n    defer account.Close()\n\n    err = account.Connect()\n    if err != nil {\n        panic(err)\n    }\n\n    // Create cancellable context\n    ctx, cancel := context.WithCancel(context.Background())\n\n    // Cancel after 2 seconds from another goroutine\n    go func() {\n        time.Sleep(2 * time.Second)\n        cancel()\n    }()\n\n    summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        if err == context.Canceled {\n            fmt.Println(\"Request was cancelled\")\n        } else {\n            fmt.Printf(\"Error: %v\\n\", err)\n        }\n        return\n    }\n\n    fmt.Printf(\"Balance: %.2f\\n\", summary.AccountBalance)\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#5-structured-data-model","title":"5) Structured data model","text":"<pre><code>// AccountSummaryView is a clean Go struct for UI/business logic\ntype AccountSummaryView struct {\n    Login        int64\n    Currency     string\n    Balance      float64\n    Equity       float64\n    Leverage     int64\n    TradeMode    string\n    CompanyName  string\n    ServerTime   time.Time\n}\n\nfunc FromProto(data *pb.AccountSummaryData) AccountSummaryView {\n    return AccountSummaryView{\n        Login:       data.AccountLogin,\n        Currency:    data.AccountCurrency,\n        Balance:     data.AccountBalance,\n        Equity:      data.AccountEquity,\n        Leverage:    data.AccountLeverage,\n        TradeMode:   AccountTradeModeToString(data.AccountTradeMode),\n        CompanyName: data.AccountCompanyName,\n        ServerTime:  data.ServerTime.AsTime(),\n    }\n}\n\n// Usage:\nproto, _ := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\nview := FromProto(proto)\nfmt.Printf(\"%+v\\n\", view)\n// Output: {Login:123456 Currency:USD Balance:10000.00 Equity:10050.25 Leverage:100 TradeMode:DEMO CompanyName:BrokerXYZ ServerTime:2025-12-27 22:30:15}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#6-error-handling-with-automatic-reconnect","title":"6) Error handling with automatic reconnect","text":"<pre><code>func GetAccountSummaryWithRetry(account *mt5.MT5Account) (*pb.AccountSummaryData, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    // MT5Account.AccountSummary automatically handles reconnection\n    // via ExecuteWithReconnect wrapper\n    summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        // Error is already retried by ExecuteWithReconnect\n        return nil, fmt.Errorf(\"failed to get account summary: %w\", err)\n    }\n\n    return summary, nil\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/1.%20Account_information/AccountSummary/#health-check","title":"Health check","text":"<pre><code>func IsAccountHealthy(account *mt5.MT5Account) bool {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        return false\n    }\n\n    // Check if we have valid account data\n    return summary.AccountLogin &gt; 0 &amp;&amp;\n           summary.AccountCurrency != \"\" &amp;&amp;\n           summary.AccountLeverage &gt; 0\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#monitor-account-changes","title":"Monitor account changes","text":"<pre><code>func MonitorAccount(account *mt5.MT5Account, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n        summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n        cancel()\n\n        if err != nil {\n            fmt.Printf(\"\u274c Error: %v\\n\", err)\n            continue\n        }\n\n        fmt.Printf(\"[%s] Balance: %.2f | Equity: %.2f\\n\",\n            time.Now().Format(\"15:04:05\"),\n            summary.AccountBalance,\n            summary.AccountEquity,\n        )\n    }\n}\n\n// Usage:\n// MonitorAccount(account, 5*time.Second) // Update every 5 seconds\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>AccountInfoDouble - Get specific double account properties</li> <li>AccountInfoInteger - Get specific integer account properties</li> <li>AccountInfoString - Get specific string account properties</li> </ul>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/","title":"MT5Account \u00b7 Account Information - Overview","text":"<p>Account balance, equity, margin, leverage, currency, and other account properties. Use this page to choose the right API for accessing account state.</p>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":"<ul> <li>AccountSummary - all account info at once (balance, equity, margin, leverage, profit, etc.). Returns <code>MrpcEnumAccountTradeMode</code> enum.</li> <li>AccountInfoDouble - single double value from account (balance, equity, margin, profit, credit, etc.). Uses <code>AccountInfoDoublePropertyType</code> enum as input.</li> <li>AccountInfoInteger - single integer value from account (login, leverage, limit orders, etc.). Uses <code>AccountInfoIntegerPropertyType</code> enum as input.</li> <li>AccountInfoString - single string value from account (name, server, currency, company). Uses <code>AccountInfoStringPropertyType</code> enum as input.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#step-by-step-tutorials","title":"\ud83d\udcda Step-by-step tutorials","text":"<p>Want detailed explanations with line-by-line code breakdown? Check these guides:</p> <ul> <li>AccountSummary - How it works</li> <li>AccountInfoDouble - How it works</li> <li>AccountInfoInteger - How it works</li> <li>AccountInfoString - How it works</li> </ul>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>AccountSummary \u2192 the one-stop shop for complete account snapshot (balance, equity, margin level, etc.). Returns trade mode as ENUM.</li> <li>AccountInfoDouble \u2192 grab one numeric property when you need just balance or margin. Requires property ENUM as input.</li> <li>AccountInfoInteger \u2192 grab one integer property like login number or leverage. Requires property ENUM as input.</li> <li>AccountInfoString \u2192 grab one text property like account name or currency. Requires property ENUM as input.</li> </ul> <p>Rule of thumb: need full snapshot \u2192 <code>AccountSummary</code>; need one specific value \u2192 <code>AccountInfo*</code> (Double/Integer/String).</p> <p>\ud83e\uddf1 ENUM Note: All 4 methods use ENUMs! <code>AccountInfo*</code> methods require property ENUMs as input to select which property to retrieve. <code>AccountSummary</code> returns account trade mode (DEMO/REAL/CONTEST) as an output ENUM.</p>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns ENUMs Used Complete account snapshot (all values) <code>AccountSummary</code> AccountSummaryData Output: <code>MrpcEnumAccountTradeMode</code> One numeric value (balance, equity, margin, etc.) <code>AccountInfoDouble</code> Single <code>float64</code> Input: <code>AccountInfoDoublePropertyType</code> One integer value (login, leverage, etc.) <code>AccountInfoInteger</code> Single <code>int64</code> Input: <code>AccountInfoIntegerPropertyType</code> One text value (name, currency, server, etc.) <code>AccountInfoString</code> Single <code>string</code> Input: <code>AccountInfoStringPropertyType</code>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Margin Level - use <code>AccountInfoDouble(ACCOUNT_MARGIN_LEVEL)</code> to get as percentage.</li> <li>Free Margin - use <code>AccountInfoDouble(ACCOUNT_MARGIN_FREE)</code> for available margin.</li> <li>AccountSummary includes basic info (balance, equity, leverage); for margin use <code>AccountInfoDouble</code>.</li> <li>AccountInfo* methods are lighter if you only need one property.</li> <li>Currency affects how profits are calculated - always check account currency.</li> <li>Leverage determines margin requirements - higher leverage = less margin needed.</li> <li>Context timeout - Remember to set appropriate context deadline for gRPC calls.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Get complete account snapshot\nsummary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"Balance: $%.2f, Equity: $%.2f, Leverage: 1:%d\\n\",\n    summary.AccountBalance,\n    summary.AccountEquity,\n    summary.AccountLeverage)\n</code></pre> <pre><code>// Get single property - account balance\nbalanceData, err := account.AccountInfoDouble(\n    ctx,\n    &amp;pb.AccountInfoDoubleRequest{\n        PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE,\n    },\n)\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"Balance: $%.2f\\n\", balanceData.RequestedValue)\n</code></pre> <pre><code>// Get account leverage\nleverageData, err := account.AccountInfoInteger(\n    ctx,\n    &amp;pb.AccountInfoIntegerRequest{\n        PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_LEVERAGE,\n    },\n)\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"Leverage: 1:%d\\n\", leverageData.RequestedValue)\n</code></pre> <pre><code>// Get account currency\ncurrencyData, err := account.AccountInfoString(\n    ctx,\n    &amp;pb.AccountInfoStringRequest{\n        PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_CURRENCY,\n    },\n)\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"Currency: %s\\n\", currencyData.RequestedValue)\n</code></pre> <pre><code>// Check account health\nsummary, _ := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n\n// Get margin level (AccountSummary doesn't include margin, need separate call)\nmarginData, err := account.AccountInfoDouble(ctx, &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN_LEVEL,\n})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nmarginLevel := marginData.RequestedValue\n\nif marginLevel &lt; 100 {\n    fmt.Println(\"\u26a0\ufe0f Warning: Margin level critical!\")\n} else if marginLevel &lt; 200 {\n    fmt.Println(\"\u26a0\ufe0f Warning: Low margin level\")\n} else {\n    fmt.Println(\"\u2705 Healthy margin level\")\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#enums-used-in-account-information","title":"\ud83e\uddf1 ENUMs used in Account Information","text":"<p>All 4 methods in this group use ENUMs to specify which property to retrieve or to represent account state:</p>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#input-enums-property-selectors","title":"Input ENUMs (Property Selectors)","text":"<p>These ENUMs are used to specify which property you want to retrieve:</p> Method Input ENUM Purpose Values AccountInfoDouble <code>AccountInfoDoublePropertyType</code> Select which double property to get <code>ACCOUNT_BALANCE</code>, <code>ACCOUNT_EQUITY</code>, <code>ACCOUNT_MARGIN</code>, <code>ACCOUNT_MARGIN_FREE</code>, <code>ACCOUNT_MARGIN_LEVEL</code>, <code>ACCOUNT_PROFIT</code>, <code>ACCOUNT_CREDIT</code>, etc. (14 total) AccountInfoInteger <code>AccountInfoIntegerPropertyType</code> Select which integer property to get <code>ACCOUNT_LOGIN</code>, <code>ACCOUNT_LEVERAGE</code>, <code>ACCOUNT_TRADE_MODE</code>, <code>ACCOUNT_LIMIT_ORDERS</code>, <code>ACCOUNT_TRADE_ALLOWED</code>, <code>ACCOUNT_TRADE_EXPERT</code>, etc. (11 total) AccountInfoString <code>AccountInfoStringPropertyType</code> Select which string property to get <code>ACCOUNT_NAME</code>, <code>ACCOUNT_SERVER</code>, <code>ACCOUNT_CURRENCY</code>, <code>ACCOUNT_COMPANY</code> (4 total) <p>Usage in code:</p> <pre><code>// Example 1: Get balance using AccountInfoDoublePropertyType enum\nreq := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE,\n}\ndata, _ := account.AccountInfoDouble(ctx, req)\nfmt.Printf(\"Balance: %.2f\\n\", data.RequestedValue)\n\n// Example 2: Get leverage using AccountInfoIntegerPropertyType enum\nreq := &amp;pb.AccountInfoIntegerRequest{\n    PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_LEVERAGE,\n}\ndata, _ := account.AccountInfoInteger(ctx, req)\nfmt.Printf(\"Leverage: 1:%d\\n\", data.RequestedValue)\n\n// Example 3: Get currency using AccountInfoStringPropertyType enum\nreq := &amp;pb.AccountInfoStringRequest{\n    PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_CURRENCY,\n}\ndata, _ := account.AccountInfoString(ctx, req)\nfmt.Printf(\"Currency: %s\\n\", data.RequestedValue)\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#output-enums-return-values","title":"Output ENUMs (Return Values)","text":"<p>These ENUMs are returned in the response to represent account state:</p> Method Output ENUM Field Name Purpose Values AccountSummary <code>MrpcEnumAccountTradeMode</code> <code>AccountTradeMode</code> Indicates account type <code>MRPC_ACCOUNT_TRADE_MODE_DEMO</code> (0)<code>MRPC_ACCOUNT_TRADE_MODE_CONTEST</code> (1)<code>MRPC_ACCOUNT_TRADE_MODE_REAL</code> (2) AccountInfoInteger Various ENUMs returned as int64 <code>requested_value</code> When querying <code>ACCOUNT_TRADE_MODE</code> property, value represents account type Same as above (0=DEMO, 1=CONTEST, 2=REAL) <p>Usage in code:</p> <pre><code>// Example 1: AccountSummary returns trade mode as enum\nsummary, _ := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n\nswitch summary.AccountTradeMode {\ncase pb.MrpcEnumAccountTradeMode_MRPC_ACCOUNT_TRADE_MODE_DEMO:\n    fmt.Println(\"Demo account\")\ncase pb.MrpcEnumAccountTradeMode_MRPC_ACCOUNT_TRADE_MODE_REAL:\n    fmt.Println(\"Real account\")\n}\n\n// Example 2: AccountInfoInteger can return ENUM values as int64\nreq := &amp;pb.AccountInfoIntegerRequest{\n    PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_TRADE_MODE,\n}\ndata, _ := account.AccountInfoInteger(ctx, req)\n\n// data.RequestedValue will be 0 (DEMO), 1 (CONTEST), or 2 (REAL)\nswitch data.RequestedValue {\ncase 0:\n    fmt.Println(\"Demo\")\ncase 2:\n    fmt.Println(\"Real\")\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#important-notes-about-enums","title":"\ud83d\udcdd Important Notes about ENUMs","text":"<ul> <li>Input ENUMs are required - You must specify which property to retrieve using the appropriate enum constant</li> <li>Full enum names in Go - Always use the full prefixed name: <code>pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE</code></li> <li>Output ENUMs - AccountSummary directly returns <code>MrpcEnumAccountTradeMode</code> as a typed field</li> <li>AccountInfoInteger special case - Some integer properties return values that represent ENUMs (like TRADE_MODE), but they're returned as <code>int64</code>, not typed enums</li> <li>No ENUMs for AccountInfoDouble/String outputs - These always return simple <code>float64</code> or <code>string</code> values</li> </ul>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#see-also","title":"See also","text":"<ul> <li>Symbol Information: SymbolInfoTick - get current prices</li> <li>Trading: OrderSend - place orders</li> <li>Positions: PositionsTotal - count open positions</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/","title":"\u2705 Check Symbol Existence","text":"<p>Request: check if specified symbol exists in MetaTrader 5 terminal. Returns existence flag and custom symbol indicator.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolExist(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolExist</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolExist(SymbolExistRequest) \u2192 SymbolExistReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolExist(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Checks if a trading symbol exists in the MT5 terminal.</li> <li>Why you need it. Validate symbol names before requesting data or placing orders.</li> <li>Custom symbols. IsCustom flag indicates whether the symbol is user-created or standard broker symbol.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Validate symbol names before trading operations</li> <li>Detect typos in symbol names</li> <li>Identify custom symbols in the terminal</li> <li>Build symbol selection and validation logic</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolExist - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolExist checks if a symbol with specified name exists.\n// Returns Exist flag and IsCustom flag indicating if it's a custom symbol.\nfunc (a *MT5Account) SymbolExist(\n    ctx context.Context,\n    req *pb.SymbolExistRequest,\n) (*pb.SymbolExistData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolExistRequest {\n  string Symbol = 1;  // Symbol name to check (e.g., \"EURUSD\")\n}\n</code></pre> <p>Reply message:</p> <pre><code>SymbolExistReply {\n  oneof response {\n    SymbolExistData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolExistRequest</code> Request with Symbol name <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Symbol name to check (e.g., \"EURUSD\")"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#output-symbolexistdata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolExistData</code>","text":"Field Type Go Type Description <code>Exists</code> <code>bool</code> <code>bool</code> True if symbol exists in terminal <code>IsCustom</code> <code>bool</code> <code>bool</code> True if it's a custom (user-defined) symbol"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Case sensitivity: Symbol names are typically case-insensitive but should match broker convention.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#1-check-if-symbol-exists","title":"1) Check if symbol exists","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolExist(ctx, &amp;pb.SymbolExistRequest{\n        Symbol: \"EURUSD\",\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    if data.Exists {\n        fmt.Printf(\"Symbol EURUSD exists (custom: %v)\\n\", data.IsCustom)\n    } else {\n        fmt.Println(\"Symbol EURUSD not found\")\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#2-validate-symbol-before-trading","title":"2) Validate symbol before trading","text":"<pre><code>func ValidateAndTrade(account *mt5.MT5Account, symbol string, volume float64) error {\n    ctx := context.Background()\n\n    // First, check if symbol exists\n    existData, err := account.SymbolExist(ctx, &amp;pb.SymbolExistRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return fmt.Errorf(\"failed to check symbol: %w\", err)\n    }\n\n    if !existData.Exists {\n        return fmt.Errorf(\"symbol %s does not exist\", symbol)\n    }\n\n    // Proceed with trading\n    fmt.Printf(\"Symbol %s validated, proceeding with order...\\n\", symbol)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#3-check-multiple-symbols","title":"3) Check multiple symbols","text":"<pre><code>func CheckSymbols(account *mt5.MT5Account, symbols []string) map[string]bool {\n    ctx := context.Background()\n    results := make(map[string]bool)\n\n    for _, symbol := range symbols {\n        data, err := account.SymbolExist(ctx, &amp;pb.SymbolExistRequest{\n            Symbol: symbol,\n        })\n        if err != nil {\n            results[symbol] = false\n            continue\n        }\n        results[symbol] = data.Exists\n    }\n\n    return results\n}\n\n// Usage:\n// symbols := []string{\"EURUSD\", \"GBPUSD\", \"INVALID\", \"BTCUSD\"}\n// results := CheckSymbols(account, symbols)\n// for symbol, exists := range results {\n//     fmt.Printf(\"%s: %v\\n\", symbol, exists)\n// }\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#4-filter-custom-symbols","title":"4) Filter custom symbols","text":"<pre><code>func GetCustomSymbols(account *mt5.MT5Account, symbols []string) []string {\n    ctx := context.Background()\n    customSymbols := []string{}\n\n    for _, symbol := range symbols {\n        data, err := account.SymbolExist(ctx, &amp;pb.SymbolExistRequest{\n            Symbol: symbol,\n        })\n        if err != nil || !data.Exists {\n            continue\n        }\n\n        if data.IsCustom {\n            customSymbols = append(customSymbols, symbol)\n        }\n    }\n\n    return customSymbols\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#5-symbol-existence-guard","title":"5) Symbol existence guard","text":"<pre><code>type SymbolValidator struct {\n    account *mt5.MT5Account\n    cache   map[string]bool\n}\n\nfunc (v *SymbolValidator) IsValid(symbol string) (bool, error) {\n    // Check cache first\n    if exists, ok := v.cache[symbol]; ok {\n        return exists, nil\n    }\n\n    // Query MT5\n    ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second)\n    defer cancel()\n\n    data, err := v.account.SymbolExist(ctx, &amp;pb.SymbolExistRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return false, err\n    }\n\n    // Cache result\n    v.cache[symbol] = data.Exists\n    return data.Exists, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#pre-validation-before-operations","title":"Pre-validation before operations","text":"<pre><code>func SafeSymbolOperation(account *mt5.MT5Account, symbol string) error {\n    ctx := context.Background()\n\n    // Validate symbol exists\n    existData, err := account.SymbolExist(ctx, &amp;pb.SymbolExistRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return fmt.Errorf(\"validation error: %w\", err)\n    }\n\n    if !existData.Exists {\n        return fmt.Errorf(\"symbol %s not available\", symbol)\n    }\n\n    // Proceed with actual operation\n    fmt.Printf(\"Operating on %s (custom: %v)\\n\", symbol, existData.IsCustom)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#symbol-existence-checker-with-timeout","title":"Symbol existence checker with timeout","text":"<pre><code>func QuickSymbolCheck(account *mt5.MT5Account, symbol string) bool {\n    ctx, cancel := context.WithTimeout(context.Background(), 1*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolExist(ctx, &amp;pb.SymbolExistRequest{\n        Symbol: symbol,\n    })\n\n    return err == nil &amp;&amp; data.Exists\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolsTotal - Get total count of available symbols</li> <li>SymbolName - Get symbol name by position index</li> <li>SymbolSelect - Add/remove symbols from Market Watch</li> <li>SymbolInfoTick - Get last tick data for symbol</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/","title":"\u2705 Get Symbol Double Property","text":"<p>Request: get numeric (double) property of trading symbol, such as BID, ASK, POINT, volumes, spreads and other trading parameters.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolInfoDouble(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoDouble</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoDouble(SymbolInfoDoubleRequest) \u2192 SymbolInfoDoubleReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolInfoDouble(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieves numeric (double) properties of a trading symbol.</li> <li>Why you need it. Get current prices, point size, volume limits, and other trading parameters.</li> <li>Property ID required. Must specify which property to retrieve using PropertyId enum.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Get current Bid/Ask prices</li> <li>Retrieve point size for price calculations</li> <li>Check minimum/maximum trading volumes</li> <li>Obtain tick size and value for order placement</li> <li>Calculate trading parameters</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolInfoDouble - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolInfoDouble retrieves a double-type symbol property.\n// Use PropertyId to specify which property (BID, ASK, POINT, VOLUME_MIN, etc).\nfunc (a *MT5Account) SymbolInfoDouble(\n    ctx context.Context,\n    req *pb.SymbolInfoDoubleRequest,\n) (*pb.SymbolInfoDoubleData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolInfoDoubleRequest {\n  string Symbol = 1;       // Symbol name\n  int32 PropertyId = 2;    // Property identifier (BID, ASK, POINT, etc)\n}\n</code></pre> <p>Reply message:</p> <pre><code>SymbolInfoDoubleReply {\n  oneof response {\n    SymbolInfoDoubleData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolInfoDoubleRequest</code> Request with Symbol and PropertyId <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Symbol name (e.g., \"EURUSD\") <code>PropertyId</code> <code>int32</code> Property identifier from SymbolInfoDoubleProperty enum <p>PropertyId enum values (SymbolInfoDoubleProperty):</p> Constant Value Description <code>SYMBOL_BID</code> 0 Current Bid price <code>SYMBOL_BIDHIGH</code> 1 Highest Bid of the day <code>SYMBOL_BIDLOW</code> 2 Lowest Bid of the day <code>SYMBOL_ASK</code> 3 Current Ask price <code>SYMBOL_ASKHIGH</code> 4 Highest Ask of the day <code>SYMBOL_ASKLOW</code> 5 Lowest Ask of the day <code>SYMBOL_LAST</code> 6 Last deal price <code>SYMBOL_LASTHIGH</code> 7 Highest Last price of the day <code>SYMBOL_LASTLOW</code> 8 Lowest Last price of the day <code>SYMBOL_VOLUME_REAL</code> 9 Last deal volume <code>SYMBOL_VOLUMEHIGH_REAL</code> 10 Maximum volume of the day <code>SYMBOL_VOLUMELOW_REAL</code> 11 Minimum volume of the day <code>SYMBOL_OPTION_STRIKE</code> 12 Option strike price <code>SYMBOL_POINT</code> 13 Point size (smallest price change) <code>SYMBOL_TRADE_TICK_VALUE</code> 14 Tick value in account currency <code>SYMBOL_TRADE_TICK_VALUE_PROFIT</code> 15 Tick value for profit position <code>SYMBOL_TRADE_TICK_VALUE_LOSS</code> 16 Tick value for loss position <code>SYMBOL_TRADE_TICK_SIZE</code> 17 Minimum price change <code>SYMBOL_TRADE_CONTRACT_SIZE</code> 18 Contract size (lot size in base currency) <code>SYMBOL_TRADE_ACCRUED_INTEREST</code> 19 Accrued interest <code>SYMBOL_TRADE_FACE_VALUE</code> 20 Face value (for bonds) <code>SYMBOL_TRADE_LIQUIDITY_RATE</code> 21 Liquidity rate <code>SYMBOL_VOLUME_MIN</code> 22 Minimum volume for trading <code>SYMBOL_VOLUME_MAX</code> 23 Maximum volume for trading <code>SYMBOL_VOLUME_STEP</code> 24 Volume step (lot size increment) <code>SYMBOL_VOLUME_LIMIT</code> 25 Maximum total volume of open positions <code>SYMBOL_SWAP_LONG</code> 26 Swap for long positions <code>SYMBOL_SWAP_SHORT</code> 27 Swap for short positions <code>SYMBOL_SWAP_SUNDAY</code> 28 Triple swap day - Sunday <code>SYMBOL_SWAP_MONDAY</code> 29 Triple swap day - Monday <code>SYMBOL_SWAP_TUESDAY</code> 30 Triple swap day - Tuesday <code>SYMBOL_SWAP_WEDNESDAY</code> 31 Triple swap day - Wednesday <code>SYMBOL_SWAP_THURSDAY</code> 32 Triple swap day - Thursday <code>SYMBOL_SWAP_FRIDAY</code> 33 Triple swap day - Friday <code>SYMBOL_SWAP_SATURDAY</code> 34 Triple swap day - Saturday <code>SYMBOL_MARGIN_INITIAL</code> 35 Initial margin <code>SYMBOL_MARGIN_MAINTENANCE</code> 36 Maintenance margin <code>SYMBOL_SESSION_VOLUME</code> 37 Summary volume of the current session <code>SYMBOL_SESSION_TURNOVER</code> 38 Summary turnover of the current session <code>SYMBOL_SESSION_INTEREST</code> 39 Summary open interest <code>SYMBOL_SESSION_BUY_ORDERS_VOLUME</code> 40 Current volume of Buy orders <code>SYMBOL_SESSION_SELL_ORDERS_VOLUME</code> 41 Current volume of Sell orders <code>SYMBOL_SESSION_OPEN</code> 42 Open price of the current session <code>SYMBOL_SESSION_CLOSE</code> 43 Close price of the current session <code>SYMBOL_SESSION_AW</code> 44 Average weighted price of the current session <code>SYMBOL_SESSION_PRICE_SETTLEMENT</code> 45 Settlement price of the current session <code>SYMBOL_SESSION_PRICE_LIMIT_MIN</code> 46 Minimum price of the current session <code>SYMBOL_SESSION_PRICE_LIMIT_MAX</code> 47 Maximum price of the current session <code>SYMBOL_MARGIN_HEDGED</code> 48 Hedged margin <code>SYMBOL_PRICE_CHANGE</code> 49 Change of price in % <code>SYMBOL_PRICE_VOLATILITY</code> 50 Price volatility in % <code>SYMBOL_PRICE_THEORETICAL</code> 51 Theoretical option price <code>SYMBOL_PRICE_DELTA</code> 52 Option/warrant delta <code>SYMBOL_PRICE_THETA</code> 53 Option/warrant theta <code>SYMBOL_PRICE_GAMMA</code> 54 Option/warrant gamma <code>SYMBOL_PRICE_VEGA</code> 55 Option/warrant vega <code>SYMBOL_PRICE_RHO</code> 56 Option/warrant rho <code>SYMBOL_PRICE_OMEGA</code> 57 Option/warrant omega <code>SYMBOL_PRICE_SENSITIVITY</code> 58 Option/warrant sensitivity <code>SYMBOL_COUNT</code> 59 Total number of properties (not used)"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#output-symbolinfodoubledata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolInfoDoubleData</code>","text":"Field Type Go Type Description <code>Value</code> <code>double</code> <code>float64</code> The requested double property value"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Synchronization: Symbol should be synchronized for accurate real-time prices.</li> <li>Performance: For multiple properties, consider using SymbolParamsMany instead.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#1-get-current-bid-price","title":"1) Get current Bid price","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     \"EURUSD\",\n        PropertyId: 0, // SYMBOL_BID\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"EURUSD Bid: %.5f\\n\", data.Value)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#2-get-bid-and-ask-spread","title":"2) Get Bid and Ask spread","text":"<pre><code>func GetSpread(account *mt5.MT5Account, symbol string) (float64, error) {\n    ctx := context.Background()\n\n    // Get Bid\n    bidData, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 0, // SYMBOL_BID\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    // Get Ask\n    askData, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 3, // SYMBOL_ASK\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    spread := askData.Value - bidData.Value\n    return spread, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#3-get-point-size-for-calculations","title":"3) Get point size for calculations","text":"<pre><code>func GetPointSize(account *mt5.MT5Account, symbol string) (float64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 13, // SYMBOL_POINT\n    })\n    if err != nil {\n        return 0, fmt.Errorf(\"failed to get point: %w\", err)\n    }\n\n    return data.Value, nil\n}\n\n// Usage for stop-loss calculation:\n// point, _ := GetPointSize(account, \"EURUSD\")\n// slDistance := 50 * point  // 50 pips\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#4-check-minimum-trading-volume","title":"4) Check minimum trading volume","text":"<pre><code>func GetVolumeConstraints(account *mt5.MT5Account, symbol string) (min, max, step float64, err error) {\n    ctx := context.Background()\n\n    // Get minimum volume\n    minData, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 22, // SYMBOL_VOLUME_MIN\n    })\n    if err != nil {\n        return 0, 0, 0, err\n    }\n\n    // Get maximum volume\n    maxData, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 23, // SYMBOL_VOLUME_MAX\n    })\n    if err != nil {\n        return 0, 0, 0, err\n    }\n\n    // Get volume step\n    stepData, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 24, // SYMBOL_VOLUME_STEP\n    })\n    if err != nil {\n        return 0, 0, 0, err\n    }\n\n    return minData.Value, maxData.Value, stepData.Value, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#5-calculate-pip-value","title":"5) Calculate pip value","text":"<pre><code>func CalculatePipValue(account *mt5.MT5Account, symbol string) (float64, error) {\n    ctx := context.Background()\n\n    // Get tick size\n    tickSizeData, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 17, // SYMBOL_TRADE_TICK_SIZE\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    // Get tick value\n    tickValueData, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 14, // SYMBOL_TRADE_TICK_VALUE\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    // Get point\n    pointData, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 13, // SYMBOL_POINT\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    // Pip value = (tick value / tick size) * point\n    pipValue := (tickValueData.Value / tickSizeData.Value) * pointData.Value\n    return pipValue, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#6-monitor-price-changes","title":"6) Monitor price changes","text":"<pre><code>func MonitorPrice(account *mt5.MT5Account, symbol string, interval time.Duration) {\n    ctx := context.Background()\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    var lastBid float64\n\n    for range ticker.C {\n        data, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n            Symbol:     symbol,\n            PropertyId: 0, // SYMBOL_BID\n        })\n\n        if err != nil {\n            fmt.Printf(\"Error: %v\\n\", err)\n            continue\n        }\n\n        if lastBid != 0 {\n            change := data.Value - lastBid\n            fmt.Printf(\"[%s] %s: %.5f (change: %+.5f)\\n\",\n                time.Now().Format(\"15:04:05\"),\n                symbol,\n                data.Value,\n                change,\n            )\n        }\n\n        lastBid = data.Value\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#get-current-price-with-validation","title":"Get current price with validation","text":"<pre><code>func GetCurrentPrice(account *mt5.MT5Account, symbol string, isBid bool) (float64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second)\n    defer cancel()\n\n    propertyId := int32(1) // BID\n    if !isBid {\n        propertyId = 2 // ASK\n    }\n\n    data, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: propertyId,\n    })\n\n    if err != nil {\n        return 0, fmt.Errorf(\"failed to get price: %w\", err)\n    }\n\n    if data.Value &lt;= 0 {\n        return 0, fmt.Errorf(\"invalid price: %.5f\", data.Value)\n    }\n\n    return data.Value, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#validate-lot-size","title":"Validate lot size","text":"<pre><code>func ValidateLotSize(account *mt5.MT5Account, symbol string, volume float64) (float64, error) {\n    ctx := context.Background()\n\n    min, max, step, err := GetVolumeConstraints(account, symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    if volume &lt; min {\n        return min, nil\n    }\n    if volume &gt; max {\n        return max, nil\n    }\n\n    // Round to step\n    adjusted := math.Round(volume/step) * step\n    return adjusted, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolInfoInteger - Get integer symbol properties</li> <li>SymbolInfoString - Get string symbol properties</li> <li>SymbolParamsMany - Get all symbol parameters at once</li> <li>SymbolInfoTick - Get tick data with prices</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/","title":"\u2705 Get Symbol Integer Property","text":"<p>Request: get integer property of trading symbol, such as decimal places count (digits), spread, stops level and other parameters.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolInfoInteger(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoInteger</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoInteger(SymbolInfoIntegerRequest) \u2192 SymbolInfoIntegerReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolInfoInteger(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieves integer properties of a trading symbol.</li> <li>Why you need it. Get precision (digits), spread, stop levels, and trading mode information.</li> <li>Property ID required. Must specify which property to retrieve using PropertyId enum.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Get symbol decimal precision (digits)</li> <li>Check current spread in points</li> <li>Retrieve minimum stop-loss/take-profit distance</li> <li>Validate trading restrictions</li> <li>Determine order execution mode</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolInfoInteger - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolInfoInteger retrieves an integer-type symbol property.\n// Use PropertyId to specify which property (DIGITS, SPREAD, STOPS_LEVEL, etc).\nfunc (a *MT5Account) SymbolInfoInteger(\n    ctx context.Context,\n    req *pb.SymbolInfoIntegerRequest,\n) (*pb.SymbolInfoIntegerData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolInfoIntegerRequest {\n  string Symbol = 1;       // Symbol name\n  int32 PropertyId = 2;    // Property identifier (DIGITS, SPREAD, etc)\n}\n</code></pre> <p>Reply message:</p> <pre><code>SymbolInfoIntegerReply {\n  oneof response {\n    SymbolInfoIntegerData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolInfoIntegerRequest</code> Request with Symbol and PropertyId <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Symbol name (e.g., \"EURUSD\") <code>PropertyId</code> <code>int32</code> Property identifier from SymbolInfoIntegerProperty enum <p>PropertyId enum values (SymbolInfoIntegerProperty):</p> Constant Value Description <code>SYMBOL_SUBSCRIPTION_DELAY</code> 0 Subscription delay in milliseconds <code>SYMBOL_SECTOR</code> 1 Economic sector (enum SYMBOL_SECTOR) <code>SYMBOL_INDUSTRY</code> 2 Industry (enum SYMBOL_INDUSTRY) <code>SYMBOL_CUSTOM</code> 3 Custom symbol flag (0=standard, 1=custom) <code>SYMBOL_BACKGROUND_COLOR</code> 4 Background color in Market Watch <code>SYMBOL_CHART_MODE</code> 5 Price chart mode (SYMBOL_CHART_MODE enum) <code>SYMBOL_EXIST</code> 6 Symbol exists (0=no, 1=yes) <code>SYMBOL_SELECT</code> 7 Symbol selected in Market Watch (0=no, 1=yes) <code>SYMBOL_VISIBLE</code> 8 Symbol visible in Market Watch (0=no, 1=yes) <code>SYMBOL_SESSION_DEALS</code> 9 Number of deals in current session <code>SYMBOL_SESSION_BUY_ORDERS</code> 10 Number of Buy orders in current session <code>SYMBOL_SESSION_SELL_ORDERS</code> 11 Number of Sell orders in current session <code>SYMBOL_VOLUME</code> 12 Last deal volume <code>SYMBOL_VOLUMEHIGH</code> 13 Maximum volume of the day <code>SYMBOL_VOLUMELOW</code> 14 Minimum volume of the day <code>SYMBOL_TIME</code> 15 Last quote time (seconds since 1970.01.01) <code>SYMBOL_TIME_MSC</code> 16 Last quote time in milliseconds <code>SYMBOL_DIGITS</code> 17 Number of decimal places <code>SYMBOL_SPREAD_FLOAT</code> 18 Floating spread flag (0=fixed, 1=floating) <code>SYMBOL_SPREAD</code> 19 Current spread in points <code>SYMBOL_TICKS_BOOKDEPTH</code> 20 Maximum depth of market (DOM) <code>SYMBOL_TRADE_CALC_MODE</code> 21 Margin calculation mode (SYMBOL_CALC_MODE enum) <code>SYMBOL_TRADE_MODE</code> 22 Trade execution mode (SYMBOL_TRADE_MODE enum) <code>SYMBOL_START_TIME</code> 23 Date of symbol trade beginning <code>SYMBOL_EXPIRATION_TIME</code> 24 Date of symbol trade end <code>SYMBOL_TRADE_STOPS_LEVEL</code> 25 Minimum distance for SL/TP in points <code>SYMBOL_TRADE_FREEZE_LEVEL</code> 26 Order freeze level in points <code>SYMBOL_TRADE_EXEMODE</code> 27 Order execution type (SYMBOL_ORDER_EXEMODE enum) <code>SYMBOL_SWAP_MODE</code> 28 Swap calculation mode (SYMBOL_SWAP_MODE enum) <code>SYMBOL_SWAP_ROLLOVER3DAYS</code> 29 Day of week for triple swap (SYMBOL_SWAP_ROLLOVER enum) <code>SYMBOL_MARGIN_HEDGED_USE_LEG</code> 30 Calculating hedged margin using larger leg <code>SYMBOL_EXPIRATION_MODE</code> 31 Allowed order expiration modes <code>SYMBOL_FILLING_MODE</code> 32 Allowed order filling modes <code>SYMBOL_ORDER_MODE</code> 33 Allowed order types <code>SYMBOL_ORDER_GTC_MODE</code> 34 StopLoss/TakeProfit mode (ORDER_GTC_MODE enum) <code>SYMBOL_OPTION_MODE</code> 35 Option type (SYMBOL_OPTION_MODE enum) <code>SYMBOL_OPTION_RIGHT</code> 36 Option right (Call/Put)"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#output-symbolinfointegerdata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolInfoIntegerData</code>","text":"Field Type Go Type Description <code>Value</code> <code>int64</code> <code>int64</code> The requested integer property value"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Spread variability: Spread can change dynamically during trading sessions.</li> <li>Stop levels: STOPS_LEVEL is critical for placing orders with SL/TP.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#1-get-symbol-digits-decimal-precision","title":"1) Get symbol digits (decimal precision)","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n        Symbol:     \"EURUSD\",\n        PropertyId: 17, // SYMBOL_DIGITS\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"EURUSD Digits: %d\\n\", data.Value)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#2-get-current-spread","title":"2) Get current spread","text":"<pre><code>func GetSpreadPoints(account *mt5.MT5Account, symbol string) (int64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n        Symbol:     symbol,\n        PropertyId: 18, // SYMBOL_SPREAD\n    })\n    if err != nil {\n        return 0, fmt.Errorf(\"failed to get spread: %w\", err)\n    }\n\n    return data.Value, nil\n}\n\n// Usage:\n// spread, _ := GetSpreadPoints(account, \"EURUSD\")\n// fmt.Printf(\"Spread: %d points\\n\", spread)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#3-check-minimum-stops-level","title":"3) Check minimum stops level","text":"<pre><code>func GetStopsLevel(account *mt5.MT5Account, symbol string) (int64, error) {\n    ctx := context.Background()\n\n    data, err := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n        Symbol:     symbol,\n        PropertyId: 25, // SYMBOL_TRADE_STOPS_LEVEL\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    return data.Value, nil\n}\n\n// Usage for SL/TP validation:\n// stopsLevel, _ := GetStopsLevel(account, \"EURUSD\")\n// fmt.Printf(\"Minimum SL/TP distance: %d points\\n\", stopsLevel)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#4-validate-stop-loss-distance","title":"4) Validate stop-loss distance","text":"<pre><code>func ValidateStopLoss(account *mt5.MT5Account, symbol string, currentPrice, slPrice float64) error {\n    ctx := context.Background()\n\n    // Get stops level\n    stopsData, err := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n        Symbol:     symbol,\n        PropertyId: 25, // SYMBOL_TRADE_STOPS_LEVEL\n    })\n    if err != nil {\n        return err\n    }\n\n    // Get point size\n    pointData, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 13, // SYMBOL_POINT\n    })\n    if err != nil {\n        return err\n    }\n\n    // Calculate distance in points\n    distance := math.Abs(currentPrice-slPrice) / pointData.Value\n    minDistance := float64(stopsData.Value)\n\n    if distance &lt; minDistance {\n        return fmt.Errorf(\"SL too close: %.0f points, minimum: %.0f points\", distance, minDistance)\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#5-get-trade-execution-mode","title":"5) Get trade execution mode","text":"<pre><code>func GetTradeMode(account *mt5.MT5Account, symbol string) (string, error) {\n    ctx := context.Background()\n\n    data, err := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n        Symbol:     symbol,\n        PropertyId: 22, // SYMBOL_TRADE_MODE\n    })\n    if err != nil {\n        return \"\", err\n    }\n\n    modes := map[int64]string{\n        0: \"DISABLED\",\n        1: \"LONGONLY\",\n        2: \"SHORTONLY\",\n        3: \"CLOSEONLY\",\n        4: \"FULL\",\n    }\n\n    mode, ok := modes[data.Value]\n    if !ok {\n        return \"UNKNOWN\", nil\n    }\n\n    return mode, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#6-check-if-trading-is-allowed","title":"6) Check if trading is allowed","text":"<pre><code>func IsTradingAllowed(account *mt5.MT5Account, symbol string) (bool, error) {\n    ctx := context.Background()\n\n    data, err := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n        Symbol:     symbol,\n        PropertyId: 22, // SYMBOL_TRADE_MODE\n    })\n    if err != nil {\n        return false, err\n    }\n\n    // 0 = disabled, 1 = long only, 2 = short only, 3 = close only, 4 = full\n    return data.Value &gt; 0, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#format-price-with-correct-digits","title":"Format price with correct digits","text":"<pre><code>func FormatPrice(account *mt5.MT5Account, symbol string, price float64) (string, error) {\n    ctx := context.Background()\n\n    data, err := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n        Symbol:     symbol,\n        PropertyId: 17, // SYMBOL_DIGITS\n    })\n    if err != nil {\n        return \"\", err\n    }\n\n    format := fmt.Sprintf(\"%%.%df\", data.Value)\n    return fmt.Sprintf(format, price), nil\n}\n\n// Usage:\n// formatted, _ := FormatPrice(account, \"EURUSD\", 1.12345678)\n// fmt.Println(formatted) // \"1.12346\" (if digits=5)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#calculate-minimum-sltp-distance","title":"Calculate minimum SL/TP distance","text":"<pre><code>func CalculateMinStopDistance(account *mt5.MT5Account, symbol string) (float64, error) {\n    ctx := context.Background()\n\n    // Get stops level in points\n    stopsData, err := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n        Symbol:     symbol,\n        PropertyId: 25, // SYMBOL_TRADE_STOPS_LEVEL\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    // Get point size\n    pointData, err := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n        Symbol:     symbol,\n        PropertyId: 13, // SYMBOL_POINT\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    // Distance in price units\n    distance := float64(stopsData.Value) * pointData.Value\n    return distance, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolInfoDouble - Get double symbol properties</li> <li>SymbolInfoString - Get string symbol properties</li> <li>SymbolParamsMany - Get all symbol parameters at once</li> <li>OrderCheck - Validate order parameters</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/","title":"\u2705 Get Symbol String Property","text":"<p>Request: get string property of trading symbol, such as description, base currency, profit currency and other text parameters.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolInfoString(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoString</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoString(SymbolInfoStringRequest) \u2192 SymbolInfoStringReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolInfoString(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieves text (string) properties of a trading symbol.</li> <li>Why you need it. Get symbol description, currency information, and metadata.</li> <li>Property ID required. Must specify which property to retrieve using PropertyId enum.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Get symbol full description/name</li> <li>Identify base and profit currencies</li> <li>Build symbol information displays</li> <li>Categorize symbols by currency pairs</li> <li>Validate currency compatibility</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolInfoString - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolInfoString retrieves a string-type symbol property.\n// Use PropertyId to specify which property (DESCRIPTION, CURRENCY_BASE, etc).\nfunc (a *MT5Account) SymbolInfoString(\n    ctx context.Context,\n    req *pb.SymbolInfoStringRequest,\n) (*pb.SymbolInfoStringData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolInfoStringRequest {\n  string Symbol = 1;       // Symbol name\n  int32 PropertyId = 2;    // Property identifier (DESCRIPTION, CURRENCY_BASE, etc)\n}\n</code></pre> <p>Reply message:</p> <pre><code>SymbolInfoStringReply {\n  oneof response {\n    SymbolInfoStringData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolInfoStringRequest</code> Request with Symbol and PropertyId <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Symbol name (e.g., \"EURUSD\") <code>PropertyId</code> <code>int32</code> Property identifier from SymbolInfoStringProperty enum <p>PropertyId enum values (SymbolInfoStringProperty):</p> Constant Value Description <code>SYMBOL_BASIS</code> 0 Underlying asset of derivative <code>SYMBOL_CATEGORY</code> 1 Symbol category <code>SYMBOL_COUNTRY</code> 2 Country the symbol belongs to <code>SYMBOL_SECTOR_NAME</code> 3 Economic sector name <code>SYMBOL_INDUSTRY_NAME</code> 4 Industry name <code>SYMBOL_CURRENCY_BASE</code> 5 Base currency (first currency in pair) <code>SYMBOL_CURRENCY_PROFIT</code> 6 Profit currency (second currency in pair) <code>SYMBOL_CURRENCY_MARGIN</code> 7 Margin calculation currency <code>SYMBOL_BANK</code> 8 Source of last quote (bank/exchange) <code>SYMBOL_DESCRIPTION</code> 9 Symbol description/full name <code>SYMBOL_EXCHANGE</code> 10 Exchange the symbol is traded on <code>SYMBOL_FORMULA</code> 11 Formula for custom symbol price calculation <code>SYMBOL_ISIN</code> 12 International Securities Identification Number <code>SYMBOL_PAGE</code> 13 Web page URL with symbol information <code>SYMBOL_PATH</code> 14 Symbol path in Market Watch tree"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#output-symbolinfostringdata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolInfoStringData</code>","text":"Field Type Go Type Description <code>Value</code> <code>string</code> <code>string</code> The requested string property value"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Localization: Symbol descriptions may vary based on broker's language settings.</li> <li>Currency codes: Base and profit currencies are returned as 3-letter ISO codes (e.g., \"USD\", \"EUR\").</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#1-get-symbol-description","title":"1) Get symbol description","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     \"EURUSD\",\n        PropertyId: 9, // SYMBOL_DESCRIPTION\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"EURUSD Description: %s\\n\", data.Value)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#2-get-base-currency","title":"2) Get base currency","text":"<pre><code>func GetBaseCurrency(account *mt5.MT5Account, symbol string) (string, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 5, // SYMBOL_CURRENCY_BASE\n    })\n    if err != nil {\n        return \"\", fmt.Errorf(\"failed to get base currency: %w\", err)\n    }\n\n    return data.Value, nil\n}\n\n// Usage:\n// baseCurrency, _ := GetBaseCurrency(account, \"EURUSD\")\n// fmt.Printf(\"Base currency: %s\\n\", baseCurrency) // \"EUR\"\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#3-get-profit-currency","title":"3) Get profit currency","text":"<pre><code>func GetProfitCurrency(account *mt5.MT5Account, symbol string) (string, error) {\n    ctx := context.Background()\n\n    data, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 6, // SYMBOL_CURRENCY_PROFIT\n    })\n    if err != nil {\n        return \"\", err\n    }\n\n    return data.Value, nil\n}\n\n// Usage:\n// profitCurrency, _ := GetProfitCurrency(account, \"EURUSD\")\n// fmt.Printf(\"Profit currency: %s\\n\", profitCurrency) // \"USD\"\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#4-get-complete-symbol-info","title":"4) Get complete symbol info","text":"<pre><code>type SymbolInfo struct {\n    Symbol          string\n    Description     string\n    BaseCurrency    string\n    ProfitCurrency  string\n    MarginCurrency  string\n}\n\nfunc GetSymbolInfo(account *mt5.MT5Account, symbol string) (*SymbolInfo, error) {\n    ctx := context.Background()\n\n    // Get description\n    desc, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 9, // SYMBOL_DESCRIPTION\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    // Get base currency\n    base, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 5, // SYMBOL_CURRENCY_BASE\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    // Get profit currency\n    profit, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 6, // SYMBOL_CURRENCY_PROFIT\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    // Get margin currency\n    margin, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 7, // SYMBOL_CURRENCY_MARGIN\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    return &amp;SymbolInfo{\n        Symbol:         symbol,\n        Description:    desc.Value,\n        BaseCurrency:   base.Value,\n        ProfitCurrency: profit.Value,\n        MarginCurrency: margin.Value,\n    }, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#5-filter-symbols-by-base-currency","title":"5) Filter symbols by base currency","text":"<pre><code>func GetSymbolsByBaseCurrency(account *mt5.MT5Account, baseCurrency string) ([]string, error) {\n    ctx := context.Background()\n\n    // Get all symbols\n    totalData, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{\n        Selected: false,\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    symbols := []string{}\n\n    for i := int64(0); i &lt; totalData.Total; i++ {\n        // Get symbol name\n        nameData, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n            Pos:      i,\n            Selected: false,\n        })\n        if err != nil {\n            continue\n        }\n\n        // Get base currency\n        currData, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n            Symbol:     nameData.Name,\n            PropertyId: 5, // SYMBOL_CURRENCY_BASE\n        })\n        if err != nil {\n            continue\n        }\n\n        if currData.Value == baseCurrency {\n            symbols = append(symbols, nameData.Name)\n        }\n    }\n\n    return symbols, nil\n}\n\n// Usage:\n// eurSymbols, _ := GetSymbolsByBaseCurrency(account, \"EUR\")\n// fmt.Printf(\"EUR-based symbols: %v\\n\", eurSymbols)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#6-display-symbol-details","title":"6) Display symbol details","text":"<pre><code>func DisplaySymbolDetails(account *mt5.MT5Account, symbol string) {\n    ctx := context.Background()\n\n    // Get description\n    desc, _ := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 9, // SYMBOL_DESCRIPTION\n    })\n\n    // Get currencies\n    base, _ := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 5, // SYMBOL_CURRENCY_BASE\n    })\n\n    profit, _ := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 6, // SYMBOL_CURRENCY_PROFIT\n    })\n\n    // Get path\n    path, _ := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 14, // SYMBOL_PATH\n    })\n\n    fmt.Printf(\"Symbol: %s\\n\", symbol)\n    fmt.Printf(\"Description: %s\\n\", desc.Value)\n    fmt.Printf(\"Base Currency: %s\\n\", base.Value)\n    fmt.Printf(\"Profit Currency: %s\\n\", profit.Value)\n    fmt.Printf(\"Path: %s\\n\", path.Value)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#build-currency-pair-display","title":"Build currency pair display","text":"<pre><code>func FormatCurrencyPair(account *mt5.MT5Account, symbol string) string {\n    ctx := context.Background()\n\n    base, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 5, // SYMBOL_CURRENCY_BASE\n    })\n    if err != nil {\n        return symbol\n    }\n\n    profit, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 6, // SYMBOL_CURRENCY_PROFIT\n    })\n    if err != nil {\n        return symbol\n    }\n\n    return fmt.Sprintf(\"%s/%s\", base.Value, profit.Value)\n}\n\n// Usage:\n// pair := FormatCurrencyPair(account, \"EURUSD\")\n// fmt.Println(pair) // \"EUR/USD\"\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#validate-currency-compatibility","title":"Validate currency compatibility","text":"<pre><code>func IsAccountCurrencyCompatible(account *mt5.MT5Account, symbol string, accountCurrency string) (bool, error) {\n    ctx := context.Background()\n\n    profitCurrency, err := account.SymbolInfoString(ctx, &amp;pb.SymbolInfoStringRequest{\n        Symbol:     symbol,\n        PropertyId: 6, // SYMBOL_CURRENCY_PROFIT\n    })\n    if err != nil {\n        return false, err\n    }\n\n    return profitCurrency.Value == accountCurrency, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolInfoDouble - Get double symbol properties</li> <li>SymbolInfoInteger - Get integer symbol properties</li> <li>SymbolParamsMany - Get all symbol parameters at once</li> <li>AccountSummary - Get account currency information</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/","title":"\u2705 Get Symbol Last Tick","text":"<p>Request: get last tick (quote) data for trading symbol with timestamp and detailed information about prices and volumes.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolInfoTick(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoTick</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoTick(SymbolInfoTickRequest) \u2192 SymbolInfoTickReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolInfoTick(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieves the most recent tick (quote) data for a symbol.</li> <li>Why you need it. Get current market prices with timestamp for trading decisions.</li> <li>Complete data. Returns Bid, Ask, Last price, volumes, and millisecond-precision timestamp.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Get current market prices before placing orders</li> <li>Monitor price changes with timestamps</li> <li>Calculate spreads and market conditions</li> <li>Validate quote freshness</li> <li>Build price history snapshots</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolInfoTick - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolInfoTick retrieves the last tick data for a symbol.\n// Returns MrpcMqlTick with Bid, Ask, Last, Volume, Time, and other tick properties.\nfunc (a *MT5Account) SymbolInfoTick(\n    ctx context.Context,\n    req *pb.SymbolInfoTickRequest,\n) (*pb.MrpcMqlTick, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolInfoTickRequest {\n  string Symbol = 1;  // Symbol name\n}\n</code></pre> <p>Reply message:</p> <pre><code>SymbolInfoTickReply {\n  oneof response {\n    MrpcMqlTick data = 1;  // Tick data\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolInfoTickRequest</code> Request with Symbol name <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Symbol name (e.g., \"EURUSD\")"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#output-mrpcmqltick","title":"\u2b06\ufe0f Output \u2014 <code>MrpcMqlTick</code>","text":"Field Type Go Type Description <code>Time</code> <code>int64</code> <code>int64</code> Last quote time (Unix timestamp seconds) <code>Bid</code> <code>double</code> <code>float64</code> Current Bid price <code>Ask</code> <code>double</code> <code>float64</code> Current Ask price <code>Last</code> <code>double</code> <code>float64</code> Last deal price <code>Volume</code> <code>uint64</code> <code>uint64</code> Volume for the last deal <code>TimeMS</code> <code>int64</code> <code>int64</code> Last quote time (Unix timestamp milliseconds) <code>Flags</code> <code>uint32</code> <code>uint32</code> Tick flags (bid/ask/last changed indicators) <code>VolumeReal</code> <code>double</code> <code>float64</code> Volume with extended accuracy"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Symbol synchronization: Symbol should be synchronized for accurate tick data.</li> <li>Millisecond precision: TimeMS provides millisecond-level timestamp accuracy.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#1-get-last-tick-data","title":"1) Get last tick data","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{\n        Symbol: \"EURUSD\",\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"EURUSD Tick:\\n\")\n    fmt.Printf(\"  Bid: %.5f\\n\", tick.Bid)\n    fmt.Printf(\"  Ask: %.5f\\n\", tick.Ask)\n    fmt.Printf(\"  Spread: %.5f\\n\", tick.Ask-tick.Bid)\n    fmt.Printf(\"  Time: %s\\n\", time.Unix(tick.Time, 0).Format(\"2006-01-02 15:04:05\"))\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#2-get-current-spread","title":"2) Get current spread","text":"<pre><code>func GetCurrentSpread(account *mt5.MT5Account, symbol string) (float64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return 0, fmt.Errorf(\"failed to get tick: %w\", err)\n    }\n\n    spread := tick.Ask - tick.Bid\n    return spread, nil\n}\n\n// Usage:\n// spread, _ := GetCurrentSpread(account, \"EURUSD\")\n// fmt.Printf(\"Current spread: %.5f\\n\", spread)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#3-check-quote-freshness","title":"3) Check quote freshness","text":"<pre><code>func IsQuoteFresh(account *mt5.MT5Account, symbol string, maxAge time.Duration) (bool, error) {\n    ctx := context.Background()\n\n    tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return false, err\n    }\n\n    tickTime := time.Unix(tick.Time, 0)\n    age := time.Since(tickTime)\n\n    return age &lt;= maxAge, nil\n}\n\n// Usage:\n// fresh, _ := IsQuoteFresh(account, \"EURUSD\", 5*time.Second)\n// if fresh {\n//     fmt.Println(\"Quote is fresh\")\n// }\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#4-get-mid-price","title":"4) Get mid price","text":"<pre><code>func GetMidPrice(account *mt5.MT5Account, symbol string) (float64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    midPrice := (tick.Bid + tick.Ask) / 2.0\n    return midPrice, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#5-monitor-price-changes","title":"5) Monitor price changes","text":"<pre><code>func MonitorPriceChanges(account *mt5.MT5Account, symbol string, interval time.Duration) {\n    ctx := context.Background()\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    var lastBid, lastAsk float64\n\n    for range ticker.C {\n        tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{\n            Symbol: symbol,\n        })\n        if err != nil {\n            fmt.Printf(\"Error: %v\\n\", err)\n            continue\n        }\n\n        if lastBid != 0 {\n            bidChange := tick.Bid - lastBid\n            askChange := tick.Ask - lastAsk\n            spread := tick.Ask - tick.Bid\n\n            fmt.Printf(\"[%s] %s: Bid=%.5f (%+.5f), Ask=%.5f (%+.5f), Spread=%.5f\\n\",\n                time.Unix(tick.Time, 0).Format(\"15:04:05\"),\n                symbol,\n                tick.Bid, bidChange,\n                tick.Ask, askChange,\n                spread,\n            )\n        }\n\n        lastBid = tick.Bid\n        lastAsk = tick.Ask\n    }\n}\n\n// Usage:\n// MonitorPriceChanges(account, \"EURUSD\", 1*time.Second)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#6-get-tick-with-validation","title":"6) Get tick with validation","text":"<pre><code>type ValidatedTick struct {\n    Tick      *pb.MrpcMqlTick\n    Age       time.Duration\n    IsFresh   bool\n    HasLast   bool\n}\n\nfunc GetValidatedTick(account *mt5.MT5Account, symbol string, maxAge time.Duration) (*ValidatedTick, error) {\n    ctx := context.Background()\n\n    tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    tickTime := time.Unix(tick.Time, 0)\n    age := time.Since(tickTime)\n\n    return &amp;ValidatedTick{\n        Tick:    tick,\n        Age:     age,\n        IsFresh: age &lt;= maxAge,\n        HasLast: tick.Last &gt; 0,\n    }, nil\n}\n\n// Usage:\n// vt, _ := GetValidatedTick(account, \"EURUSD\", 10*time.Second)\n// if vt.IsFresh {\n//     fmt.Printf(\"Fresh tick: Bid=%.5f, Age=%v\\n\", vt.Tick.Bid, vt.Age)\n// }\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#safe-price-retrieval-with-retry","title":"Safe price retrieval with retry","text":"<pre><code>func GetTickWithRetry(account *mt5.MT5Account, symbol string, maxRetries int) (*pb.MrpcMqlTick, error) {\n    ctx := context.Background()\n\n    for i := 0; i &lt; maxRetries; i++ {\n        tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{\n            Symbol: symbol,\n        })\n\n        if err == nil &amp;&amp; tick.Bid &gt; 0 &amp;&amp; tick.Ask &gt; 0 {\n            return tick, nil\n        }\n\n        if i &lt; maxRetries-1 {\n            time.Sleep(500 * time.Millisecond)\n        }\n    }\n\n    return nil, fmt.Errorf(\"failed to get valid tick after %d retries\", maxRetries)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#calculate-price-statistics","title":"Calculate price statistics","text":"<pre><code>func GetPriceStats(account *mt5.MT5Account, symbol string) {\n    ctx := context.Background()\n\n    tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    spread := tick.Ask - tick.Bid\n    midPrice := (tick.Bid + tick.Ask) / 2.0\n    spreadPct := (spread / midPrice) * 100.0\n\n    fmt.Printf(\"%s Statistics:\\n\", symbol)\n    fmt.Printf(\"  Bid: %.5f\\n\", tick.Bid)\n    fmt.Printf(\"  Ask: %.5f\\n\", tick.Ask)\n    fmt.Printf(\"  Mid: %.5f\\n\", midPrice)\n    fmt.Printf(\"  Spread: %.5f (%.4f%%)\\n\", spread, spreadPct)\n    fmt.Printf(\"  Last: %.5f\\n\", tick.Last)\n    fmt.Printf(\"  Volume: %.2f\\n\", tick.VolumeReal)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolInfoDouble - Get individual price properties</li> <li>OnSymbolTick - Stream real-time tick updates</li> <li>SymbolIsSynchronized - Check quote synchronization</li> <li>OrderSend - Place orders with current prices</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/","title":"\u2705 Check Symbol Synchronization with Server","text":"<p>Request: check if symbol data is synchronized with trading server. Ensures quote freshness before trading operations.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolIsSynchronized(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolIsSynchronized</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolIsSynchronized(SymbolIsSynchronizedRequest) \u2192 SymbolIsSynchronizedReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolIsSynchronized(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Checks if symbol quotes are synchronized with the broker's trade server.</li> <li>Why you need it. Ensure quotes are up-to-date before placing orders or making trading decisions.</li> <li>Trading prerequisite. Unsynchronized symbols may have stale prices and cause order rejections.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Validate symbol data before trading operations</li> <li>Detect connection issues to trade server</li> <li>Implement trading safety checks</li> <li>Monitor symbol quote health</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolIsSynchronized - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolIsSynchronized checks if symbol data is synchronized with trade server.\n// Returns Synchronized flag indicating sync status.\nfunc (a *MT5Account) SymbolIsSynchronized(\n    ctx context.Context,\n    req *pb.SymbolIsSynchronizedRequest,\n) (*pb.SymbolIsSynchronizedData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolIsSynchronizedRequest {\n  string Symbol = 1;  // Symbol name to check\n}\n</code></pre> <p>Reply message:</p> <pre><code>SymbolIsSynchronizedReply {\n  oneof response {\n    SymbolIsSynchronizedData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolIsSynchronizedRequest</code> Request with Symbol name <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Symbol name (e.g., \"EURUSD\")"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#output-symbolissynchronizeddata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolIsSynchronizedData</code>","text":"Field Type Go Type Description <code>Synchronized</code> <code>bool</code> <code>bool</code> True if symbol data is synced with trade server"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Market Watch required: Symbol should be in Market Watch for synchronization to occur.</li> <li>Weekend behavior: During market close, symbols may not be synchronized.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#1-check-symbol-synchronization","title":"1) Check symbol synchronization","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolIsSynchronized(ctx, &amp;pb.SymbolIsSynchronizedRequest{\n        Symbol: \"EURUSD\",\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    if data.Synchronized {\n        fmt.Println(\"EURUSD is synchronized and ready for trading\")\n    } else {\n        fmt.Println(\"EURUSD is NOT synchronized - quotes may be stale\")\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#2-wait-for-symbol-synchronization","title":"2) Wait for symbol synchronization","text":"<pre><code>func WaitForSync(account *mt5.MT5Account, symbol string, timeout time.Duration) error {\n    ctx, cancel := context.WithTimeout(context.Background(), timeout)\n    defer cancel()\n\n    ticker := time.NewTicker(500 * time.Millisecond)\n    defer ticker.Stop()\n\n    for {\n        select {\n        case &lt;-ticker.C:\n            data, err := account.SymbolIsSynchronized(ctx, &amp;pb.SymbolIsSynchronizedRequest{\n                Symbol: symbol,\n            })\n            if err != nil {\n                return err\n            }\n\n            if data.Synchronized {\n                fmt.Printf(\"%s synchronized\\n\", symbol)\n                return nil\n            }\n\n        case &lt;-ctx.Done():\n            return fmt.Errorf(\"timeout waiting for %s synchronization\", symbol)\n        }\n    }\n}\n\n// Usage:\n// err := WaitForSync(account, \"EURUSD\", 10*time.Second)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#3-pre-trade-synchronization-check","title":"3) Pre-trade synchronization check","text":"<pre><code>func SafeTrade(account *mt5.MT5Account, symbol string, volume float64) error {\n    ctx := context.Background()\n\n    // Check synchronization first\n    syncData, err := account.SymbolIsSynchronized(ctx, &amp;pb.SymbolIsSynchronizedRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return fmt.Errorf(\"failed to check sync: %w\", err)\n    }\n\n    if !syncData.Synchronized {\n        return fmt.Errorf(\"symbol %s not synchronized - trading aborted\", symbol)\n    }\n\n    // Proceed with trading\n    fmt.Printf(\"Symbol %s synchronized, proceeding with order...\\n\", symbol)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#4-check-multiple-symbols-synchronization","title":"4) Check multiple symbols synchronization","text":"<pre><code>func CheckMultipleSymbols(account *mt5.MT5Account, symbols []string) map[string]bool {\n    ctx := context.Background()\n    results := make(map[string]bool)\n\n    for _, symbol := range symbols {\n        data, err := account.SymbolIsSynchronized(ctx, &amp;pb.SymbolIsSynchronizedRequest{\n            Symbol: symbol,\n        })\n\n        if err != nil {\n            results[symbol] = false\n            continue\n        }\n\n        results[symbol] = data.Synchronized\n    }\n\n    return results\n}\n\n// Usage:\n// symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\n// syncStatus := CheckMultipleSymbols(account, symbols)\n// for symbol, synced := range syncStatus {\n//     fmt.Printf(\"%s: %v\\n\", symbol, synced)\n// }\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#5-monitor-symbol-synchronization","title":"5) Monitor symbol synchronization","text":"<pre><code>func MonitorSynchronization(account *mt5.MT5Account, symbol string, interval time.Duration) {\n    ctx := context.Background()\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    lastStatus := false\n\n    for range ticker.C {\n        data, err := account.SymbolIsSynchronized(ctx, &amp;pb.SymbolIsSynchronizedRequest{\n            Symbol: symbol,\n        })\n\n        if err != nil {\n            fmt.Printf(\"[%s] Error checking %s: %v\\n\", time.Now().Format(\"15:04:05\"), symbol, err)\n            continue\n        }\n\n        // Report status changes\n        if data.Synchronized != lastStatus {\n            status := \"synchronized\"\n            if !data.Synchronized {\n                status = \"NOT synchronized\"\n            }\n            fmt.Printf(\"[%s] %s is now %s\\n\", time.Now().Format(\"15:04:05\"), symbol, status)\n            lastStatus = data.Synchronized\n        }\n    }\n}\n\n// Usage in goroutine:\n// go MonitorSynchronization(account, \"EURUSD\", 5*time.Second)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#synchronization-guard","title":"Synchronization guard","text":"<pre><code>func EnsureSynchronized(account *mt5.MT5Account, symbol string) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolIsSynchronized(ctx, &amp;pb.SymbolIsSynchronizedRequest{\n        Symbol: symbol,\n    })\n\n    if err != nil {\n        return fmt.Errorf(\"sync check failed: %w\", err)\n    }\n\n    if !data.Synchronized {\n        return fmt.Errorf(\"symbol %s not synchronized\", symbol)\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#retry-with-synchronization-check","title":"Retry with synchronization check","text":"<pre><code>func ExecuteWhenSynced(account *mt5.MT5Account, symbol string, fn func() error) error {\n    maxRetries := 5\n    retryDelay := 1 * time.Second\n\n    for i := 0; i &lt; maxRetries; i++ {\n        ctx := context.Background()\n        data, err := account.SymbolIsSynchronized(ctx, &amp;pb.SymbolIsSynchronizedRequest{\n            Symbol: symbol,\n        })\n\n        if err == nil &amp;&amp; data.Synchronized {\n            return fn()\n        }\n\n        if i &lt; maxRetries-1 {\n            time.Sleep(retryDelay)\n        }\n    }\n\n    return fmt.Errorf(\"symbol %s failed to synchronize\", symbol)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolSelect - Add symbol to Market Watch (required for sync)</li> <li>SymbolExist - Check if symbol exists</li> <li>SymbolInfoTick - Get last tick data</li> <li>OrderCheck - Validate order before sending</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/","title":"\u2705 Get Symbol Name by Index","text":"<p>Request: get trading symbol name by its position in the list. Allows iteration through all available symbols or only symbols in Market Watch.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolName(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolName</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolName(SymbolNameRequest) \u2192 SymbolNameReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolName(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieves symbol name by its position index in the symbols list.</li> <li>Why you need it. Iterate through all available symbols without knowing their names in advance.</li> <li>Zero-based indexing. Position starts at 0 and goes up to SymbolsTotal-1.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Iterate through all available symbols</li> <li>Build dynamic symbol lists</li> <li>Discover available trading instruments</li> <li>Create symbol selection interfaces</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolName - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolName returns the name of a symbol by its position in the list.\n// Use Pos as zero-based index and Selected to choose between Market Watch or all symbols.\nfunc (a *MT5Account) SymbolName(\n    ctx context.Context,\n    req *pb.SymbolNameRequest,\n) (*pb.SymbolNameData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolNameRequest {\n  int64 Pos = 1;       // Zero-based position index\n  bool Selected = 2;   // true = Market Watch only, false = all symbols\n}\n</code></pre> <p>Reply message:</p> <pre><code>SymbolNameReply {\n  oneof response {\n    SymbolNameData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolNameRequest</code> Request with Pos and Selected flag <p>Request fields:</p> Field Type Description <code>Pos</code> <code>int64</code> Zero-based position index (0 to SymbolsTotal-1) <code>Selected</code> <code>bool</code> <code>true</code> = Market Watch symbols only, <code>false</code> = all symbols"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#output-symbolnamedata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolNameData</code>","text":"Field Type Go Type Description <code>Name</code> <code>string</code> <code>string</code> Symbol name at the specified position"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Index bounds: Position must be within [0, SymbolsTotal-1]. Out of bounds returns error.</li> <li>Performance: For getting all symbols, combine with SymbolsTotal to pre-allocate slice.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#1-get-first-symbol-name","title":"1) Get first symbol name","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Get first symbol from Market Watch\n    data, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n        Pos:      0,\n        Selected: true,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"First Market Watch symbol: %s\\n\", data.Name)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#2-list-all-market-watch-symbols","title":"2) List all Market Watch symbols","text":"<pre><code>func GetMarketWatchSymbols(account *mt5.MT5Account) ([]string, error) {\n    ctx := context.Background()\n\n    // Get total count first\n    totalData, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{\n        Selected: true,\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    // Pre-allocate slice\n    symbols := make([]string, 0, totalData.Total)\n\n    // Iterate through all symbols\n    for i := int64(0); i &lt; totalData.Total; i++ {\n        nameData, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n            Pos:      i,\n            Selected: true,\n        })\n        if err != nil {\n            continue // Skip errors\n        }\n        symbols = append(symbols, nameData.Name)\n    }\n\n    return symbols, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#3-get-all-available-symbols-not-just-market-watch","title":"3) Get all available symbols (not just Market Watch)","text":"<pre><code>func GetAllSymbols(account *mt5.MT5Account) ([]string, error) {\n    ctx := context.Background()\n\n    // Get total count of all symbols\n    totalData, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{\n        Selected: false,\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    symbols := make([]string, 0, totalData.Total)\n\n    for i := int64(0); i &lt; totalData.Total; i++ {\n        nameData, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n            Pos:      i,\n            Selected: false,\n        })\n        if err != nil {\n            continue\n        }\n        symbols = append(symbols, nameData.Name)\n    }\n\n    return symbols, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#4-filter-symbols-by-prefix","title":"4) Filter symbols by prefix","text":"<pre><code>func GetSymbolsByPrefix(account *mt5.MT5Account, prefix string) ([]string, error) {\n    ctx := context.Background()\n\n    totalData, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{\n        Selected: false,\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    symbols := []string{}\n\n    for i := int64(0); i &lt; totalData.Total; i++ {\n        nameData, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n            Pos:      i,\n            Selected: false,\n        })\n        if err != nil {\n            continue\n        }\n\n        if strings.HasPrefix(nameData.Name, prefix) {\n            symbols = append(symbols, nameData.Name)\n        }\n    }\n\n    return symbols, nil\n}\n\n// Usage:\n// eurSymbols, _ := GetSymbolsByPrefix(account, \"EUR\")\n// fmt.Printf(\"EUR symbols: %v\\n\", eurSymbols)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#5-get-symbol-at-specific-position-with-validation","title":"5) Get symbol at specific position with validation","text":"<pre><code>func GetSymbolAtPosition(account *mt5.MT5Account, position int64, marketWatchOnly bool) (string, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    // Validate position bounds\n    totalData, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{\n        Selected: marketWatchOnly,\n    })\n    if err != nil {\n        return \"\", fmt.Errorf(\"failed to get total: %w\", err)\n    }\n\n    if position &lt; 0 || position &gt;= totalData.Total {\n        return \"\", fmt.Errorf(\"position %d out of bounds [0, %d)\", position, totalData.Total)\n    }\n\n    // Get symbol name\n    nameData, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n        Pos:      position,\n        Selected: marketWatchOnly,\n    })\n    if err != nil {\n        return \"\", fmt.Errorf(\"failed to get symbol name: %w\", err)\n    }\n\n    return nameData.Name, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#efficient-iteration-with-pre-allocation","title":"Efficient iteration with pre-allocation","text":"<pre><code>func IterateAllSymbols(account *mt5.MT5Account) []string {\n    ctx := context.Background()\n\n    // Get count first\n    total, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{Selected: false})\n    if err != nil {\n        return nil\n    }\n\n    // Pre-allocate exact capacity\n    symbols := make([]string, 0, total.Total)\n\n    // Fast iteration\n    for i := int64(0); i &lt; total.Total; i++ {\n        name, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n            Pos:      i,\n            Selected: false,\n        })\n        if err == nil {\n            symbols = append(symbols, name.Name)\n        }\n    }\n\n    return symbols\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#parallel-symbol-name-fetching","title":"Parallel symbol name fetching","text":"<pre><code>func GetSymbolsParallel(account *mt5.MT5Account) []string {\n    ctx := context.Background()\n\n    total, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{Selected: true})\n    if err != nil {\n        return nil\n    }\n\n    symbols := make([]string, total.Total)\n    var wg sync.WaitGroup\n\n    for i := int64(0); i &lt; total.Total; i++ {\n        wg.Add(1)\n        go func(pos int64) {\n            defer wg.Done()\n            name, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n                Pos:      pos,\n                Selected: true,\n            })\n            if err == nil {\n                symbols[pos] = name.Name\n            }\n        }(i)\n    }\n\n    wg.Wait()\n    return symbols\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolsTotal - Get total count of available symbols</li> <li>SymbolExist - Check if symbol exists</li> <li>SymbolSelect - Add/remove symbols from Market Watch</li> <li>SymbolInfoTick - Get last tick data for symbol</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/","title":"\u2705 Add/Remove Symbol from Market Watch","text":"<p>Request: add trading symbol to Market Watch window or remove it. Controls symbol visibility in terminal.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolSelect(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolSelect</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolSelect(SymbolSelectRequest) \u2192 SymbolSelectReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolSelect(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Adds or removes trading symbols from the Market Watch window.</li> <li>Why you need it. Control which symbols receive real-time quotes and are visible in terminal.</li> <li>Required for quotes. Symbol must be in Market Watch to receive streaming tick updates.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Add symbols to Market Watch before requesting quotes</li> <li>Remove unused symbols to reduce data traffic</li> <li>Manage symbol visibility dynamically</li> <li>Prepare symbols for trading or monitoring</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolSelect - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolSelect adds or removes a symbol from Market Watch window.\n// Use Select=true to add, Select=false to remove.\nfunc (a *MT5Account) SymbolSelect(\n    ctx context.Context,\n    req *pb.SymbolSelectRequest,\n) (*pb.SymbolSelectData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolSelectRequest {\n  string Symbol = 1;  // Symbol name\n  bool Select = 2;    // true = add to Market Watch, false = remove\n}\n</code></pre> <p>Reply message:</p> <pre><code>SymbolSelectReply {\n  oneof response {\n    SymbolSelectData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolSelectRequest</code> Request with Symbol name and Select flag <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Symbol name (e.g., \"EURUSD\") <code>Select</code> <code>bool</code> <code>true</code> = add to Market Watch, <code>false</code> = remove"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#output-symbolselectdata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolSelectData</code>","text":"Field Type Go Type Description <code>Success</code> <code>bool</code> <code>bool</code> True if operation succeeded"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Quote prerequisite: Symbol must be in Market Watch to receive streaming quotes via OnSymbolTick.</li> <li>Idempotent: Calling Select=true on already selected symbol is safe (returns success).</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#1-add-symbol-to-market-watch","title":"1) Add symbol to Market Watch","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Add EURUSD to Market Watch\n    data, err := account.SymbolSelect(ctx, &amp;pb.SymbolSelectRequest{\n        Symbol: \"EURUSD\",\n        Select: true,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    if data.Success {\n        fmt.Println(\"EURUSD added to Market Watch\")\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#2-remove-symbol-from-market-watch","title":"2) Remove symbol from Market Watch","text":"<pre><code>func RemoveSymbol(account *mt5.MT5Account, symbol string) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolSelect(ctx, &amp;pb.SymbolSelectRequest{\n        Symbol: symbol,\n        Select: false,\n    })\n    if err != nil {\n        return fmt.Errorf(\"failed to remove symbol: %w\", err)\n    }\n\n    if !data.Success {\n        return fmt.Errorf(\"symbol removal unsuccessful\")\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#3-ensure-symbol-is-in-market-watch-before-trading","title":"3) Ensure symbol is in Market Watch before trading","text":"<pre><code>func PrepareSymbolForTrading(account *mt5.MT5Account, symbol string) error {\n    ctx := context.Background()\n\n    // First check if it exists\n    existData, err := account.SymbolExist(ctx, &amp;pb.SymbolExistRequest{\n        Symbol: symbol,\n    })\n    if err != nil || !existData.Exist {\n        return fmt.Errorf(\"symbol %s does not exist\", symbol)\n    }\n\n    // Add to Market Watch\n    selectData, err := account.SymbolSelect(ctx, &amp;pb.SymbolSelectRequest{\n        Symbol: symbol,\n        Select: true,\n    })\n    if err != nil {\n        return fmt.Errorf(\"failed to add to Market Watch: %w\", err)\n    }\n\n    if !selectData.Success {\n        return fmt.Errorf(\"symbol selection failed\")\n    }\n\n    fmt.Printf(\"Symbol %s ready for trading\\n\", symbol)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#4-batch-add-symbols-to-market-watch","title":"4) Batch add symbols to Market Watch","text":"<pre><code>func AddSymbolsToMarketWatch(account *mt5.MT5Account, symbols []string) []string {\n    ctx := context.Background()\n    failed := []string{}\n\n    for _, symbol := range symbols {\n        data, err := account.SymbolSelect(ctx, &amp;pb.SymbolSelectRequest{\n            Symbol: symbol,\n            Select: true,\n        })\n\n        if err != nil || !data.Success {\n            failed = append(failed, symbol)\n            fmt.Printf(\"Failed to add %s\\n\", symbol)\n        } else {\n            fmt.Printf(\"Added %s to Market Watch\\n\", symbol)\n        }\n    }\n\n    return failed\n}\n\n// Usage:\n// symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\n// failed := AddSymbolsToMarketWatch(account, symbols)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#5-clean-up-market-watch","title":"5) Clean up Market Watch","text":"<pre><code>func CleanMarketWatch(account *mt5.MT5Account, keepSymbols []string) error {\n    ctx := context.Background()\n\n    // Get current Market Watch symbols\n    totalData, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{\n        Selected: true,\n    })\n    if err != nil {\n        return err\n    }\n\n    // Create keep set\n    keepSet := make(map[string]bool)\n    for _, s := range keepSymbols {\n        keepSet[s] = true\n    }\n\n    // Remove symbols not in keep list\n    for i := int64(0); i &lt; totalData.Total; i++ {\n        nameData, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n            Pos:      i,\n            Selected: true,\n        })\n        if err != nil {\n            continue\n        }\n\n        if !keepSet[nameData.Name] {\n            account.SymbolSelect(ctx, &amp;pb.SymbolSelectRequest{\n                Symbol: nameData.Name,\n                Select: false,\n            })\n            fmt.Printf(\"Removed %s from Market Watch\\n\", nameData.Name)\n        }\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#safe-symbol-selection-with-retry","title":"Safe symbol selection with retry","text":"<pre><code>func EnsureSymbolSelected(account *mt5.MT5Account, symbol string) error {\n    ctx := context.Background()\n    maxRetries := 3\n\n    for i := 0; i &lt; maxRetries; i++ {\n        data, err := account.SymbolSelect(ctx, &amp;pb.SymbolSelectRequest{\n            Symbol: symbol,\n            Select: true,\n        })\n\n        if err == nil &amp;&amp; data.Success {\n            return nil\n        }\n\n        time.Sleep(500 * time.Millisecond)\n    }\n\n    return fmt.Errorf(\"failed to select symbol %s after %d retries\", symbol, maxRetries)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#toggle-symbol-visibility","title":"Toggle symbol visibility","text":"<pre><code>func ToggleSymbol(account *mt5.MT5Account, symbol string, enable bool) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolSelect(ctx, &amp;pb.SymbolSelectRequest{\n        Symbol: symbol,\n        Select: enable,\n    })\n\n    if err != nil {\n        return err\n    }\n\n    if !data.Success {\n        return fmt.Errorf(\"toggle operation failed\")\n    }\n\n    action := \"removed from\"\n    if enable {\n        action = \"added to\"\n    }\n    fmt.Printf(\"%s %s Market Watch\\n\", symbol, action)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolsTotal - Get total count of available symbols</li> <li>SymbolExist - Check if symbol exists</li> <li>SymbolName - Get symbol name by position</li> <li>OnSymbolTick - Stream real-time quotes (requires symbol in Market Watch)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/","title":"MT5Account \u00b7 Symbol Information - Overview","text":"<p>Quotes, symbol properties, trading rules, tick values, Market Watch management. Use this page to choose the right API for symbol data.</p>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":""},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#current-quotes","title":"Current Quotes","text":"<ul> <li>SymbolInfoTick - current quote for symbol (bid, ask, last, volume, time).</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#symbol-inventory-management","title":"Symbol Inventory &amp; Management","text":"<ul> <li>SymbolsTotal - count of available symbols.</li> <li>SymbolName - get symbol name by index.</li> <li>SymbolSelect - enable/disable symbol in Market Watch.</li> <li>SymbolExist - check if symbol exists.</li> <li>SymbolIsSynchronized - check symbol data sync status.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#symbol-properties","title":"Symbol Properties","text":"<ul> <li>SymbolInfoDouble - single double property (bid, ask, point, volume min/max, etc.).</li> <li>SymbolInfoInteger - single integer property (digits, spread, stops level, etc.).</li> <li>SymbolInfoString - single string property (description, currency, path).</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#step-by-step-tutorials","title":"\ud83d\udcda Step-by-step tutorials","text":"<p>Want detailed explanations with line-by-line code breakdown? Check these guides:</p> <ul> <li>SymbolInfoTick - How it works</li> <li>SymbolsTotal - How it works</li> <li>SymbolName - How it works</li> <li>SymbolSelect - How it works</li> <li>SymbolExist - How it works</li> <li>SymbolIsSynchronized - How it works</li> <li>SymbolInfoDouble - How it works</li> <li>SymbolInfoInteger - How it works</li> <li>SymbolInfoString - How it works</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>SymbolInfoTick \u2192 get current prices (bid, ask, last).</li> <li>SymbolsTotal/SymbolName \u2192 iterate through all symbols.</li> <li>SymbolSelect \u2192 add/remove symbol from Market Watch.</li> <li>SymbolExist \u2192 check if symbol exists on broker.</li> <li>SymbolInfo \u2192 get specific symbol property* (double/integer/string).</li> </ul> <p>Rule of thumb: need current price \u2192 <code>SymbolInfoTick</code>; need symbol list \u2192 <code>SymbolsTotal + SymbolName</code>; need specific property \u2192 <code>SymbolInfo*</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Key inputs Current quote (bid, ask, last) <code>SymbolInfoTick</code> MrpcMqlTick Symbol Count available symbols <code>SymbolsTotal</code> int32 Mode (bool) Get symbol name by index <code>SymbolName</code> string Index, Selected Add/remove symbol from Market Watch <code>SymbolSelect</code> bool Symbol, Select (true/false) Check if symbol exists <code>SymbolExist</code> bool Name Check if symbol data is synced <code>SymbolIsSynchronized</code> bool Symbol One numeric property (bid, point, volume, etc.) <code>SymbolInfoDouble</code> float64 Symbol, Type (enum) One integer property (digits, spread, etc.) <code>SymbolInfoInteger</code> int64 Symbol, Type (enum) One text property (description, currency) <code>SymbolInfoString</code> string Symbol, Type (enum)"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>SymbolInfoTick - Use this for current prices; updates in real-time.</li> <li>Bid vs Ask - BUY orders use Ask price, SELL orders use Bid price.</li> <li>Market Watch - Symbol must be in Market Watch to get live updates (use <code>SymbolSelect</code>).</li> <li>Synchronization - Check <code>SymbolIsSynchronized</code> before trading to ensure data is current.</li> <li>Digits - Number of decimal places (e.g., EURUSD = 5, USDJPY = 3).</li> <li>Point - Minimal price change (e.g., 0.00001 for 5-digit EURUSD).</li> <li>Volume limits - Check VOLUME_MIN, VOLUME_MAX, VOLUME_STEP before placing orders.</li> <li>Stop level - Minimum distance for SL/TP from current price (in points).</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Get current quote\ntick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{\n    Symbol: \"EURUSD\",\n})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"EURUSD: Bid=%.5f, Ask=%.5f, Spread=%.5f\\n\",\n    tick.Bid, tick.Ask, tick.Ask-tick.Bid)\n</code></pre> <pre><code>// List all available symbols\ntotalData, _ := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{\n    Selected: false,\n})\n\nfmt.Printf(\"Available symbols: %d\\n\", totalData.Total)\n\nfor i := int32(0); i &lt; totalData.Total; i++ {\n    nameData, _ := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n        Index:    i,\n        Selected: false,\n    })\n    fmt.Printf(\"%d. %s\\n\", i+1, nameData.Name)\n}\n</code></pre> <pre><code>// Add symbol to Market Watch\nselectData, _ := account.SymbolSelect(ctx, &amp;pb.SymbolSelectRequest{\n    Symbol: \"GBPUSD\",\n    Select: true,\n})\n\nif selectData.Success {\n    fmt.Println(\"\u2705 GBPUSD added to Market Watch\")\n} else {\n    fmt.Println(\"\u274c Failed to add GBPUSD\")\n}\n</code></pre> <pre><code>// Check if symbol exists\nexistData, _ := account.SymbolExist(ctx, &amp;pb.SymbolExistRequest{\n    Name: \"EURUSD\",\n})\n\nif existData.Exists {\n    fmt.Println(\"\u2705 Symbol exists\")\n} else {\n    fmt.Println(\"\u274c Symbol not found\")\n}\n</code></pre> <pre><code>// Get symbol properties\ndigitsData, _ := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoIntegerProperty_SYMBOL_DIGITS,\n})\n\npointData, _ := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_POINT,\n})\n\nfmt.Printf(\"EURUSD: Digits=%d, Point=%.5f\\n\", digitsData.Value, pointData.Value)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#see-also","title":"See also","text":"<ul> <li>Advanced symbol info: SymbolParamsMany - get 112+ fields for multiple symbols</li> <li>Trading: OrderSend - place orders</li> <li>Real-time updates: OnSymbolTick - subscribe to tick stream</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/","title":"\u2705 Get Total Count of Available Symbols","text":"<p>Request: get the total number of symbols available in MetaTrader 5 terminal. You can get the count of all symbols or only those in Market Watch.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolsTotal(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolsTotal</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolsTotal(SymbolsTotalRequest) \u2192 SymbolsTotalReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolsTotal(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Returns the count of available symbols in MT5 terminal.</li> <li>Why you need it. Iterate through all symbols, validate Market Watch setup, or build symbol lists.</li> <li>Selected flag. Use <code>true</code> to count only visible symbols in Market Watch, <code>false</code> for all available symbols.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Get total symbol count before iterating with <code>SymbolName()</code></li> <li>Validate Market Watch configuration</li> <li>Build dynamic symbol selection interfaces</li> <li>Monitor available trading instruments</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolsTotal - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolsTotal returns the total number of available symbols.\n// Use Selected=true to count only symbols in Market Watch, false for all symbols.\nfunc (a *MT5Account) SymbolsTotal(\n    ctx context.Context,\n    req *pb.SymbolsTotalRequest,\n) (*pb.SymbolsTotalData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolsTotalRequest {\n  bool Selected = 1;  // true = Market Watch only, false = all symbols\n}\n</code></pre> <p>Reply message:</p> <pre><code>SymbolsTotalReply {\n  oneof response {\n    SymbolsTotalData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolsTotalRequest</code> Request with <code>Selected</code> flag <p>Request fields:</p> Field Type Description <code>Selected</code> <code>bool</code> <code>true</code> = count only Market Watch symbols, <code>false</code> = all symbols"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#output-symbolstotaldata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolsTotalData</code>","text":"Field Type Go Type Description <code>Total</code> <code>int64</code> <code>int64</code> Total number of symbols available"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>10s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Market Watch vs All: Selected=true returns only symbols visible in Market Watch window, Selected=false returns all symbols available in terminal.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#1-get-total-symbols-in-market-watch","title":"1) Get total symbols in Market Watch","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account := mt5.NewMT5Account(\"user\", \"password\", \"server:443\")\n    err := account.Connect()\n    if err != nil {\n        panic(err)\n    }\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Count only symbols in Market Watch\n    data, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{\n        Selected: true,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Symbols in Market Watch: %d\\n\", data.Total)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#2-get-total-available-symbols-all","title":"2) Get total available symbols (all)","text":"<pre><code>func GetAllSymbolsCount(account *mt5.MT5Account) (int64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    // Count all available symbols\n    data, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{\n        Selected: false,\n    })\n    if err != nil {\n        return 0, fmt.Errorf(\"failed to get symbols total: %w\", err)\n    }\n\n    return data.Total, nil\n}\n\n// Usage:\n// total, _ := GetAllSymbolsCount(account)\n// fmt.Printf(\"Total available symbols: %d\\n\", total)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#3-compare-market-watch-vs-all-symbols","title":"3) Compare Market Watch vs All symbols","text":"<pre><code>func CompareSymbolCounts(account *mt5.MT5Account) {\n    ctx := context.Background()\n\n    // Get Market Watch count\n    selected, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{Selected: true})\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    // Get all symbols count\n    all, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{Selected: false})\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"Market Watch: %d symbols\\n\", selected.Total)\n    fmt.Printf(\"All available: %d symbols\\n\", all.Total)\n    fmt.Printf(\"Not in Market Watch: %d symbols\\n\", all.Total-selected.Total)\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#4-validate-before-iteration","title":"4) Validate before iteration","text":"<pre><code>func ListAllSymbolNames(account *mt5.MT5Account) ([]string, error) {\n    ctx := context.Background()\n\n    // First, get total count\n    totalData, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{Selected: false})\n    if err != nil {\n        return nil, err\n    }\n\n    symbols := make([]string, 0, totalData.Total)\n\n    // Iterate through all symbols\n    for i := int64(0); i &lt; totalData.Total; i++ {\n        nameData, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n            Pos:      i,\n            Selected: false,\n        })\n        if err != nil {\n            continue\n        }\n        symbols = append(symbols, nameData.Name)\n    }\n\n    return symbols, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#5-monitor-market-watch-changes","title":"5) Monitor Market Watch changes","text":"<pre><code>func MonitorMarketWatch(account *mt5.MT5Account, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    var lastCount int64 = -1\n\n    for range ticker.C {\n        ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second)\n        data, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{Selected: true})\n        cancel()\n\n        if err != nil {\n            fmt.Printf(\"Error: %v\\n\", err)\n            continue\n        }\n\n        if lastCount != -1 &amp;&amp; data.Total != lastCount {\n            fmt.Printf(\"[%s] Market Watch changed: %d -&gt; %d symbols\\n\",\n                time.Now().Format(\"15:04:05\"),\n                lastCount,\n                data.Total,\n            )\n        }\n\n        lastCount = data.Total\n    }\n}\n\n// Usage:\n// MonitorMarketWatch(account, 5*time.Second)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#pre-allocate-slice-for-iteration","title":"Pre-allocate slice for iteration","text":"<pre><code>func GetMarketWatchSymbols(account *mt5.MT5Account) ([]string, error) {\n    ctx := context.Background()\n\n    // Get count first to pre-allocate\n    total, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{Selected: true})\n    if err != nil {\n        return nil, err\n    }\n\n    // Pre-allocate with exact capacity\n    symbols := make([]string, 0, total.Total)\n\n    for i := int64(0); i &lt; total.Total; i++ {\n        nameData, err := account.SymbolName(ctx, &amp;pb.SymbolNameRequest{\n            Pos:      i,\n            Selected: true,\n        })\n        if err != nil {\n            continue\n        }\n        symbols = append(symbols, nameData.Name)\n    }\n\n    return symbols, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#validate-symbol-availability","title":"Validate symbol availability","text":"<pre><code>func HasMinimumSymbols(account *mt5.MT5Account, minRequired int64) (bool, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolsTotal(ctx, &amp;pb.SymbolsTotalRequest{Selected: false})\n    if err != nil {\n        return false, err\n    }\n\n    return data.Total &gt;= minRequired, nil\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolName - Get symbol name by position index</li> <li>SymbolExist - Check if symbol exists</li> <li>SymbolSelect - Add/remove symbols from Market Watch</li> <li>AccountSummary - Account summary information</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/","title":"\u2705 Get All Open Positions and Orders","text":"<p>Request: get complete information about all open positions and pending orders, including profit/loss, prices, volumes, timestamps and other details.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OpenedOrders(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>OpenedOrders</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>OpenedOrders(OpenedOrdersRequest) \u2192 OpenedOrdersReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperClient.OpenedOrders(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Returns complete details of all currently open positions and pending orders.</li> <li>Why you need it. Monitor P&amp;L, manage positions, analyze trading activity.</li> <li>Comprehensive data. Includes all order parameters, current prices, and profit calculations.</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Monitor current P&amp;L of open positions</li> <li>List all active trading positions</li> <li>Check order parameters (SL/TP/prices)</li> <li>Calculate total exposure</li> <li>Implement position management logic</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OpenedOrders - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OpenedOrders retrieves all currently opened orders and positions with full details.\n// Returns comprehensive information including profit/loss, prices, volumes, and timestamps.\nfunc (a *MT5Account) OpenedOrders(\n    ctx context.Context,\n    req *pb.OpenedOrdersRequest,\n) (*pb.OpenedOrdersData, error)\n</code></pre> <p>Request message:</p> <pre><code>OpenedOrdersRequest {\n  BMT5_ENUM_OPENED_ORDER_SORT_TYPE InputSortMode = 1;  // Sort order for results\n}\n</code></pre> <p>Reply message:</p> <pre><code>OpenedOrdersReply {\n  oneof response {\n    OpenedOrdersData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.OpenedOrdersRequest</code> Request with sort mode parameter <p>Request fields:</p> Field Type Description <code>InputSortMode</code> <code>BMT5_ENUM_OPENED_ORDER_SORT_TYPE</code> Sort order for returned orders and positions"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#output-openedordersdata","title":"\u2b06\ufe0f Output \u2014 <code>OpenedOrdersData</code>","text":"Field Type Go Type Description <code>OpenedOrders</code> <code>OpenedOrderInfo[]</code> <code>[]*pb.OpenedOrderInfo</code> Array of pending orders <code>PositionInfos</code> <code>PositionInfo[]</code> <code>[]*pb.PositionInfo</code> Array of open positions <p>PositionInfo structure includes:</p> <ul> <li><code>Index</code> - Position index</li> <li><code>Ticket</code> - Position ticket number</li> <li><code>OpenTime</code> - Position open time (timestamp)</li> <li><code>Volume</code> - Position volume</li> <li><code>PriceOpen</code> - Open price</li> <li><code>StopLoss</code> - Stop loss level</li> <li><code>TakeProfit</code> - Take profit level</li> <li><code>PriceCurrent</code> - Current market price</li> <li><code>Swap</code> - Swap charges</li> <li><code>Profit</code> - Current profit/loss</li> <li><code>LastUpdateTime</code> - Last update timestamp</li> <li><code>Type</code> - Position type (BMT5_ENUM_POSITION_TYPE)</li> <li><code>MagicNumber</code> - Magic number</li> <li><code>Identifier</code> - Position identifier</li> <li><code>Reason</code> - Position open reason (BMT5_ENUM_POSITION_REASON)</li> <li><code>Symbol</code> - Trading symbol</li> <li><code>Comment</code> - Position comment</li> <li><code>ExternalId</code> - External identifier</li> <li><code>PositionCommission</code> - Position commission</li> <li><code>AccountLogin</code> - Account login</li> </ul> <p>OpenedOrderInfo structure (pending orders):</p> <ul> <li><code>Index</code> - Order index</li> <li><code>Ticket</code> - Order ticket number</li> <li><code>PriceCurrent</code> - Current market price</li> <li><code>PriceOpen</code> - Order open price</li> <li><code>StopLimit</code> - Stop limit price (for stop-limit orders)</li> <li><code>StopLoss</code> - Stop loss level</li> <li><code>TakeProfit</code> - Take profit level</li> <li><code>VolumeCurrent</code> - Current volume (for partially filled orders)</li> <li><code>VolumeInitial</code> - Initial volume</li> <li><code>MagicNumber</code> - Magic number</li> <li><code>Reason</code> - Order creation reason</li> <li><code>Type</code> - Order type (BMT5_ENUM_ORDER_TYPE)</li> <li><code>State</code> - Order state (BMT5_ENUM_ORDER_STATE)</li> <li><code>TimeExpiration</code> - Expiration time (timestamp)</li> <li><code>TimeSetup</code> - Setup time (timestamp)</li> <li><code>TimeDone</code> - Done time (timestamp)</li> <li><code>TypeFilling</code> - Order filling type (BMT5_ENUM_ORDER_TYPE_FILLING)</li> <li><code>TypeTime</code> - Order time type (BMT5_ENUM_ORDER_TYPE_TIME)</li> <li><code>PositionId</code> - Position ID</li> <li><code>PositionById</code> - Position by ID</li> <li><code>Symbol</code> - Trading symbol</li> <li><code>ExternalId</code> - External identifier</li> <li><code>Comment</code> - Order comment</li> <li><code>AccountLogin</code> - Account login</li> </ul> <p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.BMT5_ENUM_ORDER_TYPE_BMT5_ORDER_TYPE_BUY</code></p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#enum-bmt5_enum_order_type","title":"\ud83d\udcd8 Enum: BMT5_ENUM_ORDER_TYPE","text":"Value Constant Description 0 <code>BMT5_ORDER_TYPE_BUY</code> Market Buy order (long position) 1 <code>BMT5_ORDER_TYPE_SELL</code> Market Sell order (short position) 2 <code>BMT5_ORDER_TYPE_BUY_LIMIT</code> Buy Limit pending order 3 <code>BMT5_ORDER_TYPE_SELL_LIMIT</code> Sell Limit pending order 4 <code>BMT5_ORDER_TYPE_BUY_STOP</code> Buy Stop pending order 5 <code>BMT5_ORDER_TYPE_SELL_STOP</code> Sell Stop pending order 6 <code>BMT5_ORDER_TYPE_BUY_STOP_LIMIT</code> Buy Stop Limit (pending Buy Limit order at StopLimit price) 7 <code>BMT5_ORDER_TYPE_SELL_STOP_LIMIT</code> Sell Stop Limit (pending Sell Limit order at StopLimit price) 8 <code>BMT5_ORDER_TYPE_CLOSE_BY</code> Order to close a position by an opposite one <p>Note: For open positions (PositionInfo), use BMT5_ENUM_POSITION_TYPE instead. For pending orders (OpenedOrderInfo), all types 0-8 can be present.</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#enum-bmt5_enum_position_type","title":"\ud83d\udcd8 Enum: BMT5_ENUM_POSITION_TYPE","text":"Value Constant Description 0 <code>BMT5_POSITION_TYPE_BUY</code> Long position (Buy) 1 <code>BMT5_POSITION_TYPE_SELL</code> Short position (Sell) <p>Used in: PositionInfo.Type</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#enum-bmt5_enum_position_reason","title":"\ud83d\udcd8 Enum: BMT5_ENUM_POSITION_REASON","text":"Value Constant Description 0 <code>BMT5_POSITION_REASON_CLIENT</code> Position opened from desktop terminal 1 <code>BMT5_POSITION_REASON_MOBILE</code> Position opened from mobile application 2 <code>BMT5_POSITION_REASON_WEB</code> Position opened from web platform 3 <code>BMT5_POSITION_REASON_EXPERT</code> Position opened by Expert Advisor or script 4 <code>ORDER_REASON_SL</code> Position closed by Stop Loss 5 <code>ORDER_REASON_TP</code> Position closed by Take Profit 6 <code>ORDER_REASON_SO</code> Position closed by Stop Out <p>Used in: PositionInfo.Reason</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#enum-bmt5_enum_order_state","title":"\ud83d\udcd8 Enum: BMT5_ENUM_ORDER_STATE","text":"Value Constant Description 0 <code>BMT5_ORDER_STATE_STARTED</code> Order checked, but not yet accepted by broker 1 <code>BMT5_ORDER_STATE_PLACED</code> Order accepted 2 <code>BMT5_ORDER_STATE_CANCELED</code> Order canceled by client 3 <code>BMT5_ORDER_STATE_PARTIAL</code> Order partially executed 4 <code>BMT5_ORDER_STATE_FILLED</code> Order fully executed 5 <code>BMT5_ORDER_STATE_REJECTED</code> Order rejected 6 <code>BMT5_ORDER_STATE_EXPIRED</code> Order expired 7 <code>BMT5_ORDER_STATE_REQUEST_ADD</code> Order is being registered (placing to the trading system) 8 <code>BMT5_ORDER_STATE_REQUEST_MODIFY</code> Order is being modified (changing its parameters) 9 <code>BMT5_ORDER_STATE_REQUEST_CANCEL</code> Order is being deleted (deleting from the trading system) <p>Used in: OpenedOrderInfo.State</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#enum-bmt5_enum_order_type_filling","title":"\ud83d\udcd8 Enum: BMT5_ENUM_ORDER_TYPE_FILLING","text":"Value Constant Description 0 <code>BMT5_ORDER_FILLING_FOK</code> Fill or Kill - order must be filled completely or not at all 1 <code>BMT5_ORDER_FILLING_IOC</code> Immediate or Cancel - fill available volume, cancel the rest 2 <code>BMT5_ORDER_FILLING_RETURN</code> Return - order is placed with the broker for execution 3 <code>BMT5_ORDER_FILLING_BOC</code> Book or Cancel - order must be placed as a passive order (limit) <p>Used in: OpenedOrderInfo.TypeFilling</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#enum-bmt5_enum_order_type_time","title":"\ud83d\udcd8 Enum: BMT5_ENUM_ORDER_TYPE_TIME","text":"Value Constant Description 0 <code>BMT5_ORDER_TIME_GTC</code> Good Till Cancelled - order stays until explicitly cancelled 1 <code>BMT5_ORDER_TIME_DAY</code> Good Till Day - order valid until end of trading day 2 <code>BMT5_ORDER_TIME_SPECIFIED</code> Good Till Specified - order valid until specified date/time 3 <code>BMT5_ORDER_TIME_SPECIFIED_DAY</code> Good Till Specified Day - order valid until end of specified day <p>Used in: OpenedOrderInfo.TypeTime</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#enum-bmt5_enum_opened_order_sort_type","title":"\ud83d\udcd8 Enum: BMT5_ENUM_OPENED_ORDER_SORT_TYPE","text":"Value Constant Description 0 <code>BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC</code> Sort by open time (ascending) 1 <code>BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_DESC</code> Sort by open time (descending) 2 <code>BMT5_OPENED_ORDER_SORT_BY_ORDER_TICKET_ID_ASC</code> Sort by order ticket ID (ascending) 3 <code>BMT5_OPENED_ORDER_SORT_BY_ORDER_TICKET_ID_DESC</code> Sort by order ticket ID (descending)"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>10s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Sorting: Use InputSortMode to control the order of returned results (by open time or ticket ID, ascending or descending).</li> <li>Performance: For large accounts, consider using OpenedOrdersTickets for lightweight checks.</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#1-get-all-open-positions","title":"1) Get all open positions","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    data, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{\n        InputSortMode: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    totalCount := len(data.OpenedOrders) + len(data.PositionInfos)\n    fmt.Printf(\"Total items: %d (Pending: %d, Positions: %d)\\n\\n\",\n        totalCount, len(data.OpenedOrders), len(data.PositionInfos))\n\n    // Display positions\n    for _, pos := range data.PositionInfos {\n        fmt.Printf(\"Position Ticket: %d\\n\", pos.Ticket)\n        fmt.Printf(\"  Symbol: %s\\n\", pos.Symbol)\n        fmt.Printf(\"  Type: %d\\n\", pos.Type)\n        fmt.Printf(\"  Volume: %.2f\\n\", pos.Volume)\n        fmt.Printf(\"  Open Price: %.5f\\n\", pos.PriceOpen)\n        fmt.Printf(\"  Current Price: %.5f\\n\", pos.PriceCurrent)\n        fmt.Printf(\"  Profit: %.2f\\n\", pos.Profit)\n        fmt.Printf(\"  SL: %.5f, TP: %.5f\\n\\n\", pos.StopLoss, pos.TakeProfit)\n    }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#2-get-positions-sorted-by-ticket-id","title":"2) Get positions sorted by ticket ID","text":"<pre><code>func GetPositionsSortedByTicket(account *mt5.MT5Account) ([]*pb.PositionInfo, error) {\n    ctx := context.Background()\n\n    data, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{\n        InputSortMode: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_BMT5_OPENED_ORDER_SORT_BY_ORDER_TICKET_ID_ASC,\n    })\n    if err != nil {\n        return nil, fmt.Errorf(\"failed to get positions: %w\", err)\n    }\n\n    return data.PositionInfos, nil\n}\n\n// Usage:\n// positions, _ := GetPositionsSortedByTicket(account)\n// fmt.Printf(\"Positions sorted by ticket: %d\\n\", len(positions))\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#3-calculate-total-profit","title":"3) Calculate total profit","text":"<pre><code>func GetTotalProfit(account *mt5.MT5Account) (float64, error) {\n    ctx := context.Background()\n\n    data, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{\n        InputSortMode: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    var totalProfit float64\n    for _, pos := range data.PositionInfos {\n        totalProfit += pos.Profit\n    }\n\n    return totalProfit, nil\n}\n\n// Usage:\n// profit, _ := GetTotalProfit(account)\n// fmt.Printf(\"Total P&amp;L: %.2f\\n\", profit)\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#4-find-losing-positions","title":"4) Find losing positions","text":"<pre><code>func GetLosingPositions(account *mt5.MT5Account) ([]*pb.PositionInfo, error) {\n    ctx := context.Background()\n\n    data, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{\n        InputSortMode: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC,\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    losingPositions := []*pb.PositionInfo{}\n    for _, pos := range data.PositionInfos {\n        if pos.Profit &lt; 0 {\n            losingPositions = append(losingPositions, pos)\n        }\n    }\n\n    return losingPositions, nil\n}\n\n// Usage:\n// losers, _ := GetLosingPositions(account)\n// for _, pos := range losers {\n//     fmt.Printf(\"Losing position %d: %.2f\\n\", pos.Ticket, pos.Profit)\n// }\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#5-monitor-position-details","title":"5) Monitor position details","text":"<pre><code>func DisplayPositionDetails(account *mt5.MT5Account) {\n    ctx := context.Background()\n\n    data, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{\n        InputSortMode: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC,\n    })\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    var totalProfit, totalSwap, totalCommission float64\n    var buyVolume, sellVolume float64\n\n    fmt.Printf(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\\n\")\n    fmt.Printf(\"\u2551 Open Positions Summary                                         \u2551\\n\")\n    fmt.Printf(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\\n\")\n\n    for _, pos := range data.PositionInfos {\n        fmt.Printf(\"\u2551 #%-10d %-10s Vol:%-6.2f P&amp;L:%-10.2f \u2551\\n\",\n            pos.Ticket, pos.Symbol, pos.Volume, pos.Profit)\n\n        totalProfit += pos.Profit\n        totalSwap += pos.Swap\n        totalCommission += pos.PositionCommission\n\n        if pos.Type == pb.BMT5_ENUM_POSITION_TYPE_BMT5_POSITION_TYPE_BUY {\n            buyVolume += pos.Volume\n        } else if pos.Type == pb.BMT5_ENUM_POSITION_TYPE_BMT5_POSITION_TYPE_SELL {\n            sellVolume += pos.Volume\n        }\n    }\n\n    fmt.Printf(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\\n\")\n    fmt.Printf(\"\u2551 Total Profit:     %10.2f                                \u2551\\n\", totalProfit)\n    fmt.Printf(\"\u2551 Total Swap:       %10.2f                                \u2551\\n\", totalSwap)\n    fmt.Printf(\"\u2551 Total Commission: %10.2f                                \u2551\\n\", totalCommission)\n    fmt.Printf(\"\u2551 Buy Volume:       %10.2f                                \u2551\\n\", buyVolume)\n    fmt.Printf(\"\u2551 Sell Volume:      %10.2f                                \u2551\\n\", sellVolume)\n    fmt.Printf(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\\n\")\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#6-find-positions-by-magic-number","title":"6) Find positions by magic number","text":"<pre><code>func GetPositionsByMagic(account *mt5.MT5Account, magic int64) ([]*pb.PositionInfo, error) {\n    ctx := context.Background()\n\n    data, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{\n        InputSortMode: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC,\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    positions := []*pb.PositionInfo{}\n    for _, pos := range data.PositionInfos {\n        if pos.MagicNumber == magic {\n            positions = append(positions, pos)\n        }\n    }\n\n    return positions, nil\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#check-if-symbol-has-open-positions","title":"Check if symbol has open positions","text":"<pre><code>func HasPositionsForSymbol(account *mt5.MT5Account, symbol string) (bool, error) {\n    ctx := context.Background()\n\n    data, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{\n        InputSortMode: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC,\n    })\n    if err != nil {\n        return false, err\n    }\n\n    // Filter by symbol\n    for _, pos := range data.PositionInfos {\n        if pos.Symbol == symbol {\n            return true, nil\n        }\n    }\n\n    return false, nil\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#calculate-exposure-by-symbol","title":"Calculate exposure by symbol","text":"<pre><code>func GetSymbolExposure(account *mt5.MT5Account, symbol string) (buyVolume, sellVolume float64, err error) {\n    ctx := context.Background()\n\n    data, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{\n        InputSortMode: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC,\n    })\n    if err != nil {\n        return 0, 0, err\n    }\n\n    for _, pos := range data.PositionInfos {\n        if pos.Symbol != symbol {\n            continue\n        }\n        if pos.Type == pb.BMT5_ENUM_POSITION_TYPE_BMT5_POSITION_TYPE_BUY {\n            buyVolume += pos.Volume\n        } else if pos.Type == pb.BMT5_ENUM_POSITION_TYPE_BMT5_POSITION_TYPE_SELL {\n            sellVolume += pos.Volume\n        }\n    }\n\n    return buyVolume, sellVolume, nil\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrders/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>PositionsTotal - Get quick position count</li> <li>OpenedOrdersTickets - Get only ticket numbers (lightweight)</li> <li>OnPositionProfit - Stream real-time P&amp;L updates</li> <li>OrderClose - Close positions</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/","title":"\u2705 Get Ticket Numbers of Open Positions","text":"<p>Request: get only ticket numbers of open positions and pending orders without full data. Lightweight alternative to OpenedOrders.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OpenedOrdersTickets(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>OpenedOrdersTickets</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>OpenedOrdersTickets(OpenedOrdersTicketsRequest) \u2192 OpenedOrdersTicketsReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperClient.OpenedOrdersTickets(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Returns only ticket numbers of open positions without detailed data.</li> <li>Why you need it. Lightweight check for position tracking, monitoring, or subsequent operations.</li> <li>Performance. Much faster than OpenedOrders when you don't need full position details.</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Track which positions are open</li> <li>Monitor position changes efficiently</li> <li>Build position tracking systems</li> <li>Compare ticket lists between requests</li> <li>Lightweight position monitoring</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OpenedOrdersTickets - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OpenedOrdersTickets retrieves only ticket numbers of currently opened orders and positions.\n// This is a lightweight alternative when you only need ticket IDs.\nfunc (a *MT5Account) OpenedOrdersTickets(\n    ctx context.Context,\n    req *pb.OpenedOrdersTicketsRequest,\n) (*pb.OpenedOrdersTicketsData, error)\n</code></pre> <p>Request message:</p> <pre><code>OpenedOrdersTicketsRequest {\n  string Symbol = 1;  // Optional symbol filter (empty = all symbols)\n  string Group = 2;   // Optional group filter\n}\n</code></pre> <p>Reply message:</p> <pre><code>OpenedOrdersTicketsReply {\n  oneof response {\n    OpenedOrdersTicketsData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.OpenedOrdersTicketsRequest</code> Request with optional Symbol and Group filter <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Optional symbol filter (empty string = all symbols) <code>Group</code> <code>string</code> Optional group filter"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#output-openedordersticketsdata","title":"\u2b06\ufe0f Output \u2014 <code>OpenedOrdersTicketsData</code>","text":"Field Type Go Type Description <code>OpenedOrdersTickets</code> <code>uint64[]</code> <code>[]uint64</code> Array of pending order tickets <code>OpenedPositionTickets</code> <code>uint64[]</code> <code>[]uint64</code> Array of open position tickets"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>5s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Symbol filter: Use Symbol field to get tickets for specific instrument only.</li> <li>Performance: Much faster than OpenedOrders, use when you only need ticket numbers.</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#1-get-all-open-position-tickets","title":"1) Get all open position tickets","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    data, err := account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{\n        Symbol: \"\", // All symbols\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    totalTickets := len(data.OpenedOrdersTickets) + len(data.OpenedPositionTickets)\n    fmt.Printf(\"Total tickets: %d (Pending: %d, Positions: %d)\\n\",\n        totalTickets, len(data.OpenedOrdersTickets), len(data.OpenedPositionTickets))\n\n    fmt.Printf(\"\\nPosition tickets:\\n\")\n    for _, ticket := range data.OpenedPositionTickets {\n        fmt.Printf(\"  - %d\\n\", ticket)\n    }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#2-get-tickets-for-specific-symbol","title":"2) Get tickets for specific symbol","text":"<pre><code>func GetSymbolTickets(account *mt5.MT5Account, symbol string) ([]uint64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    data, err := account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return nil, fmt.Errorf(\"failed to get tickets: %w\", err)\n    }\n\n    return data.OpenedPositionTickets, nil\n}\n\n// Usage:\n// tickets, _ := GetSymbolTickets(account, \"EURUSD\")\n// fmt.Printf(\"EURUSD tickets: %v\\n\", tickets)\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#3-monitor-new-positions","title":"3) Monitor new positions","text":"<pre><code>func MonitorNewPositions(account *mt5.MT5Account, interval time.Duration) {\n    ctx := context.Background()\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    var lastTickets []uint64\n\n    for range ticker.C {\n        data, err := account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{})\n        if err != nil {\n            fmt.Printf(\"Error: %v\\n\", err)\n            continue\n        }\n\n        currentTickets := data.OpenedPositionTickets\n\n        if lastTickets != nil {\n            // Find new tickets\n            newTickets := findNewTickets(lastTickets, currentTickets)\n            for _, ticket := range newTickets {\n                fmt.Printf(\"[%s] New position opened: %d\\n\",\n                    time.Now().Format(\"15:04:05\"),\n                    ticket,\n                )\n            }\n\n            // Find closed tickets\n            closedTickets := findNewTickets(currentTickets, lastTickets)\n            for _, ticket := range closedTickets {\n                fmt.Printf(\"[%s] Position closed: %d\\n\",\n                    time.Now().Format(\"15:04:05\"),\n                    ticket,\n                )\n            }\n        }\n\n        lastTickets = currentTickets\n    }\n}\n\nfunc findNewTickets(old, new []uint64) []uint64 {\n    oldSet := make(map[uint64]bool)\n    for _, t := range old {\n        oldSet[t] = true\n    }\n\n    newTickets := []uint64{}\n    for _, t := range new {\n        if !oldSet[t] {\n            newTickets = append(newTickets, t)\n        }\n    }\n    return newTickets\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#4-check-if-specific-ticket-is-still-open","title":"4) Check if specific ticket is still open","text":"<pre><code>func IsTicketOpen(account *mt5.MT5Account, ticket uint64) (bool, error) {\n    ctx := context.Background()\n\n    data, err := account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{})\n    if err != nil {\n        return false, err\n    }\n\n    for _, t := range data.OpenedPositionTickets {\n        if t == ticket {\n            return true, nil\n        }\n    }\n\n    return false, nil\n}\n\n// Usage:\n// isOpen, _ := IsTicketOpen(account, 12345678)\n// if isOpen {\n//     fmt.Println(\"Position is still open\")\n// }\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#5-quick-position-count","title":"5) Quick position count","text":"<pre><code>func QuickPositionCount(account *mt5.MT5Account, symbol string) (int, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second)\n    defer cancel()\n\n    data, err := account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    return len(data.OpenedPositionTickets), nil\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#6-compare-ticket-sets","title":"6) Compare ticket sets","text":"<pre><code>func CompareTicketLists(account *mt5.MT5Account) {\n    ctx := context.Background()\n\n    // Get tickets at two different times\n    data1, _ := account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{})\n    time.Sleep(5 * time.Second)\n    data2, _ := account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{})\n\n    added := findNewTickets(data1.OpenedPositionTickets, data2.OpenedPositionTickets)\n    removed := findNewTickets(data2.OpenedPositionTickets, data1.OpenedPositionTickets)\n\n    fmt.Printf(\"Added positions: %v\\n\", added)\n    fmt.Printf(\"Removed positions: %v\\n\", removed)\n    fmt.Printf(\"Unchanged: %d positions\\n\", len(data1.OpenedPositionTickets)-len(removed))\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#fast-position-existence-check","title":"Fast position existence check","text":"<pre><code>func HasAnyPositions(account *mt5.MT5Account) bool {\n    ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second)\n    defer cancel()\n\n    data, err := account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{})\n    if err != nil {\n        return false\n    }\n\n    return len(data.OpenedPositionTickets) &gt; 0\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#track-ticket-changes","title":"Track ticket changes","text":"<pre><code>type TicketMonitor struct {\n    account     *mt5.MT5Account\n    lastTickets map[uint64]bool\n}\n\nfunc (tm *TicketMonitor) CheckChanges() (added, removed []uint64, err error) {\n    ctx := context.Background()\n\n    data, err := tm.account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{})\n    if err != nil {\n        return nil, nil, err\n    }\n\n    currentTickets := make(map[uint64]bool)\n    for _, t := range data.OpenedPositionTickets {\n        currentTickets[t] = true\n\n        // Check if new\n        if tm.lastTickets != nil &amp;&amp; !tm.lastTickets[t] {\n            added = append(added, t)\n        }\n    }\n\n    // Check for removed\n    if tm.lastTickets != nil {\n        for t := range tm.lastTickets {\n            if !currentTickets[t] {\n                removed = append(removed, t)\n            }\n        }\n    }\n\n    tm.lastTickets = currentTickets\n    return added, removed, nil\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OpenedOrdersTickets/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OpenedOrders - Get full position details</li> <li>PositionsTotal - Get quick position count</li> <li>OnPositionsAndPendingOrdersTickets - Stream ticket changes</li> <li>OrderClose - Close positions by ticket</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/","title":"\u2705 Get Order History","text":"<p>Request: retrieve historical orders within a specified time range with pagination support for large datasets.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OrderHistory(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>OrderHistory</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>OrderHistory(OrderHistoryRequest) \u2192 OrderHistoryReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperClient.OrderHistory(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieves historical orders within a specified time range.</li> <li>Why you need it. Analyze trading history, calculate statistics, review past activity.</li> <li>Pagination support. Use PageNumber and ItemsPerPage for handling large datasets efficiently.</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Retrieve historical order records</li> <li>Analyze trading performance</li> <li>Generate trading reports</li> <li>Audit order execution history</li> <li>Track order modifications</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OrderHistory - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OrderHistory retrieves historical orders within a specified time range.\n// Supports pagination via Offset and Limit parameters.\nfunc (a *MT5Account) OrderHistory(\n    ctx context.Context,\n    req *pb.OrderHistoryRequest,\n) (*pb.OrdersHistoryData, error)\n</code></pre> <p>Request message:</p> <pre><code>OrderHistoryRequest {\n  google.protobuf.Timestamp inputFrom = 1;                   // Start date (required - server time)\n  google.protobuf.Timestamp inputTo = 2;                     // End date (required - server time)\n  BMT5_ENUM_ORDER_HISTORY_SORT_TYPE inputSortMode = 3;     // Sort mode (0 - by open time, 1 - by close time, 2 - by ticket id)\n  int32 pageNumber = 4;                                      // Page number (default 0)\n  int32 itemsPerPage = 5;                                    // Items per page (default 0 = all)\n}\n</code></pre> <p>Reply message:</p> <pre><code>OrderHistoryReply {\n  oneof response {\n    OrdersHistoryData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.OrderHistoryRequest</code> Request with date range and pagination <p>Request fields:</p> Field Type Description <code>InputFrom</code> <code>google.protobuf.Timestamp</code> Start date (required - server time) <code>InputTo</code> <code>google.protobuf.Timestamp</code> End date (required - server time) <code>InputSortMode</code> <code>BMT5_ENUM_ORDER_HISTORY_SORT_TYPE</code> Sort mode (optional: 0=open time asc, 1=open time desc, etc) <code>PageNumber</code> <code>int32</code> Page number for pagination (default 0) <code>ItemsPerPage</code> <code>int32</code> Number of items per page (default 0 = all)"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#output-ordershistorydata","title":"\u2b06\ufe0f Output \u2014 <code>OrdersHistoryData</code>","text":"Field Type Go Type Description <code>ArrayTotal</code> <code>int32</code> <code>int32</code> Total number of orders in query result <code>PageNumber</code> <code>int32</code> <code>int32</code> Current page number <code>ItemsPerPage</code> <code>int32</code> <code>int32</code> Number of items per page <code>HistoryData</code> <code>HistoryData[]</code> <code>[]*pb.HistoryData</code> Array of historical data (orders and deals) <p>HistoryData structure:</p> <ul> <li><code>Index</code> (uint32) - Record index</li> <li><code>HistoryOrder</code> (*OrderHistoryData) - Order information (if available)</li> <li><code>HistoryDeal</code> (*DealHistoryData) - Deal information (if available)</li> </ul> <p>OrderHistoryData complete structure:</p> <ul> <li><code>Ticket</code> (uint64) - Order ticket number</li> <li><code>SetupTime</code> (*timestamppb.Timestamp) - Time when order was placed</li> <li><code>DoneTime</code> (*timestamppb.Timestamp) - Time when order was executed/cancelled</li> <li><code>State</code> (BMT5_ENUM_ORDER_STATE) - Order state</li> <li><code>PriceCurrent</code> (float64) - Current market price</li> <li><code>PriceOpen</code> (float64) - Order open price</li> <li><code>StopLimit</code> (float64) - Stop limit price</li> <li><code>StopLoss</code> (float64) - Stop loss level</li> <li><code>TakeProfit</code> (float64) - Take profit level</li> <li><code>VolumeCurrent</code> (float64) - Current volume (for partially filled orders)</li> <li><code>VolumeInitial</code> (float64) - Initial volume</li> <li><code>MagicNumber</code> (int64) - Magic number</li> <li><code>Type</code> (BMT5_ENUM_ORDER_TYPE) - Order type</li> <li><code>TimeExpiration</code> (*timestamppb.Timestamp) - Expiration time</li> <li><code>TypeFilling</code> (BMT5_ENUM_ORDER_TYPE_FILLING) - Order filling type</li> <li><code>TypeTime</code> (BMT5_ENUM_ORDER_TYPE_TIME) - Order time type</li> <li><code>PositionId</code> (uint64) - Position ID</li> <li><code>Symbol</code> (string) - Trading symbol</li> <li><code>ExternalId</code> (string) - External identifier</li> <li><code>Comment</code> (string) - Order comment</li> <li><code>AccountLogin</code> (int64) - Account login</li> </ul> <p>DealHistoryData complete structure:</p> <ul> <li><code>Ticket</code> (uint64) - Deal ticket number</li> <li><code>Profit</code> (float64) - Deal profit</li> <li><code>Commission</code> (float64) - Commission</li> <li><code>Fee</code> (float64) - Additional fee</li> <li><code>Price</code> (float64) - Execution price</li> <li><code>StopLoss</code> (float64) - Stop loss level</li> <li><code>TakeProfit</code> (float64) - Take profit level</li> <li><code>Swap</code> (float64) - Swap charges</li> <li><code>Volume</code> (float64) - Deal volume</li> <li><code>EntryType</code> (BMT5_ENUM_DEAL_ENTRY_TYPE) - Deal entry type</li> <li><code>Time</code> (*timestamppb.Timestamp) - Deal execution time</li> <li><code>Type</code> (BMT5_ENUM_DEAL_TYPE) - Deal type</li> <li><code>Reason</code> (BMT5_ENUM_DEAL_REASON) - Deal execution reason</li> <li><code>PositionId</code> (uint64) - Position ID</li> <li><code>Comment</code> (string) - Deal comment</li> <li><code>Symbol</code> (string) - Trading symbol</li> <li><code>ExternalId</code> (string) - External identifier</li> <li><code>AccountLogin</code> (int64) - Account login</li> </ul> <p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_BMT5_SORT_BY_OPEN_TIME_ASC</code></p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#enum-bmt5_enum_order_history_sort_type","title":"\ud83d\udcd8 Enum: BMT5_ENUM_ORDER_HISTORY_SORT_TYPE","text":"Value Constant Description 0 <code>BMT5_SORT_BY_OPEN_TIME_ASC</code> Sort by open time (ascending) 1 <code>BMT5_SORT_BY_OPEN_TIME_DESC</code> Sort by open time (descending) 2 <code>BMT5_SORT_BY_CLOSE_TIME_ASC</code> Sort by close time (ascending) 3 <code>BMT5_SORT_BY_CLOSE_TIME_DESC</code> Sort by close time (descending) 4 <code>BMT5_SORT_BY_ORDER_TICKET_ID_ASC</code> Sort by order ticket ID (ascending) 5 <code>BMT5_SORT_BY_ORDER_TICKET_ID_DESC</code> Sort by order ticket ID (descending)"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#enum-bmt5_enum_order_type","title":"\ud83d\udcd8 Enum: BMT5_ENUM_ORDER_TYPE","text":"Value Constant Description 0 <code>BMT5_ORDER_TYPE_BUY</code> Market Buy order 1 <code>BMT5_ORDER_TYPE_SELL</code> Market Sell order 2 <code>BMT5_ORDER_TYPE_BUY_LIMIT</code> Buy Limit pending order 3 <code>BMT5_ORDER_TYPE_SELL_LIMIT</code> Sell Limit pending order 4 <code>BMT5_ORDER_TYPE_BUY_STOP</code> Buy Stop pending order 5 <code>BMT5_ORDER_TYPE_SELL_STOP</code> Sell Stop pending order 6 <code>BMT5_ORDER_TYPE_BUY_STOP_LIMIT</code> Buy Stop Limit (pending Buy Limit order at StopLimit price) 7 <code>BMT5_ORDER_TYPE_SELL_STOP_LIMIT</code> Sell Stop Limit (pending Sell Limit order at StopLimit price) 8 <code>BMT5_ORDER_TYPE_CLOSE_BY</code> Order to close a position by an opposite one"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#enum-bmt5_enum_order_state","title":"\ud83d\udcd8 Enum: BMT5_ENUM_ORDER_STATE","text":"Value Constant Description 0 <code>BMT5_ORDER_STATE_STARTED</code> Order checked, but not yet accepted by broker 1 <code>BMT5_ORDER_STATE_PLACED</code> Order accepted 2 <code>BMT5_ORDER_STATE_CANCELED</code> Order canceled by client 3 <code>BMT5_ORDER_STATE_PARTIAL</code> Order partially executed 4 <code>BMT5_ORDER_STATE_FILLED</code> Order fully executed 5 <code>BMT5_ORDER_STATE_REJECTED</code> Order rejected 6 <code>BMT5_ORDER_STATE_EXPIRED</code> Order expired 7 <code>BMT5_ORDER_STATE_REQUEST_ADD</code> Order is being registered (placing to trading system) 8 <code>BMT5_ORDER_STATE_REQUEST_MODIFY</code> Order is being modified (changing parameters) 9 <code>BMT5_ORDER_STATE_REQUEST_CANCEL</code> Order is being deleted (deleting from trading system) <p>Used in: OrderHistoryData.State</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#enum-bmt5_enum_order_type_filling","title":"\ud83d\udcd8 Enum: BMT5_ENUM_ORDER_TYPE_FILLING","text":"Value Constant Description 0 <code>BMT5_ORDER_FILLING_FOK</code> Fill or Kill - order must be filled completely or not at all 1 <code>BMT5_ORDER_FILLING_IOC</code> Immediate or Cancel - fill available volume, cancel the rest 2 <code>BMT5_ORDER_FILLING_RETURN</code> Return - order is placed with the broker for execution 3 <code>BMT5_ORDER_FILLING_BOC</code> Book or Cancel - order must be placed as a passive order (limit) <p>Used in: OrderHistoryData.TypeFilling</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#enum-bmt5_enum_order_type_time","title":"\ud83d\udcd8 Enum: BMT5_ENUM_ORDER_TYPE_TIME","text":"Value Constant Description 0 <code>BMT5_ORDER_TIME_GTC</code> Good Till Cancelled - order stays until explicitly cancelled 1 <code>BMT5_ORDER_TIME_DAY</code> Good Till Day - order valid until end of trading day 2 <code>BMT5_ORDER_TIME_SPECIFIED</code> Good Till Specified - order valid until specified date/time 3 <code>BMT5_ORDER_TIME_SPECIFIED_DAY</code> Good Till Specified Day - order valid until end of specified day <p>Used in: OrderHistoryData.TypeTime</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#enum-bmt5_enum_deal_type","title":"\ud83d\udcd8 Enum: BMT5_ENUM_DEAL_TYPE","text":"Value Constant Description 0 <code>BMT5_DEAL_TYPE_BUY</code> Buy deal 1 <code>BMT5_DEAL_TYPE_SELL</code> Sell deal 2 <code>BMT5_DEAL_TYPE_BALANCE</code> Balance operation 3 <code>BMT5_DEAL_TYPE_CREDIT</code> Credit operation 4 <code>BMT5_DEAL_TYPE_CHARGE</code> Additional charge 5 <code>BMT5_DEAL_TYPE_CORRECTION</code> Correction 6 <code>BMT5_DEAL_TYPE_BONUS</code> Bonus 7 <code>BMT5_DEAL_TYPE_COMMISSION</code> Additional commission 8 <code>BMT5_DEAL_TYPE_COMMISSION_DAILY</code> Daily commission 9 <code>BMT5_DEAL_TYPE_COMMISSION_MONTHLY</code> Monthly commission 10 <code>BMT5_DEAL_TYPE_COMMISSION_AGENT_DAILY</code> Daily agent commission 11 <code>BMT5_DEAL_TYPE_COMMISSION_AGENT_MONTHLY</code> Monthly agent commission 12 <code>BMT5_DEAL_TYPE_INTEREST</code> Interest rate 13 <code>BMT5_DEAL_TYPE_BUY_CANCELED</code> Canceled buy deal 14 <code>BMT5_DEAL_TYPE_SELL_CANCELED</code> Canceled sell deal 15 <code>BMT5_DEAL_DIVIDEND</code> Dividend operations 16 <code>BMT5_DEAL_DIVIDEND_FRANKED</code> Franked (non-taxable) dividend operations 17 <code>BMT5_DEAL_TAX</code> Tax charges <p>Used in: DealHistoryData.Type</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#enum-bmt5_enum_deal_reason","title":"\ud83d\udcd8 Enum: BMT5_ENUM_DEAL_REASON","text":"Value Constant Description 0 <code>BMT5_DEAL_REASON_CLIENT</code> Deal executed from desktop terminal 1 <code>BMT5_DEAL_REASON_MOBILE</code> Deal executed from mobile application 2 <code>BMT5_DEAL_REASON_WEB</code> Deal executed from web platform 3 <code>BMT5_DEAL_REASON_EXPERT</code> Deal executed by Expert Advisor or script 4 <code>BMT5_DEAL_REASON_SL</code> Deal executed by Stop Loss 5 <code>BMT5_DEAL_REASON_TP</code> Deal executed by Take Profit 6 <code>BMT5_DEAL_REASON_SO</code> Deal executed by Stop Out 7 <code>BMT5_DEAL_REASON_ROLLOVER</code> Deal executed due to rollover 8 <code>BMT5_DEAL_REASON_VMARGIN</code> Deal executed after variation margin 9 <code>BMT5_DEAL_REASON_SPLIT</code> Deal executed after split 10 <code>BMT5_DEAL_REASON_CORPORATE_ACTION</code> Deal executed due to corporate action <p>Used in: DealHistoryData.Reason</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#enum-bmt5_enum_deal_entry_type","title":"\ud83d\udcd8 Enum: BMT5_ENUM_DEAL_ENTRY_TYPE","text":"Value Constant Description 0 <code>BMT5_DEAL_ENTRY_IN</code> Entry into the market 1 <code>BMT5_DEAL_ENTRY_OUT</code> Exit from the market 2 <code>BMT5_DEAL_ENTRY_INOUT</code> Reverse (close and open opposite position) 3 <code>BMT5_DEAL_ENTRY_OUT_BY</code> Close position by an opposite one <p>Used in: DealHistoryData.EntryType</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>15s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Time range: InputFrom and InputTo are <code>google.protobuf.Timestamp</code> (use <code>timestamppb.New()</code> to convert from <code>time.Time</code>).</li> <li>Pagination: Use PageNumber and ItemsPerPage to retrieve large datasets in chunks.</li> <li>Sort mode: InputSortMode allows sorting by open time, close time, or ticket ID.</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#1-get-last-7-days-history","title":"1) Get last 7 days history","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    \"google.golang.org/protobuf/types/known/timestamppb\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 15*time.Second)\n    defer cancel()\n\n    now := time.Now()\n    weekAgo := now.Add(-7 * 24 * time.Hour)\n\n    data, err := account.OrderHistory(ctx, &amp;pb.OrderHistoryRequest{\n        InputFrom:     timestamppb.New(weekAgo),\n        InputTo:       timestamppb.New(now),\n        InputSortMode: pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_BMT5_SORT_BY_OPEN_TIME_DESC,\n        PageNumber:    0,\n        ItemsPerPage:  100,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Orders in last 7 days: %d\\n\", len(data.HistoryData))\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#2-get-history-with-sorting","title":"2) Get history with sorting","text":"<pre><code>func GetHistoryWithSorting(account *mt5.MT5Account, days int) ([]*pb.HistoryData, error) {\n    ctx := context.Background()\n\n    now := time.Now()\n    fromDate := now.Add(-time.Duration(days) * 24 * time.Hour)\n\n    data, err := account.OrderHistory(ctx, &amp;pb.OrderHistoryRequest{\n        InputFrom:     timestamppb.New(fromDate),\n        InputTo:       timestamppb.New(now),\n        InputSortMode: pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_BMT5_SORT_BY_CLOSE_TIME_DESC,\n        PageNumber:    0,\n        ItemsPerPage:  0, // All orders\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    return data.HistoryData, nil\n}\n\n// Usage:\n// orders, _ := GetHistoryWithSorting(account, 30)\n// fmt.Printf(\"Orders last 30 days (sorted by close time): %d\\n\", len(orders))\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#3-paginated-history-retrieval","title":"3) Paginated history retrieval","text":"<pre><code>func GetAllHistoryPaginated(account *mt5.MT5Account, fromDate, toDate time.Time, pageSize int32) ([]*pb.HistoryData, error) {\n    ctx := context.Background()\n\n    allHistory := []*pb.HistoryData{}\n    pageNumber := int32(0)\n\n    for {\n        data, err := account.OrderHistory(ctx, &amp;pb.OrderHistoryRequest{\n            InputFrom:     timestamppb.New(fromDate),\n            InputTo:       timestamppb.New(toDate),\n            InputSortMode: pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_BMT5_SORT_BY_OPEN_TIME_ASC,\n            PageNumber:    pageNumber,\n            ItemsPerPage:  pageSize,\n        })\n        if err != nil {\n            return nil, err\n        }\n\n        if len(data.HistoryData) == 0 {\n            break\n        }\n\n        allHistory = append(allHistory, data.HistoryData...)\n        pageNumber++\n\n        fmt.Printf(\"Retrieved %d orders (total: %d)\\n\", len(data.HistoryData), len(allHistory))\n\n        if int32(len(data.HistoryData)) &lt; pageSize {\n            break\n        }\n    }\n\n    return allHistory, nil\n}\n\n// Usage:\n// fromDate := time.Now().Add(-30 * 24 * time.Hour)\n// toDate := time.Now()\n// orders, _ := GetAllHistoryPaginated(account, fromDate, toDate, 100)\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#4-calculate-monthly-statistics","title":"4) Calculate monthly statistics","text":"<pre><code>func GetMonthlyStats(account *mt5.MT5Account, year, month int) {\n    ctx := context.Background()\n\n    startDate := time.Date(year, time.Month(month), 1, 0, 0, 0, 0, time.UTC)\n    endDate := startDate.AddDate(0, 1, 0).Add(-time.Second)\n\n    data, err := account.OrderHistory(ctx, &amp;pb.OrderHistoryRequest{\n        InputFrom:     timestamppb.New(startDate),\n        InputTo:       timestamppb.New(endDate),\n        InputSortMode: pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_BMT5_SORT_BY_OPEN_TIME_ASC,\n        PageNumber:    0,\n        ItemsPerPage:  0,\n    })\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    var totalProfit float64\n    wins := 0\n    losses := 0\n\n    for _, item := range data.HistoryData {\n        if item.HistoryOrder != nil {\n            // Note: Profit may not be available in OrderHistoryData\n            // Use DealHistoryData for profit information\n        }\n        if item.HistoryDeal != nil {\n            totalProfit += item.HistoryDeal.Profit\n            if item.HistoryDeal.Profit &gt; 0 {\n                wins++\n            } else if item.HistoryDeal.Profit &lt; 0 {\n                losses++\n            }\n        }\n    }\n\n    fmt.Printf(\"Month %d/%d Statistics:\\n\", month, year)\n    fmt.Printf(\"  Total Orders: %d\\n\", len(data.HistoryData))\n    fmt.Printf(\"  Wins: %d\\n\", wins)\n    fmt.Printf(\"  Losses: %d\\n\", losses)\n    if wins+losses &gt; 0 {\n        fmt.Printf(\"  Win Rate: %.2f%%\\n\", float64(wins)/float64(wins+losses)*100)\n    }\n    fmt.Printf(\"  Total Profit: %.2f\\n\", totalProfit)\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#5-find-orders-by-date-range","title":"5) Find orders by date range","text":"<pre><code>func FindOrdersByDateRange(account *mt5.MT5Account, startDate, endDate string) ([]*pb.HistoryData, error) {\n    ctx := context.Background()\n\n    start, _ := time.Parse(\"2006-01-02\", startDate)\n    end, _ := time.Parse(\"2006-01-02\", endDate)\n    end = end.Add(24 * time.Hour).Add(-time.Second)\n\n    data, err := account.OrderHistory(ctx, &amp;pb.OrderHistoryRequest{\n        InputFrom:     timestamppb.New(start),\n        InputTo:       timestamppb.New(end),\n        InputSortMode: pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_BMT5_SORT_BY_OPEN_TIME_ASC,\n        PageNumber:    0,\n        ItemsPerPage:  0,\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    return data.HistoryData, nil\n}\n\n// Usage:\n// orders, _ := FindOrdersByDateRange(account, \"2024-01-01\", \"2024-01-31\")\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#get-todays-history","title":"Get today's history","text":"<pre><code>func GetTodayHistory(account *mt5.MT5Account) ([]*pb.HistoryData, error) {\n    ctx := context.Background()\n\n    now := time.Now()\n    startOfDay := time.Date(now.Year(), now.Month(), now.Day(), 0, 0, 0, 0, now.Location())\n\n    data, err := account.OrderHistory(ctx, &amp;pb.OrderHistoryRequest{\n        InputFrom:     timestamppb.New(startOfDay),\n        InputTo:       timestamppb.New(now),\n        InputSortMode: pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_BMT5_SORT_BY_OPEN_TIME_ASC,\n        PageNumber:    0,\n        ItemsPerPage:  0,\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    return data.HistoryData, nil\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#calculate-profit-for-period","title":"Calculate profit for period","text":"<pre><code>func CalculatePeriodProfit(account *mt5.MT5Account, fromDate, toDate time.Time) (float64, error) {\n    ctx := context.Background()\n\n    data, err := account.OrderHistory(ctx, &amp;pb.OrderHistoryRequest{\n        InputFrom:     timestamppb.New(fromDate),\n        InputTo:       timestamppb.New(toDate),\n        InputSortMode: pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_BMT5_SORT_BY_OPEN_TIME_ASC,\n        PageNumber:    0,\n        ItemsPerPage:  0,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    var totalProfit float64\n    for _, item := range data.HistoryData {\n        // Profit is in DealHistoryData, not OrderHistoryData\n        if item.HistoryDeal != nil {\n            totalProfit += item.HistoryDeal.Profit\n        }\n    }\n\n    return totalProfit, nil\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/OrderHistory/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>PositionsHistory - Get closed positions with P&amp;L</li> <li>OpenedOrders - Get current open positions</li> <li>OnTrade - Stream trade events in real-time</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/Position_Orders_Information.Overview/","title":"MT5Account \u00b7 Positions &amp; Orders Information - Overview","text":"<p>Open positions, pending orders, historical deals, order history. Use this page to choose the right API for position/order queries.</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/Position_Orders_Information.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/Position_Orders_Information.Overview/#current-state","title":"Current State","text":"<ul> <li>PositionsTotal - count of open positions.</li> <li>OpenedOrders - full details of all open positions and pending orders.</li> <li>OpenedOrdersTickets - ticket numbers only (lightweight).</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/Position_Orders_Information.Overview/#historical-data","title":"Historical Data","text":"<ul> <li>OrderHistory - historical orders within time range (with pagination).</li> <li>PositionsHistory - closed positions within time range (with pagination).</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/Position_Orders_Information.Overview/#step-by-step-tutorials","title":"\ud83d\udcda Step-by-step tutorials","text":"<p>Want detailed explanations with line-by-line code breakdown? Check these guides:</p> <ul> <li>PositionsTotal - How it works</li> <li>OpenedOrders - How it works</li> <li>OpenedOrdersTickets - How it works</li> <li>OrderHistory - How it works</li> <li>PositionsHistory - How it works</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/Position_Orders_Information.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>PositionsTotal \u2192 quick count of open positions.</li> <li>OpenedOrders \u2192 get full details of all open positions/orders.</li> <li>OpenedOrdersTickets \u2192 get ticket numbers only (faster than full details).</li> <li>OrderHistory \u2192 query historical orders (placed, canceled, filled).</li> <li>PositionsHistory \u2192 query closed positions (deals).</li> </ul> <p>Rule of thumb: need quick count \u2192 <code>PositionsTotal</code>; need full details \u2192 <code>OpenedOrders</code>; need tickets only \u2192 <code>OpenedOrdersTickets</code>; need history \u2192 <code>OrderHistory</code> or <code>PositionsHistory</code>.</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/Position_Orders_Information.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Key inputs Count of open positions <code>PositionsTotal</code> PositionsTotalData (int64) (none) All open positions/orders (full details) <code>OpenedOrders</code> OpenedOrdersData Symbol (optional), Group (optional) Ticket numbers only (lightweight) <code>OpenedOrdersTickets</code> Two arrays of uint64 Symbol (optional), Group (optional) Historical orders in time range <code>OrderHistory</code> OrdersHistoryData InputFrom, InputTo, PageNumber, ItemsPerPage Closed positions in time range <code>PositionsHistory</code> PositionsHistoryData PositionOpenTimeFrom, PositionOpenTimeTo, PageNumber, ItemsPerPage"},{"location":"MT5Account/3.%20Position_Orders_Information/Position_Orders_Information.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Positions vs Orders - Positions = executed market positions; Orders = pending orders (limits, stops).</li> <li>OpenedOrders returns both - Returns open positions AND pending orders in separate arrays.</li> <li>Tickets - Unique identifier for each position/order.</li> <li>Pagination - OrderHistory and PositionsHistory support PageNumber/ItemsPerPage for large datasets.</li> <li>Time range - OrderHistory and PositionsHistory use <code>google.protobuf.Timestamp</code> (convert from <code>time.Time</code> using <code>timestamppb.New()</code>).</li> <li>OpenedOrdersTickets - Much lighter than OpenedOrders if you only need ticket numbers.</li> <li>Historical data limits - Broker may limit how far back you can query.</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/Position_Orders_Information.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Count open positions\ndata, err := account.PositionsTotal(ctx)\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"Open positions: %d\\n\", data.TotalPositions)\n</code></pre> <pre><code>// Get all open positions/orders\ndata, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"Pending orders: %d, Open positions: %d\\n\",\n    len(data.OpenedOrders), len(data.PositionInfos))\n\nfor _, pos := range data.PositionInfos {\n    fmt.Printf(\"#%d: %s %.2f lots @ %.5f, P/L: $%.2f\\n\",\n        pos.Ticket,\n        pos.Symbol,\n        pos.Volume,\n        pos.PriceOpen,\n        pos.Profit)\n}\n</code></pre> <pre><code>// Get ticket numbers only (lightweight)\ndata, err := account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"Pending order tickets: %v\\n\", data.OpenedOrdersTickets)\nfmt.Printf(\"Position tickets: %v\\n\", data.OpenedPositionTickets)\n</code></pre> <pre><code>// Get historical orders (last 7 days)\nnow := time.Now()\nweekAgo := now.Add(-7 * 24 * time.Hour)\n\ndata, err := account.OrderHistory(ctx, &amp;pb.OrderHistoryRequest{\n    InputFrom:    timestamppb.New(weekAgo),\n    InputTo:      timestamppb.New(now),\n    PageNumber:   0,\n    ItemsPerPage: 100,\n})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"Historical orders: %d\\n\", len(data.HistoryData))\n\nfor _, item := range data.HistoryData {\n    if item.HistoryOrder != nil {\n        fmt.Printf(\"#%d: %s @ %.5f\\n\",\n            item.HistoryOrder.Ticket,\n            item.HistoryOrder.Symbol,\n            item.HistoryOrder.PriceOpen)\n    }\n}\n</code></pre> <pre><code>// Get closed positions (today)\nnow := time.Now()\nstartOfDay := time.Date(now.Year(), now.Month(), now.Day(), 0, 0, 0, 0, now.Location())\n\ndata, err := account.PositionsHistory(ctx, &amp;pb.PositionsHistoryRequest{\n    PositionOpenTimeFrom: timestamppb.New(startOfDay),\n    PositionOpenTimeTo:   timestamppb.New(now),\n    PageNumber:           0,\n    ItemsPerPage:         100,\n})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"Closed positions today: %d\\n\", len(data.HistoryPositions))\n\ntotalProfit := 0.0\nfor _, pos := range data.HistoryPositions {\n    totalProfit += pos.Profit\n    fmt.Printf(\"#%d: %s %.2f lots \u2192 $%.2f\\n\",\n        pos.PositionTicket,\n        pos.Symbol,\n        pos.Volume,\n        pos.Profit)\n}\n\nfmt.Printf(\"Total profit today: $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/Position_Orders_Information.Overview/#see-also","title":"See also","text":"<ul> <li>Trading operations: OrderSend - place new orders</li> <li>Order management: OrderClose - close positions</li> <li>Real-time updates: OnTrade - subscribe to trade events</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/","title":"\u2705 Get Closed Positions History","text":"<p>Request: retrieve history of closed positions within a specified time range with profit/loss, swap, and commission information. Supports pagination.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.PositionsHistory(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>PositionsHistory</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>PositionsHistory(PositionsHistoryRequest) \u2192 PositionsHistoryReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperClient.PositionsHistory(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieves closed positions within a time range with full P&amp;L breakdown.</li> <li>Why you need it. Analyze trading performance, calculate statistics, review profitability.</li> <li>Complete P&amp;L. Includes net profit, swap, commission, entry/exit prices.</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Retrieve closed positions from history</li> <li>Analyze trading performance with P&amp;L</li> <li>Generate performance reports</li> <li>Calculate win rate and statistics</li> <li>Track position modifications and outcomes</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 PositionsHistory - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// PositionsHistory retrieves closed positions with profit/loss information.\n// Supports pagination and symbol filtering.\nfunc (a *MT5Account) PositionsHistory(\n    ctx context.Context,\n    req *pb.PositionsHistoryRequest,\n) (*pb.PositionsHistoryData, error)\n</code></pre> <p>Request message:</p> <pre><code>PositionsHistoryRequest {\n  AH_ENUM_POSITIONS_HISTORY_SORT_TYPE sort_type = 1;           // Sort mode (optional)\n  google.protobuf.Timestamp position_open_time_from = 2;       // Start date (optional)\n  google.protobuf.Timestamp position_open_time_to = 3;         // End date (optional)\n  int32 page_number = 4;                                        // Page number (optional)\n  int32 items_per_page = 5;                                     // Items per page (optional)\n}\n</code></pre> <p>Reply message:</p> <pre><code>PositionsHistoryReply {\n  oneof response {\n    PositionsHistoryData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.PositionsHistoryRequest</code> Request with date range and pagination <p>Request fields:</p> Field Type Description <code>SortType</code> <code>AH_ENUM_POSITIONS_HISTORY_SORT_TYPE</code> Sort mode (0=open time asc, 1=open time desc, 2=ticket asc, 3=ticket desc) <code>PositionOpenTimeFrom</code> <code>google.protobuf.Timestamp</code> Start date (optional) <code>PositionOpenTimeTo</code> <code>google.protobuf.Timestamp</code> End date (optional) <code>PageNumber</code> <code>int32</code> Page number for pagination (optional, default 0) <code>ItemsPerPage</code> <code>int32</code> Number of items per page (optional, default 0 = all)"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#output-positionshistorydata","title":"\u2b06\ufe0f Output \u2014 <code>PositionsHistoryData</code>","text":"Field Type Go Type Description <code>HistoryPositions</code> <code>PositionHistoryInfo[]</code> <code>[]*pb.PositionHistoryInfo</code> Array of closed positions with P&amp;L data <p>PositionHistoryInfo main fields:</p> <ul> <li><code>Index</code> (int32) - Record index</li> <li><code>PositionTicket</code> (uint64) - Position ticket number</li> <li> <p><code>OrderType</code> (AH_ENUM_POSITIONS_HISTORY_ORDER_TYPE) - Order type (BUY=0, SELL=1, etc.)</p> </li> <li> <p><code>OpenTime</code>, <code>CloseTime</code> (google.protobuf.Timestamp) - Open and close timestamps</p> </li> <li> <p><code>Volume</code> (double) - Position volume</p> </li> <li><code>OpenPrice</code>, <code>ClosePrice</code> (double) - Open and close prices</li> <li><code>StopLoss</code>, <code>TakeProfit</code> (double) - SL/TP levels</li> <li><code>Profit</code> (double) - Net profit/loss</li> <li><code>Commission</code>, <code>Fee</code>, <code>Swap</code> (double) - Trading costs</li> <li><code>Symbol</code> (string) - Trading symbol</li> <li><code>Comment</code> (string) - Position comment</li> <li><code>Magic</code> (int64) - Magic number</li> </ul> <p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE_AH_POSITION_OPEN_TIME_ASC</code></p>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#enum-ah_enum_positions_history_sort_type","title":"\ud83d\udcd8 Enum: AH_ENUM_POSITIONS_HISTORY_SORT_TYPE","text":"Value Constant Description 0 <code>AH_POSITION_OPEN_TIME_ASC</code> Sort by position open time (ascending) 1 <code>AH_POSITION_OPEN_TIME_DESC</code> Sort by position open time (descending) 2 <code>AH_POSITION_TICKET_ASC</code> Sort by position ticket (ascending) 3 <code>AH_POSITION_TICKET_DESC</code> Sort by position ticket (descending)"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#enum-ah_enum_positions_history_order_type","title":"\ud83d\udcd8 Enum: AH_ENUM_POSITIONS_HISTORY_ORDER_TYPE","text":"Value Constant Description 0 <code>AH_ORDER_TYPE_BUY</code> Market Buy order 1 <code>AH_ORDER_TYPE_SELL</code> Market Sell order 2 <code>AH_ORDER_TYPE_BUY_LIMIT</code> Buy Limit pending order 3 <code>AH_ORDER_TYPE_SELL_LIMIT</code> Sell Limit pending order 4 <code>AH_ORDER_TYPE_BUY_STOP</code> Buy Stop pending order 5 <code>AH_ORDER_TYPE_SELL_STOP</code> Sell Stop pending order 6 <code>AH_ORDER_TYPE_BUY_STOP_LIMIT</code> Buy Stop Limit (pending Buy Limit order at StopLimit price) 7 <code>AH_ORDER_TYPE_SELL_STOP_LIMIT</code> Sell Stop Limit (pending Sell Limit order at StopLimit price)"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>15s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Time range: PositionOpenTimeFrom and PositionOpenTimeTo are <code>google.protobuf.Timestamp</code> (use <code>timestamppb.New()</code> to convert).</li> <li>Pagination: Use PageNumber and ItemsPerPage for large datasets.</li> <li>Sort mode: SortType allows sorting by open time or ticket number (ascending/descending).</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#1-get-last-months-closed-positions","title":"1) Get last month's closed positions","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 15*time.Second)\n    defer cancel()\n\n    now := time.Now()\n    monthAgo := now.Add(-30 * 24 * time.Hour)\n\n    data, err := account.PositionsHistory(ctx, &amp;pb.PositionsHistoryRequest{\n        PositionOpenTimeFrom: timestamppb.New(monthAgo),\n        PositionOpenTimeTo:   timestamppb.New(now),\n        PageNumber:           0,\n        ItemsPerPage:         100,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Closed positions last 30 days: %d\\n\", len(data.HistoryPositions))\n\n    var totalProfit float64\n    for _, pos := range data.HistoryPositions {\n        totalProfit += pos.Profit\n    }\n    fmt.Printf(\"Total profit: %.2f\\n\", totalProfit)\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#2-calculate-win-rate","title":"2) Calculate win rate","text":"<pre><code>func CalculateWinRate(account *mt5.MT5Account, days int) (float64, error) {\n    ctx := context.Background()\n\n    now := time.Now()\n    fromDate := now.Add(-time.Duration(days) * 24 * time.Hour)\n\n    data, err := account.PositionsHistory(ctx, &amp;pb.PositionsHistoryRequest{\n        PositionOpenTimeFrom: timestamppb.New(fromDate),\n        PositionOpenTimeTo:   timestamppb.New(now),\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    if len(data.HistoryPositions) == 0 {\n        return 0, nil\n    }\n\n    wins := 0\n    for _, pos := range data.HistoryPositions {\n        if pos.Profit &gt; 0 {\n            wins++\n        }\n    }\n\n    winRate := float64(wins) / float64(len(data.HistoryPositions)) * 100.0\n    return winRate, nil\n}\n\n// Usage:\n// winRate, _ := CalculateWinRate(account, 30)\n// fmt.Printf(\"Win rate (30 days): %.2f%%\\n\", winRate)\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#3-get-detailed-pl-breakdown","title":"3) Get detailed P&amp;L breakdown","text":"<pre><code>type PnLBreakdown struct {\n    GrossProfit   float64\n    GrossLoss     float64\n    NetProfit     float64\n    TotalSwap     float64\n    TotalCommission float64\n    Trades        int\n    WinningTrades int\n    LosingTrades  int\n}\n\nfunc GetPnLBreakdown(account *mt5.MT5Account, fromDate, toDate time.Time) (*PnLBreakdown, error) {\n    ctx := context.Background()\n\n    data, err := account.PositionsHistory(ctx, &amp;pb.PositionsHistoryRequest{\n        PositionOpenTimeFrom: timestamppb.New(fromDate),\n        PositionOpenTimeTo:   timestamppb.New(toDate),\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    breakdown := &amp;PnLBreakdown{\n        Trades: len(data.HistoryPositions),\n    }\n\n    for _, pos := range data.HistoryPositions {\n        breakdown.NetProfit += pos.Profit\n        breakdown.TotalSwap += pos.Swap\n        breakdown.TotalCommission += pos.Commission\n\n        if pos.Profit &gt; 0 {\n            breakdown.GrossProfit += pos.Profit\n            breakdown.WinningTrades++\n        } else if pos.Profit &lt; 0 {\n            breakdown.GrossLoss += pos.Profit\n            breakdown.LosingTrades++\n        }\n    }\n\n    return breakdown, nil\n}\n\n// Usage:\n// fromDate := time.Now().Add(-30 * 24 * time.Hour)\n// toDate := time.Now()\n// breakdown, _ := GetPnLBreakdown(account, fromDate, toDate)\n// fmt.Printf(\"Net: %.2f, Gross Profit: %.2f, Gross Loss: %.2f\\n\",\n//     breakdown.NetProfit, breakdown.GrossProfit, breakdown.GrossLoss)\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#4-find-best-and-worst-trades","title":"4) Find best and worst trades","text":"<pre><code>func FindBestWorstTrades(account *mt5.MT5Account, days int) {\n    ctx := context.Background()\n\n    now := time.Now()\n    fromDate := now.Add(-time.Duration(days) * 24 * time.Hour)\n\n    data, err := account.PositionsHistory(ctx, &amp;pb.PositionsHistoryRequest{\n        PositionOpenTimeFrom: timestamppb.New(fromDate),\n        PositionOpenTimeTo:   timestamppb.New(now),\n    })\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    if len(data.HistoryPositions) == 0 {\n        fmt.Println(\"No closed positions found\")\n        return\n    }\n\n    var bestTrade, worstTrade *pb.PositionHistoryInfo\n    for _, pos := range data.HistoryPositions {\n        if bestTrade == nil || pos.Profit &gt; bestTrade.Profit {\n            bestTrade = pos\n        }\n        if worstTrade == nil || pos.Profit &lt; worstTrade.Profit {\n            worstTrade = pos\n        }\n    }\n\n    fmt.Printf(\"Best trade: %s, Profit: %.2f\\n\", bestTrade.Symbol, bestTrade.Profit)\n    fmt.Printf(\"Worst trade: %s, Profit: %.2f\\n\", worstTrade.Symbol, worstTrade.Profit)\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#5-calculate-profitability-by-symbol","title":"5) Calculate profitability by symbol","text":"<pre><code>func GetProfitBySymbol(account *mt5.MT5Account, days int) map[string]float64 {\n    ctx := context.Background()\n\n    now := time.Now()\n    fromDate := now.Add(-time.Duration(days) * 24 * time.Hour)\n\n    data, err := account.PositionsHistory(ctx, &amp;pb.PositionsHistoryRequest{\n        PositionOpenTimeFrom: timestamppb.New(fromDate),\n        PositionOpenTimeTo:   timestamppb.New(now),\n    })\n    if err != nil {\n        return nil\n    }\n\n    profitBySymbol := make(map[string]float64)\n    for _, pos := range data.HistoryPositions {\n        profitBySymbol[pos.Symbol] += pos.Profit\n    }\n\n    return profitBySymbol\n}\n\n// Usage:\n// profits := GetProfitBySymbol(account, 30)\n// for symbol, profit := range profits {\n//     fmt.Printf(\"%s: %.2f\\n\", symbol, profit)\n// }\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#get-todays-closed-positions","title":"Get today's closed positions","text":"<pre><code>func GetTodayClosedPositions(account *mt5.MT5Account) ([]*pb.PositionHistoryInfo, error) {\n    ctx := context.Background()\n\n    now := time.Now()\n    startOfDay := time.Date(now.Year(), now.Month(), now.Day(), 0, 0, 0, 0, now.Location())\n\n    data, err := account.PositionsHistory(ctx, &amp;pb.PositionsHistoryRequest{\n        PositionOpenTimeFrom: timestamppb.New(startOfDay),\n        PositionOpenTimeTo:   timestamppb.New(now),\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    return data.HistoryPositions, nil\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#calculate-average-profit-per-trade","title":"Calculate average profit per trade","text":"<pre><code>func CalculateAverageProfit(account *mt5.MT5Account, days int) (float64, error) {\n    ctx := context.Background()\n\n    now := time.Now()\n    fromDate := now.Add(-time.Duration(days) * 24 * time.Hour)\n\n    data, err := account.PositionsHistory(ctx, &amp;pb.PositionsHistoryRequest{\n        PositionOpenTimeFrom: timestamppb.New(fromDate),\n        PositionOpenTimeTo:   timestamppb.New(now),\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    if len(data.HistoryPositions) == 0 {\n        return 0, nil\n    }\n\n    var totalProfit float64\n    for _, pos := range data.HistoryPositions {\n        totalProfit += pos.Profit\n    }\n\n    return totalProfit / float64(len(data.HistoryPositions)), nil\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsHistory/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OrderHistory - Get historical orders</li> <li>OpenedOrders - Get current open positions</li> <li>OnTrade - Stream trade events</li> <li>AccountSummary - Current account statistics</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/","title":"\u2705 Get Total Count of Open Positions","text":"<p>Request: get the count of currently open positions on the trading account. Quick check for open positions without loading full details.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.PositionsTotal(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.TradeFunctions</code></li> <li>Proto definition: <code>PositionsTotal</code> (defined in <code>mt5-term-api-trade-functions.proto</code>)</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradeFunctions</code></li> <li>Method: <code>PositionsTotal(Empty) \u2192 PositionsTotalReply</code></li> <li>Low\u2011level client (generated): <code>TradeFunctionsClient.PositionsTotal(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Returns the count of currently open positions on the account.</li> <li>Why you need it. Quickly check if there are open positions without fetching full position details.</li> <li>Lightweight. Much faster than OpenedOrders when you only need the count.</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Check if account has any open positions</li> <li>Monitor position count changes</li> <li>Validate before opening new positions</li> <li>Implement position limits</li> <li>Dashboard indicators</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 PositionsTotal - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// PositionsTotal returns the number of currently open positions.\n// This is a lightweight call for quick position count check.\nfunc (a *MT5Account) PositionsTotal(\n    ctx context.Context,\n) (*pb.PositionsTotalData, error)\n</code></pre> <p>Request message:</p> <pre><code>Empty {}  // No parameters required\n</code></pre> <p>Reply message:</p> <pre><code>PositionsTotalReply {\n  oneof response {\n    PositionsTotalData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <p>No request parameters required.</p>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#output-positionstotaldata","title":"\u2b06\ufe0f Output \u2014 <code>PositionsTotalData</code>","text":"Field Type Go Type Description <code>TotalPositions</code> <code>int64</code> <code>int64</code> Total number of open positions"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Performance: Use this instead of OpenedOrders when you only need position count.</li> <li>Real-time: Returns current count at the moment of request.</li> </ul>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#1-get-positions-count","title":"1) Get positions count","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    data, err := account.PositionsTotal(ctx)\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Open positions: %d\\n\", data.TotalPositions)\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#2-check-if-positions-are-open","title":"2) Check if positions are open","text":"<pre><code>func HasOpenPositions(account *mt5.MT5Account) (bool, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    data, err := account.PositionsTotal(ctx)\n    if err != nil {\n        return false, fmt.Errorf(\"failed to get positions total: %w\", err)\n    }\n\n    return data.TotalPositions &gt; 0, nil\n}\n\n// Usage:\n// hasPositions, _ := HasOpenPositions(account)\n// if hasPositions {\n//     fmt.Println(\"Account has open positions\")\n// }\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#3-enforce-maximum-positions-limit","title":"3) Enforce maximum positions limit","text":"<pre><code>func CanOpenNewPosition(account *mt5.MT5Account, maxPositions int64) (bool, error) {\n    ctx := context.Background()\n\n    data, err := account.PositionsTotal(ctx)\n    if err != nil {\n        return false, err\n    }\n\n    if data.TotalPositions &gt;= maxPositions {\n        return false, fmt.Errorf(\"maximum positions limit reached: %d/%d\", data.TotalPositions, maxPositions)\n    }\n\n    return true, nil\n}\n\n// Usage before opening position:\n// canOpen, err := CanOpenNewPosition(account, 10)\n// if !canOpen {\n//     fmt.Println(\"Cannot open new position:\", err)\n// }\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#4-monitor-position-count-changes","title":"4) Monitor position count changes","text":"<pre><code>func MonitorPositionCount(account *mt5.MT5Account, interval time.Duration) {\n    ctx := context.Background()\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    var lastCount int64 = -1\n\n    for range ticker.C {\n        data, err := account.PositionsTotal(ctx)\n        if err != nil {\n            fmt.Printf(\"Error: %v\\n\", err)\n            continue\n        }\n\n        if lastCount != -1 &amp;&amp; data.TotalPositions != lastCount {\n            change := data.TotalPositions - lastCount\n            fmt.Printf(\"[%s] Position count changed: %d -&gt; %d (%+d)\\n\",\n                time.Now().Format(\"15:04:05\"),\n                lastCount,\n                data.TotalPositions,\n                change,\n            )\n        }\n\n        lastCount = data.TotalPositions\n    }\n}\n\n// Usage in goroutine:\n// go MonitorPositionCount(account, 2*time.Second)\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#5-wait-for-all-positions-to-close","title":"5) Wait for all positions to close","text":"<pre><code>func WaitForAllPositionsClosed(account *mt5.MT5Account, timeout time.Duration) error {\n    ctx, cancel := context.WithTimeout(context.Background(), timeout)\n    defer cancel()\n\n    ticker := time.NewTicker(1 * time.Second)\n    defer ticker.Stop()\n\n    for {\n        select {\n        case &lt;-ticker.C:\n            data, err := account.PositionsTotal(ctx)\n            if err != nil {\n                return err\n            }\n\n            if data.TotalPositions == 0 {\n                fmt.Println(\"All positions closed\")\n                return nil\n            }\n\n            fmt.Printf(\"Waiting for %d positions to close...\\n\", data.TotalPositions)\n\n        case &lt;-ctx.Done():\n            return fmt.Errorf(\"timeout waiting for positions to close\")\n        }\n    }\n}\n\n// Usage:\n// err := WaitForAllPositionsClosed(account, 30*time.Second)\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#6-position-count-statistics","title":"6) Position count statistics","text":"<pre><code>type PositionStats struct {\n    CurrentCount int64\n    MaxCount     int64\n    MinCount     int64\n    CheckCount   int64\n}\n\nfunc TrackPositionStats(account *mt5.MT5Account, duration time.Duration, interval time.Duration) *PositionStats {\n    ctx := context.Background()\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    deadline := time.Now().Add(duration)\n    stats := &amp;PositionStats{\n        MinCount: int64(^uint64(0) &gt;&gt; 1), // Max int64\n    }\n\n    for time.Now().Before(deadline) {\n        &lt;-ticker.C\n\n        data, err := account.PositionsTotal(ctx)\n        if err != nil {\n            continue\n        }\n\n        stats.CurrentCount = data.TotalPositions\n        stats.CheckCount++\n\n        if data.TotalPositions &gt; stats.MaxCount {\n            stats.MaxCount = data.TotalPositions\n        }\n        if data.TotalPositions &lt; stats.MinCount {\n            stats.MinCount = data.TotalPositions\n        }\n    }\n\n    return stats\n}\n\n// Usage:\n// stats := TrackPositionStats(account, 1*time.Minute, 5*time.Second)\n// fmt.Printf(\"Min: %d, Max: %d, Current: %d\\n\", stats.MinCount, stats.MaxCount, stats.CurrentCount)\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#safe-position-count-check","title":"Safe position count check","text":"<pre><code>func GetPositionCountSafe(account *mt5.MT5Account) int64 {\n    ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second)\n    defer cancel()\n\n    data, err := account.PositionsTotal(ctx)\n    if err != nil {\n        return 0\n    }\n\n    return data.TotalPositions\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#conditional-trading-based-on-position-count","title":"Conditional trading based on position count","text":"<pre><code>func TradeIfBelowLimit(account *mt5.MT5Account, maxPositions int64, tradeFn func() error) error {\n    ctx := context.Background()\n\n    data, err := account.PositionsTotal(ctx)\n    if err != nil {\n        return err\n    }\n\n    if data.TotalPositions &gt;= maxPositions {\n        return fmt.Errorf(\"position limit reached: %d/%d\", data.TotalPositions, maxPositions)\n    }\n\n    return tradeFn()\n}\n</code></pre>"},{"location":"MT5Account/3.%20Position_Orders_Information/PositionsTotal/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OpenedOrders - Get full details of all open positions</li> <li>OpenedOrdersTickets - Get only ticket numbers (lightweight)</li> <li>OnPositionsAndPendingOrdersTickets - Stream position changes</li> <li>OrderSend - Open new positions</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/","title":"\u2705 OrderCalcMargin","text":"<p>Request: Calculate required margin for an order before placing it.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OrderCalcMargin(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.TradeFunctions</code></li> <li>Proto definition: <code>OrderCalcMargin</code> (defined in <code>mt5-term-api-trade-functions.proto</code>)</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Pre-calculates margin requirement before order placement without actually placing the order.</li> <li>Why you need it. Verify sufficient account margin before trading to avoid \"Not enough money\" rejections.</li> <li>Risk management. Essential for position sizing and account safety - calculate maximum safe lot size based on available margin.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Check margin requirements before placing orders</li> <li>Calculate maximum position size based on available free margin</li> <li>Validate trading parameters in risk management systems</li> <li>Display margin requirements in trading UI/dashboard</li> <li>Prevent order rejections due to insufficient margin</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OrderCalcMargin - How it works</p>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradeFunctions</code></li> <li>Method: <code>OrderCalcMargin(OrderCalcMarginRequest) \u2192 OrderCalcMarginReply</code></li> <li>Low\u2011level client (generated): <code>TradeFunctionsClient.OrderCalcMargin(ctx, request, opts...)</code></li> </ul> <pre><code>// OrderCalcMargin calculates required margin for an order.\n//\n// Use this method to determine how much margin will be required before placing an order.\n//\n// Parameters:\n//   - ctx: Context for timeout and cancellation control\n//   - req: OrderCalcMarginRequest with Action, Symbol, Volume, and Price\n//\n// Returns OrderCalcMarginData with Margin value in account currency.\nfunc (a *MT5Account) OrderCalcMargin(\n    ctx context.Context,\n    req *pb.OrderCalcMarginRequest,\n) (*pb.OrderCalcMarginData, error)\n</code></pre> <p>Request message: <code>OrderCalcMarginRequest</code> Reply message: <code>OrderCalcMarginReply { oneof response { OrderCalcMarginData data = 1; Error error = 2; } }</code></p>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.OrderCalcMarginRequest</code> Request with Action, Symbol, Volume, and Price <p>OrderCalcMarginRequest fields:</p> Field Type Required Description <code>Symbol</code> <code>string</code> \u2705 Trading instrument name (e.g., \"EURUSD\") <code>OrderType</code> <code>ENUM_ORDER_TYPE_TF</code> \u2705 Order type: ORDER_TYPE_TF_BUY (0), ORDER_TYPE_TF_SELL (1), etc <code>Volume</code> <code>double</code> \u2705 Trade volume in lots <code>OpenPrice</code> <code>double</code> \u2705 Order price (use current market price for market orders)"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#output-ordercalcmargindata","title":"\u2b06\ufe0f Output \u2014 <code>OrderCalcMarginData</code>","text":"Field Type Description <code>Margin</code> <code>double</code> Required margin in account currency <p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY</code></p>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#enum-enum_order_type_tf","title":"\ud83d\udcd8 Enum: ENUM_ORDER_TYPE_TF","text":"Value Constant Description 0 <code>ORDER_TYPE_TF_BUY</code> Market Buy order 1 <code>ORDER_TYPE_TF_SELL</code> Market Sell order 2 <code>ORDER_TYPE_TF_BUY_LIMIT</code> Buy Limit pending order 3 <code>ORDER_TYPE_TF_SELL_LIMIT</code> Sell Limit pending order 4 <code>ORDER_TYPE_TF_BUY_STOP</code> Buy Stop pending order 5 <code>ORDER_TYPE_TF_SELL_STOP</code> Sell Stop pending order 6 <code>ORDER_TYPE_TF_BUY_STOP_LIMIT</code> Upon reaching the order price, a pending Buy Limit order is placed at the StopLimit price 7 <code>ORDER_TYPE_TF_SELL_STOP_LIMIT</code> Upon reaching the order price, a pending Sell Limit order is placed at the StopLimit price 8 <code>ORDER_TYPE_TF_CLOSE_BY</code> Order to close a position by an opposite one"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>5s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Price parameter: For market orders, use current bid/ask price. For pending orders, use the intended order price.</li> <li>Hedging vs Netting: Margin calculation depends on account margin calculation mode (hedging or netting).</li> <li>Leverage consideration: Result accounts for account leverage and symbol-specific margin requirements.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#1-basic-margin-calculation-for-market-order","title":"1) Basic margin calculation for market order","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account := mt5.NewMT5Account(\"user\", \"password\", \"server:443\")\n\n    err := account.Connect()\n    if err != nil {\n        panic(err)\n    }\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Calculate margin for buying 0.1 lots of EURUSD at current price\n    marginData, err := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n        Symbol:    \"EURUSD\",\n        OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n        Volume:    0.1,\n        OpenPrice: 1.10000, // Current ask price\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Required margin: %.2f USD\\n\", marginData.Margin)\n    // Output: Required margin: 110.00 USD\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#2-check-if-account-has-enough-margin","title":"2) Check if account has enough margin","text":"<pre><code>func CanOpenPosition(account *mt5.MT5Account, symbol string, volume float64, price float64) (bool, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Get account summary to check free margin\n    summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        return false, err\n    }\n\n    freeMargin := summary.AccountEquity - summary.AccountBalance // Simplified\n\n    // Calculate required margin\n    marginData, err := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n        Symbol:    symbol,\n        OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n        Volume:    volume,\n        OpenPrice: price,\n    })\n    if err != nil {\n        return false, err\n    }\n\n    fmt.Printf(\"Free margin: %.2f\\n\", freeMargin)\n    fmt.Printf(\"Required margin: %.2f\\n\", marginData.Margin)\n\n    return freeMargin &gt;= marginData.Margin, nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#3-calculate-maximum-safe-lot-size","title":"3) Calculate maximum safe lot size","text":"<pre><code>func MaxSafeLotSize(account *mt5.MT5Account, symbol string, price float64, maxMarginUsagePercent float64) (float64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Get account equity\n    summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        return 0, err\n    }\n\n    maxAllowedMargin := summary.AccountEquity * (maxMarginUsagePercent / 100.0)\n\n    // Test with 1.0 lot to get margin per lot\n    testMargin, err := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n        Symbol:    symbol,\n        OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n        Volume:    1.0,\n        OpenPrice: price,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    marginPerLot := testMargin.Margin\n    maxLots := maxAllowedMargin / marginPerLot\n\n    fmt.Printf(\"Account equity: %.2f\\n\", summary.AccountEquity)\n    fmt.Printf(\"Max allowed margin (%.0f%%): %.2f\\n\", maxMarginUsagePercent, maxAllowedMargin)\n    fmt.Printf(\"Margin per 1.0 lot: %.2f\\n\", marginPerLot)\n    fmt.Printf(\"Max safe lot size: %.2f\\n\", maxLots)\n\n    return maxLots, nil\n}\n\n// Usage:\n// maxLots, err := MaxSafeLotSize(account, \"EURUSD\", 1.10000, 20.0) // Use max 20% of equity\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#4-compare-margin-for-buy-vs-sell","title":"4) Compare margin for buy vs sell","text":"<pre><code>func CompareMarginBuySell(account *mt5.MT5Account, symbol string, volume float64, bidPrice, askPrice float64) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Calculate margin for BUY\n    buyMargin, err := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n        Symbol:    symbol,\n        OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n        Volume:    volume,\n        OpenPrice: askPrice,\n    })\n    if err != nil {\n        fmt.Printf(\"Buy margin error: %v\\n\", err)\n        return\n    }\n\n    // Calculate margin for SELL\n    sellMargin, err := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n        Symbol:    symbol,\n        OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_SELL,\n        Volume:    volume,\n        OpenPrice: bidPrice,\n    })\n    if err != nil {\n        fmt.Printf(\"Sell margin error: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"Symbol: %s, Volume: %.2f\\n\", symbol, volume)\n    fmt.Printf(\"BUY margin (at %.5f): %.2f\\n\", askPrice, buyMargin.Margin)\n    fmt.Printf(\"SELL margin (at %.5f): %.2f\\n\", bidPrice, sellMargin.Margin)\n    fmt.Printf(\"Difference: %.2f\\n\", buyMargin.Margin-sellMargin.Margin)\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#5-batch-margin-calculation-for-multiple-symbols","title":"5) Batch margin calculation for multiple symbols","text":"<pre><code>func CalculateMarginForPortfolio(account *mt5.MT5Account, positions []struct {\n    Symbol string\n    Volume float64\n    Price  float64\n}) {\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    totalMargin := 0.0\n\n    for _, pos := range positions {\n        marginData, err := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n            Symbol:    pos.Symbol,\n            OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n            Volume:    pos.Volume,\n            OpenPrice: pos.Price,\n        })\n        if err != nil {\n            fmt.Printf(\"Error for %s: %v\\n\", pos.Symbol, err)\n            continue\n        }\n\n        fmt.Printf(\"%s (%.2f lots): %.2f\\n\", pos.Symbol, pos.Volume, marginData.Margin)\n        totalMargin += marginData.Margin\n    }\n\n    fmt.Printf(\"\\nTotal required margin: %.2f\\n\", totalMargin)\n}\n\n// Usage:\n// CalculateMarginForPortfolio(account, []struct {\n//     Symbol string\n//     Volume float64\n//     Price  float64\n// }{\n//     {\"EURUSD\", 0.1, 1.10000},\n//     {\"GBPUSD\", 0.05, 1.27000},\n//     {\"USDJPY\", 0.08, 150.500},\n// })\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#6-margin-calculation-with-error-handling","title":"6) Margin calculation with error handling","text":"<pre><code>func SafeMarginCheck(account *mt5.MT5Account, symbol string, volume float64, price float64) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    marginData, err := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n        Symbol:    symbol,\n        OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n        Volume:    volume,\n        OpenPrice: price,\n    })\n\n    if err != nil {\n        // Handle specific errors\n        if ctx.Err() == context.DeadlineExceeded {\n            fmt.Println(\"Request timeout - server may be slow\")\n        } else {\n            fmt.Printf(\"Margin calculation failed: %v\\n\", err)\n        }\n        return\n    }\n\n    // Validate result\n    if marginData.Margin &lt;= 0 {\n        fmt.Printf(\"Warning: Invalid margin value: %.2f\\n\", marginData.Margin)\n        return\n    }\n\n    fmt.Printf(\"Required margin: %.2f\\n\", marginData.Margin)\n\n    // Get account info for comparison\n    summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        fmt.Printf(\"Failed to get account info: %v\\n\", err)\n        return\n    }\n\n    marginLevel := (summary.AccountEquity / marginData.Margin) * 100.0\n    fmt.Printf(\"Margin level after order: %.2f%%\\n\", marginLevel)\n\n    if marginLevel &lt; 200 {\n        fmt.Println(\"Warning: Low margin level!\")\n    }\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#pre-trade-validation","title":"Pre-trade validation","text":"<pre><code>func ValidateTradeMargin(account *mt5.MT5Account, symbol string, volume float64, price float64, minMarginLevel float64) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Get required margin\n    marginData, err := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n        Symbol:    symbol,\n        OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n        Volume:    volume,\n        OpenPrice: price,\n    })\n    if err != nil {\n        return fmt.Errorf(\"margin calculation failed: %w\", err)\n    }\n\n    // Get account state\n    summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        return fmt.Errorf(\"account summary failed: %w\", err)\n    }\n\n    // Calculate margin level after trade\n    newMarginLevel := (summary.AccountEquity / marginData.Margin) * 100.0\n\n    if newMarginLevel &lt; minMarginLevel {\n        return fmt.Errorf(\"insufficient margin: level would be %.2f%% (min: %.2f%%)\",\n            newMarginLevel, minMarginLevel)\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#dynamic-lot-size-calculator","title":"Dynamic lot size calculator","text":"<pre><code>func CalculateLotSizeByRisk(account *mt5.MT5Account, symbol string, price float64, riskPercent float64) (float64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        return 0, err\n    }\n\n    maxRiskAmount := summary.AccountEquity * (riskPercent / 100.0)\n\n    // Test with small volume to get margin requirement\n    testMargin, err := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n        Symbol:    symbol,\n        OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n        Volume:    0.01,\n        OpenPrice: price,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    marginPer001Lot := testMargin.Margin\n    lots := (maxRiskAmount / marginPer001Lot) * 0.01\n\n    return lots, nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcMargin/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OrderCalcProfit - Calculate potential profit for a trade</li> <li>OrderCheck - Validate complete order before sending</li> <li>OrderSend - Place market or pending order</li> <li>AccountSummary - Get account balance and equity</li> <li>SymbolInfoMarginRate - Get margin requirements for order types</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/","title":"\u2705 OrderCalcProfit","text":"<p>Request: Calculate potential profit/loss for a trade at specified entry and exit prices.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OrderCalcProfit(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.TradeFunctions</code></li> <li>Proto definition: <code>OrderCalcProfit</code> (defined in <code>mt5-term-api-trade-functions.proto</code>)</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Pre-calculates profit/loss for a hypothetical trade without placing the order.</li> <li>Why you need it. Estimate potential profit before trading, calculate risk/reward ratio, validate trading strategy.</li> <li>Risk assessment. Essential for position sizing and stop-loss/take-profit planning.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Calculate potential profit before placing orders</li> <li>Estimate profit at different exit price levels (TP levels)</li> <li>Calculate risk/reward ratios for trading strategies</li> <li>Validate stop-loss and take-profit levels</li> <li>Display projected P/L in trading UI</li> <li>Backtest strategy profit calculations</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OrderCalcProfit - How it works</p>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradeFunctions</code></li> <li>Method: <code>OrderCalcProfit(OrderCalcProfitRequest) \u2192 OrderCalcProfitReply</code></li> <li>Low\u2011level client (generated): <code>TradeFunctionsClient.OrderCalcProfit(ctx, request, opts...)</code></li> </ul> <pre><code>// OrderCalcProfit calculates potential profit for a trade.\n//\n// Use this method to estimate profit/loss before placing an order or to calculate\n// current profit at a specified price level.\n//\n// Parameters:\n//   - ctx: Context for timeout and cancellation control\n//   - req: OrderCalcProfitRequest with Action, Symbol, Volume, PriceOpen, and PriceClose\n//\n// Returns OrderCalcProfitData with Profit value in account currency.\nfunc (a *MT5Account) OrderCalcProfit(\n    ctx context.Context,\n    req *pb.OrderCalcProfitRequest,\n) (*pb.OrderCalcProfitData, error)\n</code></pre> <p>Request message: <code>OrderCalcProfitRequest</code></p> <p>Reply message: <code>OrderCalcProfitReply { oneof response { OrderCalcProfitData data = 1; Error error = 2; } }</code></p>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.OrderCalcProfitRequest</code> Request with Action, Symbol, Volume, PriceOpen, PriceClose <p>OrderCalcProfitRequest fields:</p> Field Type Required Description <code>OrderType</code> <code>ENUM_ORDER_TYPE_TF</code> \u2705 Order type: ORDER_TYPE_TF_BUY (0), ORDER_TYPE_TF_SELL (1), etc <code>Symbol</code> <code>string</code> \u2705 Trading instrument name (e.g., \"EURUSD\") <code>Volume</code> <code>double</code> \u2705 Trade volume in lots <code>OpenPrice</code> <code>double</code> \u2705 Entry price (buy at Ask, sell at Bid) <code>ClosePrice</code> <code>double</code> \u2705 Exit price (close buy at Bid, close sell at Ask)"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#output-ordercalcprofitdata","title":"\u2b06\ufe0f Output \u2014 <code>OrderCalcProfitData</code>","text":"Field Type Description <code>Profit</code> <code>double</code> Calculated profit/loss in account currency (negative for loss) <p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY</code></p>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#enum-enum_order_type_tf","title":"\ud83d\udcd8 Enum: ENUM_ORDER_TYPE_TF","text":"Value Constant Description 0 <code>ORDER_TYPE_TF_BUY</code> Market Buy order 1 <code>ORDER_TYPE_TF_SELL</code> Market Sell order 2 <code>ORDER_TYPE_TF_BUY_LIMIT</code> Buy Limit pending order 3 <code>ORDER_TYPE_TF_SELL_LIMIT</code> Sell Limit pending order 4 <code>ORDER_TYPE_TF_BUY_STOP</code> Buy Stop pending order 5 <code>ORDER_TYPE_TF_SELL_STOP</code> Sell Stop pending order 6 <code>ORDER_TYPE_TF_BUY_STOP_LIMIT</code> Upon reaching the order price, a pending Buy Limit order is placed at the StopLimit price 7 <code>ORDER_TYPE_TF_SELL_STOP_LIMIT</code> Upon reaching the order price, a pending Sell Limit order is placed at the StopLimit price 8 <code>ORDER_TYPE_TF_CLOSE_BY</code> Order to close a position by an opposite one"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>5s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Negative profit: Result is negative when trade would result in a loss.</li> <li>Currency conversion: Profit is automatically converted to account currency.</li> <li>Spread consideration: Remember to account for spread when calculating entry/exit prices.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#1-basic-profit-calculation","title":"1) Basic profit calculation","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account := mt5.NewMT5Account(\"user\", \"password\", \"server:443\")\n\n    err := account.Connect()\n    if err != nil {\n        panic(err)\n    }\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Calculate profit for buying 0.1 lots EURUSD\n    // Entry: 1.10000, Exit: 1.10500 (50 pips profit)\n    profitData, err := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n        OrderType:  pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n        Symbol:     \"EURUSD\",\n        Volume:     0.1,\n        OpenPrice:  1.10000,\n        ClosePrice: 1.10500,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Profit for 50 pips: %.2f USD\\n\", profitData.Profit)\n    // Output: Profit for 50 pips: 50.00 USD\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#2-calculate-riskreward-ratio","title":"2) Calculate risk/reward ratio","text":"<pre><code>func CalculateRiskReward(account *mt5.MT5Account, symbol string, volume float64, entry, stopLoss, takeProfit float64, isBuy bool) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    orderType := pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY\n    if !isBuy {\n        orderType = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_SELL\n    }\n\n    // Calculate risk (loss if stop-loss hit)\n    riskData, err := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n        OrderType:  orderType,\n        Symbol:     symbol,\n        Volume:     volume,\n        OpenPrice:  entry,\n        ClosePrice: stopLoss,\n    })\n    if err != nil {\n        fmt.Printf(\"Risk calculation error: %v\\n\", err)\n        return\n    }\n\n    // Calculate reward (profit if take-profit hit)\n    rewardData, err := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n        OrderType:  orderType,\n        Symbol:     symbol,\n        Volume:     volume,\n        OpenPrice:  entry,\n        ClosePrice: takeProfit,\n    })\n    if err != nil {\n        fmt.Printf(\"Reward calculation error: %v\\n\", err)\n        return\n    }\n\n    risk := -riskData.Profit // Make risk positive\n    reward := rewardData.Profit\n    ratio := reward / risk\n\n    fmt.Printf(\"Entry: %.5f, SL: %.5f, TP: %.5f\\n\", entry, stopLoss, takeProfit)\n    fmt.Printf(\"Risk: %.2f, Reward: %.2f\\n\", risk, reward)\n    fmt.Printf(\"Risk/Reward ratio: 1:%.2f\\n\", ratio)\n}\n\n// Usage:\n// CalculateRiskReward(account, \"EURUSD\", 0.1, 1.10000, 1.09500, 1.11000, true)\n// Output:\n// Entry: 1.10000, SL: 1.09500, TP: 1.11000\n// Risk: 50.00, Reward: 100.00\n// Risk/Reward ratio: 1:2.00\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#3-calculate-profit-at-multiple-take-profit-levels","title":"3) Calculate profit at multiple take-profit levels","text":"<pre><code>func CalculateProfitLevels(account *mt5.MT5Account, symbol string, volume float64, entry float64, isBuy bool) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    orderType := pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY\n    if !isBuy {\n        orderType = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_SELL\n    }\n\n    // Calculate profit at different pip levels\n    pipLevels := []int{10, 20, 50, 100, 200}\n    pipValue := 0.0001 // For EURUSD\n\n    fmt.Printf(\"Profit levels for %s %.2f lots from %.5f:\\n\", symbol, volume, entry)\n\n    for _, pips := range pipLevels {\n        var exitPrice float64\n        if isBuy {\n            exitPrice = entry + float64(pips)*pipValue\n        } else {\n            exitPrice = entry - float64(pips)*pipValue\n        }\n\n        profitData, err := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n            OrderType:  orderType,\n            Symbol:     symbol,\n            Volume:     volume,\n            OpenPrice:  entry,\n            ClosePrice: exitPrice,\n        })\n        if err != nil {\n            fmt.Printf(\"  %d pips: Error - %v\\n\", pips, err)\n            continue\n        }\n\n        fmt.Printf(\"  %d pips (%.5f): %.2f USD\\n\", pips, exitPrice, profitData.Profit)\n    }\n}\n\n// Usage:\n// CalculateProfitLevels(account, \"EURUSD\", 0.1, 1.10000, true)\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#4-validate-stop-loss-placement","title":"4) Validate stop-loss placement","text":"<pre><code>func ValidateStopLoss(account *mt5.MT5Account, symbol string, volume float64, entry, stopLoss float64, isBuy bool, maxRiskPercent float64) (bool, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Get account balance\n    summary, err := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\n    if err != nil {\n        return false, err\n    }\n\n    maxRiskAmount := summary.AccountBalance * (maxRiskPercent / 100.0)\n\n    // Calculate potential loss\n    orderType := pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY\n    if !isBuy {\n        orderType = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_SELL\n    }\n\n    lossData, err := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n        OrderType:  orderType,\n        Symbol:     symbol,\n        Volume:     volume,\n        OpenPrice:  entry,\n        ClosePrice: stopLoss,\n    })\n    if err != nil {\n        return false, err\n    }\n\n    potentialLoss := -lossData.Profit // Make positive\n    riskPercent := (potentialLoss / summary.AccountBalance) * 100.0\n\n    fmt.Printf(\"Account balance: %.2f\\n\", summary.AccountBalance)\n    fmt.Printf(\"Max risk (%.1f%%): %.2f\\n\", maxRiskPercent, maxRiskAmount)\n    fmt.Printf(\"Stop-loss risk: %.2f (%.2f%%)\\n\", potentialLoss, riskPercent)\n\n    isValid := potentialLoss &lt;= maxRiskAmount\n\n    if !isValid {\n        fmt.Printf(\"WARNING: Stop-loss risk exceeds maximum allowed!\\n\")\n    }\n\n    return isValid, nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#5-compare-profit-for-different-lot-sizes","title":"5) Compare profit for different lot sizes","text":"<pre><code>func CompareProfitByLotSize(account *mt5.MT5Account, symbol string, entry, exit float64, isBuy bool) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    orderType := pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY\n    if !isBuy {\n        orderType = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_SELL\n    }\n\n    lotSizes := []float64{0.01, 0.1, 0.5, 1.0, 5.0}\n\n    fmt.Printf(\"Profit comparison for %s (%.5f -&gt; %.5f):\\n\", symbol, entry, exit)\n\n    for _, lots := range lotSizes {\n        profitData, err := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n            OrderType:  orderType,\n            Symbol:     symbol,\n            Volume:     lots,\n            OpenPrice:  entry,\n            ClosePrice: exit,\n        })\n        if err != nil {\n            fmt.Printf(\"  %.2f lots: Error - %v\\n\", lots, err)\n            continue\n        }\n\n        fmt.Printf(\"  %.2f lots: %.2f USD\\n\", lots, profitData.Profit)\n    }\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#6-calculate-break-even-price","title":"6) Calculate break-even price","text":"<pre><code>func CalculateBreakEvenPrice(account *mt5.MT5Account, symbol string, volume float64, entry float64, isBuy bool, commission float64) (float64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    orderType := pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY\n    if !isBuy {\n        orderType = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_SELL\n    }\n\n    // Test different exit prices to find break-even\n    pipValue := 0.0001\n    testRange := 100 // Test 100 pips range\n\n    for i := 0; i &lt;= testRange; i++ {\n        var testPrice float64\n        if isBuy {\n            testPrice = entry + float64(i)*pipValue\n        } else {\n            testPrice = entry - float64(i)*pipValue\n        }\n\n        profitData, err := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n            OrderType:  orderType,\n            Symbol:     symbol,\n            Volume:     volume,\n            OpenPrice:  entry,\n            ClosePrice: testPrice,\n        })\n        if err != nil {\n            continue\n        }\n\n        // Account for commission\n        netProfit := profitData.Profit - commission\n\n        if netProfit &gt;= -0.01 &amp;&amp; netProfit &lt;= 0.01 { // Within 1 cent of break-even\n            fmt.Printf(\"Break-even price: %.5f (Gross: %.2f, Commission: %.2f, Net: %.2f)\\n\",\n                testPrice, profitData.Profit, commission, netProfit)\n            return testPrice, nil\n        }\n    }\n\n    return 0, fmt.Errorf(\"break-even price not found in range\")\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#pre-trade-profit-estimation","title":"Pre-trade profit estimation","text":"<pre><code>func EstimateTradeProfit(account *mt5.MT5Account, symbol string, volume float64, entry, tp, sl float64, isBuy bool) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    orderType := pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY\n    if !isBuy {\n        orderType = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_SELL\n    }\n\n    // Calculate TP profit\n    tpProfit, _ := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n        OrderType:  orderType,\n        Symbol:     symbol,\n        Volume:     volume,\n        OpenPrice:  entry,\n        ClosePrice: tp,\n    })\n\n    // Calculate SL loss\n    slProfit, _ := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n        OrderType:  orderType,\n        Symbol:     symbol,\n        Volume:     volume,\n        OpenPrice:  entry,\n        ClosePrice: sl,\n    })\n\n    fmt.Printf(\"Trade estimate:\\n\")\n    fmt.Printf(\"  Max profit (TP): %.2f\\n\", tpProfit.Profit)\n    fmt.Printf(\"  Max loss (SL): %.2f\\n\", slProfit.Profit)\n    fmt.Printf(\"  R:R ratio: 1:%.2f\\n\", tpProfit.Profit/(-slProfit.Profit))\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#position-sizing-by-risk","title":"Position sizing by risk","text":"<pre><code>func CalculateLotSizeByDollarRisk(account *mt5.MT5Account, symbol string, entry, sl float64, isBuy bool, riskAmount float64) (float64, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    orderType := pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY\n    if !isBuy {\n        orderType = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_SELL\n    }\n\n    // Calculate loss per 1.0 lot\n    testProfit, err := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n        OrderType:  orderType,\n        Symbol:     symbol,\n        Volume:     1.0,\n        OpenPrice:  entry,\n        ClosePrice: sl,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    lossPerLot := -testProfit.Profit\n    lots := riskAmount / lossPerLot\n\n    fmt.Printf(\"Loss per 1.0 lot: %.2f\\n\", lossPerLot)\n    fmt.Printf(\"Desired risk: %.2f\\n\", riskAmount)\n    fmt.Printf(\"Calculated lot size: %.2f\\n\", lots)\n\n    return lots, nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCalcProfit/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OrderCalcMargin - Calculate required margin for an order</li> <li>OrderCheck - Validate complete order before sending</li> <li>OrderSend - Place market or pending order</li> <li>AccountSummary - Get account balance for risk calculations</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/","title":"\u2705 Validate Order Before Execution","text":"<p>Request: validate order validity before sending it to the server without actual placement. Returns margin requirements, potential profit, and possible errors.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OrderCheck(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.TradeFunctions</code></li> <li>Proto definition: <code>OrderCheck</code> (defined in <code>mt5-term-api-trade-functions.proto</code>)</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradeFunctions</code></li> <li>Method: <code>OrderCheck(OrderCheckRequest) \u2192 OrderCheckReply</code></li> <li>Low\u2011level client (generated): <code>TradeFunctionsClient.OrderCheck(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Pre-validates trading requests without placing actual orders.</li> <li>Why you need it. Detect errors, check margin, estimate profit before trading.</li> <li>Safe testing. Test order validity without risking real execution.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Validate orders before OrderSend</li> <li>Check margin requirements</li> <li>Estimate potential profit/loss</li> <li>Detect invalid parameters</li> <li>Implement pre-trade safety checks</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OrderCheck - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OrderCheck validates an order before sending it to the server.\n// Returns margin requirements, validation status, and possible errors.\nfunc (a *MT5Account) OrderCheck(\n    ctx context.Context,\n    req *pb.OrderCheckRequest,\n) (*pb.OrderCheckData, error)\n</code></pre> <p>Request message:</p> <pre><code>OrderCheckRequest {\n  MrpcMqlTradeRequest mql_trade_request = 1; // Nested trade request structure (REQUIRED)\n}\n\nMrpcMqlTradeRequest {\n  MRPC_ENUM_TRADE_REQUEST_ACTIONS action = 1;           // Trade operation type\n  uint64 expert_advisor_magic_number = 2;               // Expert Advisor ID (magic number)\n  uint64 order = 3;                                     // Order ticket (for modify/remove actions)\n  string symbol = 4;                                    // Symbol name\n  double volume = 5;                                    // Requested volume for a deal in lots\n  double price = 6;                                     // Price\n  double stop_limit = 7;                                // StopLimit level of the order\n  double stop_loss = 8;                                 // Stop Loss level of the order\n  double take_profit = 9;                               // Take Profit level of the order\n  uint64 deviation = 10;                                // Maximal possible deviation from the requested price\n  ENUM_ORDER_TYPE_TF order_type = 11;                   // Type of order\n  MRPC_ENUM_ORDER_TYPE_FILLING type_filling = 12;       // Order execution type (FOK, IOC, RETURN)\n  MRPC_ENUM_ORDER_TYPE_TIME type_time = 13;             // Order expiration type\n  google.protobuf.Timestamp expiration = 14;            // Order expiration time\n  string comment = 15;                                  // Order comment\n  uint64 position = 16;                                 // Position ticket\n  uint64 position_by = 17;                              // Ticket of an opposite position\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.OrderCheckRequest</code> Request with nested MqlTradeRequest structure <p>Request contains a nested MrpcMqlTradeRequest with these fields:</p> Field Type Required Description <code>Action</code> <code>MRPC_ENUM_TRADE_REQUEST_ACTIONS</code> \u2705 Trade action: DEAL (0), PENDING (1), SLTP (2), etc <code>ExpertAdvisorMagicNumber</code> <code>uint64</code> optional Expert Advisor ID (magic number) <code>Order</code> <code>uint64</code> optional Order ticket (for modify/remove actions) <code>Symbol</code> <code>string</code> \u2705 Trading symbol <code>Volume</code> <code>double</code> \u2705 Order volume in lots <code>Price</code> <code>double</code> \u2705 Order price <code>StopLimit</code> <code>double</code> optional StopLimit level <code>StopLoss</code> <code>double</code> optional Stop Loss level <code>TakeProfit</code> <code>double</code> optional Take Profit level <code>Deviation</code> <code>uint64</code> optional Maximum price deviation (slippage) <code>OrderType</code> <code>ENUM_ORDER_TYPE_TF</code> \u2705 Order type: BUY (0), SELL (1), BUY_LIMIT (2), etc <code>TypeFilling</code> <code>MRPC_ENUM_ORDER_TYPE_FILLING</code> optional Filling type: FOK (0), IOC (1), RETURN (2), BOC (3) <code>TypeTime</code> <code>MRPC_ENUM_ORDER_TYPE_TIME</code> optional Time type: GTC (0), DAY (1), SPECIFIED (2) <code>Expiration</code> <code>google.protobuf.Timestamp</code> optional Expiration time <code>Comment</code> <code>string</code> optional Order comment <code>Position</code> <code>uint64</code> optional Position ticket <code>PositionBy</code> <code>uint64</code> optional Opposite position ticket"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#output-ordercheckdata","title":"\u2b06\ufe0f Output \u2014 <code>OrderCheckData</code>","text":"Field Type Description <code>MqlTradeCheckResult</code> <code>MrpcMqlTradeCheckResult</code> Nested validation result structure <p>MrpcMqlTradeCheckResult contains:</p> Field Type Description <code>ReturnedCode</code> <code>uint32</code> Return code (10009 = valid, other = error) <code>BalanceAfterDeal</code> <code>double</code> Balance after the execution of the deal <code>EquityAfterDeal</code> <code>double</code> Equity after the execution of the deal <code>Profit</code> <code>double</code> Floating profit <code>Margin</code> <code>double</code> Margin requirements <code>FreeMargin</code> <code>double</code> Free margin after order <code>MarginLevel</code> <code>double</code> Margin level percentage <code>Comment</code> <code>string</code> Comment to the reply code (error description) <p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.MRPC_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL</code></p>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#enum-mrpc_enum_trade_request_actions","title":"\ud83d\udcd8 Enum: MRPC_ENUM_TRADE_REQUEST_ACTIONS","text":"Value Constant Description 0 <code>TRADE_ACTION_DEAL</code> Place a market order for immediate execution (BUY/SELL) 1 <code>TRADE_ACTION_PENDING</code> Place a pending order (BUY_LIMIT, SELL_STOP, etc) 2 <code>TRADE_ACTION_SLTP</code> Modify StopLoss/TakeProfit of an open position 3 <code>TRADE_ACTION_MODIFY</code> Modify parameters of a pending order 4 <code>TRADE_ACTION_REMOVE</code> Delete a pending order 5 <code>TRADE_ACTION_CLOSE_BY</code> Close a position by an opposite one"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#enum-enum_order_type_tf","title":"\ud83d\udcd8 Enum: ENUM_ORDER_TYPE_TF","text":"Value Constant Description 0 <code>ORDER_TYPE_TF_BUY</code> Market Buy order 1 <code>ORDER_TYPE_TF_SELL</code> Market Sell order 2 <code>ORDER_TYPE_TF_BUY_LIMIT</code> Buy Limit pending order 3 <code>ORDER_TYPE_TF_SELL_LIMIT</code> Sell Limit pending order 4 <code>ORDER_TYPE_TF_BUY_STOP</code> Buy Stop pending order 5 <code>ORDER_TYPE_TF_SELL_STOP</code> Sell Stop pending order 6 <code>ORDER_TYPE_TF_BUY_STOP_LIMIT</code> Upon reaching the order price, a pending Buy Limit order is placed at the StopLimit price 7 <code>ORDER_TYPE_TF_SELL_STOP_LIMIT</code> Upon reaching the order price, a pending Sell Limit order is placed at the StopLimit price 8 <code>ORDER_TYPE_TF_CLOSE_BY</code> Order to close a position by an opposite one"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#enum-mrpc_enum_order_type_filling","title":"\ud83d\udcd8 Enum: MRPC_ENUM_ORDER_TYPE_FILLING","text":"Value Constant Description 0 <code>ORDER_FILLING_FOK</code> Fill Or Kill (entire order must be filled immediately or cancelled) 1 <code>ORDER_FILLING_IOC</code> Immediate Or Cancel (fill available volume immediately, cancel remainder) 2 <code>ORDER_FILLING_RETURN</code> Return execution (partial fills allowed, remainder stays as pending order) 3 <code>ORDER_FILLING_BOC</code> Book Or Cancel (order must be placed in the order book or cancelled)"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#enum-mrpc_enum_order_type_time","title":"\ud83d\udcd8 Enum: MRPC_ENUM_ORDER_TYPE_TIME","text":"Value Constant Description 0 <code>ORDER_TIME_GTC</code> Good Till Cancelled (order valid until explicitly cancelled) 1 <code>ORDER_TIME_DAY</code> Good Till Day (order valid until end of trading day) 2 <code>ORDER_TIME_SPECIFIED</code> Good Till Specified Time (order valid until Expiration time) 3 <code>ORDER_TIME_SPECIFIED_DAY</code> Good Till Specified Day (order valid until end of specified day)"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>10s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>No actual trade: OrderCheck does NOT place real orders.</li> <li>Return codes: ReturnedCode 10009 = valid order, other values indicate errors.</li> <li>Nested structure: Request requires wrapping order parameters in MqlTradeRequest field.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#1-basic-order-validation","title":"1) Basic order validation","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    tick, _ := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: \"EURUSD\"})\n\n    sl := tick.Ask - 0.0050\n    tp := tick.Ask + 0.0100\n\n    data, err := account.OrderCheck(ctx, &amp;pb.OrderCheckRequest{\n        MqlTradeRequest: &amp;pb.MrpcMqlTradeRequest{\n            Action:     pb.MRPC_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n            Symbol:     \"EURUSD\",\n            Volume:     0.01,\n            Price:      tick.Ask,\n            OrderType:  pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n            StopLoss:   sl,\n            TakeProfit: tp,\n        },\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    result := data.MqlTradeCheckResult\n    if result.ReturnedCode == 10009 {\n        fmt.Println(\"Order is valid!\")\n        fmt.Printf(\"Required margin: %.2f\\n\", result.Margin)\n        fmt.Printf(\"Free margin after: %.2f\\n\", result.FreeMargin)\n    } else {\n        fmt.Printf(\"Order invalid: %s\\n\", result.Comment)\n    }\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#2-check-margin-before-trading","title":"2) Check margin before trading","text":"<pre><code>func CheckMarginBeforeTrade(account *mt5.MT5Account, symbol string, volume float64) (bool, error) {\n    ctx := context.Background()\n\n    tick, _ := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: symbol})\n\n    data, err := account.OrderCheck(ctx, &amp;pb.OrderCheckRequest{\n        MqlTradeRequest: &amp;pb.MrpcMqlTradeRequest{\n            Action:    pb.MRPC_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n            Symbol:    symbol,\n            Volume:    volume,\n            Price:     tick.Ask,\n            OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n        },\n    })\n    if err != nil {\n        return false, err\n    }\n\n    result := data.MqlTradeCheckResult\n    if result.ReturnedCode != 10009 {\n        return false, fmt.Errorf(\"order invalid: %s\", result.Comment)\n    }\n\n    // Check if we have enough margin\n    if result.FreeMargin &lt; 100 { // Example: need at least 100 currency units\n        return false, fmt.Errorf(\"insufficient margin: %.2f\", result.FreeMargin)\n    }\n\n    fmt.Printf(\"Margin check passed: Required=%.2f, Free after=%.2f\\n\",\n        result.Margin, result.FreeMargin)\n    return true, nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#3-validate-multiple-lot-sizes","title":"3) Validate multiple lot sizes","text":"<pre><code>func FindMaxLotSize(account *mt5.MT5Account, symbol string) (float64, error) {\n    ctx := context.Background()\n\n    tick, _ := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: symbol})\n\n    testVolumes := []float64{1.0, 0.5, 0.1, 0.05, 0.01}\n\n    for _, volume := range testVolumes {\n        data, err := account.OrderCheck(ctx, &amp;pb.OrderCheckRequest{\n            MqlTradeRequest: &amp;pb.MrpcMqlTradeRequest{\n                Action:    pb.MRPC_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n                Symbol:    symbol,\n                Volume:    volume,\n                Price:     tick.Ask,\n                OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n            },\n        })\n        if err != nil {\n            continue\n        }\n\n        result := data.MqlTradeCheckResult\n        if result.ReturnedCode == 10009 &amp;&amp; result.FreeMargin &gt; 0 {\n            fmt.Printf(\"Max lot size: %.2f (Required margin: %.2f)\\n\",\n                volume, result.Margin)\n            return volume, nil\n        }\n    }\n\n    return 0, fmt.Errorf(\"no valid lot size found\")\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#4-validate-and-send-pattern","title":"4) Validate and send pattern","text":"<pre><code>func ValidateAndSend(account *mt5.MT5Account, symbol string, volume float64, isBuy bool) (uint64, error) {\n    ctx := context.Background()\n\n    tick, _ := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: symbol})\n\n    var orderType pb.TMT5_ENUM_ORDER_TYPE\n    var orderTypeTF pb.ENUM_ORDER_TYPE_TF\n    var price, sl, tp float64\n\n    if isBuy {\n        orderType = pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY\n        orderTypeTF = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY\n        price = tick.Ask\n        sl = tick.Ask - 0.0050\n        tp = tick.Ask + 0.0100\n    } else {\n        orderType = pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_SELL\n        orderTypeTF = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_SELL\n        price = tick.Bid\n        sl = tick.Bid + 0.0050\n        tp = tick.Bid - 0.0100\n    }\n\n    // Validate first\n    checkData, err := account.OrderCheck(ctx, &amp;pb.OrderCheckRequest{\n        MqlTradeRequest: &amp;pb.MrpcMqlTradeRequest{\n            Action:     pb.MRPC_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n            Symbol:     symbol,\n            Volume:     volume,\n            Price:      price,\n            OrderType:  orderTypeTF,\n            StopLoss:   sl,\n            TakeProfit: tp,\n        },\n    })\n    if err != nil {\n        return 0, fmt.Errorf(\"check failed: %w\", err)\n    }\n\n    result := checkData.MqlTradeCheckResult\n    if result.ReturnedCode != 10009 {\n        return 0, fmt.Errorf(\"order invalid: %s\", result.Comment)\n    }\n\n    // If valid, send order\n    slippage := uint64(20)\n    sendData, err := account.OrderSend(ctx, &amp;pb.OrderSendRequest{\n        Symbol:     symbol,\n        Operation:  orderType,\n        Volume:     volume,\n        Price:      &amp;price,\n        StopLoss:   &amp;sl,\n        TakeProfit: &amp;tp,\n        Slippage:   &amp;slippage,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    if sendData.ReturnedCode == 10009 {\n        fmt.Printf(\"Order validated and sent: %d\\n\", sendData.Order)\n        return sendData.Order, nil\n    }\n\n    return 0, fmt.Errorf(\"order send failed: %s\", sendData.ReturnedCodeDescription)\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#5-check-stop-levels-validity","title":"5) Check stop levels validity","text":"<pre><code>func ValidateStopLevels(account *mt5.MT5Account, symbol string, price, sl, tp float64) error {\n    ctx := context.Background()\n\n    data, err := account.OrderCheck(ctx, &amp;pb.OrderCheckRequest{\n        MqlTradeRequest: &amp;pb.MrpcMqlTradeRequest{\n            Action:     pb.MRPC_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n            Symbol:     symbol,\n            Volume:     0.01,\n            Price:      price,\n            OrderType:  pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n            StopLoss:   sl,\n            TakeProfit: tp,\n        },\n    })\n    if err != nil {\n        return err\n    }\n\n    result := data.MqlTradeCheckResult\n    if result.ReturnedCode != 10009 {\n        return fmt.Errorf(\"invalid SL/TP levels: %s\", result.Comment)\n    }\n\n    fmt.Println(\"Stop levels are valid\")\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#safe-order-placement","title":"Safe order placement","text":"<pre><code>func SafeOrderSend(account *mt5.MT5Account, symbol string, operation pb.TMT5_ENUM_ORDER_TYPE, volume float64) (uint64, error) {\n    ctx := context.Background()\n\n    // Get current price\n    tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: symbol})\n    if err != nil {\n        return 0, err\n    }\n\n    var price, sl, tp float64\n    var orderTypeTF pb.ENUM_ORDER_TYPE_TF\n\n    if operation == pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY {\n        orderTypeTF = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY\n        price = tick.Ask\n        sl = tick.Ask - 0.0050\n        tp = tick.Ask + 0.0100\n    } else {\n        orderTypeTF = pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_SELL\n        price = tick.Bid\n        sl = tick.Bid + 0.0050\n        tp = tick.Bid - 0.0100\n    }\n\n    // Validate first\n    checkData, err := account.OrderCheck(ctx, &amp;pb.OrderCheckRequest{\n        MqlTradeRequest: &amp;pb.MrpcMqlTradeRequest{\n            Action:     pb.MRPC_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n            Symbol:     symbol,\n            Volume:     volume,\n            Price:      price,\n            OrderType:  orderTypeTF,\n            StopLoss:   sl,\n            TakeProfit: tp,\n        },\n    })\n    if err != nil {\n        return 0, fmt.Errorf(\"validation error: %w\", err)\n    }\n\n    result := checkData.MqlTradeCheckResult\n    if result.ReturnedCode != 10009 {\n        return 0, fmt.Errorf(\"invalid order: %s\", result.Comment)\n    }\n\n    // Send order\n    slippage := uint64(20)\n    sendData, err := account.OrderSend(ctx, &amp;pb.OrderSendRequest{\n        Symbol:     symbol,\n        Operation:  operation,\n        Volume:     volume,\n        Price:      &amp;price,\n        StopLoss:   &amp;sl,\n        TakeProfit: &amp;tp,\n        Slippage:   &amp;slippage,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    if sendData.ReturnedCode == 10009 {\n        return sendData.Order, nil\n    }\n\n    return 0, fmt.Errorf(\"order send failed: %s\", sendData.ReturnedCodeDescription)\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderCheck/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OrderSend - Place orders after validation</li> <li>OrderCalcMargin - Calculate required margin</li> <li>OrderCalcProfit - Calculate potential profit</li> <li>AccountSummary - Check account balance and margin</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/","title":"\u2705 Close Positions and Delete Orders","text":"<p>Request: close an open position at current market price or delete a pending order. Supports partial position closing.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OrderClose(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.TradingHelper</code></li> <li>Proto definition: <code>OrderClose</code> (defined in <code>mt5-term-api-trading-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradingHelper</code></li> <li>Method: <code>OrderClose(OrderCloseRequest) \u2192 OrderCloseReply</code></li> <li>Low\u2011level client (generated): <code>TradingHelperClient.OrderClose(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Closes market positions or cancels pending orders.</li> <li>Why you need it. Exit trades, take profits, cut losses, cancel pending orders.</li> <li>Partial closing. Supports closing part of a position via Volume parameter.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Close market positions at current price</li> <li>Cancel pending orders</li> <li>Partially close positions</li> <li>Exit trades programmatically</li> <li>Implement exit strategies</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OrderClose - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OrderClose closes an existing market position or deletes a pending order.\n// Supports partial closing via Volume parameter.\nfunc (a *MT5Account) OrderClose(\n    ctx context.Context,\n    req *pb.OrderCloseRequest,\n) (*pb.OrderCloseData, error)\n</code></pre> <p>Request message:</p> <pre><code>OrderCloseRequest {\n  uint64 ticket = 1;      // Order ticket to close (REQUIRED)\n  double volume = 2;      // Volume to close (0 = close all)\n  int32 slippage = 5;     // Maximum price deviation (slippage) in points\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.OrderCloseRequest</code> Request with ticket and close parameters <p>Request fields:</p> Field Type Required Description <code>Ticket</code> <code>uint64</code> \u2705 Order ticket number to close <code>Volume</code> <code>double</code> \u2705 Volume to close (0 = close all) <code>Slippage</code> <code>int32</code> \u2705 Maximum price deviation (slippage) in points"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#output-orderclosedata","title":"\u2b06\ufe0f Output \u2014 <code>OrderCloseData</code>","text":"Field Type Description <code>ReturnedCode</code> <code>uint32</code> Operation return code (10009 = success) <code>ReturnedStringCode</code> <code>string</code> String representation of return code <code>ReturnedCodeDescription</code> <code>string</code> Description of return code <code>CloseMode</code> <code>MRPC_ORDER_CLOSE_MODE</code> Close mode (see enum below)"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#enum-mrpc_order_close_mode","title":"\ud83d\udcd8 Enum: MRPC_ORDER_CLOSE_MODE","text":"Value Constant Description 0 <code>MRPC_MARKET_ORDER_CLOSE</code> Full market position close 1 <code>MRPC_MARKET_ORDER_PARTIAL_CLOSE</code> Partial market position close 2 <code>MRPC_PENDING_ORDER_REMOVE</code> Pending order removal"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>30s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Full close: Set Volume to 0 or full position volume to close entire position.</li> <li>Pending orders: Deletes pending orders (no market execution).</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#1-close-position-completely","title":"1) Close position completely","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)\n    defer cancel()\n\n    ticket := uint64(12345678)\n\n    data, err := account.OrderClose(ctx, &amp;pb.OrderCloseRequest{\n        Ticket:   ticket,\n        Volume:   0,  // Close full position\n        Slippage: 20,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    // Check close result using helper from errors.go\n    if mt5.IsRetCodeSuccess(data.ReturnedCode) {\n        fmt.Printf(\"Position %d closed successfully\\n\", ticket)\n    } else {\n        fmt.Printf(\"Close failed: %s (code: %d)\\n\",\n            mt5.GetRetCodeMessage(data.ReturnedCode),\n            data.ReturnedCode)\n    }\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#2-partial-position-close","title":"2) Partial position close","text":"<pre><code>func PartialClose(account *mt5.MT5Account, ticket uint64, closeVolume float64) error {\n    ctx := context.Background()\n\n    data, err := account.OrderClose(ctx, &amp;pb.OrderCloseRequest{\n        Ticket:   ticket,\n        Volume:   closeVolume,\n        Slippage: 20,\n    })\n    if err != nil {\n        return fmt.Errorf(\"failed to close: %w\", err)\n    }\n\n    // Validate close result using helper from errors.go\n    if !mt5.IsRetCodeSuccess(data.ReturnedCode) {\n        return fmt.Errorf(\"close unsuccessful: %s (code: %d)\",\n            mt5.GetRetCodeMessage(data.ReturnedCode),\n            data.ReturnedCode)\n    }\n\n    fmt.Printf(\"Partially closed position %d (%.2f lots)\\n\", ticket, closeVolume)\n    return nil\n}\n\n// Usage:\n// PartialClose(account, 12345678, 0.05) // Close 0.05 lots\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#3-close-all-positions","title":"3) Close all positions","text":"<pre><code>func CloseAllPositions(account *mt5.MT5Account) error {\n    ctx := context.Background()\n\n    // Get all open positions\n    positions, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{})\n    if err != nil {\n        return err\n    }\n\n    for _, order := range positions.Orders {\n        data, err := account.OrderClose(ctx, &amp;pb.OrderCloseRequest{\n            Ticket:   order.Ticket,\n            Volume:   0, // Full close\n            Slippage: 50,\n        })\n        if err != nil {\n            fmt.Printf(\"Failed to close %d: %v\\n\", order.Ticket, err)\n            continue\n        }\n        // Check close result using helper from errors.go\n        if mt5.IsRetCodeSuccess(data.ReturnedCode) {\n            fmt.Printf(\"Closed position %d\\n\", order.Ticket)\n        } else {\n            fmt.Printf(\"Failed to close %d: %s (code: %d)\\n\",\n                order.Ticket,\n                mt5.GetRetCodeMessage(data.ReturnedCode),\n                data.ReturnedCode)\n        }\n        time.Sleep(100 * time.Millisecond) // Small delay between closes\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#4-close-losing-positions-only","title":"4) Close losing positions only","text":"<pre><code>func CloseLosingPositions(account *mt5.MT5Account) error {\n    ctx := context.Background()\n\n    positions, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{})\n    if err != nil {\n        return err\n    }\n\n    for _, order := range positions.Orders {\n        if order.Profit &lt; 0 { // Only losing positions\n            data, err := account.OrderClose(ctx, &amp;pb.OrderCloseRequest{\n                Ticket:   order.Ticket,\n                Volume:   0,\n                Slippage: 30,\n            })\n            if err != nil {\n                fmt.Printf(\"Failed to close losing position %d: %v\\n\", order.Ticket, err)\n                continue\n            }\n            if data.ReturnedCode == 10009 {\n                fmt.Printf(\"Closed losing position %d (P&amp;L: %.2f)\\n\", order.Ticket, order.Profit)\n            }\n        }\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#5-close-positions-for-specific-symbol","title":"5) Close positions for specific symbol","text":"<pre><code>func CloseSymbolPositions(account *mt5.MT5Account, symbol string) error {\n    ctx := context.Background()\n\n    positions, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return err\n    }\n\n    closedCount := 0\n    for _, order := range positions.Orders {\n        data, err := account.OrderClose(ctx, &amp;pb.OrderCloseRequest{\n            Ticket:   order.Ticket,\n            Volume:   0,\n            Slippage: 30,\n        })\n        if err != nil {\n            fmt.Printf(\"Failed to close %d: %v\\n\", order.Ticket, err)\n            continue\n        }\n        if data.ReturnedCode == 10009 {\n            closedCount++\n        }\n        time.Sleep(100 * time.Millisecond)\n    }\n\n    fmt.Printf(\"Closed %d %s positions\\n\", closedCount, symbol)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#6-close-with-confirmation","title":"6) Close with confirmation","text":"<pre><code>func ClosePositionWithConfirmation(account *mt5.MT5Account, ticket uint64) error {\n    ctx := context.Background()\n\n    // Get position details first\n    positions, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{})\n    if err != nil {\n        return err\n    }\n\n    var order *pb.Order\n    for _, o := range positions.Orders {\n        if o.Ticket == ticket {\n            order = o\n            break\n        }\n    }\n\n    if order == nil {\n        return fmt.Errorf(\"position %d not found\", ticket)\n    }\n\n    fmt.Printf(\"Closing position %d: %s, Volume: %.2f, P&amp;L: %.2f\\n\",\n        order.Ticket, order.Symbol, order.Volume, order.Profit)\n\n    // Close position\n    data, err := account.OrderClose(ctx, &amp;pb.OrderCloseRequest{\n        Ticket:   ticket,\n        Volume:   0,\n        Slippage: 20,\n    })\n    if err != nil {\n        return err\n    }\n\n    if data.ReturnedCode != 10009 {\n        return fmt.Errorf(\"close unsuccessful: %s\", data.ReturnedCodeDescription)\n    }\n\n    fmt.Printf(\"Position closed successfully\\n\")\n\n    // Wait and verify it's closed\n    time.Sleep(1 * time.Second)\n    isOpen, _ := IsTicketOpen(account, ticket)\n    if isOpen {\n        return fmt.Errorf(\"position %d still open after close\", ticket)\n    }\n\n    fmt.Println(\"Close confirmed\")\n    return nil\n}\n\nfunc IsTicketOpen(account *mt5.MT5Account, ticket uint64) (bool, error) {\n    ctx := context.Background()\n    data, err := account.OpenedOrdersTickets(ctx, &amp;pb.OpenedOrdersTicketsRequest{})\n    if err != nil {\n        return false, err\n    }\n\n    for _, t := range data.Tickets {\n        if t == ticket {\n            return true, nil\n        }\n    }\n    return false, nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#close-with-retry","title":"Close with retry","text":"<pre><code>func CloseWithRetry(account *mt5.MT5Account, ticket uint64, maxRetries int) error {\n    ctx := context.Background()\n\n    for i := 0; i &lt; maxRetries; i++ {\n        data, err := account.OrderClose(ctx, &amp;pb.OrderCloseRequest{\n            Ticket:   ticket,\n            Volume:   0,\n            Slippage: 50,\n        })\n\n        if err == nil &amp;&amp; data.ReturnedCode == 10009 {\n            fmt.Printf(\"Position %d closed successfully\\n\", ticket)\n            return nil\n        }\n\n        if err != nil {\n            fmt.Printf(\"Close attempt %d failed: %v\\n\", i+1, err)\n        } else {\n            fmt.Printf(\"Close attempt %d failed: %s\\n\", i+1, data.ReturnedCodeDescription)\n        }\n        time.Sleep(500 * time.Millisecond)\n    }\n\n    return fmt.Errorf(\"failed to close after %d retries\", maxRetries)\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderClose/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OrderSend - Place new orders</li> <li>OrderModify - Modify existing orders</li> <li>OpenedOrders - Get open positions</li> <li>OpenedOrdersTickets - Get position tickets</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/","title":"\u2705 Modify Orders and Positions","text":"<p>Request: modify parameters of existing pending orders or StopLoss/TakeProfit levels of open positions.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OrderModify(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.TradingHelper</code></li> <li>Proto definition: <code>OrderModify</code> (defined in <code>mt5-term-api-trading-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradingHelper</code></li> <li>Method: <code>OrderModify(OrderModifyRequest) \u2192 OrderModifyReply</code></li> <li>Low\u2011level client (generated): <code>TradingHelperClient.OrderModify(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Modifies parameters of existing orders and positions.</li> <li>Why you need it. Adjust SL/TP levels, change pending order prices, manage risk.</li> <li>Flexible. Works with both pending orders and open positions.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Adjust stop-loss and take-profit levels</li> <li>Move pending order entry prices</li> <li>Implement trailing stops</li> <li>Update risk management parameters</li> <li>Change order expiration times</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OrderModify - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OrderModify modifies an existing pending order or position.\n// Can change entry price (pending orders), StopLoss, TakeProfit, and expiration.\nfunc (a *MT5Account) OrderModify(\n    ctx context.Context,\n    req *pb.OrderModifyRequest,\n) (*pb.OrderModifyData, error)\n</code></pre> <p>Request message:</p> <pre><code>OrderModifyRequest {\n  uint64 ticket = 1;                                        // Pending order or position ticket (REQUIRED)\n  optional double stop_loss  = 2;                           // New SL for position or pending order\n  optional double take_profit  = 3;                         // New TP for position or pending order\n  optional double price = 4;                                // New price ONLY for pending order modification\n  optional TMT5_ENUM_ORDER_TYPE_TIME expiration_time_type = 5;  // Expiration type ONLY for pending order\n  optional google.protobuf.Timestamp expiration_time = 6;   // Order expiration time (for ORDER_TIME_SPECIFIED)\n  optional double stop_limit = 8;                           // New stop limit ONLY for pending order modification\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.OrderModifyRequest</code> Request with ticket and new parameters <p>Request fields:</p> Field Type Required Description <code>Ticket</code> <code>uint64</code> \u2705 Order ticket number to modify <code>StopLoss</code> <code>double</code> optional New stop loss level (0 = remove) <code>TakeProfit</code> <code>double</code> optional New take profit level (0 = remove) <code>Price</code> <code>double</code> optional New entry price (for pending orders only) <code>ExpirationTimeType</code> <code>TMT5_ENUM_ORDER_TYPE_TIME</code> optional Expiration type (GTC, DAY, SPECIFIED, etc) <code>ExpirationTime</code> <code>google.protobuf.Timestamp</code> optional Expiration time (for SPECIFIED type) <code>StopLimit</code> <code>double</code> optional New stop limit level (for stop-limit orders)"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#output-ordermodifydata","title":"\u2b06\ufe0f Output \u2014 <code>OrderModifyData</code>","text":"Field Type Description <code>ReturnedCode</code> <code>uint32</code> Operation return code (10009 = success) <code>Deal</code> <code>uint64</code> Deal ticket, if it is performed <code>Order</code> <code>uint64</code> Order ticket, if it is placed <code>Volume</code> <code>double</code> Deal volume, confirmed by broker <code>Price</code> <code>double</code> Deal price, confirmed by broker <code>Bid</code> <code>double</code> Current Bid price <code>Ask</code> <code>double</code> Current Ask price <code>Comment</code> <code>string</code> Broker comment to operation <code>RequestId</code> <code>uint32</code> Request ID set by terminal during dispatch <code>RetCodeExternal</code> <code>int32</code> Return code of external trading system <code>ReturnedStringCode</code> <code>string</code> String representation of return code <code>ReturnedCodeDescription</code> <code>string</code> Description of return code <p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.TMT5_ENUM_ORDER_TYPE_TIME_TMT5_ORDER_TIME_GTC</code></p>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#enum-tmt5_enum_order_type_time","title":"\ud83d\udcd8 Enum: TMT5_ENUM_ORDER_TYPE_TIME","text":"Value Constant Description 0 <code>TMT5_ORDER_TIME_GTC</code> Good Till Cancelled (order valid until explicitly cancelled) 1 <code>TMT5_ORDER_TIME_DAY</code> Good Till Day (order valid until end of trading day) 2 <code>TMT5_ORDER_TIME_SPECIFIED</code> Good Till Specified Time (order valid until ExpirationTime) 3 <code>TMT5_ORDER_TIME_SPECIFIED_DAY</code> Good Till Specified Day (order valid until end of specified day)"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>30s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Remove SL/TP: Set StopLoss or TakeProfit to 0 to remove them.</li> <li>Price for positions: Cannot modify entry price of open positions (only pending orders).</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#1-modify-stop-loss-and-take-profit","title":"1) Modify stop-loss and take-profit","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)\n    defer cancel()\n\n    ticket := uint64(12345678)\n    newSL := 1.10000\n    newTP := 1.12000\n\n    data, err := account.OrderModify(ctx, &amp;pb.OrderModifyRequest{\n        Ticket:     ticket,\n        StopLoss:   &amp;newSL,\n        TakeProfit: &amp;newTP,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    // Check modification result using helper from errors.go\n    if mt5.IsRetCodeSuccess(data.ReturnedCode) {\n        fmt.Printf(\"Order %d modified: SL=%.5f, TP=%.5f\\n\", ticket, newSL, newTP)\n    } else {\n        fmt.Printf(\"Modification failed: %s (code: %d)\\n\",\n            mt5.GetRetCodeMessage(data.ReturnedCode),\n            data.ReturnedCode)\n    }\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#2-move-stop-loss-to-breakeven","title":"2) Move stop-loss to breakeven","text":"<pre><code>func MoveToBreakeven(account *mt5.MT5Account, ticket uint64, openPrice float64) error {\n    ctx := context.Background()\n\n    data, err := account.OrderModify(ctx, &amp;pb.OrderModifyRequest{\n        Ticket:   ticket,\n        StopLoss: &amp;openPrice,\n        // Don't pass TakeProfit to keep existing TP\n    })\n    if err != nil {\n        return fmt.Errorf(\"failed to move to breakeven: %w\", err)\n    }\n\n    // Validate modification result using helper from errors.go\n    if !mt5.IsRetCodeSuccess(data.ReturnedCode) {\n        return fmt.Errorf(\"modification unsuccessful: %s (code: %d)\",\n            mt5.GetRetCodeMessage(data.ReturnedCode),\n            data.ReturnedCode)\n    }\n\n    fmt.Printf(\"Moved order %d to breakeven\\n\", ticket)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#3-implement-trailing-stop","title":"3) Implement trailing stop","text":"<pre><code>func TrailingStop(account *mt5.MT5Account, ticket uint64, trailDistance float64) error {\n    ctx := context.Background()\n\n    // Get current position\n    positions, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{})\n    if err != nil {\n        return err\n    }\n\n    var order *pb.Order\n    for _, o := range positions.Orders {\n        if o.Ticket == ticket {\n            order = o\n            break\n        }\n    }\n\n    if order == nil {\n        return fmt.Errorf(\"position not found\")\n    }\n\n    // Calculate new SL\n    var newSL float64\n    if order.Type == 0 { // Buy position\n        newSL = order.CurrentPrice - trailDistance\n        // Only move SL up, never down\n        if newSL &lt;= order.StopLoss {\n            return nil // No change needed\n        }\n    } else { // Sell position\n        newSL = order.CurrentPrice + trailDistance\n        // Only move SL down, never up\n        if order.StopLoss &gt; 0 &amp;&amp; newSL &gt;= order.StopLoss {\n            return nil // No change needed\n        }\n    }\n\n    data, err := account.OrderModify(ctx, &amp;pb.OrderModifyRequest{\n        Ticket:   ticket,\n        StopLoss: &amp;newSL,\n    })\n    if err != nil {\n        return err\n    }\n\n    // Check modification result using helper from errors.go\n    if mt5.IsRetCodeSuccess(data.ReturnedCode) {\n        fmt.Printf(\"Trailing stop updated for %d: new SL=%.5f\\n\", ticket, newSL)\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#4-modify-pending-order-price","title":"4) Modify pending order price","text":"<pre><code>func ModifyPendingOrderPrice(account *mt5.MT5Account, ticket uint64, newPrice float64) error {\n    ctx := context.Background()\n\n    data, err := account.OrderModify(ctx, &amp;pb.OrderModifyRequest{\n        Ticket: ticket,\n        Price:  &amp;newPrice,\n    })\n    if err != nil {\n        return err\n    }\n\n    if data.ReturnedCode != 10009 {\n        return fmt.Errorf(\"failed to modify pending order price: %s\", data.ReturnedCodeDescription)\n    }\n\n    fmt.Printf(\"Pending order %d price changed to %.5f\\n\", ticket, newPrice)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#5-remove-stop-loss","title":"5) Remove stop-loss","text":"<pre><code>func RemoveStopLoss(account *mt5.MT5Account, ticket uint64) error {\n    ctx := context.Background()\n\n    zeroSL := 0.0\n    data, err := account.OrderModify(ctx, &amp;pb.OrderModifyRequest{\n        Ticket:   ticket,\n        StopLoss: &amp;zeroSL, // 0 means remove SL\n    })\n    if err != nil {\n        return err\n    }\n\n    if data.ReturnedCode == 10009 {\n        fmt.Printf(\"Stop-loss removed from order %d\\n\", ticket)\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#safe-sltp-modification","title":"Safe SL/TP modification","text":"<pre><code>func SafeModifySLTP(account *mt5.MT5Account, ticket uint64, newSL, newTP float64) error {\n    ctx := context.Background()\n\n    // Validate stop levels first\n    stopsLevel, _ := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n        Symbol:     \"EURUSD\", // Should get symbol from position\n        PropertyId: 19,       // SYMBOL_STOPS_LEVEL\n    })\n\n    // Add validation logic here...\n\n    data, err := account.OrderModify(ctx, &amp;pb.OrderModifyRequest{\n        Ticket:     ticket,\n        StopLoss:   &amp;newSL,\n        TakeProfit: &amp;newTP,\n    })\n\n    if err != nil {\n        return fmt.Errorf(\"modification failed: %w\", err)\n    }\n\n    if data.ReturnedCode != 10009 {\n        return fmt.Errorf(\"modification unsuccessful: %s\", data.ReturnedCodeDescription)\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderModify/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OrderSend - Place new orders</li> <li>OrderClose - Close positions</li> <li>OpenedOrders - Get current positions</li> <li>SymbolInfoInteger - Get stops level</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/","title":"\u2705 Place Market and Pending Orders","text":"<p>Request: primary method for opening positions and placing pending orders. Supports all order types: market buy/sell, buy/sell limit, buy/sell stop, and stop-limit.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OrderSend(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.TradingHelper</code></li> <li>Proto definition: <code>OrderSend</code> (defined in <code>mt5-term-api-trading-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradingHelper</code></li> <li>Method: <code>OrderSend(OrderSendRequest) \u2192 OrderSendReply</code></li> <li>Low\u2011level client (generated): <code>TradingHelperClient.OrderSend(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Main trading method for placing market and pending orders.</li> <li>Why you need it. Open positions, place limit/stop orders, enter trades.</li> <li>All order types. Supports market orders, limits, stops, and stop-limits.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Open market positions (Buy/Sell)</li> <li>Place pending orders (Limit/Stop)</li> <li>Enter trades with SL/TP</li> <li>Execute trading strategies</li> <li>Manage order parameters</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OrderSend - How it works</p> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OrderSend places a market or pending order.\n// Returns OrderSendData with ticket number, execution price, and MqlTradeResult.\nfunc (a *MT5Account) OrderSend(\n    ctx context.Context,\n    req *pb.OrderSendRequest,\n) (*pb.OrderSendData, error)\n</code></pre> <p>Request message:</p> <pre><code>OrderSendRequest {\n  string symbol = 1;                                            // Symbol name (REQUIRED)\n  TMT5_ENUM_ORDER_TYPE operation = 2;                           // Type of order (REQUIRED)\n  double volume = 3;                                            // Requested volume for a deal in lots (REQUIRED)\n  optional double price = 4;                                    // Price\n  optional uint64 slippage = 5;                                 // Maximal possible deviation from the requested price\n  optional double stop_loss = 6;                                // Stop Loss level of the order\n  optional double take_profit = 7;                              // Take Profit level of the order\n  optional string comment = 8;                                  // Order comment\n  optional uint64 expert_id = 9;                                // Expert Advisor ID (magic number)\n  optional double stop_limit_price = 10;                        // StopLimit level of the order\n  optional TMT5_ENUM_ORDER_TYPE_TIME expiration_time_type = 11; // Order expiration type\n  optional google.protobuf.Timestamp expiration_time = 12;      // Order expiration time (for ORDER_TIME_SPECIFIED type)\n}\n</code></pre> <p>Reply message:</p> <pre><code>OrderSendReply {\n  oneof response {\n    OrderSendData data = 1;\n    Error error = 2;\n  }\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.OrderSendRequest</code> Request with order parameters <p>Request fields:</p> Field Type Required Description <code>Symbol</code> <code>string</code> \u2705 Trading symbol (e.g., \"EURUSD\") <code>Operation</code> <code>TMT5_ENUM_ORDER_TYPE</code> \u2705 Order type (BUY=0, SELL=1, BUY_LIMIT=2, etc) <code>Volume</code> <code>double</code> \u2705 Order volume in lots <code>Price</code> <code>double</code> optional Order price (required for pending orders) <code>Slippage</code> <code>uint64</code> optional Maximum price deviation (slippage) in points <code>StopLoss</code> <code>double</code> optional Stop loss price level <code>TakeProfit</code> <code>double</code> optional Take profit price level <code>Comment</code> <code>string</code> optional Order comment <code>ExpertId</code> <code>uint64</code> optional Expert Advisor ID (magic number) <code>StopLimitPrice</code> <code>double</code> optional StopLimit level (for STOP_LIMIT orders) <code>ExpirationTimeType</code> <code>TMT5_ENUM_ORDER_TYPE_TIME</code> optional Order expiration type (GTC, DAY, SPECIFIED, etc) <code>ExpirationTime</code> <code>google.protobuf.Timestamp</code> optional Expiration time (for SPECIFIED type)"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#output-ordersenddata","title":"\u2b06\ufe0f Output \u2014 <code>OrderSendData</code>","text":"Field Type Description <code>ReturnedCode</code> <code>uint32</code> Operation return code (10009 = success) <code>Deal</code> <code>uint64</code> Deal ticket, if it is performed <code>Order</code> <code>uint64</code> Order ticket, if it is placed <code>Volume</code> <code>double</code> Deal volume, confirmed by broker <code>Price</code> <code>double</code> Deal price, confirmed by broker <code>Bid</code> <code>double</code> Current Bid price <code>Ask</code> <code>double</code> Current Ask price <code>Comment</code> <code>string</code> Broker comment to operation <code>RequestId</code> <code>uint32</code> Request ID set by terminal during dispatch <code>RetCodeExternal</code> <code>int32</code> Return code of external trading system <code>ReturnedStringCode</code> <code>string</code> String representation of return code <code>ReturnedCodeDescription</code> <code>string</code> Description of return code <p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY</code></p>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#enum-tmt5_enum_order_type","title":"\ud83d\udcd8 Enum: TMT5_ENUM_ORDER_TYPE","text":"Value Constant Description 0 <code>TMT5_ORDER_TYPE_BUY</code> Market Buy order 1 <code>TMT5_ORDER_TYPE_SELL</code> Market Sell order 2 <code>TMT5_ORDER_TYPE_BUY_LIMIT</code> Buy Limit pending order 3 <code>TMT5_ORDER_TYPE_SELL_LIMIT</code> Sell Limit pending order 4 <code>TMT5_ORDER_TYPE_BUY_STOP</code> Buy Stop pending order 5 <code>TMT5_ORDER_TYPE_SELL_STOP</code> Sell Stop pending order 6 <code>TMT5_ORDER_TYPE_BUY_STOP_LIMIT</code> Upon reaching the order price, a pending Buy Limit order is placed at the StopLimit price 7 <code>TMT5_ORDER_TYPE_SELL_STOP_LIMIT</code> Upon reaching the order price, a pending Sell Limit order is placed at the StopLimit price 8 <code>TMT5_ORDER_TYPE_CLOSE_BY</code> Order to close a position by an opposite one"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#enum-tmt5_enum_order_type_time","title":"\ud83d\udcd8 Enum: TMT5_ENUM_ORDER_TYPE_TIME","text":"Value Constant Description 0 <code>TMT5_ORDER_TIME_GTC</code> Good Till Cancelled (order valid until explicitly cancelled) 1 <code>TMT5_ORDER_TIME_DAY</code> Good Till Day (order valid until end of trading day) 2 <code>TMT5_ORDER_TIME_SPECIFIED</code> Good Till Specified Time (order valid until ExpirationTime) 3 <code>TMT5_ORDER_TIME_SPECIFIED_DAY</code> Good Till Specified Day (order valid until end of specified day)"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>30s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Use OrderCheck: Validate orders before sending with OrderCheck method.</li> <li>Slippage: Deviation parameter controls maximum acceptable slippage.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#1-place-market-buy-order","title":"1) Place market buy order","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)\n    defer cancel()\n\n    // Get current price\n    tick, _ := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: \"EURUSD\"})\n\n    sl := tick.Ask - 0.0050  // 50 pips SL\n    tp := tick.Ask + 0.0100  // 100 pips TP\n    slippage := uint64(20)\n    expertId := uint64(123456)\n    comment := \"Test buy order\"\n\n    data, err := account.OrderSend(ctx, &amp;pb.OrderSendRequest{\n        Symbol:     \"EURUSD\",\n        Operation:  pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY,\n        Volume:     0.01,\n        Price:      &amp;tick.Ask,\n        StopLoss:   &amp;sl,\n        TakeProfit: &amp;tp,\n        Slippage:   &amp;slippage,\n        ExpertId:   &amp;expertId,\n        Comment:    &amp;comment,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    // Check if order executed successfully using helper from errors.go\n    if mt5.IsRetCodeSuccess(data.ReturnedCode) {\n        fmt.Printf(\"Order placed! Ticket: %d, Price: %.5f\\n\", data.Order, data.Price)\n    } else {\n        fmt.Printf(\"Order failed: %s (code: %d)\\n\",\n            mt5.GetRetCodeMessage(data.ReturnedCode),\n            data.ReturnedCode)\n    }\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#2-place-market-sell-order","title":"2) Place market sell order","text":"<pre><code>func PlaceSellOrder(account *mt5.MT5Account, symbol string, volume float64) (uint64, error) {\n    ctx := context.Background()\n\n    // Get current price\n    tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: symbol})\n    if err != nil {\n        return 0, err\n    }\n\n    sl := tick.Bid + 0.0050\n    tp := tick.Bid - 0.0100\n    slippage := uint64(20)\n    comment := \"Sell order\"\n\n    data, err := account.OrderSend(ctx, &amp;pb.OrderSendRequest{\n        Symbol:     symbol,\n        Operation:  pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_SELL,\n        Volume:     volume,\n        Price:      &amp;tick.Bid,\n        StopLoss:   &amp;sl,\n        TakeProfit: &amp;tp,\n        Slippage:   &amp;slippage,\n        Comment:    &amp;comment,\n    })\n    if err != nil {\n        return 0, fmt.Errorf(\"failed to place sell order: %w\", err)\n    }\n\n    return data.Order, nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#3-place-buy-limit-order","title":"3) Place buy limit order","text":"<pre><code>func PlaceBuyLimit(account *mt5.MT5Account, symbol string, volume, price, sl, tp float64) (uint64, error) {\n    ctx := context.Background()\n\n    expertId := uint64(123456)\n    comment := \"Buy limit order\"\n\n    data, err := account.OrderSend(ctx, &amp;pb.OrderSendRequest{\n        Symbol:     symbol,\n        Operation:  pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY_LIMIT,\n        Volume:     volume,\n        Price:      &amp;price,\n        StopLoss:   &amp;sl,\n        TakeProfit: &amp;tp,\n        ExpertId:   &amp;expertId,\n        Comment:    &amp;comment,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    fmt.Printf(\"Buy limit placed at %.5f, ticket: %d\\n\", price, data.Order)\n    return data.Order, nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#4-place-sell-stop-order","title":"4) Place sell stop order","text":"<pre><code>func PlaceSellStop(account *mt5.MT5Account, symbol string, volume, stopPrice float64) (uint64, error) {\n    ctx := context.Background()\n\n    sl := stopPrice + 0.0050\n    tp := stopPrice - 0.0100\n    comment := \"Sell stop order\"\n\n    data, err := account.OrderSend(ctx, &amp;pb.OrderSendRequest{\n        Symbol:     symbol,\n        Operation:  pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_SELL_STOP,\n        Volume:     volume,\n        Price:      &amp;stopPrice,\n        StopLoss:   &amp;sl,\n        TakeProfit: &amp;tp,\n        Comment:    &amp;comment,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    return data.Order, nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#5-order-with-validation","title":"5) Order with validation","text":"<pre><code>func PlaceMarketOrder(account *mt5.MT5Account, symbol string, volume float64, isBuy bool) (uint64, error) {\n    ctx := context.Background()\n\n    // Get current price\n    tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: symbol})\n    if err != nil {\n        return 0, err\n    }\n\n    var operation pb.TMT5_ENUM_ORDER_TYPE\n    var price, sl, tp float64\n\n    if isBuy {\n        operation = pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY\n        price = tick.Ask\n        sl = tick.Ask - 0.0050\n        tp = tick.Ask + 0.0100\n    } else {\n        operation = pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_SELL\n        price = tick.Bid\n        sl = tick.Bid + 0.0050\n        tp = tick.Bid - 0.0100\n    }\n\n    slippage := uint64(20)\n\n    // Send order\n    data, err := account.OrderSend(ctx, &amp;pb.OrderSendRequest{\n        Symbol:     symbol,\n        Operation:  operation,\n        Volume:     volume,\n        Price:      &amp;price,\n        StopLoss:   &amp;sl,\n        TakeProfit: &amp;tp,\n        Slippage:   &amp;slippage,\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    // Validate trade result using helper from errors.go\n    if !mt5.IsRetCodeSuccess(data.ReturnedCode) {\n        return 0, fmt.Errorf(\"order failed: %s (code: %d)\",\n            mt5.GetRetCodeMessage(data.ReturnedCode),\n            data.ReturnedCode)\n    }\n\n    fmt.Printf(\"Order placed: %d at %.5f\\n\", data.Order, data.Price)\n    return data.Order, nil\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#market-order-with-retry","title":"Market order with retry","text":"<pre><code>func PlaceMarketOrderWithRetry(account *mt5.MT5Account, symbol string, volume float64, isBuy bool, maxRetries int) (uint64, error) {\n    ctx := context.Background()\n\n    slippage := uint64(50)\n\n    for i := 0; i &lt; maxRetries; i++ {\n        tick, err := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: symbol})\n        if err != nil {\n            continue\n        }\n\n        var operation pb.TMT5_ENUM_ORDER_TYPE\n        var price float64\n\n        if isBuy {\n            operation = pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY\n            price = tick.Ask\n        } else {\n            operation = pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_SELL\n            price = tick.Bid\n        }\n\n        data, err := account.OrderSend(ctx, &amp;pb.OrderSendRequest{\n            Symbol:    symbol,\n            Operation: operation,\n            Volume:    volume,\n            Price:     &amp;price,\n            Slippage:  &amp;slippage,\n        })\n\n        if err == nil &amp;&amp; mt5.IsRetCodeSuccess(data.ReturnedCode) {\n            return data.Order, nil\n        }\n\n        time.Sleep(500 * time.Millisecond)\n    }\n\n    return 0, fmt.Errorf(\"failed after %d retries\", maxRetries)\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/OrderSend/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OrderCheck - Validate order before sending</li> <li>OrderModify - Modify existing orders</li> <li>OrderClose - Close positions</li> <li>SymbolInfoTick - Get current prices</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/Trading_Operations.Overview/","title":"MT5Account \u00b7 Trading Operations - Overview","text":"<p>Order execution, position management, margin calculations, trade validation. Use this page to choose the right API for trading operations.</p>"},{"location":"MT5Account/4.%20Trading_Operations/Trading_Operations.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":""},{"location":"MT5Account/4.%20Trading_Operations/Trading_Operations.Overview/#order-execution-management","title":"Order Execution &amp; Management","text":"<ul> <li>OrderSend - place market or pending orders.</li> <li>OrderModify - modify SL/TP or order parameters.</li> <li>OrderClose - close positions (full or partial).</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/Trading_Operations.Overview/#pre-trade-calculations","title":"Pre-Trade Calculations","text":"<ul> <li>OrderCalcMargin - calculate margin required for trade.</li> <li>OrderCalcProfit - calculate potential profit for price movement.</li> <li>OrderCheck - validate trade request before execution.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/Trading_Operations.Overview/#step-by-step-tutorials","title":"\ud83d\udcda Step-by-step tutorials","text":"<p>Want detailed explanations with line-by-line code breakdown? Check these guides:</p> <ul> <li>OrderSend - How it works</li> <li>OrderModify - How it works</li> <li>OrderClose - How it works</li> <li>OrderCalcMargin - How it works</li> <li>OrderCalcProfit - How it works</li> <li>OrderCheck - How it works</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/Trading_Operations.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>OrderSend \u2192 place orders (market BUY/SELL, limit, stop orders).</li> <li>OrderModify \u2192 change SL/TP or modify pending order price.</li> <li>OrderClose \u2192 close positions completely or partially.</li> <li>OrderCalcMargin \u2192 calculate margin needed before trading.</li> <li>OrderCalcProfit \u2192 estimate profit for potential trade.</li> <li>OrderCheck \u2192 validate order before sending (dry-run).</li> </ul> <p>Rule of thumb: always use <code>OrderCheck</code> before <code>OrderSend</code>; use <code>OrderCalcMargin</code> to verify sufficient margin; use <code>OrderModify</code> for SL/TP changes.</p>"},{"location":"MT5Account/4.%20Trading_Operations/Trading_Operations.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Key inputs Place market/pending order <code>OrderSend</code> OrderSendResult Symbol, type, volume, price, SL, TP Modify SL/TP or order price <code>OrderModify</code> OrderModifyResult Ticket, new SL, new TP, new price Close position (full/partial) <code>OrderClose</code> OrderCloseResult Ticket, volume Calculate required margin <code>OrderCalcMargin</code> float64 Symbol, type, volume, price Calculate potential profit <code>OrderCalcProfit</code> float64 Symbol, type, volume, open, close Validate order before execution <code>OrderCheck</code> OrderCheckResult Symbol, type, volume, price, SL, TP"},{"location":"MT5Account/4.%20Trading_Operations/Trading_Operations.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Return codes - Check <code>ReturnedCode</code> field: 10009 = success, others = error.</li> <li>OrderCheck first - ALWAYS call OrderCheck before OrderSend to avoid rejections.</li> <li>Margin calculation - Use OrderCalcMargin to verify sufficient margin before trading.</li> <li>Order types - BUY, SELL (market), BUY_LIMIT, SELL_LIMIT, BUY_STOP, SELL_STOP (pending).</li> <li>Volume - Must be multiple of VOLUME_STEP and between VOLUME_MIN and VOLUME_MAX.</li> <li>SL/TP validation - Must respect STOP_LEVEL (minimum distance from current price).</li> <li>Partial close - OrderClose can close partial volume (e.g., close 0.5 of 1.0 lot position).</li> <li>Comment field in result - Contains detailed error message if order fails.</li> </ul>"},{"location":"MT5Account/4.%20Trading_Operations/Trading_Operations.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Place BUY market order\nresult, err := account.OrderSend(ctx, &amp;pb.OrderSendRequest{\n    Symbol:   \"EURUSD\",\n    Type:     pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Volume:   0.1,\n    StopLoss: 1.08000,\n    TakeProfit: 1.09000,\n})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nif result.ReturnedCode == 10009 {\n    fmt.Printf(\"\u2705 Order placed: #%d\\n\", result.Order)\n} else {\n    fmt.Printf(\"\u274c Order failed: %s (code %d)\\n\", result.Comment, result.ReturnedCode)\n}\n</code></pre> <pre><code>// Validate order before sending\ncheckResult, _ := account.OrderCheck(ctx, &amp;pb.OrderCheckRequest{\n    Symbol:   \"EURUSD\",\n    Type:     pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Volume:   0.1,\n    StopLoss: 1.08000,\n    TakeProfit: 1.09000,\n})\n\nif checkResult.ReturnedCode == 10009 {\n    fmt.Println(\"\u2705 Order validation passed\")\n    // Now safe to send\n    result, _ := account.OrderSend(ctx, &amp;pb.OrderSendRequest{...})\n} else {\n    fmt.Printf(\"\u274c Validation failed: %s\\n\", checkResult.Comment)\n}\n</code></pre> <pre><code>// Calculate margin before trading\nmargin, _ := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n    Symbol:    \"EURUSD\",\n    OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Volume:    1.0,\n    OpenPrice: 1.08500,\n})\n\nfmt.Printf(\"Required margin: $%.2f\\n\", margin)\n\n// Check if we have enough\naccountSummary, _ := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\nfreeMargin := accountSummary.AccountFreeMargin\n\nif margin &lt;= freeMargin {\n    fmt.Println(\"\u2705 Sufficient margin\")\n} else {\n    fmt.Printf(\"\u274c Insufficient margin (need $%.2f, have $%.2f)\\n\", margin, freeMargin)\n}\n</code></pre> <pre><code>// Modify SL/TP of existing position\nresult, _ := account.OrderModify(ctx, &amp;pb.OrderModifyRequest{\n    Ticket:     123456,\n    StopLoss:   1.08200, // New SL\n    TakeProfit: 1.09500, // New TP\n})\n\nif result.ReturnedCode == 10009 {\n    fmt.Println(\"\u2705 SL/TP modified\")\n} else {\n    fmt.Printf(\"\u274c Modification failed: %s\\n\", result.Comment)\n}\n</code></pre> <pre><code>// Close position\nresult, _ := account.OrderClose(ctx, &amp;pb.OrderCloseRequest{\n    Ticket: 123456,\n    Volume: 0.0, // 0 = close full position\n})\n\nif result.ReturnedCode == 10009 {\n    fmt.Printf(\"\u2705 Position closed at %.5f\\n\", result.ClosePrice)\n    fmt.Printf(\"   Profit: $%.2f\\n\", result.Profit)\n} else {\n    fmt.Printf(\"\u274c Close failed: %s\\n\", result.Comment)\n}\n</code></pre> <pre><code>// Calculate potential profit\nprofit, _ := account.OrderCalcProfit(ctx, &amp;pb.OrderCalcProfitRequest{\n    Symbol:     \"EURUSD\",\n    OrderType:  pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Volume:     0.1,\n    OpenPrice:  1.08500,\n    ClosePrice: 1.09000, // +50 pips\n})\n\nfmt.Printf(\"Potential profit for 50 pip move: $%.2f\\n\", profit)\n</code></pre> <pre><code>// Complete professional trading workflow\nsymbol := \"EURUSD\"\nvolume := 0.1\nstopLoss := 1.08000\ntakeProfit := 1.09000\n\n// Step 1: Calculate margin\nmargin, _ := account.OrderCalcMargin(ctx, &amp;pb.OrderCalcMarginRequest{\n    Symbol:    symbol,\n    OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Volume:    volume,\n})\n\n// Step 2: Check free margin\nsummary, _ := account.AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})\nif margin &gt; summary.AccountFreeMargin {\n    log.Fatal(\"Insufficient margin\")\n}\n\n// Step 3: Validate order\ncheckResult, _ := account.OrderCheck(ctx, &amp;pb.OrderCheckRequest{\n    Symbol:     symbol,\n    Type:       pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Volume:     volume,\n    StopLoss:   stopLoss,\n    TakeProfit: takeProfit,\n})\n\nif checkResult.ReturnedCode != 10009 {\n    log.Fatalf(\"Validation failed: %s\", checkResult.Comment)\n}\n\n// Step 4: Send order\nresult, _ := account.OrderSend(ctx, &amp;pb.OrderSendRequest{\n    Symbol:     symbol,\n    Type:       pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Volume:     volume,\n    StopLoss:   stopLoss,\n    TakeProfit: takeProfit,\n})\n\nif result.ReturnedCode == 10009 {\n    fmt.Printf(\"\u2705 Order placed: #%d\\n\", result.Order)\n} else {\n    log.Fatalf(\"Order failed: %s\", result.Comment)\n}\n</code></pre>"},{"location":"MT5Account/4.%20Trading_Operations/Trading_Operations.Overview/#see-also","title":"See also","text":"<ul> <li>Account info: AccountSummary - check margin before trading</li> <li>Position info: OpenedOrders - get current positions</li> <li>Symbol info: SymbolInfoTick - get current prices</li> <li>Real-time updates: OnTrade - monitor trade events</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/","title":"\u2705 MarketBookAdd","text":"<p>Request: Subscribe to Depth of Market (DOM / Level II) data for a symbol.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.MarketBookAdd(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>MarketBookAdd</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>MarketBookAdd(MarketBookAddRequest) \u2192 MarketBookAddReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.MarketBookAdd(ctx, request, opts...)</code></li> </ul> <pre><code>// MarketBookAdd subscribes to Depth of Market (DOM) updates for a symbol.\n//\n// Use this method to start receiving Level 2 market data with bid/ask prices\n// and volumes at different price levels.\n//\n// Parameters:\n//   - ctx: Context for timeout and cancellation control\n//   - req: MarketBookAddRequest with Symbol name\n//\n// Returns MarketBookAddData with subscription status.\nfunc (a *MT5Account) MarketBookAdd(\n    ctx context.Context,\n    req *pb.MarketBookAddRequest,\n) (*pb.MarketBookAddData, error)\n</code></pre> <p>Request message: <code>MarketBookAddRequest</code></p> <p>Reply message: <code>MarketBookAddReply { oneof response { MarketBookAddData data = 1; Error error = 2; } }</code></p>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.MarketBookAddRequest</code> Request with Symbol name <p>MarketBookAddRequest fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Trading instrument name (e.g., \"EURUSD\")"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#output-marketbookadddata","title":"\u2b06\ufe0f Output \u2014 <code>MarketBookAddData</code>","text":"Field Type Description <code>Success</code> <code>bool</code> <code>true</code> if subscription successful, <code>false</code> otherwise"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Subscribes to Level II market data (order book depth) for a specific symbol.</li> <li>Why you need it. Access detailed market depth showing buy/sell orders at various price levels for advanced trading analysis.</li> <li>Pre-requisite. Must call this before using <code>MarketBookGet</code> to retrieve order book snapshots.</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Enable Level II market data for a symbol</li> <li>Prepare for order book analysis and scalping strategies</li> <li>Monitor market liquidity at different price levels</li> <li>Analyze support/resistance levels based on order volume</li> <li>Implement market microstructure analysis</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 MarketBookAdd - How it works</p>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>5s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Broker support: Not all brokers provide Level II data. Check with your broker first.</li> <li>Resource cleanup: Always call <code>MarketBookRelease</code> when done to free server resources.</li> <li>Subscription persists: Subscription remains active until <code>MarketBookRelease</code> is called or connection is closed.</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#1-basic-subscription","title":"1) Basic subscription","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account := mt5.NewMT5Account(\"user\", \"password\", \"server:443\")\n\n    err := account.Connect()\n    if err != nil {\n        panic(err)\n    }\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Subscribe to market depth for EURUSD\n    result, err := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n        Symbol: \"EURUSD\",\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    if result.Success {\n        fmt.Println(\"Successfully subscribed to EURUSD market depth\")\n    } else {\n        fmt.Println(\"Failed to subscribe to market depth\")\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#2-subscribe-and-retrieve-market-book","title":"2) Subscribe and retrieve market book","text":"<pre><code>func SubscribeAndGetMarketBook(account *mt5.MT5Account, symbol string) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // First, subscribe\n    subResult, err := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        fmt.Printf(\"Subscription error: %v\\n\", err)\n        return\n    }\n\n    if !subResult.Success {\n        fmt.Println(\"Subscription failed\")\n        return\n    }\n\n    fmt.Printf(\"Subscribed to %s market depth\\n\", symbol)\n\n    // Now retrieve the order book\n    bookData, err := account.MarketBookGet(ctx, &amp;pb.MarketBookGetRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        fmt.Printf(\"MarketBookGet error: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"Order book has %d levels\\n\", len(bookData.Book))\n    for i, entry := range bookData.Book {\n        bookType := \"SELL\"\n        if entry.Type == pb.BookType_BOOK_TYPE_BUY {\n            bookType = \"BUY\"\n        }\n        fmt.Printf(\"  Level %d: %s @ %.5f (Volume: %.2f)\\n\",\n            i+1, bookType, entry.Price, entry.VolumeDouble)\n    }\n\n    // Clean up\n    account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n        Symbol: symbol,\n    })\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#3-subscribe-to-multiple-symbols","title":"3) Subscribe to multiple symbols","text":"<pre><code>func SubscribeToMultipleSymbols(account *mt5.MT5Account, symbols []string) {\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    successCount := 0\n\n    for _, symbol := range symbols {\n        result, err := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n            Symbol: symbol,\n        })\n        if err != nil {\n            fmt.Printf(\"%s: Error - %v\\n\", symbol, err)\n            continue\n        }\n\n        if result.Success {\n            fmt.Printf(\"%s: Subscribed\\n\", symbol)\n            successCount++\n        } else {\n            fmt.Printf(\"%s: Failed\\n\", symbol)\n        }\n    }\n\n    fmt.Printf(\"\\nSuccessfully subscribed to %d out of %d symbols\\n\",\n        successCount, len(symbols))\n}\n\n// Usage:\n// SubscribeToMultipleSymbols(account, []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"})\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#4-subscription-with-error-handling","title":"4) Subscription with error handling","text":"<pre><code>func SafeMarketBookSubscribe(account *mt5.MT5Account, symbol string) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    result, err := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n        Symbol: symbol,\n    })\n\n    if err != nil {\n        if ctx.Err() == context.DeadlineExceeded {\n            return fmt.Errorf(\"subscription timeout for %s\", symbol)\n        }\n        return fmt.Errorf(\"subscription failed: %w\", err)\n    }\n\n    if !result.Success {\n        return fmt.Errorf(\"broker rejected subscription for %s (may not support Level II data)\", symbol)\n    }\n\n    fmt.Printf(\"Successfully subscribed to %s market depth\\n\", symbol)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#5-subscribe-with-automatic-cleanup","title":"5) Subscribe with automatic cleanup","text":"<pre><code>func WithMarketBookSubscription(account *mt5.MT5Account, symbol string, fn func() error) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Subscribe\n    result, err := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return fmt.Errorf(\"subscription failed: %w\", err)\n    }\n\n    if !result.Success {\n        return fmt.Errorf(\"subscription rejected for %s\", symbol)\n    }\n\n    fmt.Printf(\"Subscribed to %s\\n\", symbol)\n\n    // Ensure cleanup\n    defer func() {\n        ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n        defer cancel()\n\n        account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n            Symbol: symbol,\n        })\n        fmt.Printf(\"Unsubscribed from %s\\n\", symbol)\n    }()\n\n    // Execute user function\n    return fn()\n}\n\n// Usage:\n// err := WithMarketBookSubscription(account, \"EURUSD\", func() error {\n//     // Your market book analysis code here\n//     return nil\n// })\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#6-check-subscription-status","title":"6) Check subscription status","text":"<pre><code>func CheckMarketBookSupport(account *mt5.MT5Account, symbol string) bool {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Try to subscribe\n    result, err := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n        Symbol: symbol,\n    })\n\n    if err != nil {\n        fmt.Printf(\"%s: Error checking support - %v\\n\", symbol, err)\n        return false\n    }\n\n    if !result.Success {\n        fmt.Printf(\"%s: Level II data not supported by broker\\n\", symbol)\n        return false\n    }\n\n    fmt.Printf(\"%s: Level II data available\\n\", symbol)\n\n    // Clean up immediately\n    account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n        Symbol: symbol,\n    })\n\n    return true\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#subscribe-and-monitor","title":"Subscribe and monitor","text":"<pre><code>func MonitorMarketDepth(account *mt5.MT5Account, symbol string, duration time.Duration) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Subscribe\n    result, _ := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n        Symbol: symbol,\n    })\n\n    if !result.Success {\n        fmt.Println(\"Subscription failed\")\n        return\n    }\n\n    defer func() {\n        ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n        defer cancel()\n        account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n            Symbol: symbol,\n        })\n    }()\n\n    // Monitor for specified duration\n    ticker := time.NewTicker(1 * time.Second)\n    defer ticker.Stop()\n\n    timeout := time.After(duration)\n\n    for {\n        select {\n        case &lt;-ticker.C:\n            ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n            bookData, err := account.MarketBookGet(ctx, &amp;pb.MarketBookGetRequest{\n                Symbol: symbol,\n            })\n            cancel()\n\n            if err == nil &amp;&amp; len(bookData.Book) &gt; 0 {\n                fmt.Printf(\"[%s] Best bid: %.5f, Best ask: %.5f\\n\",\n                    time.Now().Format(\"15:04:05\"),\n                    bookData.Book[0].Price,\n                    bookData.Book[len(bookData.Book)-1].Price)\n            }\n\n        case &lt;-timeout:\n            return\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookAdd/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>MarketBookRelease - Unsubscribe from market depth updates</li> <li>MarketBookGet - Retrieve current market depth snapshot</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/","title":"\u2705 Get Current Market Depth Snapshot","text":"<p>Request: retrieve current Depth of Market (DOM) snapshot with price levels, volumes, and order types at each level.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.MarketBookGet(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>MarketBookGet</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>MarketBookGet(MarketBookGetRequest) \u2192 MarketBookGetReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.MarketBookGet(ctx, request, opts...)</code></li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// MarketBookGet retrieves current market depth snapshot for a symbol.\n// Must be subscribed via MarketBookAdd first.\nfunc (a *MT5Account) MarketBookGet(\n    ctx context.Context,\n    req *pb.MarketBookGetRequest,\n) (*pb.MarketBookGetData, error)\n</code></pre> <p>Request message:</p> <pre><code>MarketBookGetRequest {\n  string Symbol = 1;  // Symbol name\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.MarketBookGetRequest</code> Request with Symbol name"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#output-marketbookgetdata","title":"\u2b06\ufe0f Output \u2014 <code>MarketBookGetData</code>","text":"Field Type Go Type Description <code>Book</code> <code>BookStruct[]</code> <code>[]*pb.BookStruct</code> Array of order book entries <p>BookStruct contains:</p> Field Type Description <code>Type</code> <code>BookType</code> Order type (see enum below) <code>Price</code> <code>double</code> Price level <code>Volume</code> <code>int64</code> Volume at this level (deprecated) <code>VolumeDouble</code> <code>double</code> Volume at this level with extended precision <p>\ud83d\udca1 Enum Usage Note: The tables show simplified constant names for readability. In Go code, use full names with the enum type prefix.</p> <p>Format: <code>pb.&lt;ENUM_TYPE&gt;_&lt;CONSTANT_NAME&gt;</code></p> <p>Example: <code>pb.BookType_BOOK_TYPE_SELL</code></p>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#enum-booktype","title":"\ud83d\udcd8 Enum: BookType","text":"Value Constant Description 0 <code>BOOK_TYPE_SELL</code> Sell order (Offer) 1 <code>BOOK_TYPE_BUY</code> Buy order (Bid) 2 <code>BOOK_TYPE_SELL_MARKET</code> Sell order by Market 3 <code>BOOK_TYPE_BUY_MARKET</code> Buy order by Market"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieves current order book state with bid/ask levels.</li> <li>Why you need it. Analyze market depth, liquidity, order flow.</li> <li>Requires subscription. Must call MarketBookAdd before using this method.</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Retrieve current market depth snapshot</li> <li>Analyze order book liquidity</li> <li>Monitor bid/ask levels and volumes</li> <li>Implement scalping strategies</li> <li>Detect large orders and market makers</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 MarketBookGet - How it works</p>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>5s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Subscription required: Must call <code>MarketBookAdd</code> first before using this method.</li> <li>Real-time data: Book data updates in real-time after subscription.</li> <li>Broker-dependent: Number of levels varies by broker (typically 5-10 per side).</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#1-get-market-book","title":"1) Get market book","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx := context.Background()\n\n    // Subscribe first\n    account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{Symbol: \"EURUSD\"})\n    defer account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{Symbol: \"EURUSD\"})\n\n    // Get market book\n    data, err := account.MarketBookGet(ctx, &amp;pb.MarketBookGetRequest{\n        Symbol: \"EURUSD\",\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Market depth for EURUSD: %d levels\\n\", len(data.Book))\n\n    for i, entry := range data.Book {\n        typeStr := \"SELL\"\n        if entry.Type == pb.BookType_BOOK_TYPE_BUY {\n            typeStr = \"BUY\"\n        }\n        fmt.Printf(\"  [%d] %s: Price=%.5f, Volume=%.2f\\n\",\n            i, typeStr, entry.Price, entry.VolumeDouble)\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#2-analyze-bidask-levels","title":"2) Analyze bid/ask levels","text":"<pre><code>func AnalyzeOrderBook(account *mt5.MT5Account, symbol string) {\n    ctx := context.Background()\n\n    // Subscribe\n    account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{Symbol: symbol})\n    defer account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{Symbol: symbol})\n\n    // Get book\n    data, err := account.MarketBookGet(ctx, &amp;pb.MarketBookGetRequest{Symbol: symbol})\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    var buyVolume, sellVolume float64\n    buyLevels := 0\n    sellLevels := 0\n\n    for _, entry := range data.Book {\n        if entry.Type == pb.BookType_BOOK_TYPE_BUY { // BUY\n            buyVolume += entry.VolumeDouble\n            buyLevels++\n        } else { // SELL\n            sellVolume += entry.VolumeDouble\n            sellLevels++\n        }\n    }\n\n    fmt.Printf(\"%s Order Book Analysis:\\n\", symbol)\n    fmt.Printf(\"  Buy levels: %d, Volume: %.2f\\n\", buyLevels, buyVolume)\n    fmt.Printf(\"  Sell levels: %d, Volume: %.2f\\n\", sellLevels, sellVolume)\n    fmt.Printf(\"  Buy/Sell ratio: %.2f\\n\", buyVolume/sellVolume)\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#3-find-best-bidask","title":"3) Find best bid/ask","text":"<pre><code>func GetBestBidAsk(account *mt5.MT5Account, symbol string) (bestBid, bestAsk float64, err error) {\n    ctx := context.Background()\n\n    account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{Symbol: symbol})\n    defer account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{Symbol: symbol})\n\n    data, err := account.MarketBookGet(ctx, &amp;pb.MarketBookGetRequest{Symbol: symbol})\n    if err != nil {\n        return 0, 0, err\n    }\n\n    for _, entry := range data.Book {\n        if entry.Type == pb.BookType_BOOK_TYPE_BUY { // BUY (bid)\n            if bestBid == 0 || entry.Price &gt; bestBid {\n                bestBid = entry.Price\n            }\n        } else { // SELL (ask)\n            if bestAsk == 0 || entry.Price &lt; bestAsk {\n                bestAsk = entry.Price\n            }\n        }\n    }\n\n    fmt.Printf(\"Best Bid: %.5f, Best Ask: %.5f, Spread: %.5f\\n\",\n        bestBid, bestAsk, bestAsk-bestBid)\n\n    return bestBid, bestAsk, nil\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookGet/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>MarketBookAdd - Subscribe to DOM (required first)</li> <li>MarketBookRelease - Release DOM subscription</li> <li>SymbolInfoTick - Get Level 1 quotes</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/","title":"\u2705 MarketBookRelease","text":"<p>Request: Unsubscribe from Depth of Market (DOM / Level II) data and free server resources.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.MarketBookRelease(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>MarketBookRelease</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>MarketBookRelease(MarketBookReleaseRequest) \u2192 MarketBookReleaseReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.MarketBookRelease(ctx, request, opts...)</code></li> </ul> <pre><code>// MarketBookRelease unsubscribes from Depth of Market (DOM) updates.\n//\n// Use this method to stop receiving Level 2 market data and free resources.\n//\n// Parameters:\n//   - ctx: Context for timeout and cancellation control\n//   - req: MarketBookReleaseRequest with Symbol name\n//\n// Returns MarketBookReleaseData with unsubscription status.\nfunc (a *MT5Account) MarketBookRelease(\n    ctx context.Context,\n    req *pb.MarketBookReleaseRequest,\n) (*pb.MarketBookReleaseData, error)\n</code></pre> <p>Request message: <code>MarketBookReleaseRequest</code></p> <p>Reply message: <code>MarketBookReleaseReply { oneof response { MarketBookReleaseData data = 1; Error error = 2; } }</code></p>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.MarketBookReleaseRequest</code> Request with Symbol name <p>MarketBookReleaseRequest fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Trading instrument name (e.g., \"EURUSD\")"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#output-marketbookreleasedata","title":"\u2b06\ufe0f Output \u2014 <code>MarketBookReleaseData</code>","text":"Field Type Description <code>Success</code> <code>bool</code> <code>true</code> if unsubscribed successfully, <code>false</code> otherwise"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Cancels subscription to Level II market data for a symbol.</li> <li>Why you need it. Free server resources and reduce network traffic when market depth data is no longer needed.</li> <li>Clean up. Always call this after <code>MarketBookAdd</code> to prevent resource leaks.</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Stop receiving market depth updates</li> <li>Free server and client resources</li> <li>Clean up after market depth analysis</li> <li>Implement proper resource management</li> <li>Reduce unnecessary network traffic</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 MarketBookRelease - How it works</p>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>5s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Always cleanup: Call this in <code>defer</code> after successful <code>MarketBookAdd</code> to ensure cleanup.</li> <li>No error on double release: Calling this multiple times for same symbol is safe (no-op).</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#1-basic-unsubscribe","title":"1) Basic unsubscribe","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account := mt5.NewMT5Account(\"user\", \"password\", \"server:443\")\n\n    err := account.Connect()\n    if err != nil {\n        panic(err)\n    }\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Unsubscribe from market depth\n    result, err := account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n        Symbol: \"EURUSD\",\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    if result.Success {\n        fmt.Println(\"Successfully unsubscribed from EURUSD market depth\")\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#2-subscribe-with-defer-cleanup","title":"2) Subscribe with defer cleanup","text":"<pre><code>func AnalyzeMarketDepth(account *mt5.MT5Account, symbol string) error {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    // Subscribe\n    subResult, err := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return err\n    }\n\n    if !subResult.Success {\n        return fmt.Errorf(\"subscription failed\")\n    }\n\n    // Ensure cleanup with defer\n    defer func() {\n        ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n        defer cancel()\n\n        result, err := account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n            Symbol: symbol,\n        })\n        if err != nil {\n            fmt.Printf(\"Warning: cleanup error - %v\\n\", err)\n        } else if result.Success {\n            fmt.Printf(\"Cleaned up %s subscription\\n\", symbol)\n        }\n    }()\n\n    // Your market depth analysis here\n    bookData, err := account.MarketBookGet(ctx, &amp;pb.MarketBookGetRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return err\n    }\n\n    fmt.Printf(\"Analyzed %d order book levels\\n\", len(bookData.Book))\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#3-release-multiple-symbols","title":"3) Release multiple symbols","text":"<pre><code>func ReleaseMultipleSymbols(account *mt5.MT5Account, symbols []string) {\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    for _, symbol := range symbols {\n        result, err := account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n            Symbol: symbol,\n        })\n        if err != nil {\n            fmt.Printf(\"%s: Error - %v\\n\", symbol, err)\n            continue\n        }\n\n        if result.Success {\n            fmt.Printf(\"%s: Unsubscribed\\n\", symbol)\n        } else {\n            fmt.Printf(\"%s: Not subscribed\\n\", symbol)\n        }\n    }\n}\n\n// Usage:\n// ReleaseMultipleSymbols(account, []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"})\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#4-safe-cleanup-pattern","title":"4) Safe cleanup pattern","text":"<pre><code>func SafeMarketBookCleanup(account *mt5.MT5Account, symbol string) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    result, err := account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n        Symbol: symbol,\n    })\n\n    if err != nil {\n        if ctx.Err() == context.DeadlineExceeded {\n            fmt.Printf(\"%s: Cleanup timeout (may already be released)\\n\", symbol)\n        } else {\n            fmt.Printf(\"%s: Cleanup error - %v\\n\", symbol, err)\n        }\n        return\n    }\n\n    if result.Success {\n        fmt.Printf(\"%s: Successfully released\\n\", symbol)\n    } else {\n        fmt.Printf(\"%s: Was not subscribed\\n\", symbol)\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#resource-management-wrapper","title":"Resource management wrapper","text":"<pre><code>type MarketBookSession struct {\n    account *mt5.MT5Account\n    symbol  string\n    active  bool\n}\n\nfunc NewMarketBookSession(account *mt5.MT5Account, symbol string) (*MarketBookSession, error) {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    result, err := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n        Symbol: symbol,\n    })\n    if err != nil {\n        return nil, err\n    }\n\n    if !result.Success {\n        return nil, fmt.Errorf(\"subscription failed for %s\", symbol)\n    }\n\n    return &amp;MarketBookSession{\n        account: account,\n        symbol:  symbol,\n        active:  true,\n    }, nil\n}\n\nfunc (s *MarketBookSession) Close() error {\n    if !s.active {\n        return nil\n    }\n\n    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n    defer cancel()\n\n    result, err := s.account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n        Symbol: s.symbol,\n    })\n    if err != nil {\n        return err\n    }\n\n    s.active = false\n\n    if !result.Success {\n        return fmt.Errorf(\"unsubscribe failed\")\n    }\n\n    return nil\n}\n\n// Usage:\n// session, err := NewMarketBookSession(account, \"EURUSD\")\n// if err != nil {\n//     panic(err)\n// }\n// defer session.Close()\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/MarketBookRelease/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>MarketBookAdd - Subscribe to market depth updates</li> <li>MarketBookGet - Retrieve current market depth snapshot</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/Market_Depth.Overview/","title":"MT5Account \u00b7 Market Depth (DOM) - Overview","text":"<p>Level II quotes, order book data, market depth subscription. Use this page to choose the right API for DOM operations.</p>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/Market_Depth.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":"<ul> <li>MarketBookAdd - subscribe to Market Depth for symbol.</li> <li>MarketBookGet - get current order book data.</li> <li>MarketBookRelease - unsubscribe from Market Depth.</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/Market_Depth.Overview/#step-by-step-tutorials","title":"\ud83d\udcda Step-by-step tutorials","text":"<p>Want detailed explanations with line-by-line code breakdown? Check these guides:</p> <ul> <li>MarketBookAdd - How it works</li> <li>MarketBookGet - How it works</li> <li>MarketBookRelease - How it works</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/Market_Depth.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>MarketBookAdd \u2192 subscribe to Level II quotes (order book).</li> <li>MarketBookGet \u2192 get current DOM data (bid/ask orders at different price levels).</li> <li>MarketBookRelease \u2192 unsubscribe when done.</li> </ul> <p>Rule of thumb: call <code>MarketBookAdd</code> first to subscribe, then <code>MarketBookGet</code> to read data, finally <code>MarketBookRelease</code> to clean up.</p>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/Market_Depth.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Key inputs Subscribe to Market Depth <code>MarketBookAdd</code> <code>*pb.MarketBookAddData</code> Symbol name Get current order book <code>MarketBookGet</code> <code>*pb.MarketBookGetData</code> Symbol name Unsubscribe from Market Depth <code>MarketBookRelease</code> <code>*pb.MarketBookReleaseData</code> Symbol name"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/Market_Depth.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Subscription required - Must call MarketBookAdd before MarketBookGet.</li> <li>Not all brokers support DOM - Check if your broker provides Level II data.</li> <li>BookStruct - Contains Type (BUY/SELL), Price, Volume, VolumeDouble.</li> <li>Order book depth - Broker-dependent, usually 5-10 levels per side.</li> <li>Real-time updates - DOM updates in real-time after subscription.</li> <li>Clean up - Always call MarketBookRelease when done to free resources.</li> <li>Symbol must be in Market Watch - Use SymbolSelect to add symbol first.</li> </ul>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/Market_Depth.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Subscribe to Market Depth\nresult, err := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n    Symbol: \"EURUSD\",\n})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nif result.Success {\n    fmt.Println(\"\u2705 Subscribed to EURUSD DOM\")\n} else {\n    fmt.Println(\"\u274c DOM subscription failed (broker may not support it)\")\n}\n</code></pre> <pre><code>// Get current order book\nbook, err := account.MarketBookGet(ctx, &amp;pb.MarketBookGetRequest{\n    Symbol: \"EURUSD\",\n})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Println(\"EURUSD Order Book:\")\nfmt.Println(\"BUY SIDE:\")\nfor _, item := range book.Book {\n    if item.Type == pb.BookType_BOOK_TYPE_BUY {\n        fmt.Printf(\"  %.5f: %.2f lots\\n\", item.Price, item.VolumeDouble)\n    }\n}\n\nfmt.Println(\"\\nSELL SIDE:\")\nfor _, item := range book.Book {\n    if item.Type == pb.BookType_BOOK_TYPE_SELL {\n        fmt.Printf(\"  %.5f: %.2f lots\\n\", item.Price, item.VolumeDouble)\n    }\n}\n</code></pre> <pre><code>// Unsubscribe from Market Depth\nresult, _ := account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n    Symbol: \"EURUSD\",\n})\n\nif result.Success {\n    fmt.Println(\"\u2705 Unsubscribed from EURUSD DOM\")\n}\n</code></pre> <pre><code>// Complete DOM workflow\nsymbol := \"EURUSD\"\n\n// Step 1: Subscribe\nif result, _ := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{\n    Symbol: symbol,\n}); !result.Success {\n    log.Fatal(\"Failed to subscribe to DOM\")\n}\n\ndefer func() {\n    // Step 3: Unsubscribe (cleanup)\n    account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{\n        Symbol: symbol,\n    })\n}()\n\n// Step 2: Get DOM data\nbook, _ := account.MarketBookGet(ctx, &amp;pb.MarketBookGetRequest{\n    Symbol: symbol,\n})\n\n// Analyze order book\ntotalBuyVolume := 0.0\ntotalSellVolume := 0.0\n\nfor _, item := range book.Book {\n    if item.Type == pb.BookType_BOOK_TYPE_BUY {\n        totalBuyVolume += item.VolumeDouble\n    } else {\n        totalSellVolume += item.VolumeDouble\n    }\n}\n\nfmt.Printf(\"Buy volume: %.2f\\n\", totalBuyVolume)\nfmt.Printf(\"Sell volume: %.2f\\n\", totalSellVolume)\n\nif totalBuyVolume &gt; totalSellVolume {\n    fmt.Println(\"\ud83d\udcc8 More buy orders - bullish pressure\")\n} else {\n    fmt.Println(\"\ud83d\udcc9 More sell orders - bearish pressure\")\n}\n</code></pre> <pre><code>// Monitor DOM changes\nsymbol := \"EURUSD\"\n\n// Subscribe\naccount.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{Symbol: symbol})\ndefer account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{Symbol: symbol})\n\n// Poll every second\nticker := time.NewTicker(1 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    book, _ := account.MarketBookGet(ctx, &amp;pb.MarketBookGetRequest{\n        Symbol: symbol,\n    })\n\n    if len(book.Book) &gt; 0 {\n        // Get best bid and ask from DOM\n        bestBid := 0.0\n        bestAsk := 999999.0\n\n        for _, item := range book.Book {\n            if item.Type == pb.BookType_BOOK_TYPE_BUY &amp;&amp; item.Price &gt; bestBid {\n                bestBid = item.Price\n            }\n            if item.Type == pb.BookType_BOOK_TYPE_SELL &amp;&amp; item.Price &lt; bestAsk {\n                bestAsk = item.Price\n            }\n        }\n\n        spread := (bestAsk - bestBid) / 0.00001 // Points\n        fmt.Printf(\"Best Bid: %.5f, Best Ask: %.5f, Spread: %.0f points\\n\",\n            bestBid, bestAsk, spread)\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Market_Depth%28DOM%29/Market_Depth.Overview/#see-also","title":"\ud83d\udcda See also","text":"<ul> <li>Symbol management: SymbolSelect - add symbol to Market Watch</li> <li>Current prices: SymbolInfoTick - get bid/ask quotes</li> <li>Trading: OrderSend - place orders based on DOM analysis</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/Additional_Methods.Overview/","title":"MT5Account \u00b7 Additional Methods - Overview","text":"<p>Advanced symbol information, trading sessions, margin rates, batch operations. Use this page to choose the right API for advanced queries.</p>"},{"location":"MT5Account/6.%20Additional_Methods/Additional_Methods.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":""},{"location":"MT5Account/6.%20Additional_Methods/Additional_Methods.Overview/#advanced-symbol-information","title":"Advanced Symbol Information","text":"<ul> <li>SymbolInfoMarginRate - margin rates for symbol and order type.</li> <li>SymbolInfoSessionQuote - quote session times.</li> <li>SymbolInfoSessionTrade - trade session times.</li> <li>SymbolParamsMany - detailed parameters for multiple symbols (112 fields!).</li> <li>TickValueWithSize - tick value and size information for symbols.</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/Additional_Methods.Overview/#step-by-step-tutorials","title":"\ud83d\udcda Step-by-step tutorials","text":"<p>Want detailed explanations with line-by-line code breakdown? Check these guides:</p> <ul> <li>SymbolInfoMarginRate - How it works</li> <li>SymbolInfoSessionQuote - How it works</li> <li>SymbolInfoSessionTrade - How it works</li> <li>SymbolParamsMany - How it works</li> <li>TickValueWithSize - How it works</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/Additional_Methods.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>SymbolInfoMarginRate \u2192 get margin multiplier for different order types.</li> <li>SymbolInfoSessionQuote \u2192 get quote session times (when quotes are available).</li> <li>SymbolInfoSessionTrade \u2192 get trading session times (when trading is allowed).</li> <li>SymbolParamsMany \u2192 get complete symbol specifications for multiple symbols in one call (most efficient).</li> <li>TickValueWithSize \u2192 get tick value and contract size for position value and P&amp;L calculations.</li> </ul> <p>Rule of thumb: need session times \u2192 use Session methods; need complete symbol data \u2192 use <code>SymbolParamsMany</code>; need margin rates \u2192 use <code>SymbolInfoMarginRate</code>; need tick value/P&amp;L data \u2192 use <code>TickValueWithSize</code>.</p>"},{"location":"MT5Account/6.%20Additional_Methods/Additional_Methods.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Key inputs Margin rates for order type <code>SymbolInfoMarginRate</code> MarginRates Symbol, order type Quote session times <code>SymbolInfoSessionQuote</code> SessionInfo Symbol, day of week, session index Trading session times <code>SymbolInfoSessionTrade</code> SessionInfo Symbol, day of week, session index Complete specs for multiple symbols <code>SymbolParamsMany</code> Array of SymbolParams Symbol list, optional filters Tick value and size for P&amp;L calculations <code>TickValueWithSize</code> TickSizeSymbol array Symbol names array"},{"location":"MT5Account/6.%20Additional_Methods/Additional_Methods.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>SymbolParamsMany - THE MOST EFFICIENT way to get complete symbol data (112 fields per symbol).</li> <li>Session times - In seconds from day start (0-86400).</li> <li>Day of week - SUNDAY=0, MONDAY=1, ..., SATURDAY=6.</li> <li>Session index - Most symbols have 1 session, some have multiple (e.g., 24h = 1 session, day+night = 2 sessions).</li> <li>Margin rates - Different rates for BUY/SELL, LONG/SHORT positions.</li> <li>SymbolParamsMany filters - Can filter by Bid, Ask, Point, Volume to reduce data size.</li> <li>Batch operations - SymbolParamsMany can query 100+ symbols in one call.</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/Additional_Methods.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Get margin rates for symbol\nrates, err := account.SymbolInfoMarginRate(ctx, &amp;pb.SymbolInfoMarginRateRequest{\n    Symbol:    \"EURUSD\",\n    OrderType: pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfmt.Printf(\"EURUSD BUY margin rates:\\n\")\nfmt.Printf(\"  Initial: %.2f\\n\", rates.InitialMarginRate)\nfmt.Printf(\"  Maintenance: %.2f\\n\", rates.MaintenanceMarginRate)\n</code></pre> <pre><code>// Get trading session times for Monday\nsessionInfo, _ := account.SymbolInfoSessionTrade(ctx, &amp;pb.SymbolInfoSessionTradeRequest{\n    Symbol:       \"EURUSD\",\n    DayOfWeek:    1, // Monday\n    SessionIndex: 0,\n})\n\nfromTime := sessionInfo.From.AsTime()\ntoTime := sessionInfo.To.AsTime()\nfromSeconds := fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second()\ntoSeconds := toTime.Hour()*3600 + toTime.Minute()*60 + toTime.Second()\n\nfmt.Printf(\"EURUSD Monday trading session:\\n\")\nfmt.Printf(\"  From: %d seconds (%.2f hours)\\n\",\n    fromSeconds, float64(fromSeconds)/3600)\nfmt.Printf(\"  To: %d seconds (%.2f hours)\\n\",\n    toSeconds, float64(toSeconds)/3600)\n</code></pre> <pre><code>// Get complete symbol parameters for multiple symbols\nsymbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\n\nparams, err := account.SymbolParamsMany(ctx, &amp;pb.SymbolParamsManyRequest{\n    Symbols: symbols,\n})\nif err != nil {\n    log.Fatalf(\"Failed: %v\", err)\n}\n\nfor _, symbolParam := range params.SymbolParams {\n    fmt.Printf(\"\\n%s:\\n\", symbolParam.Name)\n    fmt.Printf(\"  Bid: %.5f, Ask: %.5f\\n\", symbolParam.Bid, symbolParam.Ask)\n    fmt.Printf(\"  Digits: %d, Point: %.5f\\n\", symbolParam.Digits, symbolParam.Point)\n    fmt.Printf(\"  Volume: %.2f - %.2f (step: %.2f)\\n\",\n        symbolParam.VolumeMin, symbolParam.VolumeMax, symbolParam.VolumeStep)\n    fmt.Printf(\"  Contract size: %.0f\\n\", symbolParam.TradeContractSize)\n    fmt.Printf(\"  Spread: %d points\\n\", symbolParam.Spread)\n}\n</code></pre> <pre><code>// Get all trading sessions for a week\nsymbol := \"EURUSD\"\n\ndays := []int32{1, 2, 3, 4, 5} // Monday through Friday\n\ndayNames := []string{\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"}\n\nfmt.Printf(\"%s Trading Schedule:\\n\", symbol)\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor i, day := range days {\n    session, err := account.SymbolInfoSessionTrade(ctx, &amp;pb.SymbolInfoSessionTradeRequest{\n        Symbol:       symbol,\n        DayOfWeek:    day,\n        SessionIndex: 0,\n    })\n\n    if err != nil {\n        continue\n    }\n\n    fromTime := session.From.AsTime()\n    toTime := session.To.AsTime()\n    fromHours := float64(fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second()) / 3600\n    toHours := float64(toTime.Hour()*3600 + toTime.Minute()*60 + toTime.Second()) / 3600\n\n    fmt.Printf(\"%s: %.2f:00 - %.2f:00\\n\",\n        dayNames[i], fromHours, toHours)\n}\n</code></pre> <pre><code>// Batch query all forex majors with SymbolParamsMany\nmajors := []string{\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"USDCHF\",\n    \"AUDUSD\", \"USDCAD\", \"NZDUSD\",\n}\n\nparams, _ := account.SymbolParamsMany(ctx, &amp;pb.SymbolParamsManyRequest{\n    Symbols: majors,\n})\n\nfmt.Println(\"Forex Majors Summary:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"%-8s  %-10s  %-10s  %-8s\\n\", \"Symbol\", \"Bid\", \"Ask\", \"Spread\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, sp := range params.SymbolParams {\n    fmt.Printf(\"%-8s  %-10.5f  %-10.5f  %-8d\\n\",\n        sp.Name, sp.Bid, sp.Ask, sp.Spread)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/Additional_Methods.Overview/#see-also","title":"See also","text":"<ul> <li>Basic symbol info: SymbolInfoTick - get current prices</li> <li>Symbol properties: SymbolInfoDouble - get single property</li> <li>Trading: OrderCalcMargin - uses margin rates internally</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/","title":"\u2705 Get Symbol Margin Rates by Order Type","text":"<p>Request: get initial and maintenance margin rate coefficients for different order types (Buy, Sell, Limit, Stop) for specified symbol.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolInfoMarginRate(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoMarginRate</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoMarginRate(SymbolInfoMarginRateRequest) \u2192 SymbolInfoMarginRateReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolInfoMarginRate(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Returns margin rate coefficients for different order types.</li> <li>Why you need it. Calculate precise margin requirements, understand leverage.</li> <li>Two types. InitialMarginRate for opening, MaintenanceMarginRate for maintaining positions.</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Calculate margin requirements for different order types</li> <li>Understand leverage impact on positions</li> <li>Compare margin rates between buy and sell orders</li> <li>Validate available margin before placing orders</li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolInfoMarginRate retrieves margin requirements for different order types.\n// Returns InitialMarginRate and MaintenanceMarginRate values.\nfunc (a *MT5Account) SymbolInfoMarginRate(\n    ctx context.Context,\n    req *pb.SymbolInfoMarginRateRequest,\n) (*pb.SymbolInfoMarginRateData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolInfoMarginRateRequest {\n  string Symbol = 1;     // Trading symbol\n  int32 OrderType = 2;   // Order type (BUY, SELL, etc)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolInfoMarginRateRequest</code> Request with Symbol and OrderType <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>OrderType</code> <code>int32</code> Order type (see enum below) <p>OrderType enum values:</p> Value Protobuf Enum Description <code>0</code> <code>pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY</code> Market buy order <code>1</code> <code>pb.ENUM_ORDER_TYPE_ORDER_TYPE_SELL</code> Market sell order <code>2</code> <code>pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY_LIMIT</code> Buy limit pending order <code>3</code> <code>pb.ENUM_ORDER_TYPE_ORDER_TYPE_SELL_LIMIT</code> Sell limit pending order <code>4</code> <code>pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY_STOP</code> Buy stop pending order <code>5</code> <code>pb.ENUM_ORDER_TYPE_ORDER_TYPE_SELL_STOP</code> Sell stop pending order <code>6</code> <code>pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY_STOP_LIMIT</code> Buy stop limit pending order <code>7</code> <code>pb.ENUM_ORDER_TYPE_ORDER_TYPE_SELL_STOP_LIMIT</code> Sell stop limit pending order <code>8</code> <code>pb.ENUM_ORDER_TYPE_ORDER_TYPE_CLOSE_BY</code> Close by opposite position <p>Usage: Can use either numeric value or protobuf enum constant</p>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#output-symbolinfomarginratedata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolInfoMarginRateData</code>","text":"Field Type Go Type Description <code>InitialMarginRate</code> <code>double</code> <code>float64</code> Initial margin coefficient <code>MaintenanceMarginRate</code> <code>double</code> <code>float64</code> Maintenance margin coefficient"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolInfoMarginRate - How it works</p>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Margin rates vary: Different order types have different margin requirements.</li> <li>Initial vs Maintenance: Initial margin is required to open position, maintenance margin is required to keep it open.</li> <li>Broker specific: Margin rates are determined by broker and can vary significantly.</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#1-get-margin-rates-for-buy-order","title":"1) Get margin rates for buy order","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolInfoMarginRate(ctx, &amp;pb.SymbolInfoMarginRateRequest{\n        Symbol:    \"EURUSD\",\n        OrderType: 0, // BUY\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"EURUSD Buy margin rates:\\n\")\n    fmt.Printf(\"  Initial: %.4f\\n\", data.InitialMarginRate)\n    fmt.Printf(\"  Maintenance: %.4f\\n\", data.MaintenanceMarginRate)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#2-compare-rates-for-buy-vs-sell","title":"2) Compare rates for buy vs sell","text":"<pre><code>func CompareMarginRates(account *mt5.MT5Account, symbol string) {\n    ctx := context.Background()\n\n    // Buy rates\n    buyData, _ := account.SymbolInfoMarginRate(ctx, &amp;pb.SymbolInfoMarginRateRequest{\n        Symbol:    symbol,\n        OrderType: 0, // BUY\n    })\n\n    // Sell rates\n    sellData, _ := account.SymbolInfoMarginRate(ctx, &amp;pb.SymbolInfoMarginRateRequest{\n        Symbol:    symbol,\n        OrderType: 1, // SELL\n    })\n\n    fmt.Printf(\"%s Margin Rates:\\n\", symbol)\n    fmt.Printf(\"  Buy:  Initial=%.4f, Maintenance=%.4f\\n\",\n        buyData.InitialMarginRate, buyData.MaintenanceMarginRate)\n    fmt.Printf(\"  Sell: Initial=%.4f, Maintenance=%.4f\\n\",\n        sellData.InitialMarginRate, sellData.MaintenanceMarginRate)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#3-get-rates-for-all-order-types","title":"3) Get rates for all order types","text":"<pre><code>func GetAllMarginRates(account *mt5.MT5Account, symbol string) {\n    ctx := context.Background()\n\n    orderTypes := map[int32]string{\n        0: \"BUY\",\n        1: \"SELL\",\n        2: \"BUY_LIMIT\",\n        3: \"SELL_LIMIT\",\n        4: \"BUY_STOP\",\n        5: \"SELL_STOP\",\n        6: \"BUY_STOP_LIMIT\",\n        7: \"SELL_STOP_LIMIT\",\n        8: \"CLOSE_BY\",\n    }\n\n    fmt.Printf(\"Margin rates for %s:\\n\", symbol)\n    for orderType, name := range orderTypes {\n        data, err := account.SymbolInfoMarginRate(ctx, &amp;pb.SymbolInfoMarginRateRequest{\n            Symbol:    symbol,\n            OrderType: orderType,\n        })\n        if err != nil {\n            continue\n        }\n\n        fmt.Printf(\"  %s: Initial=%.4f, Maintenance=%.4f\\n\",\n            name, data.InitialMarginRate, data.MaintenanceMarginRate)\n    }\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoMarginRate/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OrderCalcMargin - Calculate required margin</li> <li>SymbolInfoDouble - Get symbol properties</li> <li>AccountSummary - Get account leverage</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/","title":"\u2705 Get Symbol Quote Session Times","text":"<p>Request: get start and end times of quote session for symbol on specified day of week.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolInfoSessionQuote(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoSessionQuote</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoSessionQuote(SymbolInfoSessionQuoteRequest) \u2192 SymbolInfoSessionQuoteReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolInfoSessionQuote(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Returns when quotes are available for a symbol on specific days.</li> <li>Why you need it. Check market hours, validate trading times, schedule operations.</li> <li>Time format. Returns seconds from midnight (0 = 00:00, 3600 = 01:00, etc).</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Check when quotes are available for symbols</li> <li>Validate if market is open before requesting prices</li> <li>Schedule quote monitoring operations</li> <li>Build trading session calendars</li> <li>Determine quote availability windows</li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolInfoSessionQuote retrieves quote session times for a symbol.\n// Returns From and To times in seconds from day start.\nfunc (a *MT5Account) SymbolInfoSessionQuote(\n    ctx context.Context,\n    req *pb.SymbolInfoSessionQuoteRequest,\n) (*pb.SymbolInfoSessionQuoteData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolInfoSessionQuoteRequest {\n  string Symbol = 1;       // Trading symbol\n  int32 DayOfWeek = 2;     // Day of week (0=Sunday to 6=Saturday)\n  int32 SessionIndex = 3;  // Session index (usually 0)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolInfoSessionQuoteRequest</code> Request with Symbol, DayOfWeek, SessionIndex <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>DayOfWeek</code> <code>int32</code> Day of week (see enum below) <code>SessionIndex</code> <code>int32</code> Session index (usually 0 for main session) <p>DayOfWeek enum values:</p> Value Protobuf Enum Description <code>0</code> <code>pb.DayOfWeek_SUNDAY</code> Sunday <code>1</code> <code>pb.DayOfWeek_MONDAY</code> Monday <code>2</code> <code>pb.DayOfWeek_TUESDAY</code> Tuesday <code>3</code> <code>pb.DayOfWeek_WEDNESDAY</code> Wednesday <code>4</code> <code>pb.DayOfWeek_THURSDAY</code> Thursday <code>5</code> <code>pb.DayOfWeek_FRIDAY</code> Friday <code>6</code> <code>pb.DayOfWeek_SATURDAY</code> Saturday <p>Usage: Can use either numeric value or protobuf enum constant</p>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#output-symbolinfosessionquotedata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolInfoSessionQuoteData</code>","text":"Field Type Go Type Description <code>From</code> <code>google.protobuf.Timestamp</code> <code>*timestamppb.Timestamp</code> Session start time (use <code>.AsTime()</code> to convert) <code>To</code> <code>google.protobuf.Timestamp</code> <code>*timestamppb.Timestamp</code> Session end time (use <code>.AsTime()</code> to convert) <p>Note: To get seconds from day start, convert using: <pre><code>fromTime := data.From.AsTime()\nfromSeconds := fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second()\n</code></pre></p>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolInfoSessionQuote - How it works</p>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Time format: Session times are in seconds from midnight (00:00:00 = 0, 23:59:59 = 86399).</li> <li>Multiple sessions: Some symbols have multiple quote sessions per day (SessionIndex 0, 1, etc).</li> <li>Weekend: Most symbols have no quote sessions on Saturday and Sunday.</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#1-get-monday-quote-session","title":"1) Get Monday quote session","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolInfoSessionQuote(ctx, &amp;pb.SymbolInfoSessionQuoteRequest{\n        Symbol:       \"EURUSD\",\n        DayOfWeek:    1, // Monday\n        SessionIndex: 0,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fromTime := data.From.AsTime()\n    toTime := data.To.AsTime()\n\n    fromSeconds := fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second()\n    toSeconds := toTime.Hour()*3600 + toTime.Minute()*60 + toTime.Second()\n\n    fmt.Printf(\"EURUSD Monday quote session: %02d:%02d - %02d:%02d\\n\",\n        fromSeconds/3600, (fromSeconds%3600)/60, toSeconds/3600, (toSeconds%3600)/60)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#2-get-week-schedule","title":"2) Get week schedule","text":"<pre><code>func GetWeeklyQuoteSchedule(account *mt5.MT5Account, symbol string) {\n    ctx := context.Background()\n\n    days := []string{\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"}\n\n    fmt.Printf(\"Quote sessions for %s:\\n\", symbol)\n    for day := 0; day &lt;= 6; day++ {\n        data, err := account.SymbolInfoSessionQuote(ctx, &amp;pb.SymbolInfoSessionQuoteRequest{\n            Symbol:       symbol,\n            DayOfWeek:    int32(day),\n            SessionIndex: 0,\n        })\n        if err != nil {\n            fmt.Printf(\"  %s: Not available\\n\", days[day])\n            continue\n        }\n\n        fromStr := formatTime(data.From)\n        toStr := formatTime(data.To)\n        fmt.Printf(\"  %s: %s - %s\\n\", days[day], fromStr, toStr)\n    }\n}\n\nfunc formatTime(ts *timestamppb.Timestamp) string {\n    t := ts.AsTime()\n    seconds := t.Hour()*3600 + t.Minute()*60 + t.Second()\n    hours := seconds / 3600\n    mins := (seconds % 3600) / 60\n    return fmt.Sprintf(\"%02d:%02d\", hours, mins)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#3-check-if-quotes-available-now","title":"3) Check if quotes available now","text":"<pre><code>func AreQuotesAvailableNow(account *mt5.MT5Account, symbol string) (bool, error) {\n    ctx := context.Background()\n\n    now := time.Now()\n    dayOfWeek := int32(now.Weekday())\n    currentSeconds := int64(now.Hour()*3600 + now.Minute()*60 + now.Second())\n\n    data, err := account.SymbolInfoSessionQuote(ctx, &amp;pb.SymbolInfoSessionQuoteRequest{\n        Symbol:       symbol,\n        DayOfWeek:    dayOfWeek,\n        SessionIndex: 0,\n    })\n    if err != nil {\n        return false, err\n    }\n\n    fromTime := data.From.AsTime()\n    toTime := data.To.AsTime()\n    fromSeconds := int64(fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second())\n    toSeconds := int64(toTime.Hour()*3600 + toTime.Minute()*60 + toTime.Second())\n\n    available := currentSeconds &gt;= fromSeconds &amp;&amp; currentSeconds &lt;= toSeconds\n\n    fmt.Printf(\"%s quotes available now: %v\\n\", symbol, available)\n    return available, nil\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionQuote/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolInfoSessionTrade - Get trading session times</li> <li>SymbolIsSynchronized - Check quote sync</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/","title":"\u2705 Get Symbol Trading Session Times","text":"<p>Request: get start and end times of trading session for symbol on specified day of week.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolInfoSessionTrade(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoSessionTrade</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoSessionTrade(SymbolInfoSessionTradeRequest) \u2192 SymbolInfoSessionTradeReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoClient.SymbolInfoSessionTrade(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Returns when trading operations are allowed for a symbol on specific days.</li> <li>Why you need it. Check trading hours, validate order placement times, schedule trades.</li> <li>Time format. Returns seconds from midnight (0 = 00:00, 3600 = 01:00, etc).</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Check when trading is allowed for symbols</li> <li>Validate order placement times</li> <li>Schedule automated trading operations</li> <li>Build trading session calendars</li> <li>Prevent order rejections due to closed market</li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolInfoSessionTrade retrieves trade session times for a symbol.\n// Returns From and To times in seconds from day start.\nfunc (a *MT5Account) SymbolInfoSessionTrade(\n    ctx context.Context,\n    req *pb.SymbolInfoSessionTradeRequest,\n) (*pb.SymbolInfoSessionTradeData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolInfoSessionTradeRequest {\n  string Symbol = 1;       // Trading symbol\n  int32 DayOfWeek = 2;     // Day of week (0=Sunday to 6=Saturday)\n  int32 SessionIndex = 3;  // Session index (usually 0)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolInfoSessionTradeRequest</code> Request with Symbol, DayOfWeek, SessionIndex <p>Request fields:</p> Field Type Description <code>Symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>DayOfWeek</code> <code>int32</code> Day of week (see enum below) <code>SessionIndex</code> <code>int32</code> Session index (usually 0 for main session) <p>DayOfWeek enum values:</p> Value Protobuf Enum Description <code>0</code> <code>pb.DayOfWeek_SUNDAY</code> Sunday <code>1</code> <code>pb.DayOfWeek_MONDAY</code> Monday <code>2</code> <code>pb.DayOfWeek_TUESDAY</code> Tuesday <code>3</code> <code>pb.DayOfWeek_WEDNESDAY</code> Wednesday <code>4</code> <code>pb.DayOfWeek_THURSDAY</code> Thursday <code>5</code> <code>pb.DayOfWeek_FRIDAY</code> Friday <code>6</code> <code>pb.DayOfWeek_SATURDAY</code> Saturday <p>Usage: Can use either numeric value or protobuf enum constant</p>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#output-symbolinfosessiontradedata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolInfoSessionTradeData</code>","text":"Field Type Go Type Description <code>From</code> <code>google.protobuf.Timestamp</code> <code>*timestamppb.Timestamp</code> Session start time (use <code>.AsTime()</code> to convert) <code>To</code> <code>google.protobuf.Timestamp</code> <code>*timestamppb.Timestamp</code> Session end time (use <code>.AsTime()</code> to convert) <p>Note: To get seconds from day start, convert using: <pre><code>fromTime := data.From.AsTime()\nfromSeconds := fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second()\n</code></pre></p>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolInfoSessionTrade - How it works</p>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Time format: Session times are in seconds from midnight (00:00:00 = 0, 23:59:59 = 86399).</li> <li>Multiple sessions: Some symbols have multiple trading sessions per day (SessionIndex 0, 1, etc).</li> <li>Weekend: Most symbols do not allow trading on Saturday and Sunday.</li> <li>Quote vs Trade: Quote session shows when prices are available, trade session shows when orders can be placed.</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#1-get-monday-trade-session","title":"1) Get Monday trade session","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolInfoSessionTrade(ctx, &amp;pb.SymbolInfoSessionTradeRequest{\n        Symbol:       \"EURUSD\",\n        DayOfWeek:    1, // Monday\n        SessionIndex: 0,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fromTime := data.From.AsTime()\n    toTime := data.To.AsTime()\n\n    fromSeconds := fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second()\n    toSeconds := toTime.Hour()*3600 + toTime.Minute()*60 + toTime.Second()\n\n    fmt.Printf(\"EURUSD Monday trade session: %02d:%02d - %02d:%02d\\n\",\n        fromSeconds/3600, (fromSeconds%3600)/60, toSeconds/3600, (toSeconds%3600)/60)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#2-check-if-trading-allowed-now","title":"2) Check if trading allowed now","text":"<pre><code>func IsTradingAllowedNow(account *mt5.MT5Account, symbol string) (bool, error) {\n    ctx := context.Background()\n\n    now := time.Now()\n    dayOfWeek := int32(now.Weekday())\n    currentSeconds := int64(now.Hour()*3600 + now.Minute()*60 + now.Second())\n\n    data, err := account.SymbolInfoSessionTrade(ctx, &amp;pb.SymbolInfoSessionTradeRequest{\n        Symbol:       symbol,\n        DayOfWeek:    dayOfWeek,\n        SessionIndex: 0,\n    })\n    if err != nil {\n        return false, err\n    }\n\n    fromTime := data.From.AsTime()\n    toTime := data.To.AsTime()\n    fromSeconds := int64(fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second())\n    toSeconds := int64(toTime.Hour()*3600 + toTime.Minute()*60 + toTime.Second())\n\n    allowed := currentSeconds &gt;= fromSeconds &amp;&amp; currentSeconds &lt;= toSeconds\n\n    fmt.Printf(\"%s trading allowed now: %v\\n\", symbol, allowed)\n    return allowed, nil\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#3-get-weekly-trading-schedule","title":"3) Get weekly trading schedule","text":"<pre><code>func GetWeeklyTradingSchedule(account *mt5.MT5Account, symbol string) {\n    ctx := context.Background()\n\n    days := []string{\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"}\n\n    fmt.Printf(\"Trading sessions for %s:\\n\", symbol)\n    for day := 0; day &lt;= 6; day++ {\n        data, err := account.SymbolInfoSessionTrade(ctx, &amp;pb.SymbolInfoSessionTradeRequest{\n            Symbol:       symbol,\n            DayOfWeek:    int32(day),\n            SessionIndex: 0,\n        })\n        if err != nil {\n            fmt.Printf(\"  %s: Not available\\n\", days[day])\n            continue\n        }\n\n        fromStr := formatTime(data.From)\n        toStr := formatTime(data.To)\n        fmt.Printf(\"  %s: %s - %s\\n\", days[day], fromStr, toStr)\n    }\n}\n\nfunc formatTime(ts *timestamppb.Timestamp) string {\n    t := ts.AsTime()\n    seconds := t.Hour()*3600 + t.Minute()*60 + t.Second()\n    hours := seconds / 3600\n    mins := (seconds % 3600) / 60\n    return fmt.Sprintf(\"%02d:%02d\", hours, mins)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolInfoSessionTrade/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolInfoSessionQuote - Get quote session times</li> <li>OrderSend - Place orders during trading hours</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/","title":"\u2705 Get Parameters for Multiple Symbols","text":"<p>Request: get complete trading parameters for multiple symbols in one request. Returns Bid, Ask, Digits, Spread, volumes, contract size and other parameters.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.SymbolParamsMany(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>SymbolParamsMany</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>SymbolParamsMany(SymbolParamsManyRequest) \u2192 SymbolParamsManyReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperClient.SymbolParamsMany(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Retrieves comprehensive trading parameters for multiple symbols at once.</li> <li>Why you need it. Efficient bulk data retrieval, avoid multiple round-trips.</li> <li>Complete data. Returns all essential symbol properties in one call.</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Get complete trading specifications for multiple symbols efficiently</li> <li>Build trading dashboards and watchlists</li> <li>Validate trading parameters in bulk</li> <li>Compare spreads and conditions across symbols</li> <li>Reduce network round-trips with batch queries</li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// SymbolParamsMany retrieves detailed parameters for multiple symbols in one call.\n// This is the recommended method for getting comprehensive symbol data.\nfunc (a *MT5Account) SymbolParamsMany(\n    ctx context.Context,\n    req *pb.SymbolParamsManyRequest,\n) (*pb.SymbolParamsManyData, error)\n</code></pre> <p>Request message:</p> <pre><code>SymbolParamsManyRequest {\n  repeated string Symbols = 1;  // Array of symbol names\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.SymbolParamsManyRequest</code> Request with array of Symbols <p>Request fields:</p> Field Type Description <code>Symbols</code> <code>string[]</code> Array of symbol names"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#output-symbolparamsmanydata","title":"\u2b06\ufe0f Output \u2014 <code>SymbolParamsManyData</code>","text":"Field Type Go Type Description <code>SymbolInfos</code> <code>SymbolParameters[]</code> <code>[]*SymbolParameters</code> Array of detailed symbol parameters <code>SymbolsTotal</code> <code>int32</code> <code>int32</code> Total number of symbols returned <code>PageNumber</code> <code>int32</code> (optional) <code>*int32</code> Page number (if pagination used) <code>ItemsPerPage</code> <code>int32</code> (optional) <code>*int32</code> Items per page (if pagination used)"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#symbolparameters-structure-112-fields","title":"\ud83d\udccb <code>SymbolParameters</code> structure (112 fields)","text":"<p>Each symbol contains comprehensive trading information organized in the following categories:</p>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#basic-price-data-14-fields","title":"\ud83d\udd39 Basic Price Data (14 fields)","text":"Field Type Description <code>Name</code> <code>string</code> Symbol name (e.g., \"EURUSD\") <code>Bid</code> <code>float64</code> Current bid price <code>BidHigh</code> <code>float64</code> Highest bid of the day <code>BidLow</code> <code>float64</code> Lowest bid of the day <code>Ask</code> <code>float64</code> Current ask price <code>AskHigh</code> <code>float64</code> Highest ask of the day <code>AskLow</code> <code>float64</code> Lowest ask of the day <code>Last</code> <code>float64</code> Last deal price <code>LastHigh</code> <code>float64</code> Highest last price of the day <code>LastLow</code> <code>float64</code> Lowest last price of the day <code>VolumeReal</code> <code>float64</code> Real volume of the day <code>VolumeHighReal</code> <code>float64</code> Maximum real volume of the day <code>VolumeLowReal</code> <code>float64</code> Minimum real volume of the day <code>OptionStrike</code> <code>float64</code> Option strike price"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#trading-parameters-13-fields","title":"\ud83d\udd39 Trading Parameters (13 fields)","text":"Field Type Description <code>Point</code> <code>float64</code> Point size (minimal price change) <code>TradeTickValue</code> <code>float64</code> Tick value for profit calculation <code>TradeTickValueProfit</code> <code>float64</code> Tick value for profitable positions <code>TradeTickValueLoss</code> <code>float64</code> Tick value for losing positions <code>TradeTickSize</code> <code>float64</code> Minimal price change <code>TradeContractSize</code> <code>float64</code> Trade contract size <code>TradeAccruedInterest</code> <code>float64</code> Accrued interest <code>TradeFaceValue</code> <code>float64</code> Face value of the instrument <code>TradeLiquidityRate</code> <code>float64</code> Liquidity rate <code>VolumeMin</code> <code>float64</code> Minimum volume for a deal <code>VolumeMax</code> <code>float64</code> Maximum volume for a deal <code>VolumeStep</code> <code>float64</code> Minimal volume change step <code>VolumeLimit</code> <code>float64</code> Maximum allowed aggregate volume"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#swap-parameters-9-fields","title":"\ud83d\udd39 Swap Parameters (9 fields)","text":"Field Type Description <code>SwapLong</code> <code>float64</code> Long position swap value <code>SwapShort</code> <code>float64</code> Short position swap value <code>SwapSunday</code> <code>float64</code> Sunday swap <code>SwapMonday</code> <code>float64</code> Monday swap <code>SwapTuesday</code> <code>float64</code> Tuesday swap <code>SwapWednesday</code> <code>float64</code> Wednesday swap <code>SwapThursday</code> <code>float64</code> Thursday swap <code>SwapFriday</code> <code>float64</code> Friday swap <code>SwapSaturday</code> <code>float64</code> Saturday swap"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#margin-parameters-3-fields","title":"\ud83d\udd39 Margin Parameters (3 fields)","text":"Field Type Description <code>MarginInitial</code> <code>float64</code> Initial margin requirement <code>MarginMaintenance</code> <code>float64</code> Maintenance margin requirement <code>MarginHedged</code> <code>float64</code> Hedged margin"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#session-statistics-11-fields","title":"\ud83d\udd39 Session Statistics (11 fields)","text":"Field Type Description <code>SessionVolume</code> <code>float64</code> Summary volume of the current session <code>SessionTurnover</code> <code>float64</code> Summary turnover of the current session <code>SessionInterest</code> <code>float64</code> Summary open interest <code>SessionBuyOrdersVolume</code> <code>float64</code> Current volume of buy orders <code>SessionSellOrdersVolume</code> <code>float64</code> Current volume of sell orders <code>SessionOpen</code> <code>float64</code> Session open price <code>SessionClose</code> <code>float64</code> Session close price <code>SessionAw</code> <code>float64</code> Average weighted price <code>SessionPriceSettlement</code> <code>float64</code> Settlement price <code>SessionPriceLimitMin</code> <code>float64</code> Minimum price limit <code>SessionPriceLimitMax</code> <code>float64</code> Maximum price limit"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#options-greeks-price-analytics-10-fields","title":"\ud83d\udd39 Options Greeks &amp; Price Analytics (10 fields)","text":"Field Type Description <code>PriceChange</code> <code>float64</code> Change of price in % <code>PriceVolatility</code> <code>float64</code> Price volatility in % <code>PriceTheoretical</code> <code>float64</code> Theoretical option price <code>PriceDelta</code> <code>float64</code> Option/warrant delta <code>PriceTheta</code> <code>float64</code> Option/warrant theta <code>PriceGamma</code> <code>float64</code> Option/warrant gamma <code>PriceVega</code> <code>float64</code> Option/warrant vega <code>PriceRho</code> <code>float64</code> Option/warrant rho <code>PriceOmega</code> <code>float64</code> Option/warrant omega <code>PriceSensitivity</code> <code>float64</code> Option/warrant sensitivity"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#symbol-properties-9-fields","title":"\ud83d\udd39 Symbol Properties (9 fields)","text":"Field Type Description <code>Sector</code> <code>enum</code> Economic sector (enum value) <code>Industry</code> <code>enum</code> Industry sector (enum value) <code>Custom</code> <code>bool</code> Custom symbol flag <code>BackgroundColor</code> <code>string</code> Background color for symbol <code>ChartMode</code> <code>enum</code> Chart mode (Bid/Last price) <code>Exist</code> <code>bool</code> Symbol exists <code>Select</code> <code>bool</code> Symbol selected in Market Watch <code>SubscriptionDelay</code> <code>int32</code> Subscription delay in seconds <code>Visible</code> <code>bool</code> Symbol visible in Market Watch"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#session-counters-8-fields","title":"\ud83d\udd39 Session Counters (8 fields)","text":"Field Type Description <code>SessionDeals</code> <code>int64</code> Number of deals in current session <code>SessionBuyOrders</code> <code>int64</code> Number of buy orders <code>SessionSellOrders</code> <code>int64</code> Number of sell orders <code>Volume</code> <code>int64</code> Volume of the last deal <code>VolumeHigh</code> <code>int64</code> Maximum volume of the day <code>VolumeLow</code> <code>int64</code> Minimum volume of the day <code>Time</code> <code>timestamp</code> Time of the last quote <code>TimeMsc</code> <code>int64</code> Time of last quote in milliseconds"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#trading-settings-20-fields","title":"\ud83d\udd39 Trading Settings (20 fields)","text":"Field Type Description <code>Digits</code> <code>int32</code> Number of decimal digits <code>SpreadFloat</code> <code>bool</code> Floating spread flag <code>Spread</code> <code>int32</code> Current spread in points <code>TicksBookDepth</code> <code>int32</code> Maximal number of requests in order book <code>TradeCalcMode</code> <code>enum</code> Contract price calculation mode <code>TradeMode</code> <code>enum</code> Order execution type <code>StartTime</code> <code>timestamp</code> Date of symbol trading start <code>ExpirationTime</code> <code>timestamp</code> Date of symbol expiration <code>TradeStopsLevel</code> <code>int32</code> Minimal distance from price for stops <code>TradeFreezeLevel</code> <code>int32</code> Distance to freeze trade operations <code>TradeExeMode</code> <code>enum</code> Deal execution mode <code>SwapMode</code> <code>enum</code> Swap calculation method <code>SwapRollover_3Days</code> <code>enum</code> Day of week for triple rollover swap <code>MarginHedgedUseLeg</code> <code>bool</code> Calculate margin for hedged positions using larger leg <code>ExpirationMode</code> <code>int32</code> Flags of allowed order expiration modes <code>FillingMode</code> <code>enum[]</code> Flags of allowed order filling modes <code>OrderMode</code> <code>enum</code> Flags of allowed order types <code>OrderGtcMode</code> <code>enum</code> Expiration mode for pending orders <code>OptionMode</code> <code>enum</code> Option type <code>OptionRight</code> <code>enum</code> Option right (Call/Put)"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#string-metadata-15-fields","title":"\ud83d\udd39 String Metadata (15 fields)","text":"Field Type Description <code>Basis</code> <code>string</code> Underlying asset for derivative <code>Category</code> <code>string</code> Symbol category <code>Country</code> <code>string</code> Country of origin <code>SectorName</code> <code>string</code> Sector name <code>IndustryName</code> <code>string</code> Industry name <code>CurrencyBase</code> <code>string</code> Base currency <code>CurrencyProfit</code> <code>string</code> Profit currency <code>CurrencyMargin</code> <code>string</code> Margin currency <code>Bank</code> <code>string</code> Feeder for financial instruments <code>SymDescription</code> <code>string</code> Symbol description <code>Exchange</code> <code>string</code> Exchange name <code>Formula</code> <code>string</code> Formula for custom symbol pricing <code>Isin</code> <code>string</code> ISIN identifier <code>Page</code> <code>string</code> Web page URL with symbol information <code>Path</code> <code>string</code> Path in symbol tree"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 SymbolParamsMany - How it works</p>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>3s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Most efficient: This is the recommended method for retrieving comprehensive symbol data.</li> <li>Bulk operations: Can query 100+ symbols in single request.</li> <li>112+ fields: Each SymbolParams contains over 112 different properties.</li> <li>Performance: Much faster than calling individual SymbolInfo* methods repeatedly.</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#1-get-params-for-multiple-symbols","title":"1) Get params for multiple symbols","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    data, err := account.SymbolParamsMany(ctx, &amp;pb.SymbolParamsManyRequest{\n        Symbols: []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"},\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    for _, params := range data.SymbolInfos {\n        fmt.Printf(\"%s:\\n\", params.Name)\n        fmt.Printf(\"  Bid: %.5f, Ask: %.5f\\n\", params.Bid, params.Ask)\n        fmt.Printf(\"  Digits: %d, Spread: %d\\n\", params.Digits, params.Spread)\n        fmt.Printf(\"  Volume: %.2f - %.2f (step: %.2f)\\n\",\n            params.VolumeMin, params.VolumeMax, params.VolumeStep)\n        fmt.Println()\n    }\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#2-build-trading-dashboard","title":"2) Build trading dashboard","text":"<pre><code>func BuildTradingDashboard(account *mt5.MT5Account, watchlist []string) {\n    ctx := context.Background()\n\n    data, err := account.SymbolParamsMany(ctx, &amp;pb.SymbolParamsManyRequest{\n        Symbols: watchlist,\n    })\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551                   TRADING DASHBOARD                        \u2551\")\n    fmt.Println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\")\n    fmt.Println(\"\u2551  Symbol   \u2551   Bid    \u2551   Ask    \u2551 Spread \u2551 Contract Size  \u2551\")\n    fmt.Println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\")\n\n    for _, params := range data.SymbolInfos {\n        fmt.Printf(\"\u2551 %-9s \u2551 %8.5f \u2551 %8.5f \u2551 %6d \u2551 %14.0f \u2551\\n\",\n            params.Name, params.Bid, params.Ask, params.Spread, params.TradeContractSize)\n    }\n\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n}\n\n// Usage:\n// BuildTradingDashboard(account, []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"})\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#3-validate-trading-parameters","title":"3) Validate trading parameters","text":"<pre><code>func ValidateTradingParams(account *mt5.MT5Account, symbol string, volume float64) error {\n    ctx := context.Background()\n\n    data, err := account.SymbolParamsMany(ctx, &amp;pb.SymbolParamsManyRequest{\n        Symbols: []string{symbol},\n    })\n    if err != nil {\n        return err\n    }\n\n    if len(data.SymbolInfos) == 0 {\n        return fmt.Errorf(\"symbol %s not found\", symbol)\n    }\n\n    params := data.SymbolInfos[0]\n\n    // Validate volume\n    if volume &lt; params.VolumeMin {\n        return fmt.Errorf(\"volume %.2f below minimum %.2f\", volume, params.VolumeMin)\n    }\n    if volume &gt; params.VolumeMax {\n        return fmt.Errorf(\"volume %.2f above maximum %.2f\", volume, params.VolumeMax)\n    }\n\n    // Check volume step\n    remainder := math.Mod(volume, params.VolumeStep)\n    if remainder &gt; 0.0001 {\n        return fmt.Errorf(\"volume %.2f not aligned to step %.2f\", volume, params.VolumeStep)\n    }\n\n    fmt.Printf(\"Volume %.2f is valid for %s\\n\", volume, symbol)\n    return nil\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#4-compare-spreads-across-symbols","title":"4) Compare spreads across symbols","text":"<pre><code>func CompareSpreads(account *mt5.MT5Account, symbols []string) {\n    ctx := context.Background()\n\n    data, err := account.SymbolParamsMany(ctx, &amp;pb.SymbolParamsManyRequest{\n        Symbols: symbols,\n    })\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    fmt.Println(\"Spread comparison:\")\n    for _, params := range data.SymbolInfos {\n        spreadPips := float64(params.Spread) * params.Point * 10\n        fmt.Printf(\"  %s: %d points (%.1f pips)\\n\",\n            params.Name, params.Spread, spreadPips)\n    }\n}\n\n// Usage:\n// CompareSpreads(account, []string{\"EURUSD\", \"GBPUSD\", \"EURGBP\"})\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#5-find-symbols-with-low-spreads","title":"5) Find symbols with low spreads","text":"<pre><code>func FindLowSpreadSymbols(account *mt5.MT5Account, symbols []string, maxSpreadPips float64) []string {\n    ctx := context.Background()\n\n    data, err := account.SymbolParamsMany(ctx, &amp;pb.SymbolParamsManyRequest{\n        Symbols: symbols,\n    })\n    if err != nil {\n        return nil\n    }\n\n    lowSpreadSymbols := []string{}\n\n    for _, params := range data.SymbolInfos {\n        spreadPips := float64(params.Spread) * params.Point * 10\n\n        if spreadPips &lt;= maxSpreadPips {\n            lowSpreadSymbols = append(lowSpreadSymbols, params.Name)\n            fmt.Printf(\"%s: %.1f pips\\n\", params.Name, spreadPips)\n        }\n    }\n\n    return lowSpreadSymbols\n}\n\n// Usage:\n// symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"EURGBP\"}\n// lowSpread := FindLowSpreadSymbols(account, symbols, 2.0)\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#enum-reference","title":"\ud83d\udccb Enum Reference","text":""},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_symbol_sector","title":"<code>BMT5_ENUM_SYMBOL_SECTOR</code>","text":"Value Enum Name Description <code>0</code> <code>UNDEFINED</code> Undefined <code>1</code> <code>BASIC_MATERIALS</code> Basic materials <code>2</code> <code>COMMUNICATION_SERVICES</code> Communication services <code>3</code> <code>CONSUMER_CYCLICAL</code> Consumer cyclical <code>4</code> <code>CONSUMER_DEFENSIVE</code> Consumer defensive <code>5</code> <code>CURRENCY</code> Currencies <code>6</code> <code>CURRENCY_CRYPTO</code> Cryptocurrencies <code>7</code> <code>ENERGY</code> Energy <code>8</code> <code>FINANCIAL</code> Finance <code>9</code> <code>HEALTHCARE</code> Healthcare <code>10</code> <code>INDUSTRIALS</code> Industrials <code>11</code> <code>REAL_ESTATE</code> Real estate <code>12</code> <code>TECHNOLOGY</code> Technology <code>13</code> <code>UTILITIES</code> Utilities"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_symbol_industry","title":"<code>BMT5_ENUM_SYMBOL_INDUSTRY</code>","text":"Value Enum Name Description <code>0</code> <code>UNDEFINED</code> Undefined <code>1</code> <code>AGRICULTURAL_INPUTS</code> Agricultural inputs <code>2</code> <code>ALUMINIUM</code> Aluminium <code>3</code> <code>BUILDING_MATERIALS</code> Building materials <code>4</code> <code>CHEMICALS</code> Chemicals <code>5</code> <code>COKING_COAL</code> Coking coal <code>6</code> <code>COPPER</code> Copper <code>7</code> <code>GOLD</code> Gold <code>8</code> <code>LUMBER_WOOD</code> Lumber and wood production <code>9</code> <code>INDUSTRIAL_METALS</code> Other industrial metals and mining <code>10</code> <code>PRECIOUS_METALS</code> Other precious metals and mining <code>11</code> <code>PAPER</code> Paper and paper products <code>12</code> <code>SILVER</code> Silver <code>13</code> <code>SPECIALTY_CHEMICALS</code> Specialty chemicals <code>14</code> <code>STEEL</code> Steel <code>15</code> <code>ADVERTISING</code> Advertising agencies <code>16</code> <code>BROADCASTING</code> Broadcasting <code>17</code> <code>GAMING_MULTIMEDIA</code> Electronic gaming and multimedia <code>18</code> <code>ENTERTAINMENT</code> Entertainment <code>19</code> <code>INTERNET_CONTENT</code> Internet content and information <code>20</code> <code>PUBLISHING</code> Publishing <code>21</code> <code>TELECOM</code> Telecom services <code>22</code> <code>APPAREL_MANUFACTURING</code> Apparel manufacturing <code>23</code> <code>APPAREL_RETAIL</code> Apparel retail <code>24</code> <code>AUTO_MANUFACTURERS</code> Auto manufacturers <code>25</code> <code>AUTO_PARTS</code> Auto parts <code>26</code> <code>AUTO_DEALERSHIP</code> Auto and truck dealerships <code>27</code> <code>DEPARTMENT_STORES</code> Department stores <code>28</code> <code>FOOTWEAR_ACCESSORIES</code> Footwear and accessories <code>29</code> <code>FURNISHINGS</code> Furnishing, fixtures and appliances <code>30</code> <code>GAMBLING</code> Gambling <code>31</code> <code>HOME_IMPROV_RETAIL</code> Home improvement retail <code>32</code> <code>INTERNET_RETAIL</code> Internet retail <code>33</code> <code>LEISURE</code> Leisure <code>34</code> <code>LODGING</code> Lodging <code>35</code> <code>LUXURY_GOODS</code> Luxury goods <code>36</code> <code>PACKAGING_CONTAINERS</code> Packaging and containers <code>37</code> <code>PERSONAL_SERVICES</code> Personal services <code>38</code> <code>RECREATIONAL_VEHICLES</code> Recreational vehicles <code>39</code> <code>RESIDENT_CONSTRUCTION</code> Residential construction <code>40</code> <code>RESORTS_CASINOS</code> Resorts and casinos <code>41</code> <code>RESTAURANTS</code> Restaurants <code>42</code> <code>SPECIALTY_RETAIL</code> Specialty retail <code>43</code> <code>TEXTILE_MANUFACTURING</code> Textile manufacturing <code>44</code> <code>TRAVEL_SERVICES</code> Travel services <code>45</code> <code>BEVERAGES_BREWERS</code> Beverages - Brewers <code>46</code> <code>BEVERAGES_NON_ALCO</code> Beverages - Non-alcoholic <code>47</code> <code>BEVERAGES_WINERIES</code> Beverages - Wineries and distilleries <code>48</code> <code>CONFECTIONERS</code> Confectioners <code>49</code> <code>DISCOUNT_STORES</code> Discount stores <code>50</code> <code>EDUCATION_TRAINIG</code> Education and training services <code>51</code> <code>FARM_PRODUCTS</code> Farm products <code>52</code> <code>FOOD_DISTRIBUTION</code> Food distribution <code>53</code> <code>GROCERY_STORES</code> Grocery stores <code>54</code> <code>HOUSEHOLD_PRODUCTS</code> Household and personal products <code>55</code> <code>PACKAGED_FOODS</code> Packaged foods <code>56</code> <code>TOBACCO</code> Tobacco <code>57</code> <code>OIL_GAS_DRILLING</code> Oil and gas drilling <code>58</code> <code>OIL_GAS_EP</code> Oil and gas extraction and processing <code>59</code> <code>OIL_GAS_EQUIPMENT</code> Oil and gas equipment and services <code>60</code> <code>OIL_GAS_INTEGRATED</code> Oil and gas integrated <code>61</code> <code>OIL_GAS_MIDSTREAM</code> Oil and gas midstream <code>62</code> <code>OIL_GAS_REFINING</code> Oil and gas refining and marketing <code>63</code> <code>THERMAL_COAL</code> Thermal coal <code>64</code> <code>URANIUM</code> Uranium <code>65</code> <code>EXCHANGE_TRADED_FUND</code> Exchange traded fund <code>66</code> <code>ASSETS_MANAGEMENT</code> Assets management <code>67</code> <code>BANKS_DIVERSIFIED</code> Banks - Diversified <code>68</code> <code>BANKS_REGIONAL</code> Banks - Regional <code>69</code> <code>CAPITAL_MARKETS</code> Capital markets <code>70</code> <code>CLOSE_END_FUND_DEBT</code> Closed-End fund - Debt <code>71</code> <code>CLOSE_END_FUND_EQUITY</code> Closed-end fund - Equity <code>72</code> <code>CLOSE_END_FUND_FOREIGN</code> Closed-end fund - Foreign <code>73</code> <code>CREDIT_SERVICES</code> Credit services <code>74</code> <code>FINANCIAL_CONGLOMERATE</code> Financial conglomerates <code>75</code> <code>FINANCIAL_DATA_EXCHANGE</code> Financial data and stock exchange <code>76</code> <code>INSURANCE_BROKERS</code> Insurance brokers <code>77</code> <code>INSURANCE_DIVERSIFIED</code> Insurance - Diversified <code>78</code> <code>INSURANCE_LIFE</code> Insurance - Life <code>79</code> <code>INSURANCE_PROPERTY</code> Insurance - Property and casualty <code>80</code> <code>INSURANCE_REINSURANCE</code> Insurance - Reinsurance <code>81</code> <code>INSURANCE_SPECIALTY</code> Insurance - Specialty <code>82</code> <code>MORTGAGE_FINANCE</code> Mortgage finance <code>83</code> <code>SHELL_COMPANIES</code> Shell companies <code>84</code> <code>BIOTECHNOLOGY</code> Biotechnology <code>85</code> <code>DIAGNOSTICS_RESEARCH</code> Diagnostics and research <code>86</code> <code>DRUGS_MANUFACTURERS</code> Drugs manufacturers - general <code>87</code> <code>DRUGS_MANUFACTURERS_SPEC</code> Drugs manufacturers - Specialty and generic <code>88</code> <code>HEALTHCARE_PLANS</code> Healthcare plans <code>89</code> <code>HEALTH_INFORMATION</code> Health information services <code>90</code> <code>MEDICAL_FACILITIES</code> Medical care facilities <code>91</code> <code>MEDICAL_DEVICES</code> Medical devices <code>92</code> <code>MEDICAL_DISTRIBUTION</code> Medical distribution <code>93</code> <code>MEDICAL_INSTRUMENTS</code> Medical instruments and supplies <code>94</code> <code>PHARM_RETAILERS</code> Pharmaceutical retailers <code>95</code> <code>AEROSPACE_DEFENSE</code> Aerospace and defense <code>96</code> <code>AIRLINES</code> Airlines <code>97</code> <code>AIRPORTS_SERVICES</code> Airports and air services <code>98</code> <code>BUILDING_PRODUCTS</code> Building products and equipment <code>99</code> <code>BUSINESS_EQUIPMENT</code> Business equipment and supplies <code>100</code> <code>CONGLOMERATES</code> Conglomerates <code>101</code> <code>CONSULTING_SERVICES</code> Consulting services <code>102</code> <code>ELECTRICAL_EQUIPMENT</code> Electrical equipment and parts <code>103</code> <code>ENGINEERING_CONSTRUCTION</code> Engineering and construction <code>104</code> <code>FARM_HEAVY_MACHINERY</code> Farm and heavy construction machinery <code>105</code> <code>INDUSTRIAL_DISTRIBUTION</code> Industrial distribution <code>106</code> <code>INFRASTRUCTURE_OPERATIONS</code> Infrastructure operations <code>107</code> <code>FREIGHT_LOGISTICS</code> Integrated freight and logistics <code>108</code> <code>MARINE_SHIPPING</code> Marine shipping <code>109</code> <code>METAL_FABRICATION</code> Metal fabrication <code>110</code> <code>POLLUTION_CONTROL</code> Pollution and treatment controls <code>111</code> <code>RAILROADS</code> Railroads <code>112</code> <code>RENTAL_LEASING</code> Rental and leasing services <code>113</code> <code>SECURITY_PROTECTION</code> Security and protection services <code>114</code> <code>SPEALITY_BUSINESS_SERVICES</code> Specialty business services <code>115</code> <code>SPEALITY_MACHINERY</code> Specialty industrial machinery <code>116</code> <code>STUFFING_EMPLOYMENT</code> Staffing and employment services <code>117</code> <code>TOOLS_ACCESSORIES</code> Tools and accessories <code>118</code> <code>TRUCKING</code> Trucking <code>119</code> <code>WASTE_MANAGEMENT</code> Waste management <code>120</code> <code>REAL_ESTATE_DEVELOPMENT</code> Real estate - Development <code>121</code> <code>REAL_ESTATE_DIVERSIFIED</code> Real estate - Diversified <code>122</code> <code>REAL_ESTATE_SERVICES</code> Real estate services <code>123</code> <code>REIT_DIVERSIFIED</code> REIT - Diversified <code>124</code> <code>REIT_HEALTCARE</code> REIT - Healthcare facilities <code>125</code> <code>REIT_HOTEL_MOTEL</code> REIT - Hotel and motel <code>126</code> <code>REIT_INDUSTRIAL</code> REIT - Industrial <code>127</code> <code>REIT_MORTAGE</code> REIT - Mortgage <code>128</code> <code>REIT_OFFICE</code> REIT - Office <code>129</code> <code>REIT_RESIDENTAL</code> REIT - Residential <code>130</code> <code>REIT_RETAIL</code> REIT - Retail <code>131</code> <code>REIT_SPECIALITY</code> REIT - Specialty <code>132</code> <code>COMMUNICATION_EQUIPMENT</code> Communication equipment <code>133</code> <code>COMPUTER_HARDWARE</code> Computer hardware <code>134</code> <code>CONSUMER_ELECTRONICS</code> Consumer electronics <code>135</code> <code>ELECTRONIC_COMPONENTS</code> Electronic components <code>136</code> <code>ELECTRONIC_DISTRIBUTION</code> Electronics and computer distribution <code>137</code> <code>IT_SERVICES</code> Information technology services <code>138</code> <code>SCIENTIFIC_INSTRUMENTS</code> Scientific and technical instruments <code>139</code> <code>SEMICONDUCTOR_EQUIPMENT</code> Semiconductor equipment and materials <code>140</code> <code>SEMICONDUCTORS</code> Semiconductors <code>141</code> <code>SOFTWARE_APPLICATION</code> Software - Application <code>142</code> <code>SOFTWARE_INFRASTRUCTURE</code> Software - Infrastructure <code>143</code> <code>SOLAR</code> Solar <code>144</code> <code>UTILITIES_DIVERSIFIED</code> Utilities - Diversified <code>145</code> <code>UTILITIES_POWERPRODUCERS</code> Utilities - Independent power producers <code>146</code> <code>UTILITIES_RENEWABLE</code> Utilities - Renewable <code>147</code> <code>UTILITIES_REGULATED_ELECTRIC</code> Utilities - Regulated electric <code>148</code> <code>UTILITIES_REGULATED_GAS</code> Utilities - Regulated gas <code>149</code> <code>UTILITIES_REGULATED_WATER</code> Utilities - Regulated water <code>150</code> <code>UTILITIES_FIRST</code> Start of utilities services enumeration <code>151</code> <code>UTILITIES_LAST</code> End of utilities services enumeration"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_symbol_chart_mode","title":"<code>BMT5_ENUM_SYMBOL_CHART_MODE</code>","text":"Value Enum Name Description <code>0</code> <code>CHART_MODE_BID</code> Use Bid prices for chart <code>1</code> <code>CHART_MODE_LAST</code> Use Last deal prices for chart"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_symbol_calc_mode","title":"<code>BMT5_ENUM_SYMBOL_CALC_MODE</code>","text":"Value Enum Name Description <code>0</code> <code>FOREX</code> Forex calculation mode <code>1</code> <code>FOREX_NO_LEVERAGE</code> Forex without leverage <code>2</code> <code>FUTURES</code> Futures calculation <code>3</code> <code>CFD</code> CFD calculation <code>4</code> <code>CFDINDEX</code> CFD by indexes <code>5</code> <code>CFDLEVERAGE</code> CFD with leverage <code>6</code> <code>EXCH_STOCKS</code> Exchange stocks <code>7</code> <code>EXCH_FUTURES</code> Exchange futures <code>8</code> <code>EXCH_FUTURES_FORTS</code> FORTS futures <code>9</code> <code>EXCH_BONDS</code> Exchange bonds <code>10</code> <code>EXCH_STOCKS_MOEX</code> MOEX stocks <code>11</code> <code>EXCH_BONDS_MOEX</code> MOEX bonds <code>12</code> <code>SERV_COLLATERAL</code> Collateral mode"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_symbol_trade_mode","title":"<code>BMT5_ENUM_SYMBOL_TRADE_MODE</code>","text":"Value Enum Name Description <code>0</code> <code>DISABLED</code> Trade disabled <code>1</code> <code>LONGONLY</code> Only long positions allowed <code>2</code> <code>SHORTONLY</code> Only short positions allowed <code>3</code> <code>CLOSEONLY</code> Only close operations allowed <code>4</code> <code>FULL</code> No trade restrictions"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_symbol_trade_execution","title":"<code>BMT5_ENUM_SYMBOL_TRADE_EXECUTION</code>","text":"Value Enum Name Description <code>0</code> <code>REQUEST</code> Execution by request <code>1</code> <code>INSTANT</code> Instant execution <code>2</code> <code>MARKET</code> Market execution <code>3</code> <code>EXCHANGE</code> Exchange execution"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_symbol_swap_mode","title":"<code>BMT5_ENUM_SYMBOL_SWAP_MODE</code>","text":"Value Enum Name Description <code>0</code> <code>DISABLED</code> No swaps <code>1</code> <code>POINTS</code> Swaps in points <code>2</code> <code>CURRENCY_SYMBOL</code> Swaps in base currency <code>3</code> <code>CURRENCY_MARGIN</code> Swaps in margin currency <code>4</code> <code>CURRENCY_DEPOSIT</code> Swaps in deposit currency <code>5</code> <code>CURRENCY_PROFIT</code> Swaps in profit currency <code>6</code> <code>INTEREST_CURRENT</code> Annual interest from current price <code>7</code> <code>INTEREST_OPEN</code> Annual interest from open price <code>8</code> <code>REOPEN_CURRENT</code> Reopen by close price <code>9</code> <code>REOPEN_BID</code> Reopen by Bid price"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_day_of_week","title":"<code>BMT5_ENUM_DAY_OF_WEEK</code>","text":"Value Enum Name Description <code>0</code> <code>SUNDAY</code> Sunday <code>1</code> <code>MONDAY</code> Monday <code>2</code> <code>TUESDAY</code> Tuesday <code>3</code> <code>WEDNESDAY</code> Wednesday <code>4</code> <code>THURSDAY</code> Thursday <code>5</code> <code>FRIDAY</code> Friday <code>6</code> <code>SATURDAY</code> Saturday"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_symbol_order_gtc_mode","title":"<code>BMT5_ENUM_SYMBOL_ORDER_GTC_MODE</code>","text":"Value Enum Name Description <code>0</code> <code>GTC</code> Good till cancelled - unlimited validity <code>1</code> <code>DAILY</code> Valid for one trading day <code>2</code> <code>DAILY_EXCLUDING_STOPS</code> Daily, but SL/TP preserved"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_symbol_option_mode","title":"<code>BMT5_ENUM_SYMBOL_OPTION_MODE</code>","text":"Value Enum Name Description <code>0</code> <code>EUROPEAN</code> European option <code>1</code> <code>AMERICAN</code> American option"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_symbol_option_right","title":"<code>BMT5_ENUM_SYMBOL_OPTION_RIGHT</code>","text":"Value Enum Name Description <code>0</code> <code>CALL</code> Call option (right to buy) <code>1</code> <code>PUT</code> Put option (right to sell)"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_order_type","title":"<code>BMT5_ENUM_ORDER_TYPE</code>","text":"Value Enum Name Description <code>0</code> <code>BUY</code> Market buy <code>1</code> <code>SELL</code> Market sell <code>2</code> <code>BUY_LIMIT</code> Buy limit pending <code>3</code> <code>SELL_LIMIT</code> Sell limit pending <code>4</code> <code>BUY_STOP</code> Buy stop pending <code>5</code> <code>SELL_STOP</code> Sell stop pending <code>6</code> <code>BUY_STOP_LIMIT</code> Buy stop limit <code>7</code> <code>SELL_STOP_LIMIT</code> Sell stop limit <code>8</code> <code>CLOSE_BY</code> Close by opposite"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#bmt5_enum_order_type_filling","title":"<code>BMT5_ENUM_ORDER_TYPE_FILLING</code>","text":"Value Enum Name Description <code>0</code> <code>FOK</code> Fill or Kill - all or nothing <code>1</code> <code>IOC</code> Immediate or Cancel - partial fill allowed <code>2</code> <code>RETURN</code> Return order with remaining volume <code>3</code> <code>BOC</code> Book or Cancel - only passive execution"},{"location":"MT5Account/6.%20Additional_Methods/SymbolParamsMany/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolInfoDouble - Get individual symbol properties</li> <li>SymbolInfoInteger - Get integer symbol properties</li> <li>SymbolInfoTick - Get tick data</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/","title":"\u2705 Get Tick Value and Size Information","text":"<p>Request: get comprehensive tick value and size data for multiple symbols at once.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.TickValueWithSize(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>TickValueWithSize</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>TickValueWithSize(TickValueWithSizeRequest) -&gt; TickValueWithSizeReply</code></li> <li>Low-level client (generated): <code>AccountHelperClient.TickValueWithSize(ctx, request, opts...)</code></li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Returns tick value and size data for symbols including profit/loss calculations.</li> <li>Why you need it. Calculate position value, P&amp;L, risk management, lot size calculations.</li> <li>Key data. Provides TradeTickValue, TradeTickValueProfit, TradeTickValueLoss, TradeTickSize, TradeContractSize.</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Calculate exact position value in account currency</li> <li>Determine profit/loss per tick for risk management</li> <li>Calculate required margin and position sizes</li> <li>Build accurate P&amp;L calculators</li> <li>Understand tick size for precise price movements</li> <li>Get contract size for position value calculations</li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// TickValueWithSize returns tick value and size information for multiple symbols.\n// This method retrieves comprehensive tick value and size data including profit/loss calculations.\nfunc (a *MT5Account) TickValueWithSize(\n    ctx context.Context,\n    req *pb.TickValueWithSizeRequest,\n) (*pb.TickValueWithSizeData, error)\n</code></pre> <p>Request message:</p> <pre><code>TickValueWithSizeRequest {\n  repeated string SymbolNames = 1;  // Array of trading symbols\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for deadline/timeout and cancellation <code>req</code> <code>*pb.TickValueWithSizeRequest</code> Request with array of symbol names <p>Request fields:</p> Field Type Description <code>SymbolNames</code> <code>[]string</code> Array of trading symbols (e.g., [\"EURUSD\", \"GBPUSD\"])"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#output-tickvaluewithsizedata","title":"\u2b06\ufe0f Output \u2014 TickValueWithSizeData","text":"Field Type Description <code>SymbolTickSizeInfos</code> <code>[]*TickSizeSymbol</code> Array of tick value/size info for each symbol"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#ticksizesymbol-structure","title":"TickSizeSymbol structure:","text":"Field Type Description <code>Index</code> <code>int32</code> Symbol index in request array <code>Name</code> <code>string</code> Symbol name <code>TradeTickValue</code> <code>float64</code> Standard tick value in account currency <code>TradeTickValueProfit</code> <code>float64</code> Tick value for profitable positions <code>TradeTickValueLoss</code> <code>float64</code> Tick value for losing positions <code>TradeTickSize</code> <code>float64</code> Minimum price change (tick size) <code>TradeContractSize</code> <code>float64</code> Contract size for the symbol"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: -&gt; TickValueWithSize - How it works</p>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, a default <code>5s</code> timeout is applied automatically.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Multiple symbols: Request can include multiple symbols in a single call for efficiency.</li> <li>Account currency: All tick values are returned in your account currency.</li> <li>Profit vs Loss: Some symbols have different tick values for profitable vs losing positions (asymmetric pricing).</li> <li>Contract size: Use this with tick value to calculate position value: <code>positionValue = lots * contractSize * price</code>.</li> <li>Risk calculation: <code>riskPerTick = lots * tickValue</code>, multiply by expected price movement in ticks.</li> </ul>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#1-get-tick-value-for-single-symbol","title":"1) Get tick value for single symbol","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    \"github.com/google/uuid\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer cancel()\n\n    data, err := account.TickValueWithSize(ctx, &amp;pb.TickValueWithSizeRequest{\n        SymbolNames: []string{\"EURUSD\"},\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    for _, info := range data.SymbolTickSizeInfos {\n        fmt.Printf(\"Symbol: %s\\n\", info.Name)\n        fmt.Printf(\"  Tick Value:        %.5f\\n\", info.TradeTickValue)\n        fmt.Printf(\"  Tick Size:         %.5f\\n\", info.TradeTickSize)\n        fmt.Printf(\"  Contract Size:     %.2f\\n\", info.TradeContractSize)\n    }\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#2-calculate-position-risk-for-multiple-symbols","title":"2) Calculate position risk for multiple symbols","text":"<pre><code>func CalculatePositionRisk(account *mt5.MT5Account, symbols []string, lots float64) {\n    ctx := context.Background()\n\n    data, err := account.TickValueWithSize(ctx, &amp;pb.TickValueWithSizeRequest{\n        SymbolNames: symbols,\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Risk per tick for %.2f lots:\\n\", lots)\n    for _, info := range data.SymbolTickSizeInfos {\n        riskPerTick := lots * info.TradeTickValue\n        fmt.Printf(\"  %s: %.2f %s per tick\\n\", info.Name, riskPerTick, \"account currency\")\n    }\n}\n\n// Usage:\n// CalculatePositionRisk(account, []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}, 0.1)\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#3-calculate-position-value","title":"3) Calculate position value","text":"<pre><code>func CalculatePositionValue(account *mt5.MT5Account, symbol string, lots float64, price float64) (float64, error) {\n    ctx := context.Background()\n\n    data, err := account.TickValueWithSize(ctx, &amp;pb.TickValueWithSizeRequest{\n        SymbolNames: []string{symbol},\n    })\n    if err != nil {\n        return 0, err\n    }\n\n    if len(data.SymbolTickSizeInfos) == 0 {\n        return 0, fmt.Errorf(\"no data for symbol %s\", symbol)\n    }\n\n    info := data.SymbolTickSizeInfos[0]\n    positionValue := lots * info.TradeContractSize * price\n\n    fmt.Printf(\"Position value for %s:\\n\", symbol)\n    fmt.Printf(\"  Lots:          %.2f\\n\", lots)\n    fmt.Printf(\"  Contract Size: %.2f\\n\", info.TradeContractSize)\n    fmt.Printf(\"  Price:         %.5f\\n\", price)\n    fmt.Printf(\"  Total Value:   %.2f\\n\", positionValue)\n\n    return positionValue, nil\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#4-calculate-pl-per-pip","title":"4) Calculate P&amp;L per pip","text":"<pre><code>func CalculateProfitPerPip(account *mt5.MT5Account, symbol string, lots float64) {\n    ctx := context.Background()\n\n    data, err := account.TickValueWithSize(ctx, &amp;pb.TickValueWithSizeRequest{\n        SymbolNames: []string{symbol},\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    info := data.SymbolTickSizeInfos[0]\n\n    // Calculate ticks per pip (usually 10 for 5-digit quotes)\n    ticksPerPip := 0.0001 / info.TradeTickSize\n    profitPerPip := lots * info.TradeTickValueProfit * ticksPerPip\n    lossPerPip := lots * info.TradeTickValueLoss * ticksPerPip\n\n    fmt.Printf(\"%s (%.2f lots):\\n\", symbol, lots)\n    fmt.Printf(\"  Tick Size:        %.5f\\n\", info.TradeTickSize)\n    fmt.Printf(\"  Ticks per pip:    %.0f\\n\", ticksPerPip)\n    fmt.Printf(\"  Profit per pip:   %.2f\\n\", profitPerPip)\n    fmt.Printf(\"  Loss per pip:     %.2f\\n\", lossPerPip)\n}\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#5-build-position-risk-calculator","title":"5) Build position risk calculator","text":"<pre><code>func RiskCalculator(account *mt5.MT5Account, symbol string, accountBalance float64, riskPercent float64, stopLossPips float64) {\n    ctx := context.Background()\n\n    data, err := account.TickValueWithSize(ctx, &amp;pb.TickValueWithSizeRequest{\n        SymbolNames: []string{symbol},\n    })\n    if err != nil {\n        panic(err)\n    }\n\n    info := data.SymbolTickSizeInfos[0]\n\n    // Calculate maximum risk in account currency\n    maxRisk := accountBalance * (riskPercent / 100.0)\n\n    // Calculate value per pip for 1 lot\n    ticksPerPip := 0.0001 / info.TradeTickSize\n    valuePerPipOneLot := info.TradeTickValueLoss * ticksPerPip\n\n    // Calculate position size\n    lots := maxRisk / (stopLossPips * valuePerPipOneLot)\n\n    fmt.Printf(\"Risk Calculator for %s:\\n\", symbol)\n    fmt.Printf(\"  Account Balance:     %.2f\\n\", accountBalance)\n    fmt.Printf(\"  Risk Percent:        %.2f%%\\n\", riskPercent)\n    fmt.Printf(\"  Max Risk Amount:     %.2f\\n\", maxRisk)\n    fmt.Printf(\"  Stop Loss:           %.1f pips\\n\", stopLossPips)\n    fmt.Printf(\"  Value per pip/lot:   %.2f\\n\", valuePerPipOneLot)\n    fmt.Printf(\"  Recommended Lots:    %.2f\\n\", lots)\n}\n\n// Usage:\n// RiskCalculator(account, \"EURUSD\", 10000, 2.0, 50) // Risk 2% with 50 pip stop\n</code></pre>"},{"location":"MT5Account/6.%20Additional_Methods/TickValueWithSize/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolInfoDouble - Get individual symbol properties</li> <li>SymbolParamsMany - Get comprehensive symbol parameters</li> <li>OrderCalcMargin - Calculate required margin</li> <li>OrderCalcProfit - Calculate potential profit</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/","title":"\u2705 Stream Real-Time Position Profit/Loss","text":"<p>Request: subscribe to real-time profit/loss updates for open positions.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OnPositionProfit(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.SubscriptionService</code></li> <li>Proto definition: <code>OnPositionProfit</code> (defined in <code>mt5-term-api-subscription.proto</code>)</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.SubscriptionService</code></li> <li>Method: <code>OnPositionProfit(OnPositionProfitRequest) \u2192 stream OnPositionProfitReply</code></li> <li>Low\u2011level client (generated): <code>SubscriptionServiceClient.OnPositionProfit(ctx, request, opts...)</code></li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OnPositionProfit streams real-time profit/loss updates for open positions.\n// Returns two channels: data channel and error channel.\nfunc (a *MT5Account) OnPositionProfit(\n    ctx context.Context,\n    req *pb.OnPositionProfitRequest,\n) (&lt;-chan *pb.OnPositionProfitData, &lt;-chan error)\n</code></pre> <p>Request message:</p> <pre><code>OnPositionProfitRequest {\n  int32 TimerPeriodMilliseconds = 1;  // Update interval in milliseconds\n  bool IgnoreEmptyData = 2;           // Skip empty updates (no changes)\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for cancellation (cancel to stop stream) <code>req</code> <code>*pb.OnPositionProfitRequest</code> Request with update interval settings <code>req.TimerPeriodMilliseconds</code> <code>int32</code> Update interval in milliseconds (e.g., 1000 = 1 second) <code>req.IgnoreEmptyData</code> <code>bool</code> If true, skip updates when no positions changed"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#output-channels","title":"\u2b06\ufe0f Output \u2014 Channels","text":"Channel Type Description Data Channel <code>&lt;-chan *pb.OnPositionProfitData</code> Receives P&amp;L updates Error Channel <code>&lt;-chan error</code> Receives errors (closed on ctx cancel) <p>OnPositionProfitData fields:</p> Field Type Go Type Description <code>Type</code> <code>MT5_SUB_ENUM_EVENT_GROUP_TYPE</code> (enum) <code>int32</code> Event type (always OrderProfit) - ENUM! <code>NewPositions</code> <code>repeated OnPositionProfitPositionInfo</code> <code>[]*OnPositionProfitPositionInfo</code> Newly opened positions <code>UpdatedPositions</code> <code>repeated OnPositionProfitPositionInfo</code> <code>[]*OnPositionProfitPositionInfo</code> Positions with P&amp;L changes <code>DeletedPositions</code> <code>repeated OnPositionProfitPositionInfo</code> <code>[]*OnPositionProfitPositionInfo</code> Closed positions <code>AccountInfo</code> <code>OnEventAccountInfo</code> <code>*OnEventAccountInfo</code> Account snapshot (balance, equity, etc.) <code>TerminalInstanceGuidId</code> <code>string</code> <code>string</code> Terminal instance ID <p>OnPositionProfitPositionInfo fields:</p> Field Type Go Type Description <code>Index</code> <code>int32</code> <code>int32</code> Position index <code>Ticket</code> <code>int64</code> <code>int64</code> Position ticket number <code>Profit</code> <code>double</code> <code>float64</code> Current profit/loss <code>PositionSymbol</code> <code>string</code> <code>string</code> Trading symbol"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Real-time stream of position profit/loss changes.</li> <li>Why you need it. Monitor P&amp;L, implement stop-loss logic, track account performance.</li> <li>Dynamic updates. Updates whenever prices change affecting position profit.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Monitor real-time profit/loss for open positions</li> <li>Implement dynamic stop-loss and take-profit logic</li> <li>Track account performance</li> <li>Set up profit/loss alerts</li> <li>Build real-time P&amp;L dashboards</li> <li>Detect position changes immediately</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OnPositionProfit - How it works</p>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#enums-used-in-onpositionprofit","title":"\ud83e\uddf1 ENUMs used in OnPositionProfit","text":""},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#output-enum","title":"Output ENUM","text":"ENUM Type Field Name Purpose Values <code>MT5_SUB_ENUM_EVENT_GROUP_TYPE</code> <code>Type</code> Indicates the event type <code>OrderProfit</code> (0) - Position profit/loss update event <p>Usage in code:</p> <pre><code>profitStream, _ := account.OnPositionProfit(ctx, &amp;pb.OnPositionProfitRequest{\n    TimerPeriodMilliseconds: 1000,\n    IgnoreEmptyData:         true,\n})\n\nfor {\n    event, err := profitStream.Recv()\n    if err != nil {\n        break\n    }\n\n    // Check event type (always OrderProfit for this stream)\n    switch event.Type {\n    case pb.MT5_SUB_ENUM_EVENT_GROUP_TYPE_OrderProfit:\n        fmt.Printf(\"Position profit updates: %d new, %d updated, %d deleted\\n\",\n            len(event.NewPositions),\n            len(event.UpdatedPositions),\n            len(event.DeletedPositions))\n    }\n}\n</code></pre> <p>Note: The <code>Type</code> field will always be <code>OrderProfit</code> for OnPositionProfit stream. This ENUM is shared across all streaming methods (OnTrade, OnPositionProfit, OnTradeTransaction) to maintain consistent event identification.</p>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, streams run indefinitely until cancelled.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Channel buffering: Data channel is unbuffered, error channel is buffered (size 1).</li> <li>Goroutine required: You MUST consume the channels in a separate goroutine to avoid blocking.</li> <li>Timer interval: Use <code>TimerPeriodMilliseconds</code> to control update frequency (e.g., 1000 = update every 1 second).</li> <li>Ignore empty data: Set <code>IgnoreEmptyData</code> to true to skip updates when no positions changed.</li> <li>Three arrays: <code>NewPositions</code> (opened), <code>UpdatedPositions</code> (profit changed), <code>DeletedPositions</code> (closed).</li> <li>Real-time: Very low latency updates for position monitoring.</li> <li>ENUM type: Always check the <code>Type</code> field (MT5_SUB_ENUM_EVENT_GROUP_TYPE) to identify event type.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#1-monitor-all-positions-pl","title":"1) Monitor all positions P&amp;L","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n    \"github.com/google/uuid\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    err := account.Connect()\n    if err != nil {\n        panic(err)\n    }\n\n    ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)\n    defer cancel()\n\n    dataChan, errChan := account.OnPositionProfit(ctx, &amp;pb.OnPositionProfitRequest{\n        TimerPeriodMilliseconds: 1000, // Update every 1 second\n        IgnoreEmptyData:         true, // Skip empty updates\n    })\n\n    go func() {\n        for {\n            select {\n            case update := &lt;-dataChan:\n                if update == nil {\n                    return\n                }\n\n                // Check event type (ENUM!)\n                if update.Type == pb.MT5_SUB_ENUM_EVENT_GROUP_TYPE_OrderProfit {\n                    // Process new positions\n                    for _, pos := range update.NewPositions {\n                        fmt.Printf(\"[NEW] Position %d (%s): P&amp;L=%.2f\\n\",\n                            pos.Ticket, pos.PositionSymbol, pos.Profit)\n                    }\n\n                    // Process updated positions\n                    for _, pos := range update.UpdatedPositions {\n                        fmt.Printf(\"[UPD] Position %d (%s): P&amp;L=%.2f\\n\",\n                            pos.Ticket, pos.PositionSymbol, pos.Profit)\n                    }\n\n                    // Process closed positions\n                    for _, pos := range update.DeletedPositions {\n                        fmt.Printf(\"[DEL] Position %d (%s): Final P&amp;L=%.2f\\n\",\n                            pos.Ticket, pos.PositionSymbol, pos.Profit)\n                    }\n                }\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n            }\n        }\n    }()\n\n    &lt;-ctx.Done()\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#2-real-time-total-pl-dashboard","title":"2) Real-time total P&amp;L dashboard","text":"<pre><code>func RealTimePnLDashboard(account *mt5.MT5Account) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    positionProfits := make(map[int64]float64) // ticket -&gt; profit\n\n    dataChan, errChan := account.OnPositionProfit(ctx, &amp;pb.OnPositionProfitRequest{\n        TimerPeriodMilliseconds: 500,  // Update every 500ms\n        IgnoreEmptyData:         false, // Get all updates\n    })\n\n    go func() {\n        ticker := time.NewTicker(1 * time.Second)\n        defer ticker.Stop()\n\n        for {\n            select {\n            case update := &lt;-dataChan:\n                if update == nil {\n                    return\n                }\n\n                // Check event type\n                if update.Type == pb.MT5_SUB_ENUM_EVENT_GROUP_TYPE_OrderProfit {\n                    // Update profit for new and updated positions\n                    for _, pos := range update.NewPositions {\n                        positionProfits[pos.Ticket] = pos.Profit\n                    }\n                    for _, pos := range update.UpdatedPositions {\n                        positionProfits[pos.Ticket] = pos.Profit\n                    }\n\n                    // Remove closed positions\n                    for _, pos := range update.DeletedPositions {\n                        delete(positionProfits, pos.Ticket)\n                    }\n                }\n\n            case &lt;-ticker.C:\n                var totalProfit float64\n                for _, profit := range positionProfits {\n                    totalProfit += profit\n                }\n\n                fmt.Printf(\"\\r Total P&amp;L: %.2f USD (Positions: %d)\",\n                    totalProfit, len(positionProfits))\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"\\nError: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                return\n            }\n        }\n    }()\n\n    // Run for 5 minutes\n    time.Sleep(5 * time.Minute)\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#3-auto-take-profit-monitor","title":"3) Auto take profit monitor","text":"<pre><code>func AutoTakeProfitMonitor(account *mt5.MT5Account, targetProfit float64) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnPositionProfit(ctx, &amp;pb.OnPositionProfitRequest{\n        TimerPeriodMilliseconds: 1000,\n        IgnoreEmptyData:         true,\n    })\n\n    go func() {\n        for {\n            select {\n            case update := &lt;-dataChan:\n                if update == nil {\n                    return\n                }\n\n                // Check only updated positions\n                for _, pos := range update.UpdatedPositions {\n                    if pos.Profit &gt;= targetProfit {\n                        fmt.Printf(\"\\n\ud83c\udfaf Target profit reached for position %d (%s): %.2f\\n\",\n                            pos.Ticket, pos.PositionSymbol, pos.Profit)\n\n                        // Close position\n                        _, err := account.OrderClose(context.Background(), &amp;pb.OrderCloseRequest{\n                            Ticket:    uint64(pos.Ticket),\n                            Volume:    0, // Close all\n                            Deviation: 20,\n                            Comment:   \"Auto TP\",\n                        })\n\n                        if err != nil {\n                            fmt.Printf(\"Failed to close position: %v\\n\", err)\n                        } else {\n                            fmt.Printf(\"Position %d closed at profit %.2f\\n\",\n                                pos.Ticket, pos.Profit)\n                        }\n                    }\n                }\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                return\n            }\n        }\n    }()\n\n    time.Sleep(24 * time.Hour)\n}\n\n// Usage:\n// AutoTakeProfitMonitor(account, 100.0) // Close when profit &gt;= $100\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionProfit/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OpenedOrders - Get full position details</li> <li>OrderClose - Close positions</li> <li>OnSymbolTick - Stream price updates</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/","title":"\u2705 Stream Position and Order Ticket Changes","text":"<p>Request: subscribe to real-time notifications about changes in open position and pending order ticket lists. Receive updates when positions open/close or orders are placed/removed.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OnPositionsAndPendingOrdersTickets(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.SubscriptionService</code></li> <li>Proto definition: <code>OnPositionsAndPendingOrdersTickets</code> (defined in <code>mt5-term-api-subscription.proto</code>)</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.SubscriptionService</code></li> <li>Method: <code>OnPositionsAndPendingOrdersTickets(OnPositionsAndPendingOrdersTicketsRequest) \u2192 stream OnPositionsAndPendingOrdersTicketsReply</code></li> <li>Low\u2011level client (generated): <code>SubscriptionServiceClient.OnPositionsAndPendingOrdersTickets(ctx, request, opts...)</code></li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OnPositionsAndPendingOrdersTickets streams changes in open positions and pending orders.\n// Returns two channels: data channel and error channel.\nfunc (a *MT5Account) OnPositionsAndPendingOrdersTickets(\n    ctx context.Context,\n    req *pb.OnPositionsAndPendingOrdersTicketsRequest,\n) (&lt;-chan *pb.OnPositionsAndPendingOrdersTicketsData, &lt;-chan error)\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for cancellation (cancel to stop stream) <code>req</code> <code>*pb.OnPositionsAndPendingOrdersTicketsRequest</code> Request (empty structure)"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#output-channels","title":"\u2b06\ufe0f Output \u2014 Channels","text":"Channel Type Description Data Channel <code>&lt;-chan *pb.OnPositionsAndPendingOrdersTicketsData</code> Receives ticket list updates Error Channel <code>&lt;-chan error</code> Receives errors (closed on ctx cancel) <p>OnPositionsAndPendingOrdersTicketsData fields:</p> Field Type Go Type Description <code>PositionTickets</code> <code>uint64[]</code> <code>[]uint64</code> Array of open position ticket numbers <code>PendingOrderTickets</code> <code>uint64[]</code> <code>[]uint64</code> Array of pending order ticket numbers"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Real-time stream of changes to position and pending order ticket lists.</li> <li>Why you need it. Monitor position/order changes, detect new trades, track closures.</li> <li>Lightweight. Only sends ticket numbers, not full order details.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Detect new positions and pending orders immediately</li> <li>Monitor position and order closures in real-time</li> <li>Track ticket list changes efficiently</li> <li>Implement lightweight position monitoring</li> <li>Build real-time order tracking systems</li> <li>Detect trading activity changes</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OnPositionsAndPendingOrdersTickets - How it works</p>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, streams run indefinitely until cancelled.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Channel buffering: Data channel is unbuffered, error channel is buffered (size 1).</li> <li>Goroutine required: You MUST consume the channels in a separate goroutine to avoid blocking.</li> <li>Lightweight: Only transmits ticket numbers, not full order details.</li> <li>Empty request: OnPositionsAndPendingOrdersTicketsRequest is an empty structure.</li> <li>Change detection: Compare previous ticket list with new list to detect changes.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#1-monitor-position-changes","title":"1) Monitor position changes","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)\n    defer cancel()\n\n    dataChan, errChan := account.OnPositionsAndPendingOrdersTickets(ctx,\n        &amp;pb.OnPositionsAndPendingOrdersTicketsRequest{})\n\n    go func() {\n        for {\n            select {\n            case update := &lt;-dataChan:\n                if update == nil {\n                    return\n                }\n                fmt.Printf(\"[%s] Open positions: %d, Pending orders: %d\\n\",\n                    time.Now().Format(\"15:04:05\"),\n                    len(update.PositionTickets),\n                    len(update.PendingOrderTickets))\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n            }\n        }\n    }()\n\n    &lt;-ctx.Done()\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#2-detect-new-positions","title":"2) Detect new positions","text":"<pre><code>func DetectNewPositions(account *mt5.MT5Account) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    var lastPositions map[uint64]bool\n\n    dataChan, errChan := account.OnPositionsAndPendingOrdersTickets(ctx,\n        &amp;pb.OnPositionsAndPendingOrdersTicketsRequest{})\n\n    go func() {\n        for {\n            select {\n            case update := &lt;-dataChan:\n                if update == nil {\n                    return\n                }\n\n                currentPositions := make(map[uint64]bool)\n                for _, ticket := range update.PositionTickets {\n                    currentPositions[ticket] = true\n\n                    // Check if this is a new position\n                    if lastPositions != nil &amp;&amp; !lastPositions[ticket] {\n                        fmt.Printf(\"\ud83c\udd95 New position opened: %d\\n\", ticket)\n                    }\n                }\n\n                // Check for closed positions\n                if lastPositions != nil {\n                    for ticket := range lastPositions {\n                        if !currentPositions[ticket] {\n                            fmt.Printf(\"\ud83d\udd12 Position closed: %d\\n\", ticket)\n                        }\n                    }\n                }\n\n                lastPositions = currentPositions\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                return\n            }\n        }\n    }()\n\n    time.Sleep(24 * time.Hour)\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#3-track-pending-order-changes","title":"3) Track pending order changes","text":"<pre><code>func TrackPendingOrders(account *mt5.MT5Account, duration time.Duration) {\n    ctx, cancel := context.WithTimeout(context.Background(), duration)\n    defer cancel()\n\n    var lastPending []uint64\n\n    dataChan, errChan := account.OnPositionsAndPendingOrdersTickets(ctx,\n        &amp;pb.OnPositionsAndPendingOrdersTicketsRequest{})\n\n    for {\n        select {\n        case update := &lt;-dataChan:\n            if update == nil {\n                break\n            }\n\n            // Find new pending orders\n            newOrders := findNewTickets(lastPending, update.PendingOrderTickets)\n            for _, ticket := range newOrders {\n                fmt.Printf(\"\u2795 Pending order placed: %d\\n\", ticket)\n            }\n\n            // Find removed pending orders (executed or cancelled)\n            removed := findNewTickets(update.PendingOrderTickets, lastPending)\n            for _, ticket := range removed {\n                fmt.Printf(\"\u2796 Pending order removed: %d\\n\", ticket)\n            }\n\n            lastPending = update.PendingOrderTickets\n\n        case err := &lt;-errChan:\n            if err != nil {\n                fmt.Printf(\"Error: %v\\n\", err)\n            }\n\n        case &lt;-ctx.Done():\n            return\n        }\n    }\n}\n\nfunc findNewTickets(old, new []uint64) []uint64 {\n    oldSet := make(map[uint64]bool)\n    for _, t := range old {\n        oldSet[t] = true\n    }\n\n    result := []uint64{}\n    for _, t := range new {\n        if !oldSet[t] {\n            result = append(result, t)\n        }\n    }\n    return result\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#4-position-counter-with-alerts","title":"4) Position counter with alerts","text":"<pre><code>func MonitorPositionCount(account *mt5.MT5Account, maxPositions int) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnPositionsAndPendingOrdersTickets(ctx,\n        &amp;pb.OnPositionsAndPendingOrdersTicketsRequest{})\n\n    go func() {\n        for {\n            select {\n            case update := &lt;-dataChan:\n                if update == nil {\n                    return\n                }\n\n                posCount := len(update.PositionTickets)\n\n                if posCount &gt;= maxPositions {\n                    fmt.Printf(\"\u26a0\ufe0f  WARNING: %d positions open (max: %d)\\n\",\n                        posCount, maxPositions)\n                } else {\n                    fmt.Printf(\"Positions: %d/%d\\n\", posCount, maxPositions)\n                }\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                return\n            }\n        }\n    }()\n\n    select {}\n}\n\n// Usage:\n// MonitorPositionCount(account, 10) // Alert when &gt;= 10 positions\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#5-trading-activity-logger","title":"5) Trading activity logger","text":"<pre><code>type ActivityLog struct {\n    Timestamp        time.Time\n    PositionCount    int\n    PendingCount     int\n    NewPositions     []uint64\n    ClosedPositions  []uint64\n}\n\nfunc LogTradingActivity(account *mt5.MT5Account, duration time.Duration) {\n    ctx, cancel := context.WithTimeout(context.Background(), duration)\n    defer cancel()\n\n    logs := []ActivityLog{}\n    var lastPositions map[uint64]bool\n\n    dataChan, errChan := account.OnPositionsAndPendingOrdersTickets(ctx,\n        &amp;pb.OnPositionsAndPendingOrdersTicketsRequest{})\n\n    for {\n        select {\n        case update := &lt;-dataChan:\n            if update == nil {\n                break\n            }\n\n            log := ActivityLog{\n                Timestamp:     time.Now(),\n                PositionCount: len(update.PositionTickets),\n                PendingCount:  len(update.PendingOrderTickets),\n            }\n\n            // Track position changes\n            currentPos := make(map[uint64]bool)\n            for _, ticket := range update.PositionTickets {\n                currentPos[ticket] = true\n                if lastPositions != nil &amp;&amp; !lastPositions[ticket] {\n                    log.NewPositions = append(log.NewPositions, ticket)\n                }\n            }\n\n            if lastPositions != nil {\n                for ticket := range lastPositions {\n                    if !currentPos[ticket] {\n                        log.ClosedPositions = append(log.ClosedPositions, ticket)\n                    }\n                }\n            }\n\n            logs = append(logs, log)\n            lastPositions = currentPos\n\n        case err := &lt;-errChan:\n            if err != nil {\n                fmt.Printf(\"Error: %v\\n\", err)\n            }\n\n        case &lt;-ctx.Done():\n            // Print summary\n            fmt.Println(\"\\nTrading Activity Summary:\")\n            for _, log := range logs {\n                if len(log.NewPositions) &gt; 0 || len(log.ClosedPositions) &gt; 0 {\n                    fmt.Printf(\"[%s] Positions: %d, Pending: %d\\n\",\n                        log.Timestamp.Format(\"15:04:05\"),\n                        log.PositionCount,\n                        log.PendingCount)\n\n                    if len(log.NewPositions) &gt; 0 {\n                        fmt.Printf(\"  New: %v\\n\", log.NewPositions)\n                    }\n                    if len(log.ClosedPositions) &gt; 0 {\n                        fmt.Printf(\"  Closed: %v\\n\", log.ClosedPositions)\n                    }\n                }\n            }\n            return\n        }\n    }\n}\n\n// Usage:\n// LogTradingActivity(account, 30*time.Minute)\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnPositionsAndPendingOrdersTickets/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OpenedOrdersTickets - Get current ticket snapshot</li> <li>OpenedOrders - Get full position details</li> <li>OnTrade - Stream all trade events</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/","title":"\u2705 Stream Real-Time Symbol Ticks","text":"<p>Request: subscribe to real-time tick updates for a symbol. Receive Bid/Ask price updates through Go channels.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OnSymbolTick(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.SubscriptionService</code></li> <li>Proto definition: <code>OnSymbolTick</code> (defined in <code>mt5-term-api-subscription.proto</code>)</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.SubscriptionService</code></li> <li>Method: <code>OnSymbolTick(OnSymbolTickRequest) \u2192 stream OnSymbolTickReply</code></li> <li>Low\u2011level client (generated): <code>SubscriptionServiceClient.OnSymbolTick(ctx, request, opts...)</code></li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OnSymbolTick streams real-time tick data for a symbol.\n// Returns two channels: data channel and error channel.\nfunc (a *MT5Account) OnSymbolTick(\n    ctx context.Context,\n    req *pb.OnSymbolTickRequest,\n) (&lt;-chan *pb.OnSymbolTickData, &lt;-chan error)\n</code></pre> <p>Request message:</p> <pre><code>OnSymbolTickRequest {\n  repeated string SymbolNames = 1;  // Array of symbol names to stream\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for cancellation (cancel to stop stream) <code>req</code> <code>*pb.OnSymbolTickRequest</code> Request with array of symbol names"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#output-channels","title":"\u2b06\ufe0f Output \u2014 Channels","text":"Channel Type Description Data Channel <code>&lt;-chan *pb.OnSymbolTickData</code> Receives tick updates Error Channel <code>&lt;-chan error</code> Receives errors (closed on ctx cancel) <p>OnSymbolTickData fields:</p> Field Type Go Type Description <code>Bid</code> <code>double</code> <code>float64</code> Current bid price <code>Ask</code> <code>double</code> <code>float64</code> Current ask price <code>Last</code> <code>double</code> <code>float64</code> Last deal price <code>Volume</code> <code>uint64</code> <code>uint64</code> Volume <code>Time</code> <code>google.protobuf.Timestamp</code> <code>*timestamppb.Timestamp</code> Tick timestamp <code>Flags</code> <code>uint32</code> <code>uint32</code> Tick flags (see MT5 documentation)"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Real-time streaming of price updates via Go channels.</li> <li>Why you need it. Monitor live prices, implement tick-based strategies, real-time dashboards.</li> <li>Goroutines required. Must consume channels in goroutines to avoid blocking.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Stream real-time tick data for symbols</li> <li>Monitor live bid/ask prices and spreads</li> <li>Implement tick-based trading strategies</li> <li>Build real-time price dashboards</li> <li>Track price movements and volatility</li> <li>Set up price alerts and notifications</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OnSymbolTick - How it works</p>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, streams run indefinitely until cancelled.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Channel buffering: Data channel is unbuffered, error channel is buffered (size 1).</li> <li>Goroutine required: You MUST consume the channels in a separate goroutine to avoid blocking.</li> <li>Context cancellation: Use <code>context.WithCancel()</code> or <code>context.WithTimeout()</code> to stop streaming.</li> <li>Channel closure: Both channels close when context is cancelled or stream ends.</li> <li>Symbol must exist: Use <code>SymbolSelect</code> to add symbol to Market Watch before streaming.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#1-basic-streaming-with-goroutine","title":"1) Basic streaming with goroutine","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)\n    defer cancel()\n\n    dataChan, errChan := account.OnSymbolTick(ctx, &amp;pb.OnSymbolTickRequest{\n        SymbolNames: []string{\"EURUSD\"},\n    })\n\n    // Process in goroutine\n    go func() {\n        for {\n            select {\n            case tick := &lt;-dataChan:\n                if tick == nil {\n                    return\n                }\n                fmt.Printf(\"[%s] EURUSD: Bid=%.5f, Ask=%.5f, Spread=%.5f\\n\",\n                    time.Now().Format(\"15:04:05\"),\n                    tick.Bid, tick.Ask, tick.Ask-tick.Bid)\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Stream error: %v\\n\", err)\n                    return\n                }\n            }\n        }\n    }()\n\n    // Keep main running\n    &lt;-ctx.Done()\n    fmt.Println(\"Stream stopped\")\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#2-streaming-with-context-cancellation","title":"2) Streaming with context cancellation","text":"<pre><code>func StreamWithCancellation(account *mt5.MT5Account) {\n    ctx, cancel := context.WithCancel(context.Background())\n\n    dataChan, errChan := account.OnSymbolTick(ctx, &amp;pb.OnSymbolTickRequest{\n        SymbolNames: []string{\"EURUSD\"},\n    })\n\n    // Start consuming\n    go func() {\n        for {\n            select {\n            case tick := &lt;-dataChan:\n                if tick == nil {\n                    fmt.Println(\"Data channel closed\")\n                    return\n                }\n                fmt.Printf(\"Tick: Bid=%.5f, Ask=%.5f\\n\", tick.Bid, tick.Ask)\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                fmt.Println(\"Context cancelled\")\n                return\n            }\n        }\n    }()\n\n    // Cancel after 10 seconds\n    time.Sleep(10 * time.Second)\n    cancel()\n    fmt.Println(\"Cancellation triggered\")\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#3-multiple-symbol-streaming","title":"3) Multiple symbol streaming","text":"<pre><code>func StreamMultipleSymbols(account *mt5.MT5Account, symbols []string) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    for _, symbol := range symbols {\n        dataChan, errChan := account.OnSymbolTick(ctx, &amp;pb.OnSymbolTickRequest{\n            Symbol: symbol,\n        })\n\n        // Launch goroutine for each symbol\n        go func(sym string, data &lt;-chan *pb.OnSymbolTickData, errs &lt;-chan error) {\n            for {\n                select {\n                case tick := &lt;-data:\n                    if tick == nil {\n                        return\n                    }\n                    fmt.Printf(\"[%s] Bid=%.5f, Ask=%.5f\\n\", sym, tick.Bid, tick.Ask)\n\n                case err := &lt;-errs:\n                    if err != nil {\n                        fmt.Printf(\"[%s] Error: %v\\n\", sym, err)\n                        return\n                    }\n\n                case &lt;-ctx.Done():\n                    return\n                }\n            }\n        }(symbol, dataChan, errChan)\n    }\n\n    // Run for 30 seconds\n    time.Sleep(30 * time.Second)\n}\n\n// Usage:\n// StreamMultipleSymbols(account, []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"})\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#4-tick-aggregation-and-statistics","title":"4) Tick aggregation and statistics","text":"<pre><code>type TickStats struct {\n    Symbol    string\n    Count     int64\n    LastBid   float64\n    LastAsk   float64\n    MinBid    float64\n    MaxBid    float64\n}\n\nfunc AggregateTickStats(account *mt5.MT5Account, symbol string, duration time.Duration) {\n    ctx, cancel := context.WithTimeout(context.Background(), duration)\n    defer cancel()\n\n    stats := &amp;TickStats{\n        Symbol: symbol,\n        MinBid: 999999.0,\n    }\n\n    dataChan, errChan := account.OnSymbolTick(ctx, &amp;pb.OnSymbolTickRequest{\n        Symbol: symbol,\n    })\n\n    for {\n        select {\n        case tick := &lt;-dataChan:\n            if tick == nil {\n                break\n            }\n            stats.Count++\n            stats.LastBid = tick.Bid\n            stats.LastAsk = tick.Ask\n\n            if tick.Bid &lt; stats.MinBid {\n                stats.MinBid = tick.Bid\n            }\n            if tick.Bid &gt; stats.MaxBid {\n                stats.MaxBid = tick.Bid\n            }\n\n        case err := &lt;-errChan:\n            if err != nil {\n                fmt.Printf(\"Error: %v\\n\", err)\n            }\n\n        case &lt;-ctx.Done():\n            fmt.Printf(\"\\n%s Statistics:\\n\", stats.Symbol)\n            fmt.Printf(\"  Ticks received: %d\\n\", stats.Count)\n            fmt.Printf(\"  Last Bid/Ask: %.5f / %.5f\\n\", stats.LastBid, stats.LastAsk)\n            fmt.Printf(\"  Bid range: %.5f - %.5f\\n\", stats.MinBid, stats.MaxBid)\n            return\n        }\n    }\n}\n\n// Usage:\n// AggregateTickStats(account, \"EURUSD\", 60*time.Second)\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#5-price-alert-system","title":"5) Price alert system","text":"<pre><code>func PriceAlertMonitor(account *mt5.MT5Account, symbol string, targetPrice float64, above bool) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnSymbolTick(ctx, &amp;pb.OnSymbolTickRequest{\n        Symbol: symbol,\n    })\n\n    fmt.Printf(\"Monitoring %s for price %s %.5f\\n\",\n        symbol,\n        map[bool]string{true: \"above\", false: \"below\"}[above],\n        targetPrice)\n\n    go func() {\n        for {\n            select {\n            case tick := &lt;-dataChan:\n                if tick == nil {\n                    return\n                }\n\n                triggered := false\n                if above &amp;&amp; tick.Ask &gt;= targetPrice {\n                    triggered = true\n                } else if !above &amp;&amp; tick.Bid &lt;= targetPrice {\n                    triggered = true\n                }\n\n                if triggered {\n                    fmt.Printf(\"\\n\ud83d\udd14 ALERT: %s price reached %.5f (Bid=%.5f, Ask=%.5f)\\n\",\n                        symbol, targetPrice, tick.Bid, tick.Ask)\n                    cancel() // Stop monitoring\n                    return\n                }\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                return\n            }\n        }\n    }()\n\n    &lt;-ctx.Done()\n}\n\n// Usage:\n// PriceAlertMonitor(account, \"EURUSD\", 1.11000, true) // Alert when above 1.11000\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#6-real-time-spread-monitoring","title":"6) Real-time spread monitoring","text":"<pre><code>func MonitorSpread(account *mt5.MT5Account, symbol string, maxSpreadPips float64) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnSymbolTick(ctx, &amp;pb.OnSymbolTickRequest{\n        Symbol: symbol,\n    })\n\n    go func() {\n        for {\n            select {\n            case tick := &lt;-dataChan:\n                if tick == nil {\n                    return\n                }\n\n                spread := tick.Ask - tick.Bid\n                spreadPips := spread * 10000 // For 5-digit quotes\n\n                if spreadPips &gt; maxSpreadPips {\n                    fmt.Printf(\"\u26a0\ufe0f  High spread alert: %.1f pips (Bid=%.5f, Ask=%.5f)\\n\",\n                        spreadPips, tick.Bid, tick.Ask)\n                } else {\n                    fmt.Printf(\"[%s] Spread: %.1f pips\\n\",\n                        time.Now().Format(\"15:04:05\"), spreadPips)\n                }\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                return\n            }\n        }\n    }()\n\n    time.Sleep(60 * time.Second)\n    cancel()\n}\n\n// Usage:\n// MonitorSpread(account, \"EURUSD\", 2.0) // Alert if spread &gt; 2 pips\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#common-patterns","title":"\ud83d\udd27 Common Patterns","text":""},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#stream-with-graceful-shutdown","title":"Stream with graceful shutdown","text":"<pre><code>func StreamWithShutdown(account *mt5.MT5Account, symbol string) {\n    ctx, cancel := context.WithCancel(context.Background())\n\n    dataChan, errChan := account.OnSymbolTick(ctx, &amp;pb.OnSymbolTickRequest{\n        Symbol: symbol,\n    })\n\n    done := make(chan struct{})\n\n    go func() {\n        defer close(done)\n        for {\n            select {\n            case tick := &lt;-dataChan:\n                if tick == nil {\n                    return\n                }\n                // Process tick...\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                fmt.Println(\"Shutting down gracefully...\")\n                return\n            }\n        }\n    }()\n\n    // Wait for signal (Ctrl+C, etc)\n    // ...then cancel\n    cancel()\n    &lt;-done // Wait for goroutine to finish\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnSymbolTick/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>SymbolInfoTick - Get single tick snapshot</li> <li>SymbolSelect - Add symbol to Market Watch</li> <li>OnTrade - Stream trade events</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/","title":"\u2705 Stream Real-Time Trade Events","text":"<p>Request: subscribe to real-time notifications for all trading operations: order placement, modification, execution, and cancellation.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OnTrade(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.SubscriptionService</code></li> <li>Proto definition: <code>OnTrade</code> (defined in <code>mt5-term-api-subscription.proto</code>)</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.SubscriptionService</code></li> <li>Method: <code>OnTrade(OnTradeRequest) \u2192 stream OnTradeReply</code></li> <li>Low\u2011level client (generated): <code>SubscriptionServiceClient.OnTrade(ctx, request, opts...)</code></li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OnTrade streams trade events in real-time.\n// Returns two channels: data channel and error channel.\nfunc (a *MT5Account) OnTrade(\n    ctx context.Context,\n    req *pb.OnTradeRequest,\n) (&lt;-chan *pb.OnTradeData, &lt;-chan error)\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for cancellation (cancel to stop stream) <code>req</code> <code>*pb.OnTradeRequest</code> Request (empty structure)"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#output-channels","title":"\u2b06\ufe0f Output \u2014 Channels","text":"Channel Type Description Data Channel <code>&lt;-chan *pb.OnTradeData</code> Receives trade event updates Error Channel <code>&lt;-chan error</code> Receives errors (closed on ctx cancel) <p>OnTradeData fields:</p> Field Type Go Type Description <code>Type</code> <code>MT5_SUB_ENUM_EVENT_GROUP_TYPE</code> (enum) <code>int32</code> Event type (always OnTrade) - ENUM! <code>EventData</code> <code>OnTadeEventData</code> <code>*OnTadeEventData</code> Trade event data (positions, orders, deals) <code>AccountInfo</code> <code>OnEventAccountInfo</code> <code>*OnEventAccountInfo</code> Account snapshot (balance, equity, etc.) <code>TerminalInstanceGuidId</code> <code>string</code> <code>string</code> Terminal instance ID"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Real-time stream of all trading operations.</li> <li>Why you need it. Monitor order execution, track trading activity, implement notifications.</li> <li>Event-driven. Notifies on order placement, modification, execution, cancellation.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Monitor all trading activity in real-time</li> <li>Track order placement, modification, and execution</li> <li>Implement trade notifications and alerts</li> <li>Log trading operations</li> <li>Build trading dashboards</li> <li>Detect order fills and rejections immediately</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OnTrade - How it works</p>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, streams run indefinitely until cancelled.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Channel buffering: Data channel is unbuffered, error channel is buffered (size 1).</li> <li>Goroutine required: You MUST consume the channels in a separate goroutine to avoid blocking.</li> <li>Context cancellation: Use <code>context.WithCancel()</code> or <code>context.WithTimeout()</code> to stop streaming.</li> <li>All events: Receives events for ALL trading operations (positions, orders, deals).</li> <li>Empty request: OnTradeRequest is an empty structure (no parameters needed).</li> <li>ENUM type: Always check the <code>Type</code> field (MT5_SUB_ENUM_EVENT_GROUP_TYPE) to identify event type.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#enums-used-in-ontrade","title":"\ud83e\uddf1 ENUMs used in OnTrade","text":""},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#output-enum","title":"Output ENUM","text":"ENUM Type Field Name Purpose Values <code>MT5_SUB_ENUM_EVENT_GROUP_TYPE</code> <code>Type</code> Indicates the event type <code>OnTrade</code> (1) - Trade event notification <p>Usage in code:</p> <pre><code>tradeStream, errChan := account.OnTrade(ctx, &amp;pb.OnTradeRequest{})\n\nfor event := range tradeStream {\n    // Check event type (always OnTrade for this stream)\n    switch event.Type {\n    case pb.MT5_SUB_ENUM_EVENT_GROUP_TYPE_OnTrade:\n        fmt.Println(\"Trade event received\")\n        // Process trade event data\n    }\n}\n</code></pre> <p>Note: The <code>Type</code> field will always be <code>OnTrade</code> for OnTrade stream. This ENUM is shared across all streaming methods (OnTrade, OnPositionProfit, OnTradeTransaction) to maintain consistent event identification.</p>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#1-basic-trade-event-monitoring","title":"1) Basic trade event monitoring","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnTrade(ctx, &amp;pb.OnTradeRequest{})\n\n    go func() {\n        for {\n            select {\n            case event := &lt;-dataChan:\n                if event == nil {\n                    return\n                }\n                fmt.Printf(\"[%s] Trade event received\\n\",\n                    time.Now().Format(\"15:04:05\"))\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Stream error: %v\\n\", err)\n                    return\n                }\n            }\n        }\n    }()\n\n    // Keep running\n    time.Sleep(60 * time.Second)\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#2-trade-notification-system","title":"2) Trade notification system","text":"<pre><code>func TradeNotificationSystem(account *mt5.MT5Account) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnTrade(ctx, &amp;pb.OnTradeRequest{})\n\n    go func() {\n        for {\n            select {\n            case event := &lt;-dataChan:\n                if event == nil {\n                    fmt.Println(\"Trade stream closed\")\n                    return\n                }\n\n                fmt.Printf(\"\\n\ud83d\udd14 Trade Event Notification\\n\")\n                fmt.Printf(\"  Time: %s\\n\", time.Now().Format(\"2006-01-02 15:04:05\"))\n                // Display event details based on event type\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"\u274c Stream error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                fmt.Println(\"Notification system stopped\")\n                return\n            }\n        }\n    }()\n\n    // Run indefinitely\n    select {}\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#3-trade-logger-with-file-output","title":"3) Trade logger with file output","text":"<pre><code>func TradeLogger(account *mt5.MT5Account, logFile string) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    file, err := os.OpenFile(logFile, os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)\n    if err != nil {\n        fmt.Printf(\"Failed to open log file: %v\\n\", err)\n        return\n    }\n    defer file.Close()\n\n    dataChan, errChan := account.OnTrade(ctx, &amp;pb.OnTradeRequest{})\n\n    go func() {\n        for {\n            select {\n            case event := &lt;-dataChan:\n                if event == nil {\n                    return\n                }\n\n                logEntry := fmt.Sprintf(\"[%s] Trade event\\n\",\n                    time.Now().Format(\"2006-01-02 15:04:05\"))\n                file.WriteString(logEntry)\n                fmt.Print(logEntry)\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                return\n            }\n        }\n    }()\n\n    // Run for extended period\n    time.Sleep(24 * time.Hour)\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#4-trade-event-counter","title":"4) Trade event counter","text":"<pre><code>type TradeEventStats struct {\n    TotalEvents int64\n    StartTime   time.Time\n}\n\nfunc CountTradeEvents(account *mt5.MT5Account, duration time.Duration) {\n    ctx, cancel := context.WithTimeout(context.Background(), duration)\n    defer cancel()\n\n    stats := &amp;TradeEventStats{\n        StartTime: time.Now(),\n    }\n\n    dataChan, errChan := account.OnTrade(ctx, &amp;pb.OnTradeRequest{})\n\n    for {\n        select {\n        case event := &lt;-dataChan:\n            if event == nil {\n                break\n            }\n            stats.TotalEvents++\n            fmt.Printf(\"\\r Trade events: %d\", stats.TotalEvents)\n\n        case err := &lt;-errChan:\n            if err != nil {\n                fmt.Printf(\"\\nError: %v\\n\", err)\n            }\n\n        case &lt;-ctx.Done():\n            elapsed := time.Since(stats.StartTime)\n            fmt.Printf(\"\\n\\nStatistics:\\n\")\n            fmt.Printf(\"  Duration: %v\\n\", elapsed)\n            fmt.Printf(\"  Total events: %d\\n\", stats.TotalEvents)\n            fmt.Printf(\"  Events/minute: %.2f\\n\",\n                float64(stats.TotalEvents)/(elapsed.Minutes()))\n            return\n        }\n    }\n}\n\n// Usage:\n// CountTradeEvents(account, 5*time.Minute)\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#5-real-time-trade-alert-system","title":"5) Real-time trade alert system","text":"<pre><code>func RealTimeTradeAlerts(account *mt5.MT5Account) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnTrade(ctx, &amp;pb.OnTradeRequest{})\n\n    go func() {\n        for {\n            select {\n            case event := &lt;-dataChan:\n                if event == nil {\n                    return\n                }\n\n                // Send alert (email, Telegram, etc)\n                fmt.Printf(\"\ud83d\udea8 TRADE ALERT: %s\\n\", time.Now().Format(\"15:04:05\"))\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Alert system error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                fmt.Println(\"Alert system shutdown\")\n                return\n            }\n        }\n    }()\n\n    // Keep running\n    select {}\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTrade/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OnTradeTransaction - Detailed transaction-level events</li> <li>OnPositionsAndPendingOrdersTickets - Stream ticket changes</li> <li>OpenedOrders - Get current positions</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/","title":"\u2705 Stream Detailed Trade Transactions","text":"<p>Request: subscribe to real-time notifications about all trading state changes. Receive detailed low-level events: order state changes, deal execution, position modifications.</p> <p>API Information:</p> <ul> <li>Low-level API: <code>MT5Account.OnTradeTransaction(...)</code> (from Go package <code>github.com/MetaRPC/GoMT5/package/Helpers</code>)</li> <li>gRPC service: <code>mt5_term_api.SubscriptionService</code></li> <li>Proto definition: <code>OnTradeTransaction</code> (defined in <code>mt5-term-api-subscription.proto</code>)</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.SubscriptionService</code></li> <li>Method: <code>OnTradeTransaction(OnTradeTransactionRequest) \u2192 stream OnTradeTransactionReply</code></li> <li>Low\u2011level client (generated): <code>SubscriptionServiceClient.OnTradeTransaction(ctx, request, opts...)</code></li> </ul> <pre><code>package mt5\n\ntype MT5Account struct {\n    // ...\n}\n\n// OnTradeTransaction streams detailed trade transaction events.\n// Returns two channels: data channel and error channel.\nfunc (a *MT5Account) OnTradeTransaction(\n    ctx context.Context,\n    req *pb.OnTradeTransactionRequest,\n) (&lt;-chan *pb.OnTradeTransactionData, &lt;-chan error)\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>ctx</code> <code>context.Context</code> Context for cancellation (cancel to stop stream) <code>req</code> <code>*pb.OnTradeTransactionRequest</code> Request (empty structure)"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#output-channels","title":"\u2b06\ufe0f Output \u2014 Channels","text":"Channel Type Description Data Channel <code>&lt;-chan *pb.OnTradeTransactionData</code> Receives transaction event updates Error Channel <code>&lt;-chan error</code> Receives errors (closed on ctx cancel) <p>OnTradeTransactionData structure:</p> Field Type Description <code>Type</code> <code>MT5_SUB_ENUM_EVENT_GROUP_TYPE</code> Event group type (always TradeTransaction) <code>TradeTransaction</code> <code>*MqlTradeTransaction</code> Transaction details (order, deal info) <code>TradeRequest</code> <code>*MqlTradeRequest</code> Original trade request (may be nil) <code>TradeResult</code> <code>*MqlTradeResult</code> Trade operation result (may be nil) <code>TerminalInstanceGuidId</code> <code>string</code> Terminal instance ID <code>AccountInfo</code> <code>*OnEventAccountInfo</code> Account information snapshot <p>MqlTradeTransaction - key fields:</p> Field Type Description <code>Type</code> <code>SUB_ENUM_TRADE_TRANSACTION_TYPE</code> Transaction type (order add/remove, deal add, etc.) <code>OrderType</code> <code>SUB_ENUM_ORDER_TYPE</code> Order type (BUY, SELL, BUY_LIMIT, etc.) <code>OrderState</code> <code>SUB_ENUM_ORDER_STATE</code> Order state (STARTED, PLACED, FILLED, etc.) <code>DealType</code> <code>SUB_ENUM_DEAL_TYPE</code> Deal type (BUY, SELL, BALANCE, etc.) <code>OrderTimeType</code> <code>SUB_ENUM_ORDER_TYPE_TIME</code> Order lifetime (GTC, DAY, SPECIFIED, etc.) <code>DealTicket</code> <code>uint64</code> Deal ticket number <code>OrderTicket</code> <code>uint64</code> Order ticket number <code>Symbol</code> <code>string</code> Trading symbol <code>Price</code> <code>float64</code> Transaction price <code>Volume</code> <code>float64</code> Transaction volume <code>PriceStopLoss</code> <code>float64</code> Stop Loss level <code>PriceTakeProfit</code> <code>float64</code> Take Profit level <p>MqlTradeRequest - key fields:</p> Field Type Description <code>TradeOperationType</code> <code>SUB_ENUM_TRADE_REQUEST_ACTIONS</code> Trade action (DEAL, PENDING, SLTP, etc.) <code>OrderType</code> <code>SUB_ENUM_ORDER_TYPE</code> Order type (BUY, SELL, BUY_LIMIT, etc.) <code>OrderTypeFilling</code> <code>SUB_ENUM_ORDER_TYPE_FILLING</code> Filling mode (FOK, IOC, RETURN, etc.) <code>TypeTime</code> <code>SUB_ENUM_ORDER_TYPE_TIME</code> Order lifetime (GTC, DAY, SPECIFIED, etc.) <code>Symbol</code> <code>string</code> Trade symbol <code>RequestedDealVolumeLots</code> <code>float64</code> Requested volume in lots <code>Price</code> <code>float64</code> Price <code>StopLoss</code> <code>float64</code> Stop Loss level <code>TakeProfit</code> <code>float64</code> Take Profit level <p>MqlTradeResult - key fields:</p> Field Type Description <code>TradeReturnCode</code> <code>MqlErrorTradeCode</code> Operation return code (DONE, REJECT, etc.) <code>DealTicket</code> <code>uint64</code> Deal ticket if executed <code>OrderTicket</code> <code>uint64</code> Order ticket if placed <code>DealVolume</code> <code>float64</code> Actual deal volume <code>DealPrice</code> <code>float64</code> Actual deal price <code>BrokerCommentToOperation</code> <code>string</code> Broker comment"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Low-level stream of all trading state changes and transactions.</li> <li>Why you need it. Detailed trade monitoring, audit trails, transaction logging.</li> <li>Most detailed. Provides finest-grained trading event information.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to:</p> <ul> <li>Monitor all trading transactions at low level</li> <li>Build complete trade audit trails</li> <li>Track order state changes in detail</li> <li>Implement transaction logging</li> <li>Detect deal execution immediately</li> <li>Analyze trading operations granularly</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#tutorial","title":"\ud83d\udcda Tutorial","text":"<p>For a detailed line-by-line explanation with examples, see: \u2192 OnTradeTransaction - How it works</p>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Automatic reconnection: All <code>MT5Account</code> methods have built-in protection against transient gRPC errors with automatic reconnection via <code>ExecuteWithReconnect</code>.</li> <li>Default timeout: If context has no deadline, streams run indefinitely until cancelled.</li> <li>Nil context: If you pass <code>nil</code> context, <code>context.Background()</code> is used automatically.</li> <li>Channel buffering: Data channel is unbuffered, error channel is buffered (size 1).</li> <li>Goroutine required: You MUST consume the channels in a separate goroutine to avoid blocking.</li> <li>Most detailed: Provides low-level transaction details.</li> <li>Empty request: OnTradeTransactionRequest is an empty structure.</li> <li>High frequency: Can generate many events during active trading.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#1-basic-transaction-monitoring-with-enum-checks","title":"1) Basic transaction monitoring with ENUM checks","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    account, _ := mt5.NewMT5Account(12345, \"password\", \"mt5.mrpc.pro:443\", uuid.New())\n    defer account.Close()\n\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnTradeTransaction(ctx, &amp;pb.OnTradeTransactionRequest{})\n\n    go func() {\n        for {\n            select {\n            case event := &lt;-dataChan:\n                if event == nil {\n                    return\n                }\n\n                // Check event type (MT5_SUB_ENUM_EVENT_GROUP_TYPE)\n                if event.Type == pb.MT5_SUB_ENUM_EVENT_GROUP_TYPE_TradeTransaction {\n                    if tx := event.TradeTransaction; tx != nil {\n                        // Check transaction type (SUB_ENUM_TRADE_TRANSACTION_TYPE)\n                        var txType string\n                        switch tx.Type {\n                        case pb.SUB_ENUM_TRADE_TRANSACTION_TYPE_SUB_TRADE_TRANSACTION_ORDER_ADD:\n                            txType = \"ORDER_ADD\"\n                        case pb.SUB_ENUM_TRADE_TRANSACTION_TYPE_SUB_TRADE_TRANSACTION_ORDER_UPDATE:\n                            txType = \"ORDER_UPDATE\"\n                        case pb.SUB_ENUM_TRADE_TRANSACTION_TYPE_SUB_TRADE_TRANSACTION_ORDER_DELETE:\n                            txType = \"ORDER_DELETE\"\n                        case pb.SUB_ENUM_TRADE_TRANSACTION_TYPE_SUB_TRADE_TRANSACTION_DEAL_ADD:\n                            txType = \"DEAL_ADD\"\n                        default:\n                            txType = fmt.Sprintf(\"OTHER(%d)\", tx.Type)\n                        }\n\n                        fmt.Printf(\"[%s] %s: Symbol=%s, Price=%.5f, Volume=%.2f\\n\",\n                            time.Now().Format(\"15:04:05\"),\n                            txType,\n                            tx.Symbol,\n                            tx.Price,\n                            tx.Volume)\n                    }\n                }\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n            }\n        }\n    }()\n\n    time.Sleep(60 * time.Second)\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#2-transaction-logger-with-file-output","title":"2) Transaction logger with file output","text":"<pre><code>func TransactionLogger(account *mt5.MT5Account, logFile string) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    file, err := os.OpenFile(logFile, os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)\n    if err != nil {\n        fmt.Printf(\"Failed to open log file: %v\\n\", err)\n        return\n    }\n    defer file.Close()\n\n    dataChan, errChan := account.OnTradeTransaction(ctx, &amp;pb.OnTradeTransactionRequest{})\n\n    go func() {\n        for {\n            select {\n            case event := &lt;-dataChan:\n                if event == nil {\n                    return\n                }\n\n                logEntry := fmt.Sprintf(\"[%s] Type=%d Order=%d Deal=%d Symbol=%s Price=%.5f Vol=%.2f\\n\",\n                    time.Now().Format(\"2006-01-02 15:04:05\"),\n                    event.Transaction.Type,\n                    event.Transaction.OrderTicket,\n                    event.Transaction.DealTicket,\n                    event.Transaction.Symbol,\n                    event.Transaction.Price,\n                    event.Transaction.Volume)\n\n                file.WriteString(logEntry)\n                fmt.Print(logEntry)\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                return\n            }\n        }\n    }()\n\n    select {}\n}\n\n// Usage:\n// TransactionLogger(account, \"transactions.log\")\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#3-deal-execution-notifier-with-enum-checks","title":"3) Deal execution notifier with ENUM checks","text":"<pre><code>func DealExecutionNotifier(account *mt5.MT5Account) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnTradeTransaction(ctx, &amp;pb.OnTradeTransactionRequest{})\n\n    go func() {\n        for {\n            select {\n            case event := &lt;-dataChan:\n                if event == nil {\n                    return\n                }\n\n                if tx := event.TradeTransaction; tx != nil {\n                    // Check if this is a deal execution (SUB_ENUM_TRADE_TRANSACTION_TYPE)\n                    if tx.Type == pb.SUB_ENUM_TRADE_TRANSACTION_TYPE_SUB_TRADE_TRANSACTION_DEAL_ADD {\n                        // Determine deal type (SUB_ENUM_DEAL_TYPE)\n                        var dealTypeStr string\n                        switch tx.DealType {\n                        case pb.SUB_ENUM_DEAL_TYPE_SUB_DEAL_TYPE_BUY:\n                            dealTypeStr = \"BUY\"\n                        case pb.SUB_ENUM_DEAL_TYPE_SUB_DEAL_TYPE_SELL:\n                            dealTypeStr = \"SELL\"\n                        case pb.SUB_ENUM_DEAL_TYPE_SUB_DEAL_TYPE_BALANCE:\n                            dealTypeStr = \"BALANCE\"\n                        case pb.SUB_ENUM_DEAL_TYPE_SUB_DEAL_TYPE_CREDIT:\n                            dealTypeStr = \"CREDIT\"\n                        default:\n                            dealTypeStr = fmt.Sprintf(\"OTHER(%d)\", tx.DealType)\n                        }\n\n                        // Determine order type (SUB_ENUM_ORDER_TYPE)\n                        var orderTypeStr string\n                        switch tx.OrderType {\n                        case pb.SUB_ENUM_ORDER_TYPE_SUB_ORDER_TYPE_BUY:\n                            orderTypeStr = \"BUY\"\n                        case pb.SUB_ENUM_ORDER_TYPE_SUB_ORDER_TYPE_SELL:\n                            orderTypeStr = \"SELL\"\n                        case pb.SUB_ENUM_ORDER_TYPE_SUB_ORDER_TYPE_BUY_LIMIT:\n                            orderTypeStr = \"BUY_LIMIT\"\n                        case pb.SUB_ENUM_ORDER_TYPE_SUB_ORDER_TYPE_SELL_LIMIT:\n                            orderTypeStr = \"SELL_LIMIT\"\n                        case pb.SUB_ENUM_ORDER_TYPE_SUB_ORDER_TYPE_BUY_STOP:\n                            orderTypeStr = \"BUY_STOP\"\n                        case pb.SUB_ENUM_ORDER_TYPE_SUB_ORDER_TYPE_SELL_STOP:\n                            orderTypeStr = \"SELL_STOP\"\n                        default:\n                            orderTypeStr = fmt.Sprintf(\"OTHER(%d)\", tx.OrderType)\n                        }\n\n                        fmt.Printf(\"\\n\ud83d\udcb0 DEAL EXECUTED\\n\")\n                        fmt.Printf(\"  Deal Type: %s\\n\", dealTypeStr)\n                        fmt.Printf(\"  Order Type: %s\\n\", orderTypeStr)\n                        fmt.Printf(\"  Deal: %d\\n\", tx.DealTicket)\n                        fmt.Printf(\"  Order: %d\\n\", tx.OrderTicket)\n                        fmt.Printf(\"  Symbol: %s\\n\", tx.Symbol)\n                        fmt.Printf(\"  Price: %.5f\\n\", tx.Price)\n                        fmt.Printf(\"  Volume: %.2f\\n\", tx.Volume)\n                        fmt.Printf(\"  Time: %s\\n\", time.Now().Format(\"2006-01-02 15:04:05\"))\n                    }\n                }\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                return\n            }\n        }\n    }()\n\n    select {}\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#4-transaction-statistics-tracker","title":"4) Transaction statistics tracker","text":"<pre><code>type TransactionStats struct {\n    TotalTransactions int64\n    DealCount         int64\n    OrderCount        int64\n    SymbolCounts      map[string]int64\n    StartTime         time.Time\n}\n\nfunc TrackTransactionStats(account *mt5.MT5Account, duration time.Duration) {\n    ctx, cancel := context.WithTimeout(context.Background(), duration)\n    defer cancel()\n\n    stats := &amp;TransactionStats{\n        SymbolCounts: make(map[string]int64),\n        StartTime:    time.Now(),\n    }\n\n    dataChan, errChan := account.OnTradeTransaction(ctx, &amp;pb.OnTradeTransactionRequest{})\n\n    for {\n        select {\n        case event := &lt;-dataChan:\n            if event == nil {\n                break\n            }\n\n            stats.TotalTransactions++\n\n            if event.Transaction.DealTicket &gt; 0 {\n                stats.DealCount++\n            }\n            if event.Transaction.OrderTicket &gt; 0 {\n                stats.OrderCount++\n            }\n\n            if event.Transaction.Symbol != \"\" {\n                stats.SymbolCounts[event.Transaction.Symbol]++\n            }\n\n        case err := &lt;-errChan:\n            if err != nil {\n                fmt.Printf(\"Error: %v\\n\", err)\n            }\n\n        case &lt;-ctx.Done():\n            elapsed := time.Since(stats.StartTime)\n\n            fmt.Println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n            fmt.Println(\"\u2551   Transaction Statistics Summary      \u2551\")\n            fmt.Println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\")\n            fmt.Printf(\"\u2551 Duration:        %-20v \u2551\\n\", elapsed.Round(time.Second))\n            fmt.Printf(\"\u2551 Total:           %-20d \u2551\\n\", stats.TotalTransactions)\n            fmt.Printf(\"\u2551 Deals:           %-20d \u2551\\n\", stats.DealCount)\n            fmt.Printf(\"\u2551 Orders:          %-20d \u2551\\n\", stats.OrderCount)\n            fmt.Println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\")\n            fmt.Println(\"\u2551 Activity by Symbol:                   \u2551\")\n\n            for symbol, count := range stats.SymbolCounts {\n                fmt.Printf(\"\u2551   %-10s   %-20d \u2551\\n\", symbol, count)\n            }\n\n            fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n            return\n        }\n    }\n}\n\n// Usage:\n// TrackTransactionStats(account, 10*time.Minute)\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#5-order-state-change-monitor-with-enums","title":"5) Order state change monitor with ENUMs","text":"<pre><code>func MonitorOrderStateChanges(account *mt5.MT5Account) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    dataChan, errChan := account.OnTradeTransaction(ctx, &amp;pb.OnTradeTransactionRequest{})\n\n    go func() {\n        for {\n            select {\n            case event := &lt;-dataChan:\n                if event == nil {\n                    return\n                }\n\n                if tx := event.TradeTransaction; tx != nil {\n                    if tx.OrderTicket &gt; 0 {\n                        // Check order state using ENUM (SUB_ENUM_ORDER_STATE)\n                        var stateName string\n                        switch tx.OrderState {\n                        case pb.SUB_ENUM_ORDER_STATE_SUB_ORDER_STATE_STARTED:\n                            stateName = \"STARTED\"\n                        case pb.SUB_ENUM_ORDER_STATE_SUB_ORDER_STATE_PLACED:\n                            stateName = \"PLACED\"\n                        case pb.SUB_ENUM_ORDER_STATE_SUB_ORDER_STATE_CANCELED:\n                            stateName = \"CANCELED\"\n                        case pb.SUB_ENUM_ORDER_STATE_SUB_ORDER_STATE_PARTIAL:\n                            stateName = \"PARTIAL\"\n                        case pb.SUB_ENUM_ORDER_STATE_SUB_ORDER_STATE_FILLED:\n                            stateName = \"FILLED\"\n                        case pb.SUB_ENUM_ORDER_STATE_SUB_ORDER_STATE_REJECTED:\n                            stateName = \"REJECTED\"\n                        case pb.SUB_ENUM_ORDER_STATE_SUB_ORDER_STATE_EXPIRED:\n                            stateName = \"EXPIRED\"\n                        case pb.SUB_ENUM_ORDER_STATE_SUB_ORDER_STATE_REQUEST_ADD:\n                            stateName = \"REQUEST_ADD\"\n                        case pb.SUB_ENUM_ORDER_STATE_SUB_ORDER_STATE_REQUEST_MODIFY:\n                            stateName = \"REQUEST_MODIFY\"\n                        case pb.SUB_ENUM_ORDER_STATE_SUB_ORDER_STATE_REQUEST_CANCEL:\n                            stateName = \"REQUEST_CANCEL\"\n                        default:\n                            stateName = fmt.Sprintf(\"UNKNOWN(%d)\", tx.OrderState)\n                        }\n\n                        // Check order time type (SUB_ENUM_ORDER_TYPE_TIME)\n                        var timeType string\n                        switch tx.OrderTimeType {\n                        case pb.SUB_ENUM_ORDER_TYPE_TIME_SUB_ORDER_TIME_GTC:\n                            timeType = \"GTC\"\n                        case pb.SUB_ENUM_ORDER_TYPE_TIME_SUB_ORDER_TIME_DAY:\n                            timeType = \"DAY\"\n                        case pb.SUB_ENUM_ORDER_TYPE_TIME_SUB_ORDER_TIME_SPECIFIED:\n                            timeType = \"SPECIFIED\"\n                        case pb.SUB_ENUM_ORDER_TYPE_TIME_SUB_ORDER_TIME_SPECIFIED_DAY:\n                            timeType = \"SPECIFIED_DAY\"\n                        default:\n                            timeType = fmt.Sprintf(\"UNKNOWN(%d)\", tx.OrderTimeType)\n                        }\n\n                        fmt.Printf(\"[%s] Order %d: State=%s, TimeType=%s\\n\",\n                            time.Now().Format(\"15:04:05\"),\n                            tx.OrderTicket,\n                            stateName,\n                            timeType)\n                    }\n                }\n\n            case err := &lt;-errChan:\n                if err != nil {\n                    fmt.Printf(\"Error: %v\\n\", err)\n                    return\n                }\n\n            case &lt;-ctx.Done():\n                return\n            }\n        }\n    }()\n\n    select {}\n}\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/OnTradeTransaction/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>OnTrade - Stream high-level trade events</li> <li>OnPositionsAndPendingOrdersTickets - Stream ticket changes</li> <li>OrderHistory - Get historical orders</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/","title":"MT5Account \u00b7 Streaming Methods - Overview","text":"<p>Real-time streams: ticks, trades, profit updates, transaction log. Use this page to choose the right API for real-time subscriptions.</p>"},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":""},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/#real-time-price-updates","title":"Real-Time Price Updates","text":"<ul> <li>OnSymbolTick - real-time tick stream for symbols.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/#trading-events","title":"Trading Events","text":"<ul> <li>OnTrade - position/order changes (opened, closed, modified).</li> <li>OnTradeTransaction - detailed transaction log (complete audit trail).</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/#position-monitoring","title":"Position Monitoring","text":"<ul> <li>OnPositionProfit - periodic profit/loss updates.</li> <li>OnPositionsAndPendingOrdersTickets - periodic ticket lists (lightweight).</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/#step-by-step-tutorials","title":"\ud83d\udcda Step-by-step tutorials","text":"<p>Note: Streaming methods are channel-based APIs. Check individual method pages for detailed examples of goroutine patterns and channel handling.</p> <ul> <li>OnSymbolTick - Detailed tick streaming examples</li> <li>OnTrade - Trade event monitoring patterns</li> <li>OnTradeTransaction - Transaction logging examples</li> <li>OnPositionProfit - P/L monitoring patterns</li> <li>OnPositionsAndPendingOrdersTickets - Ticket tracking examples</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>OnSymbolTick \u2192 stream live prices for symbols (bid, ask, volume updates).</li> <li>OnTrade \u2192 monitor trade events (position opened/closed/modified).</li> <li>OnTradeTransaction \u2192 detailed audit log of all trading operations.</li> <li>OnPositionProfit \u2192 periodic P/L updates for open positions.</li> <li>OnPositionsAndPendingOrdersTickets \u2192 periodic ticket lists (lightweight monitoring).</li> </ul> <p>Rule of thumb: need live prices \u2192 <code>OnSymbolTick</code>; need trade notifications \u2192 <code>OnTrade</code>; need detailed audit \u2192 <code>OnTradeTransaction</code>; need P/L monitoring \u2192 <code>OnPositionProfit</code>.</p>"},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns (stream) Key inputs Real-time price ticks <code>OnSymbolTick</code> Channel of MqlTick Symbol name Trade event notifications <code>OnTrade</code> Channel of TradeInfo (none) Detailed transaction audit log <code>OnTradeTransaction</code> Channel of TradeTransaction (none) Real-time profit/loss updates <code>OnPositionProfit</code> Channel of PositionProfit Symbol filter (optional) Real-time ticket list changes <code>OnPositionsAndPendingOrdersTickets</code> Channel of ticket arrays (none)"},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Streaming = Go channels - Methods return two channels: data channel and error channel.</li> <li>Context cancellation - Use context.WithCancel() or context.WithTimeout() to stop streams.</li> <li>Goroutine required - You MUST consume channels in goroutines to avoid blocking.</li> <li>OnSymbolTick - High frequency, can generate many updates per second.</li> <li>OnTrade - Triggered on every trade event (open, close, modify, delete).</li> <li>OnTradeTransaction - Most detailed, includes all transaction types and states.</li> <li>OnPositionProfit - Real-time updates triggered by price changes.</li> <li>Resource management - Always cancel context when done to close channels and stop streams.</li> <li>Error handling - Errors are sent through error channel, nil data indicates closed channel.</li> </ul>"},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Stream live ticks for EURUSD\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\ndataChan, errChan := account.OnSymbolTick(ctx, &amp;pb.OnSymbolTickRequest{\n    SymbolNames: []string{\"EURUSD\"},\n})\n\ngo func() {\n    for {\n        select {\n        case tick := &lt;-dataChan:\n            if tick == nil {\n                return\n            }\n            fmt.Printf(\"EURUSD: Bid=%.5f, Ask=%.5f\\n\", tick.Bid, tick.Ask)\n\n        case err := &lt;-errChan:\n            if err != nil {\n                log.Printf(\"Stream error: %v\\n\", err)\n                return\n            }\n        }\n    }\n}()\n\n// Keep running...\ntime.Sleep(30 * time.Second)\n</code></pre> <pre><code>// Monitor trade events\ndataChan, errChan := account.OnTrade(ctx, &amp;pb.OnTradeRequest{})\n\ngo func() {\n    for {\n        select {\n        case trade := &lt;-dataChan:\n            if trade == nil {\n                return\n            }\n            fmt.Printf(\"Trade event received\\n\")\n\n        case err := &lt;-errChan:\n            if err != nil {\n                return\n            }\n        }\n    }\n}()\n</code></pre> <pre><code>// Monitor position profit/loss\ndataChan, errChan := account.OnPositionProfit(ctx, &amp;pb.OnPositionProfitRequest{\n    Symbol: \"EURUSD\", // Or empty for all symbols\n})\n\ngo func() {\n    for {\n        select {\n        case profitData := &lt;-dataChan:\n            if profitData == nil {\n                return\n            }\n            fmt.Printf(\"#%d %s: $%.2f\\n\",\n                profitData.Ticket, profitData.Symbol, profitData.Profit)\n\n        case err := &lt;-errChan:\n            if err != nil {\n                return\n            }\n        }\n    }\n}()\n</code></pre> <pre><code>// Monitor position tickets\ndataChan, errChan := account.OnPositionsAndPendingOrdersTickets(\n    ctx,\n    &amp;pb.OnPositionsAndPendingOrdersTicketsRequest{},\n)\n\ngo func() {\n    for {\n        select {\n        case update := &lt;-dataChan:\n            if update == nil {\n                return\n            }\n            fmt.Printf(\"Open positions: %v\\n\", update.PositionTickets)\n            fmt.Printf(\"Pending orders: %v\\n\", update.PendingOrderTickets)\n\n        case err := &lt;-errChan:\n            if err != nil {\n                return\n            }\n        }\n    }\n}()\n</code></pre> <pre><code>// Detailed transaction log\ndataChan, errChan := account.OnTradeTransaction(ctx, &amp;pb.OnTradeTransactionRequest{})\n\ngo func() {\n    for {\n        select {\n        case transaction := &lt;-dataChan:\n            if transaction == nil {\n                return\n            }\n            fmt.Printf(\"Transaction event\\n\")\n\n        case err := &lt;-errChan:\n            if err != nil {\n                return\n            }\n        }\n    }\n}()\n</code></pre> <pre><code>// Multiple streams concurrently\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\n// Stream 1: Ticks\ntickData, tickErr := account.OnSymbolTick(ctx, &amp;pb.OnSymbolTickRequest{\n    SymbolNames: []string{\"EURUSD\"},\n})\n\ngo func() {\n    for {\n        select {\n        case tick := &lt;-tickData:\n            if tick == nil {\n                return\n            }\n            fmt.Printf(\"[TICK] EURUSD: %.5f\\n\", tick.Bid)\n\n        case err := &lt;-tickErr:\n            if err != nil {\n                return\n            }\n        }\n    }\n}()\n\n// Stream 2: Trades\ntradeData, tradeErr := account.OnTrade(ctx, &amp;pb.OnTradeRequest{})\n\ngo func() {\n    for {\n        select {\n        case trade := &lt;-tradeData:\n            if trade == nil {\n                return\n            }\n            fmt.Printf(\"[TRADE] Event received\\n\")\n\n        case err := &lt;-tradeErr:\n            if err != nil {\n                return\n            }\n        }\n    }\n}()\n\n// Let streams run for 30 seconds\ntime.Sleep(30 * time.Second)\ncancel() // Stop all streams\n</code></pre>"},{"location":"MT5Account/7.%20Streaming_Methods/Streaming_Methods.Overview/#see-also","title":"See also","text":"<ul> <li>Account info: AccountSummary - get current account state</li> <li>Positions: OpenedOrders - get current positions snapshot</li> <li>Symbol info: SymbolInfoTick - get current price snapshot</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoDouble_HOW/","title":"AccountInfoDouble HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoDouble_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":""},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoDouble_HOW/#overview","title":"Overview","text":"<p>This example demonstrates how to perform a low-level gRPC call to the MetaTrader gateway to retrieve one specific numeric account property (in this case \u2014 Balance). The AccountInfoDouble() method is used for targeted querying of float64 (floating-point number) data, without the need to request the entire AccountSummary().</p> <p>It is designed strictly for retrieving a single numeric account parameter, which is stored as float64 (floating-point number).</p> <p>That is \u2014 it performs no arrays, structures, strings, or actions.</p> <p>It simply extracts one field from the MetaTrader AccountInfo structure and returns it as a number.</p>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoDouble_HOW/#code-example","title":"\ud83e\udde9 Code Example","text":"<pre><code>fmt.Println(\"\\n3.2. AccountInfoDouble() - Get specific double property (example: Balance)\")\n\nbalanceReq := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE,\n}\nbalanceData, err := account.AccountInfoDouble(ctx, balanceReq)\nif err != nil {\n    helpers.PrintShortError(err, \"AccountInfoDouble(BALANCE) failed\")\n} else {\n    fmt.Printf(\"  Balance:                       %.2f\\n\", balanceData.GetRequestedValue())\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoDouble_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>fmt.Println(\"\\n3.2. AccountInfoDouble() - Get specific double property (example: Balance)\")\n</code></pre> <p>Prints the section header to the console. In this case, it shows an example call to retrieve the account balance.</p> <pre><code>balanceReq := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE,\n}\n</code></pre> <p>Creates a request for the gRPC method. The <code>PropertyId</code> parameter specifies which account property to retrieve. Here it's <code>ACCOUNT_BALANCE</code> \u2014 the account balance.</p> <p>\ud83d\udcd8 Similarly, you can request:</p> <ul> <li><code>ACCOUNT_EQUITY</code> \u2014 equity,</li> <li><code>ACCOUNT_MARGIN</code> \u2014 margin,</li> <li><code>ACCOUNT_PROFIT</code> \u2014 current profit,</li> <li><code>ACCOUNT_CREDIT</code> \u2014 credit, etc.</li> </ul> <pre><code>balanceData, err := account.AccountInfoDouble(ctx, balanceReq)\n</code></pre> <p>Executes a gRPC call to the MetaTrader server through the gateway.</p> <ul> <li><code>ctx</code> \u2014 context (usually with a timeout).</li> <li><code>balanceReq</code> \u2014 request structure.   Returns:</li> <li><code>balanceData</code> \u2014 result (protobuf structure),</li> <li><code>err</code> \u2014 error (if the request failed).</li> </ul> <pre><code>if err != nil {\n    helpers.PrintShortError(err, \"AccountInfoDouble(BALANCE) failed\")\n} else {\n    fmt.Printf(\"  Balance:                       %.2f\\n\", balanceData.GetRequestedValue())\n}\n</code></pre> <p>Checks for errors. If successful, prints the value received from the server. The <code>.GetRequestedValue()</code> method returns float64 \u2014 the actual numeric value of the property.</p>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoDouble_HOW/#available-properties-table-accountinfodoublepropertytype","title":"Available Properties Table (<code>AccountInfoDoublePropertyType</code>)","text":"Constant Description Value Type Use Case <code>ACCOUNT_BALANCE</code> Account balance float64 Check current balance <code>ACCOUNT_CREDIT</code> Credit float64 Track credit funds <code>ACCOUNT_PROFIT</code> Current profit/loss float64 PnL monitoring <code>ACCOUNT_EQUITY</code> Account equity float64 Calculate net funds <code>ACCOUNT_MARGIN</code> Used margin float64 Control account utilization <code>ACCOUNT_MARGIN_FREE</code> Free margin float64 Check if can open position <code>ACCOUNT_MARGIN_LEVEL</code> Margin level (%) float64 Risk monitoring <code>ACCOUNT_MARGIN_SO_CALL</code> Margin Call level float64 Warning threshold <code>ACCOUNT_MARGIN_SO_SO</code> Stop Out level float64 Forced closure threshold <code>ACCOUNT_MARGIN_INITIAL</code> Initial margin float64 Reserved funds <code>ACCOUNT_MARGIN_MAINTENANCE</code> Maintenance margin float64 Control minimum equity <code>ACCOUNT_ASSETS</code> Assets float64 Reporting <code>ACCOUNT_LIABILITIES</code> Liabilities float64 Financial analysis <code>ACCOUNT_COMMISSION_BLOCKED</code> Blocked commissions float64 Track available funds"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoDouble_HOW/#wrapper-example-for-property-requests","title":"Wrapper Example for Property Requests","text":"<pre><code>func GetAccountDoubleProp(ctx context.Context, account AccountServiceClient, prop pb.AccountInfoDoublePropertyType) (float64, error) {\n    req := &amp;pb.AccountInfoDoubleRequest{PropertyId: prop}\n    resp, err := account.AccountInfoDouble(ctx, req)\n    if err != nil {\n        return 0, err\n    }\n    return resp.GetRequestedValue(), nil\n}\n</code></pre> <p>\ud83d\udca1 Why use a wrapper: It allows you to shorten and simplify code when you need to frequently call <code>AccountInfoDouble()</code> with different parameters. Now you can simply call a short function:</p> <pre><code>balance, _ := GetAccountDoubleProp(ctx, account, pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE)\nequity, _  := GetAccountDoubleProp(ctx, account, pb.AccountInfoDoublePropertyType_ACCOUNT_EQUITY)\n</code></pre> <p>Such a wrapper makes code cleaner, more compact, and easier to reuse.</p>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoDouble_HOW/#summary","title":"Summary","text":"<ul> <li>The <code>AccountInfoDouble()</code> method is used for quickly retrieving a single double field from the account structure.</li> <li>This is a low-level getter that returns a pure value, without extra data.</li> <li> <p>Applied in:</p> </li> <li> <p>HFT gateways to minimize load,</p> </li> <li>bots and advisors for quick balance or equity checks,</li> <li>risk systems for margin and PnL control.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoInteger_HOW/","title":"AccountInfoInteger HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoInteger_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":""},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoInteger_HOW/#overview","title":"Overview","text":"<p>This example demonstrates the use of the AccountInfoInteger() method \u2014 a low-level gRPC call to retrieve one specific integer parameter of a MetaTrader account (for example, Leverage). The method is used when you need to request integer fields of an account: login, leverage, account type, trading mode, etc.</p> <p>It is designed strictly for retrieving a single integer-type parameter. It returns no structures, arrays, or strings \u2014 it simply extracts one field from AccountInfo and returns it as an integer.</p>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoInteger_HOW/#code-example","title":"\ud83e\udde9 Code Example","text":"<pre><code>fmt.Println(\"\\n3.3. AccountInfoInteger() - Get specific integer property (example: Leverage)\")\n\nleverageReq := &amp;pb.AccountInfoIntegerRequest{\n    PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_LEVERAGE,\n}\nleverageData, err := account.AccountInfoInteger(ctx, leverageReq)\nif err != nil {\n    helpers.PrintShortError(err, \"AccountInfoInteger(LEVERAGE) failed\")\n} else {\n    fmt.Printf(\"  Leverage: %d\\n\", leverageData.GetRequestedValue())\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoInteger_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>fmt.Println(\"\\n3.3. AccountInfoInteger() - Get specific integer property (example: Leverage)\")\n</code></pre> <p>Prints the section header. Demonstrates retrieving a specific integer property \u2014 <code>Leverage</code>.</p> <pre><code>leverageReq := &amp;pb.AccountInfoIntegerRequest{\n    PropertyId: pb.AccountInfoIntegerPropertyType_ACCOUNT_LEVERAGE,\n}\n</code></pre> <p>Creates an <code>AccountInfoIntegerRequest</code> structure. The <code>PropertyId</code> parameter specifies which property to request. In this case \u2014 <code>ACCOUNT_LEVERAGE</code> (leverage).</p> <pre><code>leverageData, err := account.AccountInfoInteger(ctx, leverageReq)\n</code></pre> <p>Executes a gRPC call to the MetaTrader server.</p> <ul> <li><code>ctx</code> \u2014 request context (with timeout).</li> <li><code>leverageReq</code> \u2014 request structure.   Returns the result (<code>leverageData</code>) and error (<code>err</code>).</li> </ul> <pre><code>if err != nil {\n    helpers.PrintShortError(err, \"AccountInfoInteger(LEVERAGE) failed\")\n} else {\n    fmt.Printf(\"  Leverage: %d\\n\", leverageData.GetRequestedValue())\n}\n</code></pre> <p>Checks for errors. If successful, extracts the result via <code>.GetRequestedValue()</code> and prints it to the console. The value is returned as an integer (<code>int32</code>).</p>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoInteger_HOW/#available-properties-table-accountinfointegerpropertytype","title":"Available Properties Table (<code>AccountInfoIntegerPropertyType</code>)","text":"Constant Description Type Use Case <code>ACCOUNT_LOGIN</code> Account login (account number) int64 Authorization and account identification <code>ACCOUNT_TRADE_MODE</code> Trading mode (<code>0=DEMO</code>, <code>1=CONTEST</code>, <code>2=REAL</code>) int32 Determine account type <code>ACCOUNT_LEVERAGE</code> Leverage (e.g., 100 = 1:100) int32 Margin calculation and risk management <code>ACCOUNT_LIMIT_ORDERS</code> Order limit (<code>0</code> = no restrictions) int32 Control allowed number of positions <code>ACCOUNT_MARGIN_SO_MODE</code> Stop Out calculation type (<code>0=percent</code>, <code>1=money</code>) int32 Determine Margin Call/Stop Out conditions <code>ACCOUNT_TRADE_ALLOWED</code> Is trading allowed (<code>1/0</code>) int32 Check ability to send orders <code>ACCOUNT_TRADE_EXPERT</code> Is Expert Advisor trading allowed (<code>1/0</code>) int32 Important for robots and gateways <code>ACCOUNT_MARGIN_MODE</code> Margin calculation mode (<code>0=Retail Netting</code>, <code>1=Exchange</code>, <code>2=Hedging</code>) int32 Defines position accounting in MT5 <code>ACCOUNT_CURRENCY_DIGITS</code> Number of decimal places in currency int32 Formatting and reporting <code>ACCOUNT_FIFO_CLOSE</code> Forced FIFO close (<code>1/0</code>) int32 Important for brokers with FIFO restrictions <code>ACCOUNT_HEDGE_ALLOWED</code> Is hedging allowed (<code>1/0</code>) int32 Check ability to open opposite positions"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoInteger_HOW/#wrapper-example-for-repeated-calls","title":"Wrapper Example for Repeated Calls","text":"<pre><code>func GetAccountIntegerProp(ctx context.Context, account AccountServiceClient, prop pb.AccountInfoIntegerPropertyType) (int64, error) {\n    req := &amp;pb.AccountInfoIntegerRequest{PropertyId: prop}\n    resp, err := account.AccountInfoInteger(ctx, req)\n    if err != nil {\n        return 0, err\n    }\n    return resp.GetRequestedValue(), nil\n}\n</code></pre> <p>\ud83d\udca1 Why use a wrapper: It simplifies code and makes calls shorter. Now you can quickly request different integer properties:</p> <pre><code>login, _ := GetAccountIntegerProp(ctx, account, pb.AccountInfoIntegerPropertyType_ACCOUNT_LOGIN)\nleverage, _ := GetAccountIntegerProp(ctx, account, pb.AccountInfoIntegerPropertyType_ACCOUNT_LEVERAGE)\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoInteger_HOW/#summary","title":"Summary","text":"<ul> <li>The <code>AccountInfoInteger()</code> method is used to retrieve integer parameters of an account.</li> <li>This is a low-level getter that returns a specific value, without extra data.</li> <li>Applied for checking account settings, leverage, trading permissions, and system properties.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoInteger_HOW/#practical-applications","title":"Practical Applications","text":"<ul> <li>Gateway diagnostics and connection check \u2014 retrieve login and trading mode.</li> <li>Algorithmic strategies \u2014 check <code>TradeAllowed</code> and <code>Leverage</code> before trading operations.</li> <li>Risk monitoring \u2014 control leverage, margin modes, and FIFO restrictions.</li> <li>Reporting and configuration control \u2014 collect system parameters for visual panels or APIs.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoString_HOW/","title":"AccountInfoString HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoString_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":""},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoString_HOW/#overview","title":"Overview","text":"<p>This example demonstrates the use of the <code>AccountInfoString()</code> method \u2014 a low-level gRPC call for retrieving a single specific string property of a MetaTrader account (for example, <code>Company</code>). The method is designed to work with string fields such as client name, brokerage company, account currency, or server.</p> <p>It is used to retrieve a single text parameter of the account without loading the entire summary information. No arrays, structures, or calculations \u2014 the method simply returns a string from <code>AccountInfo</code>.</p>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoString_HOW/#code-example","title":"\ud83e\udde9 Code Example","text":"<pre><code>fmt.Println(\"\\n3.4. AccountInfoString() - Get specific string property (example: Company)\")\n\ncompanyReq := &amp;pb.AccountInfoStringRequest{\n    PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_COMPANY,\n}\ncompanyData, err := account.AccountInfoString(ctx, companyReq)\nif err != nil {\n    helpers.PrintShortError(err, \"AccountInfoString(COMPANY) failed\")\n} else {\n    fmt.Printf(\"  Company:                  %s\\n\", companyData.GetRequestedValue())\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoString_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>fmt.Println(\"\\n3.4. AccountInfoString() - Get specific string property (example: Company)\")\n</code></pre> <p>Prints a section header indicating an example of retrieving a string property \u2014 in this case <code>Company</code> (the broker company name).</p> <pre><code>companyReq := &amp;pb.AccountInfoStringRequest{\n    PropertyId: pb.AccountInfoStringPropertyType_ACCOUNT_COMPANY,\n}\n</code></pre> <p>Creates an <code>AccountInfoStringRequest</code> structure, specifying the <code>PropertyId</code> \u2014 the identifier of the property to retrieve. Here it's <code>ACCOUNT_COMPANY</code>, meaning a request for the broker company name.</p> <pre><code>companyData, err := account.AccountInfoString(ctx, companyReq)\n</code></pre> <p>Executes a gRPC call to the MetaTrader server through the gateway.</p> <ul> <li><code>ctx</code> \u2014 request context (with timeout).</li> <li><code>companyReq</code> \u2014 request structure.   Returns the result (<code>companyData</code>) and error (<code>err</code>).</li> </ul> <pre><code>if err != nil {\n    helpers.PrintShortError(err, \"AccountInfoString(COMPANY) failed\")\n} else {\n    fmt.Printf(\"  Company:                  %s\\n\", companyData.GetRequestedValue())\n}\n</code></pre> <p>Checks for errors. If successful, the <code>.GetRequestedValue()</code> method returns a string with the property value, which is then printed to the console.</p> <p>Example output:</p> <pre><code>Company:                  MetaQuotes Software Corp.\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoString_HOW/#table-of-available-properties-accountinfostringpropertytype","title":"Table of Available Properties (<code>AccountInfoStringPropertyType</code>)","text":"Constant Description Example Value Use Case <code>ACCOUNT_NAME</code> Account owner's name <code>\"John Doe\"</code> Displaying client name in UI, logs, reports <code>ACCOUNT_SERVER</code> Trading server name <code>\"MetaQuotes-Demo\"</code> Verifying connection to the correct server <code>ACCOUNT_CURRENCY</code> Account currency <code>\"USD\"</code>, <code>\"EUR\"</code> Used for calculations and displaying financial data <code>ACCOUNT_COMPANY</code> Broker company name <code>\"MetaQuotes Software Corp.\"</code> For reporting and broker identification"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoString_HOW/#wrapper-example-for-simplified-calls","title":"Wrapper Example for Simplified Calls","text":"<pre><code>func GetAccountStringProp(ctx context.Context, account AccountServiceClient, prop pb.AccountInfoStringPropertyType) (string, error) {\n    req := &amp;pb.AccountInfoStringRequest{PropertyId: prop}\n    resp, err := account.AccountInfoString(ctx, req)\n    if err != nil {\n        return \"\", err\n    }\n    return resp.GetRequestedValue(), nil\n}\n</code></pre> <p>\ud83d\udca1 Why use a wrapper: It makes code compact and reusable. Now you can quickly retrieve different string properties:</p> <pre><code>name, _ := GetAccountStringProp(ctx, account, pb.AccountInfoStringPropertyType_ACCOUNT_NAME)\nserver, _ := GetAccountStringProp(ctx, account, pb.AccountInfoStringPropertyType_ACCOUNT_SERVER)\ncompany, _ := GetAccountStringProp(ctx, account, pb.AccountInfoStringPropertyType_ACCOUNT_COMPANY)\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoString_HOW/#summary","title":"Summary","text":"<ul> <li>The <code>AccountInfoString()</code> method is used to retrieve string account properties.</li> <li>This is a low-level text getter that returns a specific text field from <code>AccountInfo</code>.</li> <li>Applied in interfaces, reporting systems, and connection diagnostics.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountInfoString_HOW/#practical-applications","title":"Practical Applications","text":"<ul> <li>Monitoring and display \u2014 client name, server, broker, currency.</li> <li>Reporting \u2014 adding text parameters to account reports.</li> <li>Diagnostics \u2014 checking current broker and server.</li> <li>Verification \u2014 matching account name and currency with strategy settings or database.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountSummary_HOW/","title":"AccountSummary HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountSummary_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>This example demonstrates how a low-level gRPC call to a MetaTrader server is executed through a gateway. The code shows the process of retrieving summary information about a trading account using the AccountSummary() method. Below is a detailed breakdown of each line and an explanation of how such a call is constructed at the client-server interaction level.</p>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountSummary_HOW/#code-example","title":"\ud83e\udde9 Code Example","text":"<pre><code>fmt.Println(\"\\n3.1. AccountSummary() - Get all account data in one call\")\n\n    summaryReq := &amp;pb.AccountSummaryRequest{}\n    // Use timeout context to prevent hanging\n    summaryCtx, summaryCancel := context.WithTimeout(context.Background(), 10*time.Second)\n    defer summaryCancel()\n\n    summaryData, err := account.AccountSummary(summaryCtx, summaryReq)\n    helpers.Fatal(err, \"AccountSummary failed\")\n\n    fmt.Println(\"\\nAccount Summary (direct protobuf field access):\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"  Login:               %d\\n\", summaryData.AccountLogin)\n    fmt.Printf(\"  UserName:            %s\\n\", summaryData.AccountUserName)\n    fmt.Printf(\"  Company:             %s\\n\", summaryData.AccountCompanyName)\n    fmt.Printf(\"  Currency:            %s\\n\", summaryData.AccountCurrency)\n    fmt.Printf(\"  Balance:             %.2f\\n\", summaryData.AccountBalance)\n    fmt.Printf(\"  Equity:              %.2f\\n\", summaryData.AccountEquity)\n    fmt.Printf(\"  Credit:              %.2f\\n\", summaryData.AccountCredit)\n    fmt.Printf(\"  Leverage:            1:%d\\n\", summaryData.AccountLeverage)\n    fmt.Printf(\"  Trade Mode:          %v\\n\", summaryData.AccountTradeMode)\n\n    // ServerTime is a protobuf Timestamp - need to convert\n    if summaryData.ServerTime != nil {\n        serverTime := summaryData.ServerTime.AsTime()\n        fmt.Printf(\"  Server Time:         %s\\n\", serverTime.Format(\"2006-01-02 15:04:05\"))\n    }\n\n// UTC Timezone Shift: server time offset from UTC in minutes\n// For example: 120 minutes = UTC+2 (the server is 2 hours ahead of UTC)\n    fmt.Printf(\"  UTC Timezone Shift:  %d minutes (UTC%+.1f)\\n\",\n        summaryData.UtcTimezoneServerTimeShiftMinutes,\n        float64(summaryData.UtcTimezoneServerTimeShiftMinutes)/60.0)\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountSummary_HOW/#detailed-code-explanation-for-accountsummary-go","title":"\ud83d\udfe2 Detailed Code Explanation for AccountSummary() (Go)","text":"<pre><code>fmt.Println(\"\\n3.1. AccountSummary() - Get all account data in one call\")\n</code></pre> <p>Prints a header to the console. <code>\\n</code> \u2014 a newline character. Used to visually separate the output.</p> <pre><code>summaryReq := &amp;pb.AccountSummaryRequest{}\n</code></pre> <p>Creates an empty <code>AccountSummaryRequest</code> request. <code>pb</code> is a package generated from a <code>.proto</code> file (gRPC). The request is passed to <code>AccountSummary()</code> to retrieve the account summary.</p> <pre><code>// Use timeout context to prevent hanging\n</code></pre> <p>Comment: we create a context with a timeout so the program doesn't hang if the server doesn't respond.</p> <pre><code>summaryCtx, summaryCancel := context.WithTimeout(context.Background(), 10*time.Second)\n</code></pre> <p>Creates a context with an execution time limit \u2014 10 seconds. If the response doesn't arrive in time, the request will be interrupted.</p> <ul> <li><code>context.Background()</code> \u2014 base context.</li> <li><code>context.WithTimeout()</code> \u2014 adds a time limit.</li> <li><code>summaryCancel</code> \u2014 function to cancel the context.</li> </ul> <pre><code>defer summaryCancel()\n</code></pre> <p>Defers the call to <code>summaryCancel()</code> until the end of the function. This ensures resource cleanup.</p> <pre><code>summaryData, err := account.AccountSummary(summaryCtx, summaryReq)\n</code></pre> <p>Calls the <code>AccountSummary()</code> method on the <code>account</code> object.</p> <ul> <li><code>summaryCtx</code> \u2014 context with timeout.</li> <li><code>summaryReq</code> \u2014 request.   Returns:</li> <li><code>summaryData</code> \u2014 structure with the result (account information).</li> <li><code>err</code> \u2014 error if something went wrong.</li> </ul> <pre><code>helpers.Fatal(err, \"AccountSummary failed\")\n</code></pre> <p>Checks if an error occurred. If <code>err != nil</code>, then <code>helpers.Fatal()</code> will print a message and terminate the program.</p> <pre><code>fmt.Println(\"\\nAccount Summary (direct protobuf field access):\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n</code></pre> <p>Prints a header and separator before the data to make the output readable.</p> <pre><code>fmt.Printf(\"  Login:               %d\\n\", summaryData.AccountLogin)\n</code></pre> <p>Prints the account login. <code>%d</code> \u2014 format for integers.</p> <pre><code>fmt.Printf(\"  UserName:            %s\\n\", summaryData.AccountUserName)\nfmt.Printf(\"  Company:             %s\\n\", summaryData.AccountCompanyName)\nfmt.Printf(\"  Currency:            %s\\n\", summaryData.AccountCurrency)\n</code></pre> <p>Prints string fields (username, company, account currency). <code>%s</code> \u2014 format for strings.</p> <pre><code>fmt.Printf(\"  Balance:             %.2f\\n\", summaryData.AccountBalance)\nfmt.Printf(\"  Equity:              %.2f\\n\", summaryData.AccountEquity)\nfmt.Printf(\"  Credit:              %.2f\\n\", summaryData.AccountCredit)\n</code></pre> <p>Prints numeric data (balance, equity, credit). <code>%.2f</code> \u2014 number with two decimal places.</p> <pre><code>fmt.Printf(\"  Leverage:            1:%d\\n\", summaryData.AccountLeverage)\n</code></pre> <p>Prints the account leverage in the format <code>1:500</code>.</p> <pre><code>fmt.Printf(\"  Trade Mode:          %v\\n\", summaryData.AccountTradeMode)\n</code></pre> <p>Prints the trading mode (for example, real or demo account). <code>%v</code> \u2014 universal format.</p>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountSummary_HOW/#server-time-output-block","title":"\u23f1\ufe0f Server Time Output Block","text":"<p>In Go, the time format is not specified using symbols like YYYY or HH, but rather by an example of a specific date \u2014 <code>2006-01-02 15:04:05</code>. These numbers are not chosen randomly: they represent the order of date and time elements, where:</p> <ul> <li>2006 \u2192 year,</li> <li>01 \u2192 month,</li> <li>02 \u2192 day,</li> <li>15 \u2192 hour (in 24-hour format),</li> <li>04 \u2192 minutes,</li> <li>05 \u2192 seconds.</li> </ul> <p>Therefore, to output date and time in the desired format, you always specify exactly this template with actual numbers.</p> <pre><code>// ServerTime is a protobuf Timestamp - need to convert\nif summaryData.ServerTime != nil {\n    serverTime := summaryData.ServerTime.AsTime()\n    fmt.Printf(\"  Server Time:         %s\\n\", serverTime.Format(\"2006-01-02 15:04:05\"))\n}\n\n// UTC Timezone Shift: server time offset from UTC in minutes\n// For example: 120 minutes = UTC+2 (the server is 2 hours ahead of UTC)\nfmt.Printf(\"  UTC Timezone Shift:  %d minutes (UTC%+.1f)\\n\",\n    summaryData.UtcTimezoneServerTimeShiftMinutes,\n    float64(summaryData.UtcTimezoneServerTimeShiftMinutes)/60.0)\n</code></pre> <p>What this block does:</p> <ol> <li>Checks that the time from the server (<code>ServerTime</code>) is present.</li> <li>Converts protobuf time to the <code>time.Time</code> type via the <code>.AsTime()</code> method.</li> <li>Formats the date and time in a human-readable form: <code>YYYY-MM-DD HH:MM:SS</code>.</li> <li>Prints the server time offset from UTC both in minutes and hours (for example, <code>120 minutes (UTC+2.0)</code>).</li> </ol> <p>Why this is important:</p> <ul> <li>In trading systems, it's crucial to know the exact server time for synchronizing quotes, trades, and reports.</li> <li>The MetaTrader server may be located in a different timezone, and this affects candlestick calculations, order opening times, and reporting.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountSummary_HOW/#summary","title":"Summary:","text":"<ol> <li>A request and context with timeout are created.</li> <li>The <code>AccountSummary()</code> method is called via RPC.</li> <li>Errors are checked.</li> <li>If successful \u2014 account data is printed.</li> <li>At the bottom, server time and UTC offset are additionally displayed.</li> </ol>"},{"location":"MT5Account/HOW_IT_WORK/1.%20Account_information_HOW/AccountSummary_HOW/#applications","title":"Applications:","text":"<ul> <li>Testing the MetaTrader gateway API.</li> <li>Retrieving real-time account information.</li> <li>Use within algorithmic systems for account state monitoring and time synchronization.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/","title":"SymbolExist HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolExist()</code> method is used to check whether a specific trading instrument (symbol) exists on the MetaTrader server. This is an important step before any actions with symbols \u2014 requesting information, subscribing to quotes, or trading operations.</p> <p>It also reports whether the symbol is custom \u2014 created manually, rather than provided by the broker.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n4.2. SymbolExist() - Check if symbol exists\")\n\nexistReq := &amp;pb.SymbolExistRequest{\n    Name: cfg.TestSymbol, // Direct protobuf field: Name (not Symbol)\n}\nexistData, err := account.SymbolExist(ctx, existReq)\nif !helpers.PrintShortError(err, fmt.Sprintf(\"SymbolExist(%s) failed\", cfg.TestSymbol)) {\n    fmt.Printf(\"  Symbol '%s' exists:      %v\\n\", cfg.TestSymbol, existData.Exists)\n    fmt.Printf(\"  Is custom symbol:         %v\\n\", existData.IsCustom)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#creating-the-request","title":"\ud83d\udd39 Creating the request","text":"<pre><code>existReq := &amp;pb.SymbolExistRequest{\n    Name: cfg.TestSymbol,\n}\n</code></pre> <p>Creates a <code>SymbolExistRequest</code> request structure with the name of the symbol to check. Usually the value is taken from configuration (e.g., <code>\"EURUSD\"</code> from <code>appsettings.json</code>).</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#method-call","title":"\ud83d\udd39 Method call","text":"<pre><code>existData, err := account.SymbolExist(ctx, existReq)\n</code></pre> <p>Executes a gRPC call to the MetaTrader server.</p> <ul> <li><code>ctx</code> \u2014 context (with or without timeout).</li> <li><code>existReq</code> \u2014 request structure.   Returns <code>existData</code> (protobuf response) and <code>err</code> \u2014 error if something went wrong.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#checking-the-result","title":"\ud83d\udd39 Checking the result","text":"<pre><code>if !helpers.PrintShortError(err, fmt.Sprintf(\"SymbolExist(%s) failed\", cfg.TestSymbol)) {\n    fmt.Printf(\"  Symbol '%s' exists:      %v\\n\", cfg.TestSymbol, existData.Exists)\n    fmt.Printf(\"  Is custom symbol:         %v\\n\", existData.IsCustom)\n}\n</code></pre> <p>If there is no error, two fields are printed:</p> <ul> <li><code>existData.Exists</code> \u2014 true/false, shows whether the symbol was found on the server;</li> <li><code>existData.IsCustom</code> \u2014 true/false, shows whether the symbol is custom.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#example-output","title":"Example output","text":"<pre><code>4.2. SymbolExist() - Check if symbol exists\n  Symbol 'EURUSD' exists:      true\n  Is custom symbol:            false\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#what-the-server-returns","title":"What the server returns","text":"<pre><code>message SymbolExistData {\n  bool Exists = 1;     // true = symbol found\n  bool IsCustom = 2;   // true = custom symbol\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#practical-application-example","title":"Practical application example","text":"<pre><code>symbol := \"BTCUSD\"\nreq := &amp;pb.SymbolExistRequest{Name: symbol}\nresp, err := account.SymbolExist(ctx, req)\nif err != nil {\n    log.Fatalf(\"Check failed: %v\", err)\n}\n\nif !resp.Exists {\n    log.Fatalf(\"Symbol %s not found on server\", symbol)\n}\n\nif resp.IsCustom {\n    fmt.Printf(\"%s is a custom (user-defined) symbol\\n\", symbol)\n} else {\n    fmt.Printf(\"%s is a standard market symbol\\n\", symbol)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#what-is-a-custom-symbol","title":"\u2699\ufe0f What is a Custom Symbol","text":"<p>Custom symbol \u2014 is an instrument created manually by the user, rather than provided by the broker. For example:</p> <ul> <li><code>EURUSD</code> \u2192 standard broker symbol;</li> <li><code>EURUSD.test</code> \u2192 custom symbol.</li> </ul> <p>Custom symbols are used for:</p> <ul> <li>quote simulation,</li> <li>strategy testing,</li> <li>manually loading custom data.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#practical-use-in-gateway","title":"\ud83d\udca1 Practical use in gateway","text":"Goal Method Check symbol existence <code>SymbolExist()</code> Activate symbol (add to Market Watch) <code>SymbolSelect(Symbol, true)</code> Get symbol information <code>SymbolInfo()</code> Subscribe to quotes <code>TicksSubscribe()</code> or <code>SymbolSubscribe()</code>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolExist_HOW/#in-simple-terms","title":"\ud83d\udcac In simple terms","text":"<p><code>SymbolExist()</code> is a check: \"Is there a symbol with this name on the MetaTrader server?\" It returns two answers: does the symbol exist and what type is it \u2014 standard or custom.</p> <p>Used at gateway startup, before trading or informational calls, to make sure the specified symbol is actually available on the server.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/","title":"SymbolInfoDouble HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolInfoDouble()</code> method is used to get a single numeric property of a symbol. It requests a specific parameter specified in the <code>Type</code> field and returns its value in <code>Value</code>.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/#1-getting-current-bid-price","title":"1\ufe0f\u20e3 Getting current Bid price","text":"<pre><code>bidReq := &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_BID, // Current Bid price\n}\nbidData, err := account.SymbolInfoDouble(ctx, bidReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoDouble(BID) failed\")\n} else {\n    fmt.Printf(\"  Bid price (SYMBOL_BID):        %.5f\\n\", bidData.Value)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>bidReq := &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_BID,\n}\n</code></pre> <p>Creates a <code>SymbolInfoDoubleRequest</code> request with two fields:</p> <ul> <li><code>Symbol</code> \u2014 instrument name, e.g. <code>EURUSD</code>, taken from <code>appsettings.json</code> \u2192 <code>test_symbol</code>.</li> <li><code>Type</code> \u2014 parameter type we want to get. In this case it's <code>SYMBOL_BID</code> \u2014 current Bid price.</li> </ul> <pre><code>bidData, err := account.SymbolInfoDouble(ctx, bidReq)\n</code></pre> <p>Calls the <code>SymbolInfoDouble()</code> method via gRPC.</p> <ul> <li><code>ctx</code> \u2014 execution context (manages timeout, cancellation, etc.);</li> <li><code>bidReq</code> \u2014 prepared request;</li> <li><code>bidData</code> \u2014 server response with the <code>Value</code> field where the required number is stored.</li> </ul> <pre><code>if err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoDouble(BID) failed\")\n} else {\n    fmt.Printf(\"  Bid price (SYMBOL_BID): %.5f\\n\", bidData.Value)\n}\n</code></pre> <p>Checks for errors. If everything is successful \u2014 prints the value <code>bidData.Value</code>. Format <code>%.5f</code> outputs the number with 5 decimal places, as is customary for quotes.</p> <p>Example result:</p> <pre><code>Bid price (SYMBOL_BID): 1.08540\n</code></pre> <p>\ud83d\udcd8 SYMBOL_BID \u2014 is the current bid price (Bid). It shows at what price you can sell the instrument at the moment.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/#2-getting-current-ask-price","title":"2\ufe0f\u20e3 Getting current Ask price","text":"<pre><code>askReq := &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_ASK, // Current Ask price\n}\naskData, err := account.SymbolInfoDouble(ctx, askReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoDouble(ASK) failed\")\n} else {\n    fmt.Printf(\"  Ask price (SYMBOL_ASK):        %.5f\\n\", askData.Value)\n}\n</code></pre> <p>\ud83d\udcd8 SYMBOL_ASK \u2014 current ask price (Ask). Shows at what price you can buy the instrument. Together with Bid, it forms the spread \u2014 the difference between buy and sell prices.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/#3-getting-point-size-point","title":"3\ufe0f\u20e3 Getting point size (Point)","text":"<pre><code>pointReq := &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_POINT, // Point size\n}\npointData, err := account.SymbolInfoDouble(ctx, pointReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoDouble(POINT) failed\")\n} else {\n    fmt.Printf(\"  Point size (SYMBOL_POINT):     %.5f\\n\", pointData.Value)\n}\n</code></pre> <p>\ud83d\udcd8 SYMBOL_POINT \u2014 minimum possible price change of the instrument (tick size). For currency pairs, this value determines quote precision. Examples: <code>0.00001</code> for EURUSD, <code>0.001</code> for USDJPY.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/#4-getting-minimum-trade-volume","title":"4\ufe0f\u20e3 Getting minimum trade volume","text":"<pre><code>volumeMinReq := &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_VOLUME_MIN, // Minimum volume for trading\n}\nvolumeMinData, err := account.SymbolInfoDouble(ctx, volumeMinReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoDouble(VOLUME_MIN) failed\")\n} else {\n    fmt.Printf(\"  Min volume (VOLUME_MIN):       %.2f\\n\", volumeMinData.Value)\n}\n</code></pre> <p>\ud83d\udcd8 SYMBOL_VOLUME_MIN \u2014 minimum allowed trading volume in lots. This parameter is set by the broker and determines whether trading is possible, for example, from <code>0.01</code> lot.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the server returns","text":"<p>After each <code>SymbolInfoDouble()</code> call, the gateway returns a simple protobuf structure with one field:</p> <pre><code>message SymbolInfoDoubleData {\n  double Value = 1; // Value of the requested property\n}\n</code></pre> <p>The <code>Value</code> field contains the numeric value of the parameter specified in the request (<code>Type</code>). Usually this is a quote, price step, volume, or other market indicator.</p> <p>Below is a list of the most commonly used properties that can be requested via <code>SymbolInfoDouble()</code>:</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/#all-propertyid-enum-values-symbolinfodoubleproperty","title":"\ud83d\udcd8 All PropertyId enum values (SymbolInfoDoubleProperty)","text":"Constant Value Description <code>SYMBOL_BID</code> 0 Current Bid price <code>SYMBOL_BIDHIGH</code> 1 Highest Bid of the day <code>SYMBOL_BIDLOW</code> 2 Lowest Bid of the day <code>SYMBOL_ASK</code> 3 Current Ask price <code>SYMBOL_ASKHIGH</code> 4 Highest Ask of the day <code>SYMBOL_ASKLOW</code> 5 Lowest Ask of the day <code>SYMBOL_LAST</code> 6 Last deal price <code>SYMBOL_LASTHIGH</code> 7 Highest Last price of the day <code>SYMBOL_LASTLOW</code> 8 Lowest Last price of the day <code>SYMBOL_VOLUME_REAL</code> 9 Last deal volume <code>SYMBOL_VOLUMEHIGH_REAL</code> 10 Maximum volume of the day <code>SYMBOL_VOLUMELOW_REAL</code> 11 Minimum volume of the day <code>SYMBOL_OPTION_STRIKE</code> 12 Option strike price <code>SYMBOL_POINT</code> 13 Point size (smallest price change) <code>SYMBOL_TRADE_TICK_VALUE</code> 14 Tick value in account currency <code>SYMBOL_TRADE_TICK_VALUE_PROFIT</code> 15 Tick value for profit position <code>SYMBOL_TRADE_TICK_VALUE_LOSS</code> 16 Tick value for loss position <code>SYMBOL_TRADE_TICK_SIZE</code> 17 Minimum price change <code>SYMBOL_TRADE_CONTRACT_SIZE</code> 18 Contract size (lot size in base currency) <code>SYMBOL_TRADE_ACCRUED_INTEREST</code> 19 Accrued interest <code>SYMBOL_TRADE_FACE_VALUE</code> 20 Face value (for bonds) <code>SYMBOL_TRADE_LIQUIDITY_RATE</code> 21 Liquidity rate <code>SYMBOL_VOLUME_MIN</code> 22 Minimum volume for trading <code>SYMBOL_VOLUME_MAX</code> 23 Maximum volume for trading <code>SYMBOL_VOLUME_STEP</code> 24 Volume step (lot size increment) <code>SYMBOL_VOLUME_LIMIT</code> 25 Maximum total volume of open positions <code>SYMBOL_SWAP_LONG</code> 26 Swap for long positions <code>SYMBOL_SWAP_SHORT</code> 27 Swap for short positions <code>SYMBOL_SWAP_SUNDAY</code> 28 Triple swap day - Sunday <code>SYMBOL_SWAP_MONDAY</code> 29 Triple swap day - Monday <code>SYMBOL_SWAP_TUESDAY</code> 30 Triple swap day - Tuesday <code>SYMBOL_SWAP_WEDNESDAY</code> 31 Triple swap day - Wednesday <code>SYMBOL_SWAP_THURSDAY</code> 32 Triple swap day - Thursday <code>SYMBOL_SWAP_FRIDAY</code> 33 Triple swap day - Friday <code>SYMBOL_SWAP_SATURDAY</code> 34 Triple swap day - Saturday <code>SYMBOL_MARGIN_INITIAL</code> 35 Initial margin <code>SYMBOL_MARGIN_MAINTENANCE</code> 36 Maintenance margin <code>SYMBOL_SESSION_VOLUME</code> 37 Summary volume of the current session <code>SYMBOL_SESSION_TURNOVER</code> 38 Summary turnover of the current session <code>SYMBOL_SESSION_INTEREST</code> 39 Summary open interest <code>SYMBOL_SESSION_BUY_ORDERS_VOLUME</code> 40 Current volume of Buy orders <code>SYMBOL_SESSION_SELL_ORDERS_VOLUME</code> 41 Current volume of Sell orders <code>SYMBOL_SESSION_OPEN</code> 42 Open price of the current session <code>SYMBOL_SESSION_CLOSE</code> 43 Close price of the current session <code>SYMBOL_SESSION_AW</code> 44 Average weighted price of the current session <code>SYMBOL_SESSION_PRICE_SETTLEMENT</code> 45 Settlement price of the current session <code>SYMBOL_SESSION_PRICE_LIMIT_MIN</code> 46 Minimum price of the current session <code>SYMBOL_SESSION_PRICE_LIMIT_MAX</code> 47 Maximum price of the current session <code>SYMBOL_MARGIN_HEDGED</code> 48 Hedged margin <code>SYMBOL_PRICE_CHANGE</code> 49 Change of price in % <code>SYMBOL_PRICE_VOLATILITY</code> 50 Price volatility in % <code>SYMBOL_PRICE_THEORETICAL</code> 51 Theoretical option price <code>SYMBOL_PRICE_DELTA</code> 52 Option/warrant delta <code>SYMBOL_PRICE_THETA</code> 53 Option/warrant theta <code>SYMBOL_PRICE_GAMMA</code> 54 Option/warrant gamma <code>SYMBOL_PRICE_VEGA</code> 55 Option/warrant vega <code>SYMBOL_PRICE_RHO</code> 56 Option/warrant rho <code>SYMBOL_PRICE_OMEGA</code> 57 Option/warrant omega <code>SYMBOL_PRICE_SENSITIVITY</code> 58 Option/warrant sensitivity <code>SYMBOL_COUNT</code> 59 Total number of properties (not used)"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/#what-its-used-for","title":"\ud83e\udde0 What it's used for","text":"<p>The <code>SymbolInfoDouble()</code> method is used:</p> <ul> <li>to read market parameters without needing to request the entire <code>SymbolInfo</code> object;</li> <li>in algorithms and strategies where you need to work with specific numeric values \u2014 for example, spread, price step, or tick value;</li> <li>for validating trading conditions before an operation \u2014 check that volume is not less than <code>VolumeMin</code>, and the step matches <code>VolumeStep</code>;</li> <li>for logging and demo examples, when you need to output individual symbol parameters to the console.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoDouble_HOW/#in-simple-terms","title":"\ud83d\udcac In simple terms","text":"<p><code>SymbolInfoDouble()</code> allows you to quickly get any numeric property of a symbol. Each request returns one value \u2014 Bid, Ask, Point, volume, etc. It's a lightweight and fast call, often used when working with code to read instrument parameters.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoInteger_HOW/","title":"SymbolInfoInteger HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoInteger_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolInfoInteger()</code> method is used to get integer properties of a symbol \u2014 parameters that describe market or trading characteristics of the instrument and are expressed in <code>int32</code> format.</p> <p>It works similarly to <code>SymbolInfoDouble()</code>, but returns integers: number of decimal places, current spread, trading restrictions, etc.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoInteger_HOW/#1-getting-number-of-decimal-places-digits","title":"1\ufe0f\u20e3 Getting number of decimal places (Digits)","text":"<pre><code>digitsReq := &amp;pb.SymbolInfoIntegerRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoIntegerProperty_SYMBOL_DIGITS, // Number of decimal places\n}\ndigitsData, err := account.SymbolInfoInteger(ctx, digitsReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoInteger(DIGITS) failed\")\n} else {\n    fmt.Printf(\"  Digits (SYMBOL_DIGITS):        %d\\n\", digitsData.Value)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoInteger_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>digitsReq := &amp;pb.SymbolInfoIntegerRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoIntegerProperty_SYMBOL_DIGITS,\n}\n</code></pre> <p>Creates a <code>SymbolInfoIntegerRequest</code> request with two main fields:</p> <ul> <li><code>Symbol</code> \u2014 instrument name, e.g. <code>EURUSD</code> (taken from the <code>appsettings.json</code> file, field <code>test_symbol</code>);</li> <li><code>Type</code> \u2014 property type to get. In this case it's <code>SYMBOL_DIGITS</code> \u2014 number of decimal places in the quote.</li> </ul> <pre><code>digitsData, err := account.SymbolInfoInteger(ctx, digitsReq)\n</code></pre> <p>Calls the <code>SymbolInfoInteger()</code> method via gRPC.</p> <ul> <li><code>ctx</code> \u2014 request context (manages execution time);</li> <li><code>digitsReq</code> \u2014 request structure;</li> <li><code>digitsData</code> \u2014 response containing the <code>Value</code> field (integer).</li> </ul> <pre><code>if err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoInteger(DIGITS) failed\")\n} else {\n    fmt.Printf(\"  Digits (SYMBOL_DIGITS):        %d\\n\", digitsData.Value)\n}\n</code></pre> <p>If there's no error, the number of decimal places (<code>Value</code>) is printed. This value determines the precision with which prices are displayed:</p> <ul> <li>5 for EURUSD (1.08540)</li> <li>3 for USDJPY (145.123)</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoInteger_HOW/#2-getting-current-spread-spread","title":"2\ufe0f\u20e3 Getting current spread (Spread)","text":"<pre><code>spreadReq := &amp;pb.SymbolInfoIntegerRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoIntegerProperty_SYMBOL_SPREAD,\n}\nspreadData, err := account.SymbolInfoInteger(ctx, spreadReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoInteger(SPREAD) failed\")\n} else {\n    fmt.Printf(\"  Spread (SYMBOL_SPREAD):        %d points\\n\", spreadData.Value)\n}\n</code></pre> <p>\ud83d\udcd8 SYMBOL_SPREAD \u2014 current spread expressed in points. It shows the difference between <code>Ask</code> and <code>Bid</code> prices. For example, if <code>Bid = 1.08540</code>, <code>Ask = 1.08560</code>, and point size is <code>0.00001</code>, then the spread equals 20 points.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoInteger_HOW/#3-getting-stops-level-stops-level","title":"3\ufe0f\u20e3 Getting stops level (Stops Level)","text":"<pre><code>stopsLevelReq := &amp;pb.SymbolInfoIntegerRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoIntegerProperty_SYMBOL_TRADE_STOPS_LEVEL,\n}\nstopsLevelData, err := account.SymbolInfoInteger(ctx, stopsLevelReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoInteger(STOPS_LEVEL) failed\")\n} else {\n    fmt.Printf(\"  Stops level (STOPS_LEVEL):     %d points\\n\", stopsLevelData.Value)\n}\n</code></pre> <p>\ud83d\udcd8 SYMBOL_TRADE_STOPS_LEVEL \u2014 minimum distance (in points) at which orders of type <code>Stop Loss</code> or <code>Take Profit</code> can be placed from the current price. For example, if <code>Stops Level = 10</code> and price is 1.08540 \u2014 stops cannot be set closer than 10 points.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoInteger_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the server returns","text":"<p>After each <code>SymbolInfoInteger()</code> call, the gateway returns a protobuf structure:</p> <pre><code>message SymbolInfoIntegerData {\n  int64 Value = 1; // Integer value of the property\n}\n</code></pre> <p>The <code>Value</code> field contains the numeric value of the selected parameter (<code>Type</code>).</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoInteger_HOW/#all-propertyid-enum-values-symbolinfointegerproperty","title":"\ud83d\udcd8 All PropertyId enum values (SymbolInfoIntegerProperty)","text":"Constant Value Description <code>SYMBOL_SUBSCRIPTION_DELAY</code> 0 Subscription delay in milliseconds <code>SYMBOL_SECTOR</code> 1 Economic sector (enum SYMBOL_SECTOR) <code>SYMBOL_INDUSTRY</code> 2 Industry (enum SYMBOL_INDUSTRY) <code>SYMBOL_CUSTOM</code> 3 Custom symbol flag (0=standard, 1=custom) <code>SYMBOL_BACKGROUND_COLOR</code> 4 Background color in Market Watch <code>SYMBOL_CHART_MODE</code> 5 Price chart mode (SYMBOL_CHART_MODE enum) <code>SYMBOL_EXIST</code> 6 Symbol exists (0=no, 1=yes) <code>SYMBOL_SELECT</code> 7 Symbol selected in Market Watch (0=no, 1=yes) <code>SYMBOL_VISIBLE</code> 8 Symbol visible in Market Watch (0=no, 1=yes) <code>SYMBOL_SESSION_DEALS</code> 9 Number of deals in current session <code>SYMBOL_SESSION_BUY_ORDERS</code> 10 Number of Buy orders in current session <code>SYMBOL_SESSION_SELL_ORDERS</code> 11 Number of Sell orders in current session <code>SYMBOL_VOLUME</code> 12 Last deal volume <code>SYMBOL_VOLUMEHIGH</code> 13 Maximum volume of the day <code>SYMBOL_VOLUMELOW</code> 14 Minimum volume of the day <code>SYMBOL_TIME</code> 15 Last quote time (seconds since 1970.01.01) <code>SYMBOL_TIME_MSC</code> 16 Last quote time in milliseconds <code>SYMBOL_DIGITS</code> 17 Number of decimal places <code>SYMBOL_SPREAD_FLOAT</code> 18 Floating spread flag (0=fixed, 1=floating) <code>SYMBOL_SPREAD</code> 19 Current spread in points <code>SYMBOL_TICKS_BOOKDEPTH</code> 20 Maximum depth of market (DOM) <code>SYMBOL_TRADE_CALC_MODE</code> 21 Margin calculation mode (SYMBOL_CALC_MODE enum) <code>SYMBOL_TRADE_MODE</code> 22 Trade execution mode (SYMBOL_TRADE_MODE enum) <code>SYMBOL_START_TIME</code> 23 Date of symbol trade beginning <code>SYMBOL_EXPIRATION_TIME</code> 24 Date of symbol trade end <code>SYMBOL_TRADE_STOPS_LEVEL</code> 25 Minimum distance for SL/TP in points <code>SYMBOL_TRADE_FREEZE_LEVEL</code> 26 Order freeze level in points <code>SYMBOL_TRADE_EXEMODE</code> 27 Order execution type (SYMBOL_ORDER_EXEMODE enum) <code>SYMBOL_SWAP_MODE</code> 28 Swap calculation mode (SYMBOL_SWAP_MODE enum) <code>SYMBOL_SWAP_ROLLOVER3DAYS</code> 29 Day of week for triple swap (SYMBOL_SWAP_ROLLOVER enum) <code>SYMBOL_MARGIN_HEDGED_USE_LEG</code> 30 Calculating hedged margin using larger leg <code>SYMBOL_EXPIRATION_MODE</code> 31 Allowed order expiration modes <code>SYMBOL_FILLING_MODE</code> 32 Allowed order filling modes <code>SYMBOL_ORDER_MODE</code> 33 Allowed order types <code>SYMBOL_ORDER_GTC_MODE</code> 34 StopLoss/TakeProfit mode (ORDER_GTC_MODE enum) <code>SYMBOL_OPTION_MODE</code> 35 Option type (SYMBOL_OPTION_MODE enum) <code>SYMBOL_OPTION_RIGHT</code> 36 Option right (Call/Put)"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoInteger_HOW/#what-its-used-for","title":"\ud83e\udde0 What it's used for","text":"<p>The <code>SymbolInfoInteger()</code> method is used:</p> <ul> <li>for analyzing trading conditions (spread, number of decimal places, stop levels);</li> <li>for checking symbol settings before making a trade;</li> <li>for debugging the gateway and demo examples, when you need to output numeric symbol parameters to the console;</li> <li>when building trading strategies that require precise work with points and price steps.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoInteger_HOW/#in-simple-terms","title":"\ud83d\udcac In simple terms","text":"<p><code>SymbolInfoInteger()</code> returns integer instrument parameters \u2014 such as number of decimal places, spread, or minimum distance to stops. It's a quick way to get important symbol settings without requesting the entire data structure.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoString_HOW/","title":"SymbolInfoString HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoString_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolInfoString()</code> method is used to get string properties of a symbol \u2014 text data associated with a trading instrument. It is similar to <code>SymbolInfoDouble()</code> and <code>SymbolInfoInteger()</code>, but returns values of type <code>string</code>.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoString_HOW/#1-getting-symbol-description-description","title":"1\ufe0f\u20e3 Getting symbol description (Description)","text":"<pre><code>descReq := &amp;pb.SymbolInfoStringRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoStringProperty_SYMBOL_DESCRIPTION, // Direct field: Type (not PropertyId)\n}\ndescData, err := account.SymbolInfoString(ctx, descReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoString(DESCRIPTION) failed\")\n} else {\n    fmt.Printf(\"  Description:                   %s\\n\", descData.Value)\n}\n</code></pre> <p>\ud83d\udcd8 SYMBOL_DESCRIPTION \u2014 human-readable description of the instrument, set by the broker or MetaTrader server. Example values:</p> <ul> <li><code>\"Euro vs US Dollar\"</code></li> <li><code>\"Bitcoin / US Dollar\"</code></li> <li><code>\"Gold Spot\"</code></li> </ul> <p>Used for displaying information in interfaces, logs, and reports.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoString_HOW/#2-getting-base-currency-base-currency","title":"2\ufe0f\u20e3 Getting base currency (Base Currency)","text":"<pre><code>baseReq := &amp;pb.SymbolInfoStringRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoStringProperty_SYMBOL_CURRENCY_BASE,\n}\nbaseData, err := account.SymbolInfoString(ctx, baseReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoString(CURRENCY_BASE) failed\")\n} else {\n    fmt.Printf(\"  Base currency:                 %s\\n\", baseData.Value)\n}\n</code></pre> <p>\ud83d\udcd8 SYMBOL_CURRENCY_BASE \u2014 is the first currency in the pair, showing what is being bought or sold. Examples:</p> <ul> <li><code>EURUSD</code> \u2192 base currency <code>EUR</code></li> <li><code>BTCUSD</code> \u2192 base currency <code>BTC</code></li> </ul> <p>If you buy <code>EURUSD</code>, you are buying euros for dollars.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoString_HOW/#3-getting-profit-currency-profit-currency","title":"3\ufe0f\u20e3 Getting profit currency (Profit Currency)","text":"<pre><code>profitCurrReq := &amp;pb.SymbolInfoStringRequest{\n    Symbol: cfg.TestSymbol,\n    Type:   pb.SymbolInfoStringProperty_SYMBOL_CURRENCY_PROFIT,\n}\nprofitCurrData, err := account.SymbolInfoString(ctx, profitCurrReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoString(CURRENCY_PROFIT) failed\")\n} else {\n    fmt.Printf(\"  Profit currency:               %s\\n\", profitCurrData.Value)\n}\n</code></pre> <p>\ud83d\udcd8 SYMBOL_CURRENCY_PROFIT \u2014 the second currency in the pair, in which profit and loss are calculated. Examples:</p> <ul> <li><code>EURUSD</code> \u2192 profit currency <code>USD</code></li> <li><code>GBPJPY</code> \u2192 profit currency <code>JPY</code></li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoString_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the server returns","text":"<p>After calling <code>SymbolInfoString()</code>, the gateway returns a structure:</p> <pre><code>message SymbolInfoStringData {\n  string Value = 1; // String value of the requested property\n}\n</code></pre> <p>The <code>Value</code> field contains the text value corresponding to the selected <code>Type</code>.</p> <p>Below is a list of the most commonly used properties that can be requested via <code>SymbolInfoString()</code>:</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoString_HOW/#all-propertyid-enum-values-symbolinfostringproperty","title":"\ud83d\udcd8 All PropertyId enum values (SymbolInfoStringProperty)","text":"Constant Value Description <code>SYMBOL_BASIS</code> 0 Underlying asset of derivative <code>SYMBOL_CATEGORY</code> 1 Symbol category <code>SYMBOL_COUNTRY</code> 2 Country the symbol belongs to <code>SYMBOL_SECTOR_NAME</code> 3 Economic sector name <code>SYMBOL_INDUSTRY_NAME</code> 4 Industry name <code>SYMBOL_CURRENCY_BASE</code> 5 Base currency (first currency in pair) <code>SYMBOL_CURRENCY_PROFIT</code> 6 Profit currency (second currency in pair) <code>SYMBOL_CURRENCY_MARGIN</code> 7 Margin calculation currency <code>SYMBOL_BANK</code> 8 Source of last quote (bank/exchange) <code>SYMBOL_DESCRIPTION</code> 9 Symbol description/full name <code>SYMBOL_EXCHANGE</code> 10 Exchange the symbol is traded on <code>SYMBOL_FORMULA</code> 11 Formula for custom symbol price calculation <code>SYMBOL_ISIN</code> 12 International Securities Identification Number <code>SYMBOL_PAGE</code> 13 Web page URL with symbol information <code>SYMBOL_PATH</code> 14 Symbol path in Market Watch tree"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoString_HOW/#what-its-used-for","title":"\ud83e\udde0 What it's used for","text":"<p>The <code>SymbolInfoString()</code> method is used:</p> <ul> <li>for displaying information about the symbol in interfaces, logs, reports;</li> <li>when initializing trading modules, to determine the calculation currency;</li> <li>in analytical systems, where currency codes and descriptions need to be matched;</li> <li>for demo examples, to nicely display instrument properties.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoString_HOW/#in-simple-terms","title":"\ud83d\udcac In simple terms","text":"<p><code>SymbolInfoString()</code> is a way to request text information about a symbol: description, base currency, profit currency, and other string properties. Used for displaying human-readable data, rather than numeric parameters.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoTick_HOW/","title":"SymbolInfoTick HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoTick_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolInfoTick()</code> method is used to get the last market tick \u2014 that is, the current quote for a symbol, containing Bid, Ask, Last prices, volume, and time of the last update.</p> <p>This is one of the key methods for getting \"live\" market data.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoTick_HOW/#code-example","title":"\ud83e\udde9 Code Example","text":"<pre><code>tickReq := &amp;pb.SymbolInfoTickRequest{\n    Symbol: cfg.TestSymbol,\n}\ntickData, err := account.SymbolInfoTick(ctx, tickReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoTick failed\")\n} else {\n    fmt.Printf(\"  Last tick for %s:\\n\", cfg.TestSymbol)\n    fmt.Printf(\"    Bid:                         %.5f\\n\", tickData.Bid)\n    fmt.Printf(\"    Ask:                         %.5f\\n\", tickData.Ask)\n    fmt.Printf(\"    Last:                        %.5f\\n\", tickData.Last)\n    fmt.Printf(\"    Volume:                      %d\\n\", tickData.Volume)\n\n    tickTime := time.Unix(tickData.Time, 0)\n    fmt.Printf(\"    Time:                        %s\\n\", tickTime.Format(\"2006-01-02 15:04:05\"))\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoTick_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>tickReq := &amp;pb.SymbolInfoTickRequest{\n    Symbol: cfg.TestSymbol,\n}\n</code></pre> <p>Creates a request with one parameter <code>Symbol</code> \u2014 the name of the instrument (e.g., <code>EURUSD</code>) for which to get the last tick.</p> <pre><code>tickData, err := account.SymbolInfoTick(ctx, tickReq)\n</code></pre> <p>Executes a gRPC request to the gateway. Returns a structure with the last update for the specified symbol: Bid, Ask, Last prices, volume, and time.</p> <pre><code>if err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoTick failed\")\n} else {\n    fmt.Printf(\"  Last tick for %s:\\n\", cfg.TestSymbol)\n</code></pre> <p>Checks for errors. If the request is successful \u2014 starts printing symbol data.</p> <pre><code>fmt.Printf(\"    Bid:                         %.5f\\n\", tickData.Bid)\nfmt.Printf(\"    Ask:                         %.5f\\n\", tickData.Ask)\nfmt.Printf(\"    Last:                        %.5f\\n\", tickData.Last)\nfmt.Printf(\"    Volume:                      %d\\n\", tickData.Volume)\n</code></pre> <p>Prints prices and volume:</p> <ul> <li>Bid \u2014 price at which you can sell (buyer's quote);</li> <li>Ask \u2014 price at which you can buy (seller's quote);</li> <li>Last \u2014 last trade price (relevant for stocks, futures);</li> <li>Volume \u2014 volume of the last tick or trade.</li> </ul> <pre><code>tickTime := time.Unix(tickData.Time, 0)\nfmt.Printf(\"    Time:                        %s\\n\", tickTime.Format(\"2006-01-02 15:04:05\"))\n</code></pre> <p>The <code>Time</code> field is stored as <code>int64</code> \u2014 Unix timestamp (in seconds). Using <code>time.Unix()</code> it is converted to readable date and time.</p> <p>Format <code>2006-01-02 15:04:05</code> is the standard date template in Go.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoTick_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the server returns","text":"<pre><code>message MrpcMqlTick {\n  int64 Time = 1;    // Unix time of last update\n  double Bid = 2;    // Current Bid price\n  double Ask = 3;    // Current Ask price\n  double Last = 4;   // Last trade price\n  uint64 Volume = 5; // Volume of last trade\n  // Also available: TimeMsc, Flags, VolumeReal\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoTick_HOW/#example-output","title":"\ud83d\udca1 Example output","text":"<pre><code>Last tick for EURUSD:\n    Bid:                         1.08540\n    Ask:                         1.08560\n    Last:                        1.08545\n    Volume:                      150\n    Time:                        2026-01-04 22:15:03\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoTick_HOW/#what-its-used-for","title":"\ud83e\udde0 What it's used for","text":"<p>The <code>SymbolInfoTick()</code> method is used:</p> <ul> <li>to get the latest quote before trading actions;</li> <li>when updating interfaces and analytical panels (e.g., displaying current prices);</li> <li>for logging and market monitoring;</li> <li>in demo examples, to visually show current market data.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolInfoTick_HOW/#in-simple-terms","title":"\ud83d\udcac In simple terms","text":"<p><code>SymbolInfoTick()</code> returns the last tick for a symbol: current Bid, Ask, Last prices, volume, and update time. It's a quick way to find out the current market state for the required instrument.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/","title":"SymbolIsSynchronized HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolIsSynchronized()</code> method is used to check whether symbol data is synchronized between the MetaTrader server and the gateway. It helps determine if the instrument data is ready for use \u2014 whether you can already request quotes, parameters, or perform trading operations.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n4.5. SymbolIsSynchronized() - Check sync status with server\")\n\nsyncReq := &amp;pb.SymbolIsSynchronizedRequest{\n    Symbol: cfg.TestSymbol,\n}\nsyncData, err := account.SymbolIsSynchronized(ctx, syncReq)\nif !helpers.PrintShortError(err, fmt.Sprintf(\"SymbolIsSynchronized(%s) failed\", cfg.TestSymbol)) {\n    fmt.Printf(\"  Symbol '%s' synchronized:  %v\\n\", cfg.TestSymbol, syncData.Synchronized)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#forming-the-request","title":"\ud83d\udd39 Forming the request","text":"<pre><code>syncReq := &amp;pb.SymbolIsSynchronizedRequest{\n    Symbol: cfg.TestSymbol,\n}\n</code></pre> <p>Creates a <code>SymbolIsSynchronizedRequest</code> structure specifying the symbol for which the synchronization state needs to be checked (e.g., <code>\"EURUSD\"</code>).</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#method-call","title":"\ud83d\udd39 Method call","text":"<pre><code>syncData, err := account.SymbolIsSynchronized(ctx, syncReq)\n</code></pre> <p>Executes a gRPC request to the MetaTrader server.</p> <ul> <li><code>ctx</code> \u2014 request context (with possible timeout);</li> <li><code>syncReq</code> \u2014 structure with parameters;</li> <li><code>syncData</code> \u2014 server response as a protobuf structure;</li> <li><code>err</code> \u2014 error if the server didn't respond.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#processing-the-result","title":"\ud83d\udd39 Processing the result","text":"<pre><code>if !helpers.PrintShortError(err, fmt.Sprintf(\"SymbolIsSynchronized(%s) failed\", cfg.TestSymbol)) {\n    fmt.Printf(\"  Symbol '%s' synchronized:  %v\\n\", cfg.TestSymbol, syncData.Synchronized)\n}\n</code></pre> <p>If there are no errors, the value <code>syncData.Synchronized</code> is printed \u2014 a boolean field (true/false), showing whether the symbol data is synchronized between the server and gateway.</p> <p>\ud83d\udcd8 Example output:</p> <pre><code>4.5. SymbolIsSynchronized() - Check sync status with server\n  Symbol 'EURUSD' synchronized:  true\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#what-the-server-returns","title":"What the server returns","text":"<pre><code>message SymbolIsSynchronizedData {\n  bool Synchronized = 1; // true = symbol data is synchronized\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#method-purpose","title":"\ud83d\udca1 Method purpose","text":"<p><code>SymbolIsSynchronized()</code> helps determine whether symbol data is ready for use in code. If the symbol was recently added to Market Watch via <code>SymbolSelect()</code>, it may need some time for the gateway to receive and update all properties and quotes.</p> State Value Description <code>true</code> Synchronized All data received, can work with the symbol <code>false</code> Not synchronized Data not yet updated, should wait"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#code-usage-example","title":"\u2699\ufe0f Code usage example","text":"<pre><code>symbol := cfg.TestSymbol\n\n// Check if symbol is synchronized\nsyncResp, _ := account.SymbolIsSynchronized(ctx, &amp;pb.SymbolIsSynchronizedRequest{\n    Symbol: symbol,\n})\n\nif !syncResp.Synchronized {\n    fmt.Printf(\"Symbol %s not yet synchronized. Waiting...\\n\", symbol)\n} else {\n    fmt.Printf(\"Symbol %s ready and synchronized.\\n\", symbol)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#practical-application-when-working-with-code","title":"\ud83e\udde0 Practical application when working with code","text":"<p>The method is useful:</p> <ul> <li>before calling <code>SymbolInfo*()</code> methods \u2014 to make sure symbol properties are already loaded;</li> <li>after <code>SymbolSelect()</code> \u2014 to check data readiness;</li> <li>when debugging the gateway \u2014 to ensure synchronization with the server is working correctly.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolIsSynchronized_HOW/#in-simple-terms","title":"\ud83d\udcac In simple terms","text":"<p><code>SymbolIsSynchronized()</code> is an indicator of whether the instrument data is current. If <code>true</code> \u2014 the gateway has already received all symbol data from the MetaTrader server, if <code>false</code> \u2014 data is not yet synchronized, and it's better to wait before subsequent calls.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/","title":"SymbolName HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolName()</code> method is used to get the symbol name (e.g., <code>\"EURUSD\"</code>, <code>\"BTCUSD\"</code>) by its index in the MetaTrader symbol list.</p> <p>It allows you to programmatically iterate through all symbols stored on the server, and output their names \u2014 both from the list of all symbols and from Market Watch.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n4.3. SymbolName() - Get symbol name by index (from Market Watch)\")\n\n// Use actual count from SymbolsTotal\nvar symbolsToShow int32 = 3\nif selectedSymbolsData != nil &amp;&amp; selectedSymbolsData.Total &lt; symbolsToShow {\n    symbolsToShow = selectedSymbolsData.Total\n}\n\nif symbolsToShow == 0 {\n    fmt.Println(\"  No symbols in Market Watch\")\n} else {\n    fmt.Printf(\"  Showing first %d symbols from Market Watch:\\n\", symbolsToShow)\n    for i := int32(0); i &lt; symbolsToShow; i++ {\n        nameReq := &amp;pb.SymbolNameRequest{\n            Index:    i,    // Direct protobuf field: Index (not Pos)\n            Selected: true, // true = Market Watch, false = all symbols\n        }\n        nameData, err := account.SymbolName(ctx, nameReq)\n        if !helpers.PrintShortError(err, fmt.Sprintf(\"SymbolName(pos=%d) failed\", i)) {\n            if nameData.Name != \"\" {\n                fmt.Printf(\"    [%d] %s\\n\", i, nameData.Name)\n            } else {\n                fmt.Printf(\"    [%d] (empty - no symbol at this position)\\n\", i)\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#determining-the-number-of-symbols-to-display","title":"\ud83d\udd39 Determining the number of symbols to display","text":"<pre><code>var symbolsToShow int32 = 3\nif selectedSymbolsData != nil &amp;&amp; selectedSymbolsData.Total &lt; symbolsToShow {\n    symbolsToShow = selectedSymbolsData.Total\n}\n</code></pre> <p>Sets how many symbols need to be shown (default 3). If Market Watch has fewer than three symbols \u2014 uses the actual count from <code>SymbolsTotal(Mode:true)</code>.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#checking-for-symbols-presence","title":"\ud83d\udd39 Checking for symbols presence","text":"<pre><code>if symbolsToShow == 0 {\n    fmt.Println(\"  No symbols in Market Watch\")\n}\n</code></pre> <p>If there are no active symbols, a warning is printed.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#main-loop","title":"\ud83d\udd39 Main loop","text":"<pre><code>for i := int32(0); i &lt; symbolsToShow; i++ {\n    nameReq := &amp;pb.SymbolNameRequest{\n        Index:    i,    // Symbol position\n        Selected: true, // true = Market Watch, false = all symbols\n    }\n    nameData, err := account.SymbolName(ctx, nameReq)\n</code></pre> <p>Creates a <code>SymbolNameRequest</code> request, where:</p> <ul> <li><code>Index</code> \u2014 sequential symbol number (0, 1, 2...);</li> <li><code>Selected</code> \u2014 selects the list source: Market Watch (<code>true</code>) or all symbols (<code>false</code>).</li> </ul> <p>The <code>SymbolName()</code> method returns the symbol name at this position.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#output-result","title":"\ud83d\udd39 Output result","text":"<pre><code>if nameData.Name != \"\" {\n    fmt.Printf(\"    [%d] %s\\n\", i, nameData.Name)\n} else {\n    fmt.Printf(\"    [%d] (empty - no symbol at this position)\\n\", i)\n}\n</code></pre> <p>If the name is not empty \u2014 the symbol itself is printed. If empty \u2014 it means there is no active instrument at this position.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#example-output","title":"Example output","text":"<pre><code>4.3. SymbolName() - Get symbol name by index (from Market Watch)\n  Showing first 3 symbols from Market Watch:\n    [0] EURUSD\n    [1] GBPUSD\n    [2] USDJPY\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#how-it-works-internally","title":"\ud83d\udca1 How it works internally","text":"<p>MetaTrader stores symbols in two lists:</p> <ol> <li>All Symbols \u2014 all available broker instruments.</li> <li>Market Watch \u2014 active instruments for which quotes are received.</li> </ol> <p>The <code>SymbolName()</code> method returns the symbol name by index in the selected list.</p> Parameter Value Description <code>Index</code> <code>int32</code> Symbol position in list (0, 1, 2...) <code>Selected</code> <code>true/false</code> true \u2014 Market Watch, false \u2014 All Symbols"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#application","title":"\u2699\ufe0f Application","text":"Goal How to use Get list of all active symbols <code>Selected: true</code>, loop over <code>SymbolsTotal(Mode:true)</code> Get list of all broker symbols <code>Selected: false</code>, loop over <code>SymbolsTotal(Mode:false)</code> Check availability of specific instruments after getting names, call <code>SymbolExist()</code> Create symbol directory collect names for logs, interface, reports"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolName_HOW/#in-simple-terms","title":"\ud83d\udcac In simple terms","text":"<p><code>SymbolName()</code> is a way to programmatically scroll through the list of MetaTrader instruments. You give an index (0, 1, 2...) and get the symbol name, and you can choose \u2014 from Market Watch or from the entire symbol list.</p> <p>Used for diagnostics, gateway debugging, monitoring, or building interfaces where you need to dynamically get a list of available instruments.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/","title":"SymbolSelect HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolSelect()</code> method is used to add or remove a symbol from Market Watch \u2014 the list of active instruments for which the gateway receives quotes. This is one of the key tools when working with symbols: it controls which instruments are active in the system.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n4.4. SymbolSelect() - Add/remove symbol from Market Watch\")\n\nselectReq := &amp;pb.SymbolSelectRequest{\n    Symbol: cfg.TestSymbol,\n    Select: true, // true = add to Market Watch, false = remove\n}\nselectData, err := account.SymbolSelect(ctx, selectReq)\nif !helpers.PrintShortError(err, fmt.Sprintf(\"SymbolSelect(%s) failed\", cfg.TestSymbol)) {\n    fmt.Printf(\"  Symbol '%s' added to Market Watch: %v\\n\", cfg.TestSymbol, selectData.Success)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#creating-the-request","title":"\ud83d\udd39 Creating the request","text":"<pre><code>selectReq := &amp;pb.SymbolSelectRequest{\n    Symbol: cfg.TestSymbol,\n    Select: true, // true = add to Market Watch, false = remove\n}\n</code></pre> <p>Forms the <code>SymbolSelectRequest</code> request structure.</p> Field Type Description <code>Symbol</code> string Symbol name, e.g. <code>\"EURUSD\"</code> <code>Select</code> bool <code>true</code> \u2014 add, <code>false</code> \u2014 remove from Market Watch <p>The symbol value is taken from the configuration file <code>appsettings.json</code> (field <code>test_symbol</code>).</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#method-call","title":"\ud83d\udd39 Method call","text":"<pre><code>selectData, err := account.SymbolSelect(ctx, selectReq)\n</code></pre> <p>Executes a gRPC request to the MetaTrader server.</p> <ul> <li><code>ctx</code> \u2014 request context (with possible timeout);</li> <li><code>selectReq</code> \u2014 structure with parameters;</li> <li><code>selectData</code> \u2014 server response (protobuf structure);</li> <li><code>err</code> \u2014 error if the request failed.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#processing-the-result","title":"\ud83d\udd39 Processing the result","text":"<pre><code>if !helpers.PrintShortError(err, fmt.Sprintf(\"SymbolSelect(%s) failed\", cfg.TestSymbol)) {\n    fmt.Printf(\"  Symbol '%s' added to Market Watch: %v\\n\", cfg.TestSymbol, selectData.Success)\n}\n</code></pre> <p>If there is no error, the result from <code>selectData.Success</code> is printed.</p> <p>\ud83d\udcd8 <code>Success = true</code> means the operation was completed successfully.</p> <p>Example output:</p> <pre><code>4.4. SymbolSelect() - Add/remove symbol from Market Watch\n  Symbol 'EURUSD' added to Market Watch: true\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#what-the-server-returns","title":"What the server returns","text":"<pre><code>message SymbolSelectData {\n  bool Success = 1; // true = operation completed successfully\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#method-purpose","title":"\ud83d\udca1 Method purpose","text":"<p><code>SymbolSelect()</code> controls the activity of symbols in the Market Watch list.</p> Action Example call Description Add symbol <code>Select: true</code> Activates the symbol (enables quote stream) Remove symbol <code>Select: false</code> Removes the symbol from Market Watch <p>If a symbol is not included in Market Watch, MetaTrader does not send quotes for it, and methods like <code>SymbolInfoDouble()</code> or streams (<code>OnSymbolTick</code>) will not return current data.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#usage-example-at-gateway-startup","title":"\u2699\ufe0f Usage example at gateway startup","text":"<pre><code>symbol := cfg.TestSymbol\n\n// 1. Check if symbol exists\nexistResp, _ := account.SymbolExist(ctx, &amp;pb.SymbolExistRequest{Name: symbol})\nif !existResp.Exists {\n    log.Fatalf(\"Symbol %s not found on server\", symbol)\n}\n\n// 2. Activate symbol in Market Watch\nselectResp, _ := account.SymbolSelect(ctx, &amp;pb.SymbolSelectRequest{\n    Symbol: symbol,\n    Select: true,\n})\nfmt.Printf(\"Symbol %s added to Market Watch: %v\\n\", symbol, selectResp.Success)\n\n// 3. Check if we can receive quotes via stream\nfmt.Println(\"Waiting for OnSymbolTick stream...\")\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#in-practice","title":"\ud83e\udde0 In practice","text":"<p><code>SymbolSelect()</code> is one of the first calls after connecting to the server, because it is what enables the quote stream for the required instruments.</p> <p>Typical sequence during gateway initialization:</p> <ol> <li><code>AccountSummary()</code> \u2014 check account access.</li> <li><code>SymbolExist()</code> \u2014 make sure the symbol is available from the broker.</li> <li><code>SymbolSelect()</code> \u2014 add symbol to Market Watch.</li> <li><code>OnSymbolTick()</code> \u2014 start receiving quote stream.</li> </ol>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolSelect_HOW/#in-simple-terms","title":"\ud83d\udcac In simple terms","text":"<p><code>SymbolSelect()</code> is a switch for symbols. When you set <code>Select = true</code>, the gateway tells MetaTrader: \"Add this instrument to Market Watch and start streaming quotes for it\". If <code>Select = false</code>, the opposite \u2014 \"remove the symbol from active ones and stop sending data\".</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolsTotal_HOW/","title":"SymbolsTotal HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolsTotal_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolsTotal()</code> method is used to find out how many trading instruments (symbols) are available on the MetaTrader server. It can work in two modes:</p> <ul> <li>Mode = false \u2192 counts all symbols available from the broker;</li> <li>Mode = true \u2192 counts only active symbols (Market Watch).</li> </ul> <p>\ud83d\udce6 Market Watch in the gateway context is a list of active symbols for which the gateway receives real quotes (Bid/Ask). Since we work through the API (without the MetaTrader interface), this list can be programmatically enabled or modified using the <code>SymbolSelect()</code> method.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolsTotal_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n4.1. SymbolsTotal() - Count symbols\")\n\n// Count all available symbols\nallSymbolsReq := &amp;pb.SymbolsTotalRequest{\n    Mode: false, // false = all symbols\n}\nallSymbolsData, err := account.SymbolsTotal(ctx, allSymbolsReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolsTotal(all) failed\")\n} else {\n    fmt.Printf(\"  Total available symbols:       %d\\n\", allSymbolsData.Total)\n}\n\n// Count symbols in Market Watch only\nselectedSymbolsReq := &amp;pb.SymbolsTotalRequest{\n    Mode: true, // true = Market Watch only\n}\nselectedSymbolsData, err := account.SymbolsTotal(ctx, selectedSymbolsReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolsTotal(selected) failed\")\n} else {\n    fmt.Printf(\"  Symbols in Market Watch:       %d\\n\", selectedSymbolsData.Total)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolsTotal_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolsTotal_HOW/#1-first-call-mode-false","title":"1\ufe0f First call (<code>Mode: false</code>)","text":"<p>Requests the total number of symbols available on the broker's server. This is all pairs, stocks, futures, and instruments that the broker supports \u2014 even those without current quotes.</p> <p>\ud83e\udde0 Example output:</p> <pre><code>Total available symbols: 245\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolsTotal_HOW/#2-second-call-mode-true","title":"2\ufe0f Second call (<code>Mode: true</code>)","text":"<p>Requests the number of active symbols currently in Market Watch state. These are instruments for which MetaTrader actually streams quotes (Bid/Ask).</p> <p>\ud83e\udde0 Example output:</p> <pre><code>Symbols in Market Watch: 32\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolsTotal_HOW/#what-is-market-watch-in-gateway-context","title":"\ud83e\uddf1 What is Market Watch (in gateway context)","text":"<p>Market Watch is not a terminal window, but a logical symbol state on the server. Active symbol = one you've subscribed to for quotes.</p> <p>When we work without the MetaTrader interface (through the gateway):</p> <ul> <li>we don't have a visual Market Watch;</li> <li>but we can enable it programmatically.</li> </ul> <p>For this, the <code>SymbolSelect()</code> method is used:</p> <pre><code>selectReq := &amp;pb.SymbolSelectRequest{\n    Symbol: \"EURUSD\",\n    Select: true, // true = add symbol to Market Watch\n}\n_, err := account.SymbolSelect(ctx, selectReq)\nif err != nil {\n    log.Fatalf(\"SymbolSelect failed: %v\", err)\n}\nfmt.Println(\"EURUSD added to Market Watch\")\n</code></pre> <p>After this, <code>EURUSD</code> is considered active \u2014 and will appear in the <code>SymbolsTotal(Mode: true)</code> count.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolsTotal_HOW/#quote-subscription-bidask-stream","title":"\ud83d\udef0\ufe0f Quote subscription (Bid/Ask stream)","text":"<p>After adding a symbol to Market Watch, you can subscribe to the quote stream:</p> <pre><code>ticks, err := account.TicksSubscribe(ctx, &amp;pb.TicksSubscribeRequest{\n    Symbol: \"EURUSD\",\n})\nif err != nil {\n    log.Fatalf(\"Subscribe failed: %v\", err)\n}\n\nfor {\n    tick, err := ticks.Recv()\n    if err != nil {\n        break\n    }\n    fmt.Printf(\"[%s] Bid: %.5f | Ask: %.5f\\n\", tick.Symbol, tick.Bid, tick.Ask)\n}\n</code></pre> <p>Now the gateway receives real quotes \u2014 analogous to how the MetaTrader terminal displays them in its Market Watch.</p>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolsTotal_HOW/#practical-application","title":"\u2699\ufe0f Practical application","text":"Goal How to use Find out total number of broker's instruments <code>SymbolsTotal(Mode: false)</code> Check how many instruments are active <code>SymbolsTotal(Mode: true)</code> Add symbol to Market Watch <code>SymbolSelect(Symbol, true)</code> Remove symbol from Market Watch <code>SymbolSelect(Symbol, false)</code> Receive quotes for a symbol <code>TicksSubscribe()</code> or <code>SymbolSubscribe()</code>"},{"location":"MT5Account/HOW_IT_WORK/2.%20Symbol_information_HOW/SymbolsTotal_HOW/#in-simple-terms","title":"\ud83d\udcac In simple terms","text":"<p>SymbolsTotal() itself doesn't activate anything \u2014 it only counts. Market Watch when working through the API = list of active symbols that we manage via SymbolSelect().</p> <p>After enabling a symbol in Market Watch, you can stream quotes, trade it, and get real-time updates.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrdersTickets_HOW/","title":"OpenedOrdersTickets HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrdersTickets_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>OpenedOrdersTickets()</code> method is used to get only the ticket numbers of all active orders and positions on the account. This is a lightweight version of the <code>OpenedOrders()</code> method, which returns a minimal data set without extra information about prices, volumes, and symbols.</p> <p>This call is useful when you simply need to know which trades exist, and then optionally get details for each ticket through separate requests.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrdersTickets_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n5.3. OpenedOrdersTickets() - Get ticket numbers only\")\n\nticketsReq := &amp;pb.OpenedOrdersTicketsRequest{}\nticketsData, err := account.OpenedOrdersTickets(ctx, ticketsReq)\nif err != nil {\n    helpers.PrintShortError(err, \"OpenedOrdersTickets failed\")\n} else {\n    // Direct field access: OpenedOrdersTickets and OpenedPositionTickets\n    totalTickets := len(ticketsData.OpenedOrdersTickets) + len(ticketsData.OpenedPositionTickets)\n    fmt.Printf(\"  Total tickets:                 %d\\n\", totalTickets)\n    fmt.Printf(\"    Pending order tickets:       %d\\n\", len(ticketsData.OpenedOrdersTickets))\n    fmt.Printf(\"    Position tickets:            %d\\n\", len(ticketsData.OpenedPositionTickets))\n\n    // Show first few position tickets if any exist\n    if len(ticketsData.OpenedPositionTickets) &gt; 0 {\n        fmt.Printf(\"  First position tickets:        \")\n        maxShow := 5\n        if len(ticketsData.OpenedPositionTickets) &lt; maxShow {\n            maxShow = len(ticketsData.OpenedPositionTickets)\n        }\n        for i := 0; i &lt; maxShow; i++ {\n            fmt.Printf(\"%d \", ticketsData.OpenedPositionTickets[i])\n        }\n        fmt.Println()\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrdersTickets_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>ticketsReq := &amp;pb.OpenedOrdersTicketsRequest{}\n</code></pre> <p>An empty request is created. The method does not require parameters, as it simply requests all active position and order tickets.</p> <pre><code>ticketsData, err := account.OpenedOrdersTickets(ctx, ticketsReq)\n</code></pre> <p>A gRPC request <code>OpenedOrdersTickets()</code> is sent to the MetaTrader server. In response, a structure is returned with two lists:</p> <ul> <li><code>OpenedOrdersTickets</code> \u2014 tickets of all pending orders;</li> <li><code>OpenedPositionTickets</code> \u2014 tickets of all open positions.</li> </ul> <pre><code>totalTickets := len(ticketsData.OpenedOrdersTickets) + len(ticketsData.OpenedPositionTickets)\nfmt.Printf(\"  Total tickets:                 %d\\n\", totalTickets)\nfmt.Printf(\"    Pending order tickets:       %d\\n\", len(ticketsData.OpenedOrdersTickets))\nfmt.Printf(\"    Position tickets:            %d\\n\", len(ticketsData.OpenedPositionTickets))\n</code></pre> <p>The total number of tickets is calculated and their distribution by type is displayed:</p> <ul> <li>Pending orders \u2014 pending orders that have not yet been executed;</li> <li>Positions \u2014 open market positions.</li> </ul> <p>Example output:</p> <pre><code>Total tickets:                 4\n  Pending order tickets:       1\n  Position tickets:            3\n</code></pre> <pre><code>if len(ticketsData.OpenedPositionTickets) &gt; 0 {\n    fmt.Printf(\"  First position tickets:        \")\n    maxShow := 5\n    if len(ticketsData.OpenedPositionTickets) &lt; maxShow {\n        maxShow = len(ticketsData.OpenedPositionTickets)\n    }\n    for i := 0; i &lt; maxShow; i++ {\n        fmt.Printf(\"%d \", ticketsData.OpenedPositionTickets[i])\n    }\n    fmt.Println()\n}\n</code></pre> <p>If there are active positions on the account, the first few tickets are displayed (up to 5 by default). This is convenient for quick visual control.</p> <p>Example output:</p> <pre><code>First position tickets:        1234567 1234568 1234569\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrdersTickets_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OpenedOrdersTicketsData {\n  repeated int64 opened_orders_tickets = 1;     // Pending order tickets\n  repeated int64 opened_position_tickets = 2;   // Open position tickets\n}\n</code></pre> <p>\ud83d\udccc Note: For a complete description of all structure fields, see the main documentation file OpenedOrdersTickets.md.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrdersTickets_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Total tickets:                 3\n  Pending order tickets:       0\n  Position tickets:            3\n  First position tickets:      5674321 5674322 5674323\n</code></pre> <p>\ud83d\udcd8 This means that 3 active positions are currently open on the account, and their tickets can be used for further queries (<code>PositionGet</code>, <code>OrderGet</code>, etc.).</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrdersTickets_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OpenedOrdersTickets()</code> method is used:</p> <ul> <li>for quickly getting a list of identifiers of active orders and positions;</li> <li>to optimize performance when full data is not needed;</li> <li>in asynchronous processing, where tickets are then processed by separate threads;</li> <li>in indicators or alert systems where only the presence of positions matters;</li> <li>during robot synchronization with the server to reconcile tickets without loading full information.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrdersTickets_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OpenedOrdersTickets()</code> is a lightweight way to find out which trades are currently open, without requesting extra data. Returns only tickets \u2014 identifiers of positions and orders. Fast, simple, and ideal for background checks or mass synchronization.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrders_HOW/","title":"OpenedOrders HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrders_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>OpenedOrders()</code> method returns all active orders and open positions on the trading account. This is one of the key methods for monitoring the current state of the account.</p> <p>It allows you to get at once:</p> <ol> <li>A list of open market positions (PositionInfos);</li> <li>A list of pending orders awaiting execution (OpenedOrders).</li> </ol>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrders_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n5.2. OpenedOrders() - Get all opened orders &amp; positions\")\n\nopenedOrdersReq := &amp;pb.OpenedOrdersRequest{\n    InputSortMode: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_OPENED_ORDER_SORT_BY_OPEN_TIME,\n}\nopenedOrdersData, err := account.OpenedOrders(ctx, openedOrdersReq)\nif err != nil {\n    helpers.PrintShortError(err, \"OpenedOrders failed\")\n} else {\n    // Direct field access: OpenedOrders and PositionInfos\n    totalOrders := len(openedOrdersData.OpenedOrders) + len(openedOrdersData.PositionInfos)\n    fmt.Printf(\"  Total opened orders/positions: %d\\n\", totalOrders)\n    fmt.Printf(\"    Pending orders:              %d\\n\", len(openedOrdersData.OpenedOrders))\n    fmt.Printf(\"    Open positions:              %d\\n\", len(openedOrdersData.PositionInfos))\n\n    // Show first 2 positions if any exist\n    maxShow := 2\n    if len(openedOrdersData.PositionInfos) &lt; maxShow {\n        maxShow = len(openedOrdersData.PositionInfos)\n    }\n    for i := 0; i &lt; maxShow; i++ {\n        pos := openedOrdersData.PositionInfos[i]\n        fmt.Printf(\"\\n  Position #%d:\\n\", i+1)\n        fmt.Printf(\"    Ticket:                      %d\\n\", pos.Ticket)\n        fmt.Printf(\"    Symbol:                      %s\\n\", pos.Symbol)\n        fmt.Printf(\"    Type:                        %v\\n\", pos.Type)\n        fmt.Printf(\"    Volume:                      %.2f\\n\", pos.Volume)\n        fmt.Printf(\"    Price Open:                  %.5f\\n\", pos.PriceOpen)\n        fmt.Printf(\"    Current Price:               %.5f\\n\", pos.PriceCurrent)\n        fmt.Printf(\"    Profit:                      %.2f\\n\", pos.Profit)\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrders_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>openedOrdersReq := &amp;pb.OpenedOrdersRequest{\n    InputSortMode: pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_OPENED_ORDER_SORT_BY_OPEN_TIME,\n}\n</code></pre> <p>A request is created with a sort mode parameter. The method accepts <code>InputSortMode</code> to control how results are sorted:</p> <ul> <li><code>OPENED_ORDER_SORT_BY_OPEN_TIME</code> (0) - sort by open time</li> <li><code>OPENED_ORDER_SORT_BY_CLOSE_TIME</code> (1) - sort by close time</li> <li><code>OPENED_ORDER_SORT_BY_TICKET_ID</code> (2) - sort by ticket ID</li> </ul> <pre><code>openedOrdersData, err := account.OpenedOrders(ctx, openedOrdersReq)\n</code></pre> <p>A gRPC request <code>OpenedOrders()</code> is sent to the MetaTrader server. The gateway returns a structure with two lists:</p> <ul> <li><code>OpenedOrders</code> \u2014 all pending orders (awaiting execution);</li> <li><code>PositionInfos</code> \u2014 all active open positions.</li> </ul> <pre><code>totalOrders := len(openedOrdersData.OpenedOrders) + len(openedOrdersData.PositionInfos)\nfmt.Printf(\"  Total opened orders/positions: %d\\n\", totalOrders)\nfmt.Printf(\"    Pending orders:              %d\\n\", len(openedOrdersData.OpenedOrders))\nfmt.Printf(\"    Open positions:              %d\\n\", len(openedOrdersData.PositionInfos))\n</code></pre> <p>The total number of active elements is calculated: orders + positions. Then the number of pending orders and active positions is output separately.</p> <p>Example output:</p> <pre><code>Total opened orders/positions: 3\n  Pending orders:              1\n  Open positions:              2\n</code></pre> <pre><code>maxShow := 2\nif len(openedOrdersData.PositionInfos) &lt; maxShow {\n    maxShow = len(openedOrdersData.PositionInfos)\n}\n</code></pre> <p>Limits the number of displayed positions (for the example - no more than two), to keep the console readable.</p> <pre><code>for i := 0; i &lt; maxShow; i++ {\n    pos := openedOrdersData.PositionInfos[i]\n    fmt.Printf(\"\\n  Position #%d:\\n\", i+1)\n    fmt.Printf(\"    Ticket:                      %d\\n\", pos.Ticket)\n    fmt.Printf(\"    Symbol:                      %s\\n\", pos.Symbol)\n    fmt.Printf(\"    Type:                        %v\\n\", pos.Type)\n    fmt.Printf(\"    Volume:                      %.2f\\n\", pos.Volume)\n    fmt.Printf(\"    Price Open:                  %.5f\\n\", pos.PriceOpen)\n    fmt.Printf(\"    Current Price:               %.5f\\n\", pos.PriceCurrent)\n    fmt.Printf(\"    Profit:                      %.2f\\n\", pos.Profit)\n}\n</code></pre> <p>Iterates through the list of positions and outputs the main parameters of each:</p> <ul> <li>Ticket \u2014 unique position identifier;</li> <li>Symbol \u2014 instrument symbol (e.g., <code>EURUSD</code>);</li> <li>Type \u2014 direction (BUY / SELL);</li> <li>Volume \u2014 position volume;</li> <li>PriceOpen \u2014 opening price;</li> <li>PriceCurrent \u2014 current market price;</li> <li>Profit \u2014 current floating profit or loss.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrders_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OpenedOrdersData {\n  repeated OpenedOrderInfo opened_orders = 1;     // Pending orders\n  repeated PositionInfo position_infos = 2;       // Active positions\n}\n\nmessage OpenedOrderInfo {\n  uint32 index = 1;\n  uint64 ticket = 2;\n  double price_current = 3;\n  double price_open = 4;\n  double stop_limit = 5;\n  double stop_loss = 6;\n  double take_profit = 7;\n  double volume_current = 8;\n  double volume_initial = 9;\n  int64 magic_number = 10;\n  int32 reason = 11;\n  BMT5_ENUM_ORDER_TYPE type = 12;\n  BMT5_ENUM_ORDER_STATE state = 13;\n  google.protobuf.Timestamp time_expiration = 14;\n  google.protobuf.Timestamp time_setup = 15;\n  google.protobuf.Timestamp time_done = 16;\n  BMT5_ENUM_ORDER_TYPE_FILLING type_filling = 17;\n  BMT5_ENUM_ORDER_TYPE_TIME type_time = 18;\n  int64 position_id = 19;\n  int64 position_by_id = 20;\n  string symbol = 21;\n  string external_id = 22;\n  string comment = 23;\n  int64 account_login = 24;\n}\n\nmessage PositionInfo {\n  uint32 index = 1;\n  uint64 ticket = 2;\n  google.protobuf.Timestamp open_time = 3;\n  double volume = 4;\n  double price_open = 5;\n  double stop_loss = 6;\n  double take_profit = 7;\n  double price_current = 8;\n  double swap = 9;\n  double profit = 10;\n  google.protobuf.Timestamp last_update_time = 11;\n  BMT5_ENUM_POSITION_TYPE type = 12;\n  int64 magic_number = 13;\n  int64 identifier = 14;\n  BMT5_ENUM_POSITION_REASON reason = 15;\n  string symbol = 16;\n  string comment = 17;\n  string external_id = 18;\n  double position_commission = 19;\n  int64 account_login = 20;\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrders_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Total opened orders/positions: 3\n  Pending orders:              1\n  Open positions:              2\n\n  Position #1:\n    Ticket:                      123456789\n    Symbol:                      EURUSD\n    Type:                        POSITION_TYPE_BUY\n    Volume:                      0.10\n    Price Open:                  1.08450\n    Current Price:               1.08620\n    Profit:                      17.00\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrders_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OpenedOrders()</code> method is used:</p> <ul> <li>to monitor all active deals and orders on the account;</li> <li>to restore the state of positions when starting a trading robot;</li> <li>for analyzing current profit/loss;</li> <li>when creating custom interfaces and monitoring dashboards;</li> <li>for logging and reporting.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OpenedOrders_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OpenedOrders()</code> shows everything that is currently active on the account: open positions and pending orders \u2014 with tickets, prices, volumes, and profits. This is the main method for monitoring and visualizing trading state.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OrderHistory_HOW/","title":"OrderHistory HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OrderHistory_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>OrderHistory()</code> method is used to get historical orders (executed, cancelled, expired) for a selected time period. It does not return open positions \u2014 only completed operations.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OrderHistory_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n5.4. OrderHistory() - Get historical orders\")\n\n// Set time range (last 30 days) - must use timestamppb.Timestamp\nnow := time.Now()\nfromTimestamp := timestamppb.New(now.AddDate(0, 0, -30))\ntoTimestamp := timestamppb.New(now)\n\norderHistoryReq := &amp;pb.OrderHistoryRequest{\n    InputFrom:     fromTimestamp,\n    InputTo:       toTimestamp,\n    InputSortMode: pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_ORDER_HISTORY_SORT_BY_OPEN_TIME,\n    PageNumber:    0,  // 0 for all items\n    ItemsPerPage:  0,  // 0 for all items\n}\norderHistoryData, err := account.OrderHistory(ctx, orderHistoryReq)\nif err != nil {\n    helpers.PrintShortError(err, \"OrderHistory failed\")\n} else {\n    fmt.Printf(\"  Historical orders (last 30d):  %d\\n\", len(orderHistoryData.HistoryData))\n\n    maxShow := 2\n    if len(orderHistoryData.HistoryData) &lt; maxShow {\n        maxShow = len(orderHistoryData.HistoryData)\n    }\n    for i := 0; i &lt; maxShow; i++ {\n        item := orderHistoryData.HistoryData[i]\n        if item.HistoryOrder != nil {\n            order := item.HistoryOrder\n            fmt.Printf(\"\\n  Order #%d:\\n\", i+1)\n            fmt.Printf(\"    Ticket:                      %d\\n\", order.Ticket)\n            fmt.Printf(\"    Symbol:                      %s\\n\", order.Symbol)\n            fmt.Printf(\"    Type:                        %v\\n\", order.Type)\n            fmt.Printf(\"    Volume:                      %.2f\\n\", order.VolumeInitial)\n            fmt.Printf(\"    Price Open:                  %.5f\\n\", order.PriceOpen)\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OrderHistory_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>now := time.Now()\nfromTimestamp := timestamppb.New(now.AddDate(0, 0, -30))\ntoTimestamp := timestamppb.New(now)\n</code></pre> <p>A date range is formed \u2014 the last 30 days. MetaTrader requires fields of type <code>timestamppb.Timestamp</code>, so conversion from <code>time.Time</code> is used.</p> <pre><code>orderHistoryReq := &amp;pb.OrderHistoryRequest{\n    InputFrom:     fromTimestamp,\n    InputTo:       toTimestamp,\n    InputSortMode: pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_ORDER_HISTORY_SORT_BY_OPEN_TIME,\n    PageNumber:    0,\n    ItemsPerPage:  0,\n}\n</code></pre> <p>A request is created to get orders for the period between <code>InputFrom</code> and <code>InputTo</code>.</p> <p>Request Parameters:</p> <ul> <li><code>InputFrom</code> - start time of history range (required)</li> <li><code>InputTo</code> - end time of history range (required)</li> <li><code>InputSortMode</code> - sort mode (optional):</li> <li><code>ORDER_HISTORY_SORT_BY_OPEN_TIME</code> (0) - sort by open time</li> <li><code>ORDER_HISTORY_SORT_BY_CLOSE_TIME</code> (1) - sort by close time</li> <li><code>ORDER_HISTORY_SORT_BY_TICKET_ID</code> (2) - sort by ticket ID</li> <li><code>PageNumber</code> - page number for pagination (default 0 for all items)</li> <li><code>ItemsPerPage</code> - number of items per page (default 0 for all items)</li> </ul> <pre><code>orderHistoryData, err := account.OrderHistory(ctx, orderHistoryReq)\n</code></pre> <p>A gRPC call <code>OrderHistory()</code> is sent. In response, an array of <code>HistoryData</code> structures is received, each describing one completed order.</p> <pre><code>fmt.Printf(\"  Historical orders (last 30d):  %d\\n\", len(orderHistoryData.HistoryData))\n</code></pre> <p>The total number of historical orders found for the specified period is displayed.</p> <pre><code>if item.HistoryOrder != nil {\n    order := item.HistoryOrder\n    fmt.Printf(\"\\n  Order #%d:\\n\", i+1)\n    fmt.Printf(\"    Ticket:                      %d\\n\", order.Ticket)\n    fmt.Printf(\"    Symbol:                      %s\\n\", order.Symbol)\n    fmt.Printf(\"    Type:                        %v\\n\", order.Type)\n    fmt.Printf(\"    Volume:                      %.2f\\n\", order.VolumeInitial)\n    fmt.Printf(\"    Price Open:                  %.5f\\n\", order.PriceOpen)\n}\n</code></pre> <p>The loop outputs the main fields for each order:</p> <ul> <li>Ticket \u2014 unique order number;</li> <li>Symbol \u2014 instrument for which it was placed;</li> <li>Type \u2014 order type (<code>BUY</code>, <code>SELL</code>, <code>BUY_LIMIT</code>, etc.);</li> <li>VolumeInitial \u2014 initial volume;</li> <li>PriceOpen \u2014 order opening price.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OrderHistory_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OrdersHistoryData {\n  int32 arrayTotal = 1;\n  int32 pageNumber = 2;\n  int32 itemsPerPage = 3;\n  repeated HistoryData history_data = 4;\n}\n\nmessage HistoryData {\n  uint32 index = 1;\n  OrderHistoryData history_order = 2;\n  DealHistoryData history_deal = 3;\n}\n\nmessage OrderHistoryData {\n  uint64 ticket = 1;\n  google.protobuf.Timestamp setup_time = 2;\n  google.protobuf.Timestamp done_time = 3;\n  BMT5_ENUM_ORDER_STATE state = 4;\n  double price_current = 5;\n  double price_open = 6;\n  double stop_limit = 7;\n  double stop_loss = 8;\n  double take_profit = 9;\n  double volume_current = 10;\n  double volume_initial = 11;\n  int64 magic_number = 12;\n  BMT5_ENUM_ORDER_TYPE type = 13;\n  google.protobuf.Timestamp time_expiration = 14;\n  BMT5_ENUM_ORDER_TYPE_FILLING type_filling = 15;\n  BMT5_ENUM_ORDER_TYPE_TIME type_time = 16;\n  uint64 position_id = 17;\n  string symbol = 18;\n  string external_id = 19;\n  string comment = 20;\n  int64 account_login = 21;\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OrderHistory_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Historical orders (last 30d):  2\n\n  Order #1:\n    Ticket:                      128007201\n    Symbol:                      EURUSD\n    Type:                        BMT5_ORDER_TYPE_BUY\n    Volume:                      0.01\n    Price Open:                  0.00000\n\n  Order #2:\n    Ticket:                      128009723\n    Symbol:                      EURUSD\n    Type:                        BMT5_ORDER_TYPE_BUY\n    Volume:                      0.01\n    Price Open:                  0.00000\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OrderHistory_HOW/#why-price-open-equals-000000","title":"\u26a0\ufe0f Why Price Open Equals 0.00000","text":"<p>If you see that the <code>PriceOpen</code> = 0.00000 field, this is not a code error. Possible reasons:</p> <ol> <li> <p>Historical orders were not executed (Pending Orders)    If an order was cancelled by the user or expired by time, the server stores it in history but without an opening price.</p> </li> <li> <p>Order type does not provide an opening price    For example, <code>BUY_LIMIT</code> or <code>SELL_STOP</code> before execution have only a pending price (<code>PriceOrder</code>), not <code>PriceOpen</code>.</p> </li> <li> <p>Historical data limited by server    Some brokers store only basic order attributes, and if an order was closed long ago or was not executed, some fields may be zeroed.</p> </li> <li> <p>MetaTrader demo server    On demo servers (especially test clusters), trade history is sometimes incomplete \u2014 <code>PriceOpen</code> may not be filled.</p> </li> </ol>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OrderHistory_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OrderHistory()</code> method is used:</p> <ul> <li>for analyzing trading for a specific period (PnL, trade frequency, instruments);</li> <li>for restoring history after restarting a trading robot;</li> <li>for forming reports and trade journals;</li> <li>in analytical modules that build charts or statistics on trades.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/OrderHistory_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OrderHistory()</code> allows you to get history of completed orders for a specified period. If the opening price is zero, it means the order was not executed or data is incomplete on the server side. This is a normal situation when working with demo or inactive orders.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsHistory_HOW/","title":"PositionsHistory HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsHistory_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>PositionsHistory()</code> method returns the history of closed positions for a specified time range. This is one of the main ways to get information about profit and loss (P&amp;L) on the account for a period.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsHistory_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n5.5. PositionsHistory() - Get historical positions with P&amp;L\")\n\npositionsHistoryReq := &amp;pb.PositionsHistoryRequest{\n    SortType:             pb.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE_POSITIONS_HISTORY_SORT_BY_OPEN_TIME,\n    PositionOpenTimeFrom: fromTimestamp,\n    PositionOpenTimeTo:   toTimestamp,\n    PageNumber:           nil,  // nil for all items\n    ItemsPerPage:         nil,  // nil for all items\n}\npositionsHistoryData, err := account.PositionsHistory(ctx, positionsHistoryReq)\nif err != nil {\n    helpers.PrintShortError(err, \"PositionsHistory failed\")\n} else {\n    fmt.Printf(\"  Historical positions (last 30d): %d\\n\", len(positionsHistoryData.HistoryPositions))\n\n    maxShow := 2\n    if len(positionsHistoryData.HistoryPositions) &lt; maxShow {\n        maxShow = len(positionsHistoryData.HistoryPositions)\n    }\n    for i := 0; i &lt; maxShow; i++ {\n        pos := positionsHistoryData.HistoryPositions[i]\n        fmt.Printf(\"\\n  Position #%d:\\n\", i+1)\n        fmt.Printf(\"    Position Ticket:             %d\\n\", pos.PositionTicket)\n        fmt.Printf(\"    Symbol:                      %s\\n\", pos.Symbol)\n        fmt.Printf(\"    Order Type:                  %v\\n\", pos.OrderType)\n        fmt.Printf(\"    Volume:                      %.2f\\n\", pos.Volume)\n        fmt.Printf(\"    Profit:                      %.2f\\n\", pos.Profit)\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsHistory_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>positionsHistoryReq := &amp;pb.PositionsHistoryRequest{\n    SortType:             pb.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE_POSITIONS_HISTORY_SORT_BY_OPEN_TIME,\n    PositionOpenTimeFrom: fromTimestamp,\n    PositionOpenTimeTo:   toTimestamp,\n    PageNumber:           nil,\n    ItemsPerPage:         nil,\n}\n</code></pre> <p>A request is created with a date range specification for which position history is needed. Time format is <code>timestamppb.Timestamp</code>, as in the <code>OrderHistory()</code> method.</p> <p>Request Parameters:</p> <ul> <li><code>SortType</code> - sort type (required):</li> <li><code>POSITIONS_HISTORY_SORT_BY_OPEN_TIME</code> (0) - sort by open time</li> <li><code>POSITIONS_HISTORY_SORT_BY_CLOSE_TIME</code> (1) - sort by close time</li> <li><code>POSITIONS_HISTORY_SORT_BY_TICKET_ID</code> (2) - sort by ticket ID</li> <li><code>POSITIONS_HISTORY_SORT_BY_PROFIT</code> (3) - sort by profit</li> <li><code>PositionOpenTimeFrom</code> - start time for position open time filter (optional)</li> <li><code>PositionOpenTimeTo</code> - end time for position open time filter (optional)</li> <li><code>PageNumber</code> - page number for pagination (optional, nil for all items)</li> <li><code>ItemsPerPage</code> - number of items per page (optional, nil for all items)</li> </ul> <pre><code>positionsHistoryData, err := account.PositionsHistory(ctx, positionsHistoryReq)\n</code></pre> <p>A gRPC request <code>PositionsHistory()</code> is sent to the MetaTrader server. In response, a list of all positions that were opened and closed in the specified period is returned.</p> <pre><code>fmt.Printf(\"  Historical positions (last 30d): %d\\n\", len(positionsHistoryData.HistoryPositions))\n</code></pre> <p>Outputs the total number of closed positions found for the last 30 days.</p> <pre><code>for i := 0; i &lt; maxShow; i++ {\n    pos := positionsHistoryData.HistoryPositions[i]\n    fmt.Printf(\"\\n  Position #%d:\\n\", i+1)\n    fmt.Printf(\"    Position Ticket:             %d\\n\", pos.PositionTicket)\n    fmt.Printf(\"    Symbol:                      %s\\n\", pos.Symbol)\n    fmt.Printf(\"    Order Type:                  %v\\n\", pos.OrderType)\n    fmt.Printf(\"    Volume:                      %.2f\\n\", pos.Volume)\n    fmt.Printf(\"    Profit:                      %.2f\\n\", pos.Profit)\n}\n</code></pre> <p>Outputs brief information for each position:</p> <ul> <li>PositionTicket \u2014 unique position number;</li> <li>Symbol \u2014 instrument (e.g., <code>EURUSD</code>);</li> <li>OrderType \u2014 trade direction (<code>BUY</code>, <code>SELL</code>, etc.);</li> <li>Volume \u2014 position volume;</li> <li>Profit \u2014 final profit or loss.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsHistory_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message PositionsHistoryData {\n  repeated PositionHistoryInfo history_positions = 1;\n}\n\nmessage PositionHistoryInfo {\n  int32 index = 1;\n  uint64 position_ticket = 2;\n  AH_ENUM_POSITIONS_HISTORY_ORDER_TYPE order_type = 3;\n  google.protobuf.Timestamp open_time = 4;\n  google.protobuf.Timestamp close_time = 5;\n  double volume = 6;\n  double open_price = 7;\n  double close_price = 8;\n  double stop_loss = 9;\n  double take_profit = 10;\n  double market_value = 11;\n  double commission = 12;\n  double fee = 13;\n  double profit = 14;\n  double swap = 15;\n  string comment = 16;\n  string symbol = 17;\n  int64 magic = 18;\n}\n</code></pre> <p>In addition to the fields shown in the example, the full response also includes open/close prices, commissions, swaps, and trade times.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsHistory_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Historical positions (last 30d): 2\n\n  Position #1:\n    Position Ticket:             127998001\n    Symbol:                      EURUSD\n    Order Type:                  ORDER_TYPE_BUY\n    Volume:                      0.10\n    Profit:                      25.35\n\n  Position #2:\n    Position Ticket:             128003420\n    Symbol:                      GBPUSD\n    Order Type:                  ORDER_TYPE_SELL\n    Volume:                      0.05\n    Profit:                      -7.60\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsHistory_HOW/#possible-reasons-for-empty-output","title":"\u26a0\ufe0f Possible Reasons for Empty Output","text":"<p>If the method returns zero positions, this may be related to:</p> <ul> <li>absence of closed trades in the last 30 days;</li> <li>broker policy that stores history for a limited time;</li> <li>use of a demo server (history is often cleared);</li> <li>too short date range in the request.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsHistory_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>PositionsHistory()</code> method is used:</p> <ul> <li>for analyzing trading results (PnL, win rate, drawdown);</li> <li>when forming reports and analytical dashboards;</li> <li>for backtesting strategies to load historical data;</li> <li>in robots that restore statistics after restart.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsHistory_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>PositionsHistory()</code> returns all closed positions for a specified period. Shows symbol, direction, volume, and profit/loss. This is the main way to get P&amp;L history for an account.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsTotal_HOW/","title":"PositionsTotal HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsTotal_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>PositionsTotal()</code> method returns the total number of open positions on the trading account. This is one of the simplest and most frequently used queries when working with trading strategies.</p> <p>It does not return details about positions \u2014 only their count. If you need to get a list with detailed information (symbol, ticket, volume, etc.), use the <code>OpenedOrders()</code> or <code>OpenedOrdersTickets()</code> methods.</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsTotal_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>positionsTotalData, err := account.PositionsTotal(ctx)\nif err != nil {\n    helpers.PrintShortError(err, \"PositionsTotal failed\")\n} else {\n    // Direct field access: TotalPositions\n    fmt.Printf(\"  Total open positions:          %d\\n\", positionsTotalData.TotalPositions)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsTotal_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>positionsTotalData, err := account.PositionsTotal(ctx)\n</code></pre> <p>A gRPC request is sent to the MetaTrader server. In response, the gateway returns a <code>PositionsTotalResponse</code> object containing the <code>TotalPositions</code> field \u2014 the number of open positions on the account.</p> <p>Note: This method does not require any parameters \u2014 it simply returns the count of currently open positions.</p> <pre><code>if err != nil {\n    helpers.PrintShortError(err, \"PositionsTotal failed\")\n}\n</code></pre> <p>If an error occurs during the request execution (e.g., no connection or unauthorized user), it is handled through the <code>PrintShortError()</code> helper.</p> <pre><code>fmt.Printf(\"  Total open positions:          %d\\n\", positionsTotalData.TotalPositions)\n</code></pre> <p>If there are no errors, the number of open positions is printed to the console. For example:</p> <pre><code>Total open positions:          3\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsTotal_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message PositionsTotalData {\n  // Total number of positions\n  int32 total_positions = 1;\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsTotal_HOW/#example-output","title":"Example Output","text":"<pre><code>Total open positions:          2\n</code></pre> <p>\ud83d\udcd8 This means that 2 active positions are currently open on the account (e.g., EURUSD and GBPUSD).</p>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsTotal_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>PositionsTotal()</code> method is used:</p> <ul> <li>to check for open trades before opening a new one;</li> <li>in risk management algorithms that limit the number of active positions;</li> <li>during trading system initialization to determine the current account state;</li> <li>in monitoring dashboards to display the total number of trades.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/3.%20Position_Orders_Information_HOW/PositionsTotal_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>PositionsTotal()</code> is a quick way to find out how many trades are currently open on the account. The method does not return trade details, only their count \u2014 convenient for checks and conditions like: \"if no positions, open a new one\".</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/","title":"OrderCalcMargin HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#example-from-file-examplesdemoslowlevel02_trading_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/02_trading_operations.go</code>","text":"<p>The <code>OrderCalcMargin()</code> method is used to calculate the required margin before opening an order. It allows you to determine in advance whether there are sufficient funds in the account for a trade of a given volume and type.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n2.1. OrderCalcMargin() - Calculate required margin\")\n\n// Get current prices for the symbol\ntickReq := &amp;pb.SymbolInfoTickRequest{\n    Symbol: cfg.TestSymbol,\n}\ntickData, err := account.SymbolInfoTick(ctx, tickReq)\nhelpers.Fatal(err, \"SymbolInfoTick failed\")\n\n// Form a margin calculation request for BUY\nmarginReq := &amp;pb.OrderCalcMarginRequest{\n    OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Symbol:    cfg.TestSymbol,\n    Volume:    cfg.TestVolume,\n    OpenPrice: tickData.Ask, // use current Ask price\n}\n\nmarginData, err := account.OrderCalcMargin(ctx, marginReq)\nif !helpers.PrintShortError(err, \"OrderCalcMargin failed\") {\n    fmt.Printf(\"  Symbol:                        %s\\n\", cfg.TestSymbol)\n    fmt.Printf(\"  Action:                        BUY\\n\")\n    fmt.Printf(\"  Volume:                        %.2f lots\\n\", cfg.TestVolume)\n    fmt.Printf(\"  Price:                         %.5f\\n\", tickData.Ask)\n    fmt.Printf(\"  Required Margin:               %.2f\\n\", marginData.Margin)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#1-get-current-quotes","title":"1\ufe0f. Get Current Quotes","text":"<pre><code>tickReq := &amp;pb.SymbolInfoTickRequest{ Symbol: cfg.TestSymbol }\ntickData, err := account.SymbolInfoTick(ctx, tickReq)\n</code></pre> <p>Before calculating, you need to know the actual price. For a BUY trade, the Ask price is used. <code>cfg.TestSymbol</code> \u2014 symbol from <code>config.json</code>.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#2-form-the-request","title":"2\ufe0f. Form the Request","text":"<pre><code>marginReq := &amp;pb.OrderCalcMarginRequest{\n    OrderType: pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Symbol:    cfg.TestSymbol,\n    Volume:    cfg.TestVolume,\n    OpenPrice: tickData.Ask,\n}\n</code></pre> <ul> <li>OrderType \u2014 order type (BUY / SELL);</li> <li>Symbol \u2014 instrument (e.g., <code>EURUSD</code>);</li> <li>Volume \u2014 trade volume in lots;</li> <li>OpenPrice \u2014 opening price (Ask for BUY, Bid for SELL).</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#3-perform-the-calculation","title":"3\ufe0f. Perform the Calculation","text":"<pre><code>marginData, err := account.OrderCalcMargin(ctx, marginReq)\n</code></pre> <p>A gRPC request is sent to the gateway. MetaTrader calculates how much margin will be required for a trade with the specified parameters.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#4-process-and-display-the-result","title":"4\ufe0f. Process and Display the Result","text":"<pre><code>fmt.Printf(\"  Required Margin: %.2f\\n\", marginData.Margin)\n</code></pre> <p>Outputs the calculated margin amount in the account currency.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OrderCalcMarginData {\n  double Margin = 1; // Calculated margin for the specified order\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Symbol:                        EURUSD\nAction:                        BUY\nVolume:                        0.10 lots\nPrice:                         1.08525\nRequired Margin:               108.52\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OrderCalcMargin()</code> method is used for:</p> <ul> <li>checking if there is enough free margin for a new trade;</li> <li>dynamically adjusting trade volume to balance;</li> <li>assessing deposit load and risk level;</li> <li>demonstrative calculations without opening orders.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcMargin_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OrderCalcMargin()</code> is a calculator that tells you: \"How much money the broker will freeze if you open a BUY/SELL trade with this volume and price now.\" It doesn't create a trade \u2014 it only calculates how much margin will be required.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcProfit_HOW/","title":"OrderCalcProfit HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcProfit_HOW/#example-from-file-examplesdemoslowlevel02_trading_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/02_trading_operations.go</code>","text":"<p>The <code>OrderCalcProfit()</code> method is used to calculate the potential profit or loss for a trade with specified parameters. It does not open a trade \u2014 it only calculates the result when opening and closing a position at the specified prices.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcProfit_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n2.2. OrderCalcProfit() - Calculate potential profit/loss\")\n\n// Calculate loss from immediate trade closure (spread)\nprofitReq := &amp;pb.OrderCalcProfitRequest{\n    OrderType:  pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Symbol:     cfg.TestSymbol,\n    Volume:     cfg.TestVolume,\n    OpenPrice:  tickData.Ask, // entry price\n    ClosePrice: tickData.Bid, // exit price - immediate close at Bid\n}\nprofitData, err := account.OrderCalcProfit(ctx, profitReq)\nif !helpers.PrintShortError(err, \"OrderCalcProfit failed\") {\n    fmt.Printf(\"  Symbol:                        %s\\n\", cfg.TestSymbol)\n    fmt.Printf(\"  Action:                        BUY\\n\")\n    fmt.Printf(\"  Volume:                        %.2f lots\\n\", cfg.TestVolume)\n    fmt.Printf(\"  Price Open (Ask):              %.5f\\n\", tickData.Ask)\n    fmt.Printf(\"  Price Close (Bid):             %.5f\\n\", tickData.Bid)\n    fmt.Printf(\"  Potential Profit/Loss:         %.2f (spread loss)\\n\", profitData.Profit)\n}\n\n// Calculate profit if price rises by 10 pips\npipSize := 0.0001 // for EURUSD 1 pip = 0.0001\ntargetPrice := tickData.Ask + (10 * pipSize)\n\nprofitTargetReq := &amp;pb.OrderCalcProfitRequest{\n    OrderType:  pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n    Symbol:     cfg.TestSymbol,\n    Volume:     cfg.TestVolume,\n    OpenPrice:  tickData.Ask,\n    ClosePrice: targetPrice,\n}\nprofitTargetData, err := account.OrderCalcProfit(ctx, profitTargetReq)\nif !helpers.PrintShortError(err, \"OrderCalcProfit (target) failed\") {\n    fmt.Printf(\"\\n  If price moves +10 pips to %.5f:\\n\", targetPrice)\n    fmt.Printf(\"  Potential Profit:              %.2f\\n\", profitTargetData.Profit)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcProfit_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcProfit_HOW/#1-calculating-immediate-loss-due-to-spread","title":"1\ufe0f. Calculating Immediate Loss Due to Spread","text":"<p>When opening a trade at Ask and closing at Bid, there is an immediate loss equal to the spread size.</p> <pre><code>OpenPrice: tickData.Ask,\nClosePrice: tickData.Bid,\n</code></pre> <p>The method returns a negative profit value (<code>Profit &lt; 0</code>).</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcProfit_HOW/#2-calculating-profit-from-10-pips-price-movement","title":"2\ufe0f. Calculating Profit from 10 Pips Price Movement","text":"<p>Define the pip size and target price:</p> <pre><code>pipSize := 0.0001\ntargetPrice := tickData.Ask + (10 * pipSize)\n</code></pre> <p>If the price rises by 10 pips (0.0010 for EURUSD), the result will be positive. The method calculates how much profit this movement will generate for the specified volume.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcProfit_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OrderCalcProfitData {\n  double Profit = 1; // Calculated profit or loss in account currency\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcProfit_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Symbol:                        EURUSD\nAction:                        BUY\nVolume:                        0.10 lots\nPrice Open (Ask):              1.08520\nPrice Close (Bid):             1.08500\nPotential Profit/Loss:         -2.00 (spread loss)\n\nIf price moves +10 pips to 1.08620:\nPotential Profit:              10.00\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcProfit_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OrderCalcProfit()</code> method is used for:</p> <ul> <li>estimating potential profit or loss without opening a trade;</li> <li>testing strategies and risk management;</li> <li>calculating P/L in simulations;</li> <li>visualizing theoretical results.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCalcProfit_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OrderCalcProfit()</code> is a profit calculator. It shows how much you will earn or lose if you buy at one price and sell at another. This is a pure calculation, without actual order execution.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/","title":"OrderCheck HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#example-from-file-examplesdemoslowlevel02_trading_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/02_trading_operations.go</code>","text":"<p>The <code>OrderCheck()</code> method performs a safe preliminary validation of an order before sending it. It allows you to verify that the order parameters are correct and that the account has sufficient funds to open it.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n3.1. OrderCheck() - Validate order parameters\")\n\norderCheckReq := &amp;pb.OrderCheckRequest{\n    MqlTradeRequest: &amp;pb.MrpcMqlTradeRequest{\n        Action:      pb.MRPC_ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n        Symbol:      cfg.TestSymbol,\n        Volume:      cfg.TestVolume,\n        OrderType:   pb.ENUM_ORDER_TYPE_TF_ORDER_TYPE_TF_BUY,\n        Price:       tickData.Ask,\n        StopLoss:    0.0,\n        TakeProfit:  0.0,\n        Deviation:   10,\n        TypeFilling: pb.MRPC_ENUM_ORDER_TYPE_FILLING_ORDER_FILLING_IOC, // Immediate-Or-Cancel\n        TypeTime:    pb.MRPC_ENUM_ORDER_TYPE_TIME_ORDER_TIME_GTC,\n        Comment:     \"OrderCheck validation\",\n    },\n}\n\ncheckData, err := account.OrderCheck(ctx, orderCheckReq)\nif err != nil {\n    fmt.Println(\"  \u274c OrderCheck FAILED\")\n    fmt.Printf(\"     Error: %v\\n\", err)\n} else if checkData != nil &amp;&amp; checkData.MqlTradeCheckResult != nil {\n    result := checkData.MqlTradeCheckResult\n    fmt.Println(\"  \u2705 OrderCheck SUCCESS!\")\n    fmt.Printf(\"     Return Code:        %d\\n\", result.ReturnedCode)\n    fmt.Printf(\"     Comment:            %s\\n\", result.Comment)\n    fmt.Printf(\"     Required Margin:    %.2f\\n\", result.Margin)\n    fmt.Printf(\"     Balance After:      %.2f\\n\", result.BalanceAfterDeal)\n    fmt.Printf(\"     Equity After:       %.2f\\n\", result.EquityAfterDeal)\n    fmt.Printf(\"     Free Margin After:  %.2f\\n\", result.FreeMargin)\n    fmt.Printf(\"     Margin Level:       %.2f%%\\n\\n\", result.MarginLevel)\n\n    // OrderCheck returns 0 on successful validation (unlike OrderSend which returns 10009)\n    if result.ReturnedCode == 0 {\n        fmt.Println(\"  \u2713 Order validation PASSED \u2013 safe to proceed with OrderSend()\")\n    } else {\n        // Use helper from errors.go to get human-readable error description\n        fmt.Printf(\"  \u26a0\ufe0f  Validation failed: %s (code: %d)\\n\",\n            mt5.GetRetCodeMessage(uint32(result.ReturnedCode)),\n            result.ReturnedCode)\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#1-form-the-request-structure","title":"1\ufe0f. Form the Request Structure","text":"<pre><code>orderCheckReq := &amp;pb.OrderCheckRequest{ MqlTradeRequest: &amp;pb.MrpcMqlTradeRequest{ ... } }\n</code></pre> <p>A request object is created, containing the <code>MqlTradeRequest</code> structure \u2014 a complete description of the order, as if it were actually being sent to MetaTrader.</p> <p>Key fields:</p> <ul> <li><code>Action</code> \u2013 trade action type (<code>TRADE_ACTION_DEAL</code> \u2014 execute immediately);</li> <li><code>Symbol</code> \u2013 instrument (<code>cfg.TestSymbol</code> from <code>config.json</code>);</li> <li><code>Volume</code> \u2013 order volume;</li> <li><code>OrderType</code> \u2013 direction (<code>BUY</code> or <code>SELL</code>);</li> <li><code>Price</code> \u2013 opening price;</li> <li><code>Deviation</code> \u2013 allowable price deviation in points;</li> <li><code>TypeFilling</code> \u2013 execution mode (<code>IOC</code> \u2013 Immediate-Or-Cancel);</li> <li><code>TypeTime</code> \u2013 order lifetime (<code>GTC</code> \u2013 Good Till Cancelled).</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#2-send-validation-request","title":"2\ufe0f. Send Validation Request","text":"<pre><code>checkData, err := account.OrderCheck(ctx, orderCheckReq)\n</code></pre> <p>The gateway passes the request to MetaTrader, which validates the order for correctness and returns the result \u2014 without actually opening a position.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#3-process-the-result","title":"3\ufe0f. Process the Result","text":"<p>If there is an error (<code>err != nil</code>) \u2014 this means the broker or server does not support <code>OrderCheck</code> (common on demo accounts). If a result is received, the validation fields are displayed:</p> <pre><code>result := checkData.MqlTradeCheckResult\nfmt.Printf(\"     Required Margin:    %.2f\\n\", result.Margin)\nfmt.Printf(\"     Free Margin After:  %.2f\\n\", result.FreeMargin)\nfmt.Printf(\"     Margin Level:       %.2f%%\\n\", result.MarginLevel)\n</code></pre> <ul> <li>Margin \u2013 how much margin will be required for the trade;</li> <li>FreeMargin \u2013 how much free margin will remain after opening;</li> <li>MarginLevel \u2013 margin level as a percentage.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#4-interpret-the-result","title":"4\ufe0f. Interpret the Result","text":"<pre><code>// OrderCheck returns 0 on successful validation (unlike OrderSend which returns 10009)\nif result.ReturnedCode == 0 {\n    fmt.Println(\"  \u2713 Order validation PASSED \u2013 safe to proceed with OrderSend()\")\n} else {\n    // Use helper from errors.go to get human-readable error description\n    fmt.Printf(\"  \u26a0\ufe0f  Validation failed: %s (code: %d)\\n\",\n        mt5.GetRetCodeMessage(uint32(result.ReturnedCode)),\n        result.ReturnedCode)\n}\n</code></pre> <p>Important: OrderCheck uses different success code than trading operations</p> <ol> <li>OrderCheck success: <code>ReturnedCode == 0</code> means validation passed</li> <li>Trading operations success: <code>ReturnedCode == 10009</code> (checked with <code>mt5.IsRetCodeSuccess()</code>)</li> </ol> <p>Why use <code>mt5.GetRetCodeMessage()</code> for errors?</p> <ol> <li>Automatic Error Descriptions: Instead of just showing a number, get human-readable messages for common validation errors:</li> <li><code>TRADE_RETCODE_INVALID_VOLUME</code> - Volume doesn't meet broker requirements</li> <li><code>TRADE_RETCODE_NO_MONEY</code> - Insufficient funds for the trade</li> <li><code>TRADE_RETCODE_INVALID_STOPS</code> - SL/TP levels violate broker rules</li> <li><code>TRADE_RETCODE_INVALID_PRICE</code> - Price out of valid range</li> <li>Consistency: Same error handling pattern used across all trading operations</li> <li>Centralized: All 40+ error codes defined in <code>package/Helpers/errors.go</code></li> </ol> <p>If <code>ReturnedCode == 0</code> \u2192 the order passed validation and it's safe to proceed with <code>OrderSend()</code>. Any other value indicates a validation error that should be fixed before attempting to send the order.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OrderCheckData {\n  MrpcMqlTradeCheckResult MqlTradeCheckResult = 1;\n}\n\nmessage MrpcMqlTradeCheckResult {\n  int32 ReturnedCode = 1;\n  string Comment = 2;\n  double Margin = 3;\n  double BalanceAfterDeal = 4;\n  double EquityAfterDeal = 5;\n  double FreeMargin = 6;\n  double MarginLevel = 7;\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>\u2705 OrderCheck SUCCESS!\n     Return Code:        0\n     Comment:            Request verified successfully\n     Required Margin:    120.50\n     Balance After:      9879.50\n     Equity After:       9879.50\n     Free Margin After:  9759.00\n     Margin Level:       1120.75%\n\n\u2713 Order validation PASSED \u2013 safe to proceed with OrderSend()\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OrderCheck()</code> method is used for:</p> <ul> <li>validating order correctness before sending;</li> <li>assessing future account state after the trade;</li> <li>protection from errors and broker rejections;</li> <li>safe testing of strategies and robots.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderCheck_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OrderCheck()</code> is a \"rehearsal\" before a trade. It checks whether an order with the specified parameters can be opened, and how balance, margin, and equity will change after the trade. If everything is correct (code <code>0</code>) \u2014 you can safely proceed with <code>OrderSend()</code>.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/","title":"OrderClose HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#example-from-file-examplesdemoslowlevel02_trading_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/02_trading_operations.go</code>","text":"<p>The <code>OrderClose()</code> method is used to close a previously opened position by order ticket. This is the final step of the trading cycle: after <code>OrderSend()</code> (opening) and <code>OrderModify()</code> (modifying parameters), <code>OrderClose()</code> completes the trade and locks in the result \u2014 profit or loss.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n4.3. OrderClose() - Close the position\")\n\ncloseReq := &amp;pb.OrderCloseRequest{\n    Ticket:   orderTicket,\n    Volume:   cfg.TestVolume,\n    Slippage: 10,\n}\n\ncloseData, err := account.OrderClose(ctx, closeReq)\nif !helpers.PrintShortError(err, \"OrderClose failed\") {\n    fmt.Printf(\"  Order close result:\\n\")\n    fmt.Printf(\"    Return Code:                 %d (%s)\\n\", closeData.ReturnedCode, closeData.ReturnedStringCode)\n    fmt.Printf(\"    Description:                 %s\\n\", closeData.ReturnedCodeDescription)\n    fmt.Printf(\"    Close Mode:                  %v\\n\", closeData.CloseMode)\n\n    // Check if position closed successfully using helper from errors.go\n    if mt5.IsRetCodeSuccess(closeData.ReturnedCode) {\n        fmt.Printf(\"    \u2713 Position CLOSED successfully!\\n\")\n    } else {\n        fmt.Printf(\"    \u274c Close failed: %s (code: %d)\\n\",\n            mt5.GetRetCodeMessage(closeData.ReturnedCode),\n            closeData.ReturnedCode)\n    }\n} else {\n    fmt.Printf(\"    \u2717 Order execution FAILED - check return code and comment\\n\")\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#1-form-the-close-request","title":"1\ufe0f. Form the Close Request","text":"<pre><code>closeReq := &amp;pb.OrderCloseRequest{\n    Ticket:   orderTicket,\n    Volume:   cfg.TestVolume,\n    Slippage: 10,\n}\n</code></pre> Field Description Ticket Order number to close. Obtained from <code>OrderSend()</code>. Volume Position volume to close. Can be partial. Slippage Maximum allowable price deviation (in points). <p>\ud83d\udca1 Slippage \u2014 protection from slippage. If the price moved too far, the broker may reject the close.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#2-send-request-to-broker","title":"2\ufe0f. Send Request to Broker","text":"<pre><code>closeData, err := account.OrderClose(ctx, closeReq)\n</code></pre> <p>The gateway method makes a gRPC call to the MetaTrader server. If the broker accepts the request \u2014 it closes the position at market price or considering the specified <code>slippage</code>.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#3-process-the-response","title":"3\ufe0f. Process the Response","text":"<pre><code>fmt.Printf(\"    Return Code: %d (%s)\\n\", closeData.ReturnedCode, closeData.ReturnedStringCode)\nfmt.Printf(\"    Description: %s\\n\", closeData.ReturnedCodeDescription)\nfmt.Printf(\"    Close Mode:  %v\\n\", closeData.CloseMode)\n</code></pre> <p>Main response fields:</p> Field Value ReturnedCode Result code (<code>10009</code> = successful). ReturnedStringCode Text designation (e.g., <code>TRADE_RETCODE_DONE</code>). ReturnedCodeDescription Detailed result description (human-readable). CloseMode Close mode (usually <code>MARKET</code>)."},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#4-verify-operation-success","title":"4\ufe0f. Verify Operation Success","text":"<pre><code>// Check if position closed successfully using helper from errors.go\nif mt5.IsRetCodeSuccess(closeData.ReturnedCode) {\n    fmt.Printf(\"    \u2713 Position CLOSED successfully!\\n\")\n} else {\n    fmt.Printf(\"    \u274c Close failed: %s (code: %d)\\n\",\n        mt5.GetRetCodeMessage(closeData.ReturnedCode),\n        closeData.ReturnedCode)\n}\n</code></pre> <p>Why use <code>mt5.IsRetCodeSuccess()</code> instead of checking <code>== 10009</code> manually?</p> <ol> <li>Code Clarity: Function name <code>IsRetCodeSuccess()</code> immediately tells you what is being validated, unlike magic number <code>10009</code></li> <li>Automatic Error Descriptions: <code>mt5.GetRetCodeMessage()</code> provides ready-to-use error messages for all 40+ return codes</li> <li>Common Errors Covered: The helper automatically handles typical close operation errors:</li> <li><code>TRADE_RETCODE_MARKET_CLOSED</code> - Market closed, cannot close position</li> <li><code>TRADE_RETCODE_INVALID_VOLUME</code> - Invalid volume specified</li> <li><code>TRADE_RETCODE_REQUOTE</code> - Price changed, retry needed</li> <li><code>TRADE_RETCODE_POSITION_CLOSED</code> - Position already closed</li> <li>Maintainability: Centralized logic in <code>package/Helpers/errors.go</code> - one place to update for all projects</li> </ol> <p>Code <code>10009</code> (<code>TRADE_RETCODE_DONE</code>) \u2014 standard confirmation of successful trading request execution.</p> <p>If the code is different, the helper functions automatically provide the rejection reason without manually checking <code>ReturnedCodeDescription</code>. This makes error handling consistent across all trading operations.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OrderCloseData {\n  uint32 ReturnedCode = 1;           // Result code (TRADE_RETCODE_*)\n  string ReturnedStringCode = 2;     // Text designation\n  string ReturnedCodeDescription = 3;// Result description\n  ENUM_CLOSE_MODE CloseMode = 4;     // Position close mode\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Order close result:\n    Return Code:                 10009 (TRADE_RETCODE_DONE)\n    Description:                 Request executed successfully\n    Close Mode:                  MARKET\n    \u2713 Position CLOSED successfully!\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OrderClose()</code> method is used for:</p> <ul> <li>closing an active position fully or partially;</li> <li>completing the trading cycle (open \u2192 modify \u2192 close);</li> <li>testing trading strategies with full order lifecycle;</li> <li>locking in profit or loss on a trade.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderClose_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OrderClose()</code> is the command to the broker to close a trade. It says: \"Close this position at market, if the price hasn't moved more than 10 pips (slippage)\". If <code>10009</code> is returned \u2014 everything succeeded: the position is closed, the result is locked in, the trading cycle is complete.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/","title":"OrderModify HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#example-from-file-examplesdemoslowlevel02_trading_operationsgo","title":"Example from file: <code>examples\\demos\\lowlevel\\02_trading_operations.go</code>","text":"<p>The <code>OrderModify()</code> method is used to modify parameters of an already opened position or order, such as adding Stop Loss (SL) and Take Profit (TP) levels. This call does not open a new trade \u2014 it updates an existing one by its ticket.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n4.2. OrderModify() - Add Stop Loss and Take Profit\")\n\n// Calculate SL/TP levels (10 pips SL, 20 pips TP)\nstopLoss := sendData.Price - (10 * pipSize)\ntakeProfit := sendData.Price + (20 * pipSize)\n\nmodifyReq := &amp;pb.OrderModifyRequest{\n    Ticket:     orderTicket,\n    StopLoss:   &amp;stopLoss,\n    TakeProfit: &amp;takeProfit,\n}\n\nmodifyData, err := account.OrderModify(ctx, modifyReq)\nif !helpers.PrintShortError(err, \"OrderModify failed\") {\n    fmt.Printf(\"  Order modify result:\\n\")\n    fmt.Printf(\"    Return Code:                 %d\\n\", modifyData.ReturnedCode)\n    fmt.Printf(\"    Order Ticket:                %d\\n\", modifyData.Order)\n    fmt.Printf(\"    Stop Loss:                   %.5f\\n\", stopLoss)\n    fmt.Printf(\"    Take Profit:                 %.5f\\n\", takeProfit)\n    fmt.Printf(\"    Comment:                     %s\\n\", modifyData.Comment)\n\n    // Check if modification was successful using helper from errors.go\n    if mt5.IsRetCodeSuccess(modifyData.ReturnedCode) {\n        fmt.Printf(\"    \u2713 Position MODIFIED successfully!\\n\")\n    } else {\n        fmt.Printf(\"    \u274c Modification failed: %s (code: %d)\\n\",\n            mt5.GetRetCodeMessage(modifyData.ReturnedCode),\n            modifyData.ReturnedCode)\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#1-calculate-sl-and-tp-levels","title":"1\ufe0f. Calculate SL and TP Levels","text":"<pre><code>stopLoss := sendData.Price - (10 * pipSize)\ntakeProfit := sendData.Price + (20 * pipSize)\n</code></pre> <p>After the order is opened (<code>OrderSend()</code> returned <code>sendData.Price</code>), stop levels are calculated:</p> <ul> <li>StopLoss is set 10 pips below the opening price;</li> <li>TakeProfit \u2014 20 pips above.</li> </ul> <p><code>pipSize</code> \u2014 size of one pip (for EURUSD = 0.0001).</p> <p>\ud83d\udca1 This way we programmatically set protection levels and profit targets.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#2-form-the-modification-request","title":"2\ufe0f. Form the Modification Request","text":"<pre><code>modifyReq := &amp;pb.OrderModifyRequest{\n    Ticket:     orderTicket,\n    StopLoss:   &amp;stopLoss,\n    TakeProfit: &amp;takeProfit,\n}\n</code></pre> <p>Create the <code>OrderModifyRequest</code> structure.</p> Field Description <code>Ticket</code> Order number to modify (obtained from <code>OrderSend()</code>). <code>StopLoss</code> Stop loss price. Uses pointer (<code>&amp;</code>), as the field is optional. <code>TakeProfit</code> Take profit price. Also a pointer. <p>You can pass only one of these fields if you need to change only SL or TP.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#3-send-request-to-broker","title":"3\ufe0f. Send Request to Broker","text":"<pre><code>modifyData, err := account.OrderModify(ctx, modifyReq)\n</code></pre> <p>The gateway method calls <code>OrderModify()</code> on the MetaTrader side. The server validates level correctness (e.g., SL/TP must not be closer than the minimum <code>StopsLevel</code> distance).</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#4-parse-the-response","title":"4\ufe0f. Parse the Response","text":"<pre><code>fmt.Printf(\"    Return Code: %d\\n\", modifyData.ReturnedCode)\nfmt.Printf(\"    Order Ticket: %d\\n\", modifyData.Order)\nfmt.Printf(\"    Stop Loss: %.5f\\n\", stopLoss)\nfmt.Printf(\"    Take Profit: %.5f\\n\", takeProfit)\nfmt.Printf(\"    Comment: %s\\n\", modifyData.Comment)\n</code></pre> <p>Key fields:</p> <ul> <li>ReturnedCode \u2014 operation status (<code>10009</code> = successfully executed);</li> <li>Order \u2014 ticket of the modified order;</li> <li>Comment \u2014 server response (e.g., \"Request executed successfully\").</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#5-verify-operation-success","title":"5\ufe0f. Verify Operation Success","text":"<pre><code>// Check if modification was successful using helper from errors.go\nif mt5.IsRetCodeSuccess(modifyData.ReturnedCode) {\n    fmt.Printf(\"    \u2713 Position MODIFIED successfully!\\n\")\n} else {\n    fmt.Printf(\"    \u274c Modification failed: %s (code: %d)\\n\",\n        mt5.GetRetCodeMessage(modifyData.ReturnedCode),\n        modifyData.ReturnedCode)\n}\n</code></pre> <p>Why use <code>mt5.IsRetCodeSuccess()</code> instead of checking <code>== 10009</code> manually?</p> <ol> <li>Self-Documenting: The function name clearly explains what is being validated</li> <li>Centralized Logic: Single source of truth for success validation in <code>package/Helpers/errors.go</code></li> <li>Better Error Messages: <code>mt5.GetRetCodeMessage()</code> automatically provides human-readable descriptions for common errors like:</li> <li><code>TRADE_RETCODE_INVALID_STOPS</code> - SL/TP levels too close to market price</li> <li><code>TRADE_RETCODE_INVALID_ORDER</code> - Order already closed or doesn't exist</li> <li><code>TRADE_RETCODE_REQUOTE</code> - Price changed, need to retry</li> <li>Consistency: All code examples use the same error checking pattern</li> </ol> <p>Code <code>10009</code> (<code>TRADE_RETCODE_DONE</code>) means the changes were applied successfully.</p> <p>If the code is different \u2014 the broker rejected the request. The helper functions provide detailed error descriptions to understand why. Common reasons include: - SL/TP levels too close (violating <code>SYMBOL_TRADE_STOPS_LEVEL</code>) - Order already closed - Invalid ticket number</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OrderModifyData {\n  uint32 ReturnedCode = 1;  // Result code (TRADE_RETCODE_*)\n  uint64 Order = 2;         // Order number\n  string Comment = 3;       // Broker comment\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Order modify result:\n    Return Code:                 10009\n    Order Ticket:                128013245\n    Stop Loss:                   1.08442\n    Take Profit:                 1.08742\n    Comment:                     Request executed successfully\n    \u2713 Position MODIFIED successfully!\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OrderModify()</code> method is used for:</p> <ul> <li>setting Stop Loss and Take Profit after opening a trade;</li> <li>changing existing SL/TP levels;</li> <li>managing active positions from code;</li> <li>adapting orders to market conditions without closing the position.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderModify_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OrderModify()</code> is editing an open position. It allows you to add or change stop loss and take profit for an existing order. If everything is correct (code <code>10009</code>), the broker applies the changes, and the trade is updated on the server.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/","title":"OrderSend HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#example-from-file-examplesdemoslowlevel02_trading_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/02_trading_operations.go</code>","text":"<p>The <code>OrderSend()</code> method executes a real trading operation \u2014 sends an order to the broker through the gateway and returns the processing result. While <code>OrderCheck()</code> only validates parameter correctness, <code>OrderSend()</code> is the actual order execution.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#primary-purpose","title":"\ud83e\uddf1 Primary Purpose","text":"<p><code>OrderSend()</code> is used for:</p> <ul> <li>opening market trades (<code>BUY</code>, <code>SELL</code>);</li> <li>placing pending orders (<code>BUY_LIMIT</code>, <code>SELL_STOP</code>, etc.);</li> <li>executing trading strategies through the gateway in real time.</li> </ul> <p>After execution, the broker returns a result \u2014 the order was executed, rejected, or queued.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n4.1. OrderSend() - Place market BUY order\")\n\nslippage := uint64(10)\norderSendReq := &amp;pb.OrderSendRequest{\n    Symbol:    cfg.TestSymbol,\n    Operation: pb.TMT5_ENUM_ORDER_TYPE_TMT5_ORDER_TYPE_BUY,\n    Volume:    cfg.TestVolume,\n    Price:     &amp;tickData.Ask,\n    Slippage:  &amp;slippage,\n}\n\nsendData, err := account.OrderSend(ctx, orderSendReq)\nif !helpers.PrintShortError(err, \"OrderSend failed\") {\n    fmt.Printf(\"  Order sent result:\\n\")\n    fmt.Printf(\"    Return Code:                 %d\\n\", sendData.ReturnedCode)\n    fmt.Printf(\"    Deal Ticket:                 %d\\n\", sendData.Deal)\n    fmt.Printf(\"    Order Ticket:                %d\\n\", sendData.Order)\n    fmt.Printf(\"    Volume:                      %.2f\\n\", sendData.Volume)\n    fmt.Printf(\"    Execution Price:             %.5f\\n\", sendData.Price)\n\n    if sendData.Bid &gt; 0 &amp;&amp; sendData.Ask &gt; 0 {\n        fmt.Printf(\"    Market Bid:                  %.5f\\n\", sendData.Bid)\n        fmt.Printf(\"    Market Ask:                  %.5f\\n\", sendData.Ask)\n    }\n\n    fmt.Printf(\"    Comment:                     %s\\n\", sendData.Comment)\n\n    // Check if order executed successfully using helper from errors.go\n    if mt5.IsRetCodeSuccess(sendData.ReturnedCode) {\n        fmt.Printf(\"    \u2713 Order EXECUTED successfully!\\n\")\n        orderTicket := sendData.Order\n        _ = orderTicket // example placeholder\n    } else {\n        fmt.Printf(\"    \u274c Order failed: %s (code: %d)\\n\",\n            mt5.GetRetCodeMessage(sendData.ReturnedCode),\n            sendData.ReturnedCode)\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#1-define-allowable-price-deviation","title":"1\ufe0f. Define Allowable Price Deviation","text":"<pre><code>slippage := uint64(10)\n</code></pre> <p><code>slippage</code> \u2014 maximum allowable price deviation (in points) between the moment of sending and trade execution.</p> <p>For example: if you want to buy at 1.0850, but the price moved to 1.0851 \u2014 with <code>slippage = 10</code> the order will still be accepted.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#2-form-the-request","title":"2\ufe0f. Form the Request","text":"<pre><code>orderSendReq := &amp;pb.OrderSendRequest{ ... }\n</code></pre> <p>Set order parameters:</p> <ul> <li>Symbol \u2014 instrument (<code>cfg.TestSymbol</code> from configuration);</li> <li>Operation \u2014 order type (<code>BUY</code> or <code>SELL</code>);</li> <li>Volume \u2014 trade volume in lots (<code>cfg.TestVolume</code>);</li> <li>Price \u2014 current Ask price for buying;</li> <li>Slippage \u2014 maximum allowable price deviation.</li> </ul> <p>You can also specify StopLoss, TakeProfit or Comment \u2014 either here or later through <code>OrderModify()</code>.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#3-send-order-to-server","title":"3\ufe0f. Send Order to Server","text":"<pre><code>sendData, err := account.OrderSend(ctx, orderSendReq)\n</code></pre> <p>A gRPC call is made. The MetaTrader server validates parameters and executes the order (or rejects it).</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#4-parse-the-response","title":"4\ufe0f. Parse the Response","text":"<pre><code>fmt.Printf(\"    Return Code: %d\\n\", sendData.ReturnedCode)\nfmt.Printf(\"    Deal Ticket: %d\\n\", sendData.Deal)\nfmt.Printf(\"    Order Ticket: %d\\n\", sendData.Order)\nfmt.Printf(\"    Execution Price: %.5f\\n\", sendData.Price)\n</code></pre> <p>Key response fields:</p> <ul> <li>ReturnedCode \u2014 operation result (<code>10009</code> = successfully executed);</li> <li>Deal \u2014 deal number, if the order was already executed;</li> <li>Order \u2014 order number, if the order was created;</li> <li>Volume, Price \u2014 execution volume and price.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#5-display-additional-data-bidask","title":"5\ufe0f. Display Additional Data (Bid/Ask)","text":"<pre><code>if sendData.Bid &gt; 0 &amp;&amp; sendData.Ask &gt; 0 {\n    fmt.Printf(\"    Market Bid: %.5f\\n\", sendData.Bid)\n    fmt.Printf(\"    Market Ask: %.5f\\n\", sendData.Ask)\n}\n</code></pre> <p>MetaTrader may return current market prices at the moment of execution. If the broker does not provide this data, they are zero.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#6-verify-execution-success","title":"6\ufe0f. Verify Execution Success","text":"<pre><code>// Check if order executed successfully using helper from errors.go\nif mt5.IsRetCodeSuccess(sendData.ReturnedCode) {\n    fmt.Printf(\"    \u2713 Order EXECUTED successfully!\\n\")\n    orderTicket := sendData.Order\n    _ = orderTicket // example placeholder\n} else {\n    fmt.Printf(\"    \u274c Order failed: %s (code: %d)\\n\",\n        mt5.GetRetCodeMessage(sendData.ReturnedCode),\n        sendData.ReturnedCode)\n}\n</code></pre> <p>Why use <code>mt5.IsRetCodeSuccess()</code> instead of checking <code>== 10009</code> manually?</p> <ol> <li>Readability: <code>IsRetCodeSuccess()</code> is self-documenting - you immediately understand what's being checked</li> <li>Maintainability: If MT5 adds more success codes in the future, we update one place instead of all manual checks</li> <li>Error Messages: <code>mt5.GetRetCodeMessage()</code> provides human-readable descriptions for all 40+ return codes</li> <li>Type Safety: The helper function is defined in <code>package/Helpers/errors.go</code> with proper type checking</li> </ol> <p>Code <code>10009</code> (<code>TRADE_RETCODE_DONE</code>) means the order was executed successfully and the position is open. The helper functions are defined in errors.go and provide a cleaner, more maintainable way to validate trade operations.</p>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OrderSendData {\n  uint32 ReturnedCode = 1;\n  uint64 Deal = 2;\n  uint64 Order = 3;\n  double Volume = 4;\n  double Price = 5;\n  double Bid = 6;\n  double Ask = 7;\n  string Comment = 8;\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#example-terminal-output","title":"\ud83d\udca1 Example Terminal Output","text":"<pre><code>Order sent result:\n    Return Code:                 10009\n    Deal Ticket:                 128013245\n    Order Ticket:                128013245\n    Volume:                      0.10\n    Execution Price:             1.08542\n    Market Bid:                  1.08540\n    Market Ask:                  1.08542\n    Comment:                     Request executed successfully\n    \u2713 Order EXECUTED successfully!\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p><code>OrderSend()</code> is used for:</p> <ul> <li>opening market and pending orders;</li> <li>executing strategies through the gateway;</li> <li>testing trading algorithms;</li> <li>verifying correct order execution.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/4.%20Trading_Operations_HOW/OrderSend_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OrderSend()</code> is the \"real Make Trade button\". It sends the order to the broker, receives a response, and reports whether the order was executed, rejected, or awaiting execution.</p>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookAdd_HOW/","title":"MarketBookAdd HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookAdd_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>MarketBookAdd()</code> method subscribes to Depth of Market (DOM) \u2014 market depth for a specified symbol. DOM shows real order levels (Bid/Ask levels, volumes, and prices), if the broker provides them.</p>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookAdd_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>// Use short timeout\nbookAddCtx, bookAddCancel := context.WithTimeout(context.Background(), 5*time.Second)\ndefer bookAddCancel()\n\nmarketBookAddReq := &amp;pb.MarketBookAddRequest{\n    Symbol: cfg.TestSymbol, // symbol from config.json (test_symbol parameter)\n}\nmarketBookAddData, err := account.MarketBookAdd(bookAddCtx, marketBookAddReq)\nif err != nil {\n    fmt.Printf(\"  \u274c Subscription failed: %v\\n\", err)\n    fmt.Println(\"     \u2192 Broker does not support DOM for this symbol\")\n} else {\n    if marketBookAddData.Success {\n        fmt.Printf(\"  \u2713 Subscription accepted for '%s'\\n\", cfg.TestSymbol)\n        fmt.Println(\"     \u2192 This doesn't mean data will be available\")\n    } else {\n        fmt.Println(\"  \u274c Subscription rejected by broker\")\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookAdd_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>bookAddCtx, bookAddCancel := context.WithTimeout(context.Background(), 5*time.Second)\ndefer bookAddCancel()\n</code></pre> <p>A context with a 5-second timeout is created to prevent the request from hanging if the server doesn't respond.</p> <pre><code>marketBookAddReq := &amp;pb.MarketBookAddRequest{\n    Symbol: cfg.TestSymbol,\n}\n</code></pre> <p>A DOM subscription request is formed for the test symbol (e.g., <code>EURUSD</code>). The <code>cfg.TestSymbol</code> field is taken from the <code>config.json</code> configuration file.</p> <pre><code>marketBookAddData, err := account.MarketBookAdd(bookAddCtx, marketBookAddReq)\n</code></pre> <p>A gRPC request is sent to MetaTrader. The server returns a flag indicating whether the DOM subscription for the specified instrument was successful.</p> <pre><code>if err != nil {\n    fmt.Printf(\"  \u274c Subscription failed: %v\\n\", err)\n    fmt.Println(\"     \u2192 Broker does not support DOM for this symbol\")\n} else {\n    if marketBookAddData.Success {\n        fmt.Printf(\"  \u2713 Subscription accepted for '%s'\\n\", cfg.TestSymbol)\n        fmt.Println(\"     \u2192 This doesn't mean data will be available\")\n    } else {\n        fmt.Println(\"  \u274c Subscription rejected by broker\")\n    }\n}\n</code></pre> <p>Handling possible scenarios:</p> <ul> <li>Error (<code>err</code>) \u2014 broker or server does not support DOM.</li> <li>Subscription accepted (<code>Success = true</code>) \u2014 broker allowed subscription, but doesn't guarantee data availability.</li> <li>Subscription rejected \u2014 broker explicitly refused (common on demo or forex accounts).</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookAdd_HOW/#what-is-depth-of-market-dom","title":"\ud83d\udcd8 What is Depth of Market (DOM)","text":"<p>DOM (market depth) \u2014 a table of all available Bid and Ask levels, reflecting current limit orders from participants. It shows not only current buy/sell prices, but also volumes at each level.</p> <p>DOM is usually available for:</p> <ul> <li>exchange instruments (futures, stocks, CFDs);</li> <li>instruments with real order book from liquidity providers.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookAdd_HOW/#why-dom-is-often-unavailable-on-forex-and-demo","title":"\u26a0\ufe0f Why DOM is Often Unavailable on Forex and Demo","text":"<ol> <li>Forex is an OTC market, there is no centralized order book. Therefore, brokers usually don't publish order levels.</li> <li>On demo accounts, brokers often don't form real DOM to reduce server load.</li> <li>Not all brokers support Level II data \u2014 some provide only Bid/Ask.</li> </ol>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookAdd_HOW/#what-to-do-if-dom-is-unavailable","title":"\ud83d\udca1 What to Do if DOM is Unavailable","text":"<ul> <li>Try another instrument (e.g., stock CFDs or futures).</li> <li>Check on a real account, not demo.</li> <li>Ask your broker if the server supports Depth of Market.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookAdd_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>MarketBookAdd()</code> attempts to connect to the market depth data stream. If the broker doesn't support DOM for the selected symbol, the server will return an error or empty subscription. This is normal behavior for forex and demo servers.</p>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookGet_HOW/","title":"MarketBookGet HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookGet_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>MarketBookGet()</code> method makes a one-time request to retrieve a market depth snapshot (Depth of Market, DOM) for a specified symbol. If the broker supports DOM, price levels and order volumes are returned.</p>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookGet_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n6.2. MarketBookGet() - Get DOM snapshot\")\nfmt.Println(\"    Testing if data is actually available...\")\n\nbookGetCtx, bookGetCancel := context.WithTimeout(context.Background(), 3*time.Second)\ndefer bookGetCancel()\n\nmarketBookGetReq := &amp;pb.MarketBookGetRequest{\n    Symbol: cfg.TestSymbol, // symbol from config.json (test_symbol parameter)\n}\nmarketBookGetData, err := account.MarketBookGet(bookGetCtx, marketBookGetReq)\nif err != nil {\n    fmt.Println(\"  \u274c No data available (timeout)\")\n    fmt.Println(\"     \u2192 This is EXPECTED for forex pairs on demo accounts\")\n    fmt.Println(\"     \u2192 Not an error - just a limitation of forex market structure\")\n} else {\n    if len(marketBookGetData.Book) &gt; 0 {\n        fmt.Printf(\"  \u2705 SUCCESS! Received %d price levels\\n\", len(marketBookGetData.Book))\n        fmt.Println(\"     \u2192 This is UNUSUAL for forex - broker provides limited DOM\")\n        fmt.Println()\n\n        maxShow := 5\n        if len(marketBookGetData.Book) &lt; maxShow {\n            maxShow = len(marketBookGetData.Book)\n        }\n        fmt.Println(\"  First few levels:\")\n        for i := 0; i &lt; maxShow; i++ {\n            level := marketBookGetData.Book[i]\n            bookType := \"SELL\"\n            if level.Type == pb.BookType_BOOK_TYPE_BUY {\n                bookType = \"BUY\"\n            }\n            fmt.Printf(\"    [%d] %s  Price: %.5f  Volume: %.2f\\n\", i+1, bookType, level.Price, level.VolumeDouble)\n        }\n    } else {\n        fmt.Println(\"  \u26a0\ufe0f  Call succeeded but no data returned\")\n        fmt.Println(\"     \u2192 Broker has no DOM data to show\")\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookGet_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<ul> <li>Create context with timeout:</li> </ul> <pre><code>bookGetCtx, bookGetCancel := context.WithTimeout(context.Background(), 3*time.Second)\ndefer bookGetCancel()\n</code></pre> <p>A 3-second timeout is needed to avoid hanging if the server doesn't provide data.</p> <ul> <li>Form the request:</li> </ul> <pre><code>marketBookGetReq := &amp;pb.MarketBookGetRequest{ Symbol: cfg.TestSymbol }\n</code></pre> <p>The symbol is taken from the <code>config.json</code> configuration file (<code>test_symbol</code> field).</p> <ul> <li>Send the request:</li> </ul> <pre><code>marketBookGetData, err := account.MarketBookGet(bookGetCtx, marketBookGetReq)\n</code></pre> <p>Returns the <code>Book</code> array \u2014 a list of price levels with volumes.</p> <ul> <li>Error (no data):</li> </ul> <pre><code>if err != nil {\n    fmt.Println(\"  \u274c No data available (timeout)\")\n}\n</code></pre> <p>Means the broker doesn't provide DOM (common on demo or forex pairs).</p> <ul> <li>Data available:</li> </ul> <pre><code>if len(marketBookGetData.Book) &gt; 0 {\n    fmt.Printf(\"  \u2705 SUCCESS! Received %d price levels\\n\", len(marketBookGetData.Book))\n}\n</code></pre> <p>Displays the number of order book levels. This is rare for forex.</p> <ul> <li>Display first levels:</li> </ul> <pre><code>for i := 0; i &lt; maxShow; i++ {\n    level := marketBookGetData.Book[i]\n    fmt.Printf(\"[%d] %s Price: %.5f Volume: %.2f\\n\", i+1, bookType, level.Price, level.VolumeDouble)\n}\n</code></pre> <p>Shows the type (<code>BUY</code> or <code>SELL</code>), price, and volume for the first 5 levels.</p>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookGet_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message MarketBookGetData {\n  repeated BookStruct Book = 1;\n}\n\nmessage BookStruct {\n  BookType Type = 1;      // BUY or SELL\n  double Price = 2;       // price level\n  int64 Volume = 3;       // volume at level (deprecated)\n  double VolumeDouble = 4; // volume at level with extended precision\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookGet_HOW/#example-successful-output","title":"Example Successful Output","text":"<pre><code>\u2705 SUCCESS! Received 5 price levels\n     \u2192 This is UNUSUAL for forex - broker provides limited DOM\n\n  First few levels:\n    [1] SELL  Price: 1.08610  Volume: 50000.00\n    [2] SELL  Price: 1.08608  Volume: 30000.00\n    [3] BUY   Price: 1.08595  Volume: 40000.00\n    [4] BUY   Price: 1.08592  Volume: 20000.00\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookGet_HOW/#if-no-data-available","title":"If No Data Available","text":"<pre><code>\u274c No data available (timeout)\n     \u2192 This is EXPECTED for forex pairs on demo accounts\n</code></pre> <p>This is normal: on forex and demo accounts, brokers usually don't form an order book.</p>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookGet_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>MarketBookGet()</code> method is used for:</p> <ul> <li>one-time retrieval of current DOM snapshot;</li> <li>checking if the broker supports market depth;</li> <li>liquidity analysis or API testing.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookRelease_HOW/","title":"MarketBookRelease HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookRelease_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>MarketBookRelease()</code> method terminates the Depth of Market (DOM) subscription that was previously opened by the <code>MarketBookAdd()</code> method. It is used for proper resource cleanup and closing the connection with the server.</p>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookRelease_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>fmt.Println(\"\\n6.3. MarketBookRelease() - Unsubscribe from DOM\")\nfmt.Println(\"    Cleaning up subscription...\")\n\nbookReleaseCtx, bookReleaseCancel := context.WithTimeout(context.Background(), 5*time.Second)\ndefer bookReleaseCancel()\n\nmarketBookReleaseReq := &amp;pb.MarketBookReleaseRequest{\n    Symbol: cfg.TestSymbol, // symbol from config.json (test_symbol)\n}\nmarketBookReleaseData, err := account.MarketBookRelease(bookReleaseCtx, marketBookReleaseReq)\nif err != nil {\n    fmt.Printf(\"  \u26a0\ufe0f  Unsubscribe failed: %v\\n\", err)\n    fmt.Println(\"     \u2192 Not critical - connection will close anyway\")\n} else {\n    if marketBookReleaseData.Success {\n        fmt.Println(\"  \u2713 Unsubscribed successfully\")\n    } else {\n        fmt.Println(\"  \u26a0\ufe0f  Unsubscribe reported unsuccessful\")\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookRelease_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<ul> <li>Create context with timeout:</li> </ul> <pre><code>bookReleaseCtx, bookReleaseCancel := context.WithTimeout(context.Background(), 5*time.Second)\ndefer bookReleaseCancel()\n</code></pre> <p>A 5-second timeout prevents hanging when communicating with the server.</p> <ul> <li>Form the request:</li> </ul> <pre><code>marketBookReleaseReq := &amp;pb.MarketBookReleaseRequest{ Symbol: cfg.TestSymbol }\n</code></pre> <p>Specify the symbol for which the DOM subscription was previously made.</p> <ul> <li>Send the request:</li> </ul> <pre><code>marketBookReleaseData, err := account.MarketBookRelease(bookReleaseCtx, marketBookReleaseReq)\n</code></pre> <p>A gRPC call is executed, requesting subscription closure.</p> <ul> <li>Error handling:</li> </ul> <pre><code>if err != nil {\n    fmt.Printf(\"  \u26a0\ufe0f  Unsubscribe failed: %v\\n\", err)\n    fmt.Println(\"     \u2192 Not critical - connection will close anyway\")\n}\n</code></pre> <p>Even if an error occurs, it's not critical \u2014 all subscriptions will be automatically closed when the session ends.</p> <ul> <li>Successful or unsuccessful unsubscribe:</li> </ul> <pre><code>if marketBookReleaseData.Success {\n    fmt.Println(\"  \u2713 Unsubscribed successfully\")\n} else {\n    fmt.Println(\"  \u26a0\ufe0f  Unsubscribe reported unsuccessful\")\n}\n</code></pre> <p>If <code>Success = true</code>, the broker confirmed successful subscription closure.</p>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookRelease_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message MarketBookReleaseData {\n  bool Success = 1; // True if unsubscription was successful\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookRelease_HOW/#output-examples","title":"Output Examples","text":""},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookRelease_HOW/#successful-unsubscribe","title":"\u2705 Successful Unsubscribe","text":"<pre><code>\u2713 Unsubscribed successfully\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookRelease_HOW/#unsubscribe-error","title":"Unsubscribe Error","text":"<pre><code>\u26a0\ufe0f  Unsubscribe failed: subscription not found\n     \u2192 Not critical - connection will close anyway\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookRelease_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>MarketBookRelease()</code> method is used for:</p> <ul> <li>properly terminating DOM subscription;</li> <li>freeing server resources;</li> <li>demonstrating the complete market depth workflow cycle (Add \u2192 Get \u2192 Release);</li> <li>ensuring clean connection closure in tests or demonstrations.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/5.%20Market_Depth%28DOM%29_HOW/MarketBookRelease_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>MarketBookRelease()</code> is \"disconnecting from the order book\". If you subscribed to DOM via <code>MarketBookAdd()</code>, this call neatly closes the subscription, freeing the connection and preventing accumulation of excess resources on the server.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoMarginRate_HOW/","title":"SymbolInfoMarginRate HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoMarginRate_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolInfoMarginRate()</code> method is used to retrieve margin requirements for a symbol \u2014 that is, how much funds are needed to open and maintain a position for a specific instrument.</p> <p>It allows you to find out two key parameters:</p> <ul> <li>InitialMarginRate \u2014 coefficient for opening a position;</li> <li>MaintenanceMarginRate \u2014 coefficient for maintaining a position.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoMarginRate_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>marginRateReq := &amp;pb.SymbolInfoMarginRateRequest{\n    Symbol:    cfg.TestSymbol,\n    OrderType: pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY, // Direct protobuf enum\n}\nmarginRateData, err := account.SymbolInfoMarginRate(ctx, marginRateReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoMarginRate failed\")\n} else {\n    fmt.Printf(\"  Initial margin rate (BUY):     %.2f\\n\", marginRateData.InitialMarginRate)\n    fmt.Printf(\"  Maintenance margin rate (BUY): %.2f\\n\", marginRateData.MaintenanceMarginRate)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoMarginRate_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>marginRateReq := &amp;pb.SymbolInfoMarginRateRequest{\n    Symbol:    cfg.TestSymbol,\n    OrderType: pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n}\n</code></pre> <p>A <code>SymbolInfoMarginRateRequest</code> request is created with parameters:</p> <ul> <li><code>Symbol</code> \u2014 trading instrument (e.g., <code>EURUSD</code>);</li> <li><code>OrderType</code> \u2014 order type (<code>BUY</code>, <code>SELL</code>, <code>BUY_LIMIT</code>, etc.).   Different order types can have different margin coefficients.</li> </ul> <pre><code>marginRateData, err := account.SymbolInfoMarginRate(ctx, marginRateReq)\n</code></pre> <p>The <code>SymbolInfoMarginRate()</code> method is called via gRPC. The result is stored in <code>marginRateData</code>.</p> <pre><code>if err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoMarginRate failed\")\n} else {\n    fmt.Printf(\"  Initial margin rate (BUY):     %.2f\\n\", marginRateData.InitialMarginRate)\n    fmt.Printf(\"  Maintenance margin rate (BUY): %.2f\\n\", marginRateData.MaintenanceMarginRate)\n}\n</code></pre> <p>If there are no errors, both values are displayed:</p> <ul> <li><code>InitialMarginRate</code> \u2014 initial margin coefficient (e.g., 0.02 \u2192 2%);</li> <li><code>MaintenanceMarginRate</code> \u2014 maintenance margin coefficient (e.g., 0.01 \u2192 1%).</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoMarginRate_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<p>After the call, the method returns a protobuf structure:</p> <pre><code>message SymbolInfoMarginRateData {\n  double InitialMarginRate = 1;      // Initial margin for opening a position\n  double MaintenanceMarginRate = 2;  // Maintenance margin for holding a position\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoMarginRate_HOW/#example-of-value-interpretation","title":"\ud83d\udca1 Example of Value Interpretation","text":"Field Value Meaning <code>InitialMarginRate = 0.02</code> 2% For a trade volume of 100,000 EURUSD, 2,000 EUR collateral is needed <code>MaintenanceMarginRate = 0.01</code> 1% To hold the position, 1,000 EUR is required"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoMarginRate_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>SymbolInfoMarginRate()</code> method is used:</p> <ul> <li>to calculate required margin before opening a position;</li> <li>to check risks and available funds in trading algorithms;</li> <li>when modeling trades to assess the impact of leverage;</li> <li>in demo examples where you need to show real trading parameters of a symbol.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoMarginRate_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>SymbolInfoMarginRate()</code> tells you how much collateral is needed to open and hold a trade for a symbol. It's used for risk calculations, limit checks, and choosing the optimal position size.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionQuote_HOW/","title":"SymbolInfoSessionQuote HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionQuote_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolInfoSessionQuote()</code> method is used to retrieve quote session times \u2014 periods when the broker provides quotes for a symbol throughout the week.</p> <p>Each trading instrument in MetaTrader can have one or more such time windows, for example: morning and evening sessions, or a 24/5 round-the-clock mode.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionQuote_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>quoteSessionReq := &amp;pb.SymbolInfoSessionQuoteRequest{\n    Symbol:       cfg.TestSymbol,\n    DayOfWeek:    pb.DayOfWeek_MONDAY,\n    SessionIndex: 0,\n}\nquoteSessionData, err := account.SymbolInfoSessionQuote(ctx, quoteSessionReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoSessionQuote failed\")\n} else {\n    fmt.Printf(\"  Monday quote session #0:\\n\")\n    if quoteSessionData.From != nil {\n        fromTime := quoteSessionData.From.AsTime()\n        fromSeconds := fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second()\n        fmt.Printf(\"    From (seconds from day start): %d\\n\", fromSeconds)\n    }\n    if quoteSessionData.To != nil {\n        toTime := quoteSessionData.To.AsTime()\n        toSeconds := toTime.Hour()*3600 + toTime.Minute()*60 + toTime.Second()\n        fmt.Printf(\"    To (seconds from day start):   %d\\n\", toSeconds)\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionQuote_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>quoteSessionReq := &amp;pb.SymbolInfoSessionQuoteRequest{\n    Symbol:       cfg.TestSymbol,\n    DayOfWeek:    pb.DayOfWeek_MONDAY,\n    SessionIndex: 0,\n}\n</code></pre> <p>A request is created with parameters:</p> <ul> <li><code>Symbol</code> \u2014 trading instrument name (e.g., <code>EURUSD</code>);</li> <li><code>DayOfWeek</code> \u2014 day of the week for which the session is requested (<code>MONDAY</code>, <code>TUESDAY</code>, etc.);</li> <li><code>SessionIndex</code> \u2014 session index for that day (if there are multiple, e.g., morning and evening).</li> </ul> <pre><code>quoteSessionData, err := account.SymbolInfoSessionQuote(ctx, quoteSessionReq)\n</code></pre> <p>A call is made to the MetaTrader server via gRPC. The response contains a structure with <code>From</code> and <code>To</code> fields \u2014 session start and end times.</p> <pre><code>if quoteSessionData.From != nil {\n    fromTime := quoteSessionData.From.AsTime()\n    fromSeconds := fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second()\n    fmt.Printf(\"    From (seconds from day start): %d\\n\", fromSeconds)\n}\n</code></pre> <p>If the <code>From</code> field is filled, it's converted to <code>time.Time</code>, then translated to seconds from the start of the day.</p> <pre><code>if quoteSessionData.To != nil {\n    toTime := quoteSessionData.To.AsTime()\n    toSeconds := toTime.Hour()*3600 + toTime.Minute()*60 + toTime.Second()\n    fmt.Printf(\"    To (seconds from day start):   %d\\n\", toSeconds)\n}\n</code></pre> <p>Similarly, the session end time is calculated.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionQuote_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message SymbolInfoSessionQuoteData {\n  google.protobuf.Timestamp From = 1; // Quote session start time\n  google.protobuf.Timestamp To = 2;   // Quote session end time\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionQuote_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Monday quote session #0:\n    From (seconds from day start): 0\n    To (seconds from day start):   86399\n</code></pre> <p>\ud83d\udcd8 This means quotes are available all day \u2014 from 00:00:00 to 23:59:59.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionQuote_HOW/#i-why-values-can-be-zero","title":"\u2139\ufe0f Why Values Can Be Zero","text":"<p>If the terminal displays:</p> <pre><code>From (seconds from day start): 0\nTo (seconds from day start):   0\n</code></pre> <p>this is not a code error, but one of the standard MetaTrader API behaviors.</p> <p>Reasons:</p> <ol> <li>Instrument trades 24/5 non-stop \u2014 the server doesn't set separate intervals.</li> <li>Broker hasn't configured sessions \u2014 demo servers often return zeros.</li> <li>Gateway doesn't support these fields \u2014 API returns empty <code>Timestamp</code>.</li> <li>Invalid <code>SessionIndex</code> or <code>DayOfWeek</code> \u2014 there may be no sessions on that day.</li> </ol> <p>\u2705 In these cases, <code>0</code> is interpreted as \"active all day\".</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionQuote_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>SymbolInfoSessionQuote()</code> method is used:</p> <ul> <li>to determine active market hours for an instrument;</li> <li>for restricting trading outside working hours;</li> <li>when building analytical panels and trading calendars;</li> <li>in demo examples where it's important to show how to get quote schedules via API.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionQuote_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>SymbolInfoSessionQuote()</code> shows what hours the symbol receives quotes. Even if it returns 0, it means quotes are available all day (24/5).</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionTrade_HOW/","title":"SymbolInfoSessionTrade HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionTrade_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolInfoSessionTrade()</code> method is used to retrieve trading session times \u2014 periods when trading operations are allowed for a symbol.</p> <p>Unlike <code>SymbolInfoSessionQuote()</code> (which shows when quotes are available), this method shows when trading is allowed \u2014 that is, when the server accepts orders and executes trades.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionTrade_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>tradeSessionReq := &amp;pb.SymbolInfoSessionTradeRequest{\n    Symbol:       cfg.TestSymbol,\n    DayOfWeek:    pb.DayOfWeek_MONDAY,\n    SessionIndex: 0,\n}\ntradeSessionData, err := account.SymbolInfoSessionTrade(ctx, tradeSessionReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolInfoSessionTrade failed\")\n} else {\n    fmt.Printf(\"  Monday trade session #0:\\n\")\n    if tradeSessionData.From != nil {\n        fromTime := tradeSessionData.From.AsTime()\n        fromSeconds := fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second()\n        fmt.Printf(\"    From (seconds from day start): %d\\n\", fromSeconds)\n    }\n    if tradeSessionData.To != nil {\n        toTime := tradeSessionData.To.AsTime()\n        toSeconds := toTime.Hour()*3600 + toTime.Minute()*60 + toTime.Second()\n        fmt.Printf(\"    To (seconds from day start):   %d\\n\", toSeconds)\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionTrade_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>tradeSessionReq := &amp;pb.SymbolInfoSessionTradeRequest{\n    Symbol:       cfg.TestSymbol,\n    DayOfWeek:    pb.DayOfWeek_MONDAY,\n    SessionIndex: 0,\n}\n</code></pre> <p>A request is created with parameters:</p> <ul> <li><code>Symbol</code> \u2014 trading instrument (e.g., <code>EURUSD</code>);</li> <li><code>DayOfWeek</code> \u2014 day of the week for which the schedule is needed;</li> <li><code>SessionIndex</code> \u2014 sequential session number for that day.</li> </ul> <pre><code>tradeSessionData, err := account.SymbolInfoSessionTrade(ctx, tradeSessionReq)\n</code></pre> <p>A request is sent to the MetaTrader server via gRPC. The response returns a structure with <code>From</code> and <code>To</code> fields \u2014 trading session start and end.</p> <pre><code>if tradeSessionData.From != nil {\n    fromTime := tradeSessionData.From.AsTime()\n    fromSeconds := fromTime.Hour()*3600 + fromTime.Minute()*60 + fromTime.Second()\n    fmt.Printf(\"    From (seconds from day start): %d\\n\", fromSeconds)\n}\n</code></pre> <p>Converts <code>From</code> to <code>time.Time</code> format and calculates the number of seconds from the start of the day.</p> <pre><code>if tradeSessionData.To != nil {\n    toTime := tradeSessionData.To.AsTime()\n    toSeconds := toTime.Hour()*3600 + toTime.Minute()*60 + toTime.Second()\n    fmt.Printf(\"    To (seconds from day start):   %d\\n\", toSeconds)\n}\n</code></pre> <p>Same for the session end.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionTrade_HOW/#what-is-sessionindex","title":"\ud83d\udcd8 What is <code>SessionIndex</code>","text":"<p>The <code>SessionIndex</code> parameter is not related to the day of the week, it indicates the session number within the selected day.</p> <p>For example, if a symbol has several trading intervals during the day:</p> DayOfWeek SessionIndex From To MONDAY 0 09:00 12:00 MONDAY 1 13:00 17:00 TUESDAY 0 09:00 17:00 <p>That is:</p> <ul> <li><code>DayOfWeek</code> \u2014 day of the week;</li> <li><code>SessionIndex</code> \u2014 sequential session number on that day.</li> </ul> <p>If an instrument has only one trading session per day (e.g., Forex 24 hours), then <code>SessionIndex = 0</code>.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionTrade_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message SymbolInfoSessionTradeData {\n  google.protobuf.Timestamp From = 1; // Trading session start time\n  google.protobuf.Timestamp To = 2;   // Trading session end time\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionTrade_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Monday trade session #0:\n    From (seconds from day start): 0\n    To (seconds from day start):   86399\n</code></pre> <p>\ud83d\udcd8 This means trading is available all day \u2014 from 00:00:00 to 23:59:59.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionTrade_HOW/#i-why-values-can-be-zero","title":"\u2139\ufe0f Why Values Can Be Zero","text":"<p>If you see the output:</p> <pre><code>From (seconds from day start): 0\nTo (seconds from day start):   0\n</code></pre> <p>this is normal behavior, not a code error.</p> <p>Reasons:</p> <ol> <li>24/5 trading \u2014 the broker doesn't set separate intervals.</li> <li>Broker hasn't filled in the schedule \u2014 often found on demo servers.</li> <li>Gateway doesn't transmit these fields \u2014 API returns empty Timestamp.</li> <li>Day or index contains no data \u2014 there's no session on that day with that index.</li> </ol> <p>\u2705 In such cases, <code>0</code> is interpreted as \"all day open for trading\".</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionTrade_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>SymbolInfoSessionTrade()</code> method is used:</p> <ul> <li>to check trading hours before opening orders;</li> <li>to avoid trading outside sessions;</li> <li>for visualizing market operation (charts, calendars);</li> <li>in backtests and simulations to account for trading schedules.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolInfoSessionTrade_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>SymbolInfoSessionTrade()</code> shows what hours and days trading is allowed for a symbol. If it returns zeros \u2014 it means trading is available all day or the broker hasn't specified a schedule.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolParamsMany_HOW/","title":"SymbolParamsMany HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolParamsMany_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>SymbolParamsMany()</code> method is used to retrieve detailed parameters for multiple symbols at once. It allows you to get a wide set of properties \u2014 prices, volumes, steps, spread, number of digits, and much more \u2014 in a single request.</p> <p>Unlike the <code>SymbolInfoDouble</code>, <code>SymbolInfoInteger</code>, and <code>SymbolInfoString</code> methods, which return a single value, <code>SymbolParamsMany()</code> makes a bulk request and returns a full list of <code>SymbolInfo</code> structures.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolParamsMany_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>// SymbolParamsMany accepts an array of symbol names\nparamsManyReq := &amp;pb.SymbolParamsManyRequest{\n    Symbols: []string{cfg.TestSymbol}, // Array of symbol names\n}\nparamsManyData, err := account.SymbolParamsMany(ctx, paramsManyReq)\nif err != nil {\n    helpers.PrintShortError(err, \"SymbolParamsMany failed\")\n} else {\n    fmt.Printf(\"  Retrieved parameters for %d symbols:\\n\", len(paramsManyData.Params))\n    // Show only first 3 symbols\n    maxShow := 3\n    if len(paramsManyData.Params) &lt; maxShow {\n        maxShow = len(paramsManyData.Params)\n    }\n    for i := 0; i &lt; maxShow; i++ {\n        params := paramsManyData.Params[i]\n        fmt.Printf(\"\\n  Symbol #%d: %s\\n\", i+1, params.Symbol)\n        fmt.Printf(\"    Bid:                         %.5f\\n\", params.Bid)\n        fmt.Printf(\"    Ask:                         %.5f\\n\", params.Ask)\n        fmt.Printf(\"    Digits:                      %d\\n\", params.Digits)\n        fmt.Printf(\"    Spread:                      %d points\\n\", params.Spread)\n        fmt.Printf(\"    Volume Min:                  %.2f\\n\", params.VolumeMin)\n        fmt.Printf(\"    Volume Max:                  %.2f\\n\", params.VolumeMax)\n        fmt.Printf(\"    Volume Step:                 %.2f\\n\", params.VolumeStep)\n        fmt.Printf(\"    Contract Size:               %.2f\\n\", params.ContractSize)\n        fmt.Printf(\"    Point:                       %.5f\\n\", params.Point)\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolParamsMany_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>paramsManyReq := &amp;pb.SymbolParamsManyRequest{\n    Symbols: []string{cfg.TestSymbol},\n}\n</code></pre> <p>A <code>SymbolParamsManyRequest</code> request structure is created. The <code>Symbols</code> field contains an array of symbol names you want to retrieve parameters for (e.g., <code>[]string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}</code>).</p> <pre><code>paramsManyData, err := account.SymbolParamsMany(ctx, paramsManyReq)\n</code></pre> <p>A gRPC request is sent to the MetaTrader server. The response contains a <code>Params</code> list \u2014 an array of structures, where each describes one symbol with a complete set of parameters.</p> <pre><code>fmt.Printf(\"  Retrieved parameters for %d symbols:\\n\", len(paramsManyData.Params))\n</code></pre> <p>Displays the number of symbols returned.</p> <pre><code>maxShow := 3\nif len(paramsManyData.Params) &lt; maxShow {\n    maxShow = len(paramsManyData.Params)\n}\n</code></pre> <p>Limits the number of displayed results to 3 \u2014 for clarity in the example.</p> <pre><code>for i := 0; i &lt; maxShow; i++ {\n    params := paramsManyData.Params[i]\n    fmt.Printf(\"\\n  Symbol #%d: %s\\n\", i+1, params.Symbol)\n</code></pre> <p>The loop goes through each symbol, displaying its name and characteristics.</p> <pre><code>fmt.Printf(\"    Bid:                         %.5f\\n\", params.Bid)\nfmt.Printf(\"    Ask:                         %.5f\\n\", params.Ask)\nfmt.Printf(\"    Digits:                      %d\\n\", params.Digits)\nfmt.Printf(\"    Spread:                      %d points\\n\", params.Spread)\nfmt.Printf(\"    Volume Min:                  %.2f\\n\", params.VolumeMin)\nfmt.Printf(\"    Volume Max:                  %.2f\\n\", params.VolumeMax)\nfmt.Printf(\"    Volume Step:                 %.2f\\n\", params.VolumeStep)\nfmt.Printf(\"    Contract Size:               %.2f\\n\", params.ContractSize)\nfmt.Printf(\"    Point:                       %.5f\\n\", params.Point)\n</code></pre> <p>These lines sequentially display the main symbol parameters:</p> <ul> <li>Bid / Ask \u2014 buy and sell prices;</li> <li>Digits \u2014 number of decimal places;</li> <li>Spread \u2014 difference between Ask and Bid in points;</li> <li>Volume Min / Max / Step \u2014 minimum, maximum, and step for trade volume;</li> <li>Contract Size \u2014 contract size in base currency (e.g., 100,000 for forex);</li> <li>Point \u2014 minimum price change.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolParamsMany_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message SymbolParamsManyData {\n  repeated SymbolParams Params = 1; // List of symbol parameters\n}\n\nmessage SymbolParams {\n  string Symbol = 1;\n  double Bid = 2;\n  double Ask = 3;\n  int32 Digits = 4;\n  int32 Spread = 5;\n  double VolumeMin = 6;\n  double VolumeMax = 7;\n  double VolumeStep = 8;\n  double ContractSize = 9;\n  double Point = 10;\n  // ... over 112 other fields (currency, description, trading status, margins, etc)\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolParamsMany_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Retrieved parameters for 1 symbols:\n\n  Symbol #1: EURUSD\n    Bid:                         1.08540\n    Ask:                         1.08560\n    Digits:                      5\n    Spread:                      20 points\n    Volume Min:                  0.01\n    Volume Max:                  100.00\n    Volume Step:                 0.01\n    Contract Size:               100000.00\n    Point:                       0.00010\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolParamsMany_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>SymbolParamsMany()</code> method is used:</p> <ul> <li>for initializing a trading terminal or strategy, loading all instrument parameters;</li> <li>for mass market monitoring when you need to immediately get Bid/Ask for many assets;</li> <li>for comparing symbol characteristics (spread, volume, price step);</li> <li>in demo examples and UI to visualize a list of instruments with key parameters.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/SymbolParamsMany_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>SymbolParamsMany()</code> allows you to get all main parameters of multiple symbols in one request. Convenient for loading market data, filtering, and analyzing a large number of instruments.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/TickValueWithSize_HOW/","title":"TickValueWithSize HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/TickValueWithSize_HOW/#example-from-file-examplesdemoslowlevel01_general_operationsgo","title":"Example from file: <code>examples/demos/lowlevel/01_general_operations.go</code>","text":"<p>The <code>TickValueWithSize()</code> method is used to retrieve tick value and size information for trading symbols - essential data for calculating position value, profit/loss per tick, and risk management.</p> <p>This method returns comprehensive tick data including the standard tick value, separate values for profitable and losing positions, tick size (minimum price change), and contract size.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/TickValueWithSize_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>tickValueReq := &amp;pb.TickValueWithSizeRequest{\n    SymbolNames: []string{cfg.TestSymbol}, // Array of symbol names\n}\ntickValueData, err := account.TickValueWithSize(ctx, tickValueReq)\nif err != nil {\n    helpers.PrintShortError(err, \"TickValueWithSize failed\")\n} else {\n    fmt.Printf(\"  Retrieved tick value/size data for %d symbols:\\n\", len(tickValueData.SymbolTickSizeInfos))\n    for _, info := range tickValueData.SymbolTickSizeInfos {\n        fmt.Printf(\"\\n  Symbol: %s (Index: %d)\\n\", info.Name, info.Index)\n        fmt.Printf(\"    Trade Tick Value:        %.5f\\n\", info.TradeTickValue)\n        fmt.Printf(\"    Trade Tick Value Profit: %.5f\\n\", info.TradeTickValueProfit)\n        fmt.Printf(\"    Trade Tick Value Loss:   %.5f\\n\", info.TradeTickValueLoss)\n        fmt.Printf(\"    Trade Tick Size:         %.5f\\n\", info.TradeTickSize)\n        fmt.Printf(\"    Trade Contract Size:     %.2f\\n\", info.TradeContractSize)\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/TickValueWithSize_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":"<pre><code>tickValueReq := &amp;pb.TickValueWithSizeRequest{\n    SymbolNames: []string{cfg.TestSymbol}, // Array of symbol names\n}\n</code></pre> <p>A request is created with parameters:</p> <ul> <li><code>SymbolNames</code> - array of trading instrument names (e.g., <code>[\"EURUSD\", \"GBPUSD\"]</code>);</li> <li>You can request data for multiple symbols in a single call for efficiency.</li> </ul> <pre><code>tickValueData, err := account.TickValueWithSize(ctx, tickValueReq)\n</code></pre> <p>A call is made to the MetaTrader server via gRPC. The response contains an array of <code>TickSizeSymbol</code> structures with detailed tick and contract information for each requested symbol.</p> <pre><code>fmt.Printf(\"  Retrieved tick value/size data for %d symbols:\\n\", len(tickValueData.SymbolTickSizeInfos))\n</code></pre> <p>The method returns a slice <code>SymbolTickSizeInfos</code> containing information for all requested symbols. We print the count of symbols for which data was retrieved.</p> <pre><code>for _, info := range tickValueData.SymbolTickSizeInfos {\n    fmt.Printf(\"\\n  Symbol: %s (Index: %d)\\n\", info.Name, info.Index)\n</code></pre> <p>Iterate through each symbol's tick information:</p> <ul> <li><code>Name</code> - symbol name (e.g., \"EURUSD\")</li> <li><code>Index</code> - symbol's position in the request array</li> </ul> <pre><code>fmt.Printf(\"    Trade Tick Value:        %.5f\\n\", info.TradeTickValue)\nfmt.Printf(\"    Trade Tick Value Profit: %.5f\\n\", info.TradeTickValueProfit)\nfmt.Printf(\"    Trade Tick Value Loss:   %.5f\\n\", info.TradeTickValueLoss)\n</code></pre> <p>Print tick values in account currency:</p> <ul> <li><code>TradeTickValue</code> - standard tick value (cost of one tick movement)</li> <li><code>TradeTickValueProfit</code> - tick value for profitable positions (may differ due to asymmetric pricing)</li> <li><code>TradeTickValueLoss</code> - tick value for losing positions</li> </ul> <pre><code>fmt.Printf(\"    Trade Tick Size:         %.5f\\n\", info.TradeTickSize)\nfmt.Printf(\"    Trade Contract Size:     %.2f\\n\", info.TradeContractSize)\n</code></pre> <p>Print additional parameters:</p> <ul> <li><code>TradeTickSize</code> - minimum price change (tick size), typically 0.00001 for 5-digit currency pairs</li> <li><code>TradeContractSize</code> - contract size for the symbol (e.g., 100,000 for standard forex lots)</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/TickValueWithSize_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message TickValueWithSizeData {\n  repeated TickSizeSymbol symbol_tick_size_infos = 1;\n}\n\nmessage TickSizeSymbol {\n  int32 Index = 1;                    // Symbol index in request array\n  string Name = 2;                    // Symbol name\n  double TradeTickValue = 3;          // Standard tick value in account currency\n  double TradeTickValueProfit = 4;    // Tick value for profitable positions\n  double TradeTickValueLoss = 5;      // Tick value for losing positions\n  double TradeTickSize = 6;           // Minimum price change (tick size)\n  double TradeContractSize = 7;       // Contract size for the symbol\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/TickValueWithSize_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Retrieved tick value/size data for 1 symbols:\n\n  Symbol: EURUSD (Index: 0)\n    Trade Tick Value:        0.84107\n    Trade Tick Value Profit: 0.84107\n    Trade Tick Value Loss:   0.84109\n    Trade Tick Size:         0.00001\n    Trade Contract Size:     100000.00\n</code></pre> <p>This means: * One tick movement (0.00001) for EURUSD costs 0.84107 EUR in your account currency * Profitable and losing positions have nearly identical tick values (difference: 0.00002 EUR) * The contract size is 100,000 units (standard lot)</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/TickValueWithSize_HOW/#why-tick-value-matters","title":"Why Tick Value Matters","text":"<p>The tick value is critical for:</p> <ol> <li> <p>Position Value Calculation <pre><code>Position Value = Lots * Contract Size * Current Price\n</code></pre></p> </li> <li> <p>Risk Per Tick <pre><code>Risk Per Tick = Lots * Tick Value\n</code></pre></p> </li> <li> <p>Profit/Loss Calculation <pre><code>P&amp;L = Price Movement (in ticks) * Lots * Tick Value\n</code></pre></p> </li> <li> <p>Stop Loss in Currency <pre><code>Stop Loss Amount = Stop Distance (pips) * Ticks Per Pip * Lots * Tick Value\n</code></pre></p> </li> </ol>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/TickValueWithSize_HOW/#asymmetric-tick-values","title":"Asymmetric Tick Values","text":"<p>Some symbols have different tick values for profitable vs losing positions. For example:</p> <pre><code>Symbol: XAUUSD (Gold)\n  Trade Tick Value Profit: 1.00\n  Trade Tick Value Loss:   1.02\n</code></pre> <p>This 2% difference occurs because: * Brokers may apply different conversion rates for buy/sell positions * Cross-currency calculations can introduce asymmetry * Some instruments have built-in spread in tick value calculation</p> <p>Always use <code>TradeTickValueProfit</code> for buy positions and <code>TradeTickValueLoss</code> for sell positions to ensure accurate P&amp;L calculations.</p>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/TickValueWithSize_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>TickValueWithSize()</code> method is used:</p> <ul> <li>to calculate exact position value in account currency;</li> <li>for risk management - determining profit/loss per tick movement;</li> <li>when sizing positions based on risk percentage;</li> <li>in P&amp;L calculators and trading panels;</li> <li>for lot size calculations based on stop loss distance;</li> <li>in portfolio risk analysis across multiple symbols.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/6.%20Additional_Methods_HOW/TickValueWithSize_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>TickValueWithSize()</code> tells you how much money you make or lose per tick for each symbol. It provides all the data needed to calculate position sizes, risk amounts, and profit/loss accurately in your account currency.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/","title":"OnPositionProfit HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#example-from-file-examplesdemoslowlevel03_streaming_methodsgo","title":"Example from file: <code>examples/demos/lowlevel/03_streaming_methods.go</code>","text":"<p>The <code>OnPositionProfit()</code> method is used to receive profit and loss (P&amp;L) updates for all open positions in real-time.</p> <p>This stream is particularly useful for:</p> <ul> <li>displaying current profit on a monitoring dashboard;</li> <li>analyzing position dynamics;</li> <li>automated risk management.</li> </ul> <p>The stream is active only when there are open positions and prices change. If positions are absent \u2014 there will be no updates.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>profitReq := &amp;pb.OnPositionProfitRequest{}\n\nprofitChan, profitErrChan := account.OnPositionProfit(ctx, profitReq)\n\nfmt.Printf(\"Streaming position P&amp;L updates (max %d events or %d seconds)...\\n\", MAX_EVENTS, MAX_SECONDS)\nfmt.Println(\"  NOTE: This stream sends events only when positions exist and prices change\")\n\neventCount = 0\ntimeout = time.After(MAX_SECONDS * time.Second)\n\nstreamProfit:\nfor {\n    select {\n    case profitData, ok := &lt;-profitChan:\n        if !ok {\n            fmt.Println(\"  Stream closed by server\")\n            break streamProfit\n        }\n        eventCount++\n        totalPositions := len(profitData.NewPositions) + len(profitData.UpdatedPositions) + len(profitData.DeletedPositions)\n        fmt.Printf(\"  Event #%d: Type=%v Total=%d (New=%d Updated=%d Deleted=%d)\\n\",\n            eventCount, profitData.Type, totalPositions,\n            len(profitData.NewPositions),\n            len(profitData.UpdatedPositions),\n            len(profitData.DeletedPositions))\n\n        // Show first 3 updated positions\n        maxShow := 3\n        if len(profitData.UpdatedPositions) &gt; 0 {\n            if len(profitData.UpdatedPositions) &lt; maxShow {\n                maxShow = len(profitData.UpdatedPositions)\n            }\n            for i := 0; i &lt; maxShow; i++ {\n                pos := profitData.UpdatedPositions[i]\n                fmt.Printf(\"    Updated Position: Ticket=%d Symbol=%s Profit=%.2f\\n\",\n                    pos.Ticket,\n                    pos.PositionSymbol,\n                    pos.Profit)\n            }\n        }\n\n        if eventCount &gt;= MAX_EVENTS {\n            fmt.Printf(\"  \u2713 Received %d events, stopping stream\\n\", MAX_EVENTS)\n            break streamProfit\n        }\n\n    case err := &lt;-profitErrChan:\n        if err != nil {\n            helpers.PrintShortError(err, \"Stream error\")\n            break streamProfit\n        }\n\n    case &lt;-timeout:\n        fmt.Printf(\"  \u23f1 Timeout after %d seconds (received %d events)\\n\", MAX_SECONDS, eventCount)\n        break streamProfit\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#1-subscribe-to-stream","title":"1\ufe0f. Subscribe to Stream","text":"<pre><code>profitReq := &amp;pb.OnPositionProfitRequest{}\n</code></pre> <p>An empty request is created. The subscription covers all positions on the account.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#2-start-the-stream","title":"2\ufe0f. Start the Stream","text":"<pre><code>profitChan, profitErrChan := account.OnPositionProfit(ctx, profitReq)\n</code></pre> <p>The method returns two channels:</p> <ul> <li><code>profitChan</code> \u2014 position data stream;</li> <li><code>profitErrChan</code> \u2014 connection error stream.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#3-informational-message","title":"3\ufe0f. Informational Message","text":"<pre><code>fmt.Println(\"  NOTE: This stream sends events only when positions exist and prices change\")\n</code></pre> <p>Explains that the stream is active only when there are positions and quotes change.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#4-main-event-reception-loop","title":"4\ufe0f. Main Event Reception Loop","text":"<pre><code>for {\n    select {\n    case profitData, ok := &lt;-profitChan:\n</code></pre> <p>Uses <code>select</code> to simultaneously listen to three channels: events, errors, and timer.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#5-process-received-data","title":"5\ufe0f. Process Received Data","text":"<pre><code>totalPositions := len(profitData.NewPositions) + len(profitData.UpdatedPositions) + len(profitData.DeletedPositions)\nfmt.Printf(\"  Event #%d: Type=%v Total=%d (New=%d Updated=%d Deleted=%d)\\n\", ...)\n</code></pre> <p>Each event shows how many positions are:</p> <ul> <li>new (NewPositions),</li> <li>updated (UpdatedPositions),</li> <li>deleted (DeletedPositions).</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#6-display-updated-positions","title":"6\ufe0f. Display Updated Positions","text":"<pre><code>for i := 0; i &lt; maxShow; i++ {\n    pos := profitData.UpdatedPositions[i]\n    fmt.Printf(\"    Updated Position: Ticket=%d Symbol=%s Profit=%.2f\\n\", ...)\n}\n</code></pre> <p>Shows several of the first updated positions with their tickets, symbols, and profit.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#7-stream-termination","title":"7\ufe0f. Stream Termination","text":"<p>The stream closes by event limit (<code>MAX_EVENTS</code>), timeout (<code>MAX_SECONDS</code>), or connection error.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OnPositionProfitData {\n  ENUM_STREAM_EVENT_TYPE Type = 1;\n  repeated PositionInfo NewPositions = 2;\n  repeated PositionInfo UpdatedPositions = 3;\n  repeated PositionInfo DeletedPositions = 4;\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Streaming position P&amp;L updates (max 5 events or 10 seconds)...\n  NOTE: This stream sends events only when positions exist and prices change\n  Event #1: Type=UPDATE Total=1 (New=0 Updated=1 Deleted=0)\n    Updated Position: Ticket=123456 Symbol=EURUSD Profit=12.45\n  Event #2: Type=UPDATE Total=1 (New=0 Updated=1 Deleted=0)\n    Updated Position: Ticket=123456 Symbol=EURUSD Profit=14.10\n  \u2713 Received 5 events, stopping stream\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OnPositionProfit()</code> method is used for:</p> <ul> <li>tracking P&amp;L on positions in real-time;</li> <li>displaying profit dynamics in the interface;</li> <li>calculating total account results without additional requests;</li> <li>building trading panels and analytical tools.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionProfit_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OnPositionProfit()</code> is a stream that reports: \"EURUSD position is now +12.45, was +10.30 a minute ago\". It constantly updates profit for all positions, without repeated server requests.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/","title":"OnPositionsAndPendingOrdersTickets HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#example-from-file-examplesdemoslowlevel03_streaming_methodsgo","title":"Example from file: <code>examples/demos/lowlevel/03_streaming_methods.go</code>","text":"<p>The <code>OnPositionsAndPendingOrdersTickets()</code> method is used to receive real-time updates of order and position ticket numbers. It reports when orders or positions appear, disappear, or change.</p> <p>This stream doesn't transmit detailed data \u2014 only ticket number lists. It's a lightweight way to synchronize the current account state without excessive load.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>ticketsReq := &amp;pb.OnPositionsAndPendingOrdersTicketsRequest{}\n\nticketsChan, ticketsErrChan := account.OnPositionsAndPendingOrdersTickets(ctx, ticketsReq)\n\nfmt.Printf(\"Streaming ticket changes (max %d events or %d seconds)...\\n\", MAX_EVENTS, MAX_SECONDS)\nfmt.Println(\"  NOTE: This stream sends events when orders/positions open or close\")\n\neventCount = 0\ntimeout = time.After(MAX_SECONDS * time.Second)\n\nstreamTickets:\nfor {\n    select {\n    case ticketsData, ok := &lt;-ticketsChan:\n        if !ok {\n            fmt.Println(\"  Stream closed by server\")\n            break streamTickets\n        }\n        eventCount++\n        totalTickets := len(ticketsData.PendingOrderTickets) + len(ticketsData.PositionTickets)\n        fmt.Printf(\"  Event #%d: Total tickets=%d (Pending Orders=%d Positions=%d)\\n\",\n            eventCount,\n            totalTickets,\n            len(ticketsData.PendingOrderTickets),\n            len(ticketsData.PositionTickets))\n\n        if eventCount &gt;= MAX_EVENTS {\n            fmt.Printf(\"  \u2713 Received %d events, stopping stream\\n\", MAX_EVENTS)\n            break streamTickets\n        }\n\n    case err := &lt;-ticketsErrChan:\n        if err != nil {\n            helpers.PrintShortError(err, \"Stream error\")\n            break streamTickets\n        }\n\n    case &lt;-timeout:\n        fmt.Printf(\"  \u23f1 Timeout after %d seconds (received %d events)\\n\", MAX_SECONDS, eventCount)\n        break streamTickets\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#1-subscribe-to-ticket-stream","title":"1\ufe0f. Subscribe to Ticket Stream","text":"<pre><code>ticketsReq := &amp;pb.OnPositionsAndPendingOrdersTicketsRequest{}\n</code></pre> <p>Create a request without parameters \u2014 the stream automatically tracks all tickets of positions and orders on the current account.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#2-start-the-stream","title":"2\ufe0f. Start the Stream","text":"<pre><code>ticketsChan, ticketsErrChan := account.OnPositionsAndPendingOrdersTickets(ctx, ticketsReq)\n</code></pre> <p>The method returns two channels:</p> <ul> <li><code>ticketsChan</code> \u2014 stream of ticket changes;</li> <li><code>ticketsErrChan</code> \u2014 connection error channel.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#3-event-reading-loop","title":"3\ufe0f. Event Reading Loop","text":"<pre><code>case ticketsData, ok := &lt;-ticketsChan:\n</code></pre> <p>Each time orders or positions change, a new message arrives. It contains current ticket lists.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#4-content-analysis","title":"4\ufe0f. Content Analysis","text":"<pre><code>totalTickets := len(ticketsData.PendingOrderTickets) + len(ticketsData.PositionTickets)\nfmt.Printf(\"  Event #%d: Total tickets=%d (Pending Orders=%d Positions=%d)\\n\", ...)\n</code></pre> <p>Display the number of tickets:</p> Field Description <code>PendingOrderTickets</code> Tickets of all pending orders <code>PositionTickets</code> Tickets of all open positions <p>After each event, the server returns current state, not increments \u2014 making synchronization easier.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#5-stream-termination","title":"5\ufe0f. Stream Termination","text":"<p>The stream closes when:</p> <ul> <li>event limit is reached (<code>MAX_EVENTS</code>),</li> <li>time expires (<code>MAX_SECONDS</code>),</li> <li>connection error occurs.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OnPositionsAndPendingOrdersTicketsData {\n  repeated uint64 PendingOrderTickets = 1;\n  repeated uint64 PositionTickets = 2;\n}\n</code></pre> <p>The server returns only ticket numbers \u2014 unique identifiers of orders and positions.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Streaming ticket changes (max 5 events or 10 seconds)...\n  NOTE: This stream sends events when orders/positions open or close\n  Event #1: Total tickets=3 (Pending Orders=1 Positions=2)\n  Event #2: Total tickets=2 (Pending Orders=0 Positions=2)\n  \u2713 Received 5 events, stopping stream\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OnPositionsAndPendingOrdersTickets()</code> method is used for:</p> <ul> <li>tracking the appearance and disappearance of orders/positions;</li> <li>synchronizing local systems with the trading account;</li> <li>building notifications and logs;</li> <li>reducing load when monitoring activity.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnPositionsAndPendingOrdersTickets_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OnPositionsAndPendingOrdersTickets()</code> is a lightweight stream that reports: \"You currently have 3 tickets: 2 positions and 1 order. One order closed \u2014 now 2 tickets\". It doesn't transmit details, only numbers \u2014 ideal for background state tracking.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/","title":"OnSymbolTick HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#example-from-file-examplesdemoslowlevel03_streaming_methodsgo","title":"Example from file: <code>examples/demos/lowlevel/03_streaming_methods.go</code>","text":"<p>The <code>OnSymbolTick()</code> method is used to subscribe to a real-time tick data stream (Bid/Ask). It opens a continuous gRPC stream between the client and the MetaTrader server, sending updates on every price change.</p> <p>This is analogous to the <code>OnTick()</code> function in MQL5, but implemented as a persistent asynchronous stream.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>tickReq := &amp;pb.OnSymbolTickRequest{\n    Symbol: cfg.TestSymbol, // Single symbol to stream\n}\n\ntickChan, tickErrChan := account.OnSymbolTick(ctx, tickReq)\n\nfmt.Printf(\"Streaming %s tick data (max %d events or %d seconds)...\\n\", cfg.TestSymbol, MAX_EVENTS, MAX_SECONDS)\n\neventCount := 0\ntimeout := time.After(MAX_SECONDS * time.Second)\n\nstreamTick:\nfor {\n    select {\n    case tickData, ok := &lt;-tickChan:\n        if !ok {\n            fmt.Println(\"  Stream closed by server\")\n            break streamTick\n        }\n        eventCount++\n        fmt.Printf(\"  Event #%d: Bid=%.5f Ask=%.5f Spread=%.5f\\n\",\n            eventCount,\n            tickData.Bid,\n            tickData.Ask,\n            tickData.Ask-tickData.Bid)\n\n        if eventCount &gt;= MAX_EVENTS {\n            fmt.Printf(\"  \u2713 Received %d events, stopping stream\\n\", MAX_EVENTS)\n            break streamTick\n        }\n\n    case err := &lt;-tickErrChan:\n        if err != nil {\n            helpers.PrintShortError(err, \"Stream error\")\n            break streamTick\n        }\n\n    case &lt;-timeout:\n        fmt.Printf(\"  \u23f1 Timeout after %d seconds, stopping stream\\n\", MAX_SECONDS)\n        break streamTick\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#1-subscribe-to-tick-data-stream","title":"1\ufe0f. Subscribe to Tick Data Stream","text":"<pre><code>tickReq := &amp;pb.OnSymbolTickRequest{\n    Symbol: cfg.TestSymbol,\n}\n</code></pre> <p>Create a request to stream ticks for the symbol <code>cfg.TestSymbol</code> (e.g., <code>EURUSD</code>).</p> <p>\ud83d\udd38 Note: To stream multiple symbols, create separate streams for each symbol.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#2-start-the-stream","title":"2\ufe0f. Start the Stream","text":"<pre><code>tickChan, tickErrChan := account.OnSymbolTick(ctx, tickReq)\n</code></pre> <p>The method returns two channels:</p> <ul> <li>tickChan \u2014 data channel for tick updates;</li> <li>tickErrChan \u2014 error channel if the stream is interrupted.</li> </ul> <p>The stream works asynchronously \u2014 new ticks arrive continuously until timeout or event limit is reached.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#3-set-up-limits","title":"3\ufe0f. Set Up Limits","text":"<pre><code>eventCount := 0\ntimeout := time.After(MAX_SECONDS * time.Second)\n</code></pre> <ul> <li>MAX_EVENTS \u2014 how many ticks to receive (e.g., 10);</li> <li>MAX_SECONDS \u2014 time limit (e.g., 5 seconds).</li> </ul> <p>This is a safeguard to prevent the example from running indefinitely.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#4-main-data-reception-loop","title":"4\ufe0f. Main Data Reception Loop","text":"<pre><code>for {\n    select {\n    case tickData, ok := &lt;-tickChan:\n        ...\n    case err := &lt;-tickErrChan:\n        ...\n    case &lt;-timeout:\n        ...\n    }\n}\n</code></pre> <p>Uses the <code>select</code> construct to listen to three sources simultaneously:</p> <ol> <li>tickChan \u2014 new tick arrived;</li> <li>tickErrChan \u2014 stream error;</li> <li>timeout \u2014 time expired.</li> </ol>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#5-process-incoming-tick","title":"5\ufe0f. Process Incoming Tick","text":"<pre><code>fmt.Printf(\"  Event #%d: Bid=%.5f Ask=%.5f Spread=%.5f\\n\",\n    eventCount,\n    tickData.Bid,\n    tickData.Ask,\n    tickData.Ask-tickData.Bid)\n</code></pre> <p>Each tick contains:</p> <ul> <li>Bid \u2014 buy price;</li> <li>Ask \u2014 sell price;</li> <li>Spread \u2014 difference between Ask and Bid;</li> <li>Time \u2014 tick timestamp;</li> <li>Volume \u2014 tick volume;</li> <li>Last \u2014 last deal price.</li> </ul> <p>This data is needed for strategy calculations, scalping, spread analysis, and market visualization.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#6-stream-termination-by-limit-or-timeout","title":"6\ufe0f. Stream Termination by Limit or Timeout","text":"<pre><code>if eventCount &gt;= MAX_EVENTS {\n    fmt.Printf(\"  \u2713 Received %d events, stopping stream\\n\", MAX_EVENTS)\n    break streamTick\n}\n</code></pre> <p>The stream stops either by event count (<code>MAX_EVENTS</code>) or when <code>timeout</code> expires.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OnSymbolTickData {\n  double Bid = 1;     // Current bid price\n  double Ask = 2;     // Current ask price\n  double Last = 3;    // Last deal price\n  uint64 Volume = 4;  // Volume\n  google.protobuf.Timestamp Time = 5; // Tick timestamp\n  uint32 Flags = 6;   // Tick flags\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Streaming EURUSD tick data (max 5 events or 10 seconds)...\n  Event #1: Bid=1.08542 Ask=1.08558 Spread=0.00016\n  Event #2: Bid=1.08540 Ask=1.08555 Spread=0.00015\n  Event #3: Bid=1.08539 Ask=1.08554 Spread=0.00015\n  \u2713 Received 3 events, stopping stream\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OnSymbolTick()</code> method is used for:</p> <ul> <li>receiving real-time quotes;</li> <li>building streaming strategies (scalping, market making);</li> <li>monitoring broker latency and market activity;</li> <li>updating visualization or statistics in real-time.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnSymbolTick_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OnSymbolTick()</code> is a live price subscription. The gateway server sends you every Bid/Ask change, and you can process it instantly. For example, calculate spread, build charts, or react to market changes \u2014 all in real-time.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/","title":"OnTradeTransaction HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#example-from-file-examplesdemoslowlevel03_streaming_methodsgo","title":"Example from file: <code>examples/demos/lowlevel/03_streaming_methods.go</code>","text":"<p>The <code>OnTradeTransaction()</code> method is the most detailed streaming method, which transmits all trading events occurring on the account in MetaTrader. It captures every step: from order opening to its execution and position closing.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>transactionReq := &amp;pb.OnTradeTransactionRequest{}\n\ntransactionChan, transactionErrChan := account.OnTradeTransaction(ctx, transactionReq)\n\nfmt.Printf(\"Streaming trade transactions (max %d events or %d seconds)...\\n\", MAX_EVENTS, MAX_SECONDS)\nfmt.Println(\"  NOTE: This stream sends events for all trade-related transactions\")\n\neventCount = 0\ntimeout = time.After(MAX_SECONDS * time.Second)\n\nstreamTransaction:\nfor {\n    select {\n    case transactionData, ok := &lt;-transactionChan:\n        if !ok {\n            fmt.Println(\"  Stream closed by server\")\n            break streamTransaction\n        }\n        eventCount++\n        fmt.Printf(\"  Event #%d: Type=%v\\n\", eventCount, transactionData.Type)\n\n        if transactionData.TradeTransaction != nil {\n            tx := transactionData.TradeTransaction\n            fmt.Printf(\"    Transaction Type=%v Order=%d Deal=%d\\n\",\n                tx.Type,\n                tx.OrderTicket,\n                tx.DealTicket)\n\n            if tx.Symbol != \"\" {\n                fmt.Printf(\"    Symbol=%s Price=%.5f Volume=%.2f\\n\",\n                    tx.Symbol,\n                    tx.Price,\n                    tx.Volume)\n            }\n        }\n\n        if eventCount &gt;= MAX_EVENTS {\n            fmt.Printf(\"  \u2713 Received %d events, stopping stream\\n\", MAX_EVENTS)\n            break streamTransaction\n        }\n\n    case err := &lt;-transactionErrChan:\n        if err != nil {\n            helpers.PrintShortError(err, \"Stream error\")\n            break streamTransaction\n        }\n\n    case &lt;-timeout:\n        fmt.Printf(\"  \u23f1 Timeout after %d seconds (received %d events)\\n\", MAX_SECONDS, eventCount)\n        break streamTransaction\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#1-prepare-request","title":"1\ufe0f. Prepare Request","text":"<pre><code>transactionReq := &amp;pb.OnTradeTransactionRequest{}\n</code></pre> <p>Create an empty request \u2014 subscription applies to all trading events of the current account.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#2-start-the-stream","title":"2\ufe0f. Start the Stream","text":"<pre><code>transactionChan, transactionErrChan := account.OnTradeTransaction(ctx, transactionReq)\n</code></pre> <p>The method returns two channels:</p> <ul> <li>transactionChan \u2014 stream with events;</li> <li>transactionErrChan \u2014 connection errors.</li> </ul> <p>The stream activates on any changes in orders, deals, and positions.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#3-main-processing-loop","title":"3\ufe0f. Main Processing Loop","text":"<pre><code>case transactionData, ok := &lt;-transactionChan:\n</code></pre> <p>The loop receives each new event. Each message contains:</p> <ul> <li>type (<code>transactionData.Type</code>),</li> <li><code>TradeTransaction</code> structure with details.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#4-process-trade-event","title":"4\ufe0f. Process Trade Event","text":"<pre><code>if transactionData.TradeTransaction != nil {\n    tx := transactionData.TradeTransaction\n    fmt.Printf(\"    Transaction Type=%v Order=%d Deal=%d\\n\", ...)\n</code></pre> <p>Useful fields:</p> Field Description <code>Type</code> Event type (DEAL_ADD, ORDER_ADD, ORDER_DELETE, etc.) <code>OrderTicket</code> Order number <code>DealTicket</code> Deal number <code>Symbol</code> Trading instrument <code>Price</code> Deal price <code>Volume</code> Deal volume in lots"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#5-display-detailed-information","title":"5\ufe0f. Display Detailed Information","text":"<pre><code>if tx.Symbol != \"\" {\n    fmt.Printf(\"    Symbol=%s Price=%.5f Volume=%.2f\\n\", ...)\n}\n</code></pre> <p>If the broker transmits quotes and volume \u2014 this data is displayed immediately after the transaction. This allows building custom trading logs in real-time.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#6-stream-termination","title":"6\ufe0f. Stream Termination","text":"<p>The stream stops when:</p> <ul> <li>event limit is reached (<code>MAX_EVENTS</code>),</li> <li>timeout occurs (<code>MAX_SECONDS</code>),</li> <li>connection error or stream closure by server.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OnTradeTransactionData {\n  ENUM_TRADE_TRANSACTION_TYPE Type = 1;\n  TradeTransaction TradeTransaction = 2;\n}\n\nmessage TradeTransaction {\n  ENUM_TRADE_TRANSACTION_TYPE Type = 1;\n  uint64 OrderTicket = 2;\n  uint64 DealTicket = 3;\n  string Symbol = 4;\n  double Price = 5;\n  double Volume = 6;\n}\n</code></pre> <p>Each message corresponds to one trading operation.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Streaming trade transactions (max 5 events or 10 seconds)...\n  NOTE: This stream sends events for all trade-related transactions\n  Event #1: Type=DEAL_ADD\n    Transaction Type=DEAL_ADD Order=12345678 Deal=98765432\n    Symbol=EURUSD Price=1.08645 Volume=0.10\n  Event #2: Type=ORDER_DELETE\n    Transaction Type=ORDER_DELETE Order=12345678 Deal=0\n  \u2713 Received 5 events, stopping stream\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OnTradeTransaction()</code> method is used for:</p> <ul> <li>auditing all trading actions on the account;</li> <li>logging orders, deals, and modifications;</li> <li>reactive trading strategies responding to changes;</li> <li>analytics or gateway testing.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTradeTransaction_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OnTradeTransaction()</code> is a stream of all trading events in MetaTrader. It reports: \"Order created\", \"Deal executed\", \"Order deleted\", \"Position closed\".</p> <p>This is the most complete and detailed stream, allowing you to see everything happening with orders and deals in real-time.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/","title":"OnTrade HOW","text":""},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#example-from-file-examplesdemoslowlevel03_streaming_methodsgo","title":"Example from file: <code>examples/demos/lowlevel/03_streaming_methods.go</code>","text":"<p>The <code>OnTrade()</code> method is used to receive real-time trading events. It notifies about all trading account changes: order opening and closing, new positions appearing, deals in history, etc.</p> <p>Unlike <code>OnSymbolTick()</code>, which streams quotes, <code>OnTrade()</code> transmits trading events occurring on the account.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#code-example","title":"\ud83e\udde9 Code example","text":"<pre><code>tradeReq := &amp;pb.OnTradeRequest{}\n\ntradeChan, tradeErrChan := account.OnTrade(ctx, tradeReq)\n\nfmt.Printf(\"Streaming trade events (max %d events or %d seconds)...\\n\", MAX_EVENTS, MAX_SECONDS)\nfmt.Println(\"  NOTE: This stream sends events only when trades occur\")\n\neventCount = 0\ntimeout = time.After(MAX_SECONDS * time.Second)\n\nstreamTrade:\nfor {\n    select {\n    case tradeData, ok := &lt;-tradeChan:\n        if !ok {\n            fmt.Println(\"  Stream closed by server\")\n            break streamTrade\n        }\n        eventCount++\n        fmt.Printf(\"  Event #%d: Type=%v\\n\", eventCount, tradeData.Type)\n        if tradeData.EventData != nil {\n            ed := tradeData.EventData\n            fmt.Printf(\"    New Orders: %d, Disappeared Orders: %d\\n\",\n                len(ed.NewOrders), len(ed.DisappearedOrders))\n            fmt.Printf(\"    New Positions: %d, Disappeared Positions: %d\\n\",\n                len(ed.NewPositions), len(ed.DisappearedPositions))\n            fmt.Printf(\"    New History Orders: %d, New History Deals: %d\\n\",\n                len(ed.NewHistoryOrders), len(ed.NewHistoryDeals))\n        }\n\n        if eventCount &gt;= MAX_EVENTS {\n            fmt.Printf(\"  \u2713 Received %d events, stopping stream\\n\", MAX_EVENTS)\n            break streamTrade\n        }\n\n    case err := &lt;-tradeErrChan:\n        if err != nil {\n            helpers.PrintShortError(err, \"Stream error\")\n            break streamTrade\n        }\n\n    case &lt;-timeout:\n        fmt.Printf(\"  \u23f1 Timeout after %d seconds (received %d events)\\n\", MAX_SECONDS, eventCount)\n        break streamTrade\n    }\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#detailed-code-explanation","title":"\ud83d\udfe2 Detailed Code Explanation","text":""},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#1-subscribe-to-trade-event-stream","title":"1\ufe0f. Subscribe to Trade Event Stream","text":"<pre><code>tradeReq := &amp;pb.OnTradeRequest{}\n</code></pre> <p>Create an empty request, as the <code>OnTrade()</code> stream doesn't require symbols \u2014 it listens to all trading events on the account.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#2-start-the-stream","title":"2\ufe0f. Start the Stream","text":"<pre><code>tradeChan, tradeErrChan := account.OnTrade(ctx, tradeReq)\n</code></pre> <p>The method returns two channels:</p> <ul> <li>tradeChan \u2014 stream with trading events;</li> <li>tradeErrChan \u2014 error stream (e.g., if the server closes the connection).</li> </ul> <p>The stream is active only when events occur. If there are no trades \u2014 there will be no data.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#3-display-informational-message","title":"3\ufe0f. Display Informational Message","text":"<pre><code>fmt.Printf(\"Streaming trade events (max %d events or %d seconds)...\\n\", MAX_EVENTS, MAX_SECONDS)\nfmt.Println(\"  NOTE: This stream sends events only when trades occur\")\n</code></pre> <p>Informs the user that the stream won't be constantly active \u2014 events arrive only when there are trading changes.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#4-event-processing-loop","title":"4\ufe0f. Event Processing Loop","text":"<pre><code>for {\n    select {\n    case tradeData, ok := &lt;-tradeChan:\n</code></pre> <p>Uses the <code>select</code> construct to listen to multiple sources simultaneously:</p> <ul> <li>trading events (<code>tradeChan</code>),</li> <li>errors (<code>tradeErrChan</code>),</li> <li>timeout expiration (<code>timeout</code>).</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#5-process-trade-event","title":"5\ufe0f. Process Trade Event","text":"<pre><code>fmt.Printf(\"  Event #%d: Type=%v\\n\", eventCount, tradeData.Type)\n</code></pre> <p>Display the type of trading event. Examples of possible types:</p> <ul> <li><code>TRADE_EVENT_ORDER_ADDED</code></li> <li><code>TRADE_EVENT_ORDER_DELETED</code></li> <li><code>TRADE_EVENT_POSITION_ADDED</code></li> <li><code>TRADE_EVENT_POSITION_CLOSED</code></li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#6-detailed-change-information","title":"6\ufe0f. Detailed Change Information","text":"<pre><code>if tradeData.EventData != nil {\n    ed := tradeData.EventData\n    fmt.Printf(\"    New Orders: %d, Disappeared Orders: %d\\n\",\n        len(ed.NewOrders), len(ed.DisappearedOrders))\n    fmt.Printf(\"    New Positions: %d, Disappeared Positions: %d\\n\",\n        len(ed.NewPositions), len(ed.DisappearedPositions))\n    fmt.Printf(\"    New History Orders: %d, New History Deals: %d\\n\",\n        len(ed.NewHistoryOrders), len(ed.NewHistoryDeals))\n}\n</code></pre> <p>Each event contains an <code>EventData</code> object, which indicates which elements changed:</p> Field Description <code>NewOrders</code> New orders that appeared in the system <code>DisappearedOrders</code> Orders that disappeared (deleted or executed) <code>NewPositions</code> New open positions <code>DisappearedPositions</code> Positions that were closed <code>NewHistoryOrders</code> New orders added to history <code>NewHistoryDeals</code> New deals added to history <p>Thus, <code>OnTrade()</code> returns a delta of changes \u2014 allowing you to synchronize local data with the server.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#7-stream-termination","title":"7\ufe0f. Stream Termination","text":"<p>The stream closes when the event limit (<code>MAX_EVENTS</code>) is reached, timeout expires, or a connection error occurs.</p>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#what-the-server-returns","title":"\ud83d\udce6 What the Server Returns","text":"<pre><code>message OnTradeData {\n  ENUM_TRADE_EVENT_TYPE Type = 1; // Event type\n  EventData EventData = 2;         // Change details\n}\n\nmessage EventData {\n  repeated OrderInfo NewOrders = 1;\n  repeated OrderInfo DisappearedOrders = 2;\n  repeated PositionInfo NewPositions = 3;\n  repeated PositionInfo DisappearedPositions = 4;\n  repeated HistoryOrderInfo NewHistoryOrders = 5;\n  repeated HistoryDealInfo NewHistoryDeals = 6;\n}\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#example-output","title":"\ud83d\udca1 Example Output","text":"<pre><code>Streaming trade events (max 3 events or 10 seconds)...\n  NOTE: This stream sends events only when trades occur\n  Event #1: Type=TRADE_EVENT_ORDER_ADDED\n    New Orders: 1, Disappeared Orders: 0\n    New Positions: 0, Disappeared Positions: 0\n    New History Orders: 0, New History Deals: 0\n  \u2713 Received 3 events, stopping stream\n</code></pre>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#what-its-used-for","title":"\ud83e\udde0 What It's Used For","text":"<p>The <code>OnTrade()</code> method is used for:</p> <ul> <li>synchronizing local state with the MetaTrader account;</li> <li>monitoring broker activity in real-time;</li> <li>implementing reactive strategies \u2014 automatic reaction to events;</li> <li>building trading journals and activity reports.</li> </ul>"},{"location":"MT5Account/HOW_IT_WORK/7.%20Streaming_Methods_HOW/OnTrade_HOW/#in-simple-terms","title":"\ud83d\udcac In Simple Terms","text":"<p><code>OnTrade()</code> is a stream of trading event notifications. It reports: \"A new order opened\", \"A position closed\", \"A new deal appeared in history\". The stream activates only when there are changes \u2014 no unnecessary data.</p>"},{"location":"MT5Service/1.%20Account_Methods/","title":"MT5Service - Account Methods (Mid-Level API)","text":"<p>4 convenient methods for quick access to account properties without protobuf wrappers</p> <p>\ud83e\udde9 API Layer: MID-LEVEL - wrappers over MT5Account with Go native types</p> <p>Implementation:</p> <p>These methods are implemented in <code>examples/mt5/MT5Service.go</code>, which wraps <code>package/Helpers/MT5Account.go</code> low-level API with convenient helpers for ease of use.</p> <p>Demo files:</p> <ul> <li> <p><code>examples/demos/service/04_service_demo.go</code> - comprehensive examples of all service wrapper methods</p> </li> <li> <p><code>examples/demos/service/05_service_streaming.go</code> - streaming methods examples</p> </li> </ul>"},{"location":"MT5Service/1.%20Account_Methods/#why-these-methods-exist","title":"\ud83c\udfaf Why These Methods Exist","text":"<p>Problem: In MT5Account, every call returns a protobuf <code>Data</code> object that needs to be unpacked:</p> <pre><code>// Low-level (MT5Account)\ndata, err := account.AccountInfoDouble(ctx, &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE,\n})\nbalance := data.GetRequestedValue()  // \u2190 additional call!\n</code></pre> <p>Solution: MT5Service provides direct methods that return values immediately:</p> <pre><code>// Mid-level (MT5Service)\nbalance, err := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE)  // \u2705 done!\n</code></pre> <p>Advantages:</p> <ul> <li>\u2705 Less code (1-2 lines instead of 3-4)</li> <li>\u2705 No need to call <code>.GetRequestedValue()</code></li> <li>\u2705 Returns clean Go types (<code>float64</code>, <code>int64</code>, <code>string</code>)</li> <li>\u2705 Automatic creation of request structures</li> <li>\u2705 Conversion <code>*timestamppb.Timestamp</code> \u2192 <code>*time.Time</code> (in GetAccountSummary)</li> </ul>"},{"location":"MT5Service/1.%20Account_Methods/#all-4-methods","title":"\ud83d\udccb All 4 Methods","text":"Method Returns Low-Level Equivalent <code>GetAccountSummary(ctx)</code> <code>*AccountSummary</code> struct <code>AccountSummary(ctx, &amp;pb.AccountSummaryRequest{})</code> <code>GetAccountDouble(ctx, propertyID)</code> <code>float64</code> <code>AccountInfoDouble(ctx, &amp;pb.AccountInfoDoubleRequest{propertyID})</code> <code>GetAccountInteger(ctx, propertyID)</code> <code>int64</code> <code>AccountInfoInteger(ctx, &amp;pb.AccountInfoIntegerRequest{propertyID})</code> <code>GetAccountString(ctx, propertyID)</code> <code>string</code> <code>AccountInfoString(ctx, &amp;pb.AccountInfoStringRequest{propertyID})</code>"},{"location":"MT5Service/1.%20Account_Methods/#accountsummary-struct-dto","title":"\ud83d\udce6 AccountSummary Struct (DTO)","text":"<pre><code>type AccountSummary struct {\n    Login                   int64                        // Account number\n    Balance                 float64                      // Balance (without floating P&amp;L)\n    Equity                  float64                      // Equity (Balance + Floating P&amp;L)\n    UserName                string                       // Client name\n    Leverage                int64                        // Leverage (100 = 1:100)\n    TradeMode               pb.MrpcEnumAccountTradeMode  // Account type (demo/real/contest)\n    CompanyName             string                       // Broker name\n    Currency                string                       // Deposit currency (USD, EUR, ...)\n    ServerTime              *time.Time                   // Server time (already *time.Time!)\n    UtcTimezoneShiftMinutes int64                        // UTC timezone shift (minutes)\n    Credit                  float64                      // Credit\n}\n</code></pre> <p>Advantage: All important properties in one struct, <code>ServerTime</code> is already <code>*time.Time</code> (no need for <code>.AsTime()</code>).</p>"},{"location":"MT5Service/1.%20Account_Methods/#method-signatures","title":"\ud83d\udcd6 Method Signatures","text":""},{"location":"MT5Service/1.%20Account_Methods/#1-getaccountsummary","title":"1) GetAccountSummary","text":"<pre><code>func (s *MT5Service) GetAccountSummary(ctx context.Context) (*AccountSummary, error)\n</code></pre> <p>Returns all account information in a single call.</p>"},{"location":"MT5Service/1.%20Account_Methods/#2-getaccountdouble","title":"2) GetAccountDouble","text":"<pre><code>func (s *MT5Service) GetAccountDouble(\n    ctx context.Context,\n    propertyID pb.AccountInfoDoublePropertyType,\n) (float64, error)\n</code></pre> <p>Available propertyID:</p> <ul> <li><code>ACCOUNT_BALANCE</code> - balance</li> <li><code>ACCOUNT_CREDIT</code> - credit</li> <li><code>ACCOUNT_PROFIT</code> - current profit</li> <li><code>ACCOUNT_EQUITY</code> - equity</li> <li><code>ACCOUNT_MARGIN</code> - used margin</li> <li><code>ACCOUNT_MARGIN_FREE</code> - free margin</li> <li><code>ACCOUNT_MARGIN_LEVEL</code> - margin level (%)</li> <li><code>ACCOUNT_MARGIN_SO_CALL</code> - margin call level</li> <li><code>ACCOUNT_MARGIN_SO_SO</code> - stop out level</li> <li><code>ACCOUNT_MARGIN_INITIAL</code> - initial margin</li> <li><code>ACCOUNT_MARGIN_MAINTENANCE</code> - maintenance margin</li> <li><code>ACCOUNT_ASSETS</code> - current assets</li> <li><code>ACCOUNT_LIABILITIES</code> - current liabilities</li> <li><code>ACCOUNT_COMMISSION_BLOCKED</code> - blocked commission</li> </ul>"},{"location":"MT5Service/1.%20Account_Methods/#3-getaccountinteger","title":"3) GetAccountInteger","text":"<pre><code>func (s *MT5Service) GetAccountInteger(\n    ctx context.Context,\n    propertyID pb.AccountInfoIntegerPropertyType,\n) (int64, error)\n</code></pre> <p>Available propertyID:</p> <ul> <li><code>ACCOUNT_LOGIN</code> - account number</li> <li><code>ACCOUNT_TRADE_MODE</code> - account type (0=demo, 2=real)</li> <li><code>ACCOUNT_LEVERAGE</code> - leverage</li> <li><code>ACCOUNT_LIMIT_ORDERS</code> - max number of pending orders</li> <li><code>ACCOUNT_MARGIN_SO_MODE</code> - minimum margin setting mode</li> <li><code>ACCOUNT_TRADE_ALLOWED</code> - is trading allowed (0/1)</li> <li><code>ACCOUNT_TRADE_EXPERT</code> - is trading allowed for EA (0/1)</li> <li><code>ACCOUNT_MARGIN_MODE</code> - margin calculation mode</li> <li><code>ACCOUNT_CURRENCY_DIGITS</code> - number of decimal places in currency</li> <li><code>ACCOUNT_FIFO_CLOSE</code> - mandatory FIFO closing (0/1)</li> <li><code>ACCOUNT_HEDGE_ALLOWED</code> - are hedged positions allowed (0/1)</li> </ul>"},{"location":"MT5Service/1.%20Account_Methods/#4-getaccountstring","title":"4) GetAccountString","text":"<pre><code>func (s *MT5Service) GetAccountString(\n    ctx context.Context,\n    propertyID pb.AccountInfoStringPropertyType,\n) (string, error)\n</code></pre> <p>Available propertyID:</p> <ul> <li><code>ACCOUNT_CURRENCY</code> - deposit currency (USD, EUR, ...)</li> <li><code>ACCOUNT_COMPANY</code> - broker name</li> <li><code>ACCOUNT_NAME</code> - account owner name</li> <li><code>ACCOUNT_SERVER</code> - trading server name</li> </ul>"},{"location":"MT5Service/1.%20Account_Methods/#usage-examples","title":"\ud83d\udca1 Usage Examples","text":""},{"location":"MT5Service/1.%20Account_Methods/#example-1-getting-balance-and-equity","title":"Example 1: Getting Balance and Equity","text":"<pre><code>// \u274c BEFORE (MT5Account) - 6 lines:\nreq1 := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE,\n}\nbalanceData, _ := account.AccountInfoDouble(ctx, req1)\nbalance := balanceData.GetRequestedValue()\n\nreq2 := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_EQUITY,\n}\nequityData, _ := account.AccountInfoDouble(ctx, req2)\nequity := equityData.GetRequestedValue()\n\n// \u2705 AFTER (MT5Service) - 2 lines:\nbalance, _ := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE)\nequity, _ := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_EQUITY)\n\nfmt.Printf(\"Balance: %.2f, Equity: %.2f\\n\", balance, equity)\n</code></pre> <p>Code reduction: 67% (6 lines \u2192 2 lines)</p>"},{"location":"MT5Service/1.%20Account_Methods/#example-2-calculating-margin-level","title":"Example 2: Calculating Margin Level","text":"<pre><code>// \u274c BEFORE (MT5Account) - hard to read:\nreq1 := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_EQUITY,\n}\nequityData, _ := account.AccountInfoDouble(ctx, req1)\nequity := equityData.GetRequestedValue()\n\nreq2 := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN,\n}\nmarginData, _ := account.AccountInfoDouble(ctx, req2)\nmargin := marginData.GetRequestedValue()\n\nmarginLevel := (equity / margin) * 100.0\nfmt.Printf(\"Margin Level: %.2f%%\\n\", marginLevel)\n\n// \u2705 AFTER (MT5Service) - reads like normal Go code:\nequity, _ := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_EQUITY)\nmargin, _ := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN)\n\nmarginLevel := (equity / margin) * 100.0\nfmt.Printf(\"Margin Level: %.2f%%\\n\", marginLevel)\n</code></pre> <p>Code reduction: 50% (10 lines \u2192 5 lines)</p>"},{"location":"MT5Service/1.%20Account_Methods/#example-3-checking-account-type-demoreal","title":"Example 3: Checking Account Type (Demo/Real)","text":"<pre><code>// \u2705 MT5Service - compact and clear\ntradeMode, err := service.GetAccountInteger(ctx,\n    pb.AccountInfoIntegerPropertyType_ACCOUNT_TRADE_MODE)\nif err != nil {\n    return err\n}\n\nswitch tradeMode {\ncase 0:\n    fmt.Println(\"\u2705 Demo account - safe for testing\")\ncase 2:\n    fmt.Println(\"\ud83d\udea8 REAL account - trading with real money!\")\n}\n</code></pre>"},{"location":"MT5Service/1.%20Account_Methods/#example-4-getting-full-account-information","title":"Example 4: Getting Full Account Information","text":"<pre><code>// \u2705 BEST way - use GetAccountSummary for multiple properties\nsummary, err := service.GetAccountSummary(ctx)\nif err != nil {\n    return err\n}\n\nfmt.Printf(\"Account: %d\\n\", summary.Login)\nfmt.Printf(\"Balance: %.2f %s\\n\", summary.Balance, summary.Currency)\nfmt.Printf(\"Equity: %.2f\\n\", summary.Equity)\nfmt.Printf(\"Leverage: 1:%d\\n\", summary.Leverage)\nfmt.Printf(\"Broker: %s\\n\", summary.CompanyName)\n\n// ServerTime is already *time.Time (no need for .AsTime()!)\nif summary.ServerTime != nil {\n    fmt.Printf(\"Server time: %s\\n\", summary.ServerTime.Format(\"15:04:05\"))\n}\n</code></pre>"},{"location":"MT5Service/1.%20Account_Methods/#example-5-balance-monitoring","title":"Example 5: Balance Monitoring","text":"<pre><code>func MonitorBalance(service *mt5.MT5Service, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n\n        // \u2705 One line instead of 3-4\n        balance, err := service.GetAccountDouble(ctx,\n            pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE)\n        cancel()\n\n        if err != nil {\n            fmt.Printf(\"\u274c Error: %v\\n\", err)\n            continue\n        }\n\n        fmt.Printf(\"[%s] Balance: %.2f\\n\",\n            time.Now().Format(\"15:04:05\"), balance)\n    }\n}\n</code></pre>"},{"location":"MT5Service/1.%20Account_Methods/#example-6-checking-free-margin-before-opening-a-position","title":"Example 6: Checking Free Margin Before Opening a Position","text":"<pre><code>func CanOpenPosition(service *mt5.MT5Service, requiredMargin float64) (bool, error) {\n    ctx := context.Background()\n\n    // \u2705 Simple and clear code\n    freeMargin, err := service.GetAccountDouble(ctx,\n        pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN_FREE)\n    if err != nil {\n        return false, err\n    }\n\n    if freeMargin &lt; requiredMargin {\n        fmt.Printf(\"\u26a0\ufe0f Insufficient margin: %.2f (required: %.2f)\\n\",\n            freeMargin, requiredMargin)\n        return false, nil\n    }\n\n    fmt.Printf(\"\u2705 Sufficient margin: %.2f\\n\", freeMargin)\n    return true, nil\n}\n</code></pre>"},{"location":"MT5Service/1.%20Account_Methods/#when-to-use-which-method","title":"\ud83d\udd27 When to Use Which Method","text":""},{"location":"MT5Service/1.%20Account_Methods/#getaccountsummary","title":"\u2705 GetAccountSummary","text":"<p>Use when:</p> <ul> <li>You need multiple properties at once (Balance + Equity + Currency)</li> <li>Building a dashboard or report</li> <li>Need complete account information</li> </ul> <p>Example:</p> <pre><code>summary, _ := service.GetAccountSummary(ctx)\nfmt.Printf(\"Balance: %.2f %s, Equity: %.2f, Leverage: 1:%d\\n\",\n    summary.Balance, summary.Currency, summary.Equity, summary.Leverage)\n</code></pre>"},{"location":"MT5Service/1.%20Account_Methods/#getaccountdouble-getaccountinteger-getaccountstring","title":"\u2705 GetAccountDouble / GetAccountInteger / GetAccountString","text":"<p>Use when:</p> <ul> <li>You need one specific property</li> <li>Writing checks or validations</li> <li>Monitoring a specific metric</li> </ul> <p>Example:</p> <pre><code>// Only balance - use GetAccountDouble\nbalance, _ := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE)\n</code></pre>"},{"location":"MT5Service/1.%20Account_Methods/#recommendations","title":"\ud83d\udca1 Recommendations","text":"<ol> <li>For a single property \u2192 use <code>GetAccountDouble/Integer/String</code></li> <li>For 2-3 properties \u2192 use <code>GetAccountSummary</code> (already has everything)</li> <li>For all information \u2192 use <code>GetAccountSummary</code></li> </ol>"},{"location":"MT5Service/1.%20Account_Methods/#related-sections","title":"\ud83d\udcda Related Sections","text":"<ul> <li>MT5Service Overview - mid-level API overview</li> <li>Symbol Methods (Mid-Level) - methods for working with symbols</li> <li>Account Information (Low-Level) - low-level account API</li> <li>Trading Methods (Mid-Level) - trading methods</li> <li>Trading Operations (Low-Level) - low-level trading API</li> <li>Streaming Methods (Mid-Level) - streaming methods</li> <li>Streaming Methods (Low-Level) - low-level streaming API</li> <li>MT5Account Master Overview - low-level API master reference</li> </ul>"},{"location":"MT5Service/1.%20Account_Methods/#summary","title":"\ud83c\udfaf Summary","text":"<p>MT5Service Account methods solve one task - remove protobuf ceremony:</p> <ul> <li>\u274c No need to create requests manually</li> <li>\u274c No need to call <code>.GetRequestedValue()</code></li> <li>\u274c No need to convert timestamps</li> <li>\u2705 Get clean Go types (<code>float64</code>, <code>int64</code>, <code>string</code>, <code>*AccountSummary</code>)</li> <li>\u2705 Code reads like normal Go, without protobuf dependencies</li> </ul>"},{"location":"MT5Service/2.%20Symbol_Methods/","title":"MT5Service - Symbol Methods (Mid-Level API)","text":"<p>13 methods for working with symbols and their parameters with clean Go types</p> <p>\ud83e\udde9 API Layer: MID-LEVEL - wrappers over MT5Account with convenient DTO structures</p> <p>Implementation:</p> <p>These methods are implemented in <code>examples/mt5/MT5Service.go</code>, which wraps <code>package/Helpers/MT5Account.go</code> low-level API with convenient helpers for ease of use.</p> <p>Demo files:</p> <ul> <li><code>examples/demos/service/04_service_demo.go</code> - comprehensive examples of all service wrapper methods</li> <li><code>examples/demos/service/05_service_streaming.go</code> - streaming methods examples</li> </ul>"},{"location":"MT5Service/2.%20Symbol_Methods/#why-these-methods-exist","title":"\ud83c\udfaf Why These Methods Exist","text":"<p>Problem: In MT5Account, to get symbol parameters you need to make multiple calls:</p> <pre><code>// Low-level (MT5Account) - 3 calls for 3 parameters:\nbidData, _ := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_BID,\n})\nbid := bidData.Value  // \u2190 unpacking\n\naskData, _ := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_ASK,\n})\nask := askData.Value  // \u2190 unpacking\n\ndigitsData, _ := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoIntegerProperty_SYMBOL_DIGITS,\n})\ndigits := digitsData.Value  // \u2190 unpacking\n</code></pre> <p>Solution: MT5Service provides direct methods and batch operations:</p> <pre><code>// Mid-level (MT5Service) - 1 call for all parameters:\nsymbols, _, _ := service.GetSymbolParamsMany(ctx, nil, nil, nil, nil)\nfor _, s := range symbols {\n    fmt.Printf(\"%s: Bid=%.5f, Ask=%.5f, Digits=%d\\n\",\n        s.Name, s.Bid, s.Ask, s.Digits)\n}\n</code></pre> <p>Advantages:</p> <ul> <li>\u2705 One GetSymbolParamsMany call instead of 10+ SymbolInfo* calls</li> <li>\u2705 Returns clean Go types (float64, int64, string)</li> <li>\u2705 SymbolTick with time.Time (not Unix timestamp)</li> <li>\u2705 SessionTime with time.Time (not protobuf Timestamp)</li> <li>\u2705 Automatic timestamp conversion</li> </ul>"},{"location":"MT5Service/2.%20Symbol_Methods/#all-13-methods","title":"\ud83d\udccb All 13 Methods","text":"Method Returns Low-Level Equivalent <code>GetSymbolsTotal(ctx, selectedOnly)</code> <code>int32</code> <code>SymbolsTotal(ctx, req)</code> + <code>.Total</code> <code>SymbolExist(ctx, symbol)</code> <code>(bool, bool)</code> <code>SymbolExist(ctx, req)</code> + <code>.Exists, .IsCustom</code> <code>GetSymbolName(ctx, index, selectedOnly)</code> <code>string</code> <code>SymbolName(ctx, req)</code> + <code>.Name</code> <code>SymbolSelect(ctx, symbol, select_)</code> <code>bool</code> <code>SymbolSelect(ctx, req)</code> + <code>.Success</code> <code>IsSymbolSynchronized(ctx, symbol)</code> <code>bool</code> <code>SymbolIsSynchronized(ctx, req)</code> + <code>.Synchronized</code> <code>GetSymbolDouble(ctx, symbol, property)</code> <code>float64</code> <code>SymbolInfoDouble(ctx, req)</code> + <code>.Value</code> <code>GetSymbolInteger(ctx, symbol, property)</code> <code>int64</code> <code>SymbolInfoInteger(ctx, req)</code> + <code>.Value</code> <code>GetSymbolString(ctx, symbol, property)</code> <code>string</code> <code>SymbolInfoString(ctx, req)</code> + <code>.Value</code> <code>GetSymbolMarginRate(ctx, symbol, orderType)</code> <code>*SymbolMarginRate</code> <code>SymbolInfoMarginRate(ctx, req)</code> + unpacking <code>GetSymbolTick(ctx, symbol)</code> <code>*SymbolTick</code> <code>SymbolInfoTick(ctx, req)</code> + time.Time conversion <code>GetSymbolSessionQuote(ctx, symbol, day, idx)</code> <code>*SessionTime</code> <code>SymbolInfoSessionQuote(ctx, req)</code> + .AsTime() <code>GetSymbolSessionTrade(ctx, symbol, day, idx)</code> <code>*SessionTime</code> <code>SymbolInfoSessionTrade(ctx, req)</code> + .AsTime() <code>GetSymbolParamsMany(ctx, name, sort, page, perPage)</code> <code>[]SymbolParams</code> <code>SymbolParamsMany(ctx, req)</code> + unpacking"},{"location":"MT5Service/2.%20Symbol_Methods/#dto-structures","title":"\ud83d\udce6 DTO Structures","text":""},{"location":"MT5Service/2.%20Symbol_Methods/#symbolparams","title":"SymbolParams","text":"<pre><code>type SymbolParams struct {\n    Name                 string  // Symbol name (EURUSD, GBPUSD, etc.)\n    Bid                  float64 // Current Bid price\n    Ask                  float64 // Current Ask price\n    Last                 float64 // Last deal price\n    Point                float64 // Point size (minimal price change)\n    Digits               int32   // Number of decimal places\n    Spread               int32   // Current spread in points\n    VolumeMin            float64 // Minimum volume for trading\n    VolumeMax            float64 // Maximum volume for trading\n    VolumeStep           float64 // Volume step\n    TradeTickSize        float64 // Trade tick size\n    TradeTickValue       float64 // Trade tick value\n    TradeContractSize    float64 // Contract size\n    SwapLong             float64 // Swap for long positions\n    SwapShort            float64 // Swap for short positions\n    MarginInitial        float64 // Initial margin requirement\n    MarginMaintenance    float64 // Maintenance margin requirement\n}\n</code></pre> <p>Advantage: All important symbol parameters in one structure.</p>"},{"location":"MT5Service/2.%20Symbol_Methods/#symboltick","title":"SymbolTick","text":"<pre><code>type SymbolTick struct {\n    Time       time.Time // Tick time (already converted from Unix)\n    Bid        float64   // Current Bid price\n    Ask        float64   // Current Ask price\n    Last       float64   // Last deal price\n    Volume     uint64    // Tick volume\n    TimeMS     int64     // Tick time in milliseconds\n    Flags      uint32    // Tick flags\n    VolumeReal float64   // Tick volume with decimal precision\n}\n</code></pre> <p>Advantage: Time is already <code>time.Time</code>, no manual conversion from Unix timestamp needed.</p>"},{"location":"MT5Service/2.%20Symbol_Methods/#symbolmarginrate","title":"SymbolMarginRate","text":"<pre><code>type SymbolMarginRate struct {\n    InitialMarginRate     float64 // Initial margin rate\n    MaintenanceMarginRate float64 // Maintenance margin rate\n}\n</code></pre>"},{"location":"MT5Service/2.%20Symbol_Methods/#sessiontime","title":"SessionTime","text":"<pre><code>type SessionTime struct {\n    From time.Time // Session start time (already converted)\n    To   time.Time // Session end time (already converted)\n}\n</code></pre> <p>Advantage: From/To are already <code>time.Time</code>, no <code>.AsTime()</code> calls needed.</p>"},{"location":"MT5Service/2.%20Symbol_Methods/#method-signatures","title":"\ud83d\udcd6 Method Signatures","text":""},{"location":"MT5Service/2.%20Symbol_Methods/#1-getsymbolstotal","title":"1) GetSymbolsTotal","text":"<pre><code>func (s *MT5Service) GetSymbolsTotal(\n    ctx context.Context,\n    selectedOnly bool,\n) (int32, error)\n</code></pre> <p>Returns the number of available symbols.</p> <ul> <li><code>selectedOnly=true</code> - only symbols in Market Watch</li> <li><code>selectedOnly=false</code> - all symbols</li> </ul>"},{"location":"MT5Service/2.%20Symbol_Methods/#2-symbolexist","title":"2) SymbolExist","text":"<pre><code>func (s *MT5Service) SymbolExist(\n    ctx context.Context,\n    symbol string,\n) (bool, bool, error)\n</code></pre> <p>Checks if a symbol exists in the terminal.</p> <p>Returns: <code>(exists, isCustom, error)</code></p>"},{"location":"MT5Service/2.%20Symbol_Methods/#3-getsymbolname","title":"3) GetSymbolName","text":"<pre><code>func (s *MT5Service) GetSymbolName(\n    ctx context.Context,\n    index int32,\n    selectedOnly bool,\n) (string, error)\n</code></pre> <p>Gets symbol name by index.</p>"},{"location":"MT5Service/2.%20Symbol_Methods/#4-symbolselect","title":"4) SymbolSelect","text":"<pre><code>func (s *MT5Service) SymbolSelect(\n    ctx context.Context,\n    symbol string,\n    select_ bool,\n) (bool, error)\n</code></pre> <p>Adds/removes a symbol to/from Market Watch.</p> <ul> <li><code>select_=true</code> - add</li> <li><code>select_=false</code> - remove</li> </ul>"},{"location":"MT5Service/2.%20Symbol_Methods/#5-issymbolsynchronized","title":"5) IsSymbolSynchronized","text":"<pre><code>func (s *MT5Service) IsSymbolSynchronized(\n    ctx context.Context,\n    symbol string,\n) (bool, error)\n</code></pre> <p>Checks if symbol data is synchronized with the server.</p>"},{"location":"MT5Service/2.%20Symbol_Methods/#6-8-getsymboldouble-getsymbolinteger-getsymbolstring","title":"6-8) GetSymbolDouble / GetSymbolInteger / GetSymbolString","text":"<pre><code>func (s *MT5Service) GetSymbolDouble(\n    ctx context.Context,\n    symbol string,\n    property pb.SymbolInfoDoubleProperty,\n) (float64, error)\n\nfunc (s *MT5Service) GetSymbolInteger(\n    ctx context.Context,\n    symbol string,\n    property pb.SymbolInfoIntegerProperty,\n) (int64, error)\n\nfunc (s *MT5Service) GetSymbolString(\n    ctx context.Context,\n    symbol string,\n    property pb.SymbolInfoStringProperty,\n) (string, error)\n</code></pre> <p>Get a single symbol property by ID.</p> <p>Available Double properties:</p> <ul> <li><code>SYMBOL_BID</code> - Bid price</li> <li><code>SYMBOL_ASK</code> - Ask price</li> <li><code>SYMBOL_POINT</code> - point size</li> <li><code>SYMBOL_VOLUME_MIN</code> - minimum volume</li> <li><code>SYMBOL_VOLUME_MAX</code> - maximum volume</li> </ul> <p>Available Integer properties:</p> <ul> <li><code>SYMBOL_DIGITS</code> - number of decimal places</li> <li><code>SYMBOL_SPREAD</code> - spread in points</li> <li><code>SYMBOL_TRADE_MODE</code> - trading mode</li> </ul> <p>Available String properties:</p> <ul> <li><code>SYMBOL_DESCRIPTION</code> - symbol description</li> <li><code>SYMBOL_PATH</code> - path in symbols tree</li> </ul>"},{"location":"MT5Service/2.%20Symbol_Methods/#9-getsymbolmarginrate","title":"9) GetSymbolMarginRate","text":"<pre><code>func (s *MT5Service) GetSymbolMarginRate(\n    ctx context.Context,\n    symbol string,\n    orderType pb.ENUM_ORDER_TYPE,\n) (*SymbolMarginRate, error)\n</code></pre> <p>Gets margin rates for a symbol and order type.</p>"},{"location":"MT5Service/2.%20Symbol_Methods/#10-getsymboltick","title":"10) GetSymbolTick","text":"<pre><code>func (s *MT5Service) GetSymbolTick(\n    ctx context.Context,\n    symbol string,\n) (*SymbolTick, error)\n</code></pre> <p>Gets the last tick for a symbol.</p> <p>Advantage: Time is already <code>time.Time</code>, no manual conversion needed.</p>"},{"location":"MT5Service/2.%20Symbol_Methods/#11-12-getsymbolsessionquote-getsymbolsessiontrade","title":"11-12) GetSymbolSessionQuote / GetSymbolSessionTrade","text":"<pre><code>func (s *MT5Service) GetSymbolSessionQuote(\n    ctx context.Context,\n    symbol string,\n    dayOfWeek pb.DayOfWeek,\n    sessionIndex uint32,\n) (*SessionTime, error)\n\nfunc (s *MT5Service) GetSymbolSessionTrade(\n    ctx context.Context,\n    symbol string,\n    dayOfWeek pb.DayOfWeek,\n    sessionIndex uint32,\n) (*SessionTime, error)\n</code></pre> <p>Get trading/quote session times.</p> <p>Advantage: From/To are already <code>time.Time</code>, no <code>.AsTime()</code> calls needed.</p>"},{"location":"MT5Service/2.%20Symbol_Methods/#13-getsymbolparamsmany","title":"13) GetSymbolParamsMany","text":"<pre><code>func (s *MT5Service) GetSymbolParamsMany(\n    ctx context.Context,\n    symbolName *string,\n    sortType *pb.AH_SYMBOL_PARAMS_MANY_SORT_TYPE,\n    pageNumber *int32,\n    itemsPerPage *int32,\n) ([]SymbolParams, int32, error)\n</code></pre> <p>RECOMMENDED method - gets parameters for multiple symbols in one call.</p> <p>Returns: <code>(symbols []SymbolParams, total int32, error)</code></p> <p>Parameters (all optional):</p> <ul> <li><code>symbolName</code> - name filter (nil = all symbols)</li> <li><code>sortType</code> - sort type (nil = default)</li> <li><code>pageNumber</code> - page number (nil = 1)</li> <li><code>itemsPerPage</code> - items per page (nil = all)</li> </ul>"},{"location":"MT5Service/2.%20Symbol_Methods/#usage-examples","title":"\ud83d\udca1 Usage Examples","text":""},{"location":"MT5Service/2.%20Symbol_Methods/#example-1-getting-current-price-bidask","title":"Example 1: Getting Current Price (Bid/Ask)","text":"<pre><code>// \u274c BEFORE (MT5Account) - 2 calls, 6 lines:\nbidReq := &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_BID,\n}\nbidData, _ := account.SymbolInfoDouble(ctx, bidReq)\nbid := bidData.Value\n\naskReq := &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_ASK,\n}\naskData, _ := account.SymbolInfoDouble(ctx, askReq)\nask := askData.Value\n\nfmt.Printf(\"EURUSD: Bid=%.5f, Ask=%.5f\\n\", bid, ask)\n\n// \u2705 AFTER (MT5Service) - 1 GetSymbolTick call, 3 lines:\ntick, _ := service.GetSymbolTick(ctx, \"EURUSD\")\nfmt.Printf(\"EURUSD: Bid=%.5f, Ask=%.5f\\n\", tick.Bid, tick.Ask)\nfmt.Printf(\"Time: %s\\n\", tick.Time.Format(\"15:04:05\"))\n</code></pre> <p>Code reduction: 60% (10 lines \u2192 4 lines)</p>"},{"location":"MT5Service/2.%20Symbol_Methods/#example-2-getting-all-symbol-parameters","title":"Example 2: Getting All Symbol Parameters","text":"<pre><code>// \u274c BEFORE (MT5Account) - 10+ calls for different properties:\nbidData, _ := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_BID,\n})\naskData, _ := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_ASK,\n})\ndigitsData, _ := account.SymbolInfoInteger(ctx, &amp;pb.SymbolInfoIntegerRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoIntegerProperty_SYMBOL_DIGITS,\n})\n// ... 7 more calls for other properties\n\n// \u2705 AFTER (MT5Service) - 1 GetSymbolParamsMany call:\nsymbolName := \"EURUSD\"\nsymbols, _, _ := service.GetSymbolParamsMany(ctx, &amp;symbolName, nil, nil, nil)\nif len(symbols) &gt; 0 {\n    s := symbols[0]\n    fmt.Printf(\"Symbol: %s\\n\", s.Name)\n    fmt.Printf(\"Bid: %.5f, Ask: %.5f\\n\", s.Bid, s.Ask)\n    fmt.Printf(\"Digits: %d, Spread: %d\\n\", s.Digits, s.Spread)\n    fmt.Printf(\"Volume: %.2f - %.2f (step: %.2f)\\n\",\n        s.VolumeMin, s.VolumeMax, s.VolumeStep)\n    fmt.Printf(\"Swap Long: %.2f, Short: %.2f\\n\", s.SwapLong, s.SwapShort)\n}\n</code></pre> <p>Code reduction: 70% (30+ lines \u2192 9 lines)</p>"},{"location":"MT5Service/2.%20Symbol_Methods/#example-3-getting-list-of-all-symbols","title":"Example 3: Getting List of All Symbols","text":"<pre><code>// \u2705 MT5Service - get all symbols in one call\nsymbols, total, err := service.GetSymbolParamsMany(ctx, nil, nil, nil, nil)\nif err != nil {\n    return err\n}\n\nfmt.Printf(\"Total symbols: %d\\n\", total)\nfor i, s := range symbols {\n    fmt.Printf(\"%d. %s: Bid=%.5f, Ask=%.5f, Digits=%d\\n\",\n        i+1, s.Name, s.Bid, s.Ask, s.Digits)\n}\n</code></pre>"},{"location":"MT5Service/2.%20Symbol_Methods/#example-4-filtering-symbols-with-high-spread","title":"Example 4: Filtering Symbols with High Spread","text":"<pre><code>// \u2705 MT5Service - filter symbols by spread\nsymbols, _, err := service.GetSymbolParamsMany(ctx, nil, nil, nil, nil)\nif err != nil {\n    return err\n}\n\nfmt.Println(\"Symbols with spread &gt; 10 points:\")\nfor _, s := range symbols {\n    if s.Spread &gt; 10 {\n        fmt.Printf(\"%s: Spread=%d points (%.5f)\\n\",\n            s.Name, s.Spread, float64(s.Spread)*s.Point)\n    }\n}\n</code></pre>"},{"location":"MT5Service/2.%20Symbol_Methods/#example-5-checking-symbol-availability-for-trading","title":"Example 5: Checking Symbol Availability for Trading","text":"<pre><code>// \u2705 MT5Service - comprehensive symbol check\nfunc IsSymbolTradeable(service *mt5.MT5Service, symbol string) (bool, error) {\n    ctx := context.Background()\n\n    // 1. Check existence\n    exists, isCustom, err := service.SymbolExist(ctx, symbol)\n    if err != nil {\n        return false, err\n    }\n    if !exists {\n        fmt.Printf(\"\u274c Symbol %s does not exist\\n\", symbol)\n        return false, nil\n    }\n    if isCustom {\n        fmt.Printf(\"\u26a0\ufe0f Symbol %s is custom\\n\", symbol)\n    }\n\n    // 2. Add to Market Watch (if needed)\n    success, err := service.SymbolSelect(ctx, symbol, true)\n    if err != nil || !success {\n        fmt.Printf(\"\u274c Cannot add %s to Market Watch\\n\", symbol)\n        return false, err\n    }\n\n    // 3. Check synchronization\n    synced, err := service.IsSymbolSynchronized(ctx, symbol)\n    if err != nil || !synced {\n        fmt.Printf(\"\u274c Symbol %s is not synchronized\\n\", symbol)\n        return false, err\n    }\n\n    // 4. Check trading parameters\n    symbolName := symbol\n    symbols, _, err := service.GetSymbolParamsMany(ctx, &amp;symbolName, nil, nil, nil)\n    if err != nil || len(symbols) == 0 {\n        return false, err\n    }\n\n    s := symbols[0]\n    if s.VolumeMin &lt;= 0 || s.VolumeMax &lt;= 0 {\n        fmt.Printf(\"\u274c Symbol %s has invalid volume limits\\n\", symbol)\n        return false, nil\n    }\n\n    fmt.Printf(\"\u2705 Symbol %s is tradeable:\\n\", symbol)\n    fmt.Printf(\"   Bid=%.5f, Ask=%.5f\\n\", s.Bid, s.Ask)\n    fmt.Printf(\"   Volume: %.2f - %.2f (step: %.2f)\\n\",\n        s.VolumeMin, s.VolumeMax, s.VolumeStep)\n    fmt.Printf(\"   Spread: %d points\\n\", s.Spread)\n\n    return true, nil\n}\n</code></pre>"},{"location":"MT5Service/2.%20Symbol_Methods/#example-6-calculating-pip-value","title":"Example 6: Calculating Pip Value","text":"<pre><code>// \u2705 MT5Service - calculate pip value\nsymbolName := \"EURUSD\"\nsymbols, _, _ := service.GetSymbolParamsMany(ctx, &amp;symbolName, nil, nil, nil)\nif len(symbols) == 0 {\n    return fmt.Errorf(\"symbol not found\")\n}\n\ns := symbols[0]\nvolume := 1.0 // 1 lot\n\n// Pip value = TradeTickValue * Volume\npipValue := s.TradeTickValue * volume\nfmt.Printf(\"Symbol: %s\\n\", s.Name)\nfmt.Printf(\"Point: %.5f\\n\", s.Point)\nfmt.Printf(\"Pip value (1 lot): %.2f USD\\n\", pipValue)\nfmt.Printf(\"Contract size: %.0f\\n\", s.TradeContractSize)\n</code></pre>"},{"location":"MT5Service/2.%20Symbol_Methods/#when-to-use","title":"\ud83d\udd27 When to Use","text":""},{"location":"MT5Service/2.%20Symbol_Methods/#getsymbolparamsmany-recommended","title":"\u2705 GetSymbolParamsMany (RECOMMENDED)","text":"<p>Use when:</p> <ul> <li>Need multiple parameters for one symbol</li> <li>Getting a list of symbols (all or filtered)</li> <li>Building a table/list of symbols</li> <li>Need pagination for large lists</li> </ul> <p>Example:</p> <pre><code>symbols, total, _ := service.GetSymbolParamsMany(ctx, nil, nil, nil, nil)\nfmt.Printf(\"Found %d symbols\\n\", total)\n</code></pre>"},{"location":"MT5Service/2.%20Symbol_Methods/#getsymboltick","title":"\u2705 GetSymbolTick","text":"<p>Use when:</p> <ul> <li>Need current price (Bid/Ask)</li> <li>Need last tick with timestamp</li> <li>Checking quote freshness</li> </ul> <p>Example: <pre><code>tick, _ := service.GetSymbolTick(ctx, \"EURUSD\")\nfmt.Printf(\"Current: Bid=%.5f, Ask=%.5f\\n\", tick.Bid, tick.Ask)\n</code></pre></p>"},{"location":"MT5Service/2.%20Symbol_Methods/#getsymboldoubleintegerstring","title":"\u2705 GetSymbolDouble/Integer/String","text":"<p>Use when:</p> <ul> <li>Need one specific property</li> <li>Making a point check</li> <li>GetSymbolParamsMany is overkill</li> </ul> <p>Example:</p> <pre><code>spread, _ := service.GetSymbolInteger(ctx, \"EURUSD\",\n    pb.SymbolInfoIntegerProperty_SYMBOL_SPREAD)\n</code></pre>"},{"location":"MT5Service/2.%20Symbol_Methods/#symbolexist-symbolselect-issymbolsynchronized","title":"\u2705 SymbolExist / SymbolSelect / IsSymbolSynchronized","text":"<p>Use when:</p> <ul> <li>Checking symbol existence</li> <li>Adding symbol to Market Watch</li> <li>Checking data readiness for trading</li> </ul>"},{"location":"MT5Service/2.%20Symbol_Methods/#performance-comparison","title":"\ud83d\udcca Performance Comparison","text":"Task Low-Level (lines of code) Mid-Level (lines of code) Reduction Get Bid/Ask 6-8 lines 2-3 lines 60-70% Get all symbol parameters 30-40 lines 5-10 lines 70-80% Get list of all symbols 50+ lines 5-10 lines 80-90% Check symbol 10-15 lines 3-5 lines 60-70%"},{"location":"MT5Service/2.%20Symbol_Methods/#recommendations","title":"\ud83d\udca1 Recommendations","text":"<ol> <li>For multiple properties \u2192 use <code>GetSymbolParamsMany</code> instead of multiple <code>GetSymbolDouble/Integer</code> calls</li> <li>For current price \u2192 use <code>GetSymbolTick</code> (Bid/Ask + timestamp in one call)</li> <li>Before trading \u2192 check <code>SymbolExist</code> + <code>IsSymbolSynchronized</code></li> <li>For batch operations \u2192 use <code>GetSymbolParamsMany</code> with pagination</li> <li>For filtering \u2192 get all symbols via <code>GetSymbolParamsMany</code>, then filter in code</li> </ol> <p>\"One Request Instead of Many\" Pattern: <pre><code>// \u274c BAD - 10 calls for 10 parameters\nbid, _ := service.GetSymbolDouble(ctx, \"EURUSD\", SYMBOL_BID)\nask, _ := service.GetSymbolDouble(ctx, \"EURUSD\", SYMBOL_ASK)\n// ... 8 more calls\n\n// \u2705 GOOD - 1 call for all parameters\nsymbolName := \"EURUSD\"\nsymbols, _, _ := service.GetSymbolParamsMany(ctx, &amp;symbolName, nil, nil, nil)\ns := symbols[0]  // Everything in one structure\n</code></pre></p>"},{"location":"MT5Service/2.%20Symbol_Methods/#related-sections","title":"\ud83d\udcda Related Sections","text":"<ul> <li>MT5Service Overview - mid-level API overview</li> <li>Account Methods (Mid-Level) - account methods</li> <li>Account Information (Low-Level) - low-level account API</li> <li>Trading Methods (Mid-Level) - trading methods</li> <li>Trading Operations (Low-Level) - low-level trading API</li> <li>Streaming Methods (Mid-Level) - tick streaming</li> <li>Streaming Methods (Low-Level) - low-level streaming API</li> <li>MT5Account Master Overview - low-level API master reference</li> </ul>"},{"location":"MT5Service/2.%20Symbol_Methods/#summary","title":"\ud83c\udfaf Summary","text":"<p>MT5Service Symbol methods solve the main task - eliminate multiple calls:</p> <ul> <li>\u274c No need for 10+ <code>SymbolInfo*</code> calls for all parameters</li> <li>\u274c No need to call <code>.Value</code> for each property</li> <li>\u274c No need to convert Unix timestamp to time.Time</li> <li>\u2705 Get all symbol parameters in one <code>GetSymbolParamsMany</code> call</li> <li>\u2705 SymbolTick and SessionTime with ready <code>time.Time</code></li> <li>\u2705 Code reads like normal Go</li> <li>\u2705 Batch operations with pagination</li> </ul>"},{"location":"MT5Service/3.%20Position_Orders_Methods/","title":"MT5Service - Position &amp; Orders Methods (Mid-Level API)","text":"<p>5 methods for getting information about open positions, pending orders, and history</p> <p>\ud83e\udde9 API Layer: MID-LEVEL - wrappers over MT5Account with clean Go types</p> <p>Implementation:</p> <p>These methods are implemented in <code>examples/mt5/MT5Service.go</code>, which wraps <code>package/Helpers/MT5Account.go</code> low-level API with convenient helpers for ease of use.</p> <p>Demo files:</p> <ul> <li><code>examples/demos/service/04_service_demo.go</code> - comprehensive examples of all service wrapper methods</li> <li><code>examples/demos/service/05_service_streaming.go</code> - streaming methods examples</li> </ul>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#why-these-methods-exist","title":"\ud83c\udfaf Why These Methods Exist","text":"<p>Problem: In MT5Account, to get positions and orders you need to work with protobuf structures:</p> <pre><code>// Low-level (MT5Account)\ndata, err := account.PositionsTotal(ctx)\ntotal := data.TotalPositions  // \u2190 unpacking\n\nordersData, err := account.OpenedOrders(ctx, &amp;pb.OpenedOrdersRequest{...})\n// ordersData.OpenedPositions - complex protobuf structure\n</code></pre> <p>Solution: MT5Service simplifies access and returns clean types:</p> <pre><code>// Mid-level (MT5Service)\ntotal, err := service.GetPositionsTotal(ctx)  // \u2705 directly int32\n\norders, err := service.GetOpenedOrders(ctx, sortMode)  // \u2705 protobuf data directly\n</code></pre> <p>Advantages:</p> <ul> <li>\u2705 Less code (1 line instead of 2-3)</li> <li>\u2705 Direct access to data without <code>.TotalPositions</code></li> <li>\u2705 Simplified method signatures</li> <li>\u2705 Automatic request structure creation</li> <li>\u2705 Pagination support for history</li> </ul>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#all-5-methods","title":"\ud83d\udccb All 5 Methods","text":"Method Returns Low-Level Equivalent <code>GetPositionsTotal(ctx)</code> <code>int32</code> <code>PositionsTotal(ctx)</code> + <code>.TotalPositions</code> <code>GetOpenedOrders(ctx, sortMode)</code> <code>*OpenedOrdersData</code> <code>OpenedOrders(ctx, req)</code> <code>GetOpenedTickets(ctx)</code> <code>([]int64, []int64)</code> <code>OpenedOrdersTickets(ctx, req)</code> + unpacking <code>GetOrderHistory(ctx, from, to, sortMode, page, perPage)</code> <code>*OrdersHistoryData</code> <code>OrderHistory(ctx, req)</code> with time.Time conversion <code>GetPositionsHistory(ctx, sortType, from, to, page, perPage)</code> <code>*PositionsHistoryData</code> <code>PositionsHistory(ctx, req)</code> with time.Time conversion"},{"location":"MT5Service/3.%20Position_Orders_Methods/#method-signatures","title":"\ud83d\udcd6 Method Signatures","text":""},{"location":"MT5Service/3.%20Position_Orders_Methods/#1-getpositionstotal","title":"1) GetPositionsTotal","text":"<pre><code>func (s *MT5Service) GetPositionsTotal(ctx context.Context) (int32, error)\n</code></pre> <p>Returns the number of open positions.</p> <p>Low-level equivalent: <code>PositionsTotal(ctx)</code> with <code>.TotalPositions</code> extraction.</p> <p>Example: <pre><code>total, err := service.GetPositionsTotal(ctx)\nfmt.Printf(\"Open positions: %d\\n\", total)\n</code></pre></p>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#2-getopenedorders","title":"2) GetOpenedOrders","text":"<pre><code>func (s *MT5Service) GetOpenedOrders(\n    ctx context.Context,\n    sortMode pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE,\n) (*pb.OpenedOrdersData, error)\n</code></pre> <p>Gets all open positions and pending orders.</p> <p>Parameters:</p> <ul> <li><code>sortMode</code> - sorting mode from <code>BMT5_ENUM_OPENED_ORDER_SORT_TYPE</code>:</li> <li><code>SORT_BY_TICKET_ASC</code> - by ticket ascending</li> <li><code>SORT_BY_TICKET_DESC</code> - by ticket descending</li> <li><code>SORT_BY_SYMBOL_ASC</code> - by symbol (A\u2192Z)</li> <li><code>SORT_BY_PROFIT_ASC</code> - by profit (loss \u2192 profit)</li> <li><code>SORT_BY_PROFIT_DESC</code> - by profit (profit \u2192 loss)</li> </ul> <p>Returns:</p> <ul> <li><code>*pb.OpenedOrdersData</code> with lists:</li> <li><code>OpenedPositions []MqlPosition</code> - open positions</li> <li><code>OpenedOrders []MqlOrder</code> - pending orders</li> </ul> <p>Example:</p> <pre><code>data, err := service.GetOpenedOrders(ctx,\n    pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_SORT_BY_PROFIT_DESC)\nif err != nil {\n    return err\n}\n\nfmt.Printf(\"Opened positions: %d\\n\", len(data.OpenedPositions))\nfor _, pos := range data.OpenedPositions {\n    fmt.Printf(\"  Position #%d: %s, Profit: %.2f\\n\",\n        pos.Ticket, pos.Symbol, pos.Profit)\n}\n\nfmt.Printf(\"Pending orders: %d\\n\", len(data.OpenedOrders))\nfor _, order := range data.OpenedOrders {\n    fmt.Printf(\"  Order #%d: %s, Type: %v\\n\",\n        order.Ticket, order.Symbol, order.Type)\n}\n</code></pre>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#3-getopenedtickets","title":"3) GetOpenedTickets","text":"<pre><code>func (s *MT5Service) GetOpenedTickets(ctx context.Context) ([]int64, []int64, error)\n</code></pre> <p>Gets only ticket numbers of open positions and pending orders.</p> <p>Lightweight alternative to GetOpenedOrders - returns only IDs, not full information.</p> <p>Returns:</p> <ul> <li><code>positionTickets []int64</code> - ticket numbers of open positions</li> <li><code>orderTickets []int64</code> - ticket numbers of pending orders</li> <li><code>error</code></li> </ul> <p>Example: <pre><code>posTickets, orderTickets, err := service.GetOpenedTickets(ctx)\nif err != nil {\n    return err\n}\n\nfmt.Printf(\"Open positions: %d\\n\", len(posTickets))\nfmt.Printf(\"Position tickets: %v\\n\", posTickets)\n\nfmt.Printf(\"Pending orders: %d\\n\", len(orderTickets))\nfmt.Printf(\"Order tickets: %v\\n\", orderTickets)\n</code></pre></p> <p>When to use:</p> <ul> <li>Need only ticket numbers (not full information)</li> <li>Checking for open positions</li> <li>Fast position count monitoring</li> </ul>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#4-getorderhistory","title":"4) GetOrderHistory","text":"<pre><code>func (s *MT5Service) GetOrderHistory(\n    ctx context.Context,\n    from time.Time,\n    to time.Time,\n    sortMode pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE,\n    pageNumber int32,\n    itemsPerPage int32,\n) (*pb.OrdersHistoryData, error)\n</code></pre> <p>Gets historical orders and deals for a period with pagination.</p> <p>Parameters:</p> <ul> <li><code>from</code> - period start (time.Time, auto-converted to protobuf)</li> <li><code>to</code> - period end (time.Time, auto-converted to protobuf)</li> <li><code>sortMode</code> - sorting mode from <code>BMT5_ENUM_ORDER_HISTORY_SORT_TYPE</code></li> <li><code>pageNumber</code> - page number (1-based)</li> <li><code>itemsPerPage</code> - items per page</li> </ul> <p>Returns:</p> <ul> <li><code>*pb.OrdersHistoryData</code> with lists:</li> <li><code>HistoryOrders []MqlOrder</code> - historical orders</li> <li><code>HistoryDeals []MqlDeal</code> - historical deals</li> <li><code>TotalOrders int32</code> - total orders</li> <li><code>TotalDeals int32</code> - total deals</li> </ul> <p>Example: <pre><code>// History for last 7 days\nfrom := time.Now().AddDate(0, 0, -7)\nto := time.Now()\n\ndata, err := service.GetOrderHistory(ctx, from, to,\n    pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_SORT_BY_TIME_DESC,\n    1, 100)  // first page, 100 items\nif err != nil {\n    return err\n}\n\nfmt.Printf(\"Total orders: %d (showing %d)\\n\",\n    data.TotalOrders, len(data.HistoryOrders))\nfmt.Printf(\"Total deals: %d (showing %d)\\n\",\n    data.TotalDeals, len(data.HistoryDeals))\n\nfor _, deal := range data.HistoryDeals {\n    fmt.Printf(\"Deal #%d: %s, Profit: %.2f, Time: %s\\n\",\n        deal.Ticket, deal.Symbol, deal.Profit,\n        deal.Time.AsTime().Format(\"2006-01-02 15:04:05\"))\n}\n</code></pre></p>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#5-getpositionshistory","title":"5) GetPositionsHistory","text":"<pre><code>func (s *MT5Service) GetPositionsHistory(\n    ctx context.Context,\n    sortType pb.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE,\n    from *time.Time,\n    to *time.Time,\n    pageNumber *int32,\n    itemsPerPage *int32,\n) (*pb.PositionsHistoryData, error)\n</code></pre> <p>Gets closed positions with aggregated P&amp;L data.</p> <p>Parameters (all optional, use nil for defaults):</p> <ul> <li><code>sortType</code> - sort type from <code>AH_ENUM_POSITIONS_HISTORY_SORT_TYPE</code></li> <li><code>from</code> - position open period start (nil = no filter)</li> <li><code>to</code> - position open period end (nil = no filter)</li> <li><code>pageNumber</code> - page number (nil = 1)</li> <li><code>itemsPerPage</code> - items per page (nil = all)</li> </ul> <p>Returns:</p> <ul> <li><code>*pb.PositionsHistoryData</code> with list:</li> <li><code>ClosedPositions []AggregatedPositionHistory</code> - closed positions</li> <li><code>TotalClosedPositions int32</code> - total positions</li> </ul> <p>Example:</p> <pre><code>// Get all closed positions\ndata, err := service.GetPositionsHistory(ctx,\n    pb.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE_SORT_BY_CLOSE_TIME_DESC,\n    nil, nil, nil, nil)  // all parameters default\nif err != nil {\n    return err\n}\n\nfmt.Printf(\"Total closed positions: %d\\n\", data.TotalClosedPositions)\nfor _, pos := range data.ClosedPositions {\n    fmt.Printf(\"Position ID: %d, Symbol: %s\\n\", pos.PositionId, pos.Symbol)\n    fmt.Printf(\"  Volume: %.2f, Profit: %.2f, Commission: %.2f\\n\",\n        pos.Volume, pos.Profit, pos.Commission)\n    fmt.Printf(\"  Opened: %s, Closed: %s\\n\",\n        pos.OpenTime.AsTime().Format(\"2006-01-02 15:04:05\"),\n        pos.CloseTime.AsTime().Format(\"2006-01-02 15:04:05\"))\n}\n</code></pre> <p>With time filtering: <pre><code>// Closed positions for last month\nfrom := time.Now().AddDate(0, -1, 0)\nto := time.Now()\npage := int32(1)\nperPage := int32(50)\n\ndata, err := service.GetPositionsHistory(ctx,\n    pb.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE_SORT_BY_PROFIT_DESC,\n    &amp;from, &amp;to, &amp;page, &amp;perPage)\n</code></pre></p>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#usage-examples","title":"\ud83d\udca1 Usage Examples","text":""},{"location":"MT5Service/3.%20Position_Orders_Methods/#example-1-checking-for-open-positions","title":"Example 1: Checking for Open Positions","text":"<pre><code>// \u274c BEFORE (MT5Account) - 2 calls:\ndata, err := account.PositionsTotal(ctx)\nif err != nil {\n    return err\n}\ntotal := data.TotalPositions\nif total &gt; 0 {\n    fmt.Printf(\"You have %d open positions\\n\", total)\n}\n\n// \u2705 AFTER (MT5Service) - 1 call:\ntotal, err := service.GetPositionsTotal(ctx)\nif err != nil {\n    return err\n}\nif total &gt; 0 {\n    fmt.Printf(\"You have %d open positions\\n\", total)\n}\n</code></pre> <p>Code reduction: 20% (5 lines \u2192 4 lines)</p>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#example-2-getting-list-of-positions-by-profit","title":"Example 2: Getting List of Positions by Profit","text":"<pre><code>// \u2705 MT5Service - get positions sorted by profit\ndata, err := service.GetOpenedOrders(ctx,\n    pb.BMT5_ENUM_OPENED_ORDER_SORT_TYPE_SORT_BY_PROFIT_DESC)\nif err != nil {\n    return err\n}\n\nfmt.Println(\"Open positions (sorted by profit):\")\ntotalProfit := 0.0\nfor _, pos := range data.OpenedPositions {\n    fmt.Printf(\"  #%d: %s %.2f lots, Profit: %.2f\\n\",\n        pos.Ticket, pos.Symbol, pos.Volume, pos.Profit)\n    totalProfit += pos.Profit\n}\nfmt.Printf(\"Total P&amp;L: %.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#example-3-lightweight-position-monitoring","title":"Example 3: Lightweight Position Monitoring","text":"<pre><code>// \u2705 MT5Service - use GetOpenedTickets for fast checking\nfunc MonitorPositions(service *mt5.MT5Service, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    previousCount := 0\n\n    for range ticker.C {\n        ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n\n        posTickets, orderTickets, err := service.GetOpenedTickets(ctx)\n        cancel()\n\n        if err != nil {\n            fmt.Printf(\"\u274c Error: %v\\n\", err)\n            continue\n        }\n\n        currentCount := len(posTickets)\n        if currentCount != previousCount {\n            fmt.Printf(\"[%s] Positions changed: %d \u2192 %d\\n\",\n                time.Now().Format(\"15:04:05\"), previousCount, currentCount)\n            fmt.Printf(\"  Position tickets: %v\\n\", posTickets)\n            fmt.Printf(\"  Pending orders: %v\\n\", orderTickets)\n            previousCount = currentCount\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#example-4-getting-deal-history-for-a-period","title":"Example 4: Getting Deal History for a Period","text":"<pre><code>// \u2705 MT5Service - history for last month\nfunc PrintMonthlyReport(service *mt5.MT5Service) error {\n    ctx := context.Background()\n\n    from := time.Now().AddDate(0, -1, 0)  // month ago\n    to := time.Now()\n\n    data, err := service.GetOrderHistory(ctx, from, to,\n        pb.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE_SORT_BY_TIME_DESC,\n        1, 1000)  // first page, up to 1000 deals\n    if err != nil {\n        return err\n    }\n\n    fmt.Printf(\"\ud83d\udcca Monthly Report (%s - %s)\\n\",\n        from.Format(\"2006-01-02\"), to.Format(\"2006-01-02\"))\n    fmt.Printf(\"Total deals: %d\\n\", data.TotalDeals)\n\n    totalProfit := 0.0\n    winCount := 0\n    lossCount := 0\n\n    for _, deal := range data.HistoryDeals {\n        totalProfit += deal.Profit\n        if deal.Profit &gt; 0 {\n            winCount++\n        } else if deal.Profit &lt; 0 {\n            lossCount++\n        }\n    }\n\n    fmt.Printf(\"Total P&amp;L: %.2f\\n\", totalProfit)\n    fmt.Printf(\"Win rate: %.1f%% (%d wins / %d losses)\\n\",\n        float64(winCount)/(float64(winCount+lossCount))*100,\n        winCount, lossCount)\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#example-5-analyzing-closed-positions-with-pagination","title":"Example 5: Analyzing Closed Positions with Pagination","text":"<pre><code>// \u2705 MT5Service - processing large history volumes with pagination\nfunc AnalyzeClosedPositions(service *mt5.MT5Service) error {\n    ctx := context.Background()\n\n    page := int32(1)\n    perPage := int32(100)\n\n    for {\n        data, err := service.GetPositionsHistory(ctx,\n            pb.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE_SORT_BY_CLOSE_TIME_DESC,\n            nil, nil, &amp;page, &amp;perPage)\n        if err != nil {\n            return err\n        }\n\n        fmt.Printf(\"Page %d: %d positions (total: %d)\\n\",\n            page, len(data.ClosedPositions), data.TotalClosedPositions)\n\n        for _, pos := range data.ClosedPositions {\n            duration := pos.CloseTime.AsTime().Sub(pos.OpenTime.AsTime())\n            fmt.Printf(\"  Position %d: %s, Duration: %v, Profit: %.2f\\n\",\n                pos.PositionId, pos.Symbol, duration, pos.Profit)\n        }\n\n        // Check if there are more pages\n        if int32(len(data.ClosedPositions)) &lt; perPage {\n            break  // this was the last page\n        }\n\n        page++\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#when-to-use","title":"\ud83d\udd27 When to Use","text":""},{"location":"MT5Service/3.%20Position_Orders_Methods/#getpositionstotal","title":"\u2705 GetPositionsTotal","text":"<p>Use when:</p> <ul> <li>Need a quick check for positions</li> <li>Checking number of positions before actions</li> <li>Monitoring without details</li> </ul> <p>Example:</p> <pre><code>total, _ := service.GetPositionsTotal(ctx)\nif total == 0 {\n    fmt.Println(\"No open positions\")\n}\n</code></pre>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#getopenedorders","title":"\u2705 GetOpenedOrders","text":"<p>Use when:</p> <ul> <li>Need full information about positions/orders</li> <li>Calculating total profit/loss</li> <li>Building a dashboard with position details</li> </ul> <p>Example:</p> <pre><code>data, _ := service.GetOpenedOrders(ctx, sortByProfit)\nfor _, pos := range data.OpenedPositions {\n    fmt.Printf(\"Position: %s, P&amp;L: %.2f\\n\", pos.Symbol, pos.Profit)\n}\n</code></pre>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#getopenedtickets","title":"\u2705 GetOpenedTickets","text":"<p>Use when:</p> <ul> <li>Need only ticket numbers (not details)</li> <li>Lightweight monitoring of changes</li> <li>Checking for a specific ticket</li> </ul> <p>Example:</p> <pre><code>posTickets, _, _ := service.GetOpenedTickets(ctx)\nhasPosition := slices.Contains(posTickets, int64(12345))\n</code></pre>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#getorderhistory","title":"\u2705 GetOrderHistory","text":"<p>Use when:</p> <ul> <li>Need order and deal history</li> <li>Building reports for a period</li> <li>Analyzing trading activity</li> </ul> <p>Example: <pre><code>data, _ := service.GetOrderHistory(ctx, from, to, sortByTime, 1, 100)\nfmt.Printf(\"Deals: %d\\n\", len(data.HistoryDeals))\n</code></pre></p>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#getpositionshistory","title":"\u2705 GetPositionsHistory","text":"<p>Use when:</p> <ul> <li>Need aggregated information about positions</li> <li>Analyzing closed positions with P&amp;L</li> <li>Building trading statistics</li> </ul> <p>Example:</p> <pre><code>data, _ := service.GetPositionsHistory(ctx, sortByProfit, nil, nil, nil, nil)\nfor _, pos := range data.ClosedPositions {\n    fmt.Printf(\"Position: %s, Profit: %.2f\\n\", pos.Symbol, pos.Profit)\n}\n</code></pre>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#performance-comparison","title":"\ud83d\udcca Performance Comparison","text":"Task Low-Level (lines of code) Mid-Level (lines of code) Reduction Get position count 2-3 lines 1 line 33-50% Get position list 3-4 lines 2-3 lines 25-33% Get tickets 2-3 lines 1 line 33-50% History for period 5-6 lines 3-4 lines 25-40%"},{"location":"MT5Service/3.%20Position_Orders_Methods/#recommendations","title":"\ud83d\udca1 Recommendations","text":"<ol> <li>For quick checks \u2192 use <code>GetPositionsTotal</code> or <code>GetOpenedTickets</code></li> <li>For position details \u2192 use <code>GetOpenedOrders</code> with sorting</li> <li>For history \u2192 use <code>GetOrderHistory</code> (deals+orders) or <code>GetPositionsHistory</code> (aggregated positions)</li> <li>For large volumes \u2192 use pagination (page, perPage parameters)</li> <li>For monitoring \u2192 <code>GetOpenedTickets</code> is lighter than <code>GetOpenedOrders</code></li> </ol> <p>\"Simple to Complex\" Pattern:</p> <pre><code>// 1. Quick check for presence\ntotal, _ := service.GetPositionsTotal(ctx)\nif total == 0 {\n    return nil\n}\n\n// 2. Get tickets (lightweight)\nposTickets, _, _ := service.GetOpenedTickets(ctx)\nfmt.Printf(\"Position tickets: %v\\n\", posTickets)\n\n// 3. Full information (if needed)\ndata, _ := service.GetOpenedOrders(ctx, sortByProfit)\nfor _, pos := range data.OpenedPositions {\n    // Detailed processing\n}\n</code></pre>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#related-sections","title":"\ud83d\udcda Related Sections","text":"<ul> <li>MT5Service Overview - mid-level API overview</li> <li>Account Methods (Mid-Level) - account methods</li> <li>Symbol Methods (Mid-Level) - symbol methods</li> <li>Position &amp; Orders Information (Low-Level) - low-level position/orders API</li> <li>Trading Methods (Mid-Level) - order placement methods</li> <li>Trading Operations (Low-Level) - low-level trading API</li> <li>Streaming Methods (Mid-Level) - real-time position updates</li> <li>Streaming Methods (Low-Level) - low-level streaming API</li> <li>MT5Account Master Overview - low-level API master reference</li> </ul>"},{"location":"MT5Service/3.%20Position_Orders_Methods/#summary","title":"\ud83c\udfaf Summary","text":"<p>MT5Service Position &amp; Orders methods solve the main task - simplify data access:</p> <ul> <li>\u274c No need to extract <code>.TotalPositions</code>, <code>.OpenedPositions</code></li> <li>\u274c No need to manually create complex request structures</li> <li>\u274c No need to convert time.Time \u2192 timestamppb (automatic)</li> <li>\u2705 Get data directly (int32, []int64, *protobuf.Data)</li> <li>\u2705 Pagination support for large volumes</li> <li>\u2705 Code reads like normal Go</li> <li>\u2705 Lightweight variants (GetOpenedTickets) for monitoring</li> </ul>"},{"location":"MT5Service/4.%20Trading_Methods/","title":"MT5Service - Trading Methods (Mid-Level API)","text":"<p>6 methods for managing trading operations with clean Go types instead of protobuf</p> <p>\ud83e\udde9 API Layer: MID-LEVEL - wrappers over MT5Account with convenient DTO structures</p> <p>Implementation:</p> <p>These methods are implemented in <code>examples/mt5/MT5Service.go</code>, which wraps <code>package/Helpers/MT5Account.go</code> low-level API with convenient helpers for ease of use.</p> <p>Demo files:</p> <ul> <li> <p><code>examples/demos/service/04_service_demo.go</code> - comprehensive examples of all service wrapper methods</p> </li> <li> <p><code>examples/demos/service/05_service_streaming.go</code> - streaming methods examples</p> </li> </ul>"},{"location":"MT5Service/4.%20Trading_Methods/#why-these-methods-exist","title":"\ud83c\udfaf Why These Methods Exist","text":"<p>Problem: In MT5Account, trading operations return complex protobuf objects with nested structures:</p> <pre><code>// Low-level (MT5Account)\ndata, err := account.OrderSend(ctx, &amp;pb.OrderSendRequest{...})\nif data.ReturnedCode == 10009 {\n    fmt.Printf(\"Order: %d, Deal: %d\\n\", data.Order, data.Deal)\n}\n// data.RetCodeExternal, data.Comment - all scattered across fields\n</code></pre> <p>Solution: MT5Service returns clean DTO structures with clear fields:</p> <pre><code>// Mid-level (MT5Service)\nresult, err := service.PlaceOrder(ctx, req)\nif result.ReturnedCode == 10009 {\n    fmt.Printf(\"Order: %d, Deal: %d\\n\", result.Order, result.Deal)\n}\n// Everything in one OrderResult structure\n</code></pre> <p>Advantages:</p> <ul> <li>\u2705 Clean Go structures instead of protobuf Data</li> <li>\u2705 OrderResult and OrderCheckResult instead of nested MqlTrade*</li> <li>\u2705 Clear field names (ReturnedCode, Margin, MarginFree)</li> <li>\u2705 Automatic unpacking of nested structures</li> <li>\u2705 Simple methods for margin and profit calculation</li> </ul>"},{"location":"MT5Service/4.%20Trading_Methods/#all-6-methods","title":"\ud83d\udccb All 6 Methods","text":"Method Returns Low-Level Equivalent <code>PlaceOrder(ctx, req)</code> <code>*OrderResult</code> <code>OrderSend(ctx, req)</code> + unpacking <code>ModifyOrder(ctx, req)</code> <code>*OrderResult</code> <code>OrderModify(ctx, req)</code> + unpacking <code>CloseOrder(ctx, req)</code> <code>uint32</code> <code>OrderClose(ctx, req)</code> + <code>.ReturnedCode</code> <code>CheckOrder(ctx, req)</code> <code>*OrderCheckResult</code> <code>OrderCheck(ctx, req)</code> + extracting MqlTradeCheckResult <code>CalculateMargin(ctx, req)</code> <code>float64</code> <code>OrderCalcMargin(ctx, req)</code> + <code>.Margin</code> <code>CalculateProfit(ctx, req)</code> <code>float64</code> <code>OrderCalcProfit(ctx, req)</code> + <code>.Profit</code>"},{"location":"MT5Service/4.%20Trading_Methods/#dto-structures","title":"\ud83d\udce6 DTO Structures","text":""},{"location":"MT5Service/4.%20Trading_Methods/#orderresult","title":"OrderResult","text":"<pre><code>type OrderResult struct {\n    ReturnedCode    uint32  // Return code (10009 = TRADE_RETCODE_DONE)\n    Deal            uint64  // Deal ticket (if executed)\n    Order           uint64  // Order ticket (if placed)\n    Volume          float64 // Executed volume confirmed by broker\n    Price           float64 // Execution price confirmed by broker\n    Bid             float64 // Current Bid price\n    Ask             float64 // Current Ask price\n    Comment         string  // Broker comment or error description\n    RequestID       uint32  // Request ID set by terminal\n    RetCodeExternal int32   // Return code from external trading system\n}\n</code></pre> <p>Advantage: </p> <p>All information about the trading operation result in one structure.</p>"},{"location":"MT5Service/4.%20Trading_Methods/#ordercheckresult","title":"OrderCheckResult","text":"<pre><code>type OrderCheckResult struct {\n    ReturnedCode uint32  // Validation result code (0 = success)\n    Balance      float64 // Account balance after deal execution\n    Equity       float64 // Account equity after deal execution\n    Profit       float64 // Floating profit after deal\n    Margin       float64 // Margin requirements for the order\n    MarginFree   float64 // Free margin after deal\n    MarginLevel  float64 // Margin level after deal (%)\n    Comment      string  // Error description (if validation failed)\n}\n</code></pre> <p>Advantage: </p> <p>Shows what the account state will be after order execution.</p>"},{"location":"MT5Service/4.%20Trading_Methods/#method-signatures","title":"\ud83d\udcd6 Method Signatures","text":""},{"location":"MT5Service/4.%20Trading_Methods/#1-placeorder","title":"1) PlaceOrder","text":"<pre><code>func (s *MT5Service) PlaceOrder(\n    ctx context.Context,\n    req *pb.OrderSendRequest,\n) (*OrderResult, error)\n</code></pre> <p>Sends a market or pending order to MT5 terminal.</p> <p>Success check: <pre><code>if result.ReturnedCode == 10009 { // TRADE_RETCODE_DONE\n    fmt.Printf(\"Success! Order: %d, Deal: %d\\n\", result.Order, result.Deal)\n}\n</code></pre></p>"},{"location":"MT5Service/4.%20Trading_Methods/#2-modifyorder","title":"2) ModifyOrder","text":"<pre><code>func (s *MT5Service) ModifyOrder(\n    ctx context.Context,\n    req *pb.OrderModifyRequest,\n) (*OrderResult, error)\n</code></pre> <p>Modifies an existing order or position (changing SL/TP/price).</p>"},{"location":"MT5Service/4.%20Trading_Methods/#3-closeorder","title":"3) CloseOrder","text":"<pre><code>func (s *MT5Service) CloseOrder(\n    ctx context.Context,\n    req *pb.OrderCloseRequest,\n) (uint32, error)\n</code></pre> <p>Closes a position or deletes a pending order.</p> <p>Returns only ReturnedCode (10009 = success). Simpler than PlaceOrder for closing.</p>"},{"location":"MT5Service/4.%20Trading_Methods/#4-checkorder","title":"4) CheckOrder","text":"<pre><code>func (s *MT5Service) CheckOrder(\n    ctx context.Context,\n    req *pb.OrderCheckRequest,\n) (*OrderCheckResult, error)\n</code></pre> <p>Validates order before sending to broker.</p> <p>Use before PlaceOrder to avoid rejections.</p>"},{"location":"MT5Service/4.%20Trading_Methods/#5-calculatemargin","title":"5) CalculateMargin","text":"<pre><code>func (s *MT5Service) CalculateMargin(\n    ctx context.Context,\n    req *pb.OrderCalcMarginRequest,\n) (float64, error)\n</code></pre> <p>Calculates required margin for a potential order.</p> <p>Use before opening a position to check margin sufficiency.</p>"},{"location":"MT5Service/4.%20Trading_Methods/#6-calculateprofit","title":"6) CalculateProfit","text":"<pre><code>func (s *MT5Service) CalculateProfit(\n    ctx context.Context,\n    req *pb.OrderCalcProfitRequest,\n) (float64, error)\n</code></pre> <p>Calculates potential profit for a hypothetical order.</p> <p>Useful for profit/risk calculations before placing real orders.</p>"},{"location":"MT5Service/4.%20Trading_Methods/#usage-examples","title":"\ud83d\udca1 Usage Examples","text":""},{"location":"MT5Service/4.%20Trading_Methods/#example-1-opening-a-market-buy-position","title":"Example 1: Opening a Market BUY Position","text":"<pre><code>// \u2705 MT5Service - returns clean OrderResult (not protobuf)\nctx := context.Background()\n\n// 1. Create order request\nreq := &amp;pb.OrderSendRequest{\n    Symbol:    \"EURUSD\",\n    Action:    pb.ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n    Type:      pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n    Volume:    0.1,\n    Price:     0,  // market price\n    Sl:        0,\n    Tp:        0,\n    Deviation: 10,\n}\n\n// 2. Send order to broker\nresult, err := service.PlaceOrder(ctx, req)\nif err != nil {\n    return fmt.Errorf(\"order failed: %w\", err)\n}\n\n// 3. Check result code\nif result.ReturnedCode != 10009 {\n    fmt.Printf(\"\u274c Error: %s (code: %d)\\n\", result.Comment, result.ReturnedCode)\n    return fmt.Errorf(\"order rejected\")\n}\n\n// 4. Success - display execution details\nfmt.Printf(\"\u2705 Order executed successfully:\\n\")\nfmt.Printf(\"   Order ticket: %d\\n\", result.Order)\nfmt.Printf(\"   Deal ticket:  %d\\n\", result.Deal)\nfmt.Printf(\"   Price:        %.5f\\n\", result.Price)\nfmt.Printf(\"   Volume:       %.2f\\n\", result.Volume)\n</code></pre> <p>Advantage over Low-Level:</p> <p>Returns <code>*OrderResult</code> (clean Go struct) instead of <code>*pb.OrderSendData</code> (protobuf). Same code structure, but cleaner types.</p>"},{"location":"MT5Service/4.%20Trading_Methods/#example-2-validating-order-before-placement","title":"Example 2: Validating Order Before Placement","text":"<pre><code>// \u274c BEFORE (MT5Account) - nested MqlTradeCheckResult structure:\ncheckReq := &amp;pb.OrderCheckRequest{\n    Symbol: \"EURUSD\",\n    Action: pb.ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n    Type:   pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n    Volume: 1.0,\n}\n\n// Low-level call\ncheckData, err := account.OrderCheck(ctx, checkReq)\nif err != nil {\n    return err\n}\n\n// \u2190 Need to access nested structure\nresult := checkData.MqlTradeCheckResult\n\n// Check validation result\nif result.ReturnedCode != 0 {\n    fmt.Printf(\"\u274c Invalid order: %s\\n\", result.Comment)\n    return nil\n}\nfmt.Printf(\"\u2705 Valid! Margin required: %.2f, Free margin after: %.2f\\n\",\n    result.Margin, result.FreeMargin)\n\n// \u2705 AFTER (MT5Service) - direct OrderCheckResult:\ncheckReq := &amp;pb.OrderCheckRequest{\n    Symbol: \"EURUSD\",\n    Action: pb.ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n    Type:   pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n    Volume: 1.0,\n}\n\n// Mid-level call - returns clean struct directly\nresult, err := service.CheckOrder(ctx, checkReq)\nif err != nil {\n    return err\n}\n\n// Check validation result\nif result.ReturnedCode != 0 {\n    fmt.Printf(\"\u274c Invalid order: %s\\n\", result.Comment)\n    return nil\n}\nfmt.Printf(\"\u2705 Valid! Margin required: %.2f, Free margin after: %.2f\\n\",\n    result.Margin, result.MarginFree)\n</code></pre> <p>Code reduction: 15% (removed <code>checkData.MqlTradeCheckResult</code> indirection)</p>"},{"location":"MT5Service/4.%20Trading_Methods/#example-3-calculating-margin-before-opening-position","title":"Example 3: Calculating Margin Before Opening Position","text":"<pre><code>// \u274c BEFORE (MT5Account) - extract .Margin from data:\n// 1. Create margin calculation request\nreq := &amp;pb.OrderCalcMarginRequest{\n    Symbol: \"EURUSD\",\n    Action: pb.ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n    Type:   pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n    Volume: 1.0,\n    Price:  0,\n}\n\n// 2. Calculate required margin\ndata, err := account.OrderCalcMargin(ctx, req)\nif err != nil {\n    return err\n}\nrequiredMargin := data.Margin  // \u2190 unpacking\n\n// 3. Get current free margin\nfreeMarginData, _ := account.AccountInfoDouble(ctx, &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN_FREE,\n})\nfreeMargin := freeMarginData.GetRequestedValue()  // \u2190 unpacking\n\n// 4. Check sufficiency\nif freeMargin &lt; requiredMargin {\n    fmt.Printf(\"\u274c Insufficient margin: %.2f (need: %.2f)\\n\", freeMargin, requiredMargin)\n}\n\n// \u2705 AFTER (MT5Service) - returns float64 directly:\n// 1. Create margin calculation request\nreq := &amp;pb.OrderCalcMarginRequest{\n    Symbol: \"EURUSD\",\n    Action: pb.ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n    Type:   pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n    Volume: 1.0,\n    Price:  0,\n}\n\n// 2. Calculate required margin (returns float64 directly)\nrequiredMargin, err := service.CalculateMargin(ctx, req)\nif err != nil {\n    return err\n}\n\n// 3. Get current free margin (also returns float64 directly)\nfreeMargin, _ := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_MARGIN_FREE)\n\n// 4. Check sufficiency\nif freeMargin &lt; requiredMargin {\n    fmt.Printf(\"\u274c Insufficient margin: %.2f (need: %.2f)\\n\",\n        freeMargin, requiredMargin)\n}\n</code></pre> <p>Code reduction: 25% (no <code>data.Margin</code> and <code>.GetRequestedValue()</code> calls)</p>"},{"location":"MT5Service/4.%20Trading_Methods/#example-4-complete-pre-placement-validation","title":"Example 4: Complete Pre-Placement Validation","text":"<pre><code>// \u2705 MT5Service - compact and clear code\nfunc SafePlaceOrder(service *mt5.MT5Service, symbol string, volume float64) error {\n    ctx := context.Background()\n\n    // 1. Validate order\n    checkReq := &amp;pb.OrderCheckRequest{\n        Symbol: symbol,\n        Action: pb.ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n        Type:   pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n        Volume: volume,\n    }\n\n    // Run validation check\n    checkResult, err := service.CheckOrder(ctx, checkReq)\n    if err != nil {\n        return fmt.Errorf(\"order check failed: %w\", err)\n    }\n\n    // Check validation result code\n    if checkResult.ReturnedCode != 0 {\n        return fmt.Errorf(\"invalid order: %s\", checkResult.Comment)\n    }\n\n    // Display predicted account state\n    fmt.Printf(\"\u2705 Order valid:\\n\")\n    fmt.Printf(\"   Margin required: %.2f\\n\", checkResult.Margin)\n    fmt.Printf(\"   Free margin after: %.2f\\n\", checkResult.MarginFree)\n    fmt.Printf(\"   Margin level after: %.2f%%\\n\", checkResult.MarginLevel)\n\n    // 2. Place order\n    orderReq := &amp;pb.OrderSendRequest{\n        Symbol:    symbol,\n        Action:    pb.ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n        Type:      pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n        Volume:    volume,\n        Price:     0,\n        Deviation: 10,\n    }\n\n    // Send order to broker\n    result, err := service.PlaceOrder(ctx, orderReq)\n    if err != nil {\n        return fmt.Errorf(\"order placement failed: %w\", err)\n    }\n\n    // Check execution result\n    if result.ReturnedCode != 10009 {\n        return fmt.Errorf(\"order rejected: %s\", result.Comment)\n    }\n\n    // Display execution details\n    fmt.Printf(\"\u2705 Order placed successfully:\\n\")\n    fmt.Printf(\"   Order: %d\\n\", result.Order)\n    fmt.Printf(\"   Deal: %d\\n\", result.Deal)\n    fmt.Printf(\"   Price: %.5f\\n\", result.Price)\n    fmt.Printf(\"   Volume: %.2f\\n\", result.Volume)\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Service/4.%20Trading_Methods/#example-5-modifying-sltp-of-existing-position","title":"Example 5: Modifying SL/TP of Existing Position","text":"<pre><code>// \u2705 MT5Service - position modification\nfunc ModifyPositionSLTP(service *mt5.MT5Service, ticket uint64, sl, tp float64) error {\n    ctx := context.Background()\n\n    // 1. Create modification request\n    req := &amp;pb.OrderModifyRequest{\n        Position: ticket,\n        Action:   pb.ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_SLTP,\n        Sl:       sl,\n        Tp:       tp,\n    }\n\n    // 2. Send modification request\n    result, err := service.ModifyOrder(ctx, req)\n    if err != nil {\n        return fmt.Errorf(\"modify failed: %w\", err)\n    }\n\n    // 3. Check modification result\n    if result.ReturnedCode != 10009 {\n        return fmt.Errorf(\"modify rejected: %s\", result.Comment)\n    }\n\n    // 4. Success\n    fmt.Printf(\"\u2705 Position %d modified: SL=%.5f, TP=%.5f\\n\", ticket, sl, tp)\n    return nil\n}\n</code></pre>"},{"location":"MT5Service/4.%20Trading_Methods/#when-to-use","title":"\ud83d\udd27 When to Use","text":""},{"location":"MT5Service/4.%20Trading_Methods/#placeorder","title":"\u2705 PlaceOrder","text":"<p>Use when:</p> <ul> <li>Opening market positions (BUY/SELL)</li> <li>Placing pending orders (Limit/Stop)</li> <li>Need Deal and Order ticket information</li> </ul> <p>Example:</p> <pre><code>result, _ := service.PlaceOrder(ctx, orderReq)\nif result.ReturnedCode == 10009 {\n    fmt.Printf(\"Deal: %d\\n\", result.Deal)\n}\n</code></pre>"},{"location":"MT5Service/4.%20Trading_Methods/#checkorder","title":"\u2705 CheckOrder","text":"<p>Use when:</p> <ul> <li>Validating order before placement</li> <li>Need information about future account state</li> <li>Calculating margin level after execution</li> </ul> <p>Example:</p> <pre><code>checkResult, _ := service.CheckOrder(ctx, checkReq)\nif checkResult.MarginLevel &lt; 200.0 {\n    return fmt.Errorf(\"margin level too low\")\n}\n</code></pre>"},{"location":"MT5Service/4.%20Trading_Methods/#calculatemargin-calculateprofit","title":"\u2705 CalculateMargin / CalculateProfit","text":"<p>Use when:</p> <ul> <li>Calculating required margin for position</li> <li>Estimating potential profit/loss</li> <li>Performing risk management calculations</li> </ul> <p>Example:</p> <pre><code>margin, _ := service.CalculateMargin(ctx, marginReq)\nprofit, _ := service.CalculateProfit(ctx, profitReq)\nriskRewardRatio := profit / (margin * 0.02) // 2% risk\n</code></pre>"},{"location":"MT5Service/4.%20Trading_Methods/#performance-comparison","title":"\ud83d\udcca Performance Comparison","text":"Task Low-Level (lines of code) Mid-Level (lines of code) Reduction Place order 15-20 lines 15-20 lines 0% (but cleaner types) Check order 8-10 lines 6-8 lines 15-25% Calculate margin 4-5 lines 2-3 lines 25-40% Full validation + placement 30-35 lines 25-30 lines 15-20% <p>Conclusion: Code is not necessarily shorter, but significantly cleaner and more understandable.</p>"},{"location":"MT5Service/4.%20Trading_Methods/#recommendations","title":"\ud83d\udca1 Recommendations","text":"<ol> <li>Always use CheckOrder before PlaceOrder in production</li> <li>Check ReturnedCode - 10009 = success, everything else = error</li> <li>Use CalculateMargin to verify margin before opening position</li> <li>Read Comment in OrderResult/OrderCheckResult for error details</li> <li>For closing positions use CloseOrder instead of PlaceOrder</li> </ol> <p>Return codes:</p> <ul> <li><code>10009</code> - TRADE_RETCODE_DONE (success)</li> <li><code>10004</code> - TRADE_RETCODE_REQUOTE (requote)</li> <li><code>10006</code> - TRADE_RETCODE_REJECT (rejected)</li> <li><code>10013</code> - TRADE_RETCODE_INVALID_PRICE (invalid price)</li> <li><code>10014</code> - TRADE_RETCODE_INVALID_STOPS (invalid SL/TP)</li> <li><code>10019</code> - TRADE_RETCODE_NO_MONEY (insufficient funds)</li> </ul>"},{"location":"MT5Service/4.%20Trading_Methods/#related-sections","title":"\ud83d\udcda Related Sections","text":"<ul> <li>MT5Service Overview - mid-level API overview</li> <li>Account Methods (Mid-Level) - account methods</li> <li>Symbol Methods (Mid-Level) - getting prices and symbol parameters</li> <li>Position &amp; Orders Methods (Mid-Level) - getting position list</li> <li>Position &amp; Orders Information (Low-Level) - low-level position/orders API</li> <li>Trading Operations (Low-Level) - low-level trading API</li> <li>MT5Account Master Overview - low-level API master reference</li> </ul>"},{"location":"MT5Service/4.%20Trading_Methods/#summary","title":"\ud83c\udfaf Summary","text":"<p>MT5Service Trading methods solve the main task - remove protobuf ceremony:</p> <ul> <li>\u274c No need to unpack <code>data.MqlTradeCheckResult</code></li> <li>\u274c No need to call <code>.Margin</code> or <code>.GetRequestedValue()</code></li> <li>\u2705 Get clean DTOs (<code>*OrderResult</code>, <code>*OrderCheckResult</code>)</li> <li>\u2705 Code reads like normal Go</li> <li>\u2705 All trading operations in one place</li> </ul>"},{"location":"MT5Service/5.%20MarketDepth_Methods/","title":"MT5Service - Market Depth Methods (Mid-Level API)","text":"<p>3 methods for working with Depth of Market (DOM) / \"order book\"</p> <p>\ud83e\udde9 API Layer: MID-LEVEL - wrappers over MT5Account with clean Go types</p>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#why-these-methods-exist","title":"\ud83c\udfaf Why These Methods Exist","text":"<p>Problem: In MT5Account, working with DOM requires calls with protobuf structures:</p> <pre><code>// Low-level (MT5Account)\naddData, err := account.MarketBookAdd(ctx, &amp;pb.MarketBookAddRequest{Symbol: \"EURUSD\"})\nsuccess := addData.OpenedSuccessfully  // \u2190 unpacking\n\nbookData, err := account.MarketBookGet(ctx, &amp;pb.MarketBookGetRequest{Symbol: \"EURUSD\"})\nfor _, b := range bookData.MqlBookInfos {\n    // working with protobuf MqlBookInfo\n}\n\nreleaseData, err := account.MarketBookRelease(ctx, &amp;pb.MarketBookReleaseRequest{Symbol: \"EURUSD\"})\nclosed := releaseData.ClosedSuccessfully  // \u2190 unpacking\n</code></pre> <p>Solution: MT5Service simplifies the API and returns clean Go types:</p> <pre><code>// Mid-level (MT5Service)\nsuccess, err := service.SubscribeMarketDepth(ctx, \"EURUSD\")  // \u2705 bool directly\n\nbooks, err := service.GetMarketDepth(ctx, \"EURUSD\")  // \u2705 []BookInfo\nfor _, b := range books {\n    fmt.Printf(\"Type: %v, Price: %.5f, Volume: %.2f\\n\", b.Type, b.Price, b.VolumeReal)\n}\n\nsuccess, err = service.UnsubscribeMarketDepth(ctx, \"EURUSD\")  // \u2705 bool directly\n</code></pre> <p>Advantages:</p> <ul> <li>\u2705 Direct bool return instead of <code>.OpenedSuccessfully</code> / <code>.ClosedSuccessfully</code></li> <li>\u2705 Clean <code>[]BookInfo</code> DTO instead of <code>[]*pb.MqlBookInfo</code></li> <li>\u2705 Clear method names (Subscribe/Unsubscribe)</li> <li>\u2705 Automatic request structure creation</li> </ul>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#all-3-methods","title":"\ud83d\udccb All 3 Methods","text":"Method Returns Low-Level Equivalent <code>SubscribeMarketDepth(ctx, symbol)</code> <code>bool</code> <code>MarketBookAdd(ctx, req)</code> + <code>.OpenedSuccessfully</code> <code>GetMarketDepth(ctx, symbol)</code> <code>[]BookInfo</code> <code>MarketBookGet(ctx, req)</code> + conversion to DTO <code>UnsubscribeMarketDepth(ctx, symbol)</code> <code>bool</code> <code>MarketBookRelease(ctx, req)</code> + <code>.ClosedSuccessfully</code>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#dto-structure","title":"\ud83d\udce6 DTO Structure","text":""},{"location":"MT5Service/5.%20MarketDepth_Methods/#bookinfo","title":"BookInfo","text":"<pre><code>type BookInfo struct {\n    Type       pb.BookType // SELL (ask) or BUY (bid)\n    Price      float64     // Price level\n    Volume     int64       // Volume in lots (integer)\n    VolumeReal float64     // Volume with decimal precision\n}\n</code></pre> <p>Advantage: Clean Go structure instead of protobuf <code>MqlBookInfo</code>.</p> <p>Type Values:</p> <ul> <li><code>pb.BookType_BOOK_TYPE_SELL</code> - ask (sell offer)</li> <li><code>pb.BookType_BOOK_TYPE_BUY</code> - bid (buy demand)</li> </ul>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#method-signatures","title":"\ud83d\udcd6 Method Signatures","text":""},{"location":"MT5Service/5.%20MarketDepth_Methods/#1-subscribemarketdepth","title":"1) SubscribeMarketDepth","text":"<pre><code>func (s *MT5Service) SubscribeMarketDepth(\n    ctx context.Context,\n    symbol string,\n) (bool, error)\n</code></pre> <p>Subscribes to Depth of Market (DOM) updates for a symbol.</p> <p>IMPORTANT: Must be called before <code>GetMarketDepth</code>.</p> <p>Parameters:</p> <ul> <li><code>symbol</code> - symbol name (e.g., \"EURUSD\")</li> </ul> <p>Returns:</p> <ul> <li><code>true</code> - subscription successful</li> <li><code>false</code> - subscription failed (symbol doesn't support DOM)</li> <li><code>error</code> - execution error</li> </ul> <p>Example:</p> <pre><code>success, err := service.SubscribeMarketDepth(ctx, \"EURUSD\")\nif err != nil {\n    return err\n}\nif !success {\n    return fmt.Errorf(\"failed to subscribe to DOM for EURUSD\")\n}\nfmt.Println(\"\u2705 Subscribed to EURUSD market depth\")\n</code></pre>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#2-getmarketdepth","title":"2) GetMarketDepth","text":"<pre><code>func (s *MT5Service) GetMarketDepth(\n    ctx context.Context,\n    symbol string,\n) ([]BookInfo, error)\n</code></pre> <p>Retrieves current Depth of Market (DOM) snapshot for a symbol.</p> <p>IMPORTANT: Requires prior <code>SubscribeMarketDepth</code> call.</p> <p>Parameters:</p> <ul> <li><code>symbol</code> - symbol name (e.g., \"EURUSD\")</li> </ul> <p>Returns:</p> <ul> <li><code>[]BookInfo</code> - array of price levels (bid and ask)</li> <li><code>error</code> - execution error</li> </ul> <p>Example:</p> <pre><code>books, err := service.GetMarketDepth(ctx, \"EURUSD\")\nif err != nil {\n    return err\n}\n\nfmt.Println(\"Market Depth for EURUSD:\")\nfor i, b := range books {\n    typeStr := \"BID\"\n    if b.Type == pb.BookType_BOOK_TYPE_SELL {\n        typeStr = \"ASK\"\n    }\n    fmt.Printf(\"  %d. %s: Price=%.5f, Volume=%.2f\\n\",\n        i+1, typeStr, b.Price, b.VolumeReal)\n}\n</code></pre>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#3-unsubscribemarketdepth","title":"3) UnsubscribeMarketDepth","text":"<pre><code>func (s *MT5Service) UnsubscribeMarketDepth(\n    ctx context.Context,\n    symbol string,\n) (bool, error)\n</code></pre> <p>Unsubscribes from Depth of Market updates.</p> <p>Call this to stop receiving DOM updates and free resources.</p> <p>Parameters:</p> <ul> <li><code>symbol</code> - symbol name (e.g., \"EURUSD\")</li> </ul> <p>Returns:</p> <ul> <li><code>true</code> - unsubscription successful</li> <li><code>false</code> - unsubscription failed</li> <li><code>error</code> - execution error</li> </ul> <p>Example:</p> <pre><code>success, err := service.UnsubscribeMarketDepth(ctx, \"EURUSD\")\nif err != nil {\n    return err\n}\nif success {\n    fmt.Println(\"\u2705 Unsubscribed from EURUSD market depth\")\n}\n</code></pre>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#usage-examples","title":"\ud83d\udca1 Usage Examples","text":""},{"location":"MT5Service/5.%20MarketDepth_Methods/#example-1-basic-dom-operations","title":"Example 1: Basic DOM Operations","text":"<pre><code>// \u2705 MT5Service - clean and concise\nctx := context.Background()\n\n// 1. Subscribe to market depth\nsuccess, err := service.SubscribeMarketDepth(ctx, \"EURUSD\")\nif err != nil || !success {\n    return fmt.Errorf(\"subscription failed\")\n}\ndefer service.UnsubscribeMarketDepth(ctx, \"EURUSD\")\n\n// 2. Get current DOM snapshot\nbooks, err := service.GetMarketDepth(ctx, \"EURUSD\")\nif err != nil {\n    return err\n}\n\n// 3. Process DOM data\nfor _, b := range books {\n    fmt.Printf(\"Price: %.5f, Volume: %.2f\\n\", b.Price, b.VolumeReal)\n}\n</code></pre> <p>Advantage: Returns clean <code>[]BookInfo</code> DTO instead of protobuf <code>[]*pb.MqlBookInfo</code>, with direct <code>bool</code> returns instead of unpacking <code>.OpenedSuccessfully</code>/<code>.ClosedSuccessfully</code> fields.</p>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#example-2-liquidity-analysis-bidask-volumes","title":"Example 2: Liquidity Analysis (Bid/Ask Volumes)","text":"<pre><code>// \u2705 MT5Service - analyze bid and ask liquidity\nfunc AnalyzeLiquidity(service *mt5.MT5Service, symbol string) error {\n    ctx := context.Background()\n\n    // 1. Subscribe to DOM\n    success, err := service.SubscribeMarketDepth(ctx, symbol)\n    if err != nil || !success {\n        return fmt.Errorf(\"failed to subscribe to DOM: %w\", err)\n    }\n    defer service.UnsubscribeMarketDepth(ctx, symbol)\n\n    // 2. Get DOM snapshot\n    books, err := service.GetMarketDepth(ctx, symbol)\n    if err != nil {\n        return err\n    }\n\n    // 3. Separate bid and ask levels\n    var bidVolume, askVolume float64\n    var bidLevels, askLevels []BookInfo\n\n    for _, b := range books {\n        if b.Type == pb.BookType_BOOK_TYPE_BUY {\n            bidLevels = append(bidLevels, b)\n            bidVolume += b.VolumeReal\n        } else {\n            askLevels = append(askLevels, b)\n            askVolume += b.VolumeReal\n        }\n    }\n\n    // 4. Display liquidity analysis\n    fmt.Printf(\"\ud83d\udcca Liquidity Analysis for %s\\n\", symbol)\n    fmt.Printf(\"Bid levels: %d, Total volume: %.2f\\n\", len(bidLevels), bidVolume)\n    fmt.Printf(\"Ask levels: %d, Total volume: %.2f\\n\", len(askLevels), askVolume)\n\n    // 5. Determine market pressure\n    if bidVolume &gt; askVolume {\n        fmt.Println(\"\u2b06\ufe0f More buying pressure (bid volume &gt; ask volume)\")\n    } else {\n        fmt.Println(\"\u2b07\ufe0f More selling pressure (ask volume &gt; bid volume)\")\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#example-3-monitor-spread-from-dom","title":"Example 3: Monitor Spread from DOM","text":"<pre><code>// \u2705 MT5Service - calculate spread from DOM\nfunc MonitorDOMSpread(service *mt5.MT5Service, symbol string, interval time.Duration) {\n    ctx := context.Background()\n\n    // 1. Subscribe to market depth\n    success, _ := service.SubscribeMarketDepth(ctx, symbol)\n    if !success {\n        fmt.Println(\"\u274c Cannot subscribe to DOM\")\n        return\n    }\n    defer service.UnsubscribeMarketDepth(ctx, symbol)\n\n    // 2. Setup periodic ticker\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        // 3. Get current DOM snapshot\n        books, err := service.GetMarketDepth(ctx, symbol)\n        if err != nil {\n            fmt.Printf(\"\u274c Error: %v\\n\", err)\n            continue\n        }\n\n        // 4. Find best bid and ask prices\n        var bestBid, bestAsk float64\n        for _, b := range books {\n            if b.Type == pb.BookType_BOOK_TYPE_BUY &amp;&amp; (bestBid == 0 || b.Price &gt; bestBid) {\n                bestBid = b.Price\n            }\n            if b.Type == pb.BookType_BOOK_TYPE_SELL &amp;&amp; (bestAsk == 0 || b.Price &lt; bestAsk) {\n                bestAsk = b.Price\n            }\n        }\n\n        // 5. Calculate and display spread\n        if bestBid &gt; 0 &amp;&amp; bestAsk &gt; 0 {\n            spread := bestAsk - bestBid\n            fmt.Printf(\"[%s] %s: Bid=%.5f, Ask=%.5f, Spread=%.5f\\n\",\n                time.Now().Format(\"15:04:05\"), symbol, bestBid, bestAsk, spread)\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#example-4-visualize-dom-order-book","title":"Example 4: Visualize DOM (Order Book)","text":"<pre><code>// \u2705 MT5Service - beautiful DOM visualization\nfunc PrintDOMBook(service *mt5.MT5Service, symbol string) error {\n    ctx := context.Background()\n\n    // 1. Subscribe to market depth\n    success, err := service.SubscribeMarketDepth(ctx, symbol)\n    if err != nil || !success {\n        return fmt.Errorf(\"failed to subscribe: %w\", err)\n    }\n    defer service.UnsubscribeMarketDepth(ctx, symbol)\n\n    // 2. Get DOM snapshot\n    books, err := service.GetMarketDepth(ctx, symbol)\n    if err != nil {\n        return err\n    }\n\n    // 3. Separate bids and asks\n    var bids, asks []BookInfo\n    for _, b := range books {\n        if b.Type == pb.BookType_BOOK_TYPE_BUY {\n            bids = append(bids, b)\n        } else {\n            asks = append(asks, b)\n        }\n    }\n\n    // 4. Sort (asks ascending, bids descending)\n    sort.Slice(asks, func(i, j int) bool {\n        return asks[i].Price &lt; asks[j].Price\n    })\n    sort.Slice(bids, func(i, j int) bool {\n        return bids[i].Price &gt; bids[j].Price\n    })\n\n    // 5. Display formatted order book\n    fmt.Printf(\"\\n\ud83d\udcd6 Market Depth for %s\\n\", symbol)\n    fmt.Println(\"=\" + strings.Repeat(\"=\", 50))\n\n    fmt.Println(\"ASK (Sell Orders):\")\n    for i := len(asks) - 1; i &gt;= 0; i-- {\n        a := asks[i]\n        fmt.Printf(\"  %.5f | %8.2f\\n\", a.Price, a.VolumeReal)\n    }\n\n    fmt.Println(strings.Repeat(\"-\", 50))\n\n    fmt.Println(\"BID (Buy Orders):\")\n    for _, b := range bids {\n        fmt.Printf(\"  %.5f | %8.2f\\n\", b.Price, b.VolumeReal)\n    }\n\n    fmt.Println(\"=\" + strings.Repeat(\"=\", 50))\n\n    return nil\n}\n</code></pre> <p>Output: <pre><code>\ud83d\udcd6 Market Depth for EURUSD\n==================================================\nASK (Sell Orders):\n  1.08905 |   150.00\n  1.08904 |   200.00\n  1.08903 |   300.00\n--------------------------------------------------\nBID (Buy Orders):\n  1.08902 |   250.00\n  1.08901 |   180.00\n  1.08900 |   120.00\n==================================================\n</code></pre></p>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#example-5-find-large-orders-in-dom-walls","title":"Example 5: Find Large Orders in DOM (Walls)","text":"<pre><code>// \u2705 MT5Service - find large orders in the book\nfunc FindLargeOrders(service *mt5.MT5Service, symbol string, minVolume float64) error {\n    ctx := context.Background()\n\n    // 1. Subscribe to market depth\n    success, err := service.SubscribeMarketDepth(ctx, symbol)\n    if err != nil || !success {\n        return fmt.Errorf(\"failed to subscribe: %w\", err)\n    }\n    defer service.UnsubscribeMarketDepth(ctx, symbol)\n\n    // 2. Get DOM snapshot\n    books, err := service.GetMarketDepth(ctx, symbol)\n    if err != nil {\n        return err\n    }\n\n    // 3. Find and display large orders\n    fmt.Printf(\"\ud83d\udd0d Large orders (volume &gt;= %.2f) in %s:\\n\", minVolume, symbol)\n\n    for _, b := range books {\n        if b.VolumeReal &gt;= minVolume {\n            typeStr := \"BID \ud83d\udfe2\"\n            if b.Type == pb.BookType_BOOK_TYPE_SELL {\n                typeStr = \"ASK \ud83d\udd34\"\n            }\n            fmt.Printf(\"  %s: Price=%.5f, Volume=%.2f\\n\",\n                typeStr, b.Price, b.VolumeReal)\n        }\n    }\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#when-to-use","title":"\ud83d\udd27 When to Use","text":""},{"location":"MT5Service/5.%20MarketDepth_Methods/#subscribemarketdepth","title":"\u2705 SubscribeMarketDepth","text":"<p>Use when:</p> <ul> <li>Starting to work with DOM for a symbol</li> <li>Need real-time order book updates</li> <li>Analyzing market liquidity</li> </ul> <p>IMPORTANT: Always call before <code>GetMarketDepth</code>.</p>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#getmarketdepth","title":"\u2705 GetMarketDepth","text":"<p>Use when:</p> <ul> <li>Getting current DOM snapshot</li> <li>Analyzing bid/ask levels</li> <li>Finding large orders (walls)</li> <li>Calculating average price by levels</li> </ul> <p>IMPORTANT: Requires active subscription via <code>SubscribeMarketDepth</code>.</p>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#unsubscribemarketdepth","title":"\u2705 UnsubscribeMarketDepth","text":"<p>Use when:</p> <ul> <li>Finishing work with DOM</li> <li>Freeing resources</li> <li>Use <code>defer</code> for automatic unsubscription</li> </ul>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#performance-comparison","title":"\ud83d\udcca Performance Comparison","text":"Task Low-Level (lines of code) Mid-Level (lines of code) Reduction Subscribe to DOM 3-4 lines 1-2 lines 40-50% Get DOM 2-3 lines 1 line 33-50% Unsubscribe from DOM 2-3 lines 1 line 33-50% Full cycle (sub+get+unsub) 8-10 lines 4-5 lines 40-50%"},{"location":"MT5Service/5.%20MarketDepth_Methods/#recommendations","title":"\ud83d\udca1 Recommendations","text":"<ol> <li> <p>Always use defer for UnsubscribeMarketDepth:    <pre><code>success, _ := service.SubscribeMarketDepth(ctx, symbol)\nif success {\n    defer service.UnsubscribeMarketDepth(ctx, symbol)\n}\n</code></pre></p> </li> <li> <p>Check success when subscribing:    <pre><code>if !success {\n    return fmt.Errorf(\"DOM not available for %s\", symbol)\n}\n</code></pre></p> </li> <li> <p>Not all symbols support DOM - verify subscription result</p> </li> <li> <p>GetMarketDepth returns a snapshot - for real-time use polling or streaming</p> </li> <li> <p>Handle errors - symbol may become unavailable during operation</p> </li> </ol> <p>\"Subscribe-Defer-Get\" Pattern: <pre><code>func WorkWithDOM(service *mt5.MT5Service, symbol string) error {\n    ctx := context.Background()\n\n    // 1. Subscribe\n    success, err := service.SubscribeMarketDepth(ctx, symbol)\n    if err != nil || !success {\n        return fmt.Errorf(\"subscription failed\")\n    }\n\n    // 2. Defer unsubscribe (automatic cleanup)\n    defer service.UnsubscribeMarketDepth(ctx, symbol)\n\n    // 3. Get data\n    books, err := service.GetMarketDepth(ctx, symbol)\n    if err != nil {\n        return err\n    }\n\n    // 4. Process\n    for _, b := range books {\n        // ...\n    }\n\n    return nil\n}\n</code></pre></p>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#related-sections","title":"\ud83d\udcda Related Sections","text":"<p>MT5Service (Mid-Level):</p> <ul> <li>MT5Service Overview - general mid-level API overview</li> <li>Account Methods - account information retrieval</li> <li>Symbol Methods - symbol parameters and quotes</li> <li>Position &amp; Orders Methods - query positions and orders</li> <li>Trading Methods - place and manage orders</li> </ul> <p>MT5Account (Low-Level):</p> <ul> <li>Market Depth Information - low-level DOM operations</li> <li>MT5Account Master Overview - complete low-level API reference</li> </ul>"},{"location":"MT5Service/5.%20MarketDepth_Methods/#summary","title":"\ud83c\udfaf Summary","text":"<p>MT5Service Market Depth methods solve the main task - simplifying DOM operations:</p> <ul> <li>\u274c No need to create requests manually (<code>MarketBookAddRequest</code>, etc.)</li> <li>\u274c No need to extract <code>.OpenedSuccessfully</code> / <code>.ClosedSuccessfully</code></li> <li>\u274c No need to work with <code>[]*pb.MqlBookInfo</code></li> <li>\u2705 Get bool directly (success/fail)</li> <li>\u2705 Clean <code>[]BookInfo</code> DTO instead of protobuf</li> <li>\u2705 Clear names (Subscribe/Get/Unsubscribe)</li> <li>\u2705 Code reads like standard Go</li> </ul> <p>Typical workflow:</p> <pre><code>// Subscribe \u2192 Get \u2192 Process \u2192 Unsubscribe\nservice.SubscribeMarketDepth(ctx, \"EURUSD\")\ndefer service.UnsubscribeMarketDepth(ctx, \"EURUSD\")\n\nbooks, _ := service.GetMarketDepth(ctx, \"EURUSD\")\n// Analyze bid/ask levels...\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/","title":"MT5Service - Streaming Methods (Mid-Level API)","text":"<p>5 methods for real-time streams: ticks, trade events, position profits, ticket changes</p> <p>\ud83e\udde9 API Layer: MID-LEVEL - wrappers over MT5Account with clean Go types</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#important-note-about-streaming-methods","title":"\u26a0\ufe0f Important Note About Streaming Methods","text":"<p>Key insight:</p> <p>Among the 5 streaming methods, only <code>StreamTicks()</code> provides significant abstraction over the low-level API by converting protobuf timestamps to <code>time.Time</code>.</p> <p>The other 4 methods (<code>StreamTradeUpdates</code>, <code>StreamPositionProfits</code>, <code>StreamOpenedTickets</code>, <code>StreamTransactions</code>) are thin wrappers that directly pass through channels from MT5Account.</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#what-this-means","title":"What this means:","text":"<ul> <li> <p>StreamTicks: Automatically converts <code>Timestamp</code> \u2192 <code>time.Time</code> (real convenience)</p> </li> <li> <p>Other 4 methods: Essentially identical to low-level, just wrapped for consistency</p> </li> <li> <p>Choice is yours: Using mid-level vs low-level for streaming is largely a matter of preference and API consistency in your codebase</p> </li> </ul> <p>\ud83d\udca1 If you prefer working directly with MT5Account for streaming (except ticks), that's perfectly valid!</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#why-these-methods-exist","title":"\ud83c\udfaf Why These Methods Exist","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#problem-low-level-complexity","title":"Problem: Low-Level Complexity","text":"<p>In MT5Account, streaming returns protobuf channels with nested structures:</p> <pre><code>// Low-level (MT5Account)\ndataCh, errCh := account.OnSymbolTick(ctx, &amp;pb.OnSymbolTickRequest{...})\nfor data := range dataCh {\n    tick := data.SymbolTick  // \u2190 nested structure\n    t := tick.Time.AsTime()   // \u2190 manual time conversion\n    fmt.Printf(\"Tick: %.5f\\n\", tick.Bid)\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#solution-clean-go-types","title":"Solution: Clean Go Types","text":"<p>MT5Service automatically converts data and returns clean Go types:</p> <pre><code>// Mid-level (MT5Service)\ntickCh, errCh := service.StreamTicks(ctx, []string{\"EURUSD\"})\nfor tick := range tickCh {\n    // tick.Time is already time.Time!\n    fmt.Printf(\"Tick at %s: %.5f\\n\", tick.Time.Format(\"15:04:05\"), tick.Bid)\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#advantages","title":"Advantages:","text":"<ul> <li>\u2705 Automatic <code>Timestamp</code> \u2192 <code>time.Time</code> conversion (StreamTicks only)</li> <li>\u2705 Clean <code>*SymbolTick</code> DTO instead of nested protobuf structures</li> <li>\u2705 Convenient channel types (<code>&lt;-chan *SymbolTick</code> instead of <code>&lt;-chan *pb.OnSymbolTickData</code>)</li> <li>\u2705 Clearer method names (<code>Stream*</code> instead of <code>On*</code>)</li> <li>\u2705 Automatic unpacking of nested structures</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#all-5-methods","title":"\ud83d\udccb All 5 Methods","text":"Method Returns Low-Level Equivalent <code>StreamTicks(ctx, symbols)</code> <code>(&lt;-chan *SymbolTick, &lt;-chan error)</code> <code>OnSymbolTick(ctx, req)</code> + time.Time conversion <code>StreamTradeUpdates(ctx)</code> <code>(&lt;-chan *OnTradeData, &lt;-chan error)</code> <code>OnTrade(ctx, req)</code> (pass-through) <code>StreamPositionProfits(ctx)</code> <code>(&lt;-chan *OnPositionProfitData, &lt;-chan error)</code> <code>OnPositionProfit(ctx, req)</code> (pass-through) <code>StreamOpenedTickets(ctx)</code> <code>(&lt;-chan *OnPositionsAndPendingOrdersTicketsData, &lt;-chan error)</code> <code>OnPositionsAndPendingOrdersTickets(ctx, req)</code> (pass-through) <code>StreamTransactions(ctx)</code> <code>(&lt;-chan *OnTradeTransactionData, &lt;-chan error)</code> <code>OnTradeTransaction(ctx, req)</code> (pass-through)"},{"location":"MT5Service/6.%20Streaming_Methods/#dto-structures","title":"\ud83d\udce6 DTO Structures","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#symboltick-for-streamticks","title":"SymbolTick (for StreamTicks)","text":"<pre><code>type SymbolTick struct {\n    Time       time.Time // Tick time (converted from Unix timestamp)\n    Bid        float64   // Current Bid price\n    Ask        float64   // Current Ask price\n    Last       float64   // Last deal price\n    Volume     uint64    // Tick volume\n    TimeMS     int64     // Tick time in milliseconds\n    Flags      uint32    // Tick flags\n    VolumeReal float64   // Tick volume with decimal precision\n}\n</code></pre> <p>Advantage: <code>Time</code> is already <code>time.Time</code>, no manual conversion needed.</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#method-signatures","title":"\ud83d\udcd6 Method Signatures","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#1-streamticks","title":"1) StreamTicks","text":"<pre><code>func (s *MT5Service) StreamTicks(\n    ctx context.Context,\n    symbols []string,\n) (&lt;-chan *SymbolTick, &lt;-chan error)\n</code></pre> <p>Real-time tick stream for specified symbols.</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#advantage-over-mt5accountonsymboltick","title":"ADVANTAGE over MT5Account.OnSymbolTick:","text":"<ul> <li>Returns channel of <code>*SymbolTick</code> structs (clean Go types)</li> <li>Automatically converts protobuf <code>OnSymbolTickData</code> \u2192 <code>SymbolTick</code></li> <li><code>Time</code> is already <code>time.Time</code> (no need for <code>.AsTime()</code>)</li> <li>Cleaner API with separate tick and error channels</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#parameters","title":"Parameters:","text":"<ul> <li><code>symbols</code> - list of symbols to stream (e.g., <code>[]string{\"EURUSD\", \"GBPUSD\"}</code>)</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#returns","title":"Returns:","text":"<ul> <li>Read-only channel of <code>*SymbolTick</code> structs</li> <li>Read-only channel of errors</li> </ul> <p>Note: Channels close when streaming stops.</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#example","title":"Example:","text":"<pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\ntickCh, errCh := service.StreamTicks(ctx, []string{\"EURUSD\", \"GBPUSD\"})\n\nfor {\n    select {\n    case tick, ok := &lt;-tickCh:\n        if !ok {\n            return  // channel closed\n        }\n        fmt.Printf(\"[%s] Bid=%.5f, Ask=%.5f\\n\",\n            tick.Time.Format(\"15:04:05\"),\n            tick.Bid, tick.Ask)\n\n    case err, ok := &lt;-errCh:\n        if !ok {\n            return  // channel closed\n        }\n        fmt.Printf(\"\u274c Error: %v\\n\", err)\n        return\n    }\n}\n</code></pre> <p>\u26a0\ufe0f IMPORTANT: Always read from both channels in a <code>select</code> statement.</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#2-streamtradeupdates","title":"2) StreamTradeUpdates","text":"<pre><code>func (s *MT5Service) StreamTradeUpdates(\n    ctx context.Context,\n) (&lt;-chan *pb.OnTradeData, &lt;-chan error)\n</code></pre> <p>Real-time stream of trade events (new/disappeared orders and positions, history updates).</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#events-include","title":"Events include:","text":"<ul> <li>New orders and positions opened</li> <li>Orders and positions closed/cancelled</li> <li>Historical orders and deals</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#returns_1","title":"Returns:","text":"<ul> <li>Read-only channel of <code>*pb.OnTradeData</code> (protobuf)</li> <li>Read-only channel of errors</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#example_1","title":"Example:","text":"<pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\ntradeCh, errCh := service.StreamTradeUpdates(ctx)\n\nfor {\n    select {\n    case data, ok := &lt;-tradeCh:\n        if !ok {\n            return\n        }\n\n        // New positions\n        for _, pos := range data.NewOpenedPositions {\n            fmt.Printf(\"\u2705 New position #%d: %s, Volume: %.2f\\n\",\n                pos.Ticket, pos.Symbol, pos.Volume)\n        }\n\n        // Closed positions\n        for _, ticket := range data.DisappearedOpenedPositionTickets {\n            fmt.Printf(\"\u274c Position closed: #%d\\n\", ticket)\n        }\n\n        // New deals\n        for _, deal := range data.NewHistoryDeals {\n            fmt.Printf(\"\ud83d\udcb0 New deal #%d: %s, Profit: %.2f\\n\",\n                deal.Ticket, deal.Symbol, deal.Profit)\n        }\n\n    case err, ok := &lt;-errCh:\n        if !ok {\n            return\n        }\n        fmt.Printf(\"\u274c Error: %v\\n\", err)\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#3-streampositionprofits","title":"3) StreamPositionProfits","text":"<pre><code>func (s *MT5Service) StreamPositionProfits(\n    ctx context.Context,\n) (&lt;-chan *pb.OnPositionProfitData, &lt;-chan error)\n</code></pre> <p>Real-time stream of profit/loss updates for open positions.</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#events-include_1","title":"Events include:","text":"<ul> <li>Position profit updates as prices change</li> <li>New positions opened</li> <li>Positions modified (SL/TP changes)</li> <li>Positions closed</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#returns_2","title":"Returns:","text":"<ul> <li>Read-only channel of <code>*pb.OnPositionProfitData</code> (protobuf)</li> <li>Read-only channel of errors</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#example_2","title":"Example:","text":"<pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\nprofitCh, errCh := service.StreamPositionProfits(ctx)\n\nfor {\n    select {\n    case data, ok := &lt;-profitCh:\n        if !ok {\n            return\n        }\n\n        totalProfit := 0.0\n        for _, pos := range data.OpenedPositions {\n            fmt.Printf(\"Position #%d: %s, Profit: %.2f\\n\",\n                pos.Ticket, pos.Symbol, pos.Profit)\n            totalProfit += pos.Profit\n        }\n\n        fmt.Printf(\"\ud83d\udcca Total P&amp;L: %.2f\\n\", totalProfit)\n\n    case err, ok := &lt;-errCh:\n        if !ok {\n            return\n        }\n        fmt.Printf(\"\u274c Error: %v\\n\", err)\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#4-streamopenedtickets","title":"4) StreamOpenedTickets","text":"<pre><code>func (s *MT5Service) StreamOpenedTickets(\n    ctx context.Context,\n) (&lt;-chan *pb.OnPositionsAndPendingOrdersTicketsData, &lt;-chan error)\n</code></pre> <p>Real-time stream of updates to open position and pending order ticket numbers.</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#events-include_2","title":"Events include:","text":"<ul> <li>List of current position tickets</li> <li>List of current pending order tickets</li> <li>Updates when tickets are added/removed</li> </ul> <p>\ud83d\udca1 Lightweight alternative to StreamTradeUpdates when you only need ticket IDs.</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#returns_3","title":"Returns:","text":"<ul> <li>Read-only channel of <code>*pb.OnPositionsAndPendingOrdersTicketsData</code> (protobuf)</li> <li>Read-only channel of errors</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#example_3","title":"Example:","text":"<pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\nticketCh, errCh := service.StreamOpenedTickets(ctx)\n\nfor {\n    select {\n    case data, ok := &lt;-ticketCh:\n        if !ok {\n            return\n        }\n\n        fmt.Printf(\"Open positions: %d tickets\\n\",\n            len(data.OpenedPositionTickets))\n        fmt.Printf(\"  Tickets: %v\\n\", data.OpenedPositionTickets)\n\n        fmt.Printf(\"Pending orders: %d tickets\\n\",\n            len(data.OpenedOrdersTickets))\n        fmt.Printf(\"  Tickets: %v\\n\", data.OpenedOrdersTickets)\n\n    case err, ok := &lt;-errCh:\n        if !ok {\n            return\n        }\n        fmt.Printf(\"\u274c Error: %v\\n\", err)\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#5-streamtransactions","title":"5) StreamTransactions","text":"<pre><code>func (s *MT5Service) StreamTransactions(\n    ctx context.Context,\n) (&lt;-chan *pb.OnTradeTransactionData, &lt;-chan error)\n</code></pre> <p>Real-time stream of all trade transactions (most detailed streaming method).</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#events-include_3","title":"Events include:","text":"<ul> <li>Order placement, modification, deletion</li> <li>Deal execution</li> <li>Position opening, modification, closing</li> <li>All intermediate states and changes</li> </ul> <p>\ud83d\udd25 Most powerful streaming method with detailed transaction information.</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#when-to-use","title":"When to use:","text":"<ul> <li>Use StreamTradeUpdates for simple trade monitoring</li> <li>Use StreamPositionProfits for P&amp;L tracking</li> <li>Use StreamTransactions for detailed analysis of all events</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#returns_4","title":"Returns:","text":"<ul> <li>Read-only channel of <code>*pb.OnTradeTransactionData</code> (protobuf)</li> <li>Read-only channel of errors</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#example_4","title":"Example:","text":"<pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\ntxCh, errCh := service.StreamTransactions(ctx)\n\nfor {\n    select {\n    case data, ok := &lt;-txCh:\n        if !ok {\n            return\n        }\n\n        fmt.Printf(\"Transaction type: %v\\n\", data.Type)\n        if data.Deal != 0 {\n            fmt.Printf(\"  Deal #%d executed\\n\", data.Deal)\n        }\n        if data.Order != 0 {\n            fmt.Printf(\"  Order #%d: %v\\n\", data.Order, data.OrderType)\n        }\n        if data.Position != 0 {\n            fmt.Printf(\"  Position #%d affected\\n\", data.Position)\n        }\n\n    case err, ok := &lt;-errCh:\n        if !ok {\n            return\n        }\n        fmt.Printf(\"\u274c Error: %v\\n\", err)\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#usage-examples","title":"\ud83d\udca1 Usage Examples","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#example-1-real-time-price-monitoring","title":"Example 1: Real-time Price Monitoring","text":"<pre><code>// \u2705 MT5Service - clean types and auto-conversion\nctx := context.Background()\n\ntickCh, errCh := service.StreamTicks(ctx, []string{\"EURUSD\"})\n\nfor {\n    select {\n    case tick, ok := &lt;-tickCh:\n        if !ok {\n            return  // channel closed\n        }\n        // tick.Time is already time.Time!\n        fmt.Printf(\"[%s] Bid: %.5f\\n\",\n            tick.Time.Format(\"15:04:05\"), tick.Bid)\n\n    case err, ok := &lt;-errCh:\n        if !ok {\n            return\n        }\n        return err\n    }\n}\n</code></pre> <p>Advantage: <code>time.Time</code> conversion is automatic, no need for <code>.AsTime()</code> calls.</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#example-2-monitor-multiple-symbols","title":"Example 2: Monitor Multiple Symbols","text":"<pre><code>// \u2705 MT5Service - monitor 3 symbols simultaneously\nfunc MonitorMultipleSymbols(service *mt5.MT5Service) {\n    ctx, cancel := context.WithTimeout(context.Background(), 1*time.Minute)\n    defer cancel()\n\n    symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\n    tickCh, errCh := service.StreamTicks(ctx, symbols)\n\n    for {\n        select {\n        case tick, ok := &lt;-tickCh:\n            if !ok {\n                fmt.Println(\"Stream closed\")\n                return\n            }\n\n            // Note: SymbolTick doesn't contain symbol name\n            // Use data.SymbolName from OnSymbolTickData if needed\n            fmt.Printf(\"[%s] Tick: Bid=%.5f, Ask=%.5f, Spread=%.5f\\n\",\n                tick.Time.Format(\"15:04:05\"),\n                tick.Bid, tick.Ask, tick.Ask-tick.Bid)\n\n        case err, ok := &lt;-errCh:\n            if !ok {\n                return\n            }\n            fmt.Printf(\"\u274c Error: %v\\n\", err)\n            return\n\n        case &lt;-ctx.Done():\n            fmt.Println(\"Timeout reached\")\n            return\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#example-3-real-time-total-profit-calculation","title":"Example 3: Real-time Total Profit Calculation","text":"<pre><code>// \u2705 MT5Service - automatic P&amp;L recalculation\nfunc MonitorTotalProfit(service *mt5.MT5Service) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    profitCh, errCh := service.StreamPositionProfits(ctx)\n\n    fmt.Println(\"\ud83d\udcca Real-time P&amp;L Monitor\")\n    fmt.Println(\"Press Ctrl+C to stop...\")\n\n    for {\n        select {\n        case data, ok := &lt;-profitCh:\n            if !ok {\n                return\n            }\n\n            totalProfit := 0.0\n            posCount := len(data.OpenedPositions)\n\n            for _, pos := range data.OpenedPositions {\n                totalProfit += pos.Profit\n            }\n\n            // Colored output\n            profitColor := \"\ud83d\udfe2\"\n            if totalProfit &lt; 0 {\n                profitColor = \"\ud83d\udd34\"\n            }\n\n            fmt.Printf(\"\\r%s Positions: %d | Total P&amp;L: %.2f   \",\n                profitColor, posCount, totalProfit)\n\n        case err, ok := &lt;-errCh:\n            if !ok {\n                return\n            }\n            fmt.Printf(\"\\n\u274c Error: %v\\n\", err)\n            return\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#example-4-trade-event-notifications","title":"Example 4: Trade Event Notifications","text":"<pre><code>// \u2705 MT5Service - trade event notifications\nfunc NotifyTradeEvents(service *mt5.MT5Service) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    tradeCh, errCh := service.StreamTradeUpdates(ctx)\n\n    fmt.Println(\"\ud83d\udd14 Trade Event Monitor\")\n\n    for {\n        select {\n        case data, ok := &lt;-tradeCh:\n            if !ok {\n                return\n            }\n\n            // New positions\n            for _, pos := range data.NewOpenedPositions {\n                typeStr := \"BUY\"\n                if pos.Type == pb.ENUM_POSITION_TYPE_POSITION_TYPE_SELL {\n                    typeStr = \"SELL\"\n                }\n                fmt.Printf(\"\\n\ud83c\udd95 Position opened:\\n\")\n                fmt.Printf(\"   #%d: %s %s %.2f lots @ %.5f\\n\",\n                    pos.Ticket, typeStr, pos.Symbol, pos.Volume, pos.PriceOpen)\n            }\n\n            // Closed positions\n            for _, ticket := range data.DisappearedOpenedPositionTickets {\n                fmt.Printf(\"\\n\ud83d\udd12 Position closed: #%d\\n\", ticket)\n            }\n\n            // New deals\n            for _, deal := range data.NewHistoryDeals {\n                profitStr := \"Profit\"\n                if deal.Profit &lt; 0 {\n                    profitStr = \"Loss\"\n                }\n                fmt.Printf(\"\\n\ufffd\ufffd Deal executed:\\n\")\n                fmt.Printf(\"   #%d: %s, %s: %.2f\\n\",\n                    deal.Ticket, deal.Symbol, profitStr, deal.Profit)\n            }\n\n        case err, ok := &lt;-errCh:\n            if !ok {\n                return\n            }\n            fmt.Printf(\"\\n\u274c Error: %v\\n\", err)\n            return\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#example-5-log-all-transactions","title":"Example 5: Log All Transactions","text":"<pre><code>// \u2705 MT5Service - detailed transaction logging\nfunc LogAllTransactions(service *mt5.MT5Service, logFile string) error {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    f, err := os.Create(logFile)\n    if err != nil {\n        return err\n    }\n    defer f.Close()\n\n    txCh, errCh := service.StreamTransactions(ctx)\n\n    fmt.Println(\"\ud83d\udcdd Transaction Logger started\")\n    fmt.Printf(\"Logging to: %s\\n\", logFile)\n\n    for {\n        select {\n        case data, ok := &lt;-txCh:\n            if !ok {\n                return nil\n            }\n\n            timestamp := time.Now().Format(\"2006-01-02 15:04:05\")\n            logLine := fmt.Sprintf(\"[%s] Type: %v, Order: %d, Deal: %d, Position: %d\\n\",\n                timestamp, data.Type, data.Order, data.Deal, data.Position)\n\n            // Write to file\n            f.WriteString(logLine)\n            f.Sync()  // Flush buffer\n\n            // Console output\n            fmt.Print(logLine)\n\n        case err, ok := &lt;-errCh:\n            if !ok {\n                return nil\n            }\n            return err\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#when-to-use-each-method","title":"\ud83d\udd27 When to Use Each Method","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#streamticks","title":"\u2705 StreamTicks","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#use-when","title":"Use when:","text":"<ul> <li>Need real-time price monitoring</li> <li>Building charts or indicators</li> <li>Tracking spread in real-time</li> <li>Implementing algorithmic trading</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#example_5","title":"Example:","text":"<pre><code>tickCh, errCh := service.StreamTicks(ctx, []string{\"EURUSD\"})\nfor tick := range tickCh {\n    if tick.Ask - tick.Bid &gt; maxSpread {\n        // Wide spread, don't trade\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#streamtradeupdates","title":"\u2705 StreamTradeUpdates","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#use-when_1","title":"Use when:","text":"<ul> <li>Monitoring new/closed positions</li> <li>Tracking trading activity</li> <li>Need notifications about deals</li> <li>Building trade journal</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#example_6","title":"Example:","text":"<pre><code>tradeCh, errCh := service.StreamTradeUpdates(ctx)\nfor data := range tradeCh {\n    for _, pos := range data.NewOpenedPositions {\n        // Notification about new position\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#streampositionprofits","title":"\u2705 StreamPositionProfits","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#use-when_2","title":"Use when:","text":"<ul> <li>Tracking P&amp;L in real-time</li> <li>Building profit dashboard</li> <li>Implementing automatic closing on profit target</li> <li>Monitoring risk</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#example_7","title":"Example:","text":"<pre><code>profitCh, errCh := service.StreamPositionProfits(ctx)\nfor data := range profitCh {\n    totalProfit := 0.0\n    for _, pos := range data.OpenedPositions {\n        totalProfit += pos.Profit\n    }\n    // Check profit/loss limits\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#streamopenedtickets","title":"\u2705 StreamOpenedTickets","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#use-when_3","title":"Use when:","text":"<ul> <li>Only need ticket numbers (lightweight)</li> <li>Monitoring number of positions</li> <li>Checking existence of specific ticket</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#example_8","title":"Example:","text":"<pre><code>ticketCh, errCh := service.StreamOpenedTickets(ctx)\nfor data := range ticketCh {\n    if len(data.OpenedPositionTickets) &gt; maxPositions {\n        // Too many positions, don't open new ones\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#streamtransactions","title":"\u2705 StreamTransactions","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#use-when_4","title":"Use when:","text":"<ul> <li>Need detailed information about all events</li> <li>Building audit log of trading</li> <li>Tracking intermediate states</li> <li>Analyzing trade flow</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#example_9","title":"Example:","text":"<pre><code>txCh, errCh := service.StreamTransactions(ctx)\nfor data := range txCh {\n    // Log all events\n    log.Printf(\"Transaction: %v\", data)\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#method-comparison","title":"\ud83d\udcca Method Comparison","text":"Method Detail Level Load Usage StreamTicks High (every tick) High Algo trading, charts StreamTradeUpdates Medium (trade events) Medium Position monitoring StreamPositionProfits Medium (P&amp;L updates) Medium Profit dashboard StreamOpenedTickets Low (tickets only) Low Lightweight monitoring StreamTransactions Maximum (all events) High Full audit"},{"location":"MT5Service/6.%20Streaming_Methods/#best-practices-recommendations","title":"\ud83d\udca1 Best Practices &amp; Recommendations","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#1-always-use-context-to-manage-stream-lifetime","title":"1. Always use context to manage stream lifetime","text":"<pre><code>ctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#2-read-from-both-channels-in-select-statement","title":"2. Read from both channels in select statement","text":"<pre><code>select {\ncase data := &lt;-dataCh:\n    // processing\ncase err := &lt;-errCh:\n    // error handling\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#3-check-channel-closure","title":"3. Check channel closure","text":"<pre><code>case data, ok := &lt;-dataCh:\n    if !ok {\n        return  // channel closed\n    }\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#4-use-timeout-for-long-running-streams","title":"4. Use timeout for long-running streams","text":"<pre><code>ctx, cancel := context.WithTimeout(ctx, 5*time.Minute)\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#5-choose-lightweight-methods-when-possible","title":"5. Choose lightweight methods when possible","text":"<p>For lightweight monitoring, use <code>StreamOpenedTickets</code> instead of <code>StreamTradeUpdates</code></p>"},{"location":"MT5Service/6.%20Streaming_Methods/#6-handle-errors-properly","title":"6. Handle errors properly","text":"<p>Streams can be interrupted - always handle error channels</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#graceful-shutdown-pattern","title":"\ud83d\udee1\ufe0f \"Graceful Shutdown\" Pattern","text":"<pre><code>func StreamWithShutdown(service *mt5.MT5Service) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    // Handle Ctrl+C\n    sigCh := make(chan os.Signal, 1)\n    signal.Notify(sigCh, os.Interrupt)\n    go func() {\n        &lt;-sigCh\n        fmt.Println(\"\\nShutting down...\")\n        cancel()\n    }()\n\n    tickCh, errCh := service.StreamTicks(ctx, []string{\"EURUSD\"})\n\n    for {\n        select {\n        case tick, ok := &lt;-tickCh:\n            if !ok {\n                return\n            }\n            // Process tick\n\n        case err, ok := &lt;-errCh:\n            if !ok {\n                return\n            }\n            fmt.Printf(\"Error: %v\\n\", err)\n            return\n\n        case &lt;-ctx.Done():\n            fmt.Println(\"Context cancelled\")\n            return\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Service/6.%20Streaming_Methods/#related-sections","title":"\ud83d\udcda Related Sections","text":""},{"location":"MT5Service/6.%20Streaming_Methods/#mt5service-mid-level","title":"MT5Service (Mid-Level):","text":"<ul> <li>MT5Service Overview - general mid-level API overview</li> <li>Account Methods - account information retrieval</li> <li>Symbol Methods - symbol parameters and quotes</li> <li>Position &amp; Orders Methods - query positions and orders</li> <li>Trading Methods - place and manage orders</li> <li>Market Depth Methods - order book operations</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#mt5account-low-level","title":"MT5Account (Low-Level):","text":"<ul> <li>Streaming Methods - low-level streaming operations</li> <li>MT5Account Master Overview - complete low-level API reference</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#summary","title":"\ud83c\udfaf Summary","text":"<p>MT5Service Streaming methods solve the main task - simplifying real-time monitoring:</p>"},{"location":"MT5Service/6.%20Streaming_Methods/#what-you-avoid","title":"What You Avoid:","text":"<ul> <li>\u274c No need to unpack <code>data.SymbolTick</code> and nested structures</li> <li>\u274c No need to manually convert <code>Timestamp.AsTime()</code> (StreamTicks only)</li> <li>\u274c No need to work with <code>&lt;-chan *pb.OnSymbolTickData</code></li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#what-you-get","title":"What You Get:","text":"<ul> <li>\u2705 Clean Go types (<code>*SymbolTick</code> with <code>time.Time</code>)</li> <li>\u2705 Convenient channels (<code>&lt;-chan *SymbolTick</code>, <code>&lt;-chan error</code>)</li> <li>\u2705 Automatic time conversion (StreamTicks)</li> <li>\u2705 Code reads like standard Go</li> </ul>"},{"location":"MT5Service/6.%20Streaming_Methods/#real-time-monitoring-in-3-lines","title":"Real-time monitoring in 3 lines:","text":"<pre><code>tickCh, errCh := service.StreamTicks(ctx, []string{\"EURUSD\"})\nfor tick := range tickCh {\n    fmt.Printf(\"Price: %.5f at %s\\n\", tick.Bid, tick.Time)\n}\n</code></pre> <p>You now have all the tools for real-time market monitoring!</p> <p>Whether you choose mid-level or low-level streaming APIs, both will serve you well. The choice is yours based on your coding style and project requirements.</p> <p>Happy trading and may your streams be fast and your profits be plentiful! \ud83d\udcc8</p>"},{"location":"MT5Service/MT5Service.Overview/","title":"MT5Service - Mid-Level API Overview","text":"<p>Convenient wrapper over MT5Account, returning clean Go types instead of protobuf</p> <p>\ud83e\udde9 API Layer: MID-LEVEL - balance between low-level (MT5Account) and high-level (MT5Sugar)</p>"},{"location":"MT5Service/MT5Service.Overview/#important-note-about-code-structure","title":"\u26a0\ufe0f Important Note About Code Structure","text":"<p>MT5Service and MT5Account have very similar code structures - the difference is primarily in return types, not in code logic or complexity.</p> <pre><code>// Low-Level (MT5Account):\nreq := &amp;pb.AccountInfoDoubleRequest{PropertyId: ACCOUNT_BALANCE}\ndata, _ := account.AccountInfoDouble(ctx, req)\nbalance := data.GetRequestedValue()  // \u2190 unpacking\n\n// Mid-Level (MT5Service):\nbalance, _ := service.GetAccountDouble(ctx, ACCOUNT_BALANCE)  // \u2190 direct value\n</code></pre> <p>Key difference: MT5Service automatically unpacks protobuf <code>Data</code> wrappers and converts types (<code>Timestamp</code> \u2192 <code>time.Time</code>), but the underlying gRPC calls and logic remain identical.</p> <p>This is a matter of coding style preference:</p> <ul> <li>Use MT5Account if you prefer explicit control over protobuf structures</li> <li>Use MT5Service if you prefer cleaner Go types and less boilerplate</li> </ul> <p>Both approaches are equally valid - choose what feels more natural for your coding style.</p>"},{"location":"MT5Service/MT5Service.Overview/#why-mt5service-exists","title":"\ud83c\udfaf Why MT5Service Exists","text":""},{"location":"MT5Service/MT5Service.Overview/#low-level-api-mt5account-problem","title":"Low-Level API (MT5Account) Problem","text":"<p>MT5Account is a direct gRPC client working with protobuf structures:</p> <pre><code>// Low-level (MT5Account) - verbose:\nreq := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE,\n}\ndata, err := account.AccountInfoDouble(ctx, req)\nbalance := data.GetRequestedValue()  // \u2190 unpacking!\n\n// Another example:\ntickData, _ := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: \"EURUSD\"})\ntick := tickData  // protobuf structure\nt := time.Unix(tick.Time, 0)  // \u2190 manual time conversion\n</code></pre> <p>Problems:</p> <ul> <li>\u274c Need to create protobuf requests manually</li> <li>\u274c Responses wrapped in Data structures (<code>.GetRequestedValue()</code>, <code>.Total</code>)</li> <li>\u274c Manual <code>Timestamp</code> \u2192 <code>time.Time</code> conversion</li> <li>\u274c Code looks like protobuf, not like Go</li> </ul>"},{"location":"MT5Service/MT5Service.Overview/#solution-mt5service","title":"Solution: MT5Service","text":"<p>MT5Service wraps MT5Account and returns clean Go types:</p> <pre><code>// Mid-level (MT5Service) - concise:\nbalance, err := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE)  // \u2705 float64 directly!\n\n// Another example:\ntick, _ := service.GetSymbolTick(ctx, \"EURUSD\")\n// tick.Time is already time.Time!\nfmt.Printf(\"Price at %s: %.5f\\n\", tick.Time.Format(\"15:04:05\"), tick.Bid)\n</code></pre> <p>Advantages:</p> <ul> <li>\u2705 Returns clean Go types (<code>float64</code>, <code>int64</code>, <code>string</code>, <code>*AccountSummary</code>)</li> <li>\u2705 Automatically creates request structures</li> <li>\u2705 Automatically unpacks Data wrappers</li> <li>\u2705 Converts <code>Timestamp</code> \u2192 <code>time.Time</code> automatically</li> <li>\u2705 Code reads like standard Go</li> </ul>"},{"location":"MT5Service/MT5Service.Overview/#architecture-layers","title":"\ud83c\udfd7\ufe0f Architecture Layers","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502  HIGH-LEVEL: MT5Sugar                         \u2190 Ready-made patterns (future)\n\u2502  (ready strategies, patterns)               \n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n                    \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502  MID-LEVEL: MT5Service \u2190 YOU ARE HERE         \u2190 Clean Go types\n\u2502  (Go types, convenient methods)             \n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n                    \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502  LOW-LEVEL: MT5Account                        \u2190 Protobuf gRPC\n\u2502  (protobuf Request/Data, direct gRPC)       \n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n                    \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502  MT5 Terminal (via gRPC server)             \n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n</code></pre> <p>When to use each layer:</p> <ul> <li>MT5Account (Low-Level) - when you need full control over protobuf</li> <li>MT5Service (Mid-Level) - RECOMMENDED for most tasks</li> <li>MT5Sugar (High-Level) - for ready-made patterns</li> </ul>"},{"location":"MT5Service/MT5Service.Overview/#creating-mt5service","title":"\ud83d\udce6 Creating MT5Service","text":"<pre><code>import (\n    pb \"github.com/MetaRPC/GoMT5/package\"\n    \"your-project/mt5\"\n)\n\n// 1. Create MT5Account (low-level)\naccount, err := mt5.NewMT5Account(\n    login,\n    password,\n    host,\n    port,\n    grpcServer,\n    mtCluster,\n)\nif err != nil {\n    return err\n}\n\n// 2. Wrap in MT5Service (mid-level)\nservice := mt5.NewMT5Service(account)\n\n// 3. Use convenient methods\nbalance, _ := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE)\nfmt.Printf(\"Balance: %.2f\\n\", balance)\n</code></pre> <p>Access to low-level: <pre><code>// If you need direct access to MT5Account:\naccount := service.GetAccount()\n// Now you can call low-level methods\n</code></pre></p>"},{"location":"MT5Service/MT5Service.Overview/#all-37-mt5service-methods","title":"\ud83d\udcda All 37 MT5Service Methods","text":"<p>MT5Service contains 37 methods, divided into 6 categories:</p>"},{"location":"MT5Service/MT5Service.Overview/#1-account-methods-4-methods","title":"1\ufe0f\u20e3 Account Methods (4 methods)","text":"<p>Getting account information without protobuf ceremonies.</p> Method Returns Description <code>GetAccountSummary(ctx)</code> <code>*AccountSummary</code> RECOMMENDED - all account information <code>GetAccountDouble(ctx, propertyID)</code> <code>float64</code> Single double property (Balance, Equity, Margin) <code>GetAccountInteger(ctx, propertyID)</code> <code>int64</code> Single integer property (Login, Leverage) <code>GetAccountString(ctx, propertyID)</code> <code>string</code> Single string property (Currency, Company) <p>\ud83d\udcd6 Full documentation: Account Methods</p>"},{"location":"MT5Service/MT5Service.Overview/#2-symbol-methods-13-methods","title":"2\ufe0f\u20e3 Symbol Methods (13 methods)","text":"<p>Working with symbols, parameters, quotes.</p> Method Returns Description <code>GetSymbolsTotal(ctx, selectedOnly)</code> <code>int32</code> Number of available symbols <code>SymbolExist(ctx, symbol)</code> <code>(bool, bool)</code> Check symbol existence <code>GetSymbolName(ctx, index, selectedOnly)</code> <code>string</code> Symbol name by index <code>SymbolSelect(ctx, symbol, select_)</code> <code>bool</code> Add/remove symbol in Market Watch <code>IsSymbolSynchronized(ctx, symbol)</code> <code>bool</code> Check synchronization <code>GetSymbolDouble(ctx, symbol, property)</code> <code>float64</code> Single double property (Bid, Ask, Point) <code>GetSymbolInteger(ctx, symbol, property)</code> <code>int64</code> Single integer property (Digits, Spread) <code>GetSymbolString(ctx, symbol, property)</code> <code>string</code> Single string property (Description) <code>GetSymbolMarginRate(ctx, symbol, orderType)</code> <code>*SymbolMarginRate</code> Margin rates <code>GetSymbolTick(ctx, symbol)</code> <code>*SymbolTick</code> Last tick (with time.Time) <code>GetSymbolSessionQuote(ctx, symbol, day, idx)</code> <code>*SessionTime</code> Quote session time <code>GetSymbolSessionTrade(ctx, symbol, day, idx)</code> <code>*SessionTime</code> Trade session time <code>GetSymbolParamsMany(ctx, name, sort, page, perPage)</code> <code>[]SymbolParams</code> RECOMMENDED - parameters of multiple symbols <p>\ud83d\udcd6 Full documentation: Symbol Methods</p>"},{"location":"MT5Service/MT5Service.Overview/#3-position-orders-methods-5-methods","title":"3\ufe0f\u20e3 Position &amp; Orders Methods (5 methods)","text":"<p>Getting information about open positions, pending orders, history.</p> Method Returns Description <code>GetPositionsTotal(ctx)</code> <code>int32</code> Number of open positions <code>GetOpenedOrders(ctx, sortMode)</code> <code>*pb.OpenedOrdersData</code> Open positions and pending orders <code>GetOpenedTickets(ctx)</code> <code>([]int64, []int64)</code> Lightweight - only ticket numbers <code>GetOrderHistory(ctx, from, to, sort, page, perPage)</code> <code>*pb.OrdersHistoryData</code> Orders and deals history <code>GetPositionsHistory(ctx, sort, from, to, page, perPage)</code> <code>*pb.PositionsHistoryData</code> Closed positions history with P&amp;L <p>\ud83d\udcd6 Full documentation: Position &amp; Orders Methods</p>"},{"location":"MT5Service/MT5Service.Overview/#4-market-depth-methods-3-methods","title":"4\ufe0f\u20e3 Market Depth Methods (3 methods)","text":"<p>Working with Depth of Market (DOM) / \"order book\".</p> Method Returns Description <code>SubscribeMarketDepth(ctx, symbol)</code> <code>bool</code> Subscribe to DOM updates <code>GetMarketDepth(ctx, symbol)</code> <code>[]BookInfo</code> Current DOM snapshot <code>UnsubscribeMarketDepth(ctx, symbol)</code> <code>bool</code> Unsubscribe from DOM <p>\ud83d\udcd6 Full documentation: Market Depth Methods</p>"},{"location":"MT5Service/MT5Service.Overview/#5-trading-methods-6-methods","title":"5\ufe0f\u20e3 Trading Methods (6 methods)","text":"<p>Trading operations: placing, modifying, closing orders, calculations.</p> Method Returns Description <code>PlaceOrder(ctx, req)</code> <code>*OrderResult</code> Send market/pending order <code>ModifyOrder(ctx, req)</code> <code>*OrderResult</code> Modify order/position (SL/TP) <code>CloseOrder(ctx, req)</code> <code>uint32</code> Close position/delete order <code>CheckOrder(ctx, req)</code> <code>*OrderCheckResult</code> Validate order <code>CalculateMargin(ctx, req)</code> <code>float64</code> Calculate required margin <code>CalculateProfit(ctx, req)</code> <code>float64</code> Calculate potential profit <p>\ud83d\udcd6 Full documentation: Trading Methods</p>"},{"location":"MT5Service/MT5Service.Overview/#6-streaming-methods-5-methods","title":"6\ufe0f\u20e3 Streaming Methods (5 methods)","text":"<p>Real-time data streams: ticks, trade events, profits.</p> Method Returns Description <code>StreamTicks(ctx, symbols)</code> <code>(&lt;-chan *SymbolTick, &lt;-chan error)</code> Real-time ticks (with time.Time) <code>StreamTradeUpdates(ctx)</code> <code>(&lt;-chan *pb.OnTradeData, &lt;-chan error)</code> Trade events (new/closed positions) <code>StreamPositionProfits(ctx)</code> <code>(&lt;-chan *pb.OnPositionProfitData, &lt;-chan error)</code> Real-time P&amp;L updates <code>StreamOpenedTickets(ctx)</code> <code>(&lt;-chan *pb.OnPositionsAndPendingOrdersTicketsData, &lt;-chan error)</code> Lightweight - only tickets <code>StreamTransactions(ctx)</code> <code>(&lt;-chan *pb.OnTradeTransactionData, &lt;-chan error)</code> Detailed - all transactions <p>\ud83d\udcd6 Full documentation: Streaming Methods</p>"},{"location":"MT5Service/MT5Service.Overview/#dto-structures-data-transfer-objects","title":"\ud83d\udce6 DTO Structures (Data Transfer Objects)","text":"<p>MT5Service uses clean Go structures instead of protobuf:</p>"},{"location":"MT5Service/MT5Service.Overview/#accountsummary","title":"AccountSummary","text":"<pre><code>type AccountSummary struct {\n    Login                   int64                        // Account number\n    Balance                 float64                      // Balance\n    Equity                  float64                      // Equity (Balance + Floating P&amp;L)\n    UserName                string                       // Client name\n    Leverage                int64                        // Leverage (100 = 1:100)\n    TradeMode               pb.MrpcEnumAccountTradeMode  // Account type (demo/real)\n    CompanyName             string                       // Broker name\n    Currency                string                       // Deposit currency\n    ServerTime              *time.Time                   // Server time (already time.Time!)\n    UtcTimezoneShiftMinutes int64                        // UTC timezone shift\n    Credit                  float64                      // Credit\n}\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#symbolparams","title":"SymbolParams","text":"<pre><code>type SymbolParams struct {\n    Name                 string  // Symbol name\n    Bid                  float64 // Current Bid price\n    Ask                  float64 // Current Ask price\n    Last                 float64 // Last deal price\n    Point                float64 // Point size\n    Digits               int32   // Decimal places\n    Spread               int32   // Spread in points\n    VolumeMin            float64 // Min volume\n    VolumeMax            float64 // Max volume\n    VolumeStep           float64 // Volume step\n    TradeTickSize        float64 // Trade tick size\n    TradeTickValue       float64 // Trade tick value\n    TradeContractSize    float64 // Contract size\n    SwapLong             float64 // Swap for long\n    SwapShort            float64 // Swap for short\n    MarginInitial        float64 // Initial margin\n    MarginMaintenance    float64 // Maintenance margin\n}\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#symboltick","title":"SymbolTick","text":"<pre><code>type SymbolTick struct {\n    Time       time.Time // Tick time (already time.Time!)\n    Bid        float64   // Bid price\n    Ask        float64   // Ask price\n    Last       float64   // Last deal price\n    Volume     uint64    // Volume\n    TimeMS     int64     // Time in milliseconds\n    Flags      uint32    // Tick flags\n    VolumeReal float64   // Volume with decimals\n}\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#orderresult","title":"OrderResult","text":"<pre><code>type OrderResult struct {\n    ReturnedCode    uint32  // Return code (10009 = success)\n    Deal            uint64  // Deal ticket\n    Order           uint64  // Order ticket\n    Volume          float64 // Executed volume\n    Price           float64 // Execution price\n    Bid             float64 // Current Bid\n    Ask             float64 // Current Ask\n    Comment         string  // Broker comment\n    RequestID       uint32  // Request ID\n    RetCodeExternal int32   // External return code\n}\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#ordercheckresult","title":"OrderCheckResult","text":"<pre><code>type OrderCheckResult struct {\n    ReturnedCode uint32  // Validation code (0 = success)\n    Balance      float64 // Balance after deal\n    Equity       float64 // Equity after deal\n    Profit       float64 // Profit\n    Margin       float64 // Required margin\n    MarginFree   float64 // Free margin after\n    MarginLevel  float64 // Margin level after (%)\n    Comment      string  // Error description\n}\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#bookinfo","title":"BookInfo","text":"<pre><code>type BookInfo struct {\n    Type       pb.BookType // BID or ASK\n    Price      float64     // Price level\n    Volume     int64       // Volume (integer)\n    VolumeReal float64     // Volume (decimal)\n}\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#usage-examples","title":"\ud83d\udca1 Usage Examples","text":""},{"location":"MT5Service/MT5Service.Overview/#example-1-getting-balance-and-equity","title":"Example 1: Getting Balance and Equity","text":"<pre><code>// \u274c WAS (Low-Level MT5Account):\nbalanceReq := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE,\n}\nbalanceData, _ := account.AccountInfoDouble(ctx, balanceReq)\nbalance := balanceData.GetRequestedValue()\n\nequityReq := &amp;pb.AccountInfoDoubleRequest{\n    PropertyId: pb.AccountInfoDoublePropertyType_ACCOUNT_EQUITY,\n}\nequityData, _ := account.AccountInfoDouble(ctx, equityReq)\nequity := equityData.GetRequestedValue()\n\n// \u2705 BECAME (Mid-Level MT5Service):\nbalance, _ := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_BALANCE)\nequity, _ := service.GetAccountDouble(ctx,\n    pb.AccountInfoDoublePropertyType_ACCOUNT_EQUITY)\n\n// \u2705\u2705 EVEN BETTER - use GetAccountSummary:\nsummary, _ := service.GetAccountSummary(ctx)\nfmt.Printf(\"Balance: %.2f, Equity: %.2f\\n\",\n    summary.Balance, summary.Equity)\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#example-2-getting-current-price","title":"Example 2: Getting Current Price","text":"<pre><code>// \u274c WAS (Low-Level):\ntickData, _ := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{\n    Symbol: \"EURUSD\",\n})\nbid := tickData.Bid\nask := tickData.Ask\nt := time.Unix(tickData.Time, 0)  // \u2190 manual conversion\n\n// \u2705 BECAME (Mid-Level):\ntick, _ := service.GetSymbolTick(ctx, \"EURUSD\")\nfmt.Printf(\"Time: %s, Bid: %.5f, Ask: %.5f\\n\",\n    tick.Time.Format(\"15:04:05\"),  // \u2190 already time.Time!\n    tick.Bid, tick.Ask)\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#example-3-getting-symbol-parameters","title":"Example 3: Getting Symbol Parameters","text":"<pre><code>// \u274c WAS (Low-Level) - 10+ calls for all properties:\nbidData, _ := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_BID,\n})\nbid := bidData.Value\n\naskData, _ := account.SymbolInfoDouble(ctx, &amp;pb.SymbolInfoDoubleRequest{\n    Symbol: \"EURUSD\",\n    Type:   pb.SymbolInfoDoubleProperty_SYMBOL_ASK,\n})\nask := askData.Value\n// ... 8 more calls for other properties\n\n// \u2705 BECAME (Mid-Level) - 1 call for all properties:\nsymbolName := \"EURUSD\"\nsymbols, _, _ := service.GetSymbolParamsMany(ctx, &amp;symbolName, nil, nil, nil)\nif len(symbols) &gt; 0 {\n    s := symbols[0]\n    fmt.Printf(\"Symbol: %s\\n\", s.Name)\n    fmt.Printf(\"Bid: %.5f, Ask: %.5f\\n\", s.Bid, s.Ask)\n    fmt.Printf(\"Digits: %d, Spread: %d\\n\", s.Digits, s.Spread)\n    fmt.Printf(\"Volume: %.2f - %.2f\\n\", s.VolumeMin, s.VolumeMax)\n}\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#example-4-validating-and-placing-order","title":"Example 4: Validating and Placing Order","text":"<pre><code>// \u2705 Mid-Level - clear and safe code\nfunc SafePlaceOrder(service *mt5.MT5Service) error {\n    ctx := context.Background()\n\n    // 1. Validate order\n    checkReq := &amp;pb.OrderCheckRequest{\n        Symbol: \"EURUSD\",\n        Action: pb.ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n        Type:   pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n        Volume: 1.0,\n    }\n\n    checkResult, err := service.CheckOrder(ctx, checkReq)\n    if err != nil {\n        return err\n    }\n\n    if checkResult.ReturnedCode != 0 {\n        return fmt.Errorf(\"invalid order: %s\", checkResult.Comment)\n    }\n\n    fmt.Printf(\"Order valid:\\n\")\n    fmt.Printf(\"  Margin required: %.2f\\n\", checkResult.Margin)\n    fmt.Printf(\"  Free margin after: %.2f\\n\", checkResult.MarginFree)\n\n    // 2. Place order\n    orderReq := &amp;pb.OrderSendRequest{\n        Symbol:    \"EURUSD\",\n        Action:    pb.ENUM_TRADE_REQUEST_ACTIONS_TRADE_ACTION_DEAL,\n        Type:      pb.ENUM_ORDER_TYPE_ORDER_TYPE_BUY,\n        Volume:    1.0,\n        Price:     0,\n        Deviation: 10,\n    }\n\n    result, err := service.PlaceOrder(ctx, orderReq)\n    if err != nil {\n        return err\n    }\n\n    if result.ReturnedCode != 10009 {\n        return fmt.Errorf(\"order rejected: %s\", result.Comment)\n    }\n\n    fmt.Printf(\"Order placed:\\n\")\n    fmt.Printf(\"  Order: %d, Deal: %d\\n\", result.Order, result.Deal)\n    fmt.Printf(\"  Price: %.5f\\n\", result.Price)\n\n    return nil\n}\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#example-5-real-time-price-and-profit-monitoring","title":"Example 5: Real-time Price and Profit Monitoring","text":"<pre><code>// \u2705 Mid-Level - simple streaming\nfunc MonitorPriceAndProfit(service *mt5.MT5Service) {\n    ctx, cancel := context.WithCancel(context.Background())\n    defer cancel()\n\n    // Real-time ticks\n    tickCh, tickErrCh := service.StreamTicks(ctx, []string{\"EURUSD\"})\n\n    // Real-time profit\n    profitCh, profitErrCh := service.StreamPositionProfits(ctx)\n\n    for {\n        select {\n        case tick, ok := &lt;-tickCh:\n            if !ok {\n                return\n            }\n            fmt.Printf(\"[%s] EURUSD: %.5f\\n\",\n                tick.Time.Format(\"15:04:05\"), tick.Bid)\n\n        case data, ok := &lt;-profitCh:\n            if !ok {\n                return\n            }\n            totalProfit := 0.0\n            for _, pos := range data.OpenedPositions {\n                totalProfit += pos.Profit\n            }\n            fmt.Printf(\"\ud83d\udcca Total P&amp;L: %.2f\\n\", totalProfit)\n\n        case err := &lt;-tickErrCh:\n            fmt.Printf(\"\u274c Tick error: %v\\n\", err)\n            return\n\n        case err := &lt;-profitErrCh:\n            fmt.Printf(\"\u274c Profit error: %v\\n\", err)\n            return\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#low-level-vs-mid-level-comparison","title":"\ud83d\udcca Low-Level vs Mid-Level Comparison","text":"Aspect Low-Level (MT5Account) Mid-Level (MT5Service) Return type Protobuf Data structures Clean Go types Request creation Manual Automatic Data unpacking <code>.GetRequestedValue()</code>, <code>.Total</code> Direct Time conversion Manual <code>.AsTime()</code> Automatic Code amount More (verbose) Less (concise) Readability Protobuf style Go style Control Full Medium Recommended for Specific tasks Most tasks <p>Conclusion: Use MT5Service for 90% of tasks, MT5Account - for specific cases.</p>"},{"location":"MT5Service/MT5Service.Overview/#usage-recommendations","title":"\ud83d\udca1 Usage Recommendations","text":""},{"location":"MT5Service/MT5Service.Overview/#when-to-use-mt5service-recommended","title":"When to Use MT5Service (RECOMMENDED)","text":"<ul> <li>\u2705 Getting account, symbol, position data</li> <li>\u2705 Trading operations (PlaceOrder, ModifyOrder)</li> <li>\u2705 Real-time monitoring (StreamTicks, StreamPositionProfits)</li> <li>\u2705 Calculations (CalculateMargin, CalculateProfit)</li> <li>\u2705 Working with DOM (Market Depth)</li> <li>\u2705 Trading history</li> <li>\u2705 90% of all tasks</li> </ul>"},{"location":"MT5Service/MT5Service.Overview/#when-to-use-mt5account-low-level","title":"\u26a0\ufe0f When to Use MT5Account (Low-Level)","text":"<ul> <li>Need full control over protobuf</li> <li>Specific handling of Data structures</li> <li>Performance optimization (rare)</li> <li>Access to methods not wrapped in MT5Service</li> </ul> <p>Access to Low-Level:</p> <pre><code>account := service.GetAccount()\n// Now you can use low-level methods\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#best-practices","title":"\ud83d\udd27 Best Practices","text":""},{"location":"MT5Service/MT5Service.Overview/#1-use-recommended-methods","title":"1. Use \"RECOMMENDED\" Methods","text":"<pre><code>// \u2705 GOOD - use GetAccountSummary for multiple properties\nsummary, _ := service.GetAccountSummary(ctx)\nfmt.Printf(\"Balance: %.2f, Equity: %.2f\\n\", summary.Balance, summary.Equity)\n\n// \u274c BAD - don't make 2 calls for 2 properties\nbalance, _ := service.GetAccountDouble(ctx, ACCOUNT_BALANCE)\nequity, _ := service.GetAccountDouble(ctx, ACCOUNT_EQUITY)\n</code></pre> <pre><code>// \u2705 GOOD - GetSymbolParamsMany for all parameters\nsymbolName := \"EURUSD\"\nsymbols, _, _ := service.GetSymbolParamsMany(ctx, &amp;symbolName, nil, nil, nil)\ns := symbols[0]  // All properties in one structure\n\n// \u274c BAD - don't make 10 calls GetSymbolDouble/Integer\nbid, _ := service.GetSymbolDouble(ctx, \"EURUSD\", SYMBOL_BID)\nask, _ := service.GetSymbolDouble(ctx, \"EURUSD\", SYMBOL_ASK)\n// ... 8 more calls\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#2-handle-errors","title":"2. Handle Errors","text":"<pre><code>// \u2705 GOOD - always check errors\nbalance, err := service.GetAccountDouble(ctx, ACCOUNT_BALANCE)\nif err != nil {\n    return fmt.Errorf(\"failed to get balance: %w\", err)\n}\n\n// \u274c BAD - don't ignore errors\nbalance, _ := service.GetAccountDouble(ctx, ACCOUNT_BALANCE)\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#3-use-context-with-timeout","title":"3. Use Context with Timeout","text":"<pre><code>// \u2705 GOOD - use timeout\nctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\ndefer cancel()\n\nbalance, err := service.GetAccountDouble(ctx, ACCOUNT_BALANCE)\n\n// \u274c BAD - context.Background() without timeout\nctx := context.Background()\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#4-check-return-codes-in-trading","title":"4. Check Return Codes in Trading","text":"<pre><code>// \u2705 GOOD - check ReturnedCode\nresult, _ := service.PlaceOrder(ctx, orderReq)\nif result.ReturnedCode != 10009 {  // TRADE_RETCODE_DONE\n    return fmt.Errorf(\"order failed: %s\", result.Comment)\n}\n\n// \u274c BAD - assume success\nresult, _ := service.PlaceOrder(ctx, orderReq)\nfmt.Printf(\"Order: %d\\n\", result.Order)  // may be 0!\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#5-use-defer-for-cleanup","title":"5. Use Defer for Cleanup","text":"<pre><code>// \u2705 GOOD - defer for unsubscribe\nsuccess, _ := service.SubscribeMarketDepth(ctx, \"EURUSD\")\nif success {\n    defer service.UnsubscribeMarketDepth(ctx, \"EURUSD\")\n}\n\n// Work with DOM...\n\n// \u274c BAD - forget to unsubscribe (resource leak)\nservice.SubscribeMarketDepth(ctx, \"EURUSD\")\n// ... work ...\n// forgot UnsubscribeMarketDepth!\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#related-sections","title":"\ud83d\udcda Related Sections","text":""},{"location":"MT5Service/MT5Service.Overview/#documentation-by-method-categories","title":"Documentation by Method Categories:","text":"<ul> <li>\ud83d\udcd6 Account Methods - account operations (4 methods)</li> <li>\ud83d\udcd6 Symbol Methods - symbol operations (13 methods)</li> <li>\ud83d\udcd6 Position &amp; Orders Methods - positions and orders (5 methods)</li> <li>\ud83d\udcd6 Market Depth Methods - order book (3 methods)</li> <li>\ud83d\udcd6 Trading Methods - trading operations (6 methods)</li> <li>\ud83d\udcd6 Streaming Methods - real-time streams (5 methods)</li> </ul>"},{"location":"MT5Service/MT5Service.Overview/#summary","title":"\ud83c\udfaf Summary","text":"<p>MT5Service solves the main task - removes protobuf ceremonies and returns clean Go:</p>"},{"location":"MT5Service/MT5Service.Overview/#was-low-level","title":"Was (Low-Level):","text":"<pre><code>req := &amp;pb.AccountInfoDoubleRequest{PropertyId: ACCOUNT_BALANCE}\ndata, _ := account.AccountInfoDouble(ctx, req)\nbalance := data.GetRequestedValue()\n\ntickData, _ := account.SymbolInfoTick(ctx, &amp;pb.SymbolInfoTickRequest{Symbol: \"EURUSD\"})\nt := time.Unix(tickData.Time, 0)\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#became-mid-level","title":"Became (Mid-Level):","text":"<pre><code>balance, _ := service.GetAccountDouble(ctx, ACCOUNT_BALANCE)\n\ntick, _ := service.GetSymbolTick(ctx, \"EURUSD\")\n// tick.Time is already time.Time!\n</code></pre>"},{"location":"MT5Service/MT5Service.Overview/#mt5service-advantages","title":"MT5Service Advantages:","text":"<ul> <li>\u2705 Clean Go types (<code>float64</code>, <code>int64</code>, <code>string</code>, <code>time.Time</code>)</li> <li>\u2705 Less code (30-70% shorter)</li> <li>\u2705 Automatic unpacking of Data structures</li> <li>\u2705 Automatic conversion of time</li> <li>\u2705 Convenient DTOs (<code>AccountSummary</code>, <code>SymbolParams</code>, <code>OrderResult</code>)</li> <li>\u2705 Code reads like standard Go</li> </ul>"},{"location":"MT5Service/MT5Service.Overview/#good-luck","title":"\ud83c\udf89 Good Luck!","text":"<p>You now have all the tools to work efficiently with the MT5 trading platform through clean Go code. Whether you choose MT5Service for convenience or MT5Account for control, both approaches will serve you well.</p> <p>Happy trading and may your algorithms be profitable! \ud83d\udcc8\u2728</p>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/","title":"MT5Sugar - Complete API Reference","text":"<p>High-level convenience methods for MetaTrader 5 trading automation in Go</p> <p>MT5Sugar extends <code>MT5Service</code> with convenient methods for:</p> <ul> <li>\ud83c\udfaf Risk-based position sizing (percentage risk, pip-based SL/TP)</li> <li>\ud83d\udcca Automatic volume and price normalization</li> <li>\ud83d\udd04 Bulk operations (close all positions, manage multiple trades)</li> <li>\ud83d\udcc8 Historical analysis and statistics</li> <li>\u2705 Pre-trade validation and margin checking</li> <li>\ud83d\udcc9 Real-time P&amp;L monitoring and position tracking</li> <li>\ud83d\udd0c Simplified connection management</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#navigation-by-category","title":"Navigation by Category","text":""},{"location":"MT5Sugar/MT5Sugar.API_Overview/#01-connection-management","title":"[01] \ud83d\udd0c CONNECTION MANAGEMENT","text":"<p>Connect to MT5 terminal and check connection status</p> Method Description Documentation <code>QuickConnect()</code> Connect using cluster name (RECOMMENDED) \u2192 Docs <code>IsConnected()</code> Check if connected to MT5 \u2192 Docs <code>Ping()</code> Verify connection is alive \u2192 Docs <p>Helper methods:</p> <ul> <li><code>GetService()</code> - access underlying MT5Service</li> <li><code>GetAccount()</code> - access underlying MT5Account</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#02-symbol-operations","title":"[02] \ud83d\udcca SYMBOL OPERATIONS","text":"<p>Working with symbols, prices, and market data</p> Method Description Documentation <code>GetBid()</code> Current bid price for symbol \u2192 Docs <code>GetAsk()</code> Current ask price for symbol \u2192 Docs <code>GetSpread()</code> Current spread in points \u2192 Docs <code>GetPriceInfo()</code> Complete price snapshot (bid, ask, spread, time) \u2192 Docs <code>WaitForPrice()</code> Wait for valid price with timeout \u2192 Docs <p>Data structures:</p> <ul> <li><code>PriceInfo</code> - complete price data structure</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#03-position-management","title":"[03] \ud83d\udcbc POSITION MANAGEMENT","text":"<p>Manage existing positions (modify, close, track)</p> Method Description Documentation <code>ClosePosition()</code> Close position completely by ticket \u2192 Docs <code>ClosePositionPartial()</code> Partial close with volume \u2192 Docs <code>CloseAllPositions()</code> Close ALL open positions \u2192 Docs <code>ModifyPositionSLTP()</code> Modify both SL and TP \u2192 Docs"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#04-trading-operations","title":"[04] \ud83d\udcb9 TRADING OPERATIONS","text":"<p>Place market and pending orders</p>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#market-orders-instant-execution","title":"Market Orders (Instant Execution)","text":"Method Description Documentation <code>BuyMarket()</code> Simple BUY at market price \u2192 Docs <code>SellMarket()</code> Simple SELL at market price \u2192 Docs <code>BuyMarketWithSLTP()</code> BUY with SL/TP prices \u2192 Docs <code>SellMarketWithSLTP()</code> SELL with SL/TP prices \u2192 Docs"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#pending-orders-limitstop","title":"Pending Orders (Limit/Stop)","text":"Method Description Documentation <code>BuyLimit()</code> Buy Limit (buy below current price) \u2192 Docs <code>SellLimit()</code> Sell Limit (sell above current price) \u2192 Docs <code>BuyStop()</code> Buy Stop (buy above current price) \u2192 Docs <code>SellStop()</code> Sell Stop (sell below current price) \u2192 Docs <code>BuyLimitWithSLTP()</code> Buy Limit with SL/TP \u2192 Docs <code>SellLimitWithSLTP()</code> Sell Limit with SL/TP \u2192 Docs"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#05-account-information","title":"[05] \ud83c\udfe6 ACCOUNT INFORMATION","text":"<p>Quick access to account balance and margin metrics</p> Method Description Documentation <code>GetBalance()</code> Account balance (realized profit only) \u2192 Docs <code>GetEquity()</code> Current equity (balance + floating P/L) \u2192 Docs <code>GetMargin()</code> Used margin \u2192 Docs <code>GetFreeMargin()</code> Available margin for new positions \u2192 Docs <code>GetMarginLevel()</code> Margin level % (Equity/Margin \u00d7 100) \u2192 Docs <code>GetProfit()</code> Total floating profit/loss \u2192 Docs"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#06-position-information","title":"[06] \ud83d\udccd POSITION INFORMATION","text":"<p>Query and analyze open positions</p> Method Description Documentation <code>GetOpenPositions()</code> Get ALL open positions \u2192 Docs <code>GetPositionByTicket()</code> Get specific position by ticket \u2192 Docs <code>GetPositionsBySymbol()</code> Get positions for specific symbol \u2192 Docs <code>HasOpenPosition()</code> Check if symbol has open positions \u2192 Docs <code>CountOpenPositions()</code> Total number of open positions \u2192 Docs"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#07-history-statistics","title":"[07] \ud83d\udcdc HISTORY &amp; STATISTICS","text":"<p>Retrieve trading history and performance analytics</p> Method Description Documentation <code>GetDealsToday()</code> All closed deals from today (00:00 to now) \u2192 Docs <code>GetDealsYesterday()</code> Yesterday's closed deals \u2192 Docs <code>GetDealsThisWeek()</code> This week's deals (Monday to now) \u2192 Docs <code>GetDealsThisMonth()</code> This month's deals (1st to now) \u2192 Docs <code>GetDealsDateRange()</code> Custom date range deals \u2192 Docs <code>GetProfitToday()</code> Total realized profit today \u2192 Docs <code>GetProfitThisWeek()</code> Total realized profit this week \u2192 Docs <code>GetProfitThisMonth()</code> Total realized profit this month \u2192 Docs"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#08-symbol-information","title":"[08] \ud83d\udd0d SYMBOL INFORMATION","text":"<p>Symbol properties and trading conditions</p> Method Description Documentation <code>GetSymbolInfo()</code> Complete symbol information (all properties) \u2192 Docs <code>GetAllSymbols()</code> List of all available symbols \u2192 Docs <code>IsSymbolAvailable()</code> Check if symbol exists and is tradable \u2192 Docs <code>GetMinStopLevel()</code> Minimum distance for SL/TP in points \u2192 Docs <code>GetSymbolDigits()</code> Decimal precision for symbol \u2192 Docs <p>Data structures:</p> <ul> <li><code>SymbolInfo</code> - complete symbol data structure</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#09-risk-management","title":"[09] \u2696\ufe0f RISK MANAGEMENT","text":"<p>Position sizing, margin calculations, and pre-trade validation</p> Method Description Documentation <code>CalculatePositionSize()</code> PRIMARY METHOD - auto-calculate lot size by risk % \u2192 Docs <code>GetMaxLotSize()</code> Maximum tradeable volume based on free margin \u2192 Docs <code>CanOpenPosition()</code> Comprehensive validation before trading \u2192 Docs <code>CalculateRequiredMargin()</code> Margin needed for specific position size \u2192 Docs <p>Example: <pre><code>// Auto-calculate lot size to risk 2% with 50 pip SL\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n</code></pre></p>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#10-trading-helpers","title":"[10] \ud83c\udfaf TRADING HELPERS","text":"<p>Pip-based trading - the intuitive way to trade</p> Method Description Documentation <code>CalculateSLTP()</code> Convert pip distances to SL/TP prices \u2192 Docs <code>BuyMarketWithPips()</code> MOST USED - BUY with SL/TP in pips \u2b50 \u2192 Docs <code>SellMarketWithPips()</code> MOST USED - SELL with SL/TP in pips \u2b50 \u2192 Docs <p>Example: <pre><code>// Buy EURUSD: 50 pip SL, 100 pip TP (1:2 R:R)\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n</code></pre></p>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#11-account-information-advanced","title":"[11] \ud83d\udcb0 ACCOUNT INFORMATION (Advanced)","text":"<p>Complete account snapshot and daily statistics</p> Method Description Documentation <code>GetAccountInfo()</code> Complete account snapshot (one call) \u2192 Docs <code>GetDailyStats()</code> Today's trading statistics (win rate, profit, etc.) \u2192 Docs <p>Data structures:</p> <ul> <li><code>AccountInfo</code> - complete account data (login, balance, equity, margin, etc.) \u2192 Docs</li> <li><code>DailyStats</code> - daily performance metrics (win rate, total deals, best/worst trades) \u2192 Docs</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#common-use-cases","title":"\ud83c\udfaf Common Use Cases","text":""},{"location":"MT5Sugar/MT5Sugar.API_Overview/#1-simple-market-order","title":"1. Simple market order","text":"<pre><code>// Buy 0.10 lots EURUSD at market price\nticket, err := sugar.BuyMarket(\"EURUSD\", 0.1)\nif err != nil {\n    log.Fatalf(\"Trade failed: %v\", err)\n}\nfmt.Printf(\"Position opened: #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#2-market-order-with-pips-intuitive","title":"2. Market order with pips (intuitive!)","text":"<pre><code>// Buy EURUSD: 50 pip SL, 100 pip TP\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\nfmt.Printf(\"\u2705 BUY #%d opened (1:2 R:R)\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#3-risk-based-position-sizing","title":"3. Risk-based position sizing","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0      // Risk 2% of balance\nstopLossPips := 50.0    // 50 pip stop loss\n\n// Calculate lot size automatically\nlotSize, _ := sugar.CalculatePositionSize(symbol, riskPercent, stopLossPips)\n\n// Validate before trading\ncanOpen, reason, _ := sugar.CanOpenPosition(symbol, lotSize)\nif !canOpen {\n    fmt.Printf(\"Cannot trade: %s\\n\", reason)\n    return\n}\n\n// Trade with calculated size\nticket, _ := sugar.BuyMarketWithPips(symbol, lotSize, 50, 100)\nfmt.Printf(\"Position #%d opened (risking %.1f%%)\\n\", ticket, riskPercent)\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#4-complete-trading-workflow","title":"4. Complete trading workflow","text":"<pre><code>// Step 1: Check connection\nif !sugar.IsConnected() {\n    sugar.QuickConnect(\"FxPro-MT5 Demo\")\n}\n\n// Step 2: Check symbol availability\navailable, _ := sugar.IsSymbolAvailable(\"EURUSD\")\nif !available {\n    log.Fatal(\"Symbol not available\")\n}\n\n// Step 3: Calculate position size (risk 2%)\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n\n// Step 4: Validate\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", lotSize)\nif !canOpen {\n    log.Fatalf(\"Cannot trade: %s\", reason)\n}\n\n// Step 5: Trade\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\nfmt.Printf(\"\u2705 Position #%d opened\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#5-monitor-positions-and-close-on-drawdown","title":"5. Monitor positions and close on drawdown","text":"<pre><code>// Check total floating P/L\ntotalProfit, _ := sugar.GetTotalProfit()\nfmt.Printf(\"Floating P/L: $%.2f\\n\", totalProfit)\n\n// Emergency close on drawdown\nif totalProfit &lt; -500 {\n    fmt.Println(\"\ud83d\udea8 Drawdown $500 - closing all positions!\")\n    closedCount, _ := sugar.CloseAllPositions()\n    fmt.Printf(\"Closed %d positions\\n\", closedCount)\n}\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#6-daily-performance-report","title":"6. Daily performance report","text":"<pre><code>// Get account snapshot\ninfo, _ := sugar.GetAccountInfo()\nfmt.Printf(\"Account: #%d, Balance: $%.2f, Equity: $%.2f\\n\",\n    info.Login, info.Balance, info.Equity)\n\n// Get today's stats\nstats, _ := sugar.GetDailyStats()\nfmt.Printf(\"\\nToday's Performance:\\n\")\nfmt.Printf(\"  Trades: %d\\n\", stats.TotalDeals)\nfmt.Printf(\"  Win rate: %.1f%%\\n\", stats.WinRate)\nfmt.Printf(\"  Total profit: $%.2f\\n\", stats.TotalProfit)\nfmt.Printf(\"  Best trade: $%.2f\\n\", stats.BestDeal)\nfmt.Printf(\"  Worst trade: $%.2f\\n\", stats.WorstDeal)\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#7-symbol-specific-analysis","title":"7. Symbol-specific analysis","text":"<pre><code>symbol := \"EURUSD\"\n\n// Check if we have open positions\nhasPosition, _ := sugar.HasOpenPosition(symbol)\nfmt.Printf(\"%s has open position: %v\\n\", symbol, hasPosition)\n\n// Get P/L for this symbol\nprofit, _ := sugar.GetProfitBySymbol(symbol)\nfmt.Printf(\"%s floating P/L: $%.2f\\n\", symbol, profit)\n\n// Close all positions if losing\nif profit &lt; -100 {\n    closed, _ := sugar.CloseAllPositions()\n    fmt.Printf(\"Closed %d positions\\n\", closed)\n}\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#8-pending-order-with-validation","title":"8. Pending order with validation","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nlimitPrice := 1.08500\n\n// Get current price to ensure limit is valid\npriceInfo, _ := sugar.GetPriceInfo(symbol)\nfmt.Printf(\"Current bid: %.5f, ask: %.5f\\n\", priceInfo.Bid, priceInfo.Ask)\n\n// Validate margin\nrequiredMargin, _ := sugar.CalculateRequiredMargin(symbol, volume)\nfreeMargin, _ := sugar.GetFreeMargin()\n\nif requiredMargin &gt; freeMargin {\n    log.Fatal(\"Insufficient margin\")\n}\n\n// Place Buy Limit below current price\nif limitPrice &lt; priceInfo.Ask {\n    ticket, _ := sugar.BuyLimitWithSLTP(symbol, volume, limitPrice, 1.08000, 1.09000)\n    fmt.Printf(\"Buy Limit placed: #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#9-weekly-performance-tracking","title":"9. Weekly performance tracking","text":"<pre><code>// Get this week's deals\ndealsThisWeek, _ := sugar.GetDealsThisWeek()\nfmt.Printf(\"Trades this week: %d\\n\", len(dealsThisWeek))\n\n// Calculate metrics\ntotalProfit := 0.0\nwinners := 0\n\nfor _, deal := range dealsThisWeek {\n    totalProfit += deal.Profit\n    if deal.Profit &gt; 0 {\n        winners++\n    }\n}\n\nwinRate := 0.0\nif len(dealsThisWeek) &gt; 0 {\n    winRate = (float64(winners) / float64(len(dealsThisWeek))) * 100\n}\n\nfmt.Printf(\"Win rate: %.1f%%\\n\", winRate)\nfmt.Printf(\"Total profit: $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#10-multi-symbol-portfolio-management","title":"10. Multi-symbol portfolio management","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\n\nfmt.Println(\"PORTFOLIO STATUS\")\nfmt.Println(\"================\")\n\ntotalFloating := 0.0\n\nfor _, symbol := range symbols {\n    count := 0\n    profit := 0.0\n\n    positions, _ := sugar.GetPositionsBySymbol(symbol)\n    count = len(positions)\n\n    if count &gt; 0 {\n        profit, _ = sugar.GetProfitBySymbol(symbol)\n        totalFloating += profit\n    }\n\n    fmt.Printf(\"%s: %d positions, P/L: $%.2f\\n\", symbol, count, profit)\n}\n\nfmt.Printf(\"\\nTotal floating P/L: $%.2f\\n\", totalFloating)\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#related-documentation","title":"\ud83d\udd17 Related Documentation","text":"<ul> <li>MT5Account Documentation - Low-level gRPC/Proto methods</li> <li>MT5Service Documentation - Mid-level service layer</li> <li>MT5Sugar (this document) - High-level convenience methods</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#architecture","title":"\ud83d\udce6 Architecture","text":"<pre><code>MT5Sugar (High-level) \u2190 You are here\n    \u2193 Simplified trading, risk management, analytics\n    \u2193\nMT5Service (Mid-level)\n    \u2193 Type conversion, timeout management\n    \u2193\nMT5Account (Low-level)\n    \u2193 Direct gRPC/Protobuf calls\n    \u2193\nMetaTrader 5 Terminal\n</code></pre> <p>Layer Comparison:</p> Feature MT5Account MT5Service MT5Sugar Complexity Low-level Proto Mid-level typed High-level convenience Learning curve Steep Moderate Gentle Verbosity High Medium Low Risk management Manual Manual Built-in Position sizing Manual Manual Automatic SL/TP Prices only Prices only Pips or prices Use case Custom wrappers Standard apps Trading bots"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#conventions","title":"\ud83d\udcdd Conventions","text":"<ul> <li>All methods return <code>(result, error)</code> - always check errors</li> <li>Prices are always absolute (e.g., 1.08500), not relative</li> <li>Volumes are always in lots (e.g., 0.1), not currency units</li> <li>Points - minimum price increment (for 5-digit: 0.00001)</li> <li>Pips - standard trader unit (for 5-digit: 1 pip = 10 points = 0.0001)</li> <li>SL/TP in \"pips\" methods use points (for compatibility with broker systems)</li> <li>Timeouts are built-in (typically 5 seconds) - no need to specify</li> <li>All times are MT5 server time (not local time)</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#best-practices","title":"\ud83c\udf93 Best Practices","text":""},{"location":"MT5Sugar/MT5Sugar.API_Overview/#risk-management","title":"Risk Management","text":"<pre><code>// ALWAYS use CalculatePositionSize for risk-based trading\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)  // \u2705 Good\n\n// Don't use fixed lot sizes (ignores account size)\nlotSize := 0.1  // \u274c Bad - doesn't scale with account\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#pre-trade-validation","title":"Pre-Trade Validation","text":"<pre><code>// ALWAYS validate before trading\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", lotSize)\nif !canOpen {\n    log.Printf(\"Cannot trade: %s\", reason)\n    return\n}\n\n// Then trade\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#error-handling","title":"Error Handling","text":"<pre><code>// ALWAYS check errors\nticket, err := sugar.BuyMarket(\"EURUSD\", 0.1)\nif err != nil {\n    log.Printf(\"Trade failed: %v\", err)\n    return\n}\nfmt.Printf(\"Success: #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#use-pip-based-methods","title":"Use Pip-Based Methods","text":"<pre><code>// Prefer pip-based methods (more intuitive)\nsugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)  // \u2705 Easy to understand\n\n// Instead of price-based (error-prone)\nsugar.BuyMarketWithSLTP(\"EURUSD\", 0.1, 1.08450, 1.08950)  // \u274c Manual calculation\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#connection-management","title":"Connection Management","text":"<pre><code>// Check connection before trading\nif !sugar.IsConnected() {\n    if err := sugar.QuickConnect(\"FxPro-MT5 Demo\"); err != nil {\n        log.Fatal(err)\n    }\n}\n\n// Verify with ping\nif err := sugar.Ping(); err != nil {\n    log.Fatal(\"Connection lost\")\n}\n</code></pre>"},{"location":"MT5Sugar/MT5Sugar.API_Overview/#quick-start","title":"\ud83d\ude80 Quick Start","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"github.com/yourusername/gomt5/mt5\"\n)\n\nfunc main() {\n    // 1. Create MT5Sugar instance\n    sugar := mt5.NewMT5Sugar()\n\n    // 2. Connect\n    if err := sugar.QuickConnect(\"FxPro-MT5 Demo\"); err != nil {\n        log.Fatal(err)\n    }\n\n    // 3. Calculate position size (risk 2%)\n    lotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n\n    // 4. Validate\n    canOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", lotSize)\n    if !canOpen {\n        log.Fatalf(\"Cannot trade: %s\", reason)\n    }\n\n    // 5. Trade with pips\n    ticket, err := sugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    fmt.Printf(\"\u2705 Position #%d opened!\\n\", ticket)\n    fmt.Printf(\"   Risk: 2%% | SL: 50 pips | TP: 100 pips | R:R 1:2\\n\")\n}\n</code></pre> <p>\ud83c\udf89 You're ready to build professional trading bots with MT5Sugar!</p> <p>Pro tip: Start with <code>BuyMarketWithPips()</code>, <code>CalculatePositionSize()</code>, and <code>CanOpenPosition()</code> - these three methods cover 80% of trading needs!</p>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/","title":"\u2705 Check Connection Status (<code>IsConnected</code>)","text":"<p>Sugar method: Verifies if you're currently connected to MT5 Terminal.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.IsConnected()</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>account.Ping()</code> with health check</li> <li>Timeout: 3 seconds</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) IsConnected() bool\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#input","title":"\ud83d\udd3d Input","text":"<p>No parameters</p>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>connected</code> <code>bool</code> <code>true</code> if connected and healthy, <code>false</code> otherwise"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Quick check if MT5 connection is alive and working.</li> <li>Why you need it: Verify connection before trading operations, detect disconnects.</li> <li>Sanity check: After <code>QuickConnect()</code> succeeds, this should return <code>true</code>.</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to monitor connection health:</p> <ul> <li>Pre-flight check - Verify connection before trading</li> <li>Reconnect logic - Detect when connection is lost</li> <li>Health monitoring - Periodic connection checks</li> <li>Error recovery - Know when to retry operations</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Fast check - 3-second timeout</li> <li>True = ready - Safe to call trading methods</li> <li>False = disconnected - Need to reconnect</li> <li>Non-blocking - Quick operation</li> <li>Use before trading - Good practice to verify connection</li> <li>Periodic checks - Monitor in long-running bots</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#under-the-hood","title":"\ud83d\udd27 Under the Hood","text":"<pre><code>func (s *MT5Sugar) IsConnected() bool {\n    ctx, cancel := context.WithTimeout(s.ctx, 3*time.Second)\n    defer cancel()\n\n    // Ping server to check if connection is alive\n    err := s.account.Ping(ctx)\n    if err != nil {\n        return false // Connection lost\n    }\n\n    return true // Connected and healthy\n}\n</code></pre> <p>What it does:</p> <ul> <li>\u2705 Pings the server - Verifies communication</li> <li>\u2705 Quick timeout - 3 seconds max</li> <li>\u2705 Clean result - True/false, easy to use</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#low-level-alternative","title":"\ud83d\udcca Low-Level Alternative","text":"<p>WITHOUT sugar: <pre><code>ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\ndefer cancel()\n\nerr := account.Ping(ctx)\nconnected := (err == nil)\n</code></pre></p> <p>WITH sugar: <pre><code>connected := sugar.IsConnected()\n</code></pre></p> <p>Benefits:</p> <ul> <li>\u2705 One line vs three</li> <li>\u2705 Clear intent</li> <li>\u2705 Built-in timeout</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Connection/IsConnected/#1-basic-connection-check","title":"1) Basic connection check","text":"<pre><code>connected := sugar.IsConnected()\n\nif connected {\n    fmt.Println(\"\u2705 Connected to MT5\")\n} else {\n    fmt.Println(\"\u274c Not connected\")\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#2-verify-before-trading","title":"2) Verify before trading","text":"<pre><code>// Check connection before placing order\nconnected := sugar.IsConnected()\nif !connected {\n    fmt.Println(\"\u274c Not connected - cannot place order\")\n    return\n}\n\n// Connection OK - safe to trade\nticket, err := sugar.BuyMarket(\"EURUSD\", 0.1)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Order #%d placed\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#3-automatic-reconnection","title":"3) Automatic reconnection","text":"<pre><code>func EnsureConnected(sugar *mt5.MT5Sugar, clusterName string) error {\n    connected := sugar.IsConnected()\n\n    if connected {\n        return nil // Already connected\n    }\n\n    // Connection lost - reconnect\n    fmt.Println(\"\u26a0\ufe0f  Connection lost - reconnecting...\")\n    err := sugar.QuickConnect(clusterName)\n    if err != nil {\n        return fmt.Errorf(\"reconnection failed: %w\", err)\n    }\n\n    fmt.Println(\"\u2705 Reconnected successfully\")\n    return nil\n}\n\n// Usage:\nerr := EnsureConnected(sugar, \"FxPro-MT5 Demo\")\nif err != nil {\n    fmt.Printf(\"Cannot connect: %v\\n\", err)\n    return\n}\n\n// Now safe to trade\nsugar.BuyMarket(\"EURUSD\", 0.1)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#4-connection-monitoring-loop","title":"4) Connection monitoring loop","text":"<pre><code>func MonitorConnection(sugar *mt5.MT5Sugar, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        connected := sugar.IsConnected()\n\n        if connected {\n            fmt.Println(\"\ud83d\udce1 Connection: OK\")\n        } else {\n            fmt.Println(\"\u274c Connection: LOST\")\n            // Trigger reconnect logic here\n        }\n    }\n}\n\n// Run in background\ngo MonitorConnection(sugar, 30*time.Second)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#5-pre-trading-validation","title":"5) Pre-trading validation","text":"<pre><code>func ValidateTrading(sugar *mt5.MT5Sugar) error {\n    // Check connection\n    connected := sugar.IsConnected()\n    if !connected {\n        return fmt.Errorf(\"not connected to MT5\")\n    }\n\n    // Check balance\n    balance, err := sugar.GetBalance()\n    if err != nil {\n        return fmt.Errorf(\"cannot get balance: %w\", err)\n    }\n\n    if balance &lt;= 0 {\n        return fmt.Errorf(\"insufficient balance: %.2f\", balance)\n    }\n\n    return nil\n}\n\n// Before trading\nerr := ValidateTrading(sugar)\nif err != nil {\n    fmt.Printf(\"\u274c Cannot trade: %v\\n\", err)\n    return\n}\n\nfmt.Println(\"\u2705 All checks passed - ready to trade\")\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#6-retry-with-connection-check","title":"6) Retry with connection check","text":"<pre><code>func PlaceOrderWithRetry(sugar *mt5.MT5Sugar, symbol string, volume float64, maxRetries int) (uint64, error) {\n    for i := 0; i &lt; maxRetries; i++ {\n        // Check connection before each attempt\n        connected := sugar.IsConnected()\n        if !connected {\n            fmt.Printf(\"Attempt %d: Not connected - reconnecting...\\n\", i+1)\n            sugar.QuickConnect(\"FxPro-MT5 Demo\")\n            time.Sleep(2 * time.Second)\n            continue\n        }\n\n        // Try to place order\n        ticket, err := sugar.BuyMarket(symbol, volume)\n        if err == nil {\n            return ticket, nil // Success\n        }\n\n        fmt.Printf(\"Attempt %d failed: %v\\n\", i+1, err)\n        time.Sleep(time.Second)\n    }\n\n    return 0, fmt.Errorf(\"all %d attempts failed\", maxRetries)\n}\n\n// Usage:\nticket, err := PlaceOrderWithRetry(sugar, \"EURUSD\", 0.1, 3)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n} else {\n    fmt.Printf(\"Order #%d placed\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#7-status-dashboard","title":"7) Status dashboard","text":"<pre><code>func PrintStatus(sugar *mt5.MT5Sugar) {\n    connected := sugar.IsConnected()\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          MT5 STATUS DASHBOARD         \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    if connected {\n        fmt.Println(\"Connection:  \u2705 CONNECTED\")\n\n        balance, _ := sugar.GetBalance()\n        equity, _ := sugar.GetEquity()\n        positions, _ := sugar.CountOpenPositions()\n\n        fmt.Printf(\"Balance:     %.2f\\n\", balance)\n        fmt.Printf(\"Equity:      %.2f\\n\", equity)\n        fmt.Printf(\"Positions:   %d\\n\", positions)\n    } else {\n        fmt.Println(\"Connection:  \u274c DISCONNECTED\")\n        fmt.Println(\"Balance:     N/A\")\n        fmt.Println(\"Equity:      N/A\")\n        fmt.Println(\"Positions:   N/A\")\n    }\n}\n\n// Usage:\nPrintStatus(sugar)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#8-connection-timeout-handling","title":"8) Connection timeout handling","text":"<pre><code>func CheckConnectionWithTimeout(sugar *mt5.MT5Sugar, timeout time.Duration) (bool, error) {\n    done := make(chan bool, 1)\n\n    go func() {\n        connected := sugar.IsConnected()\n        done &lt;- connected\n    }()\n\n    select {\n    case connected := &lt;-done:\n        return connected, nil\n    case &lt;-time.After(timeout):\n        return false, fmt.Errorf(\"connection check timeout after %v\", timeout)\n    }\n}\n\n// Usage with custom timeout\nconnected, err := CheckConnectionWithTimeout(sugar, 5*time.Second)\nif err != nil {\n    fmt.Printf(\"Check failed: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#9-bot-startup-sequence","title":"9) Bot startup sequence","text":"<pre><code>func StartTradingBot(login uint64, password, server, cluster string) error {\n    // Create Sugar\n    sugar, err := mt5.NewMT5Sugar(login, password, server)\n    if err != nil {\n        return fmt.Errorf(\"failed to create Sugar: %w\", err)\n    }\n\n    // Connect\n    fmt.Println(\"\ud83d\udd0c Connecting to MT5...\")\n    err = sugar.QuickConnect(cluster)\n    if err != nil {\n        return fmt.Errorf(\"connection failed: %w\", err)\n    }\n\n    // Verify connection\n    fmt.Println(\"\ud83d\udd0d Verifying connection...\")\n    connected := sugar.IsConnected()\n    if !connected {\n        return fmt.Errorf(\"connection verification failed\")\n    }\n\n    // Get account info\n    fmt.Println(\"\ud83d\udcca Loading account info...\")\n    info, err := sugar.GetAccountInfo()\n    if err != nil {\n        return fmt.Errorf(\"failed to get account info: %w\", err)\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551       BOT STARTED SUCCESSFULLY        \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Account:  %d\\n\", info.Login)\n    fmt.Printf(\"Balance:  %.2f %s\\n\", info.Balance, info.Currency)\n    fmt.Printf(\"Company:  %s\\n\", info.Company)\n\n    return nil\n}\n\n// Usage:\nerr := StartTradingBot(591129415, \"password\", \"mt5.mrpc.pro:443\", \"FxPro-MT5 Demo\")\nif err != nil {\n    fmt.Printf(\"\u274c Startup failed: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#10-connection-status-with-fallback","title":"10) Connection status with fallback","text":"<pre><code>func GetBalanceOrDefault(sugar *mt5.MT5Sugar) float64 {\n    // Check connection first\n    connected := sugar.IsConnected()\n    if !connected {\n        fmt.Println(\"\u26a0\ufe0f  Not connected - returning 0\")\n        return 0.0\n    }\n\n    // Connection OK - get balance\n    balance, err := sugar.GetBalance()\n    if err != nil {\n        fmt.Printf(\"\u26a0\ufe0f  Balance error: %v - returning 0\\n\", err)\n        return 0.0\n    }\n\n    return balance\n}\n\n// Safe to call even when disconnected\nbalance := GetBalanceOrDefault(sugar)\nfmt.Printf(\"Balance: %.2f\\n\", balance)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Connection methods:</p> <ul> <li><code>QuickConnect()</code> - Connect to MT5 Terminal</li> <li><code>Ping()</code> - Detailed connection health check</li> </ul> <p>\ud83d\udcd6 Typical usage pattern:</p> <pre><code>// 1. Connect\nsugar.QuickConnect(\"FxPro-MT5 Demo\")\n\n// 2. Verify\nconnected := sugar.IsConnected()\nif !connected {\n    return\n}\n\n// 3. Trade\nsugar.BuyMarket(\"EURUSD\", 0.1)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/1.%20Connection/IsConnected/#1-ignoring-the-result","title":"1) Ignoring the result","text":"<pre><code>// \u274c WRONG - ignoring connection status\nsugar.IsConnected()\nsugar.BuyMarket(\"EURUSD\", 0.1) // Might fail!\n\n// \u2705 CORRECT - check before trading\nconnected := sugar.IsConnected()\nif !connected {\n    return\n}\nsugar.BuyMarket(\"EURUSD\", 0.1)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#2-not-checking-after-quickconnect","title":"2) Not checking after QuickConnect","text":"<pre><code>// \u274c WRONG - assuming connection worked\nsugar.QuickConnect(\"FxPro-MT5 Demo\")\n// Start trading immediately...\n\n// \u2705 CORRECT - verify connection\nerr := sugar.QuickConnect(\"FxPro-MT5 Demo\")\nif err != nil {\n    return\n}\nconnected := sugar.IsConnected()\nif !connected {\n    return\n}\n// Now safe to trade\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#3-checking-too-frequently","title":"3) Checking too frequently","text":"<pre><code>// \u274c WRONG - checking before every single operation\nfor i := 0; i &lt; 1000; i++ {\n    connected := sugar.IsConnected()\n    if !connected { return }\n    sugar.GetBalance() // Too many checks!\n}\n\n// \u2705 CORRECT - check once before loop\nconnected := sugar.IsConnected()\nif !connected { return }\nfor i := 0; i &lt; 1000; i++ {\n    sugar.GetBalance()\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/IsConnected/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>Check once, trade many - Don't check before every operation</li> <li>Periodic monitoring - Check every 30-60 seconds in bots</li> <li>Before critical operations - Always check before trading</li> <li>Reconnect on false - Auto-reconnect when connection lost</li> <li>Combine with Ping() - Use Ping() for detailed health checks</li> </ol> <p>See also: <code>QuickConnect.md</code>, <code>Ping.md</code></p>"},{"location":"MT5Sugar/1.%20Connection/Ping/","title":"\ud83c\udfd3 Ping MT5 Server (<code>Ping</code>)","text":"<p>Sugar method: Sends a ping to MT5 server to verify connection health and measure response time.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.Ping()</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>account.Ping()</code></li> <li>Timeout: 5 seconds</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/Ping/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) Ping() error\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#input","title":"\ud83d\udd3d Input","text":"<p>No parameters</p>"},{"location":"MT5Sugar/1.%20Connection/Ping/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>error</code> <code>error</code> <code>nil</code> if ping successful, error if connection problem"},{"location":"MT5Sugar/1.%20Connection/Ping/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Sends a ping to MT5 server to test if it's reachable and responsive.</li> <li>Why you need it: Verify connection health, measure latency, detect network issues.</li> <li>Sanity check: If ping returns <code>nil</code>, connection is healthy.</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/Ping/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it for detailed connection testing:</p> <ul> <li>Health check - Verify server is responsive</li> <li>Latency measurement - Test connection speed</li> <li>Network diagnostics - Detect connectivity issues</li> <li>Pre-trading validation - Ensure stable connection</li> <li>Monitoring - Track connection quality over time</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/Ping/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Returns error - <code>nil</code> = success, error = problem</li> <li>5-second timeout - Fails if no response</li> <li>Lighter than IsConnected - Just pings, no extra checks</li> <li>Use for diagnostics - Better than IsConnected for troubleshooting</li> <li>Measure latency - Time the call to measure round-trip</li> <li>Network issues - Detects network problems quickly</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/Ping/#under-the-hood","title":"\ud83d\udd27 Under the Hood","text":"<pre><code>func (s *MT5Sugar) Ping() error {\n    ctx, cancel := context.WithTimeout(s.ctx, 5*time.Second)\n    defer cancel()\n\n    return s.account.Ping(ctx)\n}\n</code></pre> <p>What it does:</p> <ul> <li>\u2705 Simple ping - Sends ping, waits for pong</li> <li>\u2705 5-second timeout - Doesn't hang forever</li> <li>\u2705 Clean error - nil = OK, error = problem</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/Ping/#low-level-alternative","title":"\ud83d\udcca Low-Level Alternative","text":"<p>WITHOUT sugar: <pre><code>ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\ndefer cancel()\n\nerr := account.Ping(ctx)\n</code></pre></p> <p>WITH sugar: <pre><code>err := sugar.Ping()\n</code></pre></p> <p>Benefits:</p> <ul> <li>\u2705 One line vs three</li> <li>\u2705 Built-in timeout</li> <li>\u2705 Cleaner code</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/Ping/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Connection/Ping/#1-basic-ping","title":"1) Basic ping","text":"<pre><code>err := sugar.Ping()\nif err != nil {\n    fmt.Printf(\"\u274c Ping failed: %v\\n\", err)\n    return\n}\n\nfmt.Println(\"\u2705 Ping successful - server is responsive\")\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#2-measure-latency","title":"2) Measure latency","text":"<pre><code>start := time.Now()\nerr := sugar.Ping()\nlatency := time.Since(start)\n\nif err != nil {\n    fmt.Printf(\"\u274c Ping failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Ping successful\\n\")\nfmt.Printf(\"   Latency: %v\\n\", latency)\n\nif latency &gt; 500*time.Millisecond {\n    fmt.Println(\"   \u26a0\ufe0f  High latency detected!\")\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#3-connection-quality-check","title":"3) Connection quality check","text":"<pre><code>func CheckConnectionQuality(sugar *mt5.MT5Sugar, samples int) {\n    var totalLatency time.Duration\n    failures := 0\n\n    fmt.Printf(\"Testing connection (%d pings)...\\n\", samples)\n\n    for i := 0; i &lt; samples; i++ {\n        start := time.Now()\n        err := sugar.Ping()\n        latency := time.Since(start)\n\n        if err != nil {\n            failures++\n            fmt.Printf(\"  Ping %d: \u274c Failed\\n\", i+1)\n        } else {\n            totalLatency += latency\n            fmt.Printf(\"  Ping %d: \u2705 %v\\n\", i+1, latency)\n        }\n\n        time.Sleep(time.Second)\n    }\n\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Results:\\n\")\n    fmt.Printf(\"  Successful: %d/%d (%.1f%%)\\n\",\n        samples-failures, samples,\n        float64(samples-failures)/float64(samples)*100)\n\n    if failures &lt; samples {\n        avgLatency := totalLatency / time.Duration(samples-failures)\n        fmt.Printf(\"  Avg latency: %v\\n\", avgLatency)\n    }\n\n    if failures &gt; 0 {\n        fmt.Printf(\"  \u26a0\ufe0f  %d ping(s) failed\\n\", failures)\n    }\n}\n\n// Usage:\nCheckConnectionQuality(sugar, 5)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#4-pre-trading-connection-test","title":"4) Pre-trading connection test","text":"<pre><code>func ValidateConnectionForTrading(sugar *mt5.MT5Sugar) error {\n    // Test with 3 pings\n    failures := 0\n\n    for i := 0; i &lt; 3; i++ {\n        err := sugar.Ping()\n        if err != nil {\n            failures++\n        }\n        time.Sleep(500 * time.Millisecond)\n    }\n\n    if failures &gt;= 2 {\n        return fmt.Errorf(\"connection unstable: %d/3 pings failed\", failures)\n    }\n\n    return nil\n}\n\n// Before trading\nerr := ValidateConnectionForTrading(sugar)\nif err != nil {\n    fmt.Printf(\"\u274c %v\\n\", err)\n    fmt.Println(\"   Trading not recommended\")\n    return\n}\n\nfmt.Println(\"\u2705 Connection stable - safe to trade\")\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#5-continuous-monitoring","title":"5) Continuous monitoring","text":"<pre><code>func MonitorConnectionHealth(sugar *mt5.MT5Sugar, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    consecutiveFailures := 0\n\n    for range ticker.C {\n        err := sugar.Ping()\n\n        if err != nil {\n            consecutiveFailures++\n            fmt.Printf(\"\u26a0\ufe0f  Ping failed (%d consecutive failures): %v\\n\",\n                consecutiveFailures, err)\n\n            if consecutiveFailures &gt;= 3 {\n                fmt.Println(\"\ud83d\udea8 CONNECTION LOST - Too many failures!\")\n                // Trigger reconnect or alert\n            }\n        } else {\n            if consecutiveFailures &gt; 0 {\n                fmt.Println(\"\u2705 Connection restored\")\n            }\n            consecutiveFailures = 0\n            fmt.Println(\"\ud83d\udce1 Ping OK\")\n        }\n    }\n}\n\n// Run in background\ngo MonitorConnectionHealth(sugar, 30*time.Second)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#6-compare-ping-vs-isconnected","title":"6) Compare Ping vs IsConnected","text":"<pre><code>fmt.Println(\"Testing connection methods:\")\n\n// Method 1: Ping\nstart := time.Now()\npingErr := sugar.Ping()\npingTime := time.Since(start)\n\n// Method 2: IsConnected\nstart = time.Now()\nconnected := sugar.IsConnected()\nconnTime := time.Since(start)\n\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Ping():        %v (%v)\\n\", pingErr == nil, pingTime)\nfmt.Printf(\"IsConnected(): %v (%v)\\n\", connected, connTime)\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n// Output might be:\n// Ping():        true (45ms)\n// IsConnected(): true (48ms)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#7-retry-logic-with-ping","title":"7) Retry logic with ping","text":"<pre><code>func ConnectWithPing(sugar *mt5.MT5Sugar, cluster string, maxRetries int) error {\n    for i := 0; i &lt; maxRetries; i++ {\n        fmt.Printf(\"Connection attempt %d/%d...\\n\", i+1, maxRetries)\n\n        // Connect\n        err := sugar.QuickConnect(cluster)\n        if err != nil {\n            fmt.Printf(\"  Connect failed: %v\\n\", err)\n            time.Sleep(3 * time.Second)\n            continue\n        }\n\n        // Verify with ping\n        err = sugar.Ping()\n        if err != nil {\n            fmt.Printf(\"  Ping failed: %v\\n\", err)\n            time.Sleep(3 * time.Second)\n            continue\n        }\n\n        fmt.Println(\"\u2705 Connected and verified!\")\n        return nil\n    }\n\n    return fmt.Errorf(\"all %d connection attempts failed\", maxRetries)\n}\n\n// Usage:\nerr := ConnectWithPing(sugar, \"FxPro-MT5 Demo\", 3)\nif err != nil {\n    fmt.Printf(\"\u274c %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#8-benchmark-connection-speed","title":"8) Benchmark connection speed","text":"<pre><code>func BenchmarkConnection(sugar *mt5.MT5Sugar, iterations int) {\n    latencies := make([]time.Duration, 0, iterations)\n\n    fmt.Printf(\"Benchmarking connection (%d pings)...\\n\", iterations)\n\n    for i := 0; i &lt; iterations; i++ {\n        start := time.Now()\n        err := sugar.Ping()\n        latency := time.Since(start)\n\n        if err == nil {\n            latencies = append(latencies, latency)\n        }\n\n        time.Sleep(200 * time.Millisecond)\n    }\n\n    if len(latencies) == 0 {\n        fmt.Println(\"\u274c All pings failed\")\n        return\n    }\n\n    // Calculate statistics\n    var total time.Duration\n    min := latencies[0]\n    max := latencies[0]\n\n    for _, lat := range latencies {\n        total += lat\n        if lat &lt; min {\n            min = lat\n        }\n        if lat &gt; max {\n            max = lat\n        }\n    }\n\n    avg := total / time.Duration(len(latencies))\n\n    fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n    fmt.Println(\"  CONNECTION BENCHMARK RESULTS\")\n    fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n    fmt.Printf(\"Pings sent:    %d\\n\", iterations)\n    fmt.Printf(\"Successful:    %d (%.1f%%)\\n\",\n        len(latencies),\n        float64(len(latencies))/float64(iterations)*100)\n    fmt.Printf(\"Min latency:   %v\\n\", min)\n    fmt.Printf(\"Avg latency:   %v\\n\", avg)\n    fmt.Printf(\"Max latency:   %v\\n\", max)\n}\n\n// Usage:\nBenchmarkConnection(sugar, 20)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#9-alert-on-connection-issues","title":"9) Alert on connection issues","text":"<pre><code>func MonitorWithAlerts(sugar *mt5.MT5Sugar) {\n    ticker := time.NewTicker(10 * time.Second)\n    defer ticker.Stop()\n\n    lastStatus := true\n\n    for range ticker.C {\n        err := sugar.Ping()\n        currentStatus := (err == nil)\n\n        // Status changed\n        if currentStatus != lastStatus {\n            if currentStatus {\n                fmt.Println(\"\ud83d\udd14 ALERT: Connection RESTORED\")\n                // Send notification (email, telegram, etc.)\n            } else {\n                fmt.Println(\"\ud83d\udea8 ALERT: Connection LOST\")\n                // Send urgent notification\n            }\n        }\n\n        lastStatus = currentStatus\n    }\n}\n\n// Run in background\ngo MonitorWithAlerts(sugar)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#10-connection-diagnostics-tool","title":"10) Connection diagnostics tool","text":"<pre><code>func DiagnoseConnection(sugar *mt5.MT5Sugar) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551       CONNECTION DIAGNOSTICS                  \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Println()\n\n    // Test 1: Ping\n    fmt.Println(\"Test 1: Server Ping\")\n    start := time.Now()\n    pingErr := sugar.Ping()\n    pingLatency := time.Since(start)\n\n    if pingErr != nil {\n        fmt.Printf(\"  \u274c FAILED: %v\\n\", pingErr)\n    } else {\n        fmt.Printf(\"  \u2705 SUCCESS (Latency: %v)\\n\", pingLatency)\n    }\n    fmt.Println()\n\n    // Test 2: IsConnected\n    fmt.Println(\"Test 2: Connection Status\")\n    connected := sugar.IsConnected()\n    if connected {\n        fmt.Println(\"  \u2705 CONNECTED\")\n    } else {\n        fmt.Println(\"  \u274c NOT CONNECTED\")\n    }\n    fmt.Println()\n\n    // Test 3: Get Balance (actual operation)\n    fmt.Println(\"Test 3: Sample Operation (GetBalance)\")\n    balance, balErr := sugar.GetBalance()\n    if balErr != nil {\n        fmt.Printf(\"  \u274c FAILED: %v\\n\", balErr)\n    } else {\n        fmt.Printf(\"  \u2705 SUCCESS (Balance: %.2f)\\n\", balance)\n    }\n    fmt.Println()\n\n    // Summary\n    fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n    allPassed := (pingErr == nil &amp;&amp; connected &amp;&amp; balErr == nil)\n    if allPassed {\n        fmt.Println(\"\u2705 ALL TESTS PASSED - Connection is healthy\")\n    } else {\n        fmt.Println(\"\u274c SOME TESTS FAILED - Connection has issues\")\n    }\n}\n\n// Usage:\nDiagnoseConnection(sugar)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Connection methods:</p> <ul> <li><code>QuickConnect()</code> - Connect to MT5 Terminal</li> <li><code>IsConnected()</code> - Check if connected</li> </ul> <p>\ud83d\udcd6 Typical diagnostic pattern:</p> <pre><code>// 1. Check with IsConnected\nconnected, _ := sugar.IsConnected()\n\n// 2. If issues, use Ping for details\nif !connected {\n    err := sugar.Ping()\n    fmt.Printf(\"Ping error: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/1.%20Connection/Ping/#1-confusing-nil-with-success","title":"1) Confusing nil with success","text":"<pre><code>// \u274c WRONG - checking for non-nil (backwards!)\nif sugar.Ping() != nil {\n    fmt.Println(\"Connection OK\") // WRONG!\n}\n\n// \u2705 CORRECT - nil means success\nif sugar.Ping() == nil {\n    fmt.Println(\"Connection OK\")\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#2-not-handling-timeout","title":"2) Not handling timeout","text":"<pre><code>// \u274c WRONG - might hang for 5 seconds\nsugar.Ping() // Blocked for up to 5 seconds!\n\n// \u2705 CORRECT - be aware of timeout\nfmt.Println(\"Pinging...\")\nerr := sugar.Ping() // Max 5 seconds\nif err != nil {\n    fmt.Println(\"Ping failed or timed out\")\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#3-pinging-too-frequently","title":"3) Pinging too frequently","text":"<pre><code>// \u274c WRONG - excessive pinging\nfor {\n    sugar.Ping() // Every loop iteration!\n    time.Sleep(100 * time.Millisecond)\n}\n\n// \u2705 CORRECT - reasonable interval\nfor {\n    sugar.Ping()\n    time.Sleep(30 * time.Second) // Every 30 seconds\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/Ping/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>Use for diagnostics - Better than IsConnected for troubleshooting</li> <li>Measure latency - Time the call to measure connection speed</li> <li>Reasonable intervals - Don't ping more than once per 10-30 seconds</li> <li>Before critical ops - Ping before important trading operations</li> <li>Combine with monitoring - Track latency trends over time</li> <li>Network issues - Ping failures often indicate network problems</li> </ol> <p>See also: <code>QuickConnect.md</code>, <code>IsConnected.md</code></p>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/","title":"\ud83d\udd0c Quick Connect to MT5 (<code>QuickConnect</code>)","text":"<p>Sugar method: Easiest way to connect to MT5 Terminal - just provide cluster name and you're connected!</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.QuickConnect(clusterName)</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>account.Connect()</code> with automatic cluster lookup</li> <li>Timeout: Built-in connection timeout</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) QuickConnect(clusterName string) error\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>clusterName</code> <code>string</code> MT5 cluster name (e.g., \"FxPro-MT5 Demo\", \"FxPro-MT5 Live\")"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>error</code> <code>error</code> <code>nil</code> if connected successfully, error otherwise"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Simplest connection method - connects using just cluster name.</li> <li>Why you need it: You don't need to know host/port - just the cluster name from MT5 terminal.</li> <li>Sanity check: After successful connect, <code>IsConnected()</code> returns <code>true</code>.</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it when you want the simplest connection:</p> <ul> <li>Quick connection - One parameter, one call</li> <li>Auto-discovery - Finds server host/port automatically</li> <li>Beginner-friendly - No need to configure host:port</li> <li>Demo/Live switching - Just change cluster name</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Cluster name - Same as in MT5 Terminal (File \u2192 Open Account)</li> <li>Case sensitive - Must match exactly</li> <li>Demo vs Live - Usually ends with \"Demo\" or \"Live\"</li> <li>First call - Must be called before any trading operations</li> <li>One-time - Only need to connect once per session</li> <li>Check connection - Use <code>IsConnected()</code> to verify</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#under-the-hood","title":"\ud83d\udd27 Under the Hood","text":"<pre><code>func (s *MT5Sugar) QuickConnect(clusterName string) error {\n    ctx, cancel := context.WithTimeout(s.ctx, 30*time.Second)\n    defer cancel()\n\n    baseSymbol := \"EURUSD\"\n    req := &amp;pb.ConnectExRequest{\n        User:            s.user,\n        Password:        s.password,\n        MtClusterName:   clusterName,\n        BaseChartSymbol: &amp;baseSymbol,\n    }\n\n    _, err := s.GetAccount().ConnectEx(ctx, req)\n    return err\n}\n</code></pre> <p>What it improves:</p> <ul> <li>\u2705 Simple API - One parameter instead of multiple</li> <li>\u2705 No config needed - Don't need to know server details</li> <li>\u2705 Automatic lookup - Cluster \u2192 server resolution</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#low-level-alternative","title":"\ud83d\udcca Low-Level Alternative","text":"<p>WITHOUT sugar: <pre><code>// Need to know exact host and port\naccount, _ := mt5account.NewMT5Account(591129415, \"password\")\nerr := account.Connect(ctx, 591129415, \"password\", \"FxPro-MT5 Demo\")\n</code></pre></p> <p>WITH sugar: <pre><code>sugar, _ := mt5.NewMT5Sugar(591129415, \"password\", \"mt5.mrpc.pro:443\")\nerr := sugar.QuickConnect(\"FxPro-MT5 Demo\")\n</code></pre></p> <p>Benefits:</p> <ul> <li>\u2705 Shorter and clearer</li> <li>\u2705 Same simplicity</li> <li>\u2705 Built into Sugar instance</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#1-basic-connection","title":"1) Basic connection","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"github.com/MetaRPC/GoMT5/package/Helpers\"\n)\n\nfunc main() {\n    // Create Sugar instance\n    sugar, err := mt5.NewMT5Sugar(\n        591129415,\n        \"your_password\",\n        \"mt5.mrpc.pro:443\",\n    )\n    if err != nil {\n        fmt.Printf(\"Failed to create Sugar: %v\\n\", err)\n        return\n    }\n\n    // Connect to MT5\n    err = sugar.QuickConnect(\"FxPro-MT5 Demo\")\n    if err != nil {\n        fmt.Printf(\"Connection failed: %v\\n\", err)\n        return\n    }\n\n    fmt.Println(\"\u2705 Connected successfully!\")\n\n    // Now you can use any Sugar methods\n    balance, _ := sugar.GetBalance()\n    fmt.Printf(\"Balance: %.2f\\n\", balance)\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#2-connection-with-verification","title":"2) Connection with verification","text":"<pre><code>sugar, _ := mt5.NewMT5Sugar(591129415, \"password\", \"mt5.mrpc.pro:443\")\n\n// Connect\nerr := sugar.QuickConnect(\"FxPro-MT5 Demo\")\nif err != nil {\n    fmt.Printf(\"\u274c Connection failed: %v\\n\", err)\n    return\n}\n\n// Verify connection\nconnected := sugar.IsConnected()\n\nif connected {\n    fmt.Println(\"\u2705 Connected and verified!\")\n} else {\n    fmt.Println(\"\u274c Connection failed!\")\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#3-demo-vs-live-switching","title":"3) Demo vs Live switching","text":"<pre><code>sugar, _ := mt5.NewMT5Sugar(591129415, \"password\", \"mt5.mrpc.pro:443\")\n\n// Connect to DEMO\nerr := sugar.QuickConnect(\"FxPro-MT5 Demo\")\nif err != nil {\n    fmt.Printf(\"Demo connection failed: %v\\n\", err)\n    return\n}\n\nfmt.Println(\"\u2705 Connected to DEMO account\")\n\n// ... Later, to switch to LIVE (requires reconnection):\n// sugar.QuickConnect(\"FxPro-MT5 Live\")\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#4-connection-retry-logic","title":"4) Connection retry logic","text":"<pre><code>sugar, _ := mt5.NewMT5Sugar(591129415, \"password\", \"mt5.mrpc.pro:443\")\n\nmaxRetries := 3\nclusterName := \"FxPro-MT5 Demo\"\n\nfor i := 0; i &lt; maxRetries; i++ {\n    fmt.Printf(\"Connection attempt %d/%d...\\n\", i+1, maxRetries)\n\n    err := sugar.QuickConnect(clusterName)\n    if err == nil {\n        fmt.Println(\"\u2705 Connected successfully!\")\n        break\n    }\n\n    fmt.Printf(\"\u274c Attempt %d failed: %v\\n\", i+1, err)\n\n    if i &lt; maxRetries-1 {\n        fmt.Println(\"Retrying in 5 seconds...\")\n        time.Sleep(5 * time.Second)\n    } else {\n        fmt.Println(\"\u274c All connection attempts failed\")\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#5-connection-with-timeout","title":"5) Connection with timeout","text":"<pre><code>sugar, _ := mt5.NewMT5Sugar(591129415, \"password\", \"mt5.mrpc.pro:443\")\n\n// Create context with timeout\nctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\ndefer cancel()\n\n// Connect (connection has built-in timeout, but we add extra safety)\ndone := make(chan error, 1)\n\ngo func() {\n    done &lt;- sugar.QuickConnect(\"FxPro-MT5 Demo\")\n}()\n\nselect {\ncase err := &lt;-done:\n    if err != nil {\n        fmt.Printf(\"Connection failed: %v\\n\", err)\n        return\n    }\n    fmt.Println(\"\u2705 Connected successfully!\")\n\ncase &lt;-ctx.Done():\n    fmt.Println(\"\u274c Connection timeout\")\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#6-get-account-info-after-connection","title":"6) Get account info after connection","text":"<pre><code>sugar, _ := mt5.NewMT5Sugar(591129415, \"password\", \"mt5.mrpc.pro:443\")\n\nerr := sugar.QuickConnect(\"FxPro-MT5 Demo\")\nif err != nil {\n    fmt.Printf(\"Connection failed: %v\\n\", err)\n    return\n}\n\n// Get account information\naccountInfo, err := sugar.GetAccountInfo()\nif err != nil {\n    fmt.Printf(\"Failed to get account info: %v\\n\", err)\n    return\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551       ACCOUNT INFORMATION             \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Login:      %d\\n\", accountInfo.Login)\nfmt.Printf(\"Balance:    %.2f %s\\n\", accountInfo.Balance, accountInfo.Currency)\nfmt.Printf(\"Equity:     %.2f %s\\n\", accountInfo.Equity, accountInfo.Currency)\nfmt.Printf(\"Leverage:   1:%d\\n\", accountInfo.Leverage)\nfmt.Printf(\"Company:    %s\\n\", accountInfo.Company)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#7-connection-from-environment-variables","title":"7) Connection from environment variables","text":"<pre><code>import \"os\"\n\n// Get credentials from environment\nlogin := os.Getenv(\"MT5_USER\")\npassword := os.Getenv(\"MT5_PASSWORD\")\nserver := os.Getenv(\"MT5_GRPC_SERVER\")\ncluster := os.Getenv(\"MT5_MT_CLUSTER\")\n\n// Validate\nif login == \"\" || password == \"\" || server == \"\" || cluster == \"\" {\n    fmt.Println(\"\u274c Missing environment variables\")\n    return\n}\n\n// Connect\nsugar, err := mt5.NewMT5Sugar(login, password, server)\nif err != nil {\n    fmt.Printf(\"Failed to create Sugar: %v\\n\", err)\n    return\n}\n\nerr = sugar.QuickConnect(cluster)\nif err != nil {\n    fmt.Printf(\"Connection failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Connected to %s\\n\", cluster)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#8-connection-status-monitoring","title":"8) Connection status monitoring","text":"<pre><code>sugar, _ := mt5.NewMT5Sugar(591129415, \"password\", \"mt5.mrpc.pro:443\")\n\n// Initial connection\nerr := sugar.QuickConnect(\"FxPro-MT5 Demo\")\nif err != nil {\n    fmt.Printf(\"Connection failed: %v\\n\", err)\n    return\n}\n\nfmt.Println(\"\u2705 Initial connection successful\")\n\n// Monitor connection in background\ngo func() {\n    ticker := time.NewTicker(30 * time.Second)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        connected := sugar.IsConnected()\n        if connected {\n            fmt.Println(\"\ud83d\udce1 Connection: OK\")\n        } else {\n            fmt.Println(\"\u26a0\ufe0f  Connection: LOST - Attempting reconnect...\")\n            err := sugar.QuickConnect(\"FxPro-MT5 Demo\")\n            if err == nil {\n                fmt.Println(\"\u2705 Reconnected!\")\n            } else {\n                fmt.Printf(\"\u274c Reconnect failed: %v\\n\", err)\n            }\n        }\n    }\n}()\n\n// Main program continues...\ntime.Sleep(5 * time.Minute)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#9-multiple-account-handling","title":"9) Multiple account handling","text":"<pre><code>// Demo account\nsugarDemo, _ := mt5.NewMT5Sugar(591129415, \"demo_pass\", \"mt5.mrpc.pro:443\")\nerr := sugarDemo.QuickConnect(\"FxPro-MT5 Demo\")\nif err != nil {\n    fmt.Printf(\"Demo connection failed: %v\\n\", err)\n} else {\n    fmt.Println(\"\u2705 Demo account connected\")\n}\n\n// Live account (different credentials)\nsugarLive, _ := mt5.NewMT5Sugar(123456789, \"live_pass\", \"mt5.mrpc.pro:443\")\nerr = sugarLive.QuickConnect(\"FxPro-MT5 Live\")\nif err != nil {\n    fmt.Printf(\"Live connection failed: %v\\n\", err)\n} else {\n    fmt.Println(\"\u2705 Live account connected\")\n}\n\n// Now you can use both accounts\ndemoBalance, _ := sugarDemo.GetBalance()\nliveBalance, _ := sugarLive.GetBalance()\n\nfmt.Printf(\"Demo balance: %.2f\\n\", demoBalance)\nfmt.Printf(\"Live balance: %.2f\\n\", liveBalance)\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#10-connection-helper-function","title":"10) Connection helper function","text":"<pre><code>func ConnectToMT5(login uint64, password, server, cluster string) (*mt5.MT5Sugar, error) {\n    // Create Sugar instance\n    sugar, err := mt5.NewMT5Sugar(login, password, server)\n    if err != nil {\n        return nil, fmt.Errorf(\"failed to create Sugar: %w\", err)\n    }\n\n    // Connect\n    err = sugar.QuickConnect(cluster)\n    if err != nil {\n        return nil, fmt.Errorf(\"connection failed: %w\", err)\n    }\n\n    // Verify connection\n    connected := sugar.IsConnected()\n\n    if !connected {\n        return nil, fmt.Errorf(\"connection not established\")\n    }\n\n    return sugar, nil\n}\n\n// Usage:\nsugar, err := ConnectToMT5(\n    591129415,\n    \"password\",\n    \"mt5.mrpc.pro:443\",\n    \"FxPro-MT5 Demo\",\n)\nif err != nil {\n    fmt.Printf(\"\u274c %v\\n\", err)\n    return\n}\n\nfmt.Println(\"\u2705 Connected and ready to trade!\")\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other connection methods:</p> <ul> <li><code>IsConnected()</code> - Check if connected</li> <li><code>Ping()</code> - Verify connection health</li> </ul> <p>\ud83d\udcd6 Next steps after connection:</p> <ul> <li><code>GetBalance()</code> - Check account balance</li> <li><code>GetAccountInfo()</code> - Get complete account details</li> <li><code>GetAllSymbols()</code> - List available symbols</li> </ul>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#1-wrong-cluster-name","title":"1) Wrong cluster name","text":"<pre><code>// \u274c WRONG - incorrect cluster name\nerr := sugar.QuickConnect(\"FxPro Demo\") // Missing \"-MT5\"\n\n// \u2705 CORRECT - exact cluster name from MT5\nerr := sugar.QuickConnect(\"FxPro-MT5 Demo\")\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#2-not-checking-connection-error","title":"2) Not checking connection error","text":"<pre><code>// \u274c WRONG - ignoring error\nsugar.QuickConnect(\"FxPro-MT5 Demo\")\nbalance, _ := sugar.GetBalance() // Will fail if not connected!\n\n// \u2705 CORRECT - check error\nerr := sugar.QuickConnect(\"FxPro-MT5 Demo\")\nif err != nil {\n    fmt.Printf(\"Connection failed: %v\\n\", err)\n    return\n}\nbalance, _ := sugar.GetBalance()\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#3-connecting-multiple-times","title":"3) Connecting multiple times","text":"<pre><code>// \u274c WRONG - redundant connections\nsugar.QuickConnect(\"FxPro-MT5 Demo\")\nsugar.QuickConnect(\"FxPro-MT5 Demo\") // Already connected!\n\n// \u2705 CORRECT - connect once\nerr := sugar.QuickConnect(\"FxPro-MT5 Demo\")\nif err != nil {\n    fmt.Printf(\"Connection failed: %v\\n\", err)\n    return\n}\n// Now use Sugar methods without reconnecting\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#4-using-wrong-credentials","title":"4) Using wrong credentials","text":"<pre><code>// \u274c WRONG - login in QuickConnect (it's already in NewMT5Sugar)\nsugar, _ := mt5.NewMT5Sugar(591129415, \"password\", \"mt5.mrpc.pro:443\")\nsugar.QuickConnect(\"591129415\") // WRONG! This is cluster, not login\n\n// \u2705 CORRECT - cluster name\nsugar, _ := mt5.NewMT5Sugar(591129415, \"password\", \"mt5.mrpc.pro:443\")\nsugar.QuickConnect(\"FxPro-MT5 Demo\")\n</code></pre>"},{"location":"MT5Sugar/1.%20Connection/QuickConnect/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>Always check errors - Connection can fail for many reasons</li> <li>Use environment variables - Don't hardcode credentials</li> <li>Verify after connect - Use <code>IsConnected()</code> to double-check</li> <li>One connection per session - Don't reconnect unless necessary</li> <li>Demo first - Always test on demo before live</li> <li>Cluster name - Copy exact name from MT5 Terminal</li> </ol> <p>See also: <code>IsConnected.md</code>, <code>Ping.md</code></p>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/","title":"\u2696\ufe0f Calculate Position Size Based on Risk (<code>CalculatePositionSize</code>)","text":"<p>Sugar method: THE MOST IMPORTANT risk management tool - automatically calculates position size so you risk exactly X% of your balance on the trade.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.CalculatePositionSize(symbol, riskPercent, stopLossPips)</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>GetBalance()</code>, <code>GetSymbolInfo()</code>, <code>GetSymbolTick()</code>, <code>CalculateMargin()</code>, <code>GetFreeMargin()</code></li> <li>Timeout: 10 seconds</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) CalculatePositionSize(\n    symbol string,\n    riskPercent float64,\n    stopLossPips float64,\n) (float64, error)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\") <code>riskPercent</code> <code>float64</code> Percentage of balance to risk (e.g., 2.0 = 2%) <code>stopLossPips</code> <code>float64</code> Stop Loss distance in points (not price!)"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>lotSize</code> <code>float64</code> Recommended lot size to risk exactly <code>riskPercent</code> <code>error</code> <code>error</code> Error if calculation fails or symbol not found <p>Returned lot size:</p> <ul> <li>Already rounded to symbol's <code>VolumeStep</code></li> <li>Clamped between <code>VolumeMin</code> and <code>VolumeMax</code></li> <li>Ready to use in <code>BuyMarket()</code> / <code>SellMarket()</code> calls</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Auto-calculates lot size based on how much you want to risk (% of balance).</li> <li>Why you need it: NEVER use fixed lot sizes! This ensures you risk the same % on every trade regardless of balance.</li> <li>Sanity check: If balance = $10,000, risk = 2%, SL = 50 pips \u2192 you'll always risk exactly $200, even as balance grows/shrinks.</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it for professional risk management:</p> <ul> <li>Risk exactly X% per trade (recommended: 1-2%)</li> <li>Auto-adjust position size as your balance changes</li> <li>Prevent overleveraging by calculating safe lot sizes</li> <li>Follow professional money management rules</li> <li>Scale positions consistently across different symbols</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#formula","title":"\ud83d\udd22 Formula","text":"<pre><code>LotSize = (Balance \u00d7 RiskPercent / 100) / (StopLossPips \u00d7 PipValue)\n\nWhere:\n  PipValue = ContractSize \u00d7 Point\n\nThen:\n  - Round to VolumeStep\n  - Clamp between VolumeMin and VolumeMax\n</code></pre> <p>Example: <pre><code>Balance:     $10,000\nRisk:        2% ($200)\nStop Loss:   50 pips\nPip Value:   $10 per lot (for EURUSD)\n\nLotSize = $200 / (50 \u00d7 $10) = $200 / $500 = 0.04 lots\n</code></pre></p>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Always use this method - Don't hardcode lot sizes!</li> <li>Risk percent - Professional traders use 1-2% max per trade</li> <li>Stop loss in pips - Use points, not price! (50 = 50 points)</li> <li>Symbol matters - Different symbols have different pip values</li> <li>Auto-rounding - Result is already rounded to valid volume step</li> <li>Safety limits - Result is clamped to broker's min/max volume</li> <li>Account currency - Works with any account currency (USD, EUR, etc.)</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#under-the-hood","title":"\ud83d\udd27 Under the Hood","text":"<p>This method performs several steps:</p> <pre><code>// 1. Get current balance\nbalance, _ := sugar.GetBalance()\n\n// 2. Get symbol information (point size, contract size, volume limits)\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// 3. Get current market price\ntick, _ := service.GetSymbolTick(ctx, symbol)\n\n// 4. Calculate pip value per lot\npipValue := info.ContractSize * info.Point\n\n// 5. Calculate risk amount in money\nriskAmount := balance * riskPercent / 100.0\n\n// 6. Calculate position size\npositionSize := riskAmount / (stopLossPips * pipValue)\n\n// 7. Round to volume step\npositionSize = round(positionSize / info.VolumeStep) * info.VolumeStep\n\n// 8. Clamp to min/max\npositionSize = clamp(positionSize, info.VolumeMin, info.VolumeMax)\n\nreturn positionSize\n</code></pre> <p>What it improves:</p> <ul> <li>\u2705 Automatic calculation - No manual math needed</li> <li>\u2705 Dynamic risk - Adjusts to balance changes</li> <li>\u2705 Symbol-aware - Handles different contract sizes</li> <li>\u2705 Broker-compliant - Respects volume limits</li> <li>\u2705 Ready to trade - Result can be used directly</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#low-level-alternative","title":"\ud83d\udcca Low-Level Alternative","text":"<p>WITHOUT sugar (manual calculation): <pre><code>// Get balance\nbalance, _ := service.GetAccountDouble(ctx, pb.ENUM_ACCOUNT_INFO_DOUBLE_ACCOUNT_BALANCE)\n\n// Get symbol params\nparams, _ := service.GetSymbolParamsMany(ctx, &amp;symbol, nil, nil, nil)\np := params[0]\n\n// Get current price\ntick, _ := service.GetSymbolTick(ctx, symbol)\n\n// Calculate pip value\npipValue := p.TradeContractSize * p.Point\n\n// Calculate risk amount\nriskAmount := balance * 2.0 / 100.0\n\n// Calculate lot size\nlotSize := riskAmount / (50.0 * pipValue)\n\n// Round to step\nlotSize = float64(int(lotSize / p.VolumeStep)) * p.VolumeStep\n\n// Clamp to limits\nif lotSize &lt; p.VolumeMin {\n    lotSize = p.VolumeMin\n}\nif lotSize &gt; p.VolumeMax {\n    lotSize = p.VolumeMax\n}\n</code></pre></p> <p>WITH sugar: <pre><code>lotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n</code></pre></p> <p>Benefits:</p> <ul> <li>\u2705 One line vs 20+ lines</li> <li>\u2705 No manual formula</li> <li>\u2705 No rounding logic needed</li> <li>\u2705 Automatic error handling</li> <li>\u2705 Built-in validation</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#1-basic-usage-risk-2-with-50-pip-stop","title":"1) Basic usage - risk 2% with 50 pip stop","text":"<pre><code>// Risk exactly 2% of balance with 50 pip stop loss\nlotSize, err := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Recommended lot size: %.2f\\n\", lotSize)\n// Output: Recommended lot size: 0.04\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#2-complete-trade-setup-with-risk-management","title":"2) Complete trade setup with risk management","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nstopLossPips := 50.0\ntakeProfitPips := 100.0\n\n// Step 1: Calculate position size\nlotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLossPips)\nif err != nil {\n    fmt.Printf(\"Position size calculation failed: %v\\n\", err)\n    return\n}\n\n// Step 2: Validate we can open this position\ncanOpen, reason, err := sugar.CanOpenPosition(symbol, lotSize)\nif err != nil {\n    fmt.Printf(\"Validation failed: %v\\n\", err)\n    return\n}\nif !canOpen {\n    fmt.Printf(\"Cannot open position: %s\\n\", reason)\n    return\n}\n\n// Step 3: Open position\nticket, err := sugar.BuyMarketWithPips(symbol, lotSize, stopLossPips, takeProfitPips)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Order #%d opened with lot size %.2f\\n\", ticket, lotSize)\nfmt.Printf(\"   Risk: %.1f%% of balance (%.0f pips)\\n\", riskPercent, stopLossPips)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#3-conservative-vs-aggressive-risk-levels","title":"3) Conservative vs aggressive risk levels","text":"<pre><code>symbol := \"EURUSD\"\nstopLoss := 50.0\n\n// Conservative (1% risk)\nconservativeLots, _ := sugar.CalculatePositionSize(symbol, 1.0, stopLoss)\nfmt.Printf(\"Conservative (1%% risk): %.2f lots\\n\", conservativeLots)\n\n// Moderate (2% risk)\nmoderateLots, _ := sugar.CalculatePositionSize(symbol, 2.0, stopLoss)\nfmt.Printf(\"Moderate (2%% risk):     %.2f lots\\n\", moderateLots)\n\n// Aggressive (5% risk) - NOT RECOMMENDED!\naggressiveLots, _ := sugar.CalculatePositionSize(symbol, 5.0, stopLoss)\nfmt.Printf(\"Aggressive (5%% risk):   %.2f lots (\u26a0\ufe0f HIGH RISK!)\\n\", aggressiveLots)\n\n// Output:\n// Conservative (1% risk): 0.02 lots\n// Moderate (2% risk):     0.04 lots\n// Aggressive (5% risk):   0.10 lots (\u26a0\ufe0f HIGH RISK!)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#4-different-stop-loss-distances","title":"4) Different stop loss distances","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\n\n// Tight stop (25 pips) \u2192 larger position size\ntightSL, _ := sugar.CalculatePositionSize(symbol, riskPercent, 25)\nfmt.Printf(\"25 pip SL: %.2f lots\\n\", tightSL)\n\n// Normal stop (50 pips)\nnormalSL, _ := sugar.CalculatePositionSize(symbol, riskPercent, 50)\nfmt.Printf(\"50 pip SL: %.2f lots\\n\", normalSL)\n\n// Wide stop (100 pips) \u2192 smaller position size\nwideSL, _ := sugar.CalculatePositionSize(symbol, riskPercent, 100)\nfmt.Printf(\"100 pip SL: %.2f lots\\n\", wideSL)\n\n// Output (for $10,000 balance):\n// 25 pip SL: 0.08 lots\n// 50 pip SL: 0.04 lots\n// 100 pip SL: 0.02 lots\n//\n// Note: All risk exactly $200 (2% of $10,000)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#5-multi-symbol-portfolio-with-consistent-risk","title":"5) Multi-symbol portfolio with consistent risk","text":"<pre><code>riskPercent := 2.0\nstopLoss := 50.0\n\nsymbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"}\n\nfmt.Println(\"Consistent 2% risk across all symbols:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, symbol := range symbols {\n    lotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLoss)\n    if err != nil {\n        fmt.Printf(\"%s: Error - %v\\n\", symbol, err)\n        continue\n    }\n\n    fmt.Printf(\"%s: %.2f lots\\n\", symbol, lotSize)\n}\n\n// Output:\n// Consistent 2% risk across all symbols:\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// EURUSD: 0.04 lots\n// GBPUSD: 0.03 lots\n// USDJPY: 0.04 lots\n// XAUUSD: 0.20 lots\n//\n// Each position risks exactly the same $ amount\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#6-show-risk-amount-in-money","title":"6) Show risk amount in money","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nstopLoss := 50.0\n\n// Get balance\nbalance, _ := sugar.GetBalance()\n\n// Calculate position size\nlotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLoss)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\n// Calculate risk amount\nriskAmount := balance * riskPercent / 100.0\n\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"  RISK CALCULATION\\n\")\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"Symbol:        %s\\n\", symbol)\nfmt.Printf(\"Balance:       $%.2f\\n\", balance)\nfmt.Printf(\"Risk:          %.1f%% ($%.2f)\\n\", riskPercent, riskAmount)\nfmt.Printf(\"Stop Loss:     %.0f pips\\n\", stopLoss)\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"Lot Size:      %.2f\\n\", lotSize)\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\n\n// Output:\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n//   RISK CALCULATION\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Symbol:        EURUSD\n// Balance:       $10000.00\n// Risk:          2.0% ($200.00)\n// Stop Loss:     50 pips\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Lot Size:      0.04\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#7-account-growth-simulation","title":"7) Account growth simulation","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nstopLoss := 50.0\n\nbalances := []float64{1000, 5000, 10000, 50000, 100000}\n\nfmt.Println(\"Position sizing as account grows:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"%-12s  %-12s  %-12s\\n\", \"Balance\", \"Risk (2%)\", \"Lot Size\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, balance := range balances {\n    // Create temporary calculation (in real code you'd have different accounts)\n    riskAmount := balance * riskPercent / 100.0\n\n    // For demonstration, calculate approximate lot size\n    // In real code, use sugar.CalculatePositionSize()\n    approxLots := riskAmount / (stopLoss * 10.0) // Simplified\n\n    fmt.Printf(\"$%-11.2f  $%-11.2f  %.2f lots\\n\",\n        balance, riskAmount, approxLots)\n}\n\n// Output:\n// Position sizing as account grows:\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// Balance       Risk (2%)     Lot Size\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// $1000.00      $20.00        0.04 lots\n// $5000.00      $100.00       0.20 lots\n// $10000.00     $200.00       0.40 lots\n// $50000.00     $1000.00      2.00 lots\n// $100000.00    $2000.00      4.00 lots\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#8-validate-calculated-size-before-trading","title":"8) Validate calculated size before trading","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nstopLoss := 50.0\ntakeProfit := 100.0\n\n// Calculate position size\nlotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLoss)\nif err != nil {\n    fmt.Printf(\"\u274c Calculation failed: %v\\n\", err)\n    return\n}\n\n// Validate before trading\ncanOpen, reason, err := sugar.CanOpenPosition(symbol, lotSize)\nif err != nil {\n    fmt.Printf(\"\u274c Validation error: %v\\n\", err)\n    return\n}\n\nif !canOpen {\n    fmt.Printf(\"\u274c Cannot open position: %s\\n\", reason)\n    fmt.Printf(\"   Calculated lot size: %.2f\\n\", lotSize)\n    return\n}\n\n// All checks passed - open position\nfmt.Printf(\"\u2705 All checks passed\\n\")\nfmt.Printf(\"   Symbol:     %s\\n\", symbol)\nfmt.Printf(\"   Lot size:   %.2f\\n\", lotSize)\nfmt.Printf(\"   Stop Loss:  %.0f pips\\n\", stopLoss)\nfmt.Printf(\"   Take Profit: %.0f pips\\n\", takeProfit)\n\nticket, _ := sugar.BuyMarketWithPips(symbol, lotSize, stopLoss, takeProfit)\nfmt.Printf(\"   Ticket:     #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#9-handle-minimum-volume-edge-case","title":"9) Handle minimum volume edge case","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 0.5  // Very small risk\nstopLoss := 100.0   // Wide stop\n\nlotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLoss)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\n// Get symbol info to check minimum\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\nif lotSize &lt;= info.VolumeMin {\n    fmt.Printf(\"\u26a0\ufe0f  Calculated lot size (%.2f) is at minimum (%.2f)\\n\",\n        lotSize, info.VolumeMin)\n    fmt.Printf(\"   Consider:\\n\")\n    fmt.Printf(\"   - Increasing risk %% (currently %.1f%%)\\n\", riskPercent)\n    fmt.Printf(\"   - Reducing stop loss (currently %.0f pips)\\n\", stopLoss)\n    fmt.Printf(\"   - Trading on a larger account\\n\")\n} else {\n    fmt.Printf(\"\u2705 Lot size %.2f is valid (min: %.2f)\\n\", lotSize, info.VolumeMin)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#10-build-a-risk-calculator-tool","title":"10) Build a risk calculator tool","text":"<pre><code>func CalculateTradeRisk(symbol string, riskPercent, stopLossPips float64) {\n    // Get account info\n    balance, _ := sugar.GetBalance()\n\n    // Calculate position size\n    lotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLossPips)\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    // Calculate risk amount\n    riskAmount := balance * riskPercent / 100.0\n\n    // Calculate potential profit (if 1:2 R/R)\n    potentialProfit := riskAmount * 2.0\n\n    // Get current price\n    ask, _ := sugar.GetAsk(symbol)\n\n    // Calculate SL/TP prices\n    sl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, stopLossPips, stopLossPips*2)\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551             TRADE RISK CALCULATOR                     \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Println()\n    fmt.Printf(\"Symbol:           %s\\n\", symbol)\n    fmt.Printf(\"Current Price:    %.5f\\n\", ask)\n    fmt.Println()\n    fmt.Printf(\"Account Balance:  $%.2f\\n\", balance)\n    fmt.Printf(\"Risk Percent:     %.1f%%\\n\", riskPercent)\n    fmt.Printf(\"Risk Amount:      $%.2f\\n\", riskAmount)\n    fmt.Println()\n    fmt.Printf(\"Stop Loss:        %.0f pips (%.5f)\\n\", stopLossPips, sl)\n    fmt.Printf(\"Take Profit:      %.0f pips (%.5f)\\n\", stopLossPips*2, tp)\n    fmt.Printf(\"Risk/Reward:      1:2\\n\")\n    fmt.Println()\n    fmt.Printf(\"Lot Size:         %.2f\\n\", lotSize)\n    fmt.Printf(\"Potential Loss:   $%.2f (if SL hit)\\n\", riskAmount)\n    fmt.Printf(\"Potential Profit: $%.2f (if TP hit)\\n\", potentialProfit)\n    fmt.Println()\n}\n\n// Usage:\nCalculateTradeRisk(\"EURUSD\", 2.0, 50)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83d\udce6 Methods used internally:</p> <ul> <li><code>GetBalance()</code> - Get current account balance</li> <li><code>GetSymbolInfo()</code> - Get symbol specifications</li> <li><code>service.GetSymbolTick()</code> - Get current market price</li> </ul> <p>\ud83c\udf6c Complementary sugar methods:</p> <ul> <li><code>CanOpenPosition()</code> - Validate position before opening \u2b50</li> <li><code>GetMaxLotSize()</code> - Calculate maximum tradeable volume</li> <li><code>CalculateRequiredMargin()</code> - Calculate margin needed</li> <li><code>BuyMarketWithPips()</code> - Open BUY with calculated lot size</li> <li><code>SellMarketWithPips()</code> - Open SELL with calculated lot size</li> </ul> <p>Recommended workflow: <pre><code>// 1. Calculate position size\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n\n// 2. Validate\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", lotSize)\nif !canOpen {\n    fmt.Println(\"Cannot open:\", reason)\n    return\n}\n\n// 3. Trade\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre></p>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#1-using-fixed-lot-sizes-instead-of-calculated","title":"1) Using fixed lot sizes instead of calculated","text":"<pre><code>// \u274c WRONG - fixed lot size (ignores balance changes)\nticket, _ := sugar.BuyMarket(\"EURUSD\", 0.1)\n\n// \u2705 CORRECT - dynamic lot size based on risk\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nticket, _ := sugar.BuyMarket(\"EURUSD\", lotSize)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#2-confusing-pips-and-price","title":"2) Confusing pips and price","text":"<pre><code>// \u274c WRONG - passing price as stop loss\nslPrice := 1.08000\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, slPrice) // WRONG!\n\n// \u2705 CORRECT - stop loss in pips (points)\nstopLossPips := 50.0\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, stopLossPips)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#3-not-checking-for-errors","title":"3) Not checking for errors","text":"<pre><code>// \u274c WRONG - ignoring errors\nlotSize, _ := sugar.CalculatePositionSize(\"INVALID\", 2.0, 50)\nsugar.BuyMarket(\"INVALID\", lotSize) // Will fail!\n\n// \u2705 CORRECT - check errors\nlotSize, err := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#4-risking-too-much","title":"4) Risking too much","text":"<pre><code>// \u274c WRONG - risking 10% per trade (very dangerous!)\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 10.0, 50)\n\n// \u2705 CORRECT - professional risk management (1-2% max)\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#5-not-validating-before-trading","title":"5) Not validating before trading","text":"<pre><code>// \u274c WRONG - trading without validation\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nsugar.BuyMarket(\"EURUSD\", lotSize) // Might fail!\n\n// \u2705 CORRECT - validate first\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", lotSize)\nif !canOpen {\n    fmt.Println(\"Cannot trade:\", reason)\n    return\n}\nsugar.BuyMarket(\"EURUSD\", lotSize)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#6-calculating-manually-instead-of-using-sugar","title":"6) Calculating manually instead of using Sugar","text":"<pre><code>// \u274c WRONG - manual calculation (error-prone)\nbalance, _ := sugar.GetBalance()\nriskAmount := balance * 0.02\nlotSize := riskAmount / (50 * 10) // What about pip value? Volume step?\n\n// \u2705 CORRECT - use Sugar (handles everything)\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculatePositionSize/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>Always use 1-2% risk - Never more than 2% per trade</li> <li>Tighter SL = larger position - But don't use unrealistic stops</li> <li>Validate after calculating - Use <code>CanOpenPosition()</code></li> <li>Different symbols need different sizes - Don't copy lot sizes between symbols</li> <li>Account grows \u2192 position size grows - That's the power of this method!</li> <li>Check for minimum volume - Some brokers have high minimums</li> </ol> <p>See also: <code>CanOpenPosition.md</code>, <code>BuyMarketWithPips.md</code></p>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/","title":"\ud83d\udcb0 Calculate Required Margin (<code>CalculateRequiredMargin</code>)","text":"<p>Sugar method: Calculates how much margin is required to open a position of specified size.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.CalculateRequiredMargin(symbol, volume)</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>service.GetSymbolTick()</code>, <code>service.CalculateMargin()</code></li> <li>Timeout: 5 seconds</li> <li>Considers: Leverage, symbol specifications, current price</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) CalculateRequiredMargin(symbol string, volume float64) (float64, error)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1, 1.0, 5.0)"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>margin</code> <code>float64</code> Required margin amount in account currency <code>error</code> <code>error</code> Error if calculation fails"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Calculates margin needed to open a position BEFORE actually trading.</li> <li>Why you need it: Plan your trades, check if you have enough margin, manage account exposure.</li> <li>Sanity check: Considers leverage - higher leverage = less margin needed.</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Before trading - Check if you have enough margin</p> <p>\u2705 Position planning - Calculate total margin for multiple positions</p> <p>\u2705 Risk assessment - Understand margin exposure</p> <p>\u2705 Account management - Track margin utilization</p>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#how-margin-works","title":"\ud83d\udd22 How Margin Works","text":"<pre><code>Margin calculation depends on:\n\n1. Symbol contract size (e.g., EURUSD = 100,000 units)\n2. Current market price\n3. Lot size\n4. Account leverage (e.g., 1:100)\n\nFormula (simplified):\nMargin = (ContractSize \u00d7 Lots \u00d7 Price) / Leverage\n\nExample (EURUSD, 1:100 leverage):\n- Contract size: 100,000 EUR\n- Lot size: 1.0\n- Price: 1.10000\n- Leverage: 100\n\nMargin = (100,000 \u00d7 1.0 \u00d7 1.10000) / 100 = $1,100\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#1-basic-usage-calculate-margin-needed","title":"1) Basic usage - calculate margin needed","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 1.0\n\nmargin, err := sugar.CalculateRequiredMargin(symbol, volume)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Symbol:          %s\\n\", symbol)\nfmt.Printf(\"Lot size:        %.2f\\n\", volume)\nfmt.Printf(\"Required margin: $%.2f\\n\", margin)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#2-check-if-you-have-enough-margin","title":"2) Check if you have enough margin","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.5\n\n// Calculate required margin\nrequiredMargin, _ := sugar.CalculateRequiredMargin(symbol, volume)\n\n// Get current free margin\nfreeMargin, _ := sugar.GetFreeMargin()\n\nfmt.Printf(\"Required margin: $%.2f\\n\", requiredMargin)\nfmt.Printf(\"Free margin:     $%.2f\\n\", freeMargin)\n\nif requiredMargin &lt;= freeMargin {\n    fmt.Println(\"\u2705 Sufficient margin - can open position\")\n    ticket, _ := sugar.BuyMarket(symbol, volume)\n    fmt.Printf(\"Position #%d opened\\n\", ticket)\n} else {\n    deficit := requiredMargin - freeMargin\n    fmt.Printf(\"\u274c Insufficient margin (short $%.2f)\\n\", deficit)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#3-compare-margin-across-different-lot-sizes","title":"3) Compare margin across different lot sizes","text":"<pre><code>symbol := \"EURUSD\"\nlotSizes := []float64{0.01, 0.1, 0.5, 1.0, 5.0}\n\nfmt.Printf(\"Margin Requirements for %s:\\n\", symbol)\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"%-10s  %-15s\\n\", \"Lot Size\", \"Margin Needed\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, lotSize := range lotSizes {\n    margin, err := sugar.CalculateRequiredMargin(symbol, lotSize)\n    if err != nil {\n        fmt.Printf(\"%.2f lots  Error: %v\\n\", lotSize, err)\n        continue\n    }\n\n    fmt.Printf(\"%-10.2f  $%-14.2f\\n\", lotSize, margin)\n}\n\n// Output example:\n// Margin Requirements for EURUSD:\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// Lot Size    Margin Needed\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// 0.01        $11.00\n// 0.10        $110.00\n// 0.50        $550.00\n// 1.00        $1,100.00\n// 5.00        $5,500.00\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#4-calculate-total-margin-for-multiple-positions","title":"4) Calculate total margin for multiple positions","text":"<pre><code>type PositionPlan struct {\n    Symbol string\n    Volume float64\n}\n\nplans := []PositionPlan{\n    {\"EURUSD\", 0.5},\n    {\"GBPUSD\", 0.3},\n    {\"USDJPY\", 0.2},\n    {\"XAUUSD\", 0.1},\n}\n\nfmt.Println(\"Multi-Position Margin Calculation:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\ntotalMargin := 0.0\n\nfor _, plan := range plans {\n    margin, err := sugar.CalculateRequiredMargin(plan.Symbol, plan.Volume)\n    if err != nil {\n        fmt.Printf(\"%s %.2f lots: Error - %v\\n\",\n            plan.Symbol, plan.Volume, err)\n        continue\n    }\n\n    totalMargin += margin\n\n    fmt.Printf(\"%s %.2f lots: $%.2f\\n\",\n        plan.Symbol, plan.Volume, margin)\n}\n\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Total margin needed: $%.2f\\n\\n\", totalMargin)\n\n// Check if we can open all positions\nfreeMargin, _ := sugar.GetFreeMargin()\nfmt.Printf(\"Free margin:         $%.2f\\n\", freeMargin)\n\nif totalMargin &lt;= freeMargin {\n    fmt.Println(\"\u2705 Can open all positions\")\n} else {\n    shortfall := totalMargin - freeMargin\n    fmt.Printf(\"\u274c Short $%.2f for all positions\\n\", shortfall)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#5-margin-utilization-report","title":"5) Margin utilization report","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 1.0\n\n// Calculate required margin\nrequiredMargin, _ := sugar.CalculateRequiredMargin(symbol, volume)\n\n// Get account info\nbalance, _ := sugar.GetBalance()\nequity, _ := sugar.GetEquity()\nmargin, _ := sugar.GetMargin()\nfreeMargin, _ := sugar.GetFreeMargin()\n\n// Calculate utilization\ncurrentUtilization := (margin / equity) * 100\nnewUtilization := ((margin + requiredMargin) / equity) * 100\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      MARGIN UTILIZATION REPORT        \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Balance:          $%.2f\\n\", balance)\nfmt.Printf(\"Equity:           $%.2f\\n\", equity)\nfmt.Printf(\"Used margin:      $%.2f\\n\", margin)\nfmt.Printf(\"Free margin:      $%.2f\\n\\n\", freeMargin)\n\nfmt.Printf(\"Current usage:    %.1f%%\\n\", currentUtilization)\nfmt.Println()\n\nfmt.Printf(\"Planned position:\\n\")\nfmt.Printf(\"  Symbol:         %s\\n\", symbol)\nfmt.Printf(\"  Volume:         %.2f lots\\n\", volume)\nfmt.Printf(\"  Margin needed:  $%.2f\\n\\n\", requiredMargin)\n\nfmt.Printf(\"After opening:\\n\")\nfmt.Printf(\"  Total margin:   $%.2f\\n\", margin+requiredMargin)\nfmt.Printf(\"  Utilization:    %.1f%%\\n\", newUtilization)\n\nif newUtilization &gt; 80 {\n    fmt.Println(\"\\n\ud83d\udd34 DANGER: Very high margin usage!\")\n} else if newUtilization &gt; 50 {\n    fmt.Println(\"\\n\ud83d\udfe0 WARNING: High margin usage\")\n} else {\n    fmt.Println(\"\\n\u2705 Safe margin level\")\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#6-find-maximum-affordable-lot-size","title":"6) Find maximum affordable lot size","text":"<pre><code>func FindMaxAffordableLots(sugar *mt5.MT5Sugar, symbol string) (float64, error) {\n    freeMargin, err := sugar.GetFreeMargin()\n    if err != nil {\n        return 0, err\n    }\n\n    // Get symbol info for volume step\n    info, err := sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    // Binary search for max lot size\n    // Start with a reasonable estimate\n    testVolume := 1.0\n\n    // Find upper bound\n    for {\n        margin, _ := sugar.CalculateRequiredMargin(symbol, testVolume)\n        if margin &gt; freeMargin {\n            break\n        }\n        testVolume *= 2\n    }\n\n    // Binary search between 0 and testVolume\n    low := 0.0\n    high := testVolume\n    maxLots := 0.0\n\n    for i := 0; i &lt; 20; i++ { // 20 iterations should be enough\n        mid := (low + high) / 2.0\n\n        // Round to volume step\n        steps := int(mid / info.VolumeStep)\n        mid = float64(steps) * info.VolumeStep\n\n        margin, _ := sugar.CalculateRequiredMargin(symbol, mid)\n\n        if margin &lt;= freeMargin {\n            maxLots = mid\n            low = mid\n        } else {\n            high = mid\n        }\n    }\n\n    return maxLots, nil\n}\n\n// Usage:\nmaxLots, err := FindMaxAffordableLots(sugar, \"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n} else {\n    fmt.Printf(\"Maximum affordable lot size: %.2f\\n\", maxLots)\n\n    margin, _ := sugar.CalculateRequiredMargin(\"EURUSD\", maxLots)\n    freeMargin, _ := sugar.GetFreeMargin()\n\n    fmt.Printf(\"Would use: $%.2f of $%.2f free margin\\n\",\n        margin, freeMargin)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#7-compare-margin-across-symbols","title":"7) Compare margin across symbols","text":"<pre><code>volume := 1.0\nsymbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\", \"BTCUSD\"}\n\nfmt.Printf(\"Margin comparison (1.0 lot):\\n\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\ntype SymbolMargin struct {\n    Symbol string\n    Margin float64\n}\n\nmargins := []SymbolMargin{}\n\nfor _, symbol := range symbols {\n    margin, err := sugar.CalculateRequiredMargin(symbol, volume)\n    if err != nil {\n        fmt.Printf(\"%s: Error - %v\\n\", symbol, err)\n        continue\n    }\n\n    margins = append(margins, SymbolMargin{symbol, margin})\n}\n\n// Sort by margin (lowest to highest)\nsort.Slice(margins, func(i, j int) bool {\n    return margins[i].Margin &lt; margins[j].Margin\n})\n\nfor i, sm := range margins {\n    fmt.Printf(\"%d. %-8s: $%.2f\\n\", i+1, sm.Symbol, sm.Margin)\n}\n\n// Output example:\n// Margin comparison (1.0 lot):\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// 1. EURUSD:   $1,100.00\n// 2. USDJPY:   $1,200.00\n// 3. GBPUSD:   $1,300.00\n// 4. XAUUSD:   $2,000.00\n// 5. BTCUSD:   $5,000.00\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#8-margin-aware-position-sizer","title":"8) Margin-aware position sizer","text":"<pre><code>func CalculatePositionSizeWithMarginCheck(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    riskPercent float64,\n    stopLoss float64,\n) (float64, error) {\n    // Calculate risk-based size\n    riskBasedSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLoss)\n    if err != nil {\n        return 0, err\n    }\n\n    // Calculate margin needed\n    requiredMargin, err := sugar.CalculateRequiredMargin(symbol, riskBasedSize)\n    if err != nil {\n        return 0, err\n    }\n\n    // Check available margin\n    freeMargin, err := sugar.GetFreeMargin()\n    if err != nil {\n        return 0, err\n    }\n\n    fmt.Printf(\"Risk-based size: %.2f lots\\n\", riskBasedSize)\n    fmt.Printf(\"Margin needed:   $%.2f\\n\", requiredMargin)\n    fmt.Printf(\"Free margin:     $%.2f\\n\", freeMargin)\n\n    // If not enough margin, reduce size\n    if requiredMargin &gt; freeMargin {\n        // Get max affordable\n        maxLots, _ := sugar.GetMaxLotSize(symbol)\n\n        fmt.Printf(\"\u26a0\ufe0f  Insufficient margin - reducing to %.2f lots\\n\", maxLots)\n        return maxLots, nil\n    }\n\n    // Check if using too much margin (&gt;50%)\n    marginUsage := (requiredMargin / freeMargin) * 100\n    if marginUsage &gt; 50 {\n        reducedSize := riskBasedSize * 0.5\n        fmt.Printf(\"\u26a0\ufe0f  High margin usage (%.1f%%) - reducing to %.2f lots\\n\",\n            marginUsage, reducedSize)\n        return reducedSize, nil\n    }\n\n    fmt.Printf(\"\u2705 Margin OK (%.1f%% usage)\\n\", marginUsage)\n    return riskBasedSize, nil\n}\n\n// Usage:\nlotSize, err := CalculatePositionSizeWithMarginCheck(\n    sugar,\n    \"EURUSD\",\n    2.0,  // 2% risk\n    50.0, // 50 pip stop\n)\n\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n} else {\n    fmt.Printf(\"Final lot size: %.2f\\n\", lotSize)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#9-margin-stress-test","title":"9) Margin stress test","text":"<pre><code>func MarginStressTest(sugar *mt5.MT5Sugar, symbol string) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          MARGIN STRESS TEST                           \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    freeMargin, _ := sugar.GetFreeMargin()\n    fmt.Printf(\"Free margin: $%.2f\\n\\n\", freeMargin)\n\n    fmt.Printf(\"%-10s  %-15s  %-15s  %-10s\\n\",\n        \"Lot Size\", \"Margin Need\", \"Free After\", \"Usage %\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    lotSizes := []float64{0.1, 0.5, 1.0, 2.0, 5.0, 10.0}\n\n    for _, lotSize := range lotSizes {\n        margin, err := sugar.CalculateRequiredMargin(symbol, lotSize)\n        if err != nil {\n            fmt.Printf(\"%.2f lots: Error - %v\\n\", lotSize, err)\n            continue\n        }\n\n        freeAfter := freeMargin - margin\n        usagePercent := (margin / freeMargin) * 100\n\n        status := \"\"\n        if usagePercent &gt; 90 {\n            status = \" \ud83d\udd34 DANGER\"\n        } else if usagePercent &gt; 70 {\n            status = \" \ud83d\udfe0 HIGH\"\n        } else if usagePercent &gt; 50 {\n            status = \" \ud83d\udfe1 MODERATE\"\n        } else {\n            status = \" \u2705 SAFE\"\n        }\n\n        fmt.Printf(\"%-10.2f  $%-14.2f  $%-14.2f  %-10.1f%s\\n\",\n            lotSize, margin, freeAfter, usagePercent, status)\n\n        if freeAfter &lt; 0 {\n            break\n        }\n    }\n}\n\n// Usage:\nMarginStressTest(sugar, \"EURUSD\")\n\n// Output example:\n// \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n// \u2551          MARGIN STRESS TEST                           \u2551\n// \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n// Free margin: $10000.00\n//\n// Lot Size    Margin Need      Free After      Usage %\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// 0.10        $110.00          $9,890.00       1.1        \u2705 SAFE\n// 0.50        $550.00          $9,450.00       5.5        \u2705 SAFE\n// 1.00        $1,100.00        $8,900.00       11.0       \u2705 SAFE\n// 2.00        $2,200.00        $7,800.00       22.0       \u2705 SAFE\n// 5.00        $5,500.00        $4,500.00       55.0       \ud83d\udfe1 MODERATE\n// 10.00       $11,000.00       $-1,000.00      110.0      \ud83d\udd34 DANGER\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#10-advanced-margin-calculator","title":"10) Advanced margin calculator","text":"<pre><code>type MarginCalculator struct {\n    sugar *mt5.MT5Sugar\n}\n\nfunc NewMarginCalculator(sugar *mt5.MT5Sugar) *MarginCalculator {\n    return &amp;MarginCalculator{sugar: sugar}\n}\n\nfunc (mc *MarginCalculator) CalculateForPositions(\n    positions []struct {\n        Symbol string\n        Volume float64\n    },\n) (float64, map[string]float64, error) {\n    totalMargin := 0.0\n    breakdown := make(map[string]float64)\n\n    for _, pos := range positions {\n        margin, err := mc.sugar.CalculateRequiredMargin(pos.Symbol, pos.Volume)\n        if err != nil {\n            return 0, nil, fmt.Errorf(\"failed for %s: %w\", pos.Symbol, err)\n        }\n\n        totalMargin += margin\n        breakdown[pos.Symbol] = margin\n    }\n\n    return totalMargin, breakdown, nil\n}\n\nfunc (mc *MarginCalculator) GetMarginLeverage(symbol string, volume float64) (float64, error) {\n    // Calculate actual leverage being used\n    margin, err := mc.sugar.CalculateRequiredMargin(symbol, volume)\n    if err != nil {\n        return 0, err\n    }\n\n    info, err := mc.sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    // Position value = ContractSize * Volume * Price\n    positionValue := info.ContractSize * volume * info.Ask\n\n    // Leverage = Position Value / Margin\n    leverage := positionValue / margin\n\n    return leverage, nil\n}\n\nfunc (mc *MarginCalculator) ShowDetailedReport(symbol string, volume float64) {\n    margin, _ := mc.sugar.CalculateRequiredMargin(symbol, volume)\n    info, _ := mc.sugar.GetSymbolInfo(symbol)\n    leverage, _ := mc.GetMarginLeverage(symbol, volume)\n\n    positionValue := info.ContractSize * volume * info.Ask\n\n    freeMargin, _ := mc.sugar.GetFreeMargin()\n    balance, _ := mc.sugar.GetBalance()\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          MARGIN CALCULATION DETAILS                   \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Symbol:           %s\\n\", symbol)\n    fmt.Printf(\"Volume:           %.2f lots\\n\\n\", volume)\n\n    fmt.Println(\"Position Details:\")\n    fmt.Printf(\"  Contract size:  %.0f\\n\", info.ContractSize)\n    fmt.Printf(\"  Current price:  %.5f\\n\", info.Ask)\n    fmt.Printf(\"  Position value: $%.2f\\n\\n\", positionValue)\n\n    fmt.Println(\"Margin Calculation:\")\n    fmt.Printf(\"  Required:       $%.2f\\n\", margin)\n    fmt.Printf(\"  Leverage:       1:%.0f\\n\\n\", leverage)\n\n    fmt.Println(\"Account Status:\")\n    fmt.Printf(\"  Balance:        $%.2f\\n\", balance)\n    fmt.Printf(\"  Free margin:    $%.2f\\n\", freeMargin)\n\n    if margin &lt;= freeMargin {\n        marginUsage := (margin / freeMargin) * 100\n        fmt.Printf(\"\\n\u2705 Can open (%.1f%% of free margin)\\n\", marginUsage)\n    } else {\n        shortfall := margin - freeMargin\n        fmt.Printf(\"\\n\u274c Cannot open (short $%.2f)\\n\", shortfall)\n    }\n}\n\n// Usage:\ncalculator := NewMarginCalculator(sugar)\n\n// Show detailed report\ncalculator.ShowDetailedReport(\"EURUSD\", 1.0)\n\n// Calculate for multiple positions\npositions := []struct {\n    Symbol string\n    Volume float64\n}{\n    {\"EURUSD\", 0.5},\n    {\"GBPUSD\", 0.3},\n    {\"USDJPY\", 0.2},\n}\n\ntotalMargin, breakdown, _ := calculator.CalculateForPositions(positions)\n\nfmt.Printf(\"\\nTotal margin for all positions: $%.2f\\n\", totalMargin)\nfmt.Println(\"\\nBreakdown:\")\nfor symbol, margin := range breakdown {\n    fmt.Printf(\"  %s: $%.2f\\n\", symbol, margin)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83d\udce6 Methods used internally:</p> <ul> <li><code>service.GetSymbolTick()</code> - Get current price</li> <li><code>service.CalculateMargin()</code> - Perform margin calculation</li> </ul> <p>\ud83c\udf6c Complementary sugar methods:</p> <ul> <li><code>GetFreeMargin()</code> - Get available margin \u2b50</li> <li><code>GetMargin()</code> - Get currently used margin</li> <li><code>GetMaxLotSize()</code> - Calculate max affordable volume \u2b50</li> <li><code>CanOpenPosition()</code> - Validate if position can be opened \u2b50</li> <li><code>CalculatePositionSize()</code> - Calculate risk-based size</li> </ul> <p>Recommended workflow: <pre><code>// 1. Calculate position size\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n\n// 2. Check margin requirement\nmargin, _ := sugar.CalculateRequiredMargin(\"EURUSD\", lotSize)\nfreeMargin, _ := sugar.GetFreeMargin()\n\n// 3. Validate\nif margin &lt;= freeMargin {\n    canOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", lotSize)\n    if canOpen {\n        ticket, _ := sugar.BuyMarket(\"EURUSD\", lotSize)\n    }\n}\n</code></pre></p>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#1-not-checking-against-free-margin","title":"1) Not checking against free margin","text":"<pre><code>// \u274c WRONG - calculating but not checking\nmargin, _ := sugar.CalculateRequiredMargin(\"EURUSD\", 1.0)\nsugar.BuyMarket(\"EURUSD\", 1.0) // Might fail!\n\n// \u2705 CORRECT - check before trading\nmargin, _ := sugar.CalculateRequiredMargin(\"EURUSD\", 1.0)\nfreeMargin, _ := sugar.GetFreeMargin()\nif margin &lt;= freeMargin {\n    sugar.BuyMarket(\"EURUSD\", 1.0)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#2-confusing-with-balance","title":"2) Confusing with balance","text":"<pre><code>// \u274c WRONG - comparing with balance\nmargin, _ := sugar.CalculateRequiredMargin(\"EURUSD\", 1.0)\nbalance, _ := sugar.GetBalance()\nif margin &lt;= balance { // WRONG comparison!\n\n// \u2705 CORRECT - compare with free margin\nmargin, _ := sugar.CalculateRequiredMargin(\"EURUSD\", 1.0)\nfreeMargin, _ := sugar.GetFreeMargin()\nif margin &lt;= freeMargin { // CORRECT!\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#3-not-accounting-for-existing-positions","title":"3) Not accounting for existing positions","text":"<pre><code>// \u274c WRONG - only checking single position\nmargin, _ := sugar.CalculateRequiredMargin(\"EURUSD\", 1.0)\n// But you already have positions using margin!\n\n// \u2705 CORRECT - consider total exposure\nmargin, _ := sugar.CalculateRequiredMargin(\"EURUSD\", 1.0)\ncurrentMargin, _ := sugar.GetMargin()\nfreeMargin, _ := sugar.GetFreeMargin()\ntotalAfter := currentMargin + margin\nfmt.Printf(\"Total margin after: $%.2f\\n\", totalAfter)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#4-ignoring-leverage-changes","title":"4) Ignoring leverage changes","text":"<pre><code>// \u274c WRONG - assuming fixed margin calculation\n// Margin can change if broker adjusts leverage\n\n// \u2705 CORRECT - calculate right before trading\nmargin, _ := sugar.CalculateRequiredMargin(\"EURUSD\", 1.0)\n// Fresh calculation with current leverage\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#5-not-using-canopenposition-instead","title":"5) Not using CanOpenPosition instead","text":"<pre><code>// \u274c WRONG - manually checking everything\nmargin, _ := sugar.CalculateRequiredMargin(\"EURUSD\", 0.1)\nfreeMargin, _ := sugar.GetFreeMargin()\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\n// Check volume limits, margin, etc...\n\n// \u2705 CORRECT - use CanOpenPosition (does everything)\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", 0.1)\nif !canOpen {\n    fmt.Println(reason)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Always compare with free margin - Not balance or equity</p> </li> <li> <p>Calculate right before trading - Margin requirements can change</p> </li> <li> <p>Use CanOpenPosition for validation - It checks margin + other things</p> </li> <li> <p>Consider existing positions - Don't look at margins in isolation</p> </li> <li> <p>Different symbols, different margins - XAUUSD needs more than EURUSD</p> </li> <li> <p>Leverage matters - 1:100 vs 1:500 = big difference in margin</p> </li> <li> <p>Use for planning - Great for \"what-if\" scenarios</p> </li> </ol>"},{"location":"MT5Sugar/10.%20Risk_Management/CalculateRequiredMargin/#margin-vs-other-checks","title":"\ud83d\udcca Margin vs Other Checks","text":"<pre><code>This method:\n\u2705 Calculates margin requirement\n\u2705 Considers leverage\n\u2705 Uses current price\n\u274c Doesn't check free margin\n\u274c Doesn't validate volume limits\n\u274c Doesn't check symbol availability\n\nCanOpenPosition:\n\u2705 Everything this method does PLUS:\n\u2705 Checks free margin sufficiency\n\u2705 Validates volume limits\n\u2705 Checks symbol availability\n\u2705 Returns detailed reason if blocked\n\nUse this when: You only need the margin amount\nUse CanOpenPosition when: You want full validation\n</code></pre> <p>See also: <code>CanOpenPosition.md</code>, <code>GetMaxLotSize.md</code></p>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/","title":"\u2705 Can Open Position (<code>CanOpenPosition</code>)","text":"<p>Sugar method: Comprehensive validation check - verifies if you can open a position with specified volume BEFORE attempting to trade.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.CanOpenPosition(symbol, volume)</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>IsSymbolAvailable()</code>, <code>GetSymbolInfo()</code>, <code>GetFreeMargin()</code>, <code>service.CalculateMargin()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Three values (bool, string, error)</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) CanOpenPosition(symbol string, volume float64) (bool, string, error)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") <code>volume</code> <code>float64</code> Desired lot size (e.g., 0.1, 1.0)"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>can</code> <code>bool</code> <code>true</code> if position can be opened, <code>false</code> if not <code>reason</code> <code>string</code> Explanation if can't open (empty string if can open) <code>error</code> <code>error</code> Error if validation check itself failed <p>Return patterns: <pre><code>// Success - can open\n(true, \"\", nil)\n\n// Blocked - validation failed (not an error, just can't open)\n(false, \"insufficient margin: need 500.00, have 300.00\", nil)\n(false, \"volume 0.15 not a multiple of step 0.01\", nil)\n(false, \"symbol INVALID is not available\", nil)\n\n// Error - validation check failed\n(false, \"\", fmt.Errorf(\"connection timeout\"))\n</code></pre></p>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Pre-flight check before trading - validates EVERYTHING.</li> <li>Why you need it: ALWAYS call this before trading to avoid order rejections.</li> <li>Sanity check: Checks 6 things: symbol availability, volume limits, volume step, margin requirement, free margin sufficiency.</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#validation-checks-performed","title":"\ud83c\udfaf Validation Checks Performed","text":"<p>This method validates:</p> <ol> <li> <p>\u2705 Symbol availability - Is symbol tradeable?</p> </li> <li> <p>\u2705 Volume minimum - Is volume &gt;= VolumeMin?</p> </li> <li> <p>\u2705 Volume maximum - Is volume &lt;= VolumeMax?</p> </li> <li> <p>\u2705 Volume step - Is volume a multiple of VolumeStep?</p> </li> <li> <p>\u2705 Margin calculation - Can we calculate required margin?</p> </li> <li> <p>\u2705 Free margin - Do we have enough free margin?</p> </li> </ol> <p>If ANY check fails \u2192 returns (false, reason, nil)</p>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#1-basic-usage-validate-before-trading","title":"1) Basic usage - validate before trading","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\ncanOpen, reason, err := sugar.CanOpenPosition(symbol, volume)\nif err != nil {\n    fmt.Printf(\"Validation error: %v\\n\", err)\n    return\n}\n\nif !canOpen {\n    fmt.Printf(\"\u274c Cannot open position: %s\\n\", reason)\n    return\n}\n\nfmt.Println(\"\u2705 Validation passed - opening position...\")\nticket, _ := sugar.BuyMarket(symbol, volume)\nfmt.Printf(\"Position #%d opened\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#2-complete-trading-workflow-with-validation","title":"2) Complete trading workflow with validation","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nstopLoss := 50.0\ntakeProfit := 100.0\n\n// Step 1: Calculate position size\nlotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLoss)\nif err != nil {\n    fmt.Printf(\"Position size calculation failed: %v\\n\", err)\n    return\n}\n\n// Step 2: Validate BEFORE trading\ncanOpen, reason, err := sugar.CanOpenPosition(symbol, lotSize)\nif err != nil {\n    fmt.Printf(\"Validation error: %v\\n\", err)\n    return\n}\n\nif !canOpen {\n    fmt.Printf(\"\u274c Cannot open position: %s\\n\", reason)\n    fmt.Printf(\"   Symbol:   %s\\n\", symbol)\n    fmt.Printf(\"   Lot size: %.2f\\n\", lotSize)\n    return\n}\n\n// Step 3: All checks passed - safe to trade\nfmt.Println(\"\u2705 All validations passed\")\nticket, err := sugar.BuyMarketWithPips(symbol, lotSize, stopLoss, takeProfit)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Position #%d opened successfully\\n\", ticket)\nfmt.Printf(\"   Lot size: %.2f\\n\", lotSize)\nfmt.Printf(\"   SL: %.0f pips, TP: %.0f pips\\n\", stopLoss, takeProfit)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#3-handle-different-failure-reasons","title":"3) Handle different failure reasons","text":"<pre><code>func OpenPositionSafely(sugar *mt5.MT5Sugar, symbol string, volume float64) {\n    canOpen, reason, err := sugar.CanOpenPosition(symbol, volume)\n\n    if err != nil {\n        fmt.Printf(\"\ud83d\udd34 Validation check failed: %v\\n\", err)\n        return\n    }\n\n    if !canOpen {\n        // Parse the reason and provide helpful feedback\n        if strings.Contains(reason, \"margin\") {\n            fmt.Printf(\"\ud83d\udcb0 Insufficient margin: %s\\n\", reason)\n            fmt.Println(\"   \u2192 Reduce position size or close other positions\")\n        } else if strings.Contains(reason, \"minimum\") {\n            fmt.Printf(\"\ud83d\udcc9 Volume too small: %s\\n\", reason)\n            info, _ := sugar.GetSymbolInfo(symbol)\n            fmt.Printf(\"   \u2192 Minimum lot size: %.2f\\n\", info.VolumeMin)\n        } else if strings.Contains(reason, \"maximum\") {\n            fmt.Printf(\"\ud83d\udcc8 Volume too large: %s\\n\", reason)\n            info, _ := sugar.GetSymbolInfo(symbol)\n            fmt.Printf(\"   \u2192 Maximum lot size: %.2f\\n\", info.VolumeMax)\n        } else if strings.Contains(reason, \"step\") {\n            fmt.Printf(\"\u2699\ufe0f  Invalid volume step: %s\\n\", reason)\n            info, _ := sugar.GetSymbolInfo(symbol)\n            fmt.Printf(\"   \u2192 Volume must be multiple of %.2f\\n\", info.VolumeStep)\n        } else if strings.Contains(reason, \"available\") {\n            fmt.Printf(\"\u274c Symbol unavailable: %s\\n\", reason)\n            fmt.Println(\"   \u2192 Check symbol name or market hours\")\n        } else {\n            fmt.Printf(\"\u26a0\ufe0f  Cannot open: %s\\n\", reason)\n        }\n        return\n    }\n\n    // Validation passed - open position\n    fmt.Println(\"\u2705 Opening position...\")\n    ticket, _ := sugar.BuyMarket(symbol, volume)\n    fmt.Printf(\"   Position #%d opened\\n\", ticket)\n}\n\n// Usage:\nOpenPositionSafely(sugar, \"EURUSD\", 0.1)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#4-validate-multiple-positions-before-batch-trading","title":"4) Validate multiple positions before batch trading","text":"<pre><code>type TradeRequest struct {\n    Symbol string\n    Volume float64\n}\n\nfunc ValidateMultiplePositions(\n    sugar *mt5.MT5Sugar,\n    requests []TradeRequest,\n) []TradeRequest {\n    validRequests := []TradeRequest{}\n\n    fmt.Println(\"Validating positions...\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    for i, req := range requests {\n        canOpen, reason, err := sugar.CanOpenPosition(req.Symbol, req.Volume)\n\n        if err != nil {\n            fmt.Printf(\"%d. %s %.2f lots - \u26a0\ufe0f  Error: %v\\n\",\n                i+1, req.Symbol, req.Volume, err)\n            continue\n        }\n\n        if !canOpen {\n            fmt.Printf(\"%d. %s %.2f lots - \u274c %s\\n\",\n                i+1, req.Symbol, req.Volume, reason)\n            continue\n        }\n\n        fmt.Printf(\"%d. %s %.2f lots - \u2705 Valid\\n\",\n            i+1, req.Symbol, req.Volume)\n        validRequests = append(validRequests, req)\n    }\n\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Valid: %d/%d positions\\n\", len(validRequests), len(requests))\n\n    return validRequests\n}\n\n// Usage:\nrequests := []TradeRequest{\n    {\"EURUSD\", 0.1},\n    {\"GBPUSD\", 0.2},\n    {\"USDJPY\", 0.15},\n    {\"INVALID\", 0.1},\n}\n\nvalidRequests := ValidateMultiplePositions(sugar, requests)\n\n// Open only valid positions\nfor _, req := range validRequests {\n    ticket, _ := sugar.BuyMarket(req.Symbol, req.Volume)\n    fmt.Printf(\"Opened %s: #%d\\n\", req.Symbol, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#5-pre-trade-checklist-display","title":"5) Pre-trade checklist display","text":"<pre><code>func ShowPreTradeChecklist(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    volume float64,\n) bool {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      PRE-TRADE VALIDATION CHECK       \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Symbol:     %s\\n\", symbol)\n    fmt.Printf(\"Lot size:   %.2f\\n\\n\", volume)\n\n    // Check symbol availability\n    available, _ := sugar.IsSymbolAvailable(symbol)\n    if available {\n        fmt.Println(\"\u2705 Symbol available\")\n    } else {\n        fmt.Println(\"\u274c Symbol not available\")\n        return false\n    }\n\n    // Get symbol info\n    info, _ := sugar.GetSymbolInfo(symbol)\n\n    // Check volume minimum\n    if volume &gt;= info.VolumeMin {\n        fmt.Printf(\"\u2705 Volume &gt;= minimum (%.2f)\\n\", info.VolumeMin)\n    } else {\n        fmt.Printf(\"\u274c Volume &lt; minimum (%.2f)\\n\", info.VolumeMin)\n        return false\n    }\n\n    // Check volume maximum\n    if volume &lt;= info.VolumeMax {\n        fmt.Printf(\"\u2705 Volume &lt;= maximum (%.2f)\\n\", info.VolumeMax)\n    } else {\n        fmt.Printf(\"\u274c Volume &gt; maximum (%.2f)\\n\", info.VolumeMax)\n        return false\n    }\n\n    // Check volume step\n    steps := volume / info.VolumeStep\n    if steps == float64(int(steps)) {\n        fmt.Printf(\"\u2705 Volume is multiple of step (%.2f)\\n\", info.VolumeStep)\n    } else {\n        fmt.Printf(\"\u274c Volume not multiple of step (%.2f)\\n\", info.VolumeStep)\n        return false\n    }\n\n    // Check margin\n    requiredMargin, _ := sugar.CalculateRequiredMargin(symbol, volume)\n    freeMargin, _ := sugar.GetFreeMargin()\n\n    fmt.Printf(\"   Required margin: $%.2f\\n\", requiredMargin)\n    fmt.Printf(\"   Free margin:     $%.2f\\n\", freeMargin)\n\n    if requiredMargin &lt;= freeMargin {\n        fmt.Println(\"\u2705 Sufficient margin\")\n    } else {\n        fmt.Println(\"\u274c Insufficient margin\")\n        return false\n    }\n\n    fmt.Println(\"\\n\u2705 ALL CHECKS PASSED - Ready to trade!\")\n    return true\n}\n\n// Usage:\nif ShowPreTradeChecklist(sugar, \"EURUSD\", 0.1) {\n    ticket, _ := sugar.BuyMarket(\"EURUSD\", 0.1)\n    fmt.Printf(\"\\nPosition opened: #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#6-retry-with-adjusted-volume","title":"6) Retry with adjusted volume","text":"<pre><code>func OpenPositionWithAdjustment(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    initialVolume float64,\n) (uint64, error) {\n    volume := initialVolume\n\n    // Try with initial volume\n    canOpen, reason, err := sugar.CanOpenPosition(symbol, volume)\n    if err != nil {\n        return 0, err\n    }\n\n    if canOpen {\n        fmt.Printf(\"\u2705 Opening %.2f lots...\\n\", volume)\n        return sugar.BuyMarket(symbol, volume)\n    }\n\n    // If insufficient margin, try with reduced volume\n    if strings.Contains(reason, \"margin\") {\n        fmt.Printf(\"\u26a0\ufe0f  Insufficient margin for %.2f lots\\n\", volume)\n\n        // Get max capacity\n        maxLots, _ := sugar.GetMaxLotSize(symbol)\n        if maxLots == 0 {\n            return 0, fmt.Errorf(\"no margin available\")\n        }\n\n        // Try with max capacity\n        volume = maxLots\n        fmt.Printf(\"   Trying with reduced volume: %.2f lots\\n\", volume)\n\n        canOpen, reason, err = sugar.CanOpenPosition(symbol, volume)\n        if err != nil {\n            return 0, err\n        }\n\n        if canOpen {\n            return sugar.BuyMarket(symbol, volume)\n        }\n    }\n\n    return 0, fmt.Errorf(\"cannot open position: %s\", reason)\n}\n\n// Usage:\nticket, err := OpenPositionWithAdjustment(sugar, \"EURUSD\", 1.0)\nif err != nil {\n    fmt.Printf(\"Failed: %v\\n\", err)\n} else {\n    fmt.Printf(\"Success: #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#7-comprehensive-validation-wrapper","title":"7) Comprehensive validation wrapper","text":"<pre><code>type ValidationResult struct {\n    CanOpen       bool\n    Reason        string\n    RequiredMargin float64\n    FreeMargin     float64\n    MarginRatio    float64\n}\n\nfunc ValidatePositionDetailed(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    volume float64,\n) (*ValidationResult, error) {\n    result := &amp;ValidationResult{}\n\n    // Run validation\n    canOpen, reason, err := sugar.CanOpenPosition(symbol, volume)\n    if err != nil {\n        return nil, err\n    }\n\n    result.CanOpen = canOpen\n    result.Reason = reason\n\n    // Get margin details\n    requiredMargin, _ := sugar.CalculateRequiredMargin(symbol, volume)\n    freeMargin, _ := sugar.GetFreeMargin()\n\n    result.RequiredMargin = requiredMargin\n    result.FreeMargin = freeMargin\n\n    if freeMargin &gt; 0 {\n        result.MarginRatio = (requiredMargin / freeMargin) * 100\n    }\n\n    return result, nil\n}\n\nfunc ShowValidationReport(result *ValidationResult, symbol string, volume float64) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          POSITION VALIDATION REPORT                   \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Symbol:            %s\\n\", symbol)\n    fmt.Printf(\"Desired volume:    %.2f lots\\n\\n\", volume)\n\n    fmt.Printf(\"Required margin:   $%.2f\\n\", result.RequiredMargin)\n    fmt.Printf(\"Available margin:  $%.2f\\n\", result.FreeMargin)\n    fmt.Printf(\"Margin usage:      %.1f%%\\n\\n\", result.MarginRatio)\n\n    if result.CanOpen {\n        fmt.Println(\"\u2705 VALIDATION PASSED\")\n        fmt.Println(\"   Position can be opened\")\n\n        if result.MarginRatio &gt; 70 {\n            fmt.Println(\"\\n\u26a0\ufe0f  Warning: High margin usage (&gt;70%)\")\n            fmt.Println(\"   Consider reducing position size\")\n        }\n    } else {\n        fmt.Println(\"\u274c VALIDATION FAILED\")\n        fmt.Printf(\"   Reason: %s\\n\", result.Reason)\n    }\n}\n\n// Usage:\nresult, err := ValidatePositionDetailed(sugar, \"EURUSD\", 0.5)\nif err != nil {\n    fmt.Printf(\"Validation error: %v\\n\", err)\n    return\n}\n\nShowValidationReport(result, \"EURUSD\", 0.5)\n\nif result.CanOpen {\n    ticket, _ := sugar.BuyMarket(\"EURUSD\", 0.5)\n    fmt.Printf(\"\\nPosition opened: #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#8-margin-safety-validator","title":"8) Margin safety validator","text":"<pre><code>func ValidateWithMarginSafety(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    volume float64,\n    maxMarginPercent float64,\n) (bool, string) {\n    // First, standard validation\n    canOpen, reason, err := sugar.CanOpenPosition(symbol, volume)\n    if err != nil {\n        return false, fmt.Sprintf(\"validation error: %v\", err)\n    }\n\n    if !canOpen {\n        return false, reason\n    }\n\n    // Additional check: margin usage threshold\n    requiredMargin, _ := sugar.CalculateRequiredMargin(symbol, volume)\n    freeMargin, _ := sugar.GetFreeMargin()\n\n    marginUsage := (requiredMargin / freeMargin) * 100\n\n    if marginUsage &gt; maxMarginPercent {\n        return false, fmt.Sprintf(\n            \"margin usage %.1f%% exceeds limit %.1f%%\",\n            marginUsage, maxMarginPercent,\n        )\n    }\n\n    return true, \"\"\n}\n\n// Usage with 50% margin limit:\ncanOpen, reason := ValidateWithMarginSafety(sugar, \"EURUSD\", 0.5, 50.0)\nif !canOpen {\n    fmt.Printf(\"\u274c Cannot open: %s\\n\", reason)\n} else {\n    fmt.Println(\"\u2705 Validation passed with margin safety check\")\n    ticket, _ := sugar.BuyMarket(\"EURUSD\", 0.5)\n    fmt.Printf(\"Position opened: #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#9-batch-validation-with-statistics","title":"9) Batch validation with statistics","text":"<pre><code>func BatchValidateAndReport(sugar *mt5.MT5Sugar, requests []TradeRequest) {\n    passCount := 0\n    failCount := 0\n    errorCount := 0\n\n    failureReasons := make(map[string]int)\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          BATCH VALIDATION REPORT                      \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Total requests: %d\\n\\n\", len(requests))\n\n    for i, req := range requests {\n        canOpen, reason, err := sugar.CanOpenPosition(req.Symbol, req.Volume)\n\n        status := \"\"\n        if err != nil {\n            status = fmt.Sprintf(\"\u26a0\ufe0f  Error: %v\", err)\n            errorCount++\n        } else if canOpen {\n            status = \"\u2705 Pass\"\n            passCount++\n        } else {\n            status = fmt.Sprintf(\"\u274c %s\", reason)\n            failCount++\n\n            // Track failure reason\n            failureReasons[reason]++\n        }\n\n        fmt.Printf(\"%d. %s %.2f lots - %s\\n\",\n            i+1, req.Symbol, req.Volume, status)\n    }\n\n    fmt.Println(\"\\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"\u2705 Passed:  %d (%.1f%%)\\n\",\n        passCount, float64(passCount)/float64(len(requests))*100)\n    fmt.Printf(\"\u274c Failed:  %d (%.1f%%)\\n\",\n        failCount, float64(failCount)/float64(len(requests))*100)\n    fmt.Printf(\"\u26a0\ufe0f  Errors: %d\\n\", errorCount)\n\n    if len(failureReasons) &gt; 0 {\n        fmt.Println(\"\\nFailure breakdown:\")\n        for reason, count := range failureReasons {\n            fmt.Printf(\"  \u2022 %s: %d times\\n\", reason, count)\n        }\n    }\n}\n\n// Usage:\nrequests := []TradeRequest{\n    {\"EURUSD\", 0.1},\n    {\"GBPUSD\", 0.2},\n    {\"USDJPY\", 100.0}, // Too large\n    {\"INVALID\", 0.1},  // Invalid symbol\n    {\"XAUUSD\", 0.01},\n}\n\nBatchValidateAndReport(sugar, requests)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#10-advanced-position-validator","title":"10) Advanced position validator","text":"<pre><code>type PositionValidator struct {\n    sugar                *mt5.MT5Sugar\n    maxMarginUsagePercent float64\n    maxPositions         int\n}\n\nfunc NewPositionValidator(\n    sugar *mt5.MT5Sugar,\n    maxMarginPercent float64,\n    maxPositions int,\n) *PositionValidator {\n    return &amp;PositionValidator{\n        sugar:                sugar,\n        maxMarginUsagePercent: maxMarginPercent,\n        maxPositions:         maxPositions,\n    }\n}\n\nfunc (pv *PositionValidator) Validate(\n    symbol string,\n    volume float64,\n) (bool, string, error) {\n    // Check 1: Standard validation\n    canOpen, reason, err := pv.sugar.CanOpenPosition(symbol, volume)\n    if err != nil {\n        return false, \"\", err\n    }\n\n    if !canOpen {\n        return false, reason, nil\n    }\n\n    // Check 2: Maximum positions limit\n    posCount, _ := pv.sugar.GetOpenPositionsCount()\n    if posCount &gt;= pv.maxPositions {\n        return false, fmt.Sprintf(\n            \"maximum positions reached (%d/%d)\",\n            posCount, pv.maxPositions,\n        ), nil\n    }\n\n    // Check 3: Margin usage threshold\n    requiredMargin, _ := pv.sugar.CalculateRequiredMargin(symbol, volume)\n    freeMargin, _ := pv.sugar.GetFreeMargin()\n\n    marginUsage := (requiredMargin / freeMargin) * 100\n\n    if marginUsage &gt; pv.maxMarginUsagePercent {\n        return false, fmt.Sprintf(\n            \"margin usage %.1f%% exceeds limit %.1f%%\",\n            marginUsage, pv.maxMarginUsagePercent,\n        ), nil\n    }\n\n    // Check 4: Symbol not already in portfolio (optional rule)\n    openPositions, _ := pv.sugar.GetOpenPositions()\n    for _, pos := range openPositions {\n        if pos.Symbol == symbol {\n            return false, fmt.Sprintf(\n                \"position already exists for %s (ticket #%d)\",\n                symbol, pos.Ticket,\n            ), nil\n        }\n    }\n\n    return true, \"\", nil\n}\n\nfunc (pv *PositionValidator) ValidateAndExecute(\n    symbol string,\n    volume float64,\n    direction string,\n) (uint64, error) {\n    canOpen, reason, err := pv.Validate(symbol, volume)\n    if err != nil {\n        return 0, fmt.Errorf(\"validation error: %w\", err)\n    }\n\n    if !canOpen {\n        return 0, fmt.Errorf(\"validation failed: %s\", reason)\n    }\n\n    // Execute trade\n    if direction == \"BUY\" {\n        return pv.sugar.BuyMarket(symbol, volume)\n    } else {\n        return pv.sugar.SellMarket(symbol, volume)\n    }\n}\n\nfunc (pv *PositionValidator) ShowRules() {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      POSITION VALIDATOR RULES         \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Max margin usage:  %.1f%%\\n\", pv.maxMarginUsagePercent)\n    fmt.Printf(\"Max positions:     %d\\n\", pv.maxPositions)\n    fmt.Println(\"Symbol uniqueness: Enforced\")\n    fmt.Println(\"Broker limits:     Enforced\")\n}\n\n// Usage:\nvalidator := NewPositionValidator(sugar, 50.0, 5)\nvalidator.ShowRules()\n\n// Validate and execute\nticket, err := validator.ValidateAndExecute(\"EURUSD\", 0.1, \"BUY\")\nif err != nil {\n    fmt.Printf(\"Failed: %v\\n\", err)\n} else {\n    fmt.Printf(\"\u2705 Position opened: #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83d\udce6 Methods used internally:</p> <ul> <li><code>IsSymbolAvailable()</code> - Check symbol is tradeable</li> <li><code>GetSymbolInfo()</code> - Get volume limits</li> <li><code>GetFreeMargin()</code> - Get available margin</li> <li><code>service.CalculateMargin()</code> - Calculate required margin</li> </ul> <p>\ud83c\udf6c Complementary sugar methods:</p> <ul> <li><code>CalculatePositionSize()</code> - Calculate risk-based lot size \u2b50</li> <li><code>GetMaxLotSize()</code> - Get maximum tradeable volume</li> <li><code>CalculateRequiredMargin()</code> - Get margin needed</li> <li><code>BuyMarket() / SellMarket()</code> - Execute trades after validation</li> </ul> <p>Recommended workflow: <pre><code>// 1. Calculate lot size\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n\n// 2. ALWAYS validate before trading\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", lotSize)\nif !canOpen {\n    fmt.Println(\"Cannot trade:\", reason)\n    return\n}\n\n// 3. Trade\nticket, _ := sugar.BuyMarket(\"EURUSD\", lotSize)\n</code></pre></p>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#1-not-calling-before-trading","title":"1) Not calling before trading","text":"<pre><code>// \u274c WRONG - trading without validation\nticket, _ := sugar.BuyMarket(\"EURUSD\", 0.1)\n// Order might get rejected!\n\n// \u2705 CORRECT - validate first\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", 0.1)\nif !canOpen {\n    fmt.Println(\"Cannot trade:\", reason)\n    return\n}\nticket, _ := sugar.BuyMarket(\"EURUSD\", 0.1)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#2-ignoring-the-reason-when-false","title":"2) Ignoring the reason when false","text":"<pre><code>// \u274c WRONG - not checking why it failed\ncanOpen, _, _ := sugar.CanOpenPosition(\"EURUSD\", 0.1)\nif !canOpen {\n    fmt.Println(\"Can't trade\") // Not helpful!\n}\n\n// \u2705 CORRECT - use the reason\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", 0.1)\nif !canOpen {\n    fmt.Printf(\"Can't trade: %s\\n\", reason) // Informative!\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#3-confusing-error-vs-blocked","title":"3) Confusing error vs blocked","text":"<pre><code>// \u274c WRONG - treating blocked as error\ncanOpen, reason, err := sugar.CanOpenPosition(\"EURUSD\", 0.1)\nif err != nil || !canOpen {\n    // These are different things!\n}\n\n// \u2705 CORRECT - handle separately\ncanOpen, reason, err := sugar.CanOpenPosition(\"EURUSD\", 0.1)\nif err != nil {\n    // Actual error - validation check failed\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\nif !canOpen {\n    // Not an error - just can't open (with reason why)\n    fmt.Printf(\"Blocked: %s\\n\", reason)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#4-not-checking-error-return","title":"4) Not checking error return","text":"<pre><code>// \u274c WRONG - ignoring error\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", 0.1)\n\n// \u2705 CORRECT - check error\ncanOpen, reason, err := sugar.CanOpenPosition(\"EURUSD\", 0.1)\nif err != nil {\n    fmt.Printf(\"Validation error: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#5-validating-but-not-using-result","title":"5) Validating but not using result","text":"<pre><code>// \u274c WRONG - validating but ignoring result\nsugar.CanOpenPosition(\"EURUSD\", 0.1)\nsugar.BuyMarket(\"EURUSD\", 0.1) // Might still fail!\n\n// \u2705 CORRECT - use validation result\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", 0.1)\nif !canOpen {\n    fmt.Println(\"Cannot trade:\", reason)\n    return\n}\nsugar.BuyMarket(\"EURUSD\", 0.1)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>ALWAYS call this - Make it mandatory before every trade</p> </li> <li> <p>Check all three returns - (bool, string, error) all matter</p> </li> <li> <p>Use the reason - Provides specific feedback on what's wrong</p> </li> <li> <p>False \u2260 Error - <code>false</code> means \"can't open\" (not a system error)</p> </li> <li> <p>Validate calculated sizes - Even CalculatePositionSize() results should be validated</p> </li> <li> <p>Fast check - Lightweight, no trade execution, safe to call frequently</p> </li> <li> <p>Multi-check - Validates 6 different things in one call</p> </li> </ol>"},{"location":"MT5Sugar/10.%20Risk_Management/CanOpenPosition/#return-value-meanings","title":"\ud83d\udcca Return Value Meanings","text":"<pre><code>Three return values:\n\n(true, \"\", nil)\n\u2192 \u2705 All checks passed, safe to trade\n\n(false, \"reason\", nil)\n\u2192 \u274c Can't open (not an error, just blocked)\n\u2192 \"reason\" explains what's wrong\n\n(false, \"\", error)\n\u2192 \ud83d\udd34 Validation check itself failed\n\u2192 System error, not a trading validation issue\n\nCommon reasons when false:\n- \"insufficient margin: need X, have Y\"\n- \"volume X below minimum Y\"\n- \"volume X exceeds maximum Y\"\n- \"volume X not a multiple of step Y\"\n- \"symbol X is not available\"\n</code></pre> <p>See also: <code>CalculatePositionSize.md</code>, <code>GetMaxLotSize.md</code>, <code>CalculateRequiredMargin.md</code></p>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/","title":"\ud83d\udcca Get Maximum Lot Size (<code>GetMaxLotSize</code>)","text":"<p>Sugar method: Calculates the maximum lot size you can open based on your current free margin.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetMaxLotSize(symbol)</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>GetFreeMargin()</code>, <code>GetSymbolInfo()</code>, <code>service.CalculateMargin()</code></li> <li>Timeout: 5 seconds</li> <li>Safety buffer: Uses 80% of free margin (20% buffer to prevent margin calls)</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetMaxLotSize(symbol string) (float64, error)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\")"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>maxLots</code> <code>float64</code> Maximum safe lot size you can trade <code>error</code> <code>error</code> Error if calculation fails <p>Special cases:</p> <ul> <li>Returns <code>0.0</code> (no error) if you don't have enough margin even for minimum lot</li> <li>Already rounded to symbol's <code>VolumeStep</code></li> <li>Already clamped between <code>VolumeMin</code> and <code>VolumeMax</code></li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Calculates how much you can trade based on available margin.</li> <li>Why you need it: Prevents margin calls, shows your maximum trading capacity.</li> <li>Sanity check: Uses 80% of free margin (keeps 20% buffer for safety).</li> </ul>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Check trading capacity - See max position size before trading</p> <p>\u2705 Prevent margin calls - Ensure you don't over-leverage</p> <p>\u2705 Multi-position planning - Calculate if you can open multiple positions</p> <p>\u2705 Account stress testing - Understand your maximum exposure</p>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#how-it-works","title":"\ud83d\udd22 How It Works","text":"<pre><code>Step 1: Get your free margin (e.g., $5,000)\nStep 2: Calculate margin required for 1 lot of the symbol\nStep 3: Apply safety buffer (80% of free margin)\nStep 4: Calculate: maxLots = (freeMargin \u00d7 0.8) / marginPerLot\nStep 5: Round down to VolumeStep\nStep 6: Clamp to VolumeMin/VolumeMax\n\nExample:\n- Free margin: $5,000\n- Margin per lot: $500 (for EURUSD with 1:100 leverage)\n- Safety margin: $5,000 \u00d7 0.8 = $4,000\n- Max lots: $4,000 / $500 = 8.0 lots\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#1-basic-usage-check-max-capacity","title":"1) Basic usage - check max capacity","text":"<pre><code>maxLots, err := sugar.GetMaxLotSize(\"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif maxLots == 0 {\n    fmt.Println(\"\u274c Insufficient margin - cannot open any position\")\n} else {\n    fmt.Printf(\"\u2705 Maximum lot size: %.2f lots\\n\", maxLots)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#2-safe-position-sizing","title":"2) Safe position sizing","text":"<pre><code>symbol := \"EURUSD\"\n\n// Get maximum capacity\nmaxLots, _ := sugar.GetMaxLotSize(symbol)\n\n// Use only 50% of max capacity for safety\nsafeLots := maxLots * 0.5\n\nfmt.Printf(\"Maximum capacity:  %.2f lots\\n\", maxLots)\nfmt.Printf(\"Safe position:     %.2f lots (50%% of max)\\n\", safeLots)\n\n// Trade with safe size\nif safeLots &gt;= 0.01 {\n    ticket, _ := sugar.BuyMarket(symbol, safeLots)\n    fmt.Printf(\"Opened position #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#3-multi-position-planning","title":"3) Multi-position planning","text":"<pre><code>symbol := \"EURUSD\"\nnumPositions := 3\n\n// Get max capacity\nmaxLots, _ := sugar.GetMaxLotSize(symbol)\n\n// Divide among positions\nlotsPerPosition := maxLots / float64(numPositions)\n\n// Round to symbol's step\ninfo, _ := sugar.GetSymbolInfo(symbol)\nsteps := int(lotsPerPosition / info.VolumeStep)\nlotsPerPosition = float64(steps) * info.VolumeStep\n\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"MULTI-POSITION PLANNING\\n\")\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"Max capacity:      %.2f lots\\n\", maxLots)\nfmt.Printf(\"Desired positions: %d\\n\", numPositions)\nfmt.Printf(\"Lots per position: %.2f lots\\n\", lotsPerPosition)\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\n\nif lotsPerPosition &gt;= info.VolumeMin {\n    fmt.Println(\"\u2705 Can open all positions\")\n} else {\n    fmt.Println(\"\u274c Insufficient margin for desired setup\")\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#4-compare-calculated-size-vs-max-capacity","title":"4) Compare calculated size vs max capacity","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nstopLoss := 50.0\n\n// Get risk-based position size\ncalculatedLots, _ := sugar.CalculatePositionSize(symbol, riskPercent, stopLoss)\n\n// Get maximum capacity\nmaxLots, _ := sugar.GetMaxLotSize(symbol)\n\nfmt.Printf(\"Risk-based size: %.2f lots\\n\", calculatedLots)\nfmt.Printf(\"Max capacity:    %.2f lots\\n\", maxLots)\n\nif calculatedLots &gt; maxLots {\n    fmt.Printf(\"\u26a0\ufe0f  Warning: Risk-based size (%.2f) exceeds capacity (%.2f)!\\n\",\n        calculatedLots, maxLots)\n    fmt.Printf(\"   Using maximum: %.2f lots\\n\", maxLots)\n    calculatedLots = maxLots\n} else {\n    usagePercent := (calculatedLots / maxLots) * 100\n    fmt.Printf(\"\u2705 Using %.1f%% of capacity\\n\", usagePercent)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#5-margin-utilization-report","title":"5) Margin utilization report","text":"<pre><code>symbol := \"EURUSD\"\n\n// Get account info\nfreeMargin, _ := sugar.GetFreeMargin()\nmargin, _ := sugar.GetMargin()\nbalance, _ := sugar.GetBalance()\n\n// Get max lot size\nmaxLots, _ := sugar.GetMaxLotSize(symbol)\n\n// Calculate margin for max position\nrequiredForMax, _ := sugar.CalculateRequiredMargin(symbol, maxLots)\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      MARGIN UTILIZATION REPORT        \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Balance:           $%.2f\\n\", balance)\nfmt.Printf(\"Used margin:       $%.2f\\n\", margin)\nfmt.Printf(\"Free margin:       $%.2f\\n\", freeMargin)\nfmt.Println()\nfmt.Printf(\"Symbol:            %s\\n\", symbol)\nfmt.Printf(\"Max lot size:      %.2f lots\\n\", maxLots)\nfmt.Printf(\"Margin for max:    $%.2f (80%% buffer)\\n\", requiredForMax)\nfmt.Println()\n\nutilization := (margin / balance) * 100\nfmt.Printf(\"Current usage:     %.1f%% of balance\\n\", utilization)\n\nif utilization &gt; 50 {\n    fmt.Println(\"\u26a0\ufe0f  High margin usage - reduce positions!\")\n} else {\n    fmt.Println(\"\u2705 Healthy margin level\")\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#6-check-before-opening-additional-position","title":"6) Check before opening additional position","text":"<pre><code>func CanOpenAdditionalPosition(sugar *mt5.MT5Sugar, symbol string, desiredLots float64) bool {\n    maxLots, err := sugar.GetMaxLotSize(symbol)\n    if err != nil {\n        fmt.Printf(\"Error checking capacity: %v\\n\", err)\n        return false\n    }\n\n    if desiredLots &gt; maxLots {\n        fmt.Printf(\"\u274c Cannot open %.2f lots (max: %.2f)\\n\", desiredLots, maxLots)\n        return false\n    }\n\n    // Use 90% of max as threshold for safety\n    safeThreshold := maxLots * 0.9\n\n    if desiredLots &gt; safeThreshold {\n        fmt.Printf(\"\u26a0\ufe0f  Warning: %.2f lots is %.1f%% of capacity\\n\",\n            desiredLots, (desiredLots/maxLots)*100)\n        fmt.Println(\"   Consider reducing position size\")\n    }\n\n    fmt.Printf(\"\u2705 Can open %.2f lots (max: %.2f)\\n\", desiredLots, maxLots)\n    return true\n}\n\n// Usage:\nif CanOpenAdditionalPosition(sugar, \"EURUSD\", 0.5) {\n    ticket, _ := sugar.BuyMarket(\"EURUSD\", 0.5)\n    fmt.Printf(\"Position opened: #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#7-leverage-impact-demonstration","title":"7) Leverage impact demonstration","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"XAUUSD\", \"BTCUSD\"}\n\nfmt.Println(\"Maximum Lot Sizes by Symbol:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, symbol := range symbols {\n    maxLots, err := sugar.GetMaxLotSize(symbol)\n    if err != nil {\n        fmt.Printf(\"%s: Error - %v\\n\", symbol, err)\n        continue\n    }\n\n    // Get margin for 1 lot\n    marginPerLot, _ := sugar.CalculateRequiredMargin(symbol, 1.0)\n\n    fmt.Printf(\"%-8s: %.2f lots (margin per lot: $%.2f)\\n\",\n        symbol, maxLots, marginPerLot)\n}\n\n// Output example:\n// Maximum Lot Sizes by Symbol:\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// EURUSD:   8.00 lots (margin per lot: $500.00)\n// GBPUSD:   6.50 lots (margin per lot: $615.38)\n// XAUUSD:   4.00 lots (margin per lot: $1000.00)\n// BTCUSD:   1.00 lots (margin per lot: $4000.00)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#8-dynamic-position-sizing-with-capacity-check","title":"8) Dynamic position sizing with capacity check","text":"<pre><code>func OpenPositionWithCapacityCheck(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    riskPercent float64,\n    stopLoss float64,\n) (uint64, error) {\n    // Calculate risk-based size\n    lotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLoss)\n    if err != nil {\n        return 0, fmt.Errorf(\"position size calculation failed: %w\", err)\n    }\n\n    // Check against maximum capacity\n    maxLots, err := sugar.GetMaxLotSize(symbol)\n    if err != nil {\n        return 0, fmt.Errorf(\"max lot size check failed: %w\", err)\n    }\n\n    // Use smaller of the two\n    finalLots := lotSize\n    if lotSize &gt; maxLots {\n        fmt.Printf(\"\u26a0\ufe0f  Risk-based size %.2f exceeds capacity %.2f\\n\",\n            lotSize, maxLots)\n        fmt.Printf(\"   Reducing to maximum: %.2f lots\\n\", maxLots)\n        finalLots = maxLots\n    }\n\n    // Validate\n    canOpen, reason, _ := sugar.CanOpenPosition(symbol, finalLots)\n    if !canOpen {\n        return 0, fmt.Errorf(\"cannot open position: %s\", reason)\n    }\n\n    // Open position\n    return sugar.BuyMarket(symbol, finalLots)\n}\n\n// Usage:\nticket, err := OpenPositionWithCapacityCheck(sugar, \"EURUSD\", 2.0, 50)\nif err != nil {\n    fmt.Printf(\"Failed: %v\\n\", err)\n} else {\n    fmt.Printf(\"Success: Position #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#9-account-capacity-monitor","title":"9) Account capacity monitor","text":"<pre><code>func MonitorAccountCapacity(sugar *mt5.MT5Sugar, symbols []string) {\n    balance, _ := sugar.GetBalance()\n    freeMargin, _ := sugar.GetFreeMargin()\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          ACCOUNT CAPACITY MONITOR                     \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Balance:      $%.2f\\n\", balance)\n    fmt.Printf(\"Free Margin:  $%.2f\\n\\n\", freeMargin)\n\n    fmt.Printf(\"%-10s  %-12s  %-15s\\n\", \"Symbol\", \"Max Lots\", \"Margin Need\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    totalCapacity := 0.0\n\n    for _, symbol := range symbols {\n        maxLots, err := sugar.GetMaxLotSize(symbol)\n        if err != nil {\n            fmt.Printf(\"%-10s  Error: %v\\n\", symbol, err)\n            continue\n        }\n\n        marginNeed, _ := sugar.CalculateRequiredMargin(symbol, maxLots)\n        totalCapacity += marginNeed\n\n        fmt.Printf(\"%-10s  %-12.2f  $%-14.2f\\n\",\n            symbol, maxLots, marginNeed)\n    }\n\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Note: Using 80%% safety buffer\\n\")\n\n    if totalCapacity &gt; freeMargin {\n        fmt.Println(\"\\n\u26a0\ufe0f  Warning: Cannot open all positions at max simultaneously\")\n    } else {\n        fmt.Println(\"\\n\u2705 Sufficient margin for all symbols\")\n    }\n}\n\n// Usage:\nwatchlist := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\nMonitorAccountCapacity(sugar, watchlist)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#10-advanced-capacity-manager","title":"10) Advanced capacity manager","text":"<pre><code>type CapacityManager struct {\n    sugar *mt5.MT5Sugar\n}\n\nfunc NewCapacityManager(sugar *mt5.MT5Sugar) *CapacityManager {\n    return &amp;CapacityManager{sugar: sugar}\n}\n\nfunc (cm *CapacityManager) GetSafetyLevel() string {\n    freeMargin, _ := cm.sugar.GetFreeMargin()\n    balance, _ := cm.sugar.GetBalance()\n\n    ratio := freeMargin / balance\n\n    if ratio &gt; 0.8 {\n        return \"\u2705 Excellent - Low risk\"\n    } else if ratio &gt; 0.5 {\n        return \"\ud83d\udfe1 Good - Moderate usage\"\n    } else if ratio &gt; 0.3 {\n        return \"\ud83d\udfe0 Caution - High usage\"\n    } else {\n        return \"\ud83d\udd34 Danger - Very high usage\"\n    }\n}\n\nfunc (cm *CapacityManager) CanOpenMultiplePositions(\n    positions []struct {\n        Symbol string\n        Lots   float64\n    },\n) (bool, string) {\n    freeMargin, _ := cm.sugar.GetFreeMargin()\n\n    totalMarginNeeded := 0.0\n\n    for _, pos := range positions {\n        marginNeeded, err := cm.sugar.CalculateRequiredMargin(pos.Symbol, pos.Lots)\n        if err != nil {\n            return false, fmt.Sprintf(\"failed to calculate margin for %s\", pos.Symbol)\n        }\n        totalMarginNeeded += marginNeeded\n    }\n\n    // Use 90% of free margin as threshold\n    safeLimit := freeMargin * 0.9\n\n    if totalMarginNeeded &gt; safeLimit {\n        return false, fmt.Sprintf(\n            \"insufficient margin: need $%.2f, safe limit $%.2f\",\n            totalMarginNeeded, safeLimit,\n        )\n    }\n\n    return true, \"\"\n}\n\nfunc (cm *CapacityManager) GetOptimalDistribution(\n    symbols []string,\n    totalRisk float64,\n) map[string]float64 {\n    distribution := make(map[string]float64)\n\n    // Get max lots for each symbol\n    maxLots := make(map[string]float64)\n    totalCapacity := 0.0\n\n    for _, symbol := range symbols {\n        max, _ := cm.sugar.GetMaxLotSize(symbol)\n        maxLots[symbol] = max\n\n        margin, _ := cm.sugar.CalculateRequiredMargin(symbol, max)\n        totalCapacity += margin\n    }\n\n    // Distribute proportionally\n    for symbol, max := range maxLots {\n        margin, _ := cm.sugar.CalculateRequiredMargin(symbol, max)\n        proportion := margin / totalCapacity\n        distribution[symbol] = max * proportion * totalRisk\n    }\n\n    return distribution\n}\n\nfunc (cm *CapacityManager) ShowReport() {\n    balance, _ := cm.sugar.GetBalance()\n    margin, _ := cm.sugar.GetMargin()\n    freeMargin, _ := cm.sugar.GetFreeMargin()\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      CAPACITY MANAGER REPORT          \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Balance:       $%.2f\\n\", balance)\n    fmt.Printf(\"Used Margin:   $%.2f (%.1f%%)\\n\",\n        margin, (margin/balance)*100)\n    fmt.Printf(\"Free Margin:   $%.2f (%.1f%%)\\n\",\n        freeMargin, (freeMargin/balance)*100)\n    fmt.Println()\n    fmt.Printf(\"Safety Level:  %s\\n\", cm.GetSafetyLevel())\n}\n\n// Usage:\nmanager := NewCapacityManager(sugar)\nmanager.ShowReport()\n\n// Check multiple positions\npositions := []struct {\n    Symbol string\n    Lots   float64\n}{\n    {\"EURUSD\", 0.5},\n    {\"GBPUSD\", 0.3},\n    {\"USDJPY\", 0.2},\n}\n\ncanOpen, reason := manager.CanOpenMultiplePositions(positions)\nif !canOpen {\n    fmt.Printf(\"Cannot open positions: %s\\n\", reason)\n} else {\n    fmt.Println(\"\u2705 Can open all positions\")\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83d\udce6 Methods used internally:</p> <ul> <li><code>GetFreeMargin()</code> - Get available margin</li> <li><code>GetSymbolInfo()</code> - Get volume limits and step</li> <li><code>service.CalculateMargin()</code> - Calculate margin for 1 lot</li> </ul> <p>\ud83c\udf6c Complementary sugar methods:</p> <ul> <li><code>CalculatePositionSize()</code> - Calculate size based on risk % \u2b50</li> <li><code>CanOpenPosition()</code> - Validate position can be opened \u2b50</li> <li><code>CalculateRequiredMargin()</code> - Calculate margin for specific volume</li> <li><code>GetFreeMargin()</code> - Get current free margin</li> </ul> <p>Recommended workflow: <pre><code>// 1. Calculate risk-based size\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n\n// 2. Check against max capacity\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\")\nif lotSize &gt; maxLots {\n    lotSize = maxLots\n}\n\n// 3. Validate\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", lotSize)\nif !canOpen {\n    fmt.Println(\"Cannot open:\", reason)\n    return\n}\n\n// 4. Trade\nticket, _ := sugar.BuyMarket(\"EURUSD\", lotSize)\n</code></pre></p>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#1-using-100-of-max-capacity","title":"1) Using 100% of max capacity","text":"<pre><code>// \u274c WRONG - using full capacity (risky!)\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\")\nsugar.BuyMarket(\"EURUSD\", maxLots) // Dangerous!\n\n// \u2705 CORRECT - use percentage of max for safety\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\")\nsafeLots := maxLots * 0.5 // Use 50% of capacity\nsugar.BuyMarket(\"EURUSD\", safeLots)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#2-ignoring-zero-result","title":"2) Ignoring zero result","text":"<pre><code>// \u274c WRONG - not checking for zero\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\")\nsugar.BuyMarket(\"EURUSD\", maxLots) // Will fail if maxLots = 0!\n\n// \u2705 CORRECT - check for zero\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\")\nif maxLots == 0 {\n    fmt.Println(\"Insufficient margin\")\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#3-not-considering-existing-positions","title":"3) Not considering existing positions","text":"<pre><code>// \u274c WRONG - checking capacity without existing positions context\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\")\n// But you already have open positions using margin!\n\n// \u2705 CORRECT - consider total exposure\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\")\nopenPositions, _ := sugar.GetOpenPositionsCount()\nif openPositions &gt;= 3 {\n    fmt.Println(\"Too many positions already open\")\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#4-confusing-with-calculatepositionsize","title":"4) Confusing with CalculatePositionSize","text":"<pre><code>// \u274c WRONG - these are different things!\n// GetMaxLotSize = what you CAN open (margin-based)\n// CalculatePositionSize = what you SHOULD open (risk-based)\n\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\") // Maybe 10 lots\n// Just because you CAN doesn't mean you SHOULD!\n\n// \u2705 CORRECT - use risk-based, check against max\nriskLots, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\")\nlotSize := math.Min(riskLots, maxLots)\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#5-not-accounting-for-safety-buffer","title":"5) Not accounting for safety buffer","text":"<pre><code>// \u274c WRONG - thinking it uses 100% of free margin\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\")\n// Actually uses 80% (20% buffer built-in)\n\n// \u2705 CORRECT - understand it has safety buffer\nmaxLots, _ := sugar.GetMaxLotSize(\"EURUSD\")\nfmt.Println(\"Max lots includes 20% safety buffer\")\n</code></pre>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Safety buffer - Method uses 80% of free margin automatically</p> </li> <li> <p>Use percentage - Never use 100% of returned capacity, use 50-70%</p> </li> <li> <p>Risk-based is better - Use <code>CalculatePositionSize()</code> for risk %, use this for upper limit</p> </li> <li> <p>Check before adding - Check capacity before opening additional positions</p> </li> <li> <p>Symbol matters - Different symbols have different margin requirements</p> </li> <li> <p>Monitor regularly - Capacity changes as positions are opened/closed</p> </li> <li> <p>Zero is valid - Returns 0.0 (not error) if insufficient margin</p> </li> </ol>"},{"location":"MT5Sugar/10.%20Risk_Management/GetMaxLotSize/#capacity-vs-risk-sizing","title":"\ud83d\udcca Capacity vs Risk Sizing","text":"<pre><code>Two different approaches:\n\nGetMaxLotSize():\n- \"How much CAN I trade?\"\n- Based on margin availability\n- Shows maximum capacity\n- Use for upper limit checking\n\nCalculatePositionSize():\n- \"How much SHOULD I trade?\"\n- Based on risk percentage\n- Follows risk management rules\n- Use for actual position sizing\n\nBest practice: Use both together!\nlotSize = min(riskBasedSize, maxCapacity * 0.5)\n</code></pre> <p>See also: <code>CalculatePositionSize.md</code>, <code>CanOpenPosition.md</code>, <code>CalculateRequiredMargin.md</code></p>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/","title":"\ud83d\udcc8 Buy at Market with SL/TP in Pips (<code>BuyMarketWithPips</code>)","text":"<p>Sugar method: Opens a BUY position with Stop Loss and Take Profit specified in pips (not price!). More intuitive than price-based methods - you specify risk/reward in pips and it calculates exact prices automatically.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.BuyMarketWithPips(symbol, volume, stopLossPips, takeProfitPips)</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>CalculateSLTP()</code>, <code>BuyMarketWithSLTP()</code></li> <li>Timeout: 10 seconds</li> </ul>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) BuyMarketWithPips(\n    symbol string,\n    volume float64,\n    stopLossPips float64,\n    takeProfitPips float64,\n) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1, 0.01, 1.0) <code>stopLossPips</code> <code>float64</code> Stop Loss distance in pips from entry (e.g., 50) <code>takeProfitPips</code> <code>float64</code> Take Profit distance in pips from entry (e.g., 100) <p>Important: SL/TP are in pips (points), not price!</p>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>ticket</code> <code>uint64</code> Position ticket number (use for tracking/closing) <code>error</code> <code>error</code> Error if order rejected or execution failed"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Opens BUY at market with SL/TP specified in pips instead of price.</li> <li>Why you need it: Much easier than calculating SL/TP prices manually. Just specify \"50 pips stop, 100 pips profit\" and you're done.</li> <li>Sanity check: If EURUSD is at 1.08500, SL=50, TP=100 \u2192 SL will be at 1.08000, TP at 1.09000.</li> </ul>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it for intuitive market orders:</p> <ul> <li>Think in pips, not prices - More natural for traders</li> <li>Consistent R:R ratios - Easy to maintain 1:2 or 1:3 R:R</li> <li>Quick market entries - Specify SL/TP in one line</li> <li>Auto price calculation - No manual math needed</li> <li>Works across all symbols - Handles different pip values automatically</li> </ul>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#how-it-works","title":"\ud83d\udd22 How It Works","text":"<pre><code>Entry Price = Current ASK\nStop Loss   = ASK - (stopLossPips \u00d7 point)\nTake Profit = ASK + (takeProfitPips \u00d7 point)\n\nWhere:\n  point = symbol's minimal price change (e.g., 0.00001 for EURUSD)\n</code></pre> <p>Example: <pre><code>EURUSD ASK = 1.08500\nSL = 50 pips \u2192 1.08500 - (50 \u00d7 0.00010) = 1.08000\nTP = 100 pips \u2192 1.08500 + (100 \u00d7 0.00010) = 1.09000\n\nBUY at 1.08500, SL at 1.08000, TP at 1.09000\n</code></pre></p>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Pips, not price! - 50 means \"50 points\" not \"price 50.00\"</li> <li>For BUY - SL is BELOW entry, TP is ABOVE entry</li> <li>Current market price - Uses current ASK for entry</li> <li>Auto-calculation - Handles different symbol digits automatically</li> <li>Set both to 0 - To open without SL/TP (not recommended!)</li> <li>Market execution - Order fills at current market price</li> <li>Slippage possible - Actual entry might differ slightly</li> </ul>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#under-the-hood","title":"\ud83d\udd27 Under the Hood","text":"<pre><code>func (s *MT5Sugar) BuyMarketWithPips(symbol string, volume, stopLossPips, takeProfitPips float64) (uint64, error) {\n    // 1. Calculate exact SL/TP prices from pips\n    sl, tp, err := s.CalculateSLTP(symbol, \"BUY\", 0, stopLossPips, takeProfitPips)\n    if err != nil {\n        return 0, err\n    }\n\n    // 2. Open BUY position with calculated prices\n    return s.BuyMarketWithSLTP(symbol, volume, sl, tp)\n}\n</code></pre> <p>What it improves:</p> <ul> <li>\u2705 Pip-based input - Think in pips, not prices</li> <li>\u2705 Auto price calculation - No manual math</li> <li>\u2705 Symbol-aware - Handles 5-digit vs 3-digit brokers</li> <li>\u2705 One method call - Instead of three separate steps</li> </ul>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#low-level-alternative","title":"\ud83d\udcca Low-Level Alternative","text":"<p>WITHOUT sugar (manual calculation): <pre><code>// Get symbol info\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\n\n// Get current ASK\nask, _ := sugar.GetAsk(\"EURUSD\")\n\n// Calculate SL/TP manually\nsl := ask - (50 * info.Point)  // 50 pips below\ntp := ask + (100 * info.Point) // 100 pips above\n\n// Open position\nticket, _ := sugar.BuyMarketWithSLTP(\"EURUSD\", 0.1, sl, tp)\n</code></pre></p> <p>WITH sugar: <pre><code>ticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n</code></pre></p> <p>Benefits:</p> <ul> <li>\u2705 One line vs 5 lines</li> <li>\u2705 No point calculation needed</li> <li>\u2705 No symbol info lookup</li> <li>\u2705 Clearer intent - \"50 and 100 pips\" is obvious</li> </ul>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#1-basic-market-buy-with-12-rr","title":"1) Basic market BUY with 1:2 R:R","text":"<pre><code>// Open BUY: 0.1 lots, 50 pip SL, 100 pip TP (1:2 R:R)\nticket, err := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 BUY order #%d opened\\n\", ticket)\nfmt.Printf(\"   SL: 50 pips, TP: 100 pips (1:2 R:R)\\n\")\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#2-complete-risk-managed-trade","title":"2) Complete risk-managed trade","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nstopLossPips := 50.0\ntakeProfitPips := 100.0\n\n// Step 1: Calculate position size based on risk\nlotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLossPips)\nif err != nil {\n    fmt.Printf(\"Position size calculation failed: %v\\n\", err)\n    return\n}\n\n// Step 2: Validate we can open\ncanOpen, reason, _ := sugar.CanOpenPosition(symbol, lotSize)\nif !canOpen {\n    fmt.Printf(\"Cannot open: %s\\n\", reason)\n    return\n}\n\n// Step 3: Open position with calculated size\nticket, err := sugar.BuyMarketWithPips(symbol, lotSize, stopLossPips, takeProfitPips)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Trade opened successfully!\\n\")\nfmt.Printf(\"   Ticket:      #%d\\n\", ticket)\nfmt.Printf(\"   Lot size:    %.2f (risk: %.1f%%)\\n\", lotSize, riskPercent)\nfmt.Printf(\"   Stop Loss:   %.0f pips\\n\", stopLossPips)\nfmt.Printf(\"   Take Profit: %.0f pips\\n\", takeProfitPips)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#3-different-riskreward-ratios","title":"3) Different risk/reward ratios","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Conservative: 1:1.5 R:R\nticket1, _ := sugar.BuyMarketWithPips(symbol, volume, 50, 75)\nfmt.Println(\"Conservative: 50 pip SL, 75 pip TP (1:1.5)\")\n\n// Moderate: 1:2 R:R (most common)\nticket2, _ := sugar.BuyMarketWithPips(symbol, volume, 50, 100)\nfmt.Println(\"Moderate: 50 pip SL, 100 pip TP (1:2)\")\n\n// Aggressive: 1:3 R:R\nticket3, _ := sugar.BuyMarketWithPips(symbol, volume, 50, 150)\nfmt.Println(\"Aggressive: 50 pip SL, 150 pip TP (1:3)\")\n\n// Output:\n// Conservative: 50 pip SL, 75 pip TP (1:1.5)\n// Moderate: 50 pip SL, 100 pip TP (1:2)\n// Aggressive: 50 pip SL, 150 pip TP (1:3)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#4-tight-stop-vs-wide-stop","title":"4) Tight stop vs wide stop","text":"<pre><code>symbol := \"GBPUSD\"\nvolume := 0.1\n\n// Scalping: tight stop, tight target\nticket1, _ := sugar.BuyMarketWithPips(symbol, volume, 15, 30)\nfmt.Println(\"Scalp: 15 pip SL, 30 pip TP\")\n\n// Day trading: normal stop\nticket2, _ := sugar.BuyMarketWithPips(symbol, volume, 50, 100)\nfmt.Println(\"Day: 50 pip SL, 100 pip TP\")\n\n// Swing trading: wide stop\nticket3, _ := sugar.BuyMarketWithPips(symbol, volume, 150, 300)\nfmt.Println(\"Swing: 150 pip SL, 300 pip TP\")\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#5-show-entry-sl-tp-prices","title":"5) Show entry, SL, TP prices","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Get current price\nask, _ := sugar.GetAsk(symbol)\n\n// Calculate what SL/TP prices will be\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", ask, slPips, tpPips)\n\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"  BUY ORDER PREVIEW\\n\")\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"Symbol:       %s\\n\", symbol)\nfmt.Printf(\"Entry (ASK):  %.5f\\n\", ask)\nfmt.Printf(\"Stop Loss:    %.5f (-%\u200b.0f pips)\\n\", sl, slPips)\nfmt.Printf(\"Take Profit:  %.5f (+%.0f pips)\\n\", tp, tpPips)\nfmt.Printf(\"Risk/Reward:  1:%.1f\\n\", tpPips/slPips)\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\n\n// Open position\nticket, _ := sugar.BuyMarketWithPips(symbol, volume, slPips, tpPips)\nfmt.Printf(\"\u2705 Order #%d opened\\n\", ticket)\n\n// Output:\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n//   BUY ORDER PREVIEW\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Symbol:       EURUSD\n// Entry (ASK):  1.08500\n// Stop Loss:    1.08000 (-50 pips)\n// Take Profit:  1.09000 (+100 pips)\n// Risk/Reward:  1:2.0\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// \u2705 Order #44444 opened\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#6-multiple-positions-with-same-parameters","title":"6) Multiple positions with same parameters","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\nfmt.Println(\"Opening BUY positions on multiple pairs:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, symbol := range symbols {\n    ticket, err := sugar.BuyMarketWithPips(symbol, volume, slPips, tpPips)\n    if err != nil {\n        fmt.Printf(\"\u274c %s: Failed - %v\\n\", symbol, err)\n        continue\n    }\n\n    fmt.Printf(\"\u2705 %s: Ticket #%d\\n\", symbol, ticket)\n}\n\n// Output:\n// Opening BUY positions on multiple pairs:\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// \u2705 EURUSD: Ticket #44444\n// \u2705 GBPUSD: Ticket #44445\n// \u2705 USDJPY: Ticket #44446\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#7-breakeven-entry-no-sltp","title":"7) Breakeven entry (no SL/TP)","text":"<pre><code>// Open without SL/TP (pass 0 for both)\nticket, err := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 0, 0)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Println(\"\u26a0\ufe0f  Order opened WITHOUT Stop Loss or Take Profit\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Println(\"   \ud83d\udea8 DANGEROUS - Manually set SL immediately!\")\n\n// Immediately set stop loss\nsl, _, _ := sugar.CalculateSLTP(\"EURUSD\", \"BUY\", 0, 50, 0)\nsugar.ModifyPositionSL(ticket, sl)\nfmt.Println(\"\u2705 Stop Loss set to 50 pips\")\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#8-trail-after-x-pips-profit","title":"8) Trail after X pips profit","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Open position\nticket, _ := sugar.BuyMarketWithPips(symbol, volume, slPips, tpPips)\nfmt.Printf(\"Position #%d opened\\n\", ticket)\n\n// Monitor and trail\ntime.Sleep(10 * time.Second) // Wait for price to move\n\n// Get current position\npos, _ := sugar.GetPositionByTicket(ticket)\n\nif pos.Profit &gt; 0 {\n    // Price moved in our favor - move SL to breakeven\n    fmt.Println(\"\u2705 Position in profit - moving SL to breakeven\")\n\n    // Calculate breakeven price\n    info, _ := sugar.GetSymbolInfo(symbol)\n    breakeven := pos.PriceOpen + (5 * info.Point) // BE + 5 pips\n\n    sugar.ModifyPositionSL(ticket, breakeven)\n    fmt.Printf(\"   SL moved to %.5f (breakeven + 5 pips)\\n\", breakeven)\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#9-partial-close-at-tp1-let-rest-run-to-tp2","title":"9) Partial close at TP1, let rest run to TP2","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.2  // Total position size\nslPips := 50.0\ntp1Pips := 50.0  // First target\ntp2Pips := 150.0 // Final target\n\n// Open position\nticket, _ := sugar.BuyMarketWithPips(symbol, volume, slPips, tp1Pips)\nfmt.Printf(\"Position #%d opened: %.2f lots\\n\", ticket, volume)\nfmt.Printf(\"   SL: %.0f pips\\n\", slPips)\nfmt.Printf(\"   TP1: %.0f pips (will close 50%%)\\n\", tp1Pips)\nfmt.Printf(\"   TP2: %.0f pips (remaining 50%%)\\n\", tp2Pips)\n\n// ... Later, when price reaches TP1 ...\n// Close half position\nhalfVolume := volume / 2\nerr := sugar.ClosePositionPartial(ticket, halfVolume)\nif err == nil {\n    fmt.Println(\"\u2705 Closed 50% at TP1\")\n\n    // Move SL to breakeven on remaining position\n    pos, _ := sugar.GetPositionByTicket(ticket)\n    sugar.ModifyPositionSL(ticket, pos.PriceOpen)\n\n    // Set new TP to TP2\n    _, tp2, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, 0, tp2Pips)\n    sugar.ModifyPositionTP(ticket, tp2)\n\n    fmt.Println(\"\u2705 SL moved to breakeven, TP set to TP2\")\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#10-validate-symbol-before-trading","title":"10) Validate symbol before trading","text":"<pre><code>symbol := \"XAUUSD\"\nvolume := 0.1\nslPips := 300.0  // Gold needs wider stops\ntpPips := 600.0\n\n// Check symbol availability\navailable, err := sugar.IsSymbolAvailable(symbol)\nif err != nil || !available {\n    fmt.Printf(\"\u274c %s is not available for trading\\n\", symbol)\n    return\n}\n\n// Get symbol info to show specifications\ninfo, _ := sugar.GetSymbolInfo(symbol)\nfmt.Printf(\"Symbol: %s\\n\", info.Name)\nfmt.Printf(\"  Spread:     %d points\\n\", info.Spread)\nfmt.Printf(\"  Min volume: %.2f\\n\", info.VolumeMin)\nfmt.Printf(\"  Max volume: %.2f\\n\", info.VolumeMax)\n\n// Validate volume\nif volume &lt; info.VolumeMin {\n    fmt.Printf(\"\u274c Volume %.2f below minimum %.2f\\n\", volume, info.VolumeMin)\n    return\n}\n\n// Open position\nticket, err := sugar.BuyMarketWithPips(symbol, volume, slPips, tpPips)\nif err != nil {\n    fmt.Printf(\"\u274c Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 %s BUY #%d opened\\n\", symbol, ticket)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Complementary sugar methods:</p> <ul> <li><code>SellMarketWithPips()</code> - SELL version of this method</li> <li><code>CalculatePositionSize()</code> - Calculate lot size based on risk \u2b50</li> <li><code>CanOpenPosition()</code> - Validate before trading \u2b50</li> <li><code>CalculateSLTP()</code> - Calculate SL/TP prices from pips</li> <li><code>BuyMarketWithSLTP()</code> - BUY with prices instead of pips</li> <li><code>ModifyPositionSLTP()</code> - Change SL/TP after opening</li> </ul> <p>\ud83d\udce6 Methods used internally:</p> <ul> <li><code>CalculateSLTP()</code> - Converts pips to prices</li> <li><code>BuyMarketWithSLTP()</code> - Executes the actual order</li> </ul> <p>Recommended workflow: <pre><code>// 1. Calculate position size\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n\n// 2. Validate\ncanOpen, _, _ := sugar.CanOpenPosition(\"EURUSD\", lotSize)\nif !canOpen { return }\n\n// 3. Trade\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre></p>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#1-confusing-pips-with-price","title":"1) Confusing pips with price","text":"<pre><code>// \u274c WRONG - passing price as stop loss\nslPrice := 1.08000\nsugar.BuyMarketWithPips(\"EURUSD\", 0.1, slPrice, 100) // WRONG!\n\n// \u2705 CORRECT - stop loss in pips\nslPips := 50.0\nsugar.BuyMarketWithPips(\"EURUSD\", 0.1, slPips, 100)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#2-using-same-pip-values-for-different-symbols","title":"2) Using same pip values for different symbols","text":"<pre><code>// \u274c WRONG - 50 pips SL works for EURUSD but not XAUUSD\nsugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)  // OK\nsugar.BuyMarketWithPips(\"XAUUSD\", 0.1, 50, 100)  // Too tight!\n\n// \u2705 CORRECT - adjust pips based on symbol volatility\nsugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)    // Forex: 50 pips\nsugar.BuyMarketWithPips(\"XAUUSD\", 0.1, 300, 600)   // Gold: 300 pips\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#3-not-using-risk-based-position-sizing","title":"3) Not using risk-based position sizing","text":"<pre><code>// \u274c WRONG - fixed lot size (ignores balance)\nsugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n\n// \u2705 CORRECT - calculate lot size based on risk\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nsugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#4-not-validating-before-trading","title":"4) Not validating before trading","text":"<pre><code>// \u274c WRONG - trading without validation\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 10.0, 50, 100) // Might fail!\n\n// \u2705 CORRECT - validate first\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", 10.0)\nif !canOpen {\n    fmt.Println(\"Cannot trade:\", reason)\n    return\n}\nsugar.BuyMarketWithPips(\"EURUSD\", 10.0, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#5-ignoring-errors","title":"5) Ignoring errors","text":"<pre><code>// \u274c WRONG - ignoring errors\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\nfmt.Printf(\"Order #%d opened\\n\", ticket) // Might be 0!\n\n// \u2705 CORRECT - check errors\nticket, err := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\nfmt.Printf(\"Order #%d opened\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#6-unrealistic-stops-for-the-symbol","title":"6) Unrealistic stops for the symbol","text":"<pre><code>// \u274c WRONG - 5 pip SL on volatile pair\nsugar.BuyMarketWithPips(\"GBPJPY\", 0.1, 5, 10) // Will get stopped immediately!\n\n// \u2705 CORRECT - use appropriate stop distance\nsugar.BuyMarketWithPips(\"GBPJPY\", 0.1, 80, 160) // Realistic for volatility\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/BuyMarketWithPips/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>Use 1:2 R:R minimum - Never trade with less than 1:2 risk/reward</li> <li>Adjust pips to symbol - Volatile pairs need wider stops</li> <li>Always calculate lot size - Use <code>CalculatePositionSize()</code> first</li> <li>Validate before trading - Use <code>CanOpenPosition()</code></li> <li>Monitor spread - High spread = wider stops needed</li> <li>Think in pips, not price - This method makes it natural</li> <li>Set realistic stops - Don't use super tight stops that always hit</li> </ol> <p>See also: <code>SellMarketWithPips.md</code>, <code>CalculatePositionSize.md</code>, <code>CanOpenPosition.md</code></p>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/","title":"\ud83c\udfaf Calculate SL/TP Prices (<code>CalculateSLTP</code>)","text":"<p>Sugar method: Converts pip distances to actual SL/TP prices - handles the math for you.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.CalculateSLTP(symbol, direction, entryPrice, stopLossPips, takeProfitPips)</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>GetSymbolInfo()</code>, <code>GetAsk()</code>, <code>GetBid()</code></li> <li>Timeout: 3 seconds</li> <li>Returns: SL price, TP price</li> </ul>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) CalculateSLTP(\n    symbol string,\n    direction string,\n    entryPrice float64,\n    stopLossPips float64,\n    takeProfitPips float64,\n) (float64, float64, error)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") <code>direction</code> <code>string</code> \"BUY\" or \"SELL\" <code>entryPrice</code> <code>float64</code> Entry price (use <code>0</code> for current market price) <code>stopLossPips</code> <code>float64</code> Stop Loss distance in points (e.g., 50) <code>takeProfitPips</code> <code>float64</code> Take Profit distance in points (e.g., 100)"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>sl</code> <code>float64</code> Stop Loss price <code>tp</code> <code>float64</code> Take Profit price <code>error</code> <code>error</code> Error if calculation fails"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Converts pip distances into actual SL/TP prices.</li> <li>Why you need it: You think in pips (\"50 pip stop\"), but MT5 needs exact prices.</li> <li>Sanity check: Handles BUY vs SELL direction automatically - BUY SL below entry, SELL SL above entry.</li> </ul>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Convert pips to prices - \"50 pip SL\" \u2192 actual price</p> <p>\u2705 Plan trades - Calculate SL/TP before opening</p> <p>\u2705 Modify positions - Adjust SL/TP by pip distance</p> <p>\u2705 Risk/Reward planning - Work with pip-based R:R ratios</p>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#how-it-works","title":"\ud83d\udd22 How It Works","text":"<pre><code>BUY direction:\n- Entry:  1.08500\n- SL:     Entry - (50 pips \u00d7 point size) = 1.08000 (below entry)\n- TP:     Entry + (100 pips \u00d7 point size) = 1.09000 (above entry)\n\nSELL direction:\n- Entry:  1.08500\n- SL:     Entry + (50 pips \u00d7 point size) = 1.09000 (above entry)\n- TP:     Entry - (100 pips \u00d7 point size) = 1.08000 (below entry)\n\nPoint size = symbol.Point (e.g., 0.00001 for EURUSD with 5 digits)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#1-basic-usage-calculate-sltp-for-buy","title":"1) Basic usage - calculate SL/TP for BUY","text":"<pre><code>symbol := \"EURUSD\"\ndirection := \"BUY\"\nentryPrice := 0.0      // 0 = use current market price\nstopLoss := 50.0       // 50 pips\ntakeProfit := 100.0    // 100 pips\n\nsl, tp, err := sugar.CalculateSLTP(symbol, direction, entryPrice, stopLoss, takeProfit)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Direction:   %s\\n\", direction)\nfmt.Printf(\"Stop Loss:   %.5f (-%0.f pips)\\n\", sl, stopLoss)\nfmt.Printf(\"Take Profit: %.5f (+%.0f pips)\\n\", tp, takeProfit)\n\n// Output example:\n// Direction:   BUY\n// Stop Loss:   1.08000 (-50 pips)\n// Take Profit: 1.09000 (+100 pips)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#2-calculate-for-sell-position","title":"2) Calculate for SELL position","text":"<pre><code>sl, tp, err := sugar.CalculateSLTP(\"EURUSD\", \"SELL\", 0, 50, 100)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\n// Get current price for reference\nbid, _ := sugar.GetBid(\"EURUSD\")\n\nfmt.Printf(\"SELL @ %.5f\\n\", bid)\nfmt.Printf(\"SL:    %.5f (+50 pips above entry)\\n\", sl)\nfmt.Printf(\"TP:    %.5f (-100 pips below entry)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#3-use-specific-entry-price-not-current-market","title":"3) Use specific entry price (not current market)","text":"<pre><code>// Plan a trade with specific entry\nsymbol := \"EURUSD\"\nplannedEntry := 1.08500\nstopLoss := 50.0\ntakeProfit := 100.0\n\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", plannedEntry, stopLoss, takeProfit)\n\nfmt.Printf(\"Planned trade:\\n\")\nfmt.Printf(\"Entry:       %.5f\\n\", plannedEntry)\nfmt.Printf(\"Stop Loss:   %.5f (distance: %.0f pips)\\n\", sl, stopLoss)\nfmt.Printf(\"Take Profit: %.5f (distance: %.0f pips)\\n\", tp, takeProfit)\nfmt.Printf(\"Risk/Reward: 1:%.1f\\n\", takeProfit/stopLoss)\n\n// Output:\n// Planned trade:\n// Entry:       1.08500\n// Stop Loss:   1.08000 (distance: 50 pips)\n// Take Profit: 1.09000 (distance: 100 pips)\n// Risk/Reward: 1:2.0\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#4-complete-trading-workflow-with-sltp-calculation","title":"4) Complete trading workflow with SL/TP calculation","text":"<pre><code>symbol := \"EURUSD\"\ndirection := \"BUY\"\nvolume := 0.1\nstopLoss := 50.0\ntakeProfit := 100.0\n\n// Step 1: Calculate SL/TP prices\nsl, tp, err := sugar.CalculateSLTP(symbol, direction, 0, stopLoss, takeProfit)\nif err != nil {\n    fmt.Printf(\"SL/TP calculation failed: %v\\n\", err)\n    return\n}\n\n// Step 2: Validate position\ncanOpen, reason, err := sugar.CanOpenPosition(symbol, volume)\nif err != nil {\n    fmt.Printf(\"Validation error: %v\\n\", err)\n    return\n}\n\nif !canOpen {\n    fmt.Printf(\"Cannot open: %s\\n\", reason)\n    return\n}\n\n// Step 3: Open position\nvar ticket uint64\nif direction == \"BUY\" {\n    ticket, err = sugar.BuyMarketWithSLTP(symbol, volume, sl, tp)\n} else {\n    ticket, err = sugar.SellMarketWithSLTP(symbol, volume, sl, tp)\n}\n\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Position #%d opened\\n\", ticket)\nfmt.Printf(\"   SL: %.5f, TP: %.5f\\n\", sl, tp)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#5-different-rr-ratios","title":"5) Different R:R ratios","text":"<pre><code>symbol := \"EURUSD\"\ndirection := \"BUY\"\nstopLoss := 50.0\n\n// Test different R:R ratios\nratios := []float64{1.0, 1.5, 2.0, 3.0}\n\nfmt.Printf(\"SL/TP calculations for different R:R ratios (SL=%0.f pips):\\n\", stopLoss)\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, ratio := range ratios {\n    takeProfit := stopLoss * ratio\n\n    sl, tp, _ := sugar.CalculateSLTP(symbol, direction, 0, stopLoss, takeProfit)\n\n    fmt.Printf(\"R:R 1:%.1f \u2192 SL: %.5f, TP: %.5f (%.0f pips)\\n\",\n        ratio, sl, tp, takeProfit)\n}\n\n// Output example:\n// SL/TP calculations for different R:R ratios (SL=50 pips):\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// R:R 1:1.0 \u2192 SL: 1.08000, TP: 1.08500 (50 pips)\n// R:R 1:1.5 \u2192 SL: 1.08000, TP: 1.08750 (75 pips)\n// R:R 1:2.0 \u2192 SL: 1.08000, TP: 1.09000 (100 pips)\n// R:R 1:3.0 \u2192 SL: 1.08000, TP: 1.09500 (150 pips)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#6-show-sltp-distances-from-current-price","title":"6) Show SL/TP distances from current price","text":"<pre><code>func ShowSLTPDistances(sugar *mt5.MT5Sugar, symbol, direction string, slPips, tpPips float64) {\n    sl, tp, _ := sugar.CalculateSLTP(symbol, direction, 0, slPips, tpPips)\n\n    // Get current price\n    var currentPrice float64\n    if direction == \"BUY\" {\n        currentPrice, _ = sugar.GetAsk(symbol)\n    } else {\n        currentPrice, _ = sugar.GetBid(symbol)\n    }\n\n    // Calculate distances\n    info, _ := sugar.GetSymbolInfo(symbol)\n    slDistance := math.Abs(currentPrice-sl) / info.Point\n    tpDistance := math.Abs(currentPrice-tp) / info.Point\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      SL/TP CALCULATION                \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Symbol:    %s\\n\", symbol)\n    fmt.Printf(\"Direction: %s\\n\\n\", direction)\n\n    fmt.Printf(\"Entry:     %.5f (current market)\\n\\n\", currentPrice)\n\n    fmt.Printf(\"Stop Loss:\\n\")\n    fmt.Printf(\"  Price:   %.5f\\n\", sl)\n    fmt.Printf(\"  Distance: %.0f pips\\n\", slDistance)\n    fmt.Printf(\"  Direction: \")\n    if sl &lt; currentPrice {\n        fmt.Println(\"Below entry \u2b07\ufe0f\")\n    } else {\n        fmt.Println(\"Above entry \u2b06\ufe0f\")\n    }\n\n    fmt.Printf(\"\\nTake Profit:\\n\")\n    fmt.Printf(\"  Price:   %.5f\\n\", tp)\n    fmt.Printf(\"  Distance: %.0f pips\\n\", tpDistance)\n    fmt.Printf(\"  Direction: \")\n    if tp &gt; currentPrice {\n        fmt.Println(\"Above entry \u2b06\ufe0f\")\n    } else {\n        fmt.Println(\"Below entry \u2b07\ufe0f\")\n    }\n\n    fmt.Printf(\"\\nRisk/Reward: 1:%.1f\\n\", tpPips/slPips)\n}\n\n// Usage:\nShowSLTPDistances(sugar, \"EURUSD\", \"BUY\", 50, 100)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#7-asymmetric-sltp-different-distances","title":"7) Asymmetric SL/TP (different distances)","text":"<pre><code>symbol := \"GBPUSD\"\ndirection := \"SELL\"\n\n// Tight SL, wide TP (aggressive)\ntightSL := 30.0\nwideTP := 150.0\n\nsl1, tp1, _ := sugar.CalculateSLTP(symbol, direction, 0, tightSL, wideTP)\n\n// Wide SL, tight TP (conservative)\nwideSL := 100.0\ntightTP := 50.0\n\nsl2, tp2, _ := sugar.CalculateSLTP(symbol, direction, 0, wideSL, tightTP)\n\nfmt.Println(\"Trade plan comparison:\")\nfmt.Println()\n\nfmt.Printf(\"Aggressive (tight SL, wide TP):\\n\")\nfmt.Printf(\"  SL: %.5f (%.0f pips)\\n\", sl1, tightSL)\nfmt.Printf(\"  TP: %.5f (%.0f pips)\\n\", tp1, wideTP)\nfmt.Printf(\"  R:R: 1:%.1f\\n\", wideTP/tightSL)\nfmt.Println()\n\nfmt.Printf(\"Conservative (wide SL, tight TP):\\n\")\nfmt.Printf(\"  SL: %.5f (%.0f pips)\\n\", sl2, wideSL)\nfmt.Printf(\"  TP: %.5f (%.0f pips)\\n\", tp2, tightTP)\nfmt.Printf(\"  R:R: 1:%.1f\\n\", tightTP/wideSL)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#8-modify-existing-position-sltp","title":"8) Modify existing position SL/TP","text":"<pre><code>ticket := uint64(123456)\n\n// Get current position\npos, err := sugar.GetPositionByTicket(ticket)\nif err != nil {\n    fmt.Printf(\"Position not found: %v\\n\", err)\n    return\n}\n\n// Calculate new SL/TP from current price\nnewSLPips := 30.0   // Tighter stop\nnewTPPips := 150.0  // Wider target\n\ndirection := \"BUY\"\nif pos.Type == 1 { // SELL\n    direction = \"SELL\"\n}\n\n// Use current position price as entry\nnewSL, newTP, _ := sugar.CalculateSLTP(\n    pos.Symbol,\n    direction,\n    pos.OpenPrice,\n    newSLPips,\n    newTPPips,\n)\n\nfmt.Printf(\"Modifying position #%d:\\n\", ticket)\nfmt.Printf(\"Current SL: %.5f \u2192 New SL: %.5f\\n\", pos.StopLoss, newSL)\nfmt.Printf(\"Current TP: %.5f \u2192 New TP: %.5f\\n\", pos.TakeProfit, newTP)\n\n// Modify position\nerr = sugar.ModifyPosition(ticket, newSL, newTP)\nif err != nil {\n    fmt.Printf(\"Modification failed: %v\\n\", err)\n} else {\n    fmt.Println(\"\u2705 Position modified\")\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#9-multi-symbol-sltp-calculator","title":"9) Multi-symbol SL/TP calculator","text":"<pre><code>type TradeSetup struct {\n    Symbol     string\n    Direction  string\n    SLPips     float64\n    TPPips     float64\n}\n\nfunc CalculateMultipleSetups(sugar *mt5.MT5Sugar, setups []TradeSetup) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          TRADE SETUPS CALCULATOR                      \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    for i, setup := range setups {\n        sl, tp, err := sugar.CalculateSLTP(\n            setup.Symbol,\n            setup.Direction,\n            0,\n            setup.SLPips,\n            setup.TPPips,\n        )\n\n        if err != nil {\n            fmt.Printf(\"%d. %s %s: Error - %v\\n\",\n                i+1, setup.Direction, setup.Symbol, err)\n            continue\n        }\n\n        // Get current price\n        var currentPrice float64\n        if setup.Direction == \"BUY\" {\n            currentPrice, _ = sugar.GetAsk(setup.Symbol)\n        } else {\n            currentPrice, _ = sugar.GetBid(setup.Symbol)\n        }\n\n        rr := setup.TPPips / setup.SLPips\n\n        fmt.Printf(\"\\n%d. %s %s @ %.5f\\n\",\n            i+1, setup.Direction, setup.Symbol, currentPrice)\n        fmt.Printf(\"   SL: %.5f (%.0f pips)\\n\", sl, setup.SLPips)\n        fmt.Printf(\"   TP: %.5f (%.0f pips)\\n\", tp, setup.TPPips)\n        fmt.Printf(\"   R:R: 1:%.1f\\n\", rr)\n    }\n}\n\n// Usage:\nsetups := []TradeSetup{\n    {\"EURUSD\", \"BUY\", 50, 100},\n    {\"GBPUSD\", \"SELL\", 60, 120},\n    {\"USDJPY\", \"BUY\", 40, 120},\n}\n\nCalculateMultipleSetups(sugar, setups)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#10-advanced-sltp-helper","title":"10) Advanced SL/TP helper","text":"<pre><code>type SLTPHelper struct {\n    sugar *mt5.MT5Sugar\n}\n\nfunc NewSLTPHelper(sugar *mt5.MT5Sugar) *SLTPHelper {\n    return &amp;SLTPHelper{sugar: sugar}\n}\n\nfunc (h *SLTPHelper) CalculateWithRR(\n    symbol, direction string,\n    entryPrice, slPips, rrRatio float64,\n) (float64, float64, error) {\n    // Calculate TP based on R:R ratio\n    tpPips := slPips * rrRatio\n\n    return h.sugar.CalculateSLTP(symbol, direction, entryPrice, slPips, tpPips)\n}\n\nfunc (h *SLTPHelper) CalculateTrailingStop(\n    symbol string,\n    direction string,\n    entryPrice float64,\n    currentPrice float64,\n    trailingPips float64,\n) (float64, error) {\n    info, err := h.sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    var newSL float64\n\n    if direction == \"BUY\" {\n        // For BUY, trailing stop moves up\n        newSL = currentPrice - (trailingPips * info.Point)\n    } else {\n        // For SELL, trailing stop moves down\n        newSL = currentPrice + (trailingPips * info.Point)\n    }\n\n    return newSL, nil\n}\n\nfunc (h *SLTPHelper) CalculateBreakEven(\n    symbol, direction string,\n    entryPrice float64,\n    bufferPips float64,\n) (float64, error) {\n    info, err := h.sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    var breakEvenSL float64\n\n    if direction == \"BUY\" {\n        // Move SL above entry by buffer\n        breakEvenSL = entryPrice + (bufferPips * info.Point)\n    } else {\n        // Move SL below entry by buffer\n        breakEvenSL = entryPrice - (bufferPips * info.Point)\n    }\n\n    return breakEvenSL, nil\n}\n\nfunc (h *SLTPHelper) ShowCalculation(\n    symbol, direction string,\n    slPips, tpPips float64,\n) {\n    sl, tp, _ := h.sugar.CalculateSLTP(symbol, direction, 0, slPips, tpPips)\n\n    var entry float64\n    if direction == \"BUY\" {\n        entry, _ = h.sugar.GetAsk(symbol)\n    } else {\n        entry, _ = h.sugar.GetBid(symbol)\n    }\n\n    // Calculate monetary risk (1 lot)\n    pipValue, _ := h.calculatePipValue(symbol)\n    riskAmount := slPips * pipValue\n    rewardAmount := tpPips * pipValue\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          SL/TP CALCULATION DETAILS                    \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Symbol:         %s\\n\", symbol)\n    fmt.Printf(\"Direction:      %s\\n\\n\", direction)\n\n    fmt.Printf(\"Entry price:    %.5f\\n\", entry)\n    fmt.Printf(\"Stop Loss:      %.5f (%.0f pips)\\n\", sl, slPips)\n    fmt.Printf(\"Take Profit:    %.5f (%.0f pips)\\n\\n\", tp, tpPips)\n\n    fmt.Printf(\"Risk/Reward:    1:%.1f\\n\", tpPips/slPips)\n    fmt.Printf(\"Risk (1 lot):   $%.2f\\n\", riskAmount)\n    fmt.Printf(\"Reward (1 lot): $%.2f\\n\", rewardAmount)\n}\n\nfunc (h *SLTPHelper) calculatePipValue(symbol string) (float64, error) {\n    info, err := h.sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    // Simplified pip value (point \u00d7 10 \u00d7 contract size)\n    return info.Point * 10 * info.ContractSize, nil\n}\n\n// Usage:\nhelper := NewSLTPHelper(sugar)\n\n// Calculate with R:R ratio\nsl, tp, _ := helper.CalculateWithRR(\"EURUSD\", \"BUY\", 0, 50, 2.0)\nfmt.Printf(\"SL: %.5f, TP: %.5f (1:2 R:R)\\n\", sl, tp)\n\n// Calculate trailing stop\nnewSL, _ := helper.CalculateTrailingStop(\"EURUSD\", \"BUY\", 1.08000, 1.08500, 30)\nfmt.Printf(\"Trailing SL: %.5f (30 pips from current)\\n\", newSL)\n\n// Calculate break-even\nbreakEvenSL, _ := helper.CalculateBreakEven(\"EURUSD\", \"BUY\", 1.08000, 10)\nfmt.Printf(\"Break-even SL: %.5f (+10 pip buffer)\\n\", breakEvenSL)\n\n// Show detailed calculation\nhelper.ShowCalculation(\"EURUSD\", \"BUY\", 50, 100)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83d\udce6 Methods used internally:</p> <ul> <li><code>GetSymbolInfo()</code> - Get point size for calculations</li> <li><code>GetAsk()</code> - Get current ask price (for BUY)</li> <li><code>GetBid()</code> - Get current bid price (for SELL)</li> </ul> <p>\ud83c\udf6c Complementary sugar methods:</p> <ul> <li><code>BuyMarketWithPips()</code> - Uses this method internally \u2b50</li> <li><code>SellMarketWithPips()</code> - Uses this method internally \u2b50</li> <li><code>BuyMarketWithSLTP()</code> - Opens BUY with exact prices</li> <li><code>SellMarketWithSLTP()</code> - Opens SELL with exact prices</li> <li><code>ModifyPosition()</code> - Modify SL/TP after opening</li> </ul> <p>Recommended usage: <pre><code>// Calculate SL/TP\nsl, tp, _ := sugar.CalculateSLTP(\"EURUSD\", \"BUY\", 0, 50, 100)\n\n// Use in trade\nticket, _ := sugar.BuyMarketWithSLTP(\"EURUSD\", 0.1, sl, tp)\n\n// OR simpler - use BuyMarketWithPips (does both steps)\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n</code></pre></p>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#1-wrong-direction","title":"1) Wrong direction","text":"<pre><code>// \u274c WRONG - using wrong direction\nsl, tp, _ := sugar.CalculateSLTP(\"EURUSD\", \"BUY\", 0, 50, 100)\nsugar.SellMarket(\"EURUSD\", 0.1) // Selling with BUY SL/TP!\n\n// \u2705 CORRECT - match direction\nsl, tp, _ := sugar.CalculateSLTP(\"EURUSD\", \"SELL\", 0, 50, 100)\nsugar.SellMarketWithSLTP(\"EURUSD\", 0.1, sl, tp)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#2-confusing-pips-and-price","title":"2) Confusing pips and price","text":"<pre><code>// \u274c WRONG - passing price as pips\nstopLossPrice := 1.08000\nsl, tp, _ := sugar.CalculateSLTP(\"EURUSD\", \"BUY\", 0, stopLossPrice, 100)\n\n// \u2705 CORRECT - use pip distance\nstopLossPips := 50.0\nsl, tp, _ := sugar.CalculateSLTP(\"EURUSD\", \"BUY\", 0, stopLossPips, 100)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#3-not-using-result","title":"3) Not using result","text":"<pre><code>// \u274c WRONG - calculating but not using\nsugar.CalculateSLTP(\"EURUSD\", \"BUY\", 0, 50, 100)\nsugar.BuyMarket(\"EURUSD\", 0.1) // No SL/TP!\n\n// \u2705 CORRECT - use the calculated values\nsl, tp, _ := sugar.CalculateSLTP(\"EURUSD\", \"BUY\", 0, 50, 100)\nsugar.BuyMarketWithSLTP(\"EURUSD\", 0.1, sl, tp)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#4-using-0-entry-for-pending-orders","title":"4) Using 0 entry for pending orders","text":"<pre><code>// \u274c WRONG - using 0 entry for limit order\nsl, tp, _ := sugar.CalculateSLTP(\"EURUSD\", \"BUY\", 0, 50, 100)\n// Will use current price, not your limit price!\n\n// \u2705 CORRECT - specify exact entry price\nlimitPrice := 1.08000\nsl, tp, _ := sugar.CalculateSLTP(\"EURUSD\", \"BUY\", limitPrice, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#5-ignoring-errors","title":"5) Ignoring errors","text":"<pre><code>// \u274c WRONG - ignoring errors\nsl, tp, _ := sugar.CalculateSLTP(\"INVALID\", \"BUY\", 0, 50, 100)\n// sl and tp will be 0!\n\n// \u2705 CORRECT - check errors\nsl, tp, err := sugar.CalculateSLTP(\"EURUSD\", \"BUY\", 0, 50, 100)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Use 0 for entry - Automatically uses current market price</p> </li> <li> <p>Direction matters - BUY: SL below, TP above / SELL: opposite</p> </li> <li> <p>Points not pips - Parameter is in points (for 5-digit: 50 points = 5 pips)</p> </li> <li> <p>R:R ratios - TP pips / SL pips = Risk/Reward ratio</p> </li> <li> <p>Simpler alternative - Use <code>BuyMarketWithPips()</code> / <code>SellMarketWithPips()</code> instead</p> </li> <li> <p>Planning tool - Great for pre-trade calculations and analysis</p> </li> <li> <p>Works for any symbol - Handles different point sizes automatically</p> </li> </ol>"},{"location":"MT5Sugar/11.%20Trading_Helpers/CalculateSLTP/#buy-vs-sell","title":"\ud83d\udcca BUY vs SELL","text":"<pre><code>BUY positions:\nEntry:  1.08500\nSL:     1.08000  (below entry \u2b07\ufe0f)\nTP:     1.09000  (above entry \u2b06\ufe0f)\n\nSELL positions:\nEntry:  1.08500\nSL:     1.09000  (above entry \u2b06\ufe0f)\nTP:     1.08000  (below entry \u2b07\ufe0f)\n\nRemember:\n- SL protects against adverse moves\n- TP captures profit in favorable direction\n</code></pre> <p>See also: <code>BuyMarketWithPips.md</code>, <code>SellMarketWithPips.md</code></p>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/","title":"\ud83d\udcc9 Sell Market with Pips (<code>SellMarketWithPips</code>)","text":"<p>Sugar method: Opens SELL position with SL/TP specified in pips - the most intuitive way to short!</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.SellMarketWithPips(symbol, volume, stopLossPips, takeProfitPips)</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>CalculateSLTP()</code>, <code>SellMarketWithSLTP()</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Position ticket number</li> </ul>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) SellMarketWithPips(\n    symbol string,\n    volume float64,\n    stopLossPips float64,\n    takeProfitPips float64,\n) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1, 1.0) <code>stopLossPips</code> <code>float64</code> Stop Loss distance in points from entry <code>takeProfitPips</code> <code>float64</code> Take Profit distance in points from entry"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>ticket</code> <code>uint64</code> Position ticket number <code>error</code> <code>error</code> Error if order rejected"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Opens SELL at market price with SL/TP specified in pips.</li> <li>Why you need it: Most intuitive way to short - think in pips, not prices!</li> <li>Sanity check: \"SELL EURUSD 0.1 lots, 50 pip SL, 100 pip TP\" \u2192 one method call.</li> </ul>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Market SELL orders with SL/TP - Most common shorting scenario</p> <p>\u2705 Think in pips - Natural risk/reward planning</p> <p>\u2705 Quick short entries - One-liner to open position</p> <p>\u2705 Risk management - Specify exact pip-based risk</p>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#how-it-works","title":"\ud83d\udd22 How It Works","text":"<pre><code>Step 1: Get current BID price (entry for SELL)\nStep 2: Calculate SL = entry + (stopLossPips \u00d7 point)\nStep 3: Calculate TP = entry - (takeProfitPips \u00d7 point)\nStep 4: Open SELL position with calculated SL/TP\n\nExample (EURUSD):\n- Current BID: 1.08500\n- SL pips: 50\n- TP pips: 100\n\nSL = 1.08500 + (50 \u00d7 0.00001) = 1.09000  (ABOVE entry for SELL)\nTP = 1.08500 - (100 \u00d7 0.00001) = 1.07500 (BELOW entry for SELL)\n\nOpens SELL @ 1.08500, SL @ 1.09000, TP @ 1.07500\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#1-basic-usage-sell-with-sltp","title":"1) Basic usage - SELL with SL/TP","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nstopLoss := 50.0   // 50 pips\ntakeProfit := 100.0 // 100 pips (1:2 R:R)\n\nticket, err := sugar.SellMarketWithPips(symbol, volume, stopLoss, takeProfit)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 SELL position opened: #%d\\n\", ticket)\nfmt.Printf(\"   Symbol: %s\\n\", symbol)\nfmt.Printf(\"   Volume: %.2f lots\\n\", volume)\nfmt.Printf(\"   SL: %.0f pips, TP: %.0f pips\\n\", stopLoss, takeProfit)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#2-complete-trading-workflow-with-risk-management","title":"2) Complete trading workflow with risk management","text":"<pre><code>symbol := \"GBPUSD\"\nriskPercent := 2.0\nstopLossPips := 60.0\ntakeProfitPips := 120.0\n\n// Step 1: Calculate position size based on risk\nlotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLossPips)\nif err != nil {\n    fmt.Printf(\"Position size calculation failed: %v\\n\", err)\n    return\n}\n\n// Step 2: Validate\ncanOpen, reason, err := sugar.CanOpenPosition(symbol, lotSize)\nif err != nil {\n    fmt.Printf(\"Validation error: %v\\n\", err)\n    return\n}\n\nif !canOpen {\n    fmt.Printf(\"\u274c Cannot open position: %s\\n\", reason)\n    return\n}\n\n// Step 3: Open SELL position\nfmt.Printf(\"Opening SELL position:\\n\")\nfmt.Printf(\"  Symbol:      %s\\n\", symbol)\nfmt.Printf(\"  Lot size:    %.2f (risking %.1f%%)\\n\", lotSize, riskPercent)\nfmt.Printf(\"  Stop Loss:   %.0f pips\\n\", stopLossPips)\nfmt.Printf(\"  Take Profit: %.0f pips\\n\", takeProfitPips)\n\nticket, err := sugar.SellMarketWithPips(symbol, lotSize, stopLossPips, takeProfitPips)\nif err != nil {\n    fmt.Printf(\"\u274c Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Position opened: #%d\\n\", ticket)\n\n// Step 4: Get entry details\npos, _ := sugar.GetPositionByTicket(ticket)\nfmt.Printf(\"\\nPosition details:\\n\")\nfmt.Printf(\"  Entry:  %.5f\\n\", pos.OpenPrice)\nfmt.Printf(\"  SL:     %.5f (above entry)\\n\", pos.StopLoss)\nfmt.Printf(\"  TP:     %.5f (below entry)\\n\", pos.TakeProfit)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#3-show-sltp-placement-for-sell","title":"3) Show SL/TP placement for SELL","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Get current price\nbid, _ := sugar.GetBid(symbol)\n\n// Calculate what SL/TP prices will be\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", bid, slPips, tpPips)\n\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"  SELL ORDER PREVIEW\\n\")\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"Symbol:       %s\\n\", symbol)\nfmt.Printf(\"Entry (BID):  %.5f\\n\", bid)\nfmt.Printf(\"Stop Loss:    %.5f (+%.0f pips ABOVE)\\n\", sl, slPips)\nfmt.Printf(\"Take Profit:  %.5f (-%.0f pips BELOW)\\n\", tp, tpPips)\nfmt.Printf(\"Risk/Reward:  1:%.1f\\n\", tpPips/slPips)\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\n\n// Open position\nticket, _ := sugar.SellMarketWithPips(symbol, volume, slPips, tpPips)\nfmt.Printf(\"\u2705 SELL order #%d opened\\n\", ticket)\n\n// Output:\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n//   SELL ORDER PREVIEW\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Symbol:       EURUSD\n// Entry (BID):  1.08500\n// Stop Loss:    1.09000 (+50 pips ABOVE)\n// Take Profit:  1.07500 (-100 pips BELOW)\n// Risk/Reward:  1:2.0\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// \u2705 SELL order #12345 opened\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#4-different-rr-ratios-for-sell","title":"4) Different R:R ratios for SELL","text":"<pre><code>symbol := \"USDJPY\"\nvolume := 0.15\nstopLoss := 40.0\n\n// Conservative (1:1.5)\nticket1, _ := sugar.SellMarketWithPips(symbol, volume, stopLoss, stopLoss*1.5)\nfmt.Printf(\"Conservative: #%d (1:1.5 R:R, %.0f/%.0f pips)\\n\",\n    ticket1, stopLoss, stopLoss*1.5)\n\n// Moderate (1:2)\nticket2, _ := sugar.SellMarketWithPips(symbol, volume, stopLoss, stopLoss*2.0)\nfmt.Printf(\"Moderate:     #%d (1:2 R:R, %.0f/%.0f pips)\\n\",\n    ticket2, stopLoss, stopLoss*2.0)\n\n// Aggressive (1:3)\nticket3, _ := sugar.SellMarketWithPips(symbol, volume, stopLoss, stopLoss*3.0)\nfmt.Printf(\"Aggressive:   #%d (1:3 R:R, %.0f/%.0f pips)\\n\",\n    ticket3, stopLoss, stopLoss*3.0)\n\n// Output:\n// Conservative: #123456 (1:1.5 R:R, 40/60 pips)\n// Moderate:     #123457 (1:2 R:R, 40/80 pips)\n// Aggressive:   #123458 (1:3 R:R, 40/120 pips)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#5-multi-symbol-short-portfolio","title":"5) Multi-symbol short portfolio","text":"<pre><code>type ShortTrade struct {\n    Symbol     string\n    Volume     float64\n    SLPips     float64\n    TPPips     float64\n}\n\nshorts := []ShortTrade{\n    {\"EURUSD\", 0.1, 50, 100},\n    {\"GBPUSD\", 0.15, 60, 120},\n    {\"AUDUSD\", 0.2, 45, 90},\n}\n\nfmt.Println(\"Opening SELL positions on multiple pairs:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nsuccessCount := 0\n\nfor i, trade := range shorts {\n    ticket, err := sugar.SellMarketWithPips(\n        trade.Symbol,\n        trade.Volume,\n        trade.SLPips,\n        trade.TPPips,\n    )\n\n    if err != nil {\n        fmt.Printf(\"%d. %s: \u274c Failed - %v\\n\", i+1, trade.Symbol, err)\n        continue\n    }\n\n    successCount++\n    fmt.Printf(\"%d. %s: \u2705 #%d (%.2f lots, %.0f/%.0f pips)\\n\",\n        i+1, trade.Symbol, ticket, trade.Volume, trade.SLPips, trade.TPPips)\n}\n\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Opened: %d/%d positions\\n\", successCount, len(shorts))\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#6-trend-following-short-strategy","title":"6) Trend-following short strategy","text":"<pre><code>func ShortOnDowntrend(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    riskPercent float64,\n) (uint64, error) {\n    // Example: SELL when price breaks support\n    // (In real trading, you'd have trend detection logic)\n\n    stopLossPips := 50.0\n    takeProfitPips := 150.0 // 1:3 R:R for trend trades\n\n    // Calculate position size\n    lotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLossPips)\n    if err != nil {\n        return 0, err\n    }\n\n    // Validate\n    canOpen, reason, _ := sugar.CanOpenPosition(symbol, lotSize)\n    if !canOpen {\n        return 0, fmt.Errorf(\"cannot open: %s\", reason)\n    }\n\n    fmt.Printf(\"TREND-FOLLOWING SHORT:\\n\")\n    fmt.Printf(\"  Symbol:   %s\\n\", symbol)\n    fmt.Printf(\"  Strategy: Downtrend continuation\\n\")\n    fmt.Printf(\"  SL:       %.0f pips\\n\", stopLossPips)\n    fmt.Printf(\"  TP:       %.0f pips (1:3 R:R)\\n\", takeProfitPips)\n    fmt.Printf(\"  Volume:   %.2f lots\\n\\n\", lotSize)\n\n    // Open SELL\n    ticket, err := sugar.SellMarketWithPips(symbol, lotSize, stopLossPips, takeProfitPips)\n    if err != nil {\n        return 0, err\n    }\n\n    fmt.Printf(\"\u2705 SELL position #%d opened\\n\", ticket)\n\n    return ticket, nil\n}\n\n// Usage:\nticket, err := ShortOnDowntrend(sugar, \"EURUSD\", 2.0)\nif err != nil {\n    fmt.Printf(\"Failed: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#7-counter-trend-short-tighter-stops","title":"7) Counter-trend short (tighter stops)","text":"<pre><code>func ShortCounterTrend(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    volume float64,\n) (uint64, error) {\n    // Counter-trend = tighter stops, closer targets\n    stopLossPips := 30.0  // Tight stop\n    takeProfitPips := 45.0 // 1:1.5 R:R (counter-trend is riskier)\n\n    fmt.Printf(\"COUNTER-TREND SHORT:\\n\")\n    fmt.Printf(\"  Symbol:   %s\\n\", symbol)\n    fmt.Printf(\"  Strategy: Mean reversion\\n\")\n    fmt.Printf(\"  SL:       %.0f pips (tight!)\\n\", stopLossPips)\n    fmt.Printf(\"  TP:       %.0f pips\\n\", takeProfitPips)\n    fmt.Printf(\"  Volume:   %.2f lots\\n\\n\", volume)\n\n    ticket, err := sugar.SellMarketWithPips(symbol, volume, stopLossPips, takeProfitPips)\n    if err != nil {\n        return 0, err\n    }\n\n    fmt.Printf(\"\u2705 SELL position #%d opened\\n\", ticket)\n\n    return ticket, nil\n}\n\n// Usage:\nticket, err := ShortCounterTrend(sugar, \"EURUSD\", 0.1)\nif err != nil {\n    fmt.Printf(\"Failed: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#8-batch-sell-with-validation","title":"8) Batch SELL with validation","text":"<pre><code>func OpenMultipleSellPositions(\n    sugar *mt5.MT5Sugar,\n    trades []ShortTrade,\n) []uint64 {\n    tickets := []uint64{}\n\n    fmt.Println(\"Opening SELL positions with validation:\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    for i, trade := range trades {\n        // Step 1: Validate\n        canOpen, reason, err := sugar.CanOpenPosition(trade.Symbol, trade.Volume)\n        if err != nil {\n            fmt.Printf(\"%d. %s: \u26a0\ufe0f  Validation error - %v\\n\",\n                i+1, trade.Symbol, err)\n            continue\n        }\n\n        if !canOpen {\n            fmt.Printf(\"%d. %s: \u274c Cannot open - %s\\n\",\n                i+1, trade.Symbol, reason)\n            continue\n        }\n\n        // Step 2: Open SELL position\n        ticket, err := sugar.SellMarketWithPips(\n            trade.Symbol,\n            trade.Volume,\n            trade.SLPips,\n            trade.TPPips,\n        )\n\n        if err != nil {\n            fmt.Printf(\"%d. %s: \u274c Order failed - %v\\n\",\n                i+1, trade.Symbol, err)\n            continue\n        }\n\n        tickets = append(tickets, ticket)\n        fmt.Printf(\"%d. %s: \u2705 Opened #%d (%.2f lots)\\n\",\n            i+1, trade.Symbol, ticket, trade.Volume)\n    }\n\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Successfully opened: %d/%d positions\\n\",\n        len(tickets), len(trades))\n\n    return tickets\n}\n\n// Usage:\ntrades := []ShortTrade{\n    {\"EURUSD\", 0.1, 50, 100},\n    {\"GBPUSD\", 0.15, 60, 120},\n    {\"USDJPY\", 0.1, 40, 80},\n}\n\ntickets := OpenMultipleSellPositions(sugar, trades)\nfmt.Printf(\"\\nOpened SELL positions: %v\\n\", tickets)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#9-sell-with-trade-logging","title":"9) SELL with trade logging","text":"<pre><code>type TradeLogger struct {\n    sugar *mt5.MT5Sugar\n}\n\nfunc (tl *TradeLogger) SellWithLog(\n    symbol string,\n    volume, slPips, tpPips float64,\n    reason string,\n) (uint64, error) {\n    // Get current price\n    bid, _ := tl.sugar.GetBid(symbol)\n    balance, _ := tl.sugar.GetBalance()\n\n    // Calculate SL/TP prices\n    sl, tp, _ := tl.sugar.CalculateSLTP(symbol, \"SELL\", 0, slPips, tpPips)\n\n    // Log entry\n    timestamp := time.Now().Format(\"2006-01-02 15:04:05\")\n\n    fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n    fmt.Printf(\"TRADE LOG - %s\\n\", timestamp)\n    fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n    fmt.Printf(\"Action:         SELL\\n\")\n    fmt.Printf(\"Symbol:         %s\\n\", symbol)\n    fmt.Printf(\"Volume:         %.2f lots\\n\", volume)\n    fmt.Printf(\"Entry (BID):    %.5f\\n\", bid)\n    fmt.Printf(\"Stop Loss:      %.5f (+%.0f pips above)\\n\", sl, slPips)\n    fmt.Printf(\"Take Profit:    %.5f (-%.0f pips below)\\n\", tp, tpPips)\n    fmt.Printf(\"R:R Ratio:      1:%.1f\\n\", tpPips/slPips)\n    fmt.Printf(\"Balance:        $%.2f\\n\", balance)\n    fmt.Printf(\"Reason:         %s\\n\", reason)\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    // Open position\n    ticket, err := tl.sugar.SellMarketWithPips(symbol, volume, slPips, tpPips)\n\n    if err != nil {\n        fmt.Printf(\"Result:         \u274c FAILED\\n\")\n        fmt.Printf(\"Error:          %v\\n\", err)\n        fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n        return 0, err\n    }\n\n    fmt.Printf(\"Result:         \u2705 SUCCESS\\n\")\n    fmt.Printf(\"Ticket:         #%d\\n\", ticket)\n    fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n\n    return ticket, nil\n}\n\n// Usage:\nlogger := &amp;TradeLogger{sugar: sugar}\n\nticket, err := logger.SellWithLog(\n    \"EURUSD\",\n    0.1,\n    50,\n    100,\n    \"Bearish engulfing on H4, resistance at 1.0900\",\n)\n\nif err != nil {\n    fmt.Printf(\"Trade failed: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#10-advanced-shorting-system","title":"10) Advanced shorting system","text":"<pre><code>type ShortingSystem struct {\n    sugar             *mt5.MT5Sugar\n    maxShortPositions int\n    maxRiskPercent    float64\n}\n\nfunc NewShortingSystem(\n    sugar *mt5.MT5Sugar,\n    maxPositions int,\n    maxRisk float64,\n) *ShortingSystem {\n    return &amp;ShortingSystem{\n        sugar:             sugar,\n        maxShortPositions: maxPositions,\n        maxRiskPercent:    maxRisk,\n    }\n}\n\nfunc (ss *ShortingSystem) CanShort() (bool, string) {\n    // Count existing SELL positions\n    positions, _ := ss.sugar.GetOpenPositions()\n    shortCount := 0\n\n    for _, pos := range positions {\n        if pos.Type == 1 { // SELL\n            shortCount++\n        }\n    }\n\n    if shortCount &gt;= ss.maxShortPositions {\n        return false, fmt.Sprintf(\n            \"max short positions reached (%d/%d)\",\n            shortCount, ss.maxShortPositions,\n        )\n    }\n\n    return true, \"\"\n}\n\nfunc (ss *ShortingSystem) OpenShort(\n    symbol string,\n    slPips float64,\n    tpPips float64,\n    reason string,\n) (uint64, error) {\n    // Check if we can short\n    canShort, reason := ss.CanShort()\n    if !canShort {\n        return 0, fmt.Errorf(\"cannot short: %s\", reason)\n    }\n\n    // Calculate position size\n    lotSize, err := ss.sugar.CalculatePositionSize(\n        symbol,\n        ss.maxRiskPercent,\n        slPips,\n    )\n    if err != nil {\n        return 0, err\n    }\n\n    // Validate\n    canOpen, validationReason, err := ss.sugar.CanOpenPosition(symbol, lotSize)\n    if err != nil {\n        return 0, err\n    }\n\n    if !canOpen {\n        return 0, fmt.Errorf(\"validation failed: %s\", validationReason)\n    }\n\n    // Open SELL position\n    fmt.Printf(\"Opening SHORT position:\\n\")\n    fmt.Printf(\"  Symbol:   %s\\n\", symbol)\n    fmt.Printf(\"  Volume:   %.2f lots (%.1f%% risk)\\n\",\n        lotSize, ss.maxRiskPercent)\n    fmt.Printf(\"  SL:       %.0f pips\\n\", slPips)\n    fmt.Printf(\"  TP:       %.0f pips (1:%.1f R:R)\\n\", tpPips, tpPips/slPips)\n    fmt.Printf(\"  Reason:   %s\\n\", reason)\n\n    ticket, err := ss.sugar.SellMarketWithPips(symbol, lotSize, slPips, tpPips)\n    if err != nil {\n        return 0, err\n    }\n\n    fmt.Printf(\"\u2705 SHORT position opened: #%d\\n\\n\", ticket)\n\n    return ticket, nil\n}\n\nfunc (ss *ShortingSystem) ShowStatus() {\n    positions, _ := ss.sugar.GetOpenPositions()\n    balance, _ := ss.sugar.GetBalance()\n\n    shortCount := 0\n    for _, pos := range positions {\n        if pos.Type == 1 { // SELL\n            shortCount++\n        }\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      SHORTING SYSTEM STATUS           \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Balance:         $%.2f\\n\", balance)\n    fmt.Printf(\"Short positions: %d/%d\\n\", shortCount, ss.maxShortPositions)\n    fmt.Printf(\"Max risk:        %.1f%% per trade\\n\", ss.maxRiskPercent)\n\n    canShort, reason := ss.CanShort()\n    if canShort {\n        fmt.Println(\"\\n\u2705 Ready to short\")\n    } else {\n        fmt.Printf(\"\\n\u274c Cannot short: %s\\n\", reason)\n    }\n}\n\n// Usage:\nshortSystem := NewShortingSystem(\n    sugar,\n    3,   // Max 3 short positions\n    2.0, // Max 2% risk per trade\n)\n\nshortSystem.ShowStatus()\n\n// Open short with automatic risk management\nticket, err := shortSystem.OpenShort(\n    \"EURUSD\",\n    50,\n    100,\n    \"Breakdown below support, strong selling pressure\",\n)\n\nif err != nil {\n    fmt.Printf(\"Short failed: %v\\n\", err)\n} else {\n    fmt.Printf(\"Short successful: #%d\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83d\udce6 Methods used internally:</p> <ul> <li><code>CalculateSLTP()</code> - Calculates SL/TP prices from pips</li> <li><code>SellMarketWithSLTP()</code> - Opens position with exact prices</li> </ul> <p>\ud83c\udf6c Complementary sugar methods:</p> <ul> <li><code>BuyMarketWithPips()</code> - BUY version of this method \u2b50</li> <li><code>SellMarket()</code> - SELL without SL/TP</li> <li><code>SellMarketWithSLTP()</code> - SELL with exact prices</li> <li><code>CalculatePositionSize()</code> - Calculate risk-based lot size \u2b50</li> <li><code>CanOpenPosition()</code> - Validate before opening \u2b50</li> </ul> <p>Recommended workflow: <pre><code>// 1. Calculate lot size\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\n\n// 2. Validate\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", lotSize)\nif !canOpen {\n    fmt.Println(\"Cannot open:\", reason)\n    return\n}\n\n// 3. Trade with pips (most intuitive!)\nticket, _ := sugar.SellMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre></p>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#1-confusing-sell-vs-buy-sl-placement","title":"1) Confusing SELL vs BUY SL placement","text":"<pre><code>// \u274c WRONG - thinking SL is below entry for SELL\n// For SELL: SL is ABOVE entry, TP is BELOW entry\n\n// \u2705 CORRECT - understand SELL mechanics\n// SELL @ 1.08500\n// SL @ 1.09000 (50 pips ABOVE - protects if price goes UP)\n// TP @ 1.07500 (100 pips BELOW - profit when price goes DOWN)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#2-confusing-pips-and-price","title":"2) Confusing pips and price","text":"<pre><code>// \u274c WRONG - passing price as pips\nstopLossPrice := 1.09000\nsugar.SellMarketWithPips(\"EURUSD\", 0.1, stopLossPrice, 100)\n\n// \u2705 CORRECT - use pip distance\nstopLossPips := 50.0\nsugar.SellMarketWithPips(\"EURUSD\", 0.1, stopLossPips, 100)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#3-not-validating-before-opening","title":"3) Not validating before opening","text":"<pre><code>// \u274c WRONG - shorting without validation\nsugar.SellMarketWithPips(\"EURUSD\", 10.0, 50, 100) // Might fail!\n\n// \u2705 CORRECT - validate first\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", 10.0)\nif !canOpen {\n    fmt.Println(\"Cannot open:\", reason)\n    return\n}\nsugar.SellMarketWithPips(\"EURUSD\", 10.0, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#4-using-fixed-lot-size","title":"4) Using fixed lot size","text":"<pre><code>// \u274c WRONG - fixed lot size (ignores account growth)\nsugar.SellMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n\n// \u2705 CORRECT - dynamic lot size based on risk\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nsugar.SellMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#5-not-checking-errors","title":"5) Not checking errors","text":"<pre><code>// \u274c WRONG - ignoring errors\nsugar.SellMarketWithPips(\"INVALID\", 0.1, 50, 100)\n\n// \u2705 CORRECT - check errors\nticket, err := sugar.SellMarketWithPips(\"EURUSD\", 0.1, 50, 100)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>SL ABOVE entry - For SELL, stop loss is ABOVE (protects if price rises)</p> </li> <li> <p>TP BELOW entry - Take profit is BELOW (profit when price falls)</p> </li> <li> <p>Think in pips - This is THE method for shorting</p> </li> <li> <p>Always validate - Use <code>CanOpenPosition()</code> first</p> </li> <li> <p>Use CalculatePositionSize - For proper risk management</p> </li> <li> <p>R:R ratios - Use at least 1:1.5, ideally 1:2 or better</p> </li> <li> <p>Points not pips - Parameter is points (for 5-digit: 50 points = 5 pips)</p> </li> </ol>"},{"location":"MT5Sugar/11.%20Trading_Helpers/SellMarketWithPips/#sell-sltp-placement","title":"\ud83d\udcca SELL: SL/TP Placement","text":"<pre><code>SELL Position:\nEntry:  1.08500 (current BID)\nSL:     1.09000 (ABOVE entry - 50 pips)\nTP:     1.07500 (BELOW entry - 100 pips)\n\nWhy SL is above:\n- You sold (shorted) at 1.08500\n- If price goes UP, you lose\n- SL at 1.09000 protects you\n- If price hits 1.09000 \u2192 close at loss\n\nWhy TP is below:\n- If price goes DOWN, you profit\n- TP at 1.07500 locks in profit\n- If price hits 1.07500 \u2192 close at profit\n</code></pre> <p>See also: <code>BuyMarketWithPips.md</code>, <code>CalculatePositionSize.md</code>, <code>CalculateSLTP.md</code></p>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/","title":"MT5Sugar \u00b7 AccountInfo Structure","text":"<p>Complete account information structure returned by GetAccountInfo(). Contains all essential account metrics in one convenient package.</p>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#structure-definition","title":"\ud83d\udccb Structure Definition","text":"<pre><code>type AccountInfo struct {\n    Login       int64     // Account login number\n    Balance     float64   // Account balance\n    Equity      float64   // Current equity (balance + floating P/L)\n    Margin      float64   // Used margin\n    FreeMargin  float64   // Free margin available\n    MarginLevel float64   // Margin level % ((Equity/Margin)*100)\n    Profit      float64   // Total floating profit/loss\n    Currency    string    // Account currency (USD, EUR, etc.)\n    Leverage    int64     // Account leverage (100 = 1:100)\n    Company     string    // Broker company name\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#field-details","title":"\ud83d\udcca Field Details","text":""},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#login-int64","title":"Login (int64)","text":"<ul> <li>What: MT5 account number</li> <li>Example: <code>591129415</code></li> <li>Use: Account identification, logging, reports</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#balance-float64","title":"Balance (float64)","text":"<ul> <li>What: Realized balance (closed positions only)</li> <li>Formula: Initial deposit + realized profits - realized losses</li> <li>Example: <code>10000.00</code></li> <li>Important: Does NOT include floating P/L from open positions</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#equity-float64","title":"Equity (float64)","text":"<ul> <li>What: Real-time account value</li> <li>Formula: Balance + Profit (floating P/L)</li> <li>Example: <code>10250.75</code></li> <li>Important: Changes with every price tick if you have open positions</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#margin-float64","title":"Margin (float64)","text":"<ul> <li>What: Total margin used by open positions</li> <li>Formula: Sum of all position margins</li> <li>Example: <code>500.00</code></li> <li>Important: Higher margin = less available for new trades</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#freemargin-float64","title":"FreeMargin (float64)","text":"<ul> <li>What: Margin available for new positions</li> <li>Formula: Equity - Margin</li> <li>Example: <code>9750.75</code></li> <li>Important: New positions reduce this value</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#marginlevel-float64","title":"MarginLevel (float64)","text":"<ul> <li>What: Margin safety indicator (percentage)</li> <li>Formula: (Equity / Margin) \u00d7 100</li> <li>Example: <code>2050.15</code> (means 2050.15%)</li> <li>Critical levels:</li> <li>Below 100% = Margin call risk</li> <li>Below 50% = Stop out (broker closes positions)</li> <li>Above 1000% = Very safe</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#profit-float64","title":"Profit (float64)","text":"<ul> <li>What: Total floating profit/loss from ALL open positions</li> <li>Formula: Sum of all open position P/L</li> <li>Example: <code>250.75</code> (positive = profit, negative = loss)</li> <li>Important: Changes in real-time with price movements</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#currency-string","title":"Currency (string)","text":"<ul> <li>What: Account base currency</li> <li>Example: <code>\"USD\"</code>, <code>\"EUR\"</code>, <code>\"GBP\"</code></li> <li>Use: Profit calculations, reporting</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#leverage-int64","title":"Leverage (int64)","text":"<ul> <li>What: Account leverage multiplier</li> <li>Example: <code>100</code> (means 1:100 leverage)</li> <li>Common values: 50, 100, 200, 500</li> <li>Impact: Higher leverage = less margin needed</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#company-string","title":"Company (string)","text":"<ul> <li>What: Broker/company name</li> <li>Example: <code>\"FxPro Financial Services Ltd\"</code></li> <li>Use: Identification, multi-account management</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#common-calculations","title":"\ud83c\udfaf Common Calculations","text":""},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#drawdown","title":"Drawdown (%)","text":"<pre><code>drawdown := ((info.Equity - info.Balance) / info.Balance) * 100\n// Negative = losing, Positive = winning\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#margin-usage","title":"Margin Usage (%)","text":"<pre><code>marginUsage := (info.Margin / info.Equity) * 100\n// Higher = more risk\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#available-capacity","title":"Available Capacity","text":"<pre><code>capacity := info.FreeMargin / info.Margin\n// How many times current position size you can still open\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#daily-return","title":"Daily Return (%)","text":"<pre><code>// Requires yesterday's balance\ndailyReturn := ((info.Balance - yesterdayBalance) / yesterdayBalance) * 100\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#usage-examples","title":"\ud83d\udfe2 Usage Examples","text":""},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#example-1-basic-account-display","title":"Example 1: Basic account display","text":"<pre><code>info, _ := sugar.GetAccountInfo()\n\nfmt.Printf(\"Account: #%d (%s)\\n\", info.Login, info.Company)\nfmt.Printf(\"Currency: %s, Leverage: 1:%d\\n\\n\", info.Currency, info.Leverage)\n\nfmt.Printf(\"Balance:  $%.2f\\n\", info.Balance)\nfmt.Printf(\"Equity:   $%.2f\\n\", info.Equity)\nfmt.Printf(\"Profit:   $%.2f\\n\\n\", info.Profit)\n\nfmt.Printf(\"Margin:   $%.2f\\n\", info.Margin)\nfmt.Printf(\"Free:     $%.2f\\n\", info.FreeMargin)\nfmt.Printf(\"Level:    %.2f%%\\n\", info.MarginLevel)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#example-2-risk-assessment","title":"Example 2: Risk assessment","text":"<pre><code>info, _ := sugar.GetAccountInfo()\n\n// Check margin level\nif info.MarginLevel &lt; 100 {\n    fmt.Println(\"\ud83d\udd34 CRITICAL: Margin call risk!\")\n} else if info.MarginLevel &lt; 200 {\n    fmt.Println(\"\ud83d\udfe0 WARNING: Low margin level\")\n} else if info.MarginLevel &lt; 500 {\n    fmt.Println(\"\ud83d\udfe1 CAUTION: Moderate margin level\")\n} else {\n    fmt.Println(\"\u2705 Healthy margin level\")\n}\n\n// Check margin usage\nmarginUsage := (info.Margin / info.Equity) * 100\nfmt.Printf(\"Margin usage: %.1f%%\\n\", marginUsage)\n\nif marginUsage &gt; 50 {\n    fmt.Println(\"\u26a0\ufe0f High margin usage - reduce exposure\")\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#example-3-drawdown-monitoring","title":"Example 3: Drawdown monitoring","text":"<pre><code>info, _ := sugar.GetAccountInfo()\n\ndrawdown := ((info.Equity - info.Balance) / info.Balance) * 100\n\nfmt.Printf(\"Current drawdown: %.2f%%\\n\", drawdown)\n\nif drawdown &lt; -10 {\n    fmt.Println(\"\ud83d\udd34 ALERT: Drawdown exceeds 10%!\")\n} else if drawdown &lt; -5 {\n    fmt.Println(\"\u26a0\ufe0f WARNING: Significant drawdown\")\n} else if drawdown &gt; 0 {\n    fmt.Printf(\"\u2705 In profit: +%.2f%%\\n\", drawdown)\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#example-4-position-sizing-calculator","title":"Example 4: Position sizing calculator","text":"<pre><code>info, _ := sugar.GetAccountInfo()\n\n// Use 1% risk per trade\nriskPercent := 1.0\nriskAmount := info.Balance * (riskPercent / 100)\n\nfmt.Printf(\"Account balance: $%.2f\\n\", info.Balance)\nfmt.Printf(\"Risk per trade (1%%): $%.2f\\n\", riskAmount)\n\n// Check available margin\navailableRisk := info.FreeMargin * 0.2 // Use only 20% of free margin\nfmt.Printf(\"Max safe risk: $%.2f\\n\", availableRisk)\n\nif riskAmount &gt; availableRisk {\n    fmt.Println(\"\u26a0\ufe0f Reduce position size - insufficient margin\")\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#example-5-multi-account-comparison","title":"Example 5: Multi-account comparison","text":"<pre><code>accounts := []*mt5.AccountInfo{account1, account2, account3}\n\nfmt.Println(\"ACCOUNT COMPARISON\")\nfmt.Println(\"==================\")\n\nfor i, info := range accounts {\n    fmt.Printf(\"\\nAccount %d: #%d\\n\", i+1, info.Login)\n    fmt.Printf(\"  Balance:  $%.2f\\n\", info.Balance)\n    fmt.Printf(\"  Equity:   $%.2f\\n\", info.Equity)\n    fmt.Printf(\"  Profit:   $%.2f\\n\", info.Profit)\n    fmt.Printf(\"  Margin:   %.2f%%\\n\", info.MarginLevel)\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#example-6-json-export","title":"Example 6: JSON export","text":"<pre><code>info, _ := sugar.GetAccountInfo()\n\n// Convert to JSON\njsonData, _ := json.MarshalIndent(info, \"\", \"  \")\nfmt.Println(string(jsonData))\n\n// Output:\n// {\n//   \"Login\": 591129415,\n//   \"Balance\": 10000.00,\n//   \"Equity\": 10250.75,\n//   \"Margin\": 500.00,\n//   ...\n// }\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#example-7-database-record","title":"Example 7: Database record","text":"<pre><code>type AccountSnapshot struct {\n    Timestamp time.Time\n    Account   *mt5.AccountInfo\n}\n\nfunc saveSnapshot(info *mt5.AccountInfo) {\n    snapshot := AccountSnapshot{\n        Timestamp: time.Now(),\n        Account:   info,\n    }\n\n    // Save to database\n    db.Insert(\"snapshots\", snapshot)\n\n    fmt.Printf(\"Snapshot saved: %s\\n\", snapshot.Timestamp)\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#example-8-alert-system","title":"Example 8: Alert system","text":"<pre><code>func checkAccountHealth(info *mt5.AccountInfo) []string {\n    var alerts []string\n\n    // Margin level check\n    if info.MarginLevel &lt; 100 {\n        alerts = append(alerts, \"CRITICAL: Margin level below 100%\")\n    }\n\n    // Drawdown check\n    drawdown := ((info.Equity - info.Balance) / info.Balance) * 100\n    if drawdown &lt; -15 {\n        alerts = append(alerts, fmt.Sprintf(\"CRITICAL: Drawdown %.1f%%\", drawdown))\n    }\n\n    // Large position check\n    marginUsage := (info.Margin / info.Equity) * 100\n    if marginUsage &gt; 70 {\n        alerts = append(alerts, \"WARNING: High margin usage\")\n    }\n\n    // Floating loss check\n    if info.Profit &lt; -1000 {\n        alerts = append(alerts, fmt.Sprintf(\"WARNING: Large floating loss $%.2f\", info.Profit))\n    }\n\n    return alerts\n}\n\n// Usage\ninfo, _ := sugar.GetAccountInfo()\nalerts := checkAccountHealth(info)\n\nif len(alerts) &gt; 0 {\n    fmt.Println(\"\ud83d\udea8 ALERTS:\")\n    for _, alert := range alerts {\n        fmt.Printf(\"  - %s\\n\", alert)\n    }\n} else {\n    fmt.Println(\"\u2705 All systems normal\")\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#example-9-daily-report","title":"Example 9: Daily report","text":"<pre><code>func generateDailyReport(info *mt5.AccountInfo, stats *mt5.DailyStats) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551        DAILY TRADING REPORT            \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"\\n\ud83d\udcca ACCOUNT: #%d (%s)\\n\", info.Login, info.Company)\n    fmt.Printf(\"Currency: %s, Leverage: 1:%d\\n\\n\", info.Currency, info.Leverage)\n\n    fmt.Println(\"\ud83d\udcb0 BALANCE SHEET\")\n    fmt.Printf(\"Balance:      $%.2f\\n\", info.Balance)\n    fmt.Printf(\"Equity:       $%.2f\\n\", info.Equity)\n    fmt.Printf(\"Floating P/L: $%.2f\\n\", info.Profit)\n\n    fmt.Println(\"\\n\ud83d\udcc8 MARGIN STATUS\")\n    fmt.Printf(\"Used margin:  $%.2f\\n\", info.Margin)\n    fmt.Printf(\"Free margin:  $%.2f\\n\", info.FreeMargin)\n    fmt.Printf(\"Margin level: %.2f%%\\n\", info.MarginLevel)\n\n    fmt.Println(\"\\n\ud83d\udcca TODAY'S STATS\")\n    fmt.Printf(\"Trades:       %d\\n\", stats.TotalDeals)\n    fmt.Printf(\"Win rate:     %.1f%%\\n\", stats.WinRate)\n    fmt.Printf(\"Total profit: $%.2f\\n\", stats.TotalProfit)\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#example-10-risk-calculator","title":"Example 10: Risk calculator","text":"<pre><code>func calculateMaxPosition(info *mt5.AccountInfo, symbol string, riskPercent float64) {\n    // Risk amount\n    riskAmount := info.Balance * (riskPercent / 100)\n\n    // Available margin check\n    usableMargin := info.FreeMargin * 0.5 // Use only 50%\n\n    fmt.Printf(\"Account Balance: $%.2f\\n\", info.Balance)\n    fmt.Printf(\"Risk Amount (%%.1f%%): $%.2f\\n\", riskPercent, riskAmount)\n    fmt.Printf(\"Usable Margin: $%.2f\\n\", usableMargin)\n\n    // Calculate position size\n    lotSize, _ := sugar.CalculatePositionSize(symbol, riskPercent, 50)\n\n    // Check if affordable\n    requiredMargin, _ := sugar.CalculateRequiredMargin(symbol, lotSize)\n\n    if requiredMargin &gt; usableMargin {\n        fmt.Println(\"\u274c Position size exceeds available margin\")\n        lotSize = lotSize * (usableMargin / requiredMargin)\n        fmt.Printf(\"Adjusted lot size: %.2f\\n\", lotSize)\n    } else {\n        fmt.Printf(\"\u2705 Safe lot size: %.2f\\n\", lotSize)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#related","title":"\ud83d\udd17 Related","text":"<ul> <li>GetAccountInfo - method that returns this structure</li> <li>DailyStats - trading statistics structure</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#important-notes","title":"\u26a0\ufe0f Important Notes","text":"<ol> <li> <p>Balance vs Equity - Balance = realized only, Equity = real-time value</p> </li> <li> <p>Margin Level - Below 100% is danger zone!</p> </li> <li> <p>Floating Profit - Changes every tick if positions are open</p> </li> <li> <p>Free Margin - Required for opening new positions</p> </li> <li> <p>Currency - All monetary values in this currency</p> </li> </ol>"},{"location":"MT5Sugar/12.%20Account_Information/AccountInfo/#quick-reference","title":"\ud83d\udca1 Quick Reference","text":"Field Meaning When to use <code>Balance</code> Realized money Performance tracking <code>Equity</code> Real-time value Current account worth <code>Margin</code> Used margin Risk monitoring <code>FreeMargin</code> Available margin Position sizing <code>MarginLevel</code> Safety % Risk alerts <code>Profit</code> Floating P/L Real-time monitoring <p>Summary: AccountInfo structure provides complete account snapshot. Use Balance for historical tracking, Equity for current value, and MarginLevel for risk monitoring. Essential for risk management and account monitoring.</p>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/","title":"MT5Sugar \u00b7 DailyStats Structure","text":"<p>Daily trading statistics structure returned by GetDailyStats(). Contains comprehensive performance metrics for today's trading session.</p>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#structure-definition","title":"\ud83d\udccb Structure Definition","text":"<pre><code>type DailyStats struct {\n    TotalDeals   int       // Total closed deals today\n    WinningDeals int       // Number of profitable deals\n    LosingDeals  int       // Number of losing deals\n    WinRate      float64   // Win rate % (0-100)\n    TotalProfit  float64   // Total realized profit/loss today\n    BestDeal     float64   // Largest profitable deal\n    WorstDeal    float64   // Largest losing deal\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#field-details","title":"\ud83d\udcca Field Details","text":""},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#totaldeals-int","title":"TotalDeals (int)","text":"<ul> <li>What: Total number of closed positions today (00:00 to now)</li> <li>Example: <code>15</code></li> <li>Includes: Both winning and losing trades</li> <li>Excludes: Open positions (not yet closed)</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#winningdeals-int","title":"WinningDeals (int)","text":"<ul> <li>What: Number of profitable closed positions</li> <li>Example: <code>9</code></li> <li>Criteria: Profit &gt; 0 (excludes zero-profit trades)</li> <li>Use: Calculate win rate, performance tracking</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#losingdeals-int","title":"LosingDeals (int)","text":"<ul> <li>What: Number of losing closed positions</li> <li>Example: <code>6</code></li> <li>Criteria: Profit &lt; 0</li> <li>Note: TotalDeals = WinningDeals + LosingDeals (+ zero-profit deals)</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#winrate-float64","title":"WinRate (float64)","text":"<ul> <li>What: Percentage of winning trades</li> <li>Formula: (WinningDeals / TotalDeals) \u00d7 100</li> <li>Range: 0.0 to 100.0</li> <li>Example: <code>60.0</code> (means 60% win rate)</li> <li>Important:</li> <li>Above 60% = Excellent</li> <li>50-60% = Good</li> <li>Below 40% = Concerning</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#totalprofit-float64","title":"TotalProfit (float64)","text":"<ul> <li>What: Sum of all realized profits/losses today</li> <li>Formula: Sum of all deal profits</li> <li>Example: <code>350.75</code> (positive = profit, negative = loss)</li> <li>Currency: Account base currency</li> <li>Excludes: Floating P/L from open positions</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#bestdeal-float64","title":"BestDeal (float64)","text":"<ul> <li>What: Largest single profitable trade today</li> <li>Example: <code>125.50</code></li> <li>Use: Track maximum gain, outlier detection</li> <li>Note: Always positive (or 0 if no winners)</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#worstdeal-float64","title":"WorstDeal (float64)","text":"<ul> <li>What: Largest single losing trade today</li> <li>Example: <code>-87.25</code></li> <li>Use: Risk management, maximum loss tracking</li> <li>Note: Always negative (or 0 if no losers)</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#common-calculations","title":"\ud83c\udfaf Common Calculations","text":""},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#average-win","title":"Average Win","text":"<pre><code>avgWin := 0.0\nif stats.WinningDeals &gt; 0 {\n    // Approximation (need deal details for exact)\n    avgWin = stats.BestDeal / float64(stats.WinningDeals)\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#average-loss","title":"Average Loss","text":"<pre><code>avgLoss := 0.0\nif stats.LosingDeals &gt; 0 {\n    avgLoss = stats.WorstDeal / float64(stats.LosingDeals)\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#riskreward-ratio","title":"Risk:Reward Ratio","text":"<pre><code>riskRewardRatio := 0.0\nif avgLoss != 0 {\n    riskRewardRatio = avgWin / -avgLoss\n}\n// Values: 1:2 = 2.0, 1:1.5 = 1.5, etc.\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#profit-per-trade","title":"Profit Per Trade","text":"<pre><code>profitPerTrade := 0.0\nif stats.TotalDeals &gt; 0 {\n    profitPerTrade = stats.TotalProfit / float64(stats.TotalDeals)\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#loss-rate","title":"Loss Rate","text":"<pre><code>lossRate := 100.0 - stats.WinRate\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#profit-factor","title":"Profit Factor","text":"<pre><code>// Requires individual deal data\nprofitFactor := totalWins / -totalLosses\n// Above 2.0 = excellent, 1.5-2.0 = good, below 1.0 = losing\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#usage-examples","title":"\ud83d\udfe2 Usage Examples","text":""},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#example-1-basic-stats-display","title":"Example 1: Basic stats display","text":"<pre><code>stats, _ := sugar.GetDailyStats()\n\nfmt.Println(\"\ud83d\udcca TODAY'S PERFORMANCE\")\nfmt.Println(\"=====================\")\nfmt.Printf(\"Total trades:   %d\\n\", stats.TotalDeals)\nfmt.Printf(\"Winners:        %d\\n\", stats.WinningDeals)\nfmt.Printf(\"Losers:         %d\\n\", stats.LosingDeals)\nfmt.Printf(\"Win rate:       %.1f%%\\n\", stats.WinRate)\nfmt.Printf(\"Total profit:   $%.2f\\n\", stats.TotalProfit)\nfmt.Printf(\"Best trade:     $%.2f\\n\", stats.BestDeal)\nfmt.Printf(\"Worst trade:    $%.2f\\n\", stats.WorstDeal)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#example-2-performance-rating","title":"Example 2: Performance rating","text":"<pre><code>stats, _ := sugar.GetDailyStats()\n\nrating := \"Unknown\"\nif stats.TotalDeals &gt;= 5 {\n    if stats.WinRate &gt;= 70 &amp;&amp; stats.TotalProfit &gt; 0 {\n        rating = \"\u2b50\u2b50\u2b50 Exceptional\"\n    } else if stats.WinRate &gt;= 60 &amp;&amp; stats.TotalProfit &gt; 0 {\n        rating = \"\u2b50\u2b50 Excellent\"\n    } else if stats.WinRate &gt;= 50 &amp;&amp; stats.TotalProfit &gt; 0 {\n        rating = \"\u2b50 Good\"\n    } else if stats.TotalProfit &gt; 0 {\n        rating = \"\ud83d\udc4d Profitable\"\n    } else if stats.TotalProfit &gt; -500 {\n        rating = \"\ud83d\udcc9 Minor loss\"\n    } else {\n        rating = \"\ud83d\udd34 Significant loss\"\n    }\n} else {\n    rating = \"\u23f3 Insufficient data (need 5+ trades)\"\n}\n\nfmt.Printf(\"Today's rating: %s\\n\", rating)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#example-3-risk-analysis","title":"Example 3: Risk analysis","text":"<pre><code>stats, _ := sugar.GetDailyStats()\n\nfmt.Println(\"\u26a0\ufe0f RISK ANALYSIS\")\nfmt.Println(\"================\")\n\n// Worst trade vs total profit ratio\nif stats.TotalProfit &gt; 0 {\n    worstImpact := (-stats.WorstDeal / stats.TotalProfit) * 100\n    fmt.Printf(\"Worst trade impact: %.1f%% of profit\\n\", worstImpact)\n\n    if worstImpact &gt; 50 {\n        fmt.Println(\"\ud83d\udd34 Single loss took &gt;50% of profit!\")\n    }\n}\n\n// Best vs worst comparison\nif stats.WorstDeal != 0 {\n    ratio := stats.BestDeal / -stats.WorstDeal\n    fmt.Printf(\"Best:Worst ratio: 1:%.2f\\n\", ratio)\n\n    if ratio &lt; 1.0 {\n        fmt.Println(\"\u26a0\ufe0f Largest loss exceeds largest win\")\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#example-4-trading-consistency","title":"Example 4: Trading consistency","text":"<pre><code>stats, _ := sugar.GetDailyStats()\n\nif stats.TotalDeals == 0 {\n    fmt.Println(\"No trades today\")\n    return\n}\n\nprofitPerTrade := stats.TotalProfit / float64(stats.TotalDeals)\nconsistency := \"Unknown\"\n\nif profitPerTrade &gt; 50 {\n    consistency = \"\ud83d\udd25 Highly profitable per trade\"\n} else if profitPerTrade &gt; 20 {\n    consistency = \"\u2705 Good average profit\"\n} else if profitPerTrade &gt; 0 {\n    consistency = \"\ud83d\udc4d Slightly profitable\"\n} else if profitPerTrade &gt; -20 {\n    consistency = \"\ud83d\udcc9 Small average loss\"\n} else {\n    consistency = \"\ud83d\udd34 Large average loss\"\n}\n\nfmt.Printf(\"Avg profit/trade: $%.2f (%s)\\n\", profitPerTrade, consistency)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#example-5-winloss-distribution","title":"Example 5: Win/loss distribution","text":"<pre><code>stats, _ := sugar.GetDailyStats()\n\nif stats.TotalDeals == 0 {\n    return\n}\n\n// Visual representation\nwinPercent := int(stats.WinRate)\nlossPercent := 100 - winPercent\n\nfmt.Println(\"Win/Loss Distribution:\")\nfmt.Printf(\"[\")\nfor i := 0; i &lt; winPercent/2; i++ {\n    fmt.Print(\"=\")\n}\nfmt.Print(\"|\")\nfor i := 0; i &lt; lossPercent/2; i++ {\n    fmt.Print(\"-\")\n}\nfmt.Printf(\"]\\n\")\nfmt.Printf(\"Wins: %d%% | Losses: %d%%\\n\", winPercent, lossPercent)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#example-6-alert-triggers","title":"Example 6: Alert triggers","text":"<pre><code>func checkAlerts(stats *mt5.DailyStats) {\n    // Alert 1: Low win rate\n    if stats.TotalDeals &gt;= 10 &amp;&amp; stats.WinRate &lt; 40 {\n        fmt.Println(\"\ud83d\udea8 ALERT: Win rate below 40%\")\n    }\n\n    // Alert 2: Large loss\n    if stats.WorstDeal &lt; -500 {\n        fmt.Printf(\"\ud83d\udea8 ALERT: Large single loss $%.2f\\n\", stats.WorstDeal)\n    }\n\n    // Alert 3: Daily loss limit\n    if stats.TotalProfit &lt; -1000 {\n        fmt.Printf(\"\ud83d\udea8 ALERT: Daily loss $%.2f exceeds limit\\n\", stats.TotalProfit)\n    }\n\n    // Alert 4: Consecutive losses\n    if stats.LosingDeals &gt;= 5 &amp;&amp; stats.WinningDeals == 0 {\n        fmt.Println(\"\ud83d\udea8 ALERT: 5+ consecutive losses\")\n    }\n\n    // Alert 5: Excellent performance\n    if stats.TotalDeals &gt;= 10 &amp;&amp; stats.WinRate &gt;= 70 &amp;&amp; stats.TotalProfit &gt; 500 {\n        fmt.Println(\"\ud83c\udf89 EXCELLENT: Win rate &gt;70% with &gt;$500 profit!\")\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#example-7-json-export","title":"Example 7: JSON export","text":"<pre><code>stats, _ := sugar.GetDailyStats()\n\n// Pretty print JSON\njsonData, _ := json.MarshalIndent(stats, \"\", \"  \")\nfmt.Println(string(jsonData))\n\n// Output:\n// {\n//   \"TotalDeals\": 15,\n//   \"WinningDeals\": 9,\n//   \"LosingDeals\": 6,\n//   \"WinRate\": 60.0,\n//   \"TotalProfit\": 350.75,\n//   \"BestDeal\": 125.50,\n//   \"WorstDeal\": -87.25\n// }\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#example-8-csv-export","title":"Example 8: CSV export","text":"<pre><code>func exportStatsCSV(stats *mt5.DailyStats) {\n    date := time.Now().Format(\"2006-01-02\")\n\n    csvLine := fmt.Sprintf(\"%s,%d,%d,%d,%.2f,%.2f,%.2f,%.2f\\n\",\n        date,\n        stats.TotalDeals,\n        stats.WinningDeals,\n        stats.LosingDeals,\n        stats.WinRate,\n        stats.TotalProfit,\n        stats.BestDeal,\n        stats.WorstDeal,\n    )\n\n    // Append to CSV file\n    f, _ := os.OpenFile(\"daily_stats.csv\", os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)\n    defer f.Close()\n\n    f.WriteString(csvLine)\n    fmt.Println(\"Stats exported to daily_stats.csv\")\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#example-9-telegram-notification","title":"Example 9: Telegram notification","text":"<pre><code>func sendTelegramReport(stats *mt5.DailyStats) string {\n    emoji := \"\ud83d\udcca\"\n    if stats.TotalProfit &gt; 500 {\n        emoji = \"\ud83d\ude80\"\n    } else if stats.TotalProfit &lt; -500 {\n        emoji = \"\ud83d\udd34\"\n    }\n\n    message := fmt.Sprintf(`\n%s *Daily Trading Report*\n\n\ud83d\udcc8 Performance:\n\u2022 Trades: %d\n\u2022 Win rate: %.1f%%\n\u2022 P/L: $%.2f\n\n\ud83c\udfc6 Best trade: $%.2f\n\ud83d\udcc9 Worst trade: $%.2f\n\nStatus: %s\n`,\n        emoji,\n        stats.TotalDeals,\n        stats.WinRate,\n        stats.TotalProfit,\n        stats.BestDeal,\n        stats.WorstDeal,\n        getStatus(stats),\n    )\n\n    return message\n}\n\nfunc getStatus(stats *mt5.DailyStats) string {\n    if stats.TotalProfit &gt; 0 &amp;&amp; stats.WinRate &gt;= 60 {\n        return \"Excellent \u2705\"\n    } else if stats.TotalProfit &gt; 0 {\n        return \"Profitable \ud83d\udc4d\"\n    } else {\n        return \"Needs improvement \ud83d\udcc9\"\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#example-10-historical-tracking","title":"Example 10: Historical tracking","text":"<pre><code>type StatsHistory struct {\n    Date  string\n    Stats *mt5.DailyStats\n}\n\nvar history []StatsHistory\n\nfunc recordDailyStats(stats *mt5.DailyStats) {\n    record := StatsHistory{\n        Date:  time.Now().Format(\"2006-01-02\"),\n        Stats: stats,\n    }\n\n    history = append(history, record)\n\n    // Calculate weekly averages (last 7 days)\n    if len(history) &gt;= 7 {\n        last7 := history[len(history)-7:]\n\n        totalTrades := 0\n        totalProfit := 0.0\n        totalWinRate := 0.0\n\n        for _, rec := range last7 {\n            totalTrades += rec.Stats.TotalDeals\n            totalProfit += rec.Stats.TotalProfit\n            totalWinRate += rec.Stats.WinRate\n        }\n\n        fmt.Println(\"\\n\ud83d\udcc5 WEEKLY SUMMARY (Last 7 days)\")\n        fmt.Printf(\"Total trades:  %d\\n\", totalTrades)\n        fmt.Printf(\"Total profit:  $%.2f\\n\", totalProfit)\n        fmt.Printf(\"Avg win rate:  %.1f%%\\n\", totalWinRate/7)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#related","title":"\ud83d\udd17 Related","text":"<ul> <li>AccountInfo - account information structure</li> <li>GetDealsToday - raw deal data</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#important-notes","title":"\u26a0\ufe0f Important Notes","text":"<ol> <li> <p>Today's range - 00:00 to current time (server time, not local)</p> </li> <li> <p>Closed positions only - Open positions not included</p> </li> <li> <p>Win rate - Based on closed deals, not tick-by-tick P/L</p> </li> <li> <p>Best/Worst - Absolute values, not averages</p> </li> <li> <p>Zero-profit deals - Excluded from win rate calculation</p> </li> </ol>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#quick-reference","title":"\ud83d\udca1 Quick Reference","text":"Field Range Good value Bad value <code>WinRate</code> 0-100% &gt;60% &lt;40% <code>TotalProfit</code> Any &gt;$0 &lt;-$500 <code>BestDeal</code> \u22650 Large Small <code>WorstDeal</code> \u22640 Small Large <code>TotalDeals</code> \u22650 5-20 &gt;50 (overtrading)"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#performance-benchmarks","title":"\ud83c\udf93 Performance Benchmarks","text":""},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#excellent-day","title":"Excellent Day","text":"<ul> <li>Win rate: &gt;70%</li> <li>Total profit: &gt;$500</li> <li>Profit per trade: &gt;$50</li> <li>Best:Worst ratio: &gt;2:1</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#good-day","title":"Good Day","text":"<ul> <li>Win rate: 55-70%</li> <li>Total profit: &gt;$200</li> <li>Profit per trade: &gt;$20</li> <li>Best:Worst ratio: &gt;1.5:1</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/DailyStats/#concerning-day","title":"Concerning Day","text":"<ul> <li>Win rate: &lt;40%</li> <li>Total profit: &lt;-$500</li> <li>Profit per trade: &lt;-$20</li> <li>Best:Worst ratio: &lt;1:1</li> </ul> <p>Summary: DailyStats structure provides comprehensive daily trading metrics. Use WinRate and TotalProfit for performance assessment, BestDeal/WorstDeal for risk analysis. Essential for daily reports and trading journals.</p>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/","title":"\ud83d\udc64 Get Account Info (<code>GetAccountInfo</code>)","text":"<p>Sugar method: Gets ALL account information in one call - balance, equity, margin, leverage, and more!</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetAccountInfo()</code></li> <li>Package: <code>mt5</code> (MT5Sugar)</li> <li>Underlying calls: <code>service.GetAccountSummary()</code>, <code>GetMargin()</code>, <code>GetFreeMargin()</code>, <code>GetMarginLevel()</code>, <code>GetProfit()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Complete AccountInfo structure</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetAccountInfo() (*AccountInfo, error)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#input","title":"\ud83d\udd3d Input","text":"<p>No parameters required</p>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#output","title":"\u2b06\ufe0f Output","text":"Return Type Description <code>accountInfo</code> <code>*AccountInfo</code> Structure with all account data <code>error</code> <code>error</code> Error if query fails"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#accountinfo-structure","title":"AccountInfo Structure","text":"<pre><code>type AccountInfo struct {\n    Login       int64     // Account login number\n    Balance     float64   // Account balance\n    Equity      float64   // Current equity (balance + floating P/L)\n    Margin      float64   // Used margin\n    FreeMargin  float64   // Free margin available\n    MarginLevel float64   // Margin level percentage\n    Profit      float64   // Total floating profit/loss\n    Currency    string    // Account currency (e.g., \"USD\", \"EUR\")\n    Leverage    int64     // Account leverage (e.g., 100 for 1:100)\n    Company     string    // Broker company name\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Gets complete account snapshot in one method call.</li> <li>Why you need it: Perfect for dashboards, reports, and monitoring.</li> <li>Sanity check: One call instead of 10+ separate method calls.</li> </ul>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Account dashboards - Display complete account status</p> <p>\u2705 Risk monitoring - Check margin level and exposure</p> <p>\u2705 Daily reports - Generate account summary</p> <p>\u2705 Trading bots - Get account state before trading</p>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#1-basic-usage-display-account-info","title":"1) Basic usage - display account info","text":"<pre><code>info, err := sugar.GetAccountInfo()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"  ACCOUNT INFORMATION\\n\")\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\nfmt.Printf(\"Login:        %d\\n\", info.Login)\nfmt.Printf(\"Company:      %s\\n\", info.Company)\nfmt.Printf(\"Currency:     %s\\n\", info.Currency)\nfmt.Printf(\"Leverage:     1:%d\\n\\n\", info.Leverage)\n\nfmt.Printf(\"Balance:      $%.2f\\n\", info.Balance)\nfmt.Printf(\"Equity:       $%.2f\\n\", info.Equity)\nfmt.Printf(\"Profit:       $%.2f\\n\\n\", info.Profit)\n\nfmt.Printf(\"Margin:       $%.2f\\n\", info.Margin)\nfmt.Printf(\"Free Margin:  $%.2f\\n\", info.FreeMargin)\nfmt.Printf(\"Margin Level: %.2f%%\\n\", info.MarginLevel)\nfmt.Printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\\n\")\n\n// Output example:\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n//   ACCOUNT INFORMATION\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Login:        12345678\n// Company:      MetaQuotes Software Corp.\n// Currency:     USD\n// Leverage:     1:100\n//\n// Balance:      $10,000.00\n// Equity:       $10,250.00\n// Profit:       $250.00\n//\n// Margin:       $1,100.00\n// Free Margin:  $9,150.00\n// Margin Level: 931.82%\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#2-check-account-health","title":"2) Check account health","text":"<pre><code>info, err := sugar.GetAccountInfo()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Println(\"Account Health Check:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n// Check 1: Margin level\nif info.MarginLevel &lt; 100 {\n    fmt.Println(\"\ud83d\udd34 CRITICAL: Margin level below 100%!\")\n    fmt.Printf(\"   Current: %.2f%%\\n\", info.MarginLevel)\n} else if info.MarginLevel &lt; 200 {\n    fmt.Println(\"\ud83d\udfe0 WARNING: Margin level below 200%\")\n    fmt.Printf(\"   Current: %.2f%%\\n\", info.MarginLevel)\n} else {\n    fmt.Println(\"\u2705 Margin level healthy\")\n    fmt.Printf(\"   Current: %.2f%%\\n\", info.MarginLevel)\n}\n\n// Check 2: Drawdown\ndrawdown := ((info.Equity - info.Balance) / info.Balance) * 100\nif drawdown &lt; -10 {\n    fmt.Printf(\"\\n\ud83d\udd34 High drawdown: %.2f%%\\n\", drawdown)\n} else if drawdown &lt; -5 {\n    fmt.Printf(\"\\n\ud83d\udfe0 Moderate drawdown: %.2f%%\\n\", drawdown)\n} else {\n    fmt.Printf(\"\\n\u2705 Drawdown acceptable: %.2f%%\\n\", drawdown)\n}\n\n// Check 3: Free margin\nmarginUsage := (info.Margin / info.Equity) * 100\nfmt.Printf(\"\\nMargin usage: %.1f%%\\n\", marginUsage)\n\nif marginUsage &gt; 80 {\n    fmt.Println(\"\ud83d\udd34 Very high margin usage!\")\n} else if marginUsage &gt; 50 {\n    fmt.Println(\"\ud83d\udfe0 High margin usage\")\n} else {\n    fmt.Println(\"\u2705 Safe margin usage\")\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#3-real-time-account-monitor","title":"3) Real-time account monitor","text":"<pre><code>func MonitorAccount(sugar *mt5.MT5Sugar, intervalSeconds int) {\n    ticker := time.NewTicker(time.Duration(intervalSeconds) * time.Second)\n    defer ticker.Stop()\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          ACCOUNT MONITOR (Press Ctrl+C to stop)       \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    for range ticker.C {\n        info, err := sugar.GetAccountInfo()\n        if err != nil {\n            fmt.Printf(\"Error: %v\\n\", err)\n            continue\n        }\n\n        timestamp := time.Now().Format(\"15:04:05\")\n\n        fmt.Printf(\"\\n[%s] Balance: $%.2f | Equity: $%.2f | P/L: $%.2f | Margin: %.1f%%\\n\",\n            timestamp,\n            info.Balance,\n            info.Equity,\n            info.Profit,\n            info.MarginLevel,\n        )\n\n        // Alert if margin level drops\n        if info.MarginLevel &lt; 150 {\n            fmt.Printf(\"\u26a0\ufe0f  WARNING: Low margin level! (%.2f%%)\\n\", info.MarginLevel)\n        }\n\n        // Alert if large loss\n        if info.Profit &lt; -info.Balance*0.05 { // -5% of balance\n            fmt.Printf(\"\ud83d\udd34 ALERT: Large floating loss! ($%.2f)\\n\", info.Profit)\n        }\n    }\n}\n\n// Usage:\nMonitorAccount(sugar, 5) // Update every 5 seconds\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#4-daily-account-report","title":"4) Daily account report","text":"<pre><code>func GenerateDailyReport(sugar *mt5.MT5Sugar) {\n    info, err := sugar.GetAccountInfo()\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    // Get today's deals\n    dealsToday, _ := sugar.GetDealsToday()\n    profitToday, _ := sugar.GetProfitToday()\n    dailyStats, _ := sugar.GetDailyStats()\n\n    // Get positions\n    openPositions, _ := sugar.GetOpenPositions()\n\n    date := time.Now().Format(\"2006-01-02\")\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Printf(\"\u2551          DAILY ACCOUNT REPORT - %s            \u2551\\n\", date)\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Println(\"\\n\ud83d\udcca ACCOUNT STATUS\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Account:      #%d (%s)\\n\", info.Login, info.Company)\n    fmt.Printf(\"Currency:     %s\\n\", info.Currency)\n    fmt.Printf(\"Leverage:     1:%d\\n\\n\", info.Leverage)\n\n    fmt.Printf(\"Balance:      $%10.2f\\n\", info.Balance)\n    fmt.Printf(\"Equity:       $%10.2f\\n\", info.Equity)\n    fmt.Printf(\"Margin:       $%10.2f\\n\", info.Margin)\n    fmt.Printf(\"Free:         $%10.2f\\n\", info.FreeMargin)\n    fmt.Printf(\"Margin Level: %9.2f%%\\n\", info.MarginLevel)\n\n    fmt.Println(\"\\n\ud83d\udcc8 TODAY'S TRADING\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Closed deals:    %d\\n\", len(dealsToday))\n    if dailyStats != nil {\n        fmt.Printf(\"Win rate:        %.1f%%\\n\", dailyStats.WinRate)\n        fmt.Printf(\"Best deal:       $%.2f\\n\", dailyStats.BestDeal)\n        fmt.Printf(\"Worst deal:      $%.2f\\n\", dailyStats.WorstDeal)\n    }\n    fmt.Printf(\"Total profit:    $%.2f\\n\", profitToday)\n\n    fmt.Println(\"\\n\ud83d\udcbc OPEN POSITIONS\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Count:           %d\\n\", len(openPositions))\n    fmt.Printf(\"Floating P/L:    $%.2f\\n\", info.Profit)\n\n    // Calculate daily performance\n    dailyReturn := (profitToday / info.Balance) * 100\n\n    fmt.Println(\"\\n\ud83d\udcca PERFORMANCE\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Daily return:    %.2f%%\\n\", dailyReturn)\n\n    if info.Profit &gt;= 0 {\n        fmt.Printf(\"Total exposure:  +$%.2f\\n\", info.Profit+profitToday)\n    } else {\n        fmt.Printf(\"Total exposure:  -$%.2f\\n\", math.Abs(info.Profit+profitToday))\n    }\n\n    fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n}\n\n// Usage:\nGenerateDailyReport(sugar)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#5-pre-trade-risk-check","title":"5) Pre-trade risk check","text":"<pre><code>func CheckAccountBeforeTrade(sugar *mt5.MT5Sugar, requiredMargin float64) (bool, string) {\n    info, err := sugar.GetAccountInfo()\n    if err != nil {\n        return false, fmt.Sprintf(\"error getting account info: %v\", err)\n    }\n\n    fmt.Println(\"Pre-Trade Risk Check:\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    // Check 1: Margin level\n    if info.MarginLevel &lt; 300 {\n        return false, fmt.Sprintf(\n            \"margin level too low (%.2f%%, need &gt;300%%)\",\n            info.MarginLevel,\n        )\n    }\n    fmt.Printf(\"\u2705 Margin level: %.2f%%\\n\", info.MarginLevel)\n\n    // Check 2: Free margin\n    if requiredMargin &gt; info.FreeMargin {\n        return false, fmt.Sprintf(\n            \"insufficient free margin (need $%.2f, have $%.2f)\",\n            requiredMargin, info.FreeMargin,\n        )\n    }\n    fmt.Printf(\"\u2705 Free margin: $%.2f (need $%.2f)\\n\",\n        info.FreeMargin, requiredMargin)\n\n    // Check 3: Current drawdown\n    drawdown := ((info.Equity - info.Balance) / info.Balance) * 100\n    if drawdown &lt; -10 {\n        return false, fmt.Sprintf(\n            \"high drawdown (%.2f%%, max -10%%)\",\n            drawdown,\n        )\n    }\n    fmt.Printf(\"\u2705 Drawdown: %.2f%%\\n\", drawdown)\n\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Println(\"\u2705 All checks passed - safe to trade\")\n\n    return true, \"\"\n}\n\n// Usage before trading:\nrequiredMargin := 500.0\n\ncanTrade, reason := CheckAccountBeforeTrade(sugar, requiredMargin)\nif !canTrade {\n    fmt.Printf(\"\u274c Cannot trade: %s\\n\", reason)\n    return\n}\n\n// Proceed with trade...\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\nfmt.Printf(\"Trade opened: #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#6-compare-account-snapshots","title":"6) Compare account snapshots","text":"<pre><code>type AccountSnapshot struct {\n    Timestamp time.Time\n    Info      *mt5.AccountInfo\n}\n\nfunc TakeSnapshot(sugar *mt5.MT5Sugar) (*AccountSnapshot, error) {\n    info, err := sugar.GetAccountInfo()\n    if err != nil {\n        return nil, err\n    }\n\n    return &amp;AccountSnapshot{\n        Timestamp: time.Now(),\n        Info:      info,\n    }, nil\n}\n\nfunc CompareSnapshots(before, after *AccountSnapshot) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          ACCOUNT COMPARISON                           \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    duration := after.Timestamp.Sub(before.Timestamp)\n\n    fmt.Printf(\"Time period: %s\\n\\n\", duration.Round(time.Second))\n\n    // Balance change\n    balanceChange := after.Info.Balance - before.Info.Balance\n    balanceChangePercent := (balanceChange / before.Info.Balance) * 100\n\n    fmt.Println(\"BALANCE:\")\n    fmt.Printf(\"  Before: $%.2f\\n\", before.Info.Balance)\n    fmt.Printf(\"  After:  $%.2f\\n\", after.Info.Balance)\n    if balanceChange &gt;= 0 {\n        fmt.Printf(\"  Change: +$%.2f (+%.2f%%)\\n\", balanceChange, balanceChangePercent)\n    } else {\n        fmt.Printf(\"  Change: -$%.2f (%.2f%%)\\n\", math.Abs(balanceChange), balanceChangePercent)\n    }\n\n    // Equity change\n    equityChange := after.Info.Equity - before.Info.Equity\n    equityChangePercent := (equityChange / before.Info.Equity) * 100\n\n    fmt.Println(\"\\nEQUITY:\")\n    fmt.Printf(\"  Before: $%.2f\\n\", before.Info.Equity)\n    fmt.Printf(\"  After:  $%.2f\\n\", after.Info.Equity)\n    if equityChange &gt;= 0 {\n        fmt.Printf(\"  Change: +$%.2f (+%.2f%%)\\n\", equityChange, equityChangePercent)\n    } else {\n        fmt.Printf(\"  Change: -$%.2f (%.2f%%)\\n\", math.Abs(equityChange), equityChangePercent)\n    }\n\n    // Margin level\n    fmt.Println(\"\\nMARGIN LEVEL:\")\n    fmt.Printf(\"  Before: %.2f%%\\n\", before.Info.MarginLevel)\n    fmt.Printf(\"  After:  %.2f%%\\n\", after.Info.MarginLevel)\n\n    fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n}\n\n// Usage:\n// Take snapshot before trading\nsnapshot1, _ := TakeSnapshot(sugar)\n\n// ... do some trading ...\n\ntime.Sleep(1 * time.Hour)\n\n// Take snapshot after trading\nsnapshot2, _ := TakeSnapshot(sugar)\n\n// Compare\nCompareSnapshots(snapshot1, snapshot2)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#7-account-status-widget","title":"7) Account status widget","text":"<pre><code>func ShowAccountWidget(sugar *mt5.MT5Sugar) {\n    info, err := sugar.GetAccountInfo()\n    if err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n        return\n    }\n\n    // Determine account health status\n    var healthStatus string\n    var healthColor string\n\n    if info.MarginLevel &lt; 100 {\n        healthStatus = \"CRITICAL\"\n        healthColor = \"\ud83d\udd34\"\n    } else if info.MarginLevel &lt; 200 {\n        healthStatus = \"WARNING\"\n        healthColor = \"\ud83d\udfe0\"\n    } else if info.MarginLevel &lt; 500 {\n        healthStatus = \"MODERATE\"\n        healthColor = \"\ud83d\udfe1\"\n    } else {\n        healthStatus = \"HEALTHY\"\n        healthColor = \"\ud83d\udfe2\"\n    }\n\n    // Calculate metrics\n    marginUsage := (info.Margin / info.Equity) * 100\n    drawdown := ((info.Equity - info.Balance) / info.Balance) * 100\n\n    fmt.Println(\"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\")\n    fmt.Printf(\"\u2502 Account #%d%-23s\u2502\\n\", info.Login, \"\")\n    fmt.Println(\"\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\")\n    fmt.Printf(\"\u2502 Balance:   $%-28.2f\u2502\\n\", info.Balance)\n    fmt.Printf(\"\u2502 Equity:    $%-28.2f\u2502\\n\", info.Equity)\n    fmt.Printf(\"\u2502 P/L:       $%-28.2f\u2502\\n\", info.Profit)\n    fmt.Println(\"\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\")\n    fmt.Printf(\"\u2502 Margin:    %-29.1f%%\u2502\\n\", marginUsage)\n    fmt.Printf(\"\u2502 Drawdown:  %-29.2f%%\u2502\\n\", drawdown)\n    fmt.Println(\"\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\")\n    fmt.Printf(\"\u2502 Status:    %s %-26s\u2502\\n\", healthColor, healthStatus)\n    fmt.Println(\"\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\")\n}\n\n// Usage:\nShowAccountWidget(sugar)\n\n// Output:\n// \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// \u2502 Account #12345678                      \n// \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// \u2502 Balance:   $10,000.00                   \n// \u2502 Equity:    $10,250.00                   \n// \u2502 P/L:       $250.00                      \n// \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// \u2502 Margin:    10.7%                       \n// \u2502 Drawdown:  2.50%                        \n// \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// \u2502 Status:    \ud83d\udfe2 HEALTHY                  \n// \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#8-export-account-data-to-json","title":"8) Export account data to JSON","text":"<pre><code>import \"encoding/json\"\n\nfunc ExportAccountToJSON(sugar *mt5.MT5Sugar, filename string) error {\n    info, err := sugar.GetAccountInfo()\n    if err != nil {\n        return err\n    }\n\n    // Create export structure with timestamp\n    export := struct {\n        Timestamp   string            `json:\"timestamp\"`\n        AccountInfo *mt5.AccountInfo  `json:\"account_info\"`\n    }{\n        Timestamp:   time.Now().Format(time.RFC3339),\n        AccountInfo: info,\n    }\n\n    // Marshal to JSON\n    data, err := json.MarshalIndent(export, \"\", \"  \")\n    if err != nil {\n        return err\n    }\n\n    // Write to file\n    err = os.WriteFile(filename, data, 0644)\n    if err != nil {\n        return err\n    }\n\n    fmt.Printf(\"\u2705 Account data exported to %s\\n\", filename)\n\n    return nil\n}\n\n// Usage:\nerr := ExportAccountToJSON(sugar, \"account_snapshot.json\")\nif err != nil {\n    fmt.Printf(\"Export failed: %v\\n\", err)\n}\n\n// Result: account_snapshot.json\n// {\n//   \"timestamp\": \"2024-01-15T14:30:00Z\",\n//   \"account_info\": {\n//     \"Login\": 12345678,\n//     \"Balance\": 10000.00,\n//     \"Equity\": 10250.00,\n//     \"Margin\": 1100.00,\n//     \"FreeMargin\": 9150.00,\n//     \"MarginLevel\": 931.82,\n//     \"Profit\": 250.00,\n//     \"Currency\": \"USD\",\n//     \"Leverage\": 100,\n//     \"Company\": \"MetaQuotes Software Corp.\"\n//   }\n// }\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#9-multi-account-manager","title":"9) Multi-account manager","text":"<pre><code>type AccountManager struct {\n    accounts map[string]*mt5.MT5Sugar\n}\n\nfunc NewAccountManager() *AccountManager {\n    return &amp;AccountManager{\n        accounts: make(map[string]*mt5.MT5Sugar),\n    }\n}\n\nfunc (am *AccountManager) AddAccount(name string, sugar *mt5.MT5Sugar) {\n    am.accounts[name] = sugar\n}\n\nfunc (am *AccountManager) ShowAllAccounts() {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          MULTI-ACCOUNT OVERVIEW                       \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    totalBalance := 0.0\n    totalEquity := 0.0\n    totalProfit := 0.0\n\n    for name, sugar := range am.accounts {\n        info, err := sugar.GetAccountInfo()\n        if err != nil {\n            fmt.Printf(\"\\n%s: \u274c Error - %v\\n\", name, err)\n            continue\n        }\n\n        totalBalance += info.Balance\n        totalEquity += info.Equity\n        totalProfit += info.Profit\n\n        fmt.Printf(\"\\n%s:\\n\", name)\n        fmt.Printf(\"  Balance:  $%10.2f\\n\", info.Balance)\n        fmt.Printf(\"  Equity:   $%10.2f\\n\", info.Equity)\n        fmt.Printf(\"  P/L:      $%10.2f\\n\", info.Profit)\n        fmt.Printf(\"  Margin:   %9.2f%%\\n\", info.MarginLevel)\n    }\n\n    fmt.Println(\"\\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"TOTAL ACROSS ALL ACCOUNTS:\\n\")\n    fmt.Printf(\"  Balance:  $%10.2f\\n\", totalBalance)\n    fmt.Printf(\"  Equity:   $%10.2f\\n\", totalEquity)\n    fmt.Printf(\"  P/L:      $%10.2f\\n\", totalProfit)\n    fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n}\n\n// Usage:\nmanager := NewAccountManager()\nmanager.AddAccount(\"Main\", sugar1)\nmanager.AddAccount(\"Backup\", sugar2)\nmanager.AddAccount(\"Testing\", sugar3)\n\nmanager.ShowAllAccounts()\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#10-advanced-account-dashboard","title":"10) Advanced account dashboard","text":"<pre><code>type AccountDashboard struct {\n    sugar *mt5.MT5Sugar\n}\n\nfunc NewAccountDashboard(sugar *mt5.MT5Sugar) *AccountDashboard {\n    return &amp;AccountDashboard{sugar: sugar}\n}\n\nfunc (ad *AccountDashboard) Render() error {\n    // Get account info\n    info, err := ad.sugar.GetAccountInfo()\n    if err != nil {\n        return err\n    }\n\n    // Get additional data\n    positions, _ := ad.sugar.GetOpenPositions()\n    dealsToday, _ := ad.sugar.GetDealsToday()\n    dailyStats, _ := ad.sugar.GetDailyStats()\n\n    // Calculate metrics\n    marginUsage := (info.Margin / info.Equity) * 100\n    drawdown := ((info.Equity - info.Balance) / info.Balance) * 100\n    dailyReturn := 0.0\n    if dailyStats != nil &amp;&amp; len(dealsToday) &gt; 0 {\n        dailyProfit, _ := ad.sugar.GetProfitToday()\n        dailyReturn = (dailyProfit / info.Balance) * 100\n    }\n\n    // Render dashboard\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          TRADING DASHBOARD                            \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Account section\n    fmt.Println(\"\\n\ud83d\udcca ACCOUNT OVERVIEW\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Account:     #%d\\n\", info.Login)\n    fmt.Printf(\"Broker:      %s\\n\", info.Company)\n    fmt.Printf(\"Currency:    %s\\n\", info.Currency)\n    fmt.Printf(\"Leverage:    1:%d\\n\", info.Leverage)\n\n    // Balance section\n    fmt.Println(\"\\n\ud83d\udcb0 BALANCE &amp; EQUITY\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Balance:     $%10.2f\\n\", info.Balance)\n    fmt.Printf(\"Equity:      $%10.2f\\n\", info.Equity)\n    fmt.Printf(\"Floating P/L: $%9.2f\", info.Profit)\n    if info.Profit &gt;= 0 {\n        fmt.Printf(\" \ud83d\udfe2\\n\")\n    } else {\n        fmt.Printf(\" \ud83d\udd34\\n\")\n    }\n    fmt.Printf(\"Drawdown:    %10.2f%%\\n\", drawdown)\n\n    // Margin section\n    fmt.Println(\"\\n\ud83d\udcc8 MARGIN USAGE\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Used:        $%10.2f\\n\", info.Margin)\n    fmt.Printf(\"Free:        $%10.2f\\n\", info.FreeMargin)\n    fmt.Printf(\"Level:       %10.2f%%\", info.MarginLevel)\n\n    if info.MarginLevel &lt; 100 {\n        fmt.Printf(\" \ud83d\udd34\\n\")\n    } else if info.MarginLevel &lt; 200 {\n        fmt.Printf(\" \ud83d\udfe0\\n\")\n    } else {\n        fmt.Printf(\" \ud83d\udfe2\\n\")\n    }\n\n    fmt.Printf(\"Usage:       %10.1f%%\\n\", marginUsage)\n\n    // Positions section\n    fmt.Println(\"\\n\ud83d\udcbc OPEN POSITIONS\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Count:       %d\\n\", len(positions))\n\n    if len(positions) &gt; 0 {\n        buyCount := 0\n        sellCount := 0\n        for _, pos := range positions {\n            if pos.Type == 0 {\n                buyCount++\n            } else {\n                sellCount++\n            }\n        }\n        fmt.Printf(\"BUY:         %d\\n\", buyCount)\n        fmt.Printf(\"SELL:        %d\\n\", sellCount)\n    }\n\n    // Today's trading\n    if dailyStats != nil {\n        fmt.Println(\"\\n\ud83d\udcca TODAY'S PERFORMANCE\")\n        fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n        fmt.Printf(\"Trades:      %d\\n\", dailyStats.TotalDeals)\n        fmt.Printf(\"Win rate:    %.1f%%\\n\", dailyStats.WinRate)\n        fmt.Printf(\"Profit:      $%.2f\", dailyStats.TotalProfit)\n        if dailyStats.TotalProfit &gt;= 0 {\n            fmt.Printf(\" \ud83d\udfe2\\n\")\n        } else {\n            fmt.Printf(\" \ud83d\udd34\\n\")\n        }\n        fmt.Printf(\"Return:      %.2f%%\\n\", dailyReturn)\n    }\n\n    fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n\n    return nil\n}\n\n// Usage:\ndashboard := NewAccountDashboard(sugar)\n\n// Update dashboard every 10 seconds\nticker := time.NewTicker(10 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    // Clear screen (optional)\n    fmt.Print(\"\\033[H\\033[2J\")\n\n    // Render dashboard\n    if err := dashboard.Render(); err != nil {\n        fmt.Printf(\"Error: %v\\n\", err)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83d\udce6 Methods used internally:</p> <ul> <li><code>service.GetAccountSummary()</code> - Get core account data</li> <li><code>GetMargin()</code> - Get used margin</li> <li><code>GetFreeMargin()</code> - Get free margin</li> <li><code>GetMarginLevel()</code> - Get margin level</li> <li><code>GetProfit()</code> - Get floating P/L</li> </ul> <p>\ud83c\udf6c Complementary sugar methods:</p> <ul> <li><code>GetDailyStats()</code> - Get today's trading stats \u2b50</li> <li><code>GetDealsToday()</code> - Get today's closed positions</li> <li><code>GetOpenPositions()</code> - Get currently open positions</li> <li><code>GetBalance()</code> - Get balance only</li> <li><code>GetEquity()</code> - Get equity only</li> </ul> <p>Use cases:</p> <pre><code>// Complete account snapshot\ninfo, _ := sugar.GetAccountInfo()\n\n// Just need balance\nbalance, _ := sugar.GetBalance()\n\n// Full dashboard\ninfo, _ := sugar.GetAccountInfo()\nstats, _ := sugar.GetDailyStats()\npositions, _ := sugar.GetOpenPositions()\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#1-confusing-balance-and-equity","title":"1) Confusing balance and equity","text":"<pre><code>info, _ := sugar.GetAccountInfo()\n\n// \u274c WRONG - using balance to check if can trade\nif info.Balance &gt; 1000 {\n    // Balance doesn't include floating P/L!\n}\n\n// \u2705 CORRECT - use equity (includes floating P/L)\nif info.Equity &gt; 1000 {\n    // Equity = Balance + Floating P/L\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#2-not-checking-margin-level","title":"2) Not checking margin level","text":"<pre><code>// \u274c WRONG - ignoring margin level\ninfo, _ := sugar.GetAccountInfo()\nsugar.BuyMarket(\"EURUSD\", 10.0) // Might cause margin call!\n\n// \u2705 CORRECT - check margin level first\ninfo, _ := sugar.GetAccountInfo()\nif info.MarginLevel &lt; 300 {\n    fmt.Println(\"Margin level too low!\")\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#3-using-stale-data","title":"3) Using stale data","text":"<pre><code>// \u274c WRONG - using old account info\ninfo, _ := sugar.GetAccountInfo()\ntime.Sleep(10 * time.Minute)\n// info is now stale!\nif info.FreeMargin &gt; 1000 {\n    sugar.BuyMarket(\"EURUSD\", 1.0)\n}\n\n// \u2705 CORRECT - get fresh data before trading\ninfo, _ := sugar.GetAccountInfo()\nif info.FreeMargin &gt; 1000 {\n    sugar.BuyMarket(\"EURUSD\", 1.0)\n}\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#4-not-handling-errors","title":"4) Not handling errors","text":"<pre><code>// \u274c WRONG - ignoring errors\ninfo, _ := sugar.GetAccountInfo()\nfmt.Printf(\"Balance: $%.2f\\n\", info.Balance) // Might panic!\n\n// \u2705 CORRECT - check errors\ninfo, err := sugar.GetAccountInfo()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\nfmt.Printf(\"Balance: $%.2f\\n\", info.Balance)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#5-misunderstanding-margin-level","title":"5) Misunderstanding margin level","text":"<pre><code>// \u274c WRONG - thinking higher margin is good\ninfo, _ := sugar.GetAccountInfo()\nif info.Margin &gt; 5000 {\n    fmt.Println(\"High margin is good!\") // NO!\n}\n\n// \u2705 CORRECT - higher margin LEVEL % is good\nif info.MarginLevel &gt; 500 {\n    fmt.Println(\"Healthy margin level\")\n}\n\n// Margin = how much you're using (lower is better)\n// Margin Level = (Equity/Margin)*100 (higher is better)\n</code></pre>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>One call, all data - More efficient than separate calls</p> </li> <li> <p>Check margin level - Below 100% = margin call risk</p> </li> <li> <p>Monitor equity, not balance - Equity includes floating P/L</p> </li> <li> <p>Refresh frequently - Account info changes constantly</p> </li> <li> <p>Use for dashboards - Perfect for real-time monitoring</p> </li> <li> <p>Margin Level formula - (Equity / Margin) \u00d7 100</p> </li> <li> <p>Margin usage - (Margin / Equity) \u00d7 100 = % of equity used</p> </li> </ol>"},{"location":"MT5Sugar/12.%20Account_Information/GetAccountInfo/#account-metrics-explained","title":"\ud83d\udcca Account Metrics Explained","text":"<pre><code>Balance:\n- Your account balance (realized P/L only)\n- Doesn't change until you close positions\n\nEquity:\n- Balance + Floating P/L\n- Changes in real-time with price movements\n- Equity = Balance + Profit\n\nMargin:\n- How much margin you're using\n- Lower is better (less risk)\n\nFree Margin:\n- Equity - Margin\n- How much you can still use for new positions\n\nMargin Level:\n- (Equity / Margin) \u00d7 100\n- Higher is better\n- Below 100% = margin call\n- Above 200% = safe\n- Above 500% = very safe\n\nMargin Usage:\n- (Margin / Equity) \u00d7 100\n- Lower is better\n- Above 80% = very risky\n- Below 30% = conservative\n</code></pre> <p>See also: <code>GetDailyStats.md</code></p>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/","title":"\ud83d\udcb0 Get Account Balance (<code>GetBalance</code>)","text":"<p>Sugar method: Returns current account balance in one line.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetBalance()</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Current balance as <code>float64</code></li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetBalance() (float64, error)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters required Output Type Description <code>balance</code> <code>float64</code> Current account balance <code>error</code> <code>error</code> Error if query fails"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Gets your account balance - the money you have before considering open positions.</li> <li>Why you need it: Check available funds, calculate risk amounts, validate before trading.</li> <li>Sanity check: Balance \u2264 Equity (equity includes floating P/L).</li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Before trading - Check if you have enough funds</p> <p>\u2705 Risk calculation - Calculate position size based on balance</p> <p>\u2705 Monitoring - Track account value</p> <p>\u2705 Reporting - Generate account reports</p> <p>\u2705 Validation - Ensure sufficient funds for trading</p>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>balance, err := sugar.GetBalance()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Balance: %.2f\\n\", balance)\n// Output: Balance: 10000.00\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#2-check-before-trading","title":"2) Check before trading","text":"<pre><code>balance, _ := sugar.GetBalance()\n\nif balance &lt; 1000 {\n    fmt.Println(\"\u274c Insufficient balance for trading\")\n    return\n}\n\nfmt.Println(\"\u2705 Balance sufficient - proceeding with trade\")\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#3-calculate-risk-amount","title":"3) Calculate risk amount","text":"<pre><code>balance, _ := sugar.GetBalance()\nriskPercent := 2.0\n\nriskAmount := balance * riskPercent / 100.0\n\nfmt.Printf(\"Balance:     $%.2f\\n\", balance)\nfmt.Printf(\"Risk (2%%):   $%.2f\\n\", riskAmount)\n\n// Better: use CalculatePositionSize()\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", riskPercent, 50)\nfmt.Printf(\"Lot size:    %.2f\\n\", lotSize)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#4-track-balance-changes","title":"4) Track balance changes","text":"<pre><code>initialBalance, _ := sugar.GetBalance()\nfmt.Printf(\"Starting balance: $%.2f\\n\", initialBalance)\n\n// ... Trading operations ...\ntime.Sleep(1 * time.Hour)\n\ncurrentBalance, _ := sugar.GetBalance()\nchange := currentBalance - initialBalance\nchangePercent := (change / initialBalance) * 100\n\nfmt.Printf(\"\\nFinal balance: $%.2f\\n\", currentBalance)\nfmt.Printf(\"Change:        $%.2f (%.2f%%)\\n\", change, changePercent)\n\n// Output:\n// Starting balance: $10000.00\n// Final balance: $10250.00\n// Change:        $250.00 (2.50%)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#5-account-dashboard","title":"5) Account dashboard","text":"<pre><code>balance, _ := sugar.GetBalance()\nequity, _ := sugar.GetEquity()\nmargin, _ := sugar.GetMargin()\nfreeMargin, _ := sugar.GetFreeMargin()\nprofit, _ := sugar.GetProfit()\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551       ACCOUNT DASHBOARD               \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Balance:       $%.2f\\n\", balance)\nfmt.Printf(\"Equity:        $%.2f\\n\", equity)\nfmt.Printf(\"Profit/Loss:   $%.2f\\n\", profit)\nfmt.Printf(\"Margin Used:   $%.2f\\n\", margin)\nfmt.Printf(\"Free Margin:   $%.2f\\n\", freeMargin)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#6-validate-minimum-balance","title":"6) Validate minimum balance","text":"<pre><code>func ValidateMinimumBalance(sugar *mt5.MT5Sugar, minBalance float64) error {\n    balance, err := sugar.GetBalance()\n    if err != nil {\n        return fmt.Errorf(\"failed to get balance: %w\", err)\n    }\n\n    if balance &lt; minBalance {\n        return fmt.Errorf(\"balance $%.2f below minimum $%.2f\", balance, minBalance)\n    }\n\n    return nil\n}\n\n// Usage:\nerr := ValidateMinimumBalance(sugar, 1000.0)\nif err != nil {\n    fmt.Printf(\"\u274c %v\\n\", err)\n    return\n}\n\nfmt.Println(\"\u2705 Balance check passed\")\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other balance methods:</p> <ul> <li><code>GetEquity()</code> - Balance + floating P/L</li> <li><code>GetMargin()</code> - Used margin</li> <li><code>GetFreeMargin()</code> - Available margin for trading</li> <li><code>GetProfit()</code> - Current floating profit/loss</li> <li><code>GetAccountInfo()</code> - Get all account data at once</li> </ul> <p>\ud83d\udca1 Recommended pattern: <pre><code>// Instead of calling GetBalance, GetEquity, etc separately:\naccountInfo, _ := sugar.GetAccountInfo()\n// Now you have: Balance, Equity, Margin, FreeMargin, Profit, etc.\n</code></pre></p>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#1-confusing-balance-vs-equity","title":"1) Confusing Balance vs Equity","text":"<pre><code>// \u274c WRONG - using Balance when you need Equity\nbalance, _ := sugar.GetBalance() // Doesn't include open positions!\n\n// \u2705 CORRECT - use Equity for total account value\nequity, _ := sugar.GetEquity() // Includes floating P/L\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#2-not-checking-for-errors","title":"2) Not checking for errors","text":"<pre><code>// \u274c WRONG - ignoring errors\nbalance, _ := sugar.GetBalance()\nfmt.Printf(\"Balance: $%.2f\\n\", balance) // Might be 0 if error!\n\n// \u2705 CORRECT - check errors\nbalance, err := sugar.GetBalance()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\nfmt.Printf(\"Balance: $%.2f\\n\", balance)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetBalance/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Use GetAccountInfo() - More efficient than calling multiple methods</p> </li> <li> <p>Balance for risk calculation - Use balance (not equity) for position sizing</p> </li> <li> <p>Check before trading - Always verify sufficient balance</p> </li> <li> <p>Track changes - Monitor balance to measure performance</p> </li> <li> <p>Equity is reality - Balance is historical, Equity is current</p> </li> </ol> <p>See also: <code>GetEquity.md</code>, <code>GetAccountInfo.md</code></p>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/","title":"\ud83d\udc8e Get Account Equity (<code>GetEquity</code>)","text":"<p>Sugar method: Returns current account equity (balance + floating P/L).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetEquity()</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Current equity as <code>float64</code></li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetEquity() (float64, error)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Output Type Description <code>equity</code> <code>float64</code> Current account equity (Balance + Floating P/L) <code>error</code> <code>error</code> Error if query fails"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Your REAL account value = Balance + Floating Profit/Loss from open positions.</li> <li>Why you need it: See your actual current worth, calculate margin level, monitor risk.</li> <li>Sanity check: Equity = Balance + Profit. If no open positions, Equity = Balance.</li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#formula","title":"\ud83e\uddee Formula","text":"<pre><code>Equity = Balance + Floating Profit/Loss\n\nExamples:\n  Balance: $10,000, Open P/L: +$200  \u2192 Equity: $10,200\n  Balance: $10,000, Open P/L: -$150  \u2192 Equity: $9,850\n  Balance: $10,000, No positions     \u2192 Equity: $10,000\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Risk monitoring - Check if equity is dropping dangerously</p> <p>\u2705 Margin level calculation - Equity / Margin \u00d7 100%</p> <p>\u2705 Stop-loss for account - Close all if equity drops below X</p> <p>\u2705 Performance tracking - Real-time account value</p> <p>\u2705 Margin call prevention - Monitor equity vs margin</p>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>equity, err := sugar.GetEquity()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Equity: $%.2f\\n\", equity)\n// Output: Equity: $10250.00\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#2-compare-balance-vs-equity","title":"2) Compare Balance vs Equity","text":"<pre><code>balance, _ := sugar.GetBalance()\nequity, _ := sugar.GetEquity()\nprofit, _ := sugar.GetProfit()\n\nfmt.Printf(\"Balance:  $%.2f\\n\", balance)\nfmt.Printf(\"Equity:   $%.2f\\n\", equity)\nfmt.Printf(\"Profit:   $%.2f\\n\", profit)\nfmt.Printf(\"Verify:   %.2f + %.2f = %.2f \u2705\\n\", balance, profit, equity)\n\n// Output:\n// Balance:  $10000.00\n// Equity:   $10250.00\n// Profit:   $250.00\n// Verify:   10000.00 + 250.00 = 10250.00 \u2705\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#3-monitor-drawdown","title":"3) Monitor drawdown","text":"<pre><code>initialEquity, _ := sugar.GetEquity()\nmaxDrawdownPercent := 10.0 // Stop if lose 10%\n\nfor {\n    currentEquity, _ := sugar.GetEquity()\n    drawdown := (initialEquity - currentEquity) / initialEquity * 100\n\n    fmt.Printf(\"Equity: $%.2f (Drawdown: %.2f%%)\\n\", currentEquity, drawdown)\n\n    if drawdown &gt; maxDrawdownPercent {\n        fmt.Printf(\"\ud83d\udea8 Max drawdown reached! Closing all positions...\\n\")\n        sugar.CloseAllPositions()\n        break\n    }\n\n    time.Sleep(10 * time.Second)\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#4-calculate-margin-level","title":"4) Calculate margin level","text":"<pre><code>equity, _ := sugar.GetEquity()\nmargin, _ := sugar.GetMargin()\n\nif margin == 0 {\n    fmt.Println(\"No positions open - margin level: N/A\")\n} else {\n    marginLevel := (equity / margin) * 100\n    fmt.Printf(\"Equity:        $%.2f\\n\", equity)\n    fmt.Printf(\"Margin:        $%.2f\\n\", margin)\n    fmt.Printf(\"Margin Level:  %.2f%%\\n\", marginLevel)\n\n    if marginLevel &lt; 100 {\n        fmt.Println(\"\u26a0\ufe0f  WARNING: Margin level below 100%!\")\n    }\n}\n\n// Output:\n// Equity:        $10200.00\n// Margin:        $500.00\n// Margin Level:  2040.00%\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#5-equity-based-stop-loss","title":"5) Equity-based stop loss","text":"<pre><code>func MonitorEquityStopLoss(sugar *mt5.MT5Sugar, stopLossEquity float64) {\n    ticker := time.NewTicker(5 * time.Second)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        equity, _ := sugar.GetEquity()\n\n        if equity &lt; stopLossEquity {\n            fmt.Printf(\"\ud83d\udea8 Equity $%.2f below stop loss $%.2f\\n\",\n                equity, stopLossEquity)\n            fmt.Println(\"   Closing all positions...\")\n\n            sugar.CloseAllPositions()\n            fmt.Println(\"   All positions closed!\")\n            return\n        }\n    }\n}\n\n// Run in background\ngo MonitorEquityStopLoss(sugar, 9000.0) // Stop if equity drops below $9000\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#6-performance-dashboard","title":"6) Performance dashboard","text":"<pre><code>balance, _ := sugar.GetBalance()\nequity, _ := sugar.GetEquity()\nprofit, _ := sugar.GetProfit()\nprofitPercent := (profit / balance) * 100\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551         ACCOUNT PERFORMANCE           \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Balance:       $%.2f\\n\", balance)\nfmt.Printf(\"Equity:        $%.2f\\n\", equity)\nfmt.Printf(\"Floating P/L:  $%.2f (%.2f%%)\\n\", profit, profitPercent)\n\nif profit &gt; 0 {\n    fmt.Println(\"Status:        \u2705 PROFIT\")\n} else if profit &lt; 0 {\n    fmt.Println(\"Status:        \u274c LOSS\")\n} else {\n    fmt.Println(\"Status:        \u2796 BREAKEVEN\")\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<ul> <li><code>GetBalance()</code> - Account balance (without open positions)</li> <li><code>GetProfit()</code> - Floating profit/loss</li> <li><code>GetMargin()</code> - Used margin</li> <li><code>GetMarginLevel()</code> - Margin level percentage</li> <li><code>GetAccountInfo()</code> - All account data at once \u2b50</li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#1-using-equity-for-position-sizing","title":"1) Using Equity for position sizing","text":"<pre><code>// \u274c WRONG - don't use Equity for risk calculation\nequity, _ := sugar.GetEquity()\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50) // Uses Balance internally \u2705\n\n// Equity changes with every tick - use Balance for consistent risk!\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#2-not-monitoring-equity-in-live-trading","title":"2) Not monitoring equity in live trading","text":"<pre><code>// \u274c WRONG - only checking balance\nbalance, _ := sugar.GetBalance()\n// Missing: equity might be much lower due to open losses!\n\n// \u2705 CORRECT - monitor equity for real account value\nequity, _ := sugar.GetEquity()\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetEquity/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>Equity is reality - This is your real account value RIGHT NOW</li> <li>Monitor for margin calls - If Equity/Margin &lt; 100%, danger!</li> <li>Use for drawdown limits - Stop trading if equity drops X%</li> <li>Balance for position sizing - But equity for risk monitoring</li> <li>Equity &lt; Balance = losing - Floating losses on open positions</li> </ol> <p>See also: <code>GetBalance.md</code>, <code>GetProfit.md</code>, <code>GetMarginLevel.md</code></p>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetFreeMargin/","title":"\ud83d\udcb8 Get Free Margin (<code>GetFreeMargin</code>)","text":"<p>Sugar method: Returns margin available for opening new positions.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetFreeMargin()</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Free margin as <code>float64</code></li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetFreeMargin/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetFreeMargin() (float64, error)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetFreeMargin/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Money available for opening NEW positions (Equity - Used Margin).</li> <li>Why you need it: Check if you can open more positions, prevent margin calls.</li> <li>Sanity check: Free Margin = Equity - Used Margin.</li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetFreeMargin/#formula","title":"\ud83e\uddee Formula","text":"<pre><code>Free Margin = Equity - Used Margin\n\nExample:\n  Equity: $10,000\n  Margin: $500\n  Free Margin: $9,500\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetFreeMargin/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/2.%20Balance_Margin/GetFreeMargin/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>freeMargin, err := sugar.GetFreeMargin()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Free Margin: $%.2f\\n\", freeMargin)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetFreeMargin/#2-check-before-opening-position","title":"2) Check before opening position","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Calculate required margin\nrequiredMargin, _ := sugar.CalculateRequiredMargin(symbol, volume)\nfreeMargin, _ := sugar.GetFreeMargin()\n\nfmt.Printf(\"Required: $%.2f\\n\", requiredMargin)\nfmt.Printf(\"Available: $%.2f\\n\", freeMargin)\n\nif requiredMargin &gt; freeMargin {\n    fmt.Println(\"\u274c Insufficient margin!\")\n    return\n}\n\n// Safe to open\nticket, _ := sugar.BuyMarket(symbol, volume)\nfmt.Printf(\"\u2705 Position #%d opened\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetFreeMargin/#3-calculate-max-tradeable-lots","title":"3) Calculate max tradeable lots","text":"<pre><code>func GetMaxTradableLots(sugar *mt5.MT5Sugar, symbol string) float64 {\n    freeMargin, _ := sugar.GetFreeMargin()\n\n    // Use 80% of free margin for safety\n    safeMargin := freeMargin * 0.8\n\n    // Calculate max lots\n    maxLots, _ := sugar.GetMaxLotSize(symbol)\n\n    requiredForMax, _ := sugar.CalculateRequiredMargin(symbol, maxLots)\n\n    if requiredForMax &lt;= safeMargin {\n        return maxLots\n    }\n\n    // Scale down proportionally\n    return maxLots * (safeMargin / requiredForMax)\n}\n\nmaxLots := GetMaxTradableLots(sugar, \"EURUSD\")\nfmt.Printf(\"Max tradeable: %.2f lots\\n\", maxLots)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetFreeMargin/#4-margin-availability-check","title":"4) Margin availability check","text":"<pre><code>freeMargin, _ := sugar.GetFreeMargin()\nequity, _ := sugar.GetEquity()\n\navailabilityPercent := (freeMargin / equity) * 100\n\nfmt.Printf(\"Free Margin:  $%.2f (%.1f%% of equity)\\n\",\n    freeMargin, availabilityPercent)\n\nif availabilityPercent &gt; 80 {\n    fmt.Println(\"\u2705 Plenty of margin available\")\n} else if availabilityPercent &gt; 50 {\n    fmt.Println(\"\u26a0\ufe0f  Moderate margin usage\")\n} else if availabilityPercent &gt; 20 {\n    fmt.Println(\"\ud83d\udea8 High margin usage - be careful!\")\n} else {\n    fmt.Println(\"\ud83d\udd34 CRITICAL: Very low free margin!\")\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetFreeMargin/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<ul> <li><code>GetMargin()</code> - Used margin</li> <li><code>GetMarginLevel()</code> - Margin level percentage</li> <li><code>GetMaxLotSize()</code> - Max lots you can trade</li> <li><code>CanOpenPosition()</code> - Validate before trading \u2b50</li> </ul> <p>See also: <code>GetMargin.md</code>, <code>CanOpenPosition.md</code></p>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMargin/","title":"\ud83d\udd12 Get Used Margin (<code>GetMargin</code>)","text":"<p>Sugar method: Returns margin currently used by open positions.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetMargin()</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Used margin as <code>float64</code></li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMargin/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetMargin() (float64, error)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMargin/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Money \"locked\" as collateral for your open positions.</li> <li>Why you need it: Calculate how much margin you're using, prevent margin calls.</li> <li>Sanity check: No open positions = Margin is 0. More positions = more margin used.</li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMargin/#formula","title":"\ud83e\uddee Formula","text":"<pre><code>Margin = Sum of margin required for all open positions\n\nMargin Level = (Equity / Margin) \u00d7 100%\n\nIf Margin Level &lt; 100% \u2192 Margin Call risk!\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMargin/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/2.%20Balance_Margin/GetMargin/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>margin, err := sugar.GetMargin()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Used Margin: $%.2f\\n\", margin)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMargin/#2-check-margin-usage","title":"2) Check margin usage","text":"<pre><code>equity, _ := sugar.GetEquity()\nmargin, _ := sugar.GetMargin()\nfreeMargin, _ := sugar.GetFreeMargin()\n\nfmt.Printf(\"Equity:       $%.2f\\n\", equity)\nfmt.Printf(\"Used Margin:  $%.2f (%.1f%%)\\n\", margin, (margin/equity)*100)\nfmt.Printf(\"Free Margin:  $%.2f (%.1f%%)\\n\", freeMargin, (freeMargin/equity)*100)\n\n// Output:\n// Equity:       $10000.00\n// Used Margin:  $500.00 (5.0%)\n// Free Margin:  $9500.00 (95.0%)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMargin/#3-prevent-over-leverage","title":"3) Prevent over-leverage","text":"<pre><code>func CanOpenNewPosition(sugar *mt5.MT5Sugar, requiredMargin float64) bool {\n    freeMargin, _ := sugar.GetFreeMargin()\n\n    safetyBuffer := 0.2 // Keep 20% buffer\n    availableMargin := freeMargin * (1 - safetyBuffer)\n\n    if requiredMargin &gt; availableMargin {\n        fmt.Printf(\"\u274c Cannot open: Need $%.2f, Have $%.2f (with buffer)\\n\",\n            requiredMargin, availableMargin)\n        return false\n    }\n\n    return true\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMargin/#4-margin-usage-dashboard","title":"4) Margin usage dashboard","text":"<pre><code>equity, _ := sugar.GetEquity()\nmargin, _ := sugar.GetMargin()\nmarginLevel, _ := sugar.GetMarginLevel()\npositions, _ := sugar.CountOpenPositions()\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551          MARGIN STATUS                \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Open Positions:  %d\\n\", positions)\nfmt.Printf(\"Equity:          $%.2f\\n\", equity)\nfmt.Printf(\"Margin Used:     $%.2f\\n\", margin)\nfmt.Printf(\"Margin Level:    %.2f%%\\n\", marginLevel)\n\nif marginLevel &lt; 200 {\n    fmt.Println(\"\u26a0\ufe0f  WARNING: Low margin level!\")\n} else {\n    fmt.Println(\"\u2705 Margin level healthy\")\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMargin/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<ul> <li><code>GetFreeMargin()</code> - Available margin</li> <li><code>GetMarginLevel()</code> - Margin level percentage</li> <li><code>GetEquity()</code> - Total account value</li> <li><code>CalculateRequiredMargin()</code> - Margin needed for a position</li> </ul> <p>See also: <code>GetFreeMargin.md</code>, <code>GetMarginLevel.md</code></p>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/","title":"\ud83d\udcca Get Margin Level (<code>GetMarginLevel</code>)","text":"<p>Sugar method: Returns margin level as percentage (Equity/Margin \u00d7 100%).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetMarginLevel()</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Margin level as <code>float64</code> (percentage)</li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetMarginLevel() (float64, error)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Ratio of Equity to Margin, expressed as percentage.</li> <li>Why you need it: Monitor margin call risk. Below 100% = margin call territory!</li> <li>Sanity check: Higher is better. 1000% = safe, 100% = dangerous, &lt;100% = margin call.</li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/#formula","title":"\ud83e\uddee Formula","text":"<pre><code>Margin Level = (Equity / Margin) \u00d7 100%\n\nExamples:\n  Equity: $10,000, Margin: $500 \u2192 2000% (very safe)\n  Equity: $10,000, Margin: $5,000 \u2192 200% (safe)\n  Equity: $5,000, Margin: $5,000 \u2192 100% (margin call risk!)\n  Equity: $4,500, Margin: $5,000 \u2192 90% (MARGIN CALL!)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/#margin-level-zones","title":"\u26a0\ufe0f Margin Level Zones","text":"Level Status Description &gt; 1000% \ud83d\udfe2 Excellent Very safe, plenty of margin 500-1000% \ud83d\udfe2 Good Safe margin usage 200-500% \ud83d\udfe1 Moderate Acceptable but monitor 100-200% \ud83d\udfe0 Warning High risk - reduce positions &lt; 100% \ud83d\udd34 Danger MARGIN CALL TERRITORY!"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>marginLevel, err := sugar.GetMarginLevel()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Margin Level: %.2f%%\\n\", marginLevel)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/#2-margin-level-monitoring","title":"2) Margin level monitoring","text":"<pre><code>func MonitorMarginLevel(sugar *mt5.MT5Sugar) {\n    ticker := time.NewTicker(10 * time.Second)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        marginLevel, _ := sugar.GetMarginLevel()\n\n        fmt.Printf(\"Margin Level: %.2f%% \", marginLevel)\n\n        if marginLevel &gt; 500 {\n            fmt.Println(\"\ud83d\udfe2 SAFE\")\n        } else if marginLevel &gt; 200 {\n            fmt.Println(\"\ud83d\udfe1 MODERATE\")\n        } else if marginLevel &gt; 100 {\n            fmt.Println(\"\ud83d\udfe0 WARNING\")\n        } else {\n            fmt.Println(\"\ud83d\udd34 DANGER - MARGIN CALL RISK!\")\n            sugar.CloseAllPositions() // Emergency close\n        }\n    }\n}\n\ngo MonitorMarginLevel(sugar)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/#3-pre-trade-margin-check","title":"3) Pre-trade margin check","text":"<pre><code>func SafeToTrade(sugar *mt5.MT5Sugar, minMarginLevel float64) bool {\n    marginLevel, _ := sugar.GetMarginLevel()\n\n    if marginLevel &lt; minMarginLevel {\n        fmt.Printf(\"\u274c Margin level %.2f%% below minimum %.2f%%\\n\",\n            marginLevel, minMarginLevel)\n        return false\n    }\n\n    return true\n}\n\n// Before opening new position\nif !SafeToTrade(sugar, 300.0) {\n    fmt.Println(\"Not safe to open new positions\")\n    return\n}\n\nsugar.BuyMarket(\"EURUSD\", 0.1)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/#4-complete-margin-dashboard","title":"4) Complete margin dashboard","text":"<pre><code>equity, _ := sugar.GetEquity()\nmargin, _ := sugar.GetMargin()\nfreeMargin, _ := sugar.GetFreeMargin()\nmarginLevel, _ := sugar.GetMarginLevel()\npositions, _ := sugar.CountOpenPositions()\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551        MARGIN LEVEL REPORT            \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Open Positions:   %d\\n\", positions)\nfmt.Printf(\"Equity:           $%.2f\\n\", equity)\nfmt.Printf(\"Margin Used:      $%.2f\\n\", margin)\nfmt.Printf(\"Free Margin:      $%.2f\\n\", freeMargin)\nfmt.Printf(\"Margin Level:     %.2f%%\\n\", marginLevel)\nfmt.Println()\n\nif marginLevel &gt;= 500 {\n    fmt.Println(\"Status: \ud83d\udfe2 EXCELLENT - Very safe\")\n} else if marginLevel &gt;= 200 {\n    fmt.Println(\"Status: \ud83d\udfe1 MODERATE - Monitor closely\")\n} else if marginLevel &gt;= 100 {\n    fmt.Println(\"Status: \ud83d\udfe0 WARNING - Reduce positions!\")\n} else {\n    fmt.Println(\"Status: \ud83d\udd34 CRITICAL - Margin call risk!\")\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetMarginLevel/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<ul> <li><code>GetEquity()</code> - Total account value</li> <li><code>GetMargin()</code> - Used margin</li> <li><code>GetFreeMargin()</code> - Available margin</li> <li><code>CloseAllPositions()</code> - Emergency close when margin low</li> </ul> <p>See also: <code>GetEquity.md</code>, <code>GetMargin.md</code></p>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/","title":"\ud83d\udcc8 Get Floating Profit/Loss (<code>GetProfit</code>)","text":"<p>Sugar method: Returns current floating profit/loss from all open positions.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetProfit()</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Floating P/L as <code>float64</code></li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetProfit() (float64, error)\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Total unrealized profit/loss from ALL open positions (not closed deals!).</li> <li>Why you need it: Monitor performance in real-time, set profit targets, manage risk.</li> <li>Sanity check: Positive = winning, Negative = losing, Zero = breakeven or no positions.</li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#formula","title":"\ud83e\uddee Formula","text":"<pre><code>Floating Profit = Sum of profit from all open positions\n\nEquity = Balance + Floating Profit\n\nExamples:\n  3 positions: +$100, +$50, -$30 \u2192 Total Profit: +$120\n  No open positions \u2192 Profit: $0\n  All losing: -$50, -$80 \u2192 Total Profit: -$130\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>profit, err := sugar.GetProfit()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Floating P/L: $%.2f\\n\", profit)\n\nif profit &gt; 0 {\n    fmt.Println(\"\u2705 Currently winning\")\n} else if profit &lt; 0 {\n    fmt.Println(\"\u274c Currently losing\")\n} else {\n    fmt.Println(\"\u2796 Breakeven\")\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#2-close-all-at-profit-target","title":"2) Close all at profit target","text":"<pre><code>func MonitorProfitTarget(sugar *mt5.MT5Sugar, targetProfit float64) {\n    ticker := time.NewTicker(5 * time.Second)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        profit, _ := sugar.GetProfit()\n\n        fmt.Printf(\"Current P/L: $%.2f (Target: $%.2f)\\n\", profit, targetProfit)\n\n        if profit &gt;= targetProfit {\n            fmt.Printf(\"\ud83c\udfaf Profit target reached! Closing all positions...\\n\")\n            sugar.CloseAllPositions()\n            fmt.Println(\"\u2705 All positions closed\")\n            return\n        }\n    }\n}\n\n// Run in background\ngo MonitorProfitTarget(sugar, 500.0) // Close all when profit hits $500\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#3-track-profit-percentage","title":"3) Track profit percentage","text":"<pre><code>balance, _ := sugar.GetBalance()\nprofit, _ := sugar.GetProfit()\n\nprofitPercent := (profit / balance) * 100\n\nfmt.Printf(\"Balance:       $%.2f\\n\", balance)\nfmt.Printf(\"Floating P/L:  $%.2f (%.2f%%)\\n\", profit, profitPercent)\n\nif profitPercent &gt; 2 {\n    fmt.Println(\"\ud83c\udf89 Great performance!\")\n} else if profitPercent &lt; -2 {\n    fmt.Println(\"\u26a0\ufe0f  Consider closing losing positions\")\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#4-daily-profit-monitoring","title":"4) Daily profit monitoring","text":"<pre><code>startBalance, _ := sugar.GetBalance()\nstartTime := time.Now()\n\nticker := time.NewTicker(1 * time.Minute)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    profit, _ := sugar.GetProfit()\n    duration := time.Since(startTime)\n\n    fmt.Printf(\"[%02d:%02d] Floating P/L: $%.2f\\n\",\n        int(duration.Hours()),\n        int(duration.Minutes())%60,\n        profit)\n\n    // Close all if daily loss limit reached\n    if profit &lt; -200 {\n        fmt.Println(\"\ud83d\uded1 Daily loss limit reached - closing all\")\n        sugar.CloseAllPositions()\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#5-real-time-pl-dashboard","title":"5) Real-time P/L dashboard","text":"<pre><code>balance, _ := sugar.GetBalance()\nequity, _ := sugar.GetEquity()\nprofit, _ := sugar.GetProfit()\npositions, _ := sugar.CountOpenPositions()\n\nprofitPercent := (profit / balance) * 100\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      REAL-TIME PERFORMANCE            \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Open Positions:   %d\\n\", positions)\nfmt.Printf(\"Balance:          $%.2f\\n\", balance)\nfmt.Printf(\"Equity:           $%.2f\\n\", equity)\nfmt.Printf(\"Floating P/L:     $%.2f (%.2f%%)\\n\", profit, profitPercent)\nfmt.Println()\n\nif profit &gt; 0 {\n    fmt.Printf(\"\u2705 UP by $%.2f from balance\\n\", profit)\n} else if profit &lt; 0 {\n    fmt.Printf(\"\u274c DOWN by $%.2f from balance\\n\", -profit)\n} else {\n    fmt.Println(\"\u2796 At breakeven\")\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<ul> <li><code>GetBalance()</code> - Account balance</li> <li><code>GetEquity()</code> - Balance + Profit</li> <li><code>GetTotalProfit()</code> - Same as GetProfit()</li> <li><code>GetProfitBySymbol()</code> - Profit for specific symbol</li> <li><code>GetDealsToday()</code> - Today's closed deals (realized profit)</li> </ul>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#1-confusing-floating-vs-realized-profit","title":"1) Confusing floating vs realized profit","text":"<pre><code>// \u274c WRONG - GetProfit() is FLOATING, not realized\nprofit, _ := sugar.GetProfit()\nfmt.Println(\"Money in my pocket:\", profit) // WRONG! It's not realized yet!\n\n// \u2705 CORRECT - for realized profit, use history\nrealizedToday, _ := sugar.GetProfitToday() // Actual money made today\n</code></pre>"},{"location":"MT5Sugar/2.%20Balance_Margin/GetProfit/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>Floating = not yours yet - Only realized profit is real</li> <li>Monitor vs balance % - Track profit as % of balance</li> <li>Set profit targets - Close all when target reached</li> <li>Set loss limits - Close all if loss exceeds limit</li> <li>Changes every tick - Profit updates in real-time</li> </ol> <p>See also: <code>GetEquity.md</code>, <code>GetProfitToday.md</code></p>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/","title":"\ud83d\udcc8 Get ASK Price (<code>GetAsk</code>)","text":"<p>Sugar method: Returns current ASK price for a symbol (price at which you can BUY).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetAsk(symbol)</code></li> <li>Timeout: 3 seconds</li> <li>Returns: ASK price as <code>float64</code></li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetAsk(symbol string) (float64, error)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\") Output Type Description <code>ask</code> <code>float64</code> Current ASK price <code>error</code> <code>error</code> Error if symbol not found"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Current ASK price - the price you pay when BUYING.</li> <li>Why you need it: Know exact entry price for BUY orders, calculate SL/TP levels.</li> <li>Sanity check: ASK &gt; BID (always higher than bid price).</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Before BUY orders - Know exact entry price</p> <p>\u2705 SL/TP calculation - Calculate levels based on current price</p> <p>\u2705 Price monitoring - Track market movement</p> <p>\u2705 Spread checking - Compare with BID to get spread</p>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>ask, err := sugar.GetAsk(\"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"EURUSD ASK: %.5f\\n\", ask)\n// Output: EURUSD ASK: 1.08460\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#2-check-price-before-buying","title":"2) Check price before buying","text":"<pre><code>symbol := \"EURUSD\"\n\n// Get current ASK\nask, _ := sugar.GetAsk(symbol)\n\nfmt.Printf(\"Current %s ASK: %.5f\\n\", symbol, ask)\nfmt.Println(\"This is the price you'll pay if you BUY now\")\n\n// Place BUY order\nticket, _ := sugar.BuyMarket(symbol, 0.1)\nfmt.Printf(\"BUY order #%d placed at ~%.5f\\n\", ticket, ask)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#3-calculate-sltp-for-buy-order","title":"3) Calculate SL/TP for BUY order","text":"<pre><code>symbol := \"EURUSD\"\nask, _ := sugar.GetAsk(symbol)\n\n// Get symbol info for point size\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Calculate SL/TP (BUY: SL below, TP above)\nsl := ask - (50 * info.Point)  // 50 pips below entry\ntp := ask + (100 * info.Point) // 100 pips above entry\n\nfmt.Printf(\"Entry (ASK):    %.5f\\n\", ask)\nfmt.Printf(\"Stop Loss:      %.5f (-50 pips)\\n\", sl)\nfmt.Printf(\"Take Profit:    %.5f (+100 pips)\\n\", tp)\n\n// Better: use CalculateSLTP helper\nsl2, tp2, _ := sugar.CalculateSLTP(symbol, \"BUY\", ask, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#4-show-bidask-spread","title":"4) Show BID/ASK spread","text":"<pre><code>symbol := \"EURUSD\"\n\nbid, _ := sugar.GetBid(symbol)\nask, _ := sugar.GetAsk(symbol)\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\nspreadInPrice := ask - bid\nspreadInPips := spreadInPrice / info.Point\n\nfmt.Printf(\"Symbol: %s\\n\", symbol)\nfmt.Printf(\"BID:    %.5f\\n\", bid)\nfmt.Printf(\"ASK:    %.5f\\n\", ask)\nfmt.Printf(\"Spread: %.5f (%.0f pips)\\n\", spreadInPrice, spreadInPips)\n\n// Output:\n// Symbol: EURUSD\n// BID:    1.08450\n// ASK:    1.08460\n// Spread: 0.00010 (10 pips)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#5-wait-for-good-price","title":"5) Wait for good price","text":"<pre><code>symbol := \"EURUSD\"\nmaxAcceptableAsk := 1.08500\n\nfmt.Printf(\"Waiting for %s ASK below %.5f...\\n\", symbol, maxAcceptableAsk)\n\nfor {\n    ask, _ := sugar.GetAsk(symbol)\n\n    if ask &lt;= maxAcceptableAsk {\n        fmt.Printf(\"\u2705 Good price! ASK: %.5f\\n\", ask)\n        // Place order\n        ticket, _ := sugar.BuyMarket(symbol, 0.1)\n        fmt.Printf(\"Order #%d placed\\n\", ticket)\n        break\n    }\n\n    fmt.Printf(\"Waiting... Current: %.5f (%.5f above target)\\n\",\n        ask, ask-maxAcceptableAsk)\n    time.Sleep(5 * time.Second)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#6-compare-ask-across-brokersaccounts","title":"6) Compare ASK across brokers/accounts","text":"<pre><code>// If you have multiple accounts\naccounts := []*mt5.MT5Sugar{sugarDemo, sugarLive}\naccountNames := []string{\"Demo\", \"Live\"}\n\nsymbol := \"EURUSD\"\n\nfmt.Printf(\"ASK price comparison for %s:\\n\", symbol)\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor i, sugar := range accounts {\n    ask, _ := sugar.GetAsk(symbol)\n    fmt.Printf(\"%s:  %.5f\\n\", accountNames[i], ask)\n}\n\n// Output:\n// ASK price comparison for EURUSD:\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// Demo:  1.08460\n// Live:  1.08462\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#7-entry-price-preview","title":"7) Entry price preview","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\nask, _ := sugar.GetAsk(symbol)\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Calculate position value\npositionValue := volume * info.ContractSize * ask\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551         BUY ORDER PREVIEW             \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Symbol:         %s\\n\", symbol)\nfmt.Printf(\"Volume:         %.2f lots\\n\", volume)\nfmt.Printf(\"Entry (ASK):    %.5f\\n\", ask)\nfmt.Printf(\"Position Value: $%.2f\\n\", positionValue)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#8-check-spread-before-trading","title":"8) Check spread before trading","text":"<pre><code>symbol := \"EURUSD\"\nmaxAcceptableSpreadPips := 15.0\n\nbid, _ := sugar.GetBid(symbol)\nask, _ := sugar.GetAsk(symbol)\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\nspreadPips := (ask - bid) / info.Point\n\nfmt.Printf(\"%s Spread: %.0f pips\\n\", symbol, spreadPips)\n\nif spreadPips &gt; maxAcceptableSpreadPips {\n    fmt.Printf(\"\u274c Spread too high (%.0f &gt; %.0f pips)\\n\",\n        spreadPips, maxAcceptableSpreadPips)\n    fmt.Println(\"   Not trading right now\")\n} else {\n    fmt.Println(\"\u2705 Spread acceptable - safe to trade\")\n    sugar.BuyMarket(symbol, 0.1)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#9-price-change-monitor","title":"9) Price change monitor","text":"<pre><code>symbol := \"EURUSD\"\ncheckInterval := 10 * time.Second\n\npreviousAsk := 0.0\nticker := time.NewTicker(checkInterval)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    ask, _ := sugar.GetAsk(symbol)\n\n    if previousAsk &gt; 0 {\n        change := ask - previousAsk\n        changePercent := (change / previousAsk) * 100\n\n        fmt.Printf(\"%s ASK: %.5f (\", symbol, ask)\n\n        if change &gt; 0 {\n            fmt.Printf(\"\u2191 +%.5f, +%.4f%%)\\n\", change, changePercent)\n        } else if change &lt; 0 {\n            fmt.Printf(\"\u2193 %.5f, %.4f%%)\\n\", change, changePercent)\n        } else {\n            fmt.Printf(\"\u2192 no change)\\n\")\n        }\n    } else {\n        fmt.Printf(\"%s ASK: %.5f (initial)\\n\", symbol, ask)\n    }\n\n    previousAsk = ask\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#10-multi-symbol-monitoring","title":"10) Multi-symbol monitoring","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"}\n\nticker := time.NewTicker(3 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    fmt.Print(\"\\033[H\\033[2J\") // Clear screen\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551          LIVE ASK PRICES (BUY)                \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Updated: %s\\n\\n\", time.Now().Format(\"15:04:05\"))\n\n    fmt.Printf(\"%-10s  %-12s  %-12s  %s\\n\", \"Symbol\", \"BID\", \"ASK\", \"Spread\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    for _, symbol := range symbols {\n        bid, _ := sugar.GetBid(symbol)\n        ask, _ := sugar.GetAsk(symbol)\n        info, _ := sugar.GetSymbolInfo(symbol)\n\n        spreadPips := (ask - bid) / info.Point\n\n        fmt.Printf(\"%-10s  %-12.5f  %-12.5f  %.0f pips\\n\",\n            symbol, bid, ask, spreadPips)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<ul> <li><code>GetBid()</code> - Current BID price (for selling)</li> <li><code>GetSpread()</code> - Spread in points</li> <li><code>GetPriceInfo()</code> - Get BID, ASK, and spread at once \u2b50</li> <li><code>BuyMarket()</code> - Buy at current ASK price</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#1-using-ask-for-sell-orders","title":"1) Using ASK for SELL orders","text":"<pre><code>// \u274c WRONG - ASK is for buying, not selling!\nask, _ := sugar.GetAsk(\"EURUSD\")\nsugar.SellMarket(\"EURUSD\", 0.1) // Will execute at BID, not ASK!\n\n// \u2705 CORRECT - use GetBid for SELL orders\nbid, _ := sugar.GetBid(\"EURUSD\")\nfmt.Printf(\"SELL will execute at: %.5f (BID)\\n\", bid)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#2-forgetting-about-spread","title":"2) Forgetting about spread","text":"<pre><code>// \u274c WRONG - not accounting for spread\nask, _ := sugar.GetAsk(\"EURUSD\")\n// Entry: 1.08460 (ASK)\n// Immediate P/L: negative due to spread!\n\n// \u2705 CORRECT - understand spread impact\nbid, _ := sugar.GetBid(\"EURUSD\")\nask, _ := sugar.GetAsk(\"EURUSD\")\nspread := ask - bid\nfmt.Printf(\"Entry cost includes %.5f spread\\n\", spread)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetAsk/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>ASK = BUY price - Remember: ASK is always for buying</li> <li>Use GetPriceInfo() - Get BID + ASK + spread in one call</li> <li>ASK &gt; BID - ASK is always higher (you pay the spread)</li> <li>Check spread first - High spread = bad time to trade</li> <li>Price volatility - ASK changes constantly during market hours</li> </ol> <p>See also: <code>GetBid.md</code>, <code>GetPriceInfo.md</code>, <code>GetSpread.md</code></p>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/","title":"\ud83d\udcc9 Get BID Price (<code>GetBid</code>)","text":"<p>Sugar method: Returns current BID price for a symbol (price at which you can SELL).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetBid(symbol)</code></li> <li>Timeout: 3 seconds</li> <li>Returns: BID price as <code>float64</code></li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetBid(symbol string) (float64, error)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\", \"XAUUSD\") Output Type Description <code>bid</code> <code>float64</code> Current BID price <code>error</code> <code>error</code> Error if symbol not found"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Current BID price - the price you get when SELLING.</li> <li>Why you need it: Check entry price for SELL orders, calculate SL/TP levels.</li> <li>Sanity check: BID &lt; ASK (always lower than ask price).</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Before SELL orders - Know exact entry price</p> <p>\u2705 SL/TP calculation - Calculate levels based on current price</p> <p>\u2705 Price monitoring - Track market movement</p> <p>\u2705 Spread checking - Compare with ASK to get spread</p>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>bid, err := sugar.GetBid(\"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"EURUSD BID: %.5f\\n\", bid)\n// Output: EURUSD BID: 1.08450\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#2-check-price-before-selling","title":"2) Check price before selling","text":"<pre><code>symbol := \"EURUSD\"\n\n// Get current BID\nbid, _ := sugar.GetBid(symbol)\n\nfmt.Printf(\"Current %s BID: %.5f\\n\", symbol, bid)\nfmt.Println(\"This is the price you'll get if you SELL now\")\n\n// Place SELL order\nticket, _ := sugar.SellMarket(symbol, 0.1)\nfmt.Printf(\"SELL order #%d placed at ~%.5f\\n\", ticket, bid)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#3-calculate-sltp-for-sell-order","title":"3) Calculate SL/TP for SELL order","text":"<pre><code>symbol := \"EURUSD\"\nbid, _ := sugar.GetBid(symbol)\n\n// Get symbol info for point size\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Calculate SL/TP (SELL: SL above, TP below)\nsl := bid + (50 * info.Point)  // 50 pips above entry\ntp := bid - (100 * info.Point) // 100 pips below entry\n\nfmt.Printf(\"Entry (BID):    %.5f\\n\", bid)\nfmt.Printf(\"Stop Loss:      %.5f (+50 pips)\\n\", sl)\nfmt.Printf(\"Take Profit:    %.5f (-100 pips)\\n\", tp)\n\n// Better: use CalculateSLTP helper\nsl2, tp2, _ := sugar.CalculateSLTP(symbol, \"SELL\", bid, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#4-monitor-price-movement","title":"4) Monitor price movement","text":"<pre><code>symbol := \"EURUSD\"\npreviousBid := 0.0\n\nticker := time.NewTicker(1 * time.Second)\ndefer ticker.Stop()\n\nfor i := 0; i &lt; 10; i++ {\n    &lt;-ticker.C\n\n    bid, _ := sugar.GetBid(symbol)\n\n    if previousBid &gt; 0 {\n        change := bid - previousBid\n        fmt.Printf(\"%s BID: %.5f (change: %+.5f)\\n\", symbol, bid, change)\n    } else {\n        fmt.Printf(\"%s BID: %.5f\\n\", symbol, bid)\n    }\n\n    previousBid = bid\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#5-compare-multiple-symbols","title":"5) Compare multiple symbols","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"}\n\nfmt.Println(\"Current BID prices:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, symbol := range symbols {\n    bid, err := sugar.GetBid(symbol)\n    if err != nil {\n        fmt.Printf(\"%s: Error - %v\\n\", symbol, err)\n        continue\n    }\n\n    fmt.Printf(\"%-8s  %.5f\\n\", symbol, bid)\n}\n\n// Output:\n// Current BID prices:\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// EURUSD    1.08450\n// GBPUSD    1.26320\n// USDJPY    149.850\n// XAUUSD    2045.50\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#6-check-if-price-reached-target","title":"6) Check if price reached target","text":"<pre><code>symbol := \"EURUSD\"\ntargetPrice := 1.08000\n\nfmt.Printf(\"Waiting for %s BID to reach %.5f...\\n\", symbol, targetPrice)\n\nfor {\n    bid, _ := sugar.GetBid(symbol)\n\n    if bid &lt;= targetPrice {\n        fmt.Printf(\"\u2705 Target reached! BID: %.5f\\n\", bid)\n        break\n    }\n\n    fmt.Printf(\"Current: %.5f (%.5f away)\\n\", bid, bid-targetPrice)\n    time.Sleep(2 * time.Second)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#7-calculate-pip-distance","title":"7) Calculate pip distance","text":"<pre><code>symbol := \"EURUSD\"\nreferencePrice := 1.08500\n\ncurrentBid, _ := sugar.GetBid(symbol)\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Calculate distance in pips\npipDistance := (currentBid - referencePrice) / info.Point\n\nfmt.Printf(\"Reference:  %.5f\\n\", referencePrice)\nfmt.Printf(\"Current:    %.5f\\n\", currentBid)\nfmt.Printf(\"Distance:   %.0f pips\\n\", pipDistance)\n\nif pipDistance &gt; 0 {\n    fmt.Println(\"Price moved UP\")\n} else {\n    fmt.Println(\"Price moved DOWN\")\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#8-show-bidask-spread","title":"8) Show BID/ASK spread","text":"<pre><code>symbol := \"EURUSD\"\n\nbid, _ := sugar.GetBid(symbol)\nask, _ := sugar.GetAsk(symbol)\n\n// Better: use GetPriceInfo() to get both at once\npriceInfo, _ := sugar.GetPriceInfo(symbol)\n\nfmt.Printf(\"Symbol: %s\\n\", symbol)\nfmt.Printf(\"BID:    %.5f\\n\", bid)\nfmt.Printf(\"ASK:    %.5f\\n\", ask)\nfmt.Printf(\"Spread: %.1f pips\\n\", priceInfo.SpreadPips)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#9-price-alert-system","title":"9) Price alert system","text":"<pre><code>func PriceAlert(sugar *mt5.MT5Sugar, symbol string, alertPrice float64, direction string) {\n    fmt.Printf(\"\ud83d\udd14 Alert set: %s BID %s %.5f\\n\", symbol, direction, alertPrice)\n\n    ticker := time.NewTicker(5 * time.Second)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        bid, _ := sugar.GetBid(symbol)\n\n        triggered := false\n        if direction == \"below\" &amp;&amp; bid &lt;= alertPrice {\n            triggered = true\n        } else if direction == \"above\" &amp;&amp; bid &gt;= alertPrice {\n            triggered = true\n        }\n\n        if triggered {\n            fmt.Printf(\"\ud83d\udea8 ALERT! %s BID is %.5f (%s %.5f)\\n\",\n                symbol, bid, direction, alertPrice)\n            return\n        }\n    }\n}\n\n// Usage:\ngo PriceAlert(sugar, \"EURUSD\", 1.08000, \"below\")\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#10-real-time-price-dashboard","title":"10) Real-time price dashboard","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\n\nticker := time.NewTicker(2 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    fmt.Print(\"\\033[H\\033[2J\") // Clear screen\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551       REAL-TIME BID PRICES            \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Time: %s\\n\\n\", time.Now().Format(\"15:04:05\"))\n\n    for _, symbol := range symbols {\n        bid, _ := sugar.GetBid(symbol)\n        fmt.Printf(\"%-8s  %.5f\\n\", symbol, bid)\n    }\n\n    time.Sleep(2 * time.Second)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<ul> <li><code>GetAsk()</code> - Current ASK price (for buying)</li> <li><code>GetSpread()</code> - Spread in points</li> <li><code>GetPriceInfo()</code> - Get BID, ASK, and spread at once \u2b50</li> <li><code>SellMarket()</code> - Sell at current BID price</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#1-using-bid-for-buy-orders","title":"1) Using BID for BUY orders","text":"<pre><code>// \u274c WRONG - BID is for selling, not buying!\nbid, _ := sugar.GetBid(\"EURUSD\")\nsugar.BuyMarket(\"EURUSD\", 0.1) // Will execute at ASK, not BID!\n\n// \u2705 CORRECT - use GetAsk for BUY orders\nask, _ := sugar.GetAsk(\"EURUSD\")\nfmt.Printf(\"BUY will execute at: %.5f (ASK)\\n\", ask)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#2-not-checking-for-errors","title":"2) Not checking for errors","text":"<pre><code>// \u274c WRONG - ignoring errors\nbid, _ := sugar.GetBid(\"INVALID_SYMBOL\")\nfmt.Printf(\"Price: %.5f\\n\", bid) // Will be 0!\n\n// \u2705 CORRECT - check errors\nbid, err := sugar.GetBid(\"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetBid/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>BID = SELL price - Remember: BID is always for selling</li> <li>Use GetPriceInfo() - More efficient than calling GetBid + GetAsk separately</li> <li>BID &lt; ASK - BID is always lower (spread is the difference)</li> <li>Price changes - BID updates with every tick, call frequently</li> <li>For monitoring - Use GetPriceInfo() to get complete price snapshot</li> </ol> <p>See also: <code>GetAsk.md</code>, <code>GetPriceInfo.md</code>, <code>GetSpread.md</code></p>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/","title":"\ud83d\udcca Get Complete Price Information (<code>GetPriceInfo</code>)","text":"<p>Sugar method: Returns BID, ASK, spread, and timestamp in one call (most efficient).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetPriceInfo(symbol)</code></li> <li>Timeout: 3 seconds</li> <li>Returns: <code>*PriceInfo</code> structure</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetPriceInfo(symbol string) (*PriceInfo, error)\n\n// PriceInfo structure\ntype PriceInfo struct {\n    Symbol     string    // Symbol name\n    Bid        float64   // Current BID price\n    Ask        float64   // Current ASK price\n    SpreadPips float64   // Spread in points\n    Time       time.Time // Server time of last tick\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get BID, ASK, spread, and time in ONE call instead of three separate calls.</li> <li>Why you need it: More efficient than calling GetBid + GetAsk + GetSpread separately.</li> <li>Sanity check: priceInfo.Ask &gt; priceInfo.Bid, spread = ask - bid.</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Price snapshots - Need complete price picture at once</p> <p>\u2705 Performance - Reduce API calls (1 instead of 3)</p> <p>\u2705 Logging/reporting - Capture full price state with timestamp</p> <p>\u2705 Display dashboards - Show all price data together</p>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>priceInfo, err := sugar.GetPriceInfo(\"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Symbol:  %s\\n\", priceInfo.Symbol)\nfmt.Printf(\"BID:     %.5f\\n\", priceInfo.Bid)\nfmt.Printf(\"ASK:     %.5f\\n\", priceInfo.Ask)\nfmt.Printf(\"Spread:  %.0f pips\\n\", priceInfo.SpreadPips)\nfmt.Printf(\"Time:    %s\\n\", priceInfo.Time.Format(\"15:04:05\"))\n\n// Output:\n// Symbol:  EURUSD\n// BID:     1.08450\n// ASK:     1.08460\n// Spread:  10 pips\n// Time:    14:23:15\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#2-price-snapshot-for-logging","title":"2) Price snapshot for logging","text":"<pre><code>func LogPriceSnapshot(sugar *mt5.MT5Sugar, symbol string) {\n    priceInfo, err := sugar.GetPriceInfo(symbol)\n    if err != nil {\n        fmt.Printf(\"Error getting price: %v\\n\", err)\n        return\n    }\n\n    // Log to file/database\n    logEntry := fmt.Sprintf(\"[%s] %s: BID=%.5f ASK=%.5f SPREAD=%.0f\",\n        priceInfo.Time.Format(\"2006-01-02 15:04:05\"),\n        priceInfo.Symbol,\n        priceInfo.Bid,\n        priceInfo.Ask,\n        priceInfo.SpreadPips)\n\n    fmt.Println(logEntry)\n    // In production: write to file or database\n}\n\n// Usage:\nLogPriceSnapshot(sugar, \"EURUSD\")\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#3-comparison-getpriceinfo-vs-individual-calls","title":"3) Comparison: GetPriceInfo vs individual calls","text":"<pre><code>symbol := \"EURUSD\"\n\n// \u274c INEFFICIENT - 3 separate API calls\nbid, _ := sugar.GetBid(symbol)\nask, _ := sugar.GetAsk(symbol)\nspread, _ := sugar.GetSpread(symbol)\nfmt.Printf(\"BID: %.5f, ASK: %.5f, Spread: %.0f\\n\", bid, ask, spread)\n\n// \u2705 EFFICIENT - 1 API call\npriceInfo, _ := sugar.GetPriceInfo(symbol)\nfmt.Printf(\"BID: %.5f, ASK: %.5f, Spread: %.0f\\n\",\n    priceInfo.Bid, priceInfo.Ask, priceInfo.SpreadPips)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#4-real-time-price-dashboard","title":"4) Real-time price dashboard","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\n\nticker := time.NewTicker(2 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    fmt.Print(\"\\033[H\\033[2J\") // Clear screen\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551              REAL-TIME PRICE DASHBOARD                \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Updated: %s\\n\\n\", time.Now().Format(\"15:04:05\"))\n\n    fmt.Printf(\"%-10s  %-12s  %-12s  %-10s\\n\",\n        \"Symbol\", \"BID\", \"ASK\", \"Spread\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    for _, symbol := range symbols {\n        priceInfo, err := sugar.GetPriceInfo(symbol)\n        if err != nil {\n            continue\n        }\n\n        fmt.Printf(\"%-10s  %-12.5f  %-12.5f  %-10.0f\\n\",\n            priceInfo.Symbol,\n            priceInfo.Bid,\n            priceInfo.Ask,\n            priceInfo.SpreadPips)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#5-trade-signal-with-price-snapshot","title":"5) Trade signal with price snapshot","text":"<pre><code>func CheckTradingSignal(sugar *mt5.MT5Sugar, symbol string) {\n    priceInfo, _ := sugar.GetPriceInfo(symbol)\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551       TRADE SIGNAL CHECK              \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Symbol:    %s\\n\", priceInfo.Symbol)\n    fmt.Printf(\"Time:      %s\\n\", priceInfo.Time.Format(\"15:04:05\"))\n    fmt.Printf(\"BID:       %.5f\\n\", priceInfo.Bid)\n    fmt.Printf(\"ASK:       %.5f\\n\", priceInfo.Ask)\n    fmt.Printf(\"Spread:    %.0f pips\\n\", priceInfo.SpreadPips)\n    fmt.Println()\n\n    // Check conditions\n    if priceInfo.SpreadPips &gt; 15 {\n        fmt.Println(\"\u274c Spread too high - NO TRADE\")\n        return\n    }\n\n    if priceInfo.Bid &lt; 1.08000 {\n        fmt.Println(\"\u2705 BUY SIGNAL - Price at support\")\n        // Place buy order\n    } else if priceInfo.Bid &gt; 1.09000 {\n        fmt.Println(\"\u2705 SELL SIGNAL - Price at resistance\")\n        // Place sell order\n    } else {\n        fmt.Println(\"\u23f8\ufe0f  NO SIGNAL - Price in range\")\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#6-price-history-recorder","title":"6) Price history recorder","text":"<pre><code>type PriceSnapshot struct {\n    Time   time.Time\n    Bid    float64\n    Ask    float64\n    Spread float64\n}\n\nfunc RecordPriceHistory(sugar *mt5.MT5Sugar, symbol string, duration time.Duration) {\n    history := []PriceSnapshot{}\n\n    ticker := time.NewTicker(10 * time.Second)\n    defer ticker.Stop()\n\n    timeout := time.After(duration)\n\n    for {\n        select {\n        case &lt;-timeout:\n            // Save history\n            fmt.Printf(\"\\nRecorded %d price snapshots for %s\\n\",\n                len(history), symbol)\n\n            // Show summary\n            if len(history) &gt; 0 {\n                first := history[0]\n                last := history[len(history)-1]\n\n                fmt.Printf(\"First: %.5f (BID) at %s\\n\",\n                    first.Bid, first.Time.Format(\"15:04:05\"))\n                fmt.Printf(\"Last:  %.5f (BID) at %s\\n\",\n                    last.Bid, last.Time.Format(\"15:04:05\"))\n                fmt.Printf(\"Change: %.5f (%.2f%%)\\n\",\n                    last.Bid-first.Bid,\n                    ((last.Bid-first.Bid)/first.Bid)*100)\n            }\n            return\n\n        case &lt;-ticker.C:\n            priceInfo, _ := sugar.GetPriceInfo(symbol)\n\n            snapshot := PriceSnapshot{\n                Time:   priceInfo.Time,\n                Bid:    priceInfo.Bid,\n                Ask:    priceInfo.Ask,\n                Spread: priceInfo.SpreadPips,\n            }\n\n            history = append(history, snapshot)\n            fmt.Printf(\"%s: BID=%.5f SPREAD=%.0f\\n\",\n                priceInfo.Time.Format(\"15:04:05\"),\n                priceInfo.Bid,\n                priceInfo.SpreadPips)\n        }\n    }\n}\n\n// Record for 5 minutes\nRecordPriceHistory(sugar, \"EURUSD\", 5*time.Minute)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#7-multi-symbol-price-comparison","title":"7) Multi-symbol price comparison","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"AUDUSD\", \"NZDUSD\"}\n\nfmt.Println(\"USD Pairs Price Comparison:\")\nfmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\nfmt.Printf(\"%-10s  %-12s  %-12s  %-10s  %s\\n\",\n    \"Pair\", \"BID\", \"ASK\", \"Spread\", \"Time\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, symbol := range symbols {\n    priceInfo, err := sugar.GetPriceInfo(symbol)\n    if err != nil {\n        continue\n    }\n\n    fmt.Printf(\"%-10s  %-12.5f  %-12.5f  %-10.0f  %s\\n\",\n        priceInfo.Symbol,\n        priceInfo.Bid,\n        priceInfo.Ask,\n        priceInfo.SpreadPips,\n        priceInfo.Time.Format(\"15:04:05\"))\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#8-price-alert-with-full-info","title":"8) Price alert with full info","text":"<pre><code>func PriceAlertWithInfo(sugar *mt5.MT5Sugar, symbol string, targetBid float64) {\n    fmt.Printf(\"\ud83d\udd14 Alert set: %s BID reaches %.5f\\n\", symbol, targetBid)\n\n    ticker := time.NewTicker(5 * time.Second)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        priceInfo, _ := sugar.GetPriceInfo(symbol)\n\n        if priceInfo.Bid &lt;= targetBid {\n            fmt.Println(\"\\n\ud83d\udea8 PRICE ALERT TRIGGERED!\")\n            fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n            fmt.Printf(\"Symbol:    %s\\n\", priceInfo.Symbol)\n            fmt.Printf(\"Target:    %.5f\\n\", targetBid)\n            fmt.Printf(\"Current:   %.5f (BID)\\n\", priceInfo.Bid)\n            fmt.Printf(\"ASK:       %.5f\\n\", priceInfo.Ask)\n            fmt.Printf(\"Spread:    %.0f pips\\n\", priceInfo.SpreadPips)\n            fmt.Printf(\"Time:      %s\\n\", priceInfo.Time.Format(\"15:04:05\"))\n            return\n        }\n\n        fmt.Printf(\"%s BID: %.5f (target: %.5f, %.5f away)\\n\",\n            symbol, priceInfo.Bid, targetBid, priceInfo.Bid-targetBid)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#9-check-if-price-is-fresh","title":"9) Check if price is fresh","text":"<pre><code>func IsPriceFresh(priceInfo *PriceInfo, maxAge time.Duration) bool {\n    age := time.Since(priceInfo.Time)\n\n    if age &gt; maxAge {\n        fmt.Printf(\"\u26a0\ufe0f  WARNING: Price data is %v old (max: %v)\\n\", age, maxAge)\n        return false\n    }\n\n    fmt.Printf(\"\u2705 Price data is fresh (%v old)\\n\", age)\n    return true\n}\n\n// Usage:\npriceInfo, _ := sugar.GetPriceInfo(\"EURUSD\")\nif IsPriceFresh(priceInfo, 5*time.Second) {\n    // Use price for trading\n    sugar.BuyMarket(\"EURUSD\", 0.1)\n} else {\n    // Price too old, wait for update\n    fmt.Println(\"Waiting for fresh price...\")\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#10-complete-trading-decision","title":"10) Complete trading decision","text":"<pre><code>func MakeTradingDecision(sugar *mt5.MT5Sugar, symbol string) {\n    priceInfo, err := sugar.GetPriceInfo(symbol)\n    if err != nil {\n        fmt.Printf(\"\u274c Error: %v\\n\", err)\n        return\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551         TRADING DECISION ANALYSIS             \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Symbol:      %s\\n\", priceInfo.Symbol)\n    fmt.Printf(\"Server Time: %s\\n\", priceInfo.Time.Format(\"2006-01-02 15:04:05\"))\n    fmt.Printf(\"BID:         %.5f\\n\", priceInfo.Bid)\n    fmt.Printf(\"ASK:         %.5f\\n\", priceInfo.Ask)\n    fmt.Printf(\"Spread:      %.0f pips\\n\", priceInfo.SpreadPips)\n    fmt.Println()\n\n    // Check 1: Spread\n    if priceInfo.SpreadPips &gt; 15 {\n        fmt.Println(\"\u274c REJECT: Spread too high\")\n        return\n    }\n    fmt.Printf(\"\u2705 Spread OK (%.0f &lt; 15 pips)\\n\", priceInfo.SpreadPips)\n\n    // Check 2: Price freshness\n    age := time.Since(priceInfo.Time)\n    if age &gt; 10*time.Second {\n        fmt.Printf(\"\u274c REJECT: Price too old (%v)\\n\", age)\n        return\n    }\n    fmt.Printf(\"\u2705 Price fresh (%.1f seconds old)\\n\", age.Seconds())\n\n    // Check 3: Market hours\n    hour := priceInfo.Time.Hour()\n    if hour &lt; 8 || hour &gt; 17 {\n        fmt.Printf(\"\u274c REJECT: Outside trading hours (%d:00)\\n\", hour)\n        return\n    }\n    fmt.Printf(\"\u2705 Market hours OK (%d:00)\\n\", hour)\n\n    // All checks passed\n    fmt.Println(\"\\n\ud83d\udfe2 ALL CHECKS PASSED - READY TO TRADE\")\n\n    // Calculate position size\n    lotSize, _ := sugar.CalculatePositionSize(symbol, 2.0, 50)\n    fmt.Printf(\"Recommended lot size: %.2f (2%% risk, 50 pip SL)\\n\", lotSize)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<ul> <li><code>GetBid()</code> - Get only BID price</li> <li><code>GetAsk()</code> - Get only ASK price</li> <li><code>GetSpread()</code> - Get only spread</li> <li><code>WaitForPrice()</code> - Wait for valid price with timeout</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetPriceInfo/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>Use this instead of individual calls - More efficient (1 call vs 3)</li> <li>Check timestamp - Verify price is fresh before trading</li> <li>Store snapshots - Keep price history for analysis</li> <li>Spread validation - Always check SpreadPips before trading</li> <li>Perfect for dashboards - Get all price data at once</li> </ol> <p>See also: <code>GetBid.md</code>, <code>GetAsk.md</code>, <code>WaitForPrice.md</code></p>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/","title":"\ud83d\udccf Get Spread (<code>GetSpread</code>)","text":"<p>Sugar method: Returns current spread in points (difference between ASK and BID).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetSpread(symbol)</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Spread in points as <code>float64</code></li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetSpread(symbol string) (float64, error)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Spread = ASK - BID in points (broker's fee for each trade).</li> <li>Why you need it: Check trading costs before opening positions. High spread = expensive trade.</li> <li>Sanity check: Lower spread = better. Typical EURUSD spread: 5-20 points.</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#formula","title":"\ud83e\uddee Formula","text":"<pre><code>Spread = ASK - BID (in points)\n\nFor 5-digit broker (EURUSD):\n  ASK: 1.08460, BID: 1.08450\n  Spread = (1.08460 - 1.08450) / 0.00001 = 10 points\n\nTrading cost = Spread \u00d7 Point \u00d7 ContractSize \u00d7 Volume\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>spread, err := sugar.GetSpread(\"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"EURUSD spread: %.0f points\\n\", spread)\n// Output: EURUSD spread: 10 points\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#2-check-spread-before-trading","title":"2) Check spread before trading","text":"<pre><code>symbol := \"EURUSD\"\nmaxAcceptableSpread := 15.0\n\nspread, _ := sugar.GetSpread(symbol)\n\nfmt.Printf(\"%s current spread: %.0f points\\n\", symbol, spread)\n\nif spread &gt; maxAcceptableSpread {\n    fmt.Printf(\"\u274c Spread too high (%.0f &gt; %.0f)\\n\", spread, maxAcceptableSpread)\n    fmt.Println(\"   Waiting for better conditions...\")\n} else {\n    fmt.Printf(\"\u2705 Spread acceptable (%.0f \u2264 %.0f)\\n\", spread, maxAcceptableSpread)\n    sugar.BuyMarket(symbol, 0.1)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#3-compare-spreads-across-symbols","title":"3) Compare spreads across symbols","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\", \"BTCUSD\"}\n\nfmt.Println(\"Current spreads:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, symbol := range symbols {\n    spread, err := sugar.GetSpread(symbol)\n    if err != nil {\n        continue\n    }\n\n    // Categorize spread\n    status := \"\"\n    if spread &lt; 10 {\n        status = \"\ud83d\udfe2 Excellent\"\n    } else if spread &lt; 20 {\n        status = \"\ud83d\udfe1 Good\"\n    } else if spread &lt; 50 {\n        status = \"\ud83d\udfe0 High\"\n    } else {\n        status = \"\ud83d\udd34 Very High\"\n    }\n\n    fmt.Printf(\"%-8s  %3.0f points  %s\\n\", symbol, spread, status)\n}\n\n// Output:\n// Current spreads:\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// EURUSD    10 points  \ud83d\udfe2 Excellent\n// GBPUSD    15 points  \ud83d\udfe1 Good\n// USDJPY    12 points  \ud83d\udfe1 Good\n// XAUUSD    45 points  \ud83d\udfe0 High\n// BTCUSD   120 points  \ud83d\udd34 Very High\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#4-calculate-trading-cost","title":"4) Calculate trading cost","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 1.0 // 1 lot\n\nspread, _ := sugar.GetSpread(symbol)\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Calculate cost in account currency\nspreadCost := spread * info.Point * info.ContractSize * volume\n\nfmt.Printf(\"Symbol: %s\\n\", symbol)\nfmt.Printf(\"Volume: %.2f lots\\n\", volume)\nfmt.Printf(\"Spread: %.0f points\\n\", spread)\nfmt.Printf(\"Trading cost: $%.2f\\n\", spreadCost)\n\n// Output:\n// Symbol: EURUSD\n// Volume: 1.00 lots\n// Spread: 10 points\n// Trading cost: $10.00\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#5-monitor-spread-changes","title":"5) Monitor spread changes","text":"<pre><code>symbol := \"EURUSD\"\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\nfmt.Printf(\"Monitoring %s spread:\\n\\n\", symbol)\n\npreviousSpread := 0.0\n\nfor i := 0; i &lt; 20; i++ {\n    &lt;-ticker.C\n\n    spread, _ := sugar.GetSpread(symbol)\n\n    if previousSpread &gt; 0 {\n        change := spread - previousSpread\n\n        if change &gt; 0 {\n            fmt.Printf(\"%.0f points (\u2191 widened by %.0f)\\n\", spread, change)\n        } else if change &lt; 0 {\n            fmt.Printf(\"%.0f points (\u2193 narrowed by %.0f)\\n\", spread, -change)\n        } else {\n            fmt.Printf(\"%.0f points (\u2192 no change)\\n\", spread)\n        }\n    } else {\n        fmt.Printf(\"%.0f points (initial)\\n\", spread)\n    }\n\n    previousSpread = spread\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#6-find-best-time-to-trade-lowest-spread","title":"6) Find best time to trade (lowest spread)","text":"<pre><code>symbol := \"EURUSD\"\ncheckDuration := 5 * time.Minute\ncheckInterval := 10 * time.Second\n\nminSpread := 99999.0\nmaxSpread := 0.0\ntotalSpread := 0.0\nsamples := 0\n\nticker := time.NewTicker(checkInterval)\ndefer ticker.Stop()\n\ntimeout := time.After(checkDuration)\n\nfor {\n    select {\n    case &lt;-timeout:\n        avgSpread := totalSpread / float64(samples)\n\n        fmt.Println(\"\\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n        fmt.Printf(\"Spread analysis for %s:\\n\", symbol)\n        fmt.Printf(\"Duration: %v\\n\", checkDuration)\n        fmt.Printf(\"Minimum:  %.0f points\\n\", minSpread)\n        fmt.Printf(\"Maximum:  %.0f points\\n\", maxSpread)\n        fmt.Printf(\"Average:  %.0f points\\n\", avgSpread)\n        fmt.Println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n        return\n\n    case &lt;-ticker.C:\n        spread, _ := sugar.GetSpread(symbol)\n\n        if spread &lt; minSpread {\n            minSpread = spread\n        }\n        if spread &gt; maxSpread {\n            maxSpread = spread\n        }\n\n        totalSpread += spread\n        samples++\n\n        fmt.Printf(\"Spread: %.0f points (min: %.0f, max: %.0f)\\n\",\n            spread, minSpread, maxSpread)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#7-spread-warning-system","title":"7) Spread warning system","text":"<pre><code>func MonitorSpreadWarnings(sugar *mt5.MT5Sugar, symbol string, warningLevel float64) {\n    ticker := time.NewTicker(10 * time.Second)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        spread, _ := sugar.GetSpread(symbol)\n\n        if spread &gt; warningLevel {\n            fmt.Printf(\"\u26a0\ufe0f  WARNING: %s spread is %.0f points (threshold: %.0f)\\n\",\n                symbol, spread, warningLevel)\n        } else {\n            fmt.Printf(\"\u2705 %s spread: %.0f points (OK)\\n\", symbol, spread)\n        }\n    }\n}\n\n// Run in background\ngo MonitorSpreadWarnings(sugar, \"EURUSD\", 20.0)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#8-validate-spread-before-scalping","title":"8) Validate spread before scalping","text":"<pre><code>// Scalping requires tight spreads\nfunc CanScalp(sugar *mt5.MT5Sugar, symbol string) bool {\n    spread, err := sugar.GetSpread(symbol)\n    if err != nil {\n        return false\n    }\n\n    maxScalpingSpread := 10.0 // Scalpers need very tight spreads\n\n    if spread &gt; maxScalpingSpread {\n        fmt.Printf(\"\u274c Spread %.0f too high for scalping (max: %.0f)\\n\",\n            spread, maxScalpingSpread)\n        return false\n    }\n\n    fmt.Printf(\"\u2705 Spread %.0f acceptable for scalping\\n\", spread)\n    return true\n}\n\nif CanScalp(sugar, \"EURUSD\") {\n    // Open quick in/out trades\n    sugar.BuyMarket(\"EURUSD\", 0.1)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#9-spread-dashboard-for-multiple-symbols","title":"9) Spread dashboard for multiple symbols","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"AUDUSD\", \"USDCAD\"}\n\nticker := time.NewTicker(10 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    fmt.Print(\"\\033[H\\033[2J\") // Clear screen\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551        SPREAD MONITOR                 \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Time: %s\\n\\n\", time.Now().Format(\"15:04:05\"))\n\n    fmt.Printf(\"%-10s  %-10s  %-10s\\n\", \"Symbol\", \"Spread\", \"Status\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    for _, symbol := range symbols {\n        spread, _ := sugar.GetSpread(symbol)\n\n        status := \"\"\n        if spread &lt; 10 {\n            status = \"\ud83d\udfe2 Tight\"\n        } else if spread &lt; 20 {\n            status = \"\ud83d\udfe1 Normal\"\n        } else {\n            status = \"\ud83d\udd34 Wide\"\n        }\n\n        fmt.Printf(\"%-10s  %-10.0f  %-10s\\n\", symbol, spread, status)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#10-historical-spread-tracking","title":"10) Historical spread tracking","text":"<pre><code>type SpreadRecord struct {\n    Time   time.Time\n    Spread float64\n}\n\nfunc TrackSpreads(sugar *mt5.MT5Sugar, symbol string, duration time.Duration) {\n    records := []SpreadRecord{}\n\n    ticker := time.NewTicker(30 * time.Second)\n    defer ticker.Stop()\n\n    timeout := time.After(duration)\n\n    for {\n        select {\n        case &lt;-timeout:\n            // Analyze collected data\n            if len(records) == 0 {\n                return\n            }\n\n            var total float64\n            min := records[0].Spread\n            max := records[0].Spread\n\n            for _, r := range records {\n                total += r.Spread\n                if r.Spread &lt; min {\n                    min = r.Spread\n                }\n                if r.Spread &gt; max {\n                    max = r.Spread\n                }\n            }\n\n            avg := total / float64(len(records))\n\n            fmt.Println(\"\\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550 SPREAD ANALYSIS \u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n            fmt.Printf(\"Symbol:   %s\\n\", symbol)\n            fmt.Printf(\"Samples:  %d\\n\", len(records))\n            fmt.Printf(\"Min:      %.0f points\\n\", min)\n            fmt.Printf(\"Max:      %.0f points\\n\", max)\n            fmt.Printf(\"Average:  %.0f points\\n\", avg)\n            return\n\n        case t := &lt;-ticker.C:\n            spread, _ := sugar.GetSpread(symbol)\n            records = append(records, SpreadRecord{\n                Time:   t,\n                Spread: spread,\n            })\n            fmt.Printf(\"%s: %.0f points\\n\", t.Format(\"15:04:05\"), spread)\n        }\n    }\n}\n\n// Track for 1 hour\nTrackSpreads(sugar, \"EURUSD\", 1*time.Hour)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<ul> <li><code>GetBid()</code> - BID price</li> <li><code>GetAsk()</code> - ASK price</li> <li><code>GetPriceInfo()</code> - Get BID, ASK, and spread at once \u2b50</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#1-ignoring-spread-when-calculating-profit","title":"1) Ignoring spread when calculating profit","text":"<pre><code>// \u274c WRONG - forgetting spread cost\nentry := 1.08460\ntarget := 1.08560\nprofit := target - entry // 100 pips\n// Real profit is less due to spread!\n\n// \u2705 CORRECT - account for spread\nspread, _ := sugar.GetSpread(\"EURUSD\")\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\nspreadInPrice := spread * info.Point\nrealProfit := (target - entry) - spreadInPrice\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/GetSpread/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>Lower is better - Always prefer low spread symbols/times</li> <li>Volatile times = wide spreads - News events widen spreads</li> <li>Major pairs = tight spreads - EUR/USD, GBP/USD have lowest</li> <li>Check before scalping - Scalpers need spreads &lt; 10 points</li> <li>Use GetPriceInfo() - More efficient than calculating manually</li> </ol> <p>See also: <code>GetBid.md</code>, <code>GetAsk.md</code>, <code>GetPriceInfo.md</code></p>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/","title":"\u23f3 Wait For Valid Price (<code>WaitForPrice</code>)","text":"<p>Sugar method: Waits until symbol has valid price data (useful after connection or market open).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.WaitForPrice(symbol, timeout)</code></li> <li>Timeout: Custom (you specify)</li> <li>Returns: <code>*PriceInfo</code> when valid price received</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) WaitForPrice(symbol string, timeout time.Duration) (*PriceInfo, error)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Blocks until symbol has valid price (BID &gt; 0 and ASK &gt; 0) or timeout expires.</li> <li>Why you need it: After connection or during market open, prices might not be available yet.</li> <li>Sanity check: Returns first valid PriceInfo or error on timeout.</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 After connection - Wait for first tick after connecting</p> <p>\u2705 Market open - Wait for market to start publishing prices</p> <p>\u2705 Symbol switch - Ensure new symbol is ready</p> <p>\u2705 Weekend/gap handling - Wait for market to resume</p>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#1-basic-usage-wait-after-connection","title":"1) Basic usage - wait after connection","text":"<pre><code>sugar, _ := mt5.NewMT5Sugar(591129415, \"password\", \"mt5.mrpc.pro:443\")\nsugar.QuickConnect(\"FxPro-MT5 Demo\")\n\n// Wait for price to be available\nsymbol := \"EURUSD\"\npriceInfo, err := sugar.WaitForPrice(symbol, 10*time.Second)\nif err != nil {\n    fmt.Printf(\"Timeout waiting for price: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 %s price ready!\\n\", symbol)\nfmt.Printf(\"   BID: %.5f\\n\", priceInfo.Bid)\nfmt.Printf(\"   ASK: %.5f\\n\", priceInfo.Ask)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#2-robust-connection-sequence","title":"2) Robust connection sequence","text":"<pre><code>func ConnectAndWaitForPrice(login uint64, password, server, cluster, symbol string) error {\n    // Step 1: Create Sugar\n    sugar, err := mt5.NewMT5Sugar(login, password, server)\n    if err != nil {\n        return fmt.Errorf(\"failed to create Sugar: %w\", err)\n    }\n\n    // Step 2: Connect\n    fmt.Println(\"\ud83d\udd0c Connecting to MT5...\")\n    err = sugar.QuickConnect(cluster)\n    if err != nil {\n        return fmt.Errorf(\"connection failed: %w\", err)\n    }\n\n    // Step 3: Wait for price\n    fmt.Printf(\"\u23f3 Waiting for %s price...\\n\", symbol)\n    priceInfo, err := sugar.WaitForPrice(symbol, 15*time.Second)\n    if err != nil {\n        return fmt.Errorf(\"price timeout: %w\", err)\n    }\n\n    fmt.Printf(\"\u2705 Ready to trade!\\n\")\n    fmt.Printf(\"   %s BID: %.5f ASK: %.5f\\n\",\n        symbol, priceInfo.Bid, priceInfo.Ask)\n\n    return nil\n}\n\n// Usage:\nerr := ConnectAndWaitForPrice(\n    591129415,\n    \"password\",\n    \"mt5.mrpc.pro:443\",\n    \"FxPro-MT5 Demo\",\n    \"EURUSD\")\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#3-wait-for-multiple-symbols","title":"3) Wait for multiple symbols","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\n\nfmt.Println(\"Waiting for prices on all symbols...\")\n\nfor _, symbol := range symbols {\n    priceInfo, err := sugar.WaitForPrice(symbol, 10*time.Second)\n    if err != nil {\n        fmt.Printf(\"\u274c %s: Timeout - %v\\n\", symbol, err)\n        continue\n    }\n\n    fmt.Printf(\"\u2705 %s: BID=%.5f ASK=%.5f\\n\",\n        symbol, priceInfo.Bid, priceInfo.Ask)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#4-market-open-detector","title":"4) Market open detector","text":"<pre><code>func WaitForMarketOpen(sugar *mt5.MT5Sugar, symbol string) {\n    fmt.Printf(\"\u23f0 Waiting for %s market to open...\\n\", symbol)\n\n    startTime := time.Now()\n\n    priceInfo, err := sugar.WaitForPrice(symbol, 2*time.Hour)\n    if err != nil {\n        fmt.Printf(\"\u274c Market didn't open within 2 hours\\n\")\n        return\n    }\n\n    elapsed := time.Since(startTime)\n\n    fmt.Printf(\"\u2705 Market OPEN!\\n\")\n    fmt.Printf(\"   Waited: %v\\n\", elapsed.Round(time.Second))\n    fmt.Printf(\"   First price: BID=%.5f ASK=%.5f\\n\",\n        priceInfo.Bid, priceInfo.Ask)\n    fmt.Printf(\"   Server time: %s\\n\", priceInfo.Time.Format(\"15:04:05\"))\n}\n\n// Usage on Monday morning\nWaitForMarketOpen(sugar, \"EURUSD\")\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#5-retry-with-increasing-timeout","title":"5) Retry with increasing timeout","text":"<pre><code>func WaitForPriceWithRetry(sugar *mt5.MT5Sugar, symbol string, maxAttempts int) (*PriceInfo, error) {\n    for attempt := 1; attempt &lt;= maxAttempts; attempt++ {\n        timeout := time.Duration(attempt) * 5 * time.Second\n\n        fmt.Printf(\"Attempt %d/%d: Waiting %v for %s price...\\n\",\n            attempt, maxAttempts, timeout, symbol)\n\n        priceInfo, err := sugar.WaitForPrice(symbol, timeout)\n        if err == nil {\n            fmt.Printf(\"\u2705 Got price on attempt %d\\n\", attempt)\n            return priceInfo, nil\n        }\n\n        fmt.Printf(\"\u274c Attempt %d failed: %v\\n\", attempt, err)\n\n        if attempt &lt; maxAttempts {\n            fmt.Println(\"   Retrying...\")\n            time.Sleep(2 * time.Second)\n        }\n    }\n\n    return nil, fmt.Errorf(\"all %d attempts failed\", maxAttempts)\n}\n\n// Usage:\npriceInfo, err := WaitForPriceWithRetry(sugar, \"EURUSD\", 3)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#6-weekend-gap-handler","title":"6) Weekend gap handler","text":"<pre><code>func HandleWeekendGap(sugar *mt5.MT5Sugar, symbol string) {\n    fmt.Printf(\"\ud83d\udcc5 Weekend ended - waiting for %s to resume...\\n\", symbol)\n\n    // Long timeout for weekend \u2192 Monday transition\n    priceInfo, err := sugar.WaitForPrice(symbol, 30*time.Minute)\n    if err != nil {\n        fmt.Printf(\"\u274c Market didn't resume: %v\\n\", err)\n        return\n    }\n\n    // Check for gap\n    // You'd need to compare with Friday's close price\n    fmt.Printf(\"\u2705 Market resumed!\\n\")\n    fmt.Printf(\"   Monday open: BID=%.5f\\n\", priceInfo.Bid)\n    fmt.Printf(\"   Server time: %s\\n\", priceInfo.Time.Format(\"Mon 15:04:05\"))\n\n    // Could add gap detection logic here\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#7-trading-bot-startup-sequence","title":"7) Trading bot startup sequence","text":"<pre><code>func StartTradingBot(sugar *mt5.MT5Sugar, symbols []string) error {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551       TRADING BOT STARTUP             \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Check connection\n    fmt.Println(\"\\n1. Checking connection...\")\n    if !sugar.IsConnected() {\n        return fmt.Errorf(\"not connected to MT5\")\n    }\n    fmt.Println(\"   \u2705 Connected\")\n\n    // Wait for prices on all symbols\n    fmt.Println(\"\\n2. Waiting for price feeds...\")\n    for i, symbol := range symbols {\n        fmt.Printf(\"   [%d/%d] %s... \", i+1, len(symbols), symbol)\n\n        priceInfo, err := sugar.WaitForPrice(symbol, 15*time.Second)\n        if err != nil {\n            fmt.Printf(\"\u274c TIMEOUT\\n\")\n            return fmt.Errorf(\"%s price not available\", symbol)\n        }\n\n        fmt.Printf(\"\u2705 %.5f\\n\", priceInfo.Bid)\n    }\n\n    fmt.Println(\"\\n\u2705 BOT READY TO TRADE\")\n    return nil\n}\n\n// Usage:\nsymbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\nerr := StartTradingBot(sugar, symbols)\nif err != nil {\n    fmt.Printf(\"Startup failed: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#8-price-feed-validator","title":"8) Price feed validator","text":"<pre><code>func ValidatePriceFeed(sugar *mt5.MT5Sugar, symbol string) bool {\n    fmt.Printf(\"Validating %s price feed...\\n\", symbol)\n\n    // Try to get price within reasonable time\n    priceInfo, err := sugar.WaitForPrice(symbol, 5*time.Second)\n    if err != nil {\n        fmt.Printf(\"\u274c Price feed INVALID: %v\\n\", err)\n        return false\n    }\n\n    // Validate price values\n    if priceInfo.Bid &lt;= 0 || priceInfo.Ask &lt;= 0 {\n        fmt.Printf(\"\u274c Price feed INVALID: Invalid price values\\n\")\n        return false\n    }\n\n    if priceInfo.Ask &lt;= priceInfo.Bid {\n        fmt.Printf(\"\u274c Price feed INVALID: ASK &lt;= BID\\n\")\n        return false\n    }\n\n    // Check timestamp freshness\n    age := time.Since(priceInfo.Time)\n    if age &gt; 10*time.Second {\n        fmt.Printf(\"\u274c Price feed STALE: %v old\\n\", age)\n        return false\n    }\n\n    fmt.Printf(\"\u2705 Price feed VALID\\n\")\n    fmt.Printf(\"   BID: %.5f, ASK: %.5f\\n\", priceInfo.Bid, priceInfo.Ask)\n    fmt.Printf(\"   Age: %.1f seconds\\n\", age.Seconds())\n    return true\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#9-emergency-reconnection","title":"9) Emergency reconnection","text":"<pre><code>func EmergencyReconnect(sugar *mt5.MT5Sugar, cluster, symbol string) error {\n    fmt.Println(\"\ud83d\udea8 Emergency reconnection initiated...\")\n\n    // Reconnect\n    err := sugar.QuickConnect(cluster)\n    if err != nil {\n        return fmt.Errorf(\"reconnect failed: %w\", err)\n    }\n\n    fmt.Println(\"\u2705 Reconnected - waiting for price feed...\")\n\n    // Wait for price to confirm connection is working\n    _, err = sugar.WaitForPrice(symbol, 30*time.Second)\n    if err != nil {\n        return fmt.Errorf(\"price feed not restored: %w\", err)\n    }\n\n    fmt.Println(\"\u2705 Connection fully restored!\")\n    return nil\n}\n\n// Usage during connection loss\nif !sugar.IsConnected() {\n    err := EmergencyReconnect(sugar, \"FxPro-MT5 Demo\", \"EURUSD\")\n    if err != nil {\n        fmt.Printf(\"Recovery failed: %v\\n\", err)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#10-symbol-availability-checker","title":"10) Symbol availability checker","text":"<pre><code>func CheckSymbolAvailability(sugar *mt5.MT5Sugar, symbols []string) {\n    fmt.Println(\"Checking symbol availability:\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    available := []string{}\n    unavailable := []string{}\n\n    for _, symbol := range symbols {\n        fmt.Printf(\"%-10s ... \", symbol)\n\n        priceInfo, err := sugar.WaitForPrice(symbol, 3*time.Second)\n        if err != nil {\n            fmt.Println(\"\u274c NOT AVAILABLE\")\n            unavailable = append(unavailable, symbol)\n        } else {\n            fmt.Printf(\"\u2705 BID=%.5f\\n\", priceInfo.Bid)\n            available = append(available, symbol)\n        }\n    }\n\n    fmt.Println(\"\\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n    fmt.Printf(\"Available:   %d symbols\\n\", len(available))\n    fmt.Printf(\"Unavailable: %d symbols\\n\", len(unavailable))\n\n    if len(unavailable) &gt; 0 {\n        fmt.Println(\"\\nUnavailable symbols:\")\n        for _, s := range unavailable {\n            fmt.Printf(\"  - %s\\n\", s)\n        }\n    }\n}\n\n// Usage:\nsymbols := []string{\"EURUSD\", \"GBPUSD\", \"XAUUSD\", \"INVALID\", \"BTCUSD\"}\nCheckSymbolAvailability(sugar, symbols)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<ul> <li><code>GetPriceInfo()</code> - Get price immediately (no waiting)</li> <li><code>IsSymbolAvailable()</code> - Check if symbol exists</li> <li><code>QuickConnect()</code> - Connect to MT5</li> </ul>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#1-timeout-too-short","title":"1) Timeout too short","text":"<pre><code>// \u274c WRONG - might timeout during slow connection\npriceInfo, _ := sugar.WaitForPrice(\"EURUSD\", 1*time.Second)\n\n// \u2705 CORRECT - reasonable timeout\npriceInfo, _ := sugar.WaitForPrice(\"EURUSD\", 10*time.Second)\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#2-not-checking-for-error","title":"2) Not checking for error","text":"<pre><code>// \u274c WRONG - ignoring timeout error\npriceInfo, _ := sugar.WaitForPrice(\"EURUSD\", 5*time.Second)\nfmt.Printf(\"Price: %.5f\\n\", priceInfo.Bid) // Might panic if timeout!\n\n// \u2705 CORRECT - handle timeout\npriceInfo, err := sugar.WaitForPrice(\"EURUSD\", 5*time.Second)\nif err != nil {\n    fmt.Printf(\"Timeout: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Prices_Quotes/WaitForPrice/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>Use after connection - Always wait for price before trading</li> <li>Reasonable timeout - 10-15 seconds is usually enough</li> <li>Multiple symbols - Check all symbols before starting bot</li> <li>Weekend handling - Use longer timeout (30min) on Monday</li> <li>Fallback plan - Have reconnection logic if timeout occurs</li> </ol> <p>See also: <code>GetPriceInfo.md</code>, <code>QuickConnect.md</code></p>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/","title":"\ud83d\udfe2\ud83d\udcc9 Buy Limit Order (<code>BuyLimit</code>)","text":"<p>Sugar method: Places pending BUY order that executes when price drops to specified level.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.BuyLimit(symbol, volume, price)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Pending order ticket number</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) BuyLimit(symbol string, volume, price float64) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1) <code>price</code> <code>float64</code> Entry price (must be BELOW current ASK) Output Type Description <code>ticket</code> <code>uint64</code> Pending order ticket number <code>error</code> <code>error</code> Error if order rejected"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Pending BUY order that activates when price drops to your target.</li> <li>Why you need it: Buy at a better price (support level) instead of current market.</li> <li>Sanity check: Entry price must be BELOW current ASK. Order waits until price reaches your level.</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#buy-limit-logic","title":"\ud83d\udcca BUY LIMIT Logic","text":"<pre><code>Current ASK: 1.08500\nBUY LIMIT:   1.08000 (500 pips BELOW current price)\n\nWhen price drops to 1.08000 \u2192 Order executes automatically\n</code></pre> <p>Use case: Buy at support / Buy the dip / Enter on pullback</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Support levels - Buy when price reaches support</p> <p>\u2705 Pullbacks - Enter on price retracement</p> <p>\u2705 Buy the dip - Wait for price to drop before buying</p> <p>\u2705 Better entry - Get better price than current market</p> <p>\u274c NOT for breakouts - Use <code>BuyStop()</code> for breakouts</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#1-basic-usage-buy-at-support","title":"1) Basic usage - buy at support","text":"<pre><code>symbol := \"EURUSD\"\ncurrentAsk, _ := sugar.GetAsk(symbol)\nsupportLevel := currentAsk - 0.00050 // 50 pips below\n\nticket, err := sugar.BuyLimit(symbol, 0.1, supportLevel)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 BUY LIMIT order placed\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Entry:  %.5f (current: %.5f)\\n\", supportLevel, currentAsk)\nfmt.Printf(\"   Will execute when price drops %.0f pips\\n\",\n    (currentAsk-supportLevel)/0.00001)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#2-buy-on-pullback","title":"2) Buy on pullback","text":"<pre><code>symbol := \"EURUSD\"\n\n// Current uptrend, wait for pullback\ncurrentAsk, _ := sugar.GetAsk(symbol)\npullbackLevel := currentAsk - 0.00030 // Wait for 30 pip pullback\n\nticket, _ := sugar.BuyLimit(symbol, 0.1, pullbackLevel)\n\nfmt.Printf(\"BUY LIMIT set for pullback entry\\n\")\nfmt.Printf(\"Current: %.5f\\n\", currentAsk)\nfmt.Printf(\"Entry:   %.5f (pullback level)\\n\", pullbackLevel)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#3-multiple-buy-limits-at-different-levels","title":"3) Multiple buy limits at different levels","text":"<pre><code>symbol := \"EURUSD\"\ncurrentAsk, _ := sugar.GetAsk(symbol)\nvolume := 0.1\n\n// Set limits at different support levels\nlevels := []float64{\n    currentAsk - 0.00020, // -20 pips\n    currentAsk - 0.00050, // -50 pips\n    currentAsk - 0.00100, // -100 pips\n}\n\nfmt.Println(\"Placing multiple BUY LIMIT orders:\")\n\nfor i, level := range levels {\n    ticket, err := sugar.BuyLimit(symbol, volume, level)\n    if err != nil {\n        fmt.Printf(\"Level %d failed: %v\\n\", i+1, err)\n        continue\n    }\n\n    pipsAway := (currentAsk - level) / 0.00001\n    fmt.Printf(\"\u2705 Level %d: %.5f (%.0f pips away) - Ticket #%d\\n\",\n        i+1, level, pipsAway, ticket)\n}\n\n// Output:\n// \u2705 Level 1: 1.08300 (20 pips away) - Ticket #12345\n// \u2705 Level 2: 1.08000 (50 pips away) - Ticket #12346\n// \u2705 Level 3: 1.07500 (100 pips away) - Ticket #12347\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#4-buy-limit-with-validation","title":"4) Buy limit with validation","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Get current price\ncurrentAsk, _ := sugar.GetAsk(symbol)\n\n// Calculate entry price (support level)\ninfo, _ := sugar.GetSymbolInfo(symbol)\nentryPrice := currentAsk - (50 * info.Point) // 50 pips below\n\n// Validate entry price is below current\nif entryPrice &gt;= currentAsk {\n    fmt.Printf(\"\u274c Error: Entry %.5f must be below ASK %.5f\\n\",\n        entryPrice, currentAsk)\n    return\n}\n\n// Check minimum stop level\nstopLevel, _ := sugar.GetMinStopLevel(symbol)\nminDistance := float64(stopLevel) * info.Point\n\nif (currentAsk - entryPrice) &lt; minDistance {\n    fmt.Printf(\"\u274c Entry too close (min: %.5f)\\n\", minDistance)\n    return\n}\n\n// Place order\nticket, _ := sugar.BuyLimit(symbol, volume, entryPrice)\nfmt.Printf(\"\u2705 BUY LIMIT placed at %.5f\\n\", entryPrice)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#5-buy-limit-with-sltp-using-separate-method","title":"5) Buy limit with SL/TP (using separate method)","text":"<pre><code>symbol := \"EURUSD\"\ncurrentAsk, _ := sugar.GetAsk(symbol)\nentryPrice := currentAsk - 0.00050 // 50 pips below\n\n// Place buy limit\nticket, _ := sugar.BuyLimit(symbol, 0.1, entryPrice)\n\n// Calculate SL/TP from entry price\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", entryPrice, 30, 60)\n\n// Set SL/TP on pending order\nsugar.ModifyPositionSLTP(ticket, sl, tp)\n\nfmt.Printf(\"BUY LIMIT with SL/TP:\\n\")\nfmt.Printf(\"  Entry: %.5f\\n\", entryPrice)\nfmt.Printf(\"  SL:    %.5f (-30 pips)\\n\", sl)\nfmt.Printf(\"  TP:    %.5f (+60 pips)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#6-scale-in-with-buy-limits","title":"6) Scale in with buy limits","text":"<pre><code>symbol := \"EURUSD\"\ncurrentAsk, _ := sugar.GetAsk(symbol)\ntotalVolume := 0.3\nentries := 3\n\nvolumePerEntry := totalVolume / float64(entries)\n\nfmt.Printf(\"Scaling in with %d BUY LIMIT orders\\n\", entries)\n\nfor i := 1; i &lt;= entries; i++ {\n    // Each level 20 pips apart\n    entryPrice := currentAsk - (float64(i) * 0.00020)\n\n    ticket, err := sugar.BuyLimit(symbol, volumePerEntry, entryPrice)\n    if err != nil {\n        continue\n    }\n\n    fmt.Printf(\"Entry %d: %.2f lots at %.5f - Ticket #%d\\n\",\n        i, volumePerEntry, entryPrice, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#7-cancel-unfilled-buy-limit","title":"7) Cancel unfilled buy limit","text":"<pre><code>symbol := \"EURUSD\"\nentryPrice := 1.08000\n\nticket, _ := sugar.BuyLimit(symbol, 0.1, entryPrice)\nfmt.Printf(\"BUY LIMIT placed: Ticket #%d\\n\", ticket)\n\n// Wait 5 minutes\nfmt.Println(\"Waiting 5 minutes...\")\ntime.Sleep(5 * time.Minute)\n\n// Check if filled\npos, err := sugar.GetPositionByTicket(ticket)\nif err != nil {\n    // Not filled - cancel it\n    fmt.Println(\"Order not filled - canceling...\")\n    // Note: Use OrderDelete for pending orders\n    // sugar.DeleteOrder(ticket) // If you have this method\n} else {\n    fmt.Printf(\"\u2705 Order filled at %.5f\\n\", pos.PriceOpen)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#8-buy-limit-at-fibonacci-retracement","title":"8) Buy limit at Fibonacci retracement","text":"<pre><code>symbol := \"EURUSD\"\n\n// Previous swing high and low\nswingHigh := 1.09000\nswingLow := 1.08000\nrange_ := swingHigh - swingLow\n\n// 38.2% Fibonacci retracement\nfib382 := swingHigh - (range_ * 0.382)\n\n// Place buy limit at Fib level\nticket, _ := sugar.BuyLimit(symbol, 0.1, fib382)\n\nfmt.Printf(\"BUY LIMIT at Fibonacci 38.2%%\\n\")\nfmt.Printf(\"Swing High: %.5f\\n\", swingHigh)\nfmt.Printf(\"Swing Low:  %.5f\\n\", swingLow)\nfmt.Printf(\"Entry:      %.5f (Fib 38.2%%)\\n\", fib382)\nfmt.Printf(\"Ticket:     #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#9-grid-trading-with-buy-limits","title":"9) Grid trading with buy limits","text":"<pre><code>symbol := \"EURUSD\"\ncurrentAsk, _ := sugar.GetAsk(symbol)\n\ngridLevels := 5\ngridSpacing := 0.00020 // 20 pips\nvolume := 0.01\n\nfmt.Printf(\"Grid trading: %d BUY LIMIT orders\\n\", gridLevels)\n\nfor i := 1; i &lt;= gridLevels; i++ {\n    entryPrice := currentAsk - (float64(i) * gridSpacing)\n\n    ticket, err := sugar.BuyLimit(symbol, volume, entryPrice)\n    if err != nil {\n        fmt.Printf(\"Grid %d failed: %v\\n\", i, err)\n        continue\n    }\n\n    pipsAway := (currentAsk - entryPrice) / 0.00001\n    fmt.Printf(\"Grid %d: %.5f (%.0f pips) - #%d\\n\",\n        i, entryPrice, pipsAway, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#10-advanced-buy-limit-with-monitoring","title":"10) Advanced buy limit with monitoring","text":"<pre><code>func PlaceBuyLimitWithMonitoring(sugar *mt5.MT5Sugar, symbol string, pipsBelow float64) {\n    // Get current price\n    currentAsk, _ := sugar.GetAsk(symbol)\n    info, _ := sugar.GetSymbolInfo(symbol)\n\n    // Calculate entry\n    entryPrice := currentAsk - (pipsBelow * info.Point)\n\n    fmt.Printf(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\\n\")\n    fmt.Printf(\"\u2551       BUY LIMIT ORDER                 \u2551\\n\")\n    fmt.Printf(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\\n\")\n    fmt.Printf(\"Symbol:       %s\\n\", symbol)\n    fmt.Printf(\"Current ASK:  %.5f\\n\", currentAsk)\n    fmt.Printf(\"Entry Price:  %.5f\\n\", entryPrice)\n    fmt.Printf(\"Distance:     %.0f pips\\n\", pipsBelow)\n\n    // Place order\n    ticket, err := sugar.BuyLimit(symbol, 0.1, entryPrice)\n    if err != nil {\n        fmt.Printf(\"\u274c Order failed: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"\u2705 Order placed: #%d\\n\", ticket)\n    fmt.Println(\"\\nMonitoring price...\")\n\n    // Monitor until filled or timeout\n    ticker := time.NewTicker(5 * time.Second)\n    defer ticker.Stop()\n\n    timeout := time.After(30 * time.Minute)\n\n    for {\n        select {\n        case &lt;-timeout:\n            fmt.Println(\"\u23f0 Timeout - order not filled in 30 minutes\")\n            return\n\n        case &lt;-ticker.C:\n            ask, _ := sugar.GetAsk(symbol)\n            distance := ask - entryPrice\n            distancePips := distance / info.Point\n\n            // Check if filled\n            _, err := sugar.GetPositionByTicket(ticket)\n            if err == nil {\n                fmt.Printf(\"\\n\u2705 ORDER FILLED at %.5f!\\n\", ask)\n                return\n            }\n\n            fmt.Printf(\"ASK: %.5f (%.0f pips away from entry)\\n\",\n                ask, distancePips)\n        }\n    }\n}\n\n// Usage:\nPlaceBuyLimitWithMonitoring(sugar, \"EURUSD\", 50)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other limit orders: * <code>SellLimit()</code> - SELL when price goes UP * <code>BuyLimitWithSLTP()</code> - BUY LIMIT with SL/TP</p> <p>\ud83c\udf6c Stop orders (for breakouts): * <code>BuyStop()</code> - BUY when price breaks UP</p> <p>\ud83c\udf6c Market orders: * <code>BuyMarket()</code> - BUY immediately at current price</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#1-setting-entry-price-above-current-price","title":"1) Setting entry price above current price","text":"<pre><code>// \u274c WRONG - Buy Limit must be BELOW current price\ncurrentAsk := 1.08500\nsugar.BuyLimit(\"EURUSD\", 0.1, 1.09000) // ABOVE! Will be rejected!\n\n// \u2705 CORRECT - Below current price\nsugar.BuyLimit(\"EURUSD\", 0.1, 1.08000) // Below ASK\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#2-confusing-buylimit-with-buystop","title":"2) Confusing BuyLimit with BuyStop","text":"<pre><code>// BUY LIMIT = wait for price to DROP then buy\nsugar.BuyLimit(\"EURUSD\", 0.1, 1.08000) // Buy when drops to 1.08000\n\n// BUY STOP = wait for price to RISE then buy (breakout)\nsugar.BuyStop(\"EURUSD\", 0.1, 1.09000) // Buy when rises to 1.09000\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyLimit/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li>BUY LIMIT = buy cheaper - Wait for price to drop</li> <li>Set at support levels - Use technical analysis</li> <li>Multiple levels - Scale in at different prices</li> <li>Monitor fills - Check if order was executed</li> <li>Use with SL/TP - Set risk management on pending orders</li> </ol> <p>See also: <code>BuyLimit WithSLTP.md</code>, <code>BuyStop.md</code>, <code>SellLimit.md</code></p>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/","title":"\ud83d\udfe2 Buy at Market Price (<code>BuyMarket</code>)","text":"<p>Sugar method: Opens a BUY position instantly at current market ASK price.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.BuyMarket(symbol, volume)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Position ticket number</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) BuyMarket(symbol string, volume float64) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.01, 0.1, 1.0) Output Type Description <code>ticket</code> <code>uint64</code> Position ticket number (for tracking/closing) <code>error</code> <code>error</code> Error if order rejected or execution failed"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Instantly opens a BUY position at current market ASK price.</li> <li>Why you need it: Simplest way to go LONG on a symbol.</li> <li>Sanity check: Order executes immediately - no waiting, no SL/TP set.</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#important","title":"\u26a0\ufe0f IMPORTANT","text":"<p>This method does NOT set Stop Loss or Take Profit!</p> <ul> <li>Use <code>BuyMarketWithSLTP()</code> for trades with risk management</li> <li>Use <code>BuyMarketWithPips()</code> for trades with SL/TP in pips</li> <li>Or manually add SL/TP after: <code>ModifyPositionSLTP(ticket, sl, tp)</code></li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Quick entries - When you want instant market entry</p> <p>\u2705 Manual management - You'll set SL/TP manually later</p> <p>\u2705 Testing/learning - Simple way to test trading</p> <p>\u274c NOT for production - Always use SL/TP in real trading!</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>ticket, err := sugar.BuyMarket(\"EURUSD\", 0.1)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 BUY position opened, ticket #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#2-with-error-handling","title":"2) With error handling","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\nticket, err := sugar.BuyMarket(symbol, volume)\nif err != nil {\n    fmt.Printf(\"\u274c BUY failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 BUY %s %.2f lots\\n\", symbol, volume)\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"\u26a0\ufe0f  No SL/TP set - add manually!\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#3-add-sltp-immediately-after-opening","title":"3) Add SL/TP immediately after opening","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Open position\nticket, err := sugar.BuyMarket(symbol, volume)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Position #%d opened\\n\", ticket)\n\n// Calculate SL/TP (50 pips SL, 100 pips TP)\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, 50, 100)\n\n// Set SL/TP\nerr = sugar.ModifyPositionSLTP(ticket, sl, tp)\nif err != nil {\n    fmt.Printf(\"\u26a0\ufe0f  Failed to set SL/TP: %v\\n\", err)\n} else {\n    fmt.Printf(\"\u2705 SL/TP set: %.5f / %.5f\\n\", sl, tp)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#4-check-price-before-buying","title":"4) Check price before buying","text":"<pre><code>symbol := \"EURUSD\"\nmaxPrice := 1.09000\n\n// Check current ASK\nask, _ := sugar.GetAsk(symbol)\n\nif ask &gt; maxPrice {\n    fmt.Printf(\"\u274c Price too high: %.5f &gt; %.5f\\n\", ask, maxPrice)\n    return\n}\n\nfmt.Printf(\"\u2705 Good price: %.5f\\n\", ask)\n\n// Place order\nticket, _ := sugar.BuyMarket(symbol, 0.1)\nfmt.Printf(\"BUY order #%d placed at ~%.5f\\n\", ticket, ask)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#5-risk-managed-entry","title":"5) Risk-managed entry","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nstopLossPips := 50.0\ntakeProfitPips := 100.0\n\n// Step 1: Calculate position size based on risk\nlotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, stopLossPips)\nif err != nil {\n    fmt.Printf(\"Position size calc failed: %v\\n\", err)\n    return\n}\n\n// Step 2: Validate we can open\ncanOpen, reason, _ := sugar.CanOpenPosition(symbol, lotSize)\nif !canOpen {\n    fmt.Printf(\"Cannot open: %s\\n\", reason)\n    return\n}\n\n// Step 3: Open position\nticket, err := sugar.BuyMarket(symbol, lotSize)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\n// Step 4: Set SL/TP\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, stopLossPips, takeProfitPips)\nsugar.ModifyPositionSLTP(ticket, sl, tp)\n\nfmt.Printf(\"\u2705 Complete setup!\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Size: %.2f lots (%.1f%% risk)\\n\", lotSize, riskPercent)\nfmt.Printf(\"   SL: %.0f pips, TP: %.0f pips\\n\", stopLossPips, takeProfitPips)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#6-open-multiple-positions","title":"6) Open multiple positions","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\nvolume := 0.1\n\nfmt.Println(\"Opening BUY positions:\")\n\nfor _, symbol := range symbols {\n    ticket, err := sugar.BuyMarket(symbol, volume)\n    if err != nil {\n        fmt.Printf(\"\u274c %s: Failed - %v\\n\", symbol, err)\n        continue\n    }\n\n    fmt.Printf(\"\u2705 %s: Ticket #%d\\n\", symbol, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#7-track-position-after-opening","title":"7) Track position after opening","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Open position\nticket, err := sugar.BuyMarket(symbol, volume)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Position #%d opened\\n\", ticket)\n\n// Monitor position\ntime.Sleep(5 * time.Second)\n\npos, err := sugar.GetPositionByTicket(ticket)\nif err != nil {\n    fmt.Printf(\"Position not found: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\\nPosition Status:\\n\")\nfmt.Printf(\"  Symbol:      %s\\n\", pos.Symbol)\nfmt.Printf(\"  Volume:      %.2f\\n\", pos.Volume)\nfmt.Printf(\"  Open Price:  %.5f\\n\", pos.PriceOpen)\nfmt.Printf(\"  Current P/L: $%.2f\\n\", pos.Profit)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#8-wait-for-confirmation","title":"8) Wait for confirmation","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\nfmt.Printf(\"Placing BUY order for %s...\\n\", symbol)\n\nticket, err := sugar.BuyMarket(symbol, volume)\nif err != nil {\n    fmt.Printf(\"\u274c Order REJECTED: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Order FILLED\\n\")\nfmt.Printf(\"   Ticket:  #%d\\n\", ticket)\n\n// Verify position exists\ntime.Sleep(1 * time.Second)\npositions, _ := sugar.GetOpenPositions()\n\nfound := false\nfor _, pos := range positions {\n    if pos.Ticket == ticket {\n        found = true\n        fmt.Printf(\"   Entry:   %.5f\\n\", pos.PriceOpen)\n        fmt.Printf(\"   Volume:  %.2f lots\\n\", pos.Volume)\n        break\n    }\n}\n\nif !found {\n    fmt.Println(\"\u26a0\ufe0f  WARNING: Position not found in open positions!\")\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#9-scale-into-position","title":"9) Scale into position","text":"<pre><code>symbol := \"EURUSD\"\ntotalLots := 0.3\nentries := 3\n\nlotPerEntry := totalLots / float64(entries)\n\nfmt.Printf(\"Scaling into %s with %d entries of %.2f lots each\\n\",\n    symbol, entries, lotPerEntry)\n\ntickets := []uint64{}\n\nfor i := 1; i &lt;= entries; i++ {\n    fmt.Printf(\"\\nEntry %d/%d: \", i, entries)\n\n    ticket, err := sugar.BuyMarket(symbol, lotPerEntry)\n    if err != nil {\n        fmt.Printf(\"\u274c Failed - %v\\n\", err)\n        continue\n    }\n\n    tickets = append(tickets, ticket)\n    fmt.Printf(\"\u2705 Ticket #%d\\n\", ticket)\n\n    // Wait between entries\n    if i &lt; entries {\n        time.Sleep(5 * time.Second)\n    }\n}\n\nfmt.Printf(\"\\nOpened %d/%d positions\\n\", len(tickets), entries)\nfmt.Printf(\"Total tickets: %v\\n\", tickets)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#10-advanced-order-with-pre-checks","title":"10) Advanced order with pre-checks","text":"<pre><code>func PlaceBuyOrder(sugar *mt5.MT5Sugar, symbol string, volume float64) (uint64, error) {\n    // Pre-check 1: Connection\n    if !sugar.IsConnected() {\n        return 0, fmt.Errorf(\"not connected to MT5\")\n    }\n\n    // Pre-check 2: Symbol availability\n    available, _ := sugar.IsSymbolAvailable(symbol)\n    if !available {\n        return 0, fmt.Errorf(\"symbol %s not available\", symbol)\n    }\n\n    // Pre-check 3: Spread check\n    spread, _ := sugar.GetSpread(symbol)\n    if spread &gt; 20 {\n        return 0, fmt.Errorf(\"spread too high: %.0f points\", spread)\n    }\n\n    // Pre-check 4: Margin check\n    canOpen, reason, _ := sugar.CanOpenPosition(symbol, volume)\n    if !canOpen {\n        return 0, fmt.Errorf(\"cannot open: %s\", reason)\n    }\n\n    // All checks passed - place order\n    fmt.Printf(\"\u2705 All pre-checks passed\\n\")\n    fmt.Printf(\"   Symbol:  %s\\n\", symbol)\n    fmt.Printf(\"   Volume:  %.2f lots\\n\", volume)\n    fmt.Printf(\"   Spread:  %.0f points\\n\", spread)\n\n    ticket, err := sugar.BuyMarket(symbol, volume)\n    if err != nil {\n        return 0, fmt.Errorf(\"order execution failed: %w\", err)\n    }\n\n    fmt.Printf(\"\u2705 Order filled - Ticket #%d\\n\", ticket)\n    return ticket, nil\n}\n\n// Usage:\nticket, err := PlaceBuyOrder(sugar, \"EURUSD\", 0.1)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Better alternatives with SL/TP:</p> <ul> <li><code>BuyMarketWithSLTP()</code> - BUY with SL/TP prices</li> <li><code>BuyMarketWithPips()</code> - BUY with SL/TP in pips \u2b50 RECOMMENDED</li> </ul> <p>\ud83c\udf6c Other market orders:</p> <ul> <li><code>SellMarket()</code> - SELL at market</li> </ul> <p>\ud83c\udf6c Position management:</p> <ul> <li><code>ModifyPositionSLTP()</code> - Add SL/TP after opening</li> <li><code>ClosePosition()</code> - Close the position</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#1-trading-without-stop-loss","title":"1) Trading without Stop Loss","text":"<pre><code>// \u274c DANGEROUS - No stop loss!\nticket, _ := sugar.BuyMarket(\"EURUSD\", 0.1)\n// Position has no protection!\n\n// \u2705 CORRECT - Use version with SL/TP\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#2-not-checking-for-errors","title":"2) Not checking for errors","text":"<pre><code>// \u274c WRONG - ignoring errors\nticket, _ := sugar.BuyMarket(\"EURUSD\", 0.1)\nfmt.Printf(\"Ticket: %d\\n\", ticket) // Might be 0!\n\n// \u2705 CORRECT - check errors\nticket, err := sugar.BuyMarket(\"EURUSD\", 0.1)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#3-using-fixed-lot-size","title":"3) Using fixed lot size","text":"<pre><code>// \u274c WRONG - fixed lot size (no risk management)\nsugar.BuyMarket(\"EURUSD\", 0.1)\n\n// \u2705 CORRECT - calculate based on risk\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nsugar.BuyMarket(\"EURUSD\", lotSize)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#4-not-validating-before-trading","title":"4) Not validating before trading","text":"<pre><code>// \u274c WRONG - trading without checks\nsugar.BuyMarket(\"EURUSD\", 10.0) // Might fail!\n\n// \u2705 CORRECT - validate first\ncanOpen, reason, _ := sugar.CanOpenPosition(\"EURUSD\", 10.0)\nif !canOpen {\n    fmt.Println(\"Cannot trade:\", reason)\n    return\n}\nsugar.BuyMarket(\"EURUSD\", 10.0)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Always use SL/TP - Use <code>BuyMarketWithPips()</code> instead for safer trading</p> </li> <li> <p>Calculate position size - Use <code>CalculatePositionSize()</code> for risk management</p> </li> <li> <p>Validate first - Use <code>CanOpenPosition()</code> before placing order</p> </li> <li> <p>Check spread - High spread = bad entry</p> </li> <li> <p>For production - Never use this method without immediately adding SL/TP</p> </li> </ol>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyMarket/#production-recommendation","title":"\ud83d\udea8 Production Recommendation","text":"<p>DON'T use <code>BuyMarket()</code> in production!</p> <p>Instead, use the safer alternatives:</p> <pre><code>// \u2705 RECOMMENDED for production\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n\n// OR with full risk management\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nticket, _ := sugar.BuyMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre> <p>See also: <code>BuyMarketWithPips.md</code>, <code>BuyMarketWithSLTP.md</code>, <code>SellMarket.md</code></p>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/","title":"\ud83d\udfe2\ud83d\udcc8 Buy Stop Order (<code>BuyStop</code>)","text":"<p>Sugar method: Places pending BUY order that executes when price breaks ABOVE specified level.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.BuyStop(symbol, volume, price)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Pending order ticket number</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) BuyStop(symbol string, volume, price float64) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1) <code>price</code> <code>float64</code> Entry price (must be ABOVE current ASK) Output Type Description <code>ticket</code> <code>uint64</code> Pending order ticket number <code>error</code> <code>error</code> Error if order rejected"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Pending BUY order that activates when price breaks ABOVE resistance.</li> <li>Why you need it: Buy on breakouts - when price confirms upward momentum.</li> <li>Sanity check: Entry price must be ABOVE current ASK. Order activates on breakout.</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#buy-stop-logic","title":"\ud83d\udcca BUY STOP Logic","text":"<pre><code>Current ASK: 1.08500\nBUY STOP:    1.09000 (500 pips ABOVE current price)\n\nWhen price rises to 1.09000 \u2192 Order executes automatically\n</code></pre> <p>Use case: Breakout trading / Buy on resistance break / Momentum trading</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Breakout trading - Buy when price breaks resistance</p> <p>\u2705 Momentum trading - Enter when uptrend confirmed</p> <p>\u2705 Range breakouts - Buy when price exits consolidation upward</p> <p>\u2705 Follow strong trends - Join established upward momentum</p> <p>\u274c NOT for pullbacks - Use <code>BuyLimit()</code> for buying dips</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#1-basic-usage-buy-on-breakout","title":"1) Basic usage - buy on breakout","text":"<pre><code>symbol := \"EURUSD\"\ncurrentAsk, _ := sugar.GetAsk(symbol)\nresistanceLevel := 1.09000 // Known resistance\n\n// Place buy stop above resistance\nticket, err := sugar.BuyStop(symbol, 0.1, resistanceLevel)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 BUY STOP order placed\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Entry:  %.5f (current: %.5f)\\n\", resistanceLevel, currentAsk)\nfmt.Printf(\"   Will execute when price breaks %.0f pips higher\\n\",\n    (resistanceLevel-currentAsk)/0.00001)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#2-range-breakout-trading","title":"2) Range breakout trading","text":"<pre><code>symbol := \"EURUSD\"\n\n// Price consolidating between 1.08000 and 1.08500\nrangeHigh := 1.08500\nrangeHigh += 0.00010 // Place stop 10 pips above range high\n\nticket, _ := sugar.BuyStop(symbol, 0.1, rangeHigh)\n\nfmt.Printf(\"BUY STOP set for range breakout\\n\")\nfmt.Printf(\"Range high: %.5f\\n\", 1.08500)\nfmt.Printf(\"Entry:      %.5f (10 pips above)\\n\", rangeHigh)\nfmt.Printf(\"Strategy:   Buy if price breaks out of range\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#3-momentum-breakout-with-multiple-levels","title":"3) Momentum breakout with multiple levels","text":"<pre><code>symbol := \"EURUSD\"\ncurrentAsk, _ := sugar.GetAsk(symbol)\nvolume := 0.05\n\n// Set buy stops at different breakout levels\nbreakoutLevels := []float64{\n    1.08500, // First resistance\n    1.09000, // Second resistance\n    1.09500, // Third resistance\n}\n\nfmt.Println(\"Placing multiple BUY STOP orders:\")\n\nfor i, level := range breakoutLevels {\n    // Only place stops above current price\n    if level &lt;= currentAsk {\n        fmt.Printf(\"Level %d: %.5f - SKIPPED (below current price)\\n\", i+1, level)\n        continue\n    }\n\n    ticket, err := sugar.BuyStop(symbol, volume, level)\n    if err != nil {\n        fmt.Printf(\"Level %d failed: %v\\n\", i+1, err)\n        continue\n    }\n\n    pipsAway := (level - currentAsk) / 0.00001\n    fmt.Printf(\"\u2705 Level %d: %.5f (%.0f pips away) - Ticket #%d\\n\",\n        i+1, level, pipsAway, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#4-buy-stop-with-validation","title":"4) Buy stop with validation","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nbreakoutPrice := 1.09000\n\n// Get current price\ncurrentAsk, _ := sugar.GetAsk(symbol)\n\n// Validate entry price is above current\nif breakoutPrice &lt;= currentAsk {\n    fmt.Printf(\"\u274c Error: Entry %.5f must be above ASK %.5f\\n\",\n        breakoutPrice, currentAsk)\n    return\n}\n\n// Check minimum stop level\ninfo, _ := sugar.GetSymbolInfo(symbol)\nstopLevel, _ := sugar.GetMinStopLevel(symbol)\nminDistance := float64(stopLevel) * info.Point\n\nif (breakoutPrice - currentAsk) &lt; minDistance {\n    fmt.Printf(\"\u274c Entry too close (min: %.5f)\\n\", minDistance)\n    return\n}\n\n// Place order\nticket, _ := sugar.BuyStop(symbol, volume, breakoutPrice)\nfmt.Printf(\"\u2705 BUY STOP placed at %.5f\\n\", breakoutPrice)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#5-buy-stop-with-sltp-atr-based","title":"5) Buy stop with SL/TP (ATR-based)","text":"<pre><code>symbol := \"EURUSD\"\nbreakoutPrice := 1.09000\n\n// Place buy stop\nticket, _ := sugar.BuyStop(symbol, 0.1, breakoutPrice)\n\n// Calculate SL/TP based on ATR or fixed pips\n// For breakout: SL below breakout level, TP 2x the distance\ninfo, _ := sugar.GetSymbolInfo(symbol)\nslDistance := 30.0 // 30 pips SL\ntpDistance := 60.0 // 60 pips TP (2:1 R:R)\n\nsl := breakoutPrice - (slDistance * info.Point)\ntp := breakoutPrice + (tpDistance * info.Point)\n\n// Set SL/TP on pending order\nsugar.ModifyPositionSLTP(ticket, sl, tp)\n\nfmt.Printf(\"BUY STOP with SL/TP:\\n\")\nfmt.Printf(\"  Entry: %.5f (breakout)\\n\", breakoutPrice)\nfmt.Printf(\"  SL:    %.5f (-30 pips)\\n\", sl)\nfmt.Printf(\"  TP:    %.5f (+60 pips)\\n\", tp)\nfmt.Printf(\"  R:R:   1:2\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#6-trend-continuation-buy-stop","title":"6) Trend continuation buy stop","text":"<pre><code>symbol := \"EURUSD\"\n\n// Strong uptrend - previous high at 1.09000\npreviousHigh := 1.09000\nentryPrice := previousHigh + 0.00010 // 10 pips above previous high\n\nticket, _ := sugar.BuyStop(symbol, 0.1, entryPrice)\n\nfmt.Printf(\"Trend continuation BUY STOP\\n\")\nfmt.Printf(\"Previous high: %.5f\\n\", previousHigh)\nfmt.Printf(\"Entry:         %.5f (+10 pips)\\n\", entryPrice)\nfmt.Printf(\"Strategy:      Buy if uptrend continues\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#7-news-breakout-strategy","title":"7) News breakout strategy","text":"<pre><code>// Before major news release - price at 1.08500\nsymbol := \"EURUSD\"\ncurrentPrice := 1.08500\n\n// Place buy stop for upside breakout\nbuyStopPrice := currentPrice + 0.00030 // 30 pips above\nbuyTicket, _ := sugar.BuyStop(symbol, 0.1, buyStopPrice)\n\n// Also place sell stop for downside breakout\nsellStopPrice := currentPrice - 0.00030 // 30 pips below\nsellTicket, _ := sugar.SellStop(symbol, 0.1, sellStopPrice)\n\nfmt.Printf(\"News breakout strategy:\\n\")\nfmt.Printf(\"  Current:   %.5f\\n\", currentPrice)\nfmt.Printf(\"  BUY STOP:  %.5f (ticket #%d)\\n\", buyStopPrice, buyTicket)\nfmt.Printf(\"  SELL STOP: %.5f (ticket #%d)\\n\", sellStopPrice, sellTicket)\nfmt.Printf(\"  Strategy:  OCO - whichever direction breaks first\\n\")\nfmt.Printf(\"  Remember:  Cancel other order when one fills!\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#8-trailing-buy-stop-manual-adjustment","title":"8) Trailing buy stop (manual adjustment)","text":"<pre><code>symbol := \"EURUSD\"\nresistanceLevel := 1.09000\n\n// Initial buy stop\nticket, _ := sugar.BuyStop(symbol, 0.1, resistanceLevel)\nfmt.Printf(\"Initial BUY STOP: %.5f - Ticket #%d\\n\", resistanceLevel, ticket)\n\n// Monitor price and adjust stop level\nticker := time.NewTicker(1 * time.Minute)\ndefer ticker.Stop()\n\nfor i := 0; i &lt; 10; i++ {\n    &lt;-ticker.C\n\n    currentAsk, _ := sugar.GetAsk(symbol)\n\n    // If price moves up, move buy stop up (trailing)\n    newStopLevel := currentAsk + 0.00050 // Always 50 pips above\n\n    if newStopLevel &gt; resistanceLevel {\n        // Modify pending order price\n        fmt.Printf(\"Adjusting BUY STOP from %.5f to %.5f\\n\",\n            resistanceLevel, newStopLevel)\n\n        // Use OrderModify to change pending order price\n        // sugar.ModifyOrder(ticket, newStopLevel, sl, tp)\n\n        resistanceLevel = newStopLevel\n    } else {\n        fmt.Printf(\"Current: %.5f - Stop remains at %.5f\\n\",\n            currentAsk, resistanceLevel)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#9-pattern-breakout-double-top","title":"9) Pattern breakout - double top","text":"<pre><code>symbol := \"EURUSD\"\n\n// Double top pattern - two peaks at 1.09000\ndoubleTopLevel := 1.09000\n\n// Place buy stop above double top (invalidation = strong breakout)\nentryPrice := doubleTopLevel + 0.00015 // 15 pips above\n\nticket, _ := sugar.BuyStop(symbol, 0.1, entryPrice)\n\nfmt.Printf(\"Double top breakout strategy:\\n\")\nfmt.Printf(\"Double top:  %.5f\\n\", doubleTopLevel)\nfmt.Printf(\"BUY STOP:    %.5f (+15 pips)\\n\", entryPrice)\nfmt.Printf(\"Logic:       If double top breaks = strong bullish signal\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#10-advanced-breakout-with-volume-confirmation","title":"10) Advanced breakout with volume confirmation","text":"<pre><code>func PlaceBuyStopWithMonitoring(sugar *mt5.MT5Sugar, symbol string, breakoutLevel float64) {\n    currentAsk, _ := sugar.GetAsk(symbol)\n\n    fmt.Printf(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\\n\")\n    fmt.Printf(\"\u2551       BREAKOUT BUY STOP               \u2551\\n\")\n    fmt.Printf(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\\n\")\n    fmt.Printf(\"Symbol:       %s\\n\", symbol)\n    fmt.Printf(\"Current ASK:  %.5f\\n\", currentAsk)\n    fmt.Printf(\"Breakout:     %.5f\\n\", breakoutLevel)\n    fmt.Printf(\"Distance:     %.0f pips\\n\", (breakoutLevel-currentAsk)/0.00001)\n\n    // Place buy stop\n    ticket, err := sugar.BuyStop(symbol, 0.1, breakoutLevel)\n    if err != nil {\n        fmt.Printf(\"\u274c Order failed: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"\u2705 Order placed: #%d\\n\", ticket)\n    fmt.Println(\"\\nMonitoring for breakout...\")\n\n    // Monitor until filled or timeout\n    ticker := time.NewTicker(5 * time.Second)\n    defer ticker.Stop()\n\n    timeout := time.After(2 * time.Hour)\n\n    for {\n        select {\n        case &lt;-timeout:\n            fmt.Println(\"\u23f0 Timeout - breakout didn't occur in 2 hours\")\n            return\n\n        case &lt;-ticker.C:\n            ask, _ := sugar.GetAsk(symbol)\n            distance := breakoutLevel - ask\n            distancePips := distance / 0.00001\n\n            // Check if filled\n            _, err := sugar.GetPositionByTicket(ticket)\n            if err == nil {\n                fmt.Printf(\"\\n\ud83d\ude80 BREAKOUT! Order filled at %.5f!\\n\", ask)\n                return\n            }\n\n            if distancePips &lt; 10 {\n                fmt.Printf(\"\u26a0\ufe0f  ASK: %.5f (%.0f pips from breakout - CLOSE!)\\n\",\n                    ask, distancePips)\n            } else {\n                fmt.Printf(\"ASK: %.5f (%.0f pips from breakout)\\n\",\n                    ask, distancePips)\n            }\n        }\n    }\n}\n\n// Usage:\nPlaceBuyStopWithMonitoring(sugar, \"EURUSD\", 1.09000)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other stop orders:</p> <ul> <li><code>SellStop()</code> - SELL when price breaks DOWN</li> <li><code>BuyStopWithSLTP()</code> - BUY STOP with SL/TP</li> </ul> <p>\ud83c\udf6c Limit orders (for pullbacks):</p> <ul> <li><code>BuyLimit()</code> - BUY when price drops to support</li> </ul> <p>\ud83c\udf6c Market orders:</p> <ul> <li><code>BuyMarket()</code> - BUY immediately at current price</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#1-setting-entry-price-below-current-price","title":"1) Setting entry price below current price","text":"<pre><code>// \u274c WRONG - Buy Stop must be ABOVE current price\ncurrentAsk := 1.08500\nsugar.BuyStop(\"EURUSD\", 0.1, 1.08000) // BELOW! Will be rejected!\n\n// \u2705 CORRECT - Above current price\nsugar.BuyStop(\"EURUSD\", 0.1, 1.09000) // Above ASK\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#2-confusing-buystop-with-buylimit","title":"2) Confusing BuyStop with BuyLimit","text":"<pre><code>// BUY STOP = wait for price to RISE then buy (breakout)\nsugar.BuyStop(\"EURUSD\", 0.1, 1.09000) // Buy when rises to 1.09000\n\n// BUY LIMIT = wait for price to DROP then buy (pullback)\nsugar.BuyLimit(\"EURUSD\", 0.1, 1.08000) // Buy when drops to 1.08000\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#3-chasing-breakouts-too-close-to-current-price","title":"3) Chasing breakouts too close to current price","text":"<pre><code>// \u274c WRONG - too close to current price (might trigger immediately)\ncurrentAsk := 1.08495\nsugar.BuyStop(\"EURUSD\", 0.1, 1.08500) // Only 5 pips away!\n\n// \u2705 CORRECT - proper distance for confirmed breakout\nsugar.BuyStop(\"EURUSD\", 0.1, 1.09000) // Clear breakout level\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/BuyStop/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>BUY STOP = buy on strength - Wait for breakout confirmation</p> </li> <li> <p>Set above resistance - Use previous highs, round numbers</p> </li> <li> <p>Add buffer - Place 10-20 pips above resistance for confirmation</p> </li> <li> <p>Use SL below breakout - If price reverses, exit quickly</p> </li> <li> <p>Remember OCO - If using both buy/sell stops, cancel one when other fills</p> </li> </ol> <p>See also: <code>SellStop.md</code>, <code>BuyLimit.md</code></p>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/","title":"\ud83d\udd34\ud83d\udcc8 Sell Limit Order (<code>SellLimit</code>)","text":"<p>Sugar method: Places pending SELL order that executes when price rises to specified level.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.SellLimit(symbol, volume, price)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Pending order ticket number</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) SellLimit(symbol string, volume, price float64) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1) <code>price</code> <code>float64</code> Entry price (must be ABOVE current BID) Output Type Description <code>ticket</code> <code>uint64</code> Pending order ticket number <code>error</code> <code>error</code> Error if order rejected"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Pending SELL order that activates when price rises to your target.</li> <li>Why you need it: Sell at a better price (resistance level) instead of current market.</li> <li>Sanity check: Entry price must be ABOVE current BID. Order waits until price reaches your level.</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#sell-limit-logic","title":"\ud83d\udcca SELL LIMIT Logic","text":"<pre><code>Current BID: 1.08500\nSELL LIMIT:  1.09000 (500 pips ABOVE current price)\n\nWhen price rises to 1.09000 \u2192 Order executes automatically\n</code></pre> <p>Use case: Sell at resistance / Sell the rally / Enter on price rise</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Resistance levels - Sell when price reaches resistance</p> <p>\u2705 Rally exhaustion - Enter on price retracement up</p> <p>\u2705 Sell the rally - Wait for price to rise before selling</p> <p>\u2705 Better entry - Get better price than current market</p> <p>\u274c NOT for breakdowns - Use <code>SellStop()</code> for breakdowns</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#1-basic-usage-sell-at-resistance","title":"1) Basic usage - sell at resistance","text":"<pre><code>symbol := \"EURUSD\"\ncurrentBid, _ := sugar.GetBid(symbol)\nresistanceLevel := currentBid + 0.00050 // 50 pips above\n\nticket, err := sugar.SellLimit(symbol, 0.1, resistanceLevel)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 SELL LIMIT order placed\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Entry:  %.5f (current: %.5f)\\n\", resistanceLevel, currentBid)\nfmt.Printf(\"   Will execute when price rises %.0f pips\\n\",\n    (resistanceLevel-currentBid)/0.00001)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#2-sell-on-rally-exhaustion","title":"2) Sell on rally exhaustion","text":"<pre><code>symbol := \"EURUSD\"\n\n// Current downtrend, wait for rally to fade\ncurrentBid, _ := sugar.GetBid(symbol)\nrallyLevel := currentBid + 0.00030 // Wait for 30 pip rally\n\nticket, _ := sugar.SellLimit(symbol, 0.1, rallyLevel)\n\nfmt.Printf(\"SELL LIMIT set for rally exhaustion entry\\n\")\nfmt.Printf(\"Current: %.5f\\n\", currentBid)\nfmt.Printf(\"Entry:   %.5f (rally level)\\n\", rallyLevel)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#3-multiple-sell-limits-at-different-levels","title":"3) Multiple sell limits at different levels","text":"<pre><code>symbol := \"EURUSD\"\ncurrentBid, _ := sugar.GetBid(symbol)\nvolume := 0.1\n\n// Set limits at different resistance levels\nlevels := []float64{\n    currentBid + 0.00020, // +20 pips\n    currentBid + 0.00050, // +50 pips\n    currentBid + 0.00100, // +100 pips\n}\n\nfmt.Println(\"Placing multiple SELL LIMIT orders:\")\n\nfor i, level := range levels {\n    ticket, err := sugar.SellLimit(symbol, volume, level)\n    if err != nil {\n        fmt.Printf(\"Level %d failed: %v\\n\", i+1, err)\n        continue\n    }\n\n    pipsAway := (level - currentBid) / 0.00001\n    fmt.Printf(\"\u2705 Level %d: %.5f (%.0f pips away) - Ticket #%d\\n\",\n        i+1, level, pipsAway, ticket)\n}\n\n// Output:\n// \u2705 Level 1: 1.08700 (20 pips away) - Ticket #12345\n// \u2705 Level 2: 1.09000 (50 pips away) - Ticket #12346\n// \u2705 Level 3: 1.09500 (100 pips away) - Ticket #12347\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#4-sell-limit-with-validation","title":"4) Sell limit with validation","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Get current price\ncurrentBid, _ := sugar.GetBid(symbol)\n\n// Calculate entry price (resistance level)\ninfo, _ := sugar.GetSymbolInfo(symbol)\nentryPrice := currentBid + (50 * info.Point) // 50 pips above\n\n// Validate entry price is above current\nif entryPrice &lt;= currentBid {\n    fmt.Printf(\"\u274c Error: Entry %.5f must be above BID %.5f\\n\",\n        entryPrice, currentBid)\n    return\n}\n\n// Check minimum stop level\nstopLevel, _ := sugar.GetMinStopLevel(symbol)\nminDistance := float64(stopLevel) * info.Point\n\nif (entryPrice - currentBid) &lt; minDistance {\n    fmt.Printf(\"\u274c Entry too close (min: %.5f)\\n\", minDistance)\n    return\n}\n\n// Place order\nticket, _ := sugar.SellLimit(symbol, volume, entryPrice)\nfmt.Printf(\"\u2705 SELL LIMIT placed at %.5f\\n\", entryPrice)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#5-sell-limit-with-sltp-using-separate-method","title":"5) Sell limit with SL/TP (using separate method)","text":"<pre><code>symbol := \"EURUSD\"\ncurrentBid, _ := sugar.GetBid(symbol)\nentryPrice := currentBid + 0.00050 // 50 pips above\n\n// Place sell limit\nticket, _ := sugar.SellLimit(symbol, 0.1, entryPrice)\n\n// Calculate SL/TP from entry price\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", entryPrice, 30, 60)\n\n// Set SL/TP on pending order\nsugar.ModifyPositionSLTP(ticket, sl, tp)\n\nfmt.Printf(\"SELL LIMIT with SL/TP:\\n\")\nfmt.Printf(\"  Entry: %.5f\\n\", entryPrice)\nfmt.Printf(\"  SL:    %.5f (+30 pips)\\n\", sl)\nfmt.Printf(\"  TP:    %.5f (-60 pips)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#6-scale-in-with-sell-limits","title":"6) Scale in with sell limits","text":"<pre><code>symbol := \"EURUSD\"\ncurrentBid, _ := sugar.GetBid(symbol)\ntotalVolume := 0.3\nentries := 3\n\nvolumePerEntry := totalVolume / float64(entries)\n\nfmt.Printf(\"Scaling in with %d SELL LIMIT orders\\n\", entries)\n\nfor i := 1; i &lt;= entries; i++ {\n    // Each level 20 pips apart\n    entryPrice := currentBid + (float64(i) * 0.00020)\n\n    ticket, err := sugar.SellLimit(symbol, volumePerEntry, entryPrice)\n    if err != nil {\n        continue\n    }\n\n    fmt.Printf(\"Entry %d: %.2f lots at %.5f - Ticket #%d\\n\",\n        i, volumePerEntry, entryPrice, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#7-cancel-unfilled-sell-limit","title":"7) Cancel unfilled sell limit","text":"<pre><code>symbol := \"EURUSD\"\nentryPrice := 1.09000\n\nticket, _ := sugar.SellLimit(symbol, 0.1, entryPrice)\nfmt.Printf(\"SELL LIMIT placed: Ticket #%d\\n\", ticket)\n\n// Wait 5 minutes\nfmt.Println(\"Waiting 5 minutes...\")\ntime.Sleep(5 * time.Minute)\n\n// Check if filled\npos, err := sugar.GetPositionByTicket(ticket)\nif err != nil {\n    // Not filled - cancel it\n    fmt.Println(\"Order not filled - canceling...\")\n    // Note: Use OrderDelete for pending orders\n    // sugar.DeleteOrder(ticket) // If you have this method\n} else {\n    fmt.Printf(\"\u2705 Order filled at %.5f\\n\", pos.PriceOpen)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#8-sell-limit-at-fibonacci-retracement","title":"8) Sell limit at Fibonacci retracement","text":"<pre><code>symbol := \"EURUSD\"\n\n// Previous swing high and low\nswingHigh := 1.09000\nswingLow := 1.08000\nrange_ := swingHigh - swingLow\n\n// 61.8% Fibonacci retracement (common resistance in downtrend)\nfib618 := swingLow + (range_ * 0.618)\n\n// Place sell limit at Fib level\nticket, _ := sugar.SellLimit(symbol, 0.1, fib618)\n\nfmt.Printf(\"SELL LIMIT at Fibonacci 61.8%%\\n\")\nfmt.Printf(\"Swing High: %.5f\\n\", swingHigh)\nfmt.Printf(\"Swing Low:  %.5f\\n\", swingLow)\nfmt.Printf(\"Entry:      %.5f (Fib 61.8%%)\\n\", fib618)\nfmt.Printf(\"Ticket:     #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#9-grid-trading-with-sell-limits","title":"9) Grid trading with sell limits","text":"<pre><code>symbol := \"EURUSD\"\ncurrentBid, _ := sugar.GetBid(symbol)\n\ngridLevels := 5\ngridSpacing := 0.00020 // 20 pips\nvolume := 0.01\n\nfmt.Printf(\"Grid trading: %d SELL LIMIT orders\\n\", gridLevels)\n\nfor i := 1; i &lt;= gridLevels; i++ {\n    entryPrice := currentBid + (float64(i) * gridSpacing)\n\n    ticket, err := sugar.SellLimit(symbol, volume, entryPrice)\n    if err != nil {\n        fmt.Printf(\"Grid %d failed: %v\\n\", i, err)\n        continue\n    }\n\n    pipsAway := (entryPrice - currentBid) / 0.00001\n    fmt.Printf(\"Grid %d: %.5f (%.0f pips) - #%d\\n\",\n        i, entryPrice, pipsAway, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#10-advanced-sell-limit-with-monitoring","title":"10) Advanced sell limit with monitoring","text":"<pre><code>func PlaceSellLimitWithMonitoring(sugar *mt5.MT5Sugar, symbol string, pipsAbove float64) {\n    // Get current price\n    currentBid, _ := sugar.GetBid(symbol)\n    info, _ := sugar.GetSymbolInfo(symbol)\n\n    // Calculate entry\n    entryPrice := currentBid + (pipsAbove * info.Point)\n\n    fmt.Printf(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\\n\")\n    fmt.Printf(\"\u2551       SELL LIMIT ORDER                \u2551\\n\")\n    fmt.Printf(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\\n\")\n    fmt.Printf(\"Symbol:       %s\\n\", symbol)\n    fmt.Printf(\"Current BID:  %.5f\\n\", currentBid)\n    fmt.Printf(\"Entry Price:  %.5f\\n\", entryPrice)\n    fmt.Printf(\"Distance:     %.0f pips\\n\", pipsAbove)\n\n    // Place order\n    ticket, err := sugar.SellLimit(symbol, 0.1, entryPrice)\n    if err != nil {\n        fmt.Printf(\"\u274c Order failed: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"\u2705 Order placed: #%d\\n\", ticket)\n    fmt.Println(\"\\nMonitoring price...\")\n\n    // Monitor until filled or timeout\n    ticker := time.NewTicker(5 * time.Second)\n    defer ticker.Stop()\n\n    timeout := time.After(30 * time.Minute)\n\n    for {\n        select {\n        case &lt;-timeout:\n            fmt.Println(\"\u23f0 Timeout - order not filled in 30 minutes\")\n            return\n\n        case &lt;-ticker.C:\n            bid, _ := sugar.GetBid(symbol)\n            distance := entryPrice - bid\n            distancePips := distance / info.Point\n\n            // Check if filled\n            _, err := sugar.GetPositionByTicket(ticket)\n            if err == nil {\n                fmt.Printf(\"\\n\u2705 ORDER FILLED at %.5f!\\n\", bid)\n                return\n            }\n\n            fmt.Printf(\"BID: %.5f (%.0f pips away from entry)\\n\",\n                bid, distancePips)\n        }\n    }\n}\n\n// Usage:\nPlaceSellLimitWithMonitoring(sugar, \"EURUSD\", 50)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other limit orders:</p> <ul> <li><code>BuyLimit()</code> - BUY when price goes DOWN</li> <li><code>SellLimitWithSLTP()</code> - SELL LIMIT with SL/TP</li> </ul> <p>\ud83c\udf6c Stop orders (for breakdowns):</p> <ul> <li><code>SellStop()</code> - SELL when price breaks DOWN</li> </ul> <p>\ud83c\udf6c Market orders:</p> <ul> <li><code>SellMarket()</code> - SELL immediately at current price</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#1-setting-entry-price-below-current-price","title":"1) Setting entry price below current price","text":"<pre><code>// \u274c WRONG - Sell Limit must be ABOVE current price\ncurrentBid := 1.08500\nsugar.SellLimit(\"EURUSD\", 0.1, 1.08000) // BELOW! Will be rejected!\n\n// \u2705 CORRECT - Above current price\nsugar.SellLimit(\"EURUSD\", 0.1, 1.09000) // Above BID\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#2-confusing-selllimit-with-sellstop","title":"2) Confusing SellLimit with SellStop","text":"<pre><code>// SELL LIMIT = wait for price to RISE then sell\nsugar.SellLimit(\"EURUSD\", 0.1, 1.09000) // Sell when rises to 1.09000\n\n// SELL STOP = wait for price to FALL then sell (breakdown)\nsugar.SellStop(\"EURUSD\", 0.1, 1.08000) // Sell when falls to 1.08000\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellLimit/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>SELL LIMIT = sell more expensive - Wait for price to rise</p> </li> <li> <p>Set at resistance levels - Use technical analysis</p> </li> <li> <p>Multiple levels - Scale in at different prices</p> </li> <li> <p>Monitor fills - Check if order was executed</p> </li> <li> <p>Use with SL/TP - Set risk management on pending orders</p> </li> </ol> <p>See also: <code>SellLimitWithSLTP.md</code>, <code>SellStop.md</code>, <code>BuyLimit.md</code></p>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/","title":"\ud83d\udd34 Sell at Market Price (<code>SellMarket</code>)","text":"<p>Sugar method: Opens a SELL position instantly at current market BID price.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.SellMarket(symbol, volume)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Position ticket number</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) SellMarket(symbol string, volume float64) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"GBPUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.01, 0.1, 1.0) Output Type Description <code>ticket</code> <code>uint64</code> Position ticket number (for tracking/closing) <code>error</code> <code>error</code> Error if order rejected or execution failed"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Instantly opens a SELL position at current market BID price.</li> <li>Why you need it: Simplest way to go SHORT on a symbol.</li> <li>Sanity check: Order executes immediately - no waiting, no SL/TP set.</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#important","title":"\u26a0\ufe0f IMPORTANT","text":"<p>This method does NOT set Stop Loss or Take Profit!</p> <ul> <li>Use <code>SellMarketWithSLTP()</code> for trades with risk management</li> <li>Use <code>SellMarketWithPips()</code> for trades with SL/TP in pips</li> <li>Or manually add SL/TP after: <code>ModifyPositionSLTP(ticket, sl, tp)</code></li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Quick entries - When you want instant market entry</p> <p>\u2705 Manual management - You'll set SL/TP manually later</p> <p>\u2705 Testing/learning - Simple way to test trading</p> <p>\u274c NOT for production - Always use SL/TP in real trading!</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#1-basic-usage","title":"1) Basic usage","text":"<pre><code>ticket, err := sugar.SellMarket(\"EURUSD\", 0.1)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 SELL position opened, ticket #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#2-with-immediate-sltp","title":"2) With immediate SL/TP","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Open SELL position\nticket, err := sugar.SellMarket(symbol, volume)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Position #%d opened\\n\", ticket)\n\n// SELL: SL above entry, TP below entry\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", 0, 50, 100)\n\n// Set SL/TP\nsugar.ModifyPositionSLTP(ticket, sl, tp)\nfmt.Printf(\"\u2705 SL/TP set: %.5f / %.5f\\n\", sl, tp)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#3-sell-at-resistance-level","title":"3) Sell at resistance level","text":"<pre><code>symbol := \"EURUSD\"\nresistance := 1.09000\n\nbid, _ := sugar.GetBid(symbol)\n\nif bid &lt; resistance {\n    fmt.Printf(\"\u274c Price %.5f below resistance %.5f\\n\", bid, resistance)\n    return\n}\n\nfmt.Printf(\"\u2705 At resistance: %.5f\\n\", bid)\n\n// Sell at resistance\nticket, _ := sugar.SellMarket(symbol, 0.1)\nfmt.Printf(\"SELL order #%d placed\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#4-risk-managed-sell","title":"4) Risk-managed SELL","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nstopLossPips := 50.0\ntakeProfitPips := 100.0\n\n// Calculate position size\nlotSize, _ := sugar.CalculatePositionSize(symbol, riskPercent, stopLossPips)\n\n// Validate\ncanOpen, reason, _ := sugar.CanOpenPosition(symbol, lotSize)\nif !canOpen {\n    fmt.Printf(\"Cannot open: %s\\n\", reason)\n    return\n}\n\n// Open SELL\nticket, _ := sugar.SellMarket(symbol, lotSize)\n\n// Set SL/TP\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", 0, stopLossPips, takeProfitPips)\nsugar.ModifyPositionSLTP(ticket, sl, tp)\n\nfmt.Printf(\"\u2705 SELL setup complete\\n\")\nfmt.Printf(\"   Ticket: #%d, Size: %.2f lots\\n\", ticket, lotSize)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#5-hedge-existing-buy-position","title":"5) Hedge existing BUY position","text":"<pre><code>symbol := \"EURUSD\"\n\n// Get existing BUY positions\nbuyPositions, _ := sugar.GetPositionsBySymbol(symbol)\n\nif len(buyPositions) == 0 {\n    fmt.Println(\"No BUY positions to hedge\")\n    return\n}\n\n// Calculate total BUY volume\nvar totalBuyVolume float64\nfor _, pos := range buyPositions {\n    totalBuyVolume += pos.Volume\n}\n\nfmt.Printf(\"Total BUY volume: %.2f lots\\n\", totalBuyVolume)\n\n// Open SELL to hedge\nticket, _ := sugar.SellMarket(symbol, totalBuyVolume)\n\nfmt.Printf(\"\u2705 Hedge SELL opened: Ticket #%d\\n\", ticket)\nfmt.Printf(\"   Volume: %.2f lots (matches BUY positions)\\n\", totalBuyVolume)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#6-pair-trading-buy-one-sell-another","title":"6) Pair trading - BUY one, SELL another","text":"<pre><code>// Buy EURUSD, Sell GBPUSD (pair trade)\nticketBuy, _ := sugar.BuyMarket(\"EURUSD\", 0.1)\nticketSell, _ := sugar.SellMarket(\"GBPUSD\", 0.1)\n\nfmt.Println(\"Pair trade opened:\")\nfmt.Printf(\"  BUY EURUSD:  Ticket #%d\\n\", ticketBuy)\nfmt.Printf(\"  SELL GBPUSD: Ticket #%d\\n\", ticketSell)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#7-sell-on-breakdown","title":"7) Sell on breakdown","text":"<pre><code>symbol := \"EURUSD\"\nsupportLevel := 1.08000\n\nfmt.Printf(\"Monitoring %s for breakdown below %.5f...\\n\", symbol, supportLevel)\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    bid, _ := sugar.GetBid(symbol)\n\n    if bid &lt; supportLevel {\n        fmt.Printf(\"\ud83d\udd34 BREAKDOWN! BID %.5f broke below %.5f\\n\", bid, supportLevel)\n\n        // Sell on breakdown\n        ticket, _ := sugar.SellMarket(symbol, 0.1)\n        fmt.Printf(\"\u2705 SELL order #%d placed\\n\", ticket)\n        return\n    }\n\n    fmt.Printf(\"BID: %.5f (%.5f above support)\\n\", bid, bid-supportLevel)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#8-average-into-short-position","title":"8) Average into short position","text":"<pre><code>symbol := \"EURUSD\"\nentries := 3\nlotPerEntry := 0.1\n\nfmt.Printf(\"Averaging into SELL position with %d entries\\n\", entries)\n\ntickets := []uint64{}\n\nfor i := 1; i &lt;= entries; i++ {\n    bid, _ := sugar.GetBid(symbol)\n\n    ticket, err := sugar.SellMarket(symbol, lotPerEntry)\n    if err != nil {\n        fmt.Printf(\"Entry %d failed: %v\\n\", i, err)\n        continue\n    }\n\n    tickets = append(tickets, ticket)\n    fmt.Printf(\"Entry %d: Ticket #%d at %.5f\\n\", i, ticket, bid)\n\n    if i &lt; entries {\n        time.Sleep(10 * time.Second) // Wait before next entry\n    }\n}\n\nfmt.Printf(\"\\nTotal: %d SELL positions opened\\n\", len(tickets))\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#9-quick-scalp-sell","title":"9) Quick scalp SELL","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Check spread (scalping needs tight spread)\nspread, _ := sugar.GetSpread(symbol)\nif spread &gt; 10 {\n    fmt.Printf(\"Spread too high for scalping: %.0f points\\n\", spread)\n    return\n}\n\n// Quick SELL entry\nticket, _ := sugar.SellMarket(symbol, volume)\nfmt.Printf(\"Scalp SELL opened: #%d\\n\", ticket)\n\n// Set tight TP (10 pips)\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", 0, 15, 10)\nsugar.ModifyPositionSLTP(ticket, sl, tp)\n\nfmt.Println(\"Tight SL/TP set for quick scalp\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#10-complete-sell-workflow","title":"10) Complete SELL workflow","text":"<pre><code>func OpenSellPosition(sugar *mt5.MT5Sugar, symbol string) error {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551       SELL ORDER WORKFLOW             \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Step 1: Check connection\n    if !sugar.IsConnected() {\n        return fmt.Errorf(\"not connected\")\n    }\n    fmt.Println(\"\u2705 Connected\")\n\n    // Step 2: Check spread\n    spread, _ := sugar.GetSpread(symbol)\n    fmt.Printf(\"\u2705 Spread: %.0f points\\n\", spread)\n    if spread &gt; 20 {\n        return fmt.Errorf(\"spread too high: %.0f\", spread)\n    }\n\n    // Step 3: Get current price\n    bid, _ := sugar.GetBid(symbol)\n    fmt.Printf(\"\u2705 Current BID: %.5f\\n\", bid)\n\n    // Step 4: Calculate position size (2% risk, 50 pip SL)\n    lotSize, _ := sugar.CalculatePositionSize(symbol, 2.0, 50)\n    fmt.Printf(\"\u2705 Position size: %.2f lots\\n\", lotSize)\n\n    // Step 5: Validate\n    canOpen, reason, _ := sugar.CanOpenPosition(symbol, lotSize)\n    if !canOpen {\n        return fmt.Errorf(\"validation failed: %s\", reason)\n    }\n    fmt.Println(\"\u2705 Validation passed\")\n\n    // Step 6: Open SELL\n    ticket, err := sugar.SellMarket(symbol, lotSize)\n    if err != nil {\n        return fmt.Errorf(\"order failed: %w\", err)\n    }\n    fmt.Printf(\"\u2705 SELL opened: Ticket #%d\\n\", ticket)\n\n    // Step 7: Set SL/TP\n    sl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", 0, 50, 100)\n    sugar.ModifyPositionSLTP(ticket, sl, tp)\n    fmt.Printf(\"\u2705 SL/TP: %.5f / %.5f\\n\", sl, tp)\n\n    fmt.Println(\"\\n\u2705 SELL POSITION COMPLETE\")\n    return nil\n}\n\n// Usage:\nerr := OpenSellPosition(sugar, \"EURUSD\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Better alternatives with SL/TP:</p> <ul> <li><code>SellMarketWithSLTP()</code> - SELL with SL/TP prices</li> <li><code>SellMarketWithPips()</code> - SELL with SL/TP in pips \u2b50 RECOMMENDED</li> </ul> <p>\ud83c\udf6c Other market orders:</p> <ul> <li><code>BuyMarket()</code> - BUY at market</li> </ul> <p>\ud83c\udf6c Position management:</p> <ul> <li><code>ModifyPositionSLTP()</code> - Add SL/TP after opening</li> <li><code>ClosePosition()</code> - Close the position</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#1-confusing-sell-sltp-direction","title":"1) Confusing SELL SL/TP direction","text":"<pre><code>// \u274c WRONG - SL/TP in wrong direction for SELL\nbid := 1.08500\nsl := bid - 50_pips  // WRONG! SL should be ABOVE for SELL\ntp := bid + 100_pips // WRONG! TP should be BELOW for SELL\n\n// \u2705 CORRECT - use CalculateSLTP\nsl, tp, _ := sugar.CalculateSLTP(\"EURUSD\", \"SELL\", bid, 50, 100)\n// SELL: SL is ABOVE entry, TP is BELOW entry\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#2-trading-without-stop-loss","title":"2) Trading without Stop Loss","text":"<pre><code>// \u274c DANGEROUS - No stop loss!\nsugar.SellMarket(\"EURUSD\", 0.1)\n\n// \u2705 CORRECT - Use version with SL/TP\nsugar.SellMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>SELL = short = profit when price drops</p> </li> <li> <p>SL above entry, TP below - Remember SELL direction</p> </li> <li> <p>Use <code>SellMarketWithPips()</code> - Much safer than bare <code>SellMarket()</code></p> </li> <li> <p>Calculate lot size - Always use risk-based sizing</p> </li> <li> <p>Validate before selling - Check margin and spread</p> </li> </ol>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellMarket/#production-recommendation","title":"\ud83d\udea8 Production Recommendation","text":"<p>DON'T use <code>SellMarket()</code> in production!</p> <p>Instead: <pre><code>// \u2705 RECOMMENDED\nticket, _ := sugar.SellMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n\n// OR with full risk management\nlotSize, _ := sugar.CalculatePositionSize(\"EURUSD\", 2.0, 50)\nticket, _ := sugar.SellMarketWithPips(\"EURUSD\", lotSize, 50, 100)\n</code></pre></p> <p>See also: <code>SellMarketWithPips.md</code>, <code>SellMarketWithSLTP.md</code>, <code>BuyMarket.md</code></p>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/","title":"\ud83d\udd34\ud83d\udcc9 Sell Stop Order (<code>SellStop</code>)","text":"<p>Sugar method: Places pending SELL order that executes when price breaks BELOW specified level.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.SellStop(symbol, volume, price)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Pending order ticket number</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) SellStop(symbol string, volume, price float64) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1) <code>price</code> <code>float64</code> Entry price (must be BELOW current BID) Output Type Description <code>ticket</code> <code>uint64</code> Pending order ticket number <code>error</code> <code>error</code> Error if order rejected"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Pending SELL order that activates when price breaks BELOW support.</li> <li>Why you need it: Sell on breakdowns - when price confirms downward momentum.</li> <li>Sanity check: Entry price must be BELOW current BID. Order activates on breakdown.</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#sell-stop-logic","title":"\ud83d\udcca SELL STOP Logic","text":"<pre><code>Current BID: 1.08500\nSELL STOP:   1.08000 (500 pips BELOW current price)\n\nWhen price falls to 1.08000 \u2192 Order executes automatically\n</code></pre> <p>Use case: Breakdown trading / Sell on support break / Momentum trading</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Breakdown trading - Sell when price breaks support</p> <p>\u2705 Momentum trading - Enter when downtrend confirmed</p> <p>\u2705 Range breakdowns - Sell when price exits consolidation downward</p> <p>\u2705 Follow strong trends - Join established downward momentum</p> <p>\u274c NOT for rallies - Use <code>SellLimit()</code> for selling rallies</p>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#1-basic-usage-sell-on-breakdown","title":"1) Basic usage - sell on breakdown","text":"<pre><code>symbol := \"EURUSD\"\ncurrentBid, _ := sugar.GetBid(symbol)\nsupportLevel := 1.08000 // Known support\n\n// Place sell stop below support\nticket, err := sugar.SellStop(symbol, 0.1, supportLevel)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 SELL STOP order placed\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Entry:  %.5f (current: %.5f)\\n\", supportLevel, currentBid)\nfmt.Printf(\"   Will execute when price breaks %.0f pips lower\\n\",\n    (currentBid-supportLevel)/0.00001)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#2-range-breakdown-trading","title":"2) Range breakdown trading","text":"<pre><code>symbol := \"EURUSD\"\n\n// Price consolidating between 1.08000 and 1.08500\nrangeLow := 1.08000\nrangeLow -= 0.00010 // Place stop 10 pips below range low\n\nticket, _ := sugar.SellStop(symbol, 0.1, rangeLow)\n\nfmt.Printf(\"SELL STOP set for range breakdown\\n\")\nfmt.Printf(\"Range low: %.5f\\n\", 1.08000)\nfmt.Printf(\"Entry:     %.5f (10 pips below)\\n\", rangeLow)\nfmt.Printf(\"Strategy:  Sell if price breaks out of range downward\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#3-support-breakdown-with-multiple-levels","title":"3) Support breakdown with multiple levels","text":"<pre><code>symbol := \"EURUSD\"\ncurrentBid, _ := sugar.GetBid(symbol)\nvolume := 0.05\n\n// Set sell stops at different support breakdown levels\nsupportLevels := []float64{\n    1.08000, // First support\n    1.07500, // Second support\n    1.07000, // Third support\n}\n\nfmt.Println(\"Placing multiple SELL STOP orders:\")\n\nfor i, level := range supportLevels {\n    // Only place stops below current price\n    if level &gt;= currentBid {\n        fmt.Printf(\"Level %d: %.5f - SKIPPED (above current price)\\n\", i+1, level)\n        continue\n    }\n\n    ticket, err := sugar.SellStop(symbol, volume, level)\n    if err != nil {\n        fmt.Printf(\"Level %d failed: %v\\n\", i+1, err)\n        continue\n    }\n\n    pipsAway := (currentBid - level) / 0.00001\n    fmt.Printf(\"\u2705 Level %d: %.5f (%.0f pips away) - Ticket #%d\\n\",\n        i+1, level, pipsAway, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#4-sell-stop-with-validation","title":"4) Sell stop with validation","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nbreakdownPrice := 1.08000\n\n// Get current price\ncurrentBid, _ := sugar.GetBid(symbol)\n\n// Validate entry price is below current\nif breakdownPrice &gt;= currentBid {\n    fmt.Printf(\"\u274c Error: Entry %.5f must be below BID %.5f\\n\",\n        breakdownPrice, currentBid)\n    return\n}\n\n// Check minimum stop level\ninfo, _ := sugar.GetSymbolInfo(symbol)\nstopLevel, _ := sugar.GetMinStopLevel(symbol)\nminDistance := float64(stopLevel) * info.Point\n\nif (currentBid - breakdownPrice) &lt; minDistance {\n    fmt.Printf(\"\u274c Entry too close (min: %.5f)\\n\", minDistance)\n    return\n}\n\n// Place order\nticket, _ := sugar.SellStop(symbol, volume, breakdownPrice)\nfmt.Printf(\"\u2705 SELL STOP placed at %.5f\\n\", breakdownPrice)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#5-sell-stop-with-sltp-atr-based","title":"5) Sell stop with SL/TP (ATR-based)","text":"<pre><code>symbol := \"EURUSD\"\nbreakdownPrice := 1.08000\n\n// Place sell stop\nticket, _ := sugar.SellStop(symbol, 0.1, breakdownPrice)\n\n// Calculate SL/TP based on ATR or fixed pips\n// For breakdown: SL above breakdown level, TP 2x the distance\ninfo, _ := sugar.GetSymbolInfo(symbol)\nslDistance := 30.0 // 30 pips SL\ntpDistance := 60.0 // 60 pips TP (2:1 R:R)\n\nsl := breakdownPrice + (slDistance * info.Point)\ntp := breakdownPrice - (tpDistance * info.Point)\n\n// Set SL/TP on pending order\nsugar.ModifyPositionSLTP(ticket, sl, tp)\n\nfmt.Printf(\"SELL STOP with SL/TP:\\n\")\nfmt.Printf(\"  Entry: %.5f (breakdown)\\n\", breakdownPrice)\nfmt.Printf(\"  SL:    %.5f (+30 pips)\\n\", sl)\nfmt.Printf(\"  TP:    %.5f (-60 pips)\\n\", tp)\nfmt.Printf(\"  R:R:   1:2\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#6-trend-continuation-sell-stop","title":"6) Trend continuation sell stop","text":"<pre><code>symbol := \"EURUSD\"\n\n// Strong downtrend - previous low at 1.08000\npreviousLow := 1.08000\nentryPrice := previousLow - 0.00010 // 10 pips below previous low\n\nticket, _ := sugar.SellStop(symbol, 0.1, entryPrice)\n\nfmt.Printf(\"Trend continuation SELL STOP\\n\")\nfmt.Printf(\"Previous low: %.5f\\n\", previousLow)\nfmt.Printf(\"Entry:        %.5f (-10 pips)\\n\", entryPrice)\nfmt.Printf(\"Strategy:     Sell if downtrend continues\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#7-news-breakout-strategy-oco","title":"7) News breakout strategy (OCO)","text":"<pre><code>// Before major news release - price at 1.08500\nsymbol := \"EURUSD\"\ncurrentPrice := 1.08500\n\n// Place sell stop for downside breakout\nsellStopPrice := currentPrice - 0.00030 // 30 pips below\nsellTicket, _ := sugar.SellStop(symbol, 0.1, sellStopPrice)\n\n// Also place buy stop for upside breakout\nbuyStopPrice := currentPrice + 0.00030 // 30 pips above\nbuyTicket, _ := sugar.BuyStop(symbol, 0.1, buyStopPrice)\n\nfmt.Printf(\"News breakout strategy (OCO):\\n\")\nfmt.Printf(\"  Current:    %.5f\\n\", currentPrice)\nfmt.Printf(\"  SELL STOP:  %.5f (ticket #%d)\\n\", sellStopPrice, sellTicket)\nfmt.Printf(\"  BUY STOP:   %.5f (ticket #%d)\\n\", buyStopPrice, buyTicket)\nfmt.Printf(\"  Strategy:   Whichever direction breaks first\\n\")\nfmt.Printf(\"  Important:  Cancel other order when one fills!\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#8-trailing-sell-stop-manual-adjustment","title":"8) Trailing sell stop (manual adjustment)","text":"<pre><code>symbol := \"EURUSD\"\nsupportLevel := 1.08000\n\n// Initial sell stop\nticket, _ := sugar.SellStop(symbol, 0.1, supportLevel)\nfmt.Printf(\"Initial SELL STOP: %.5f - Ticket #%d\\n\", supportLevel, ticket)\n\n// Monitor price and adjust stop level\nticker := time.NewTicker(1 * time.Minute)\ndefer ticker.Stop()\n\nfor i := 0; i &lt; 10; i++ {\n    &lt;-ticker.C\n\n    currentBid, _ := sugar.GetBid(symbol)\n\n    // If price moves down, move sell stop down (trailing)\n    newStopLevel := currentBid - 0.00050 // Always 50 pips below\n\n    if newStopLevel &lt; supportLevel {\n        // Modify pending order price\n        fmt.Printf(\"Adjusting SELL STOP from %.5f to %.5f\\n\",\n            supportLevel, newStopLevel)\n\n        // Use OrderModify to change pending order price\n        // sugar.ModifyOrder(ticket, newStopLevel, sl, tp)\n\n        supportLevel = newStopLevel\n    } else {\n        fmt.Printf(\"Current: %.5f - Stop remains at %.5f\\n\",\n            currentBid, supportLevel)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#9-pattern-breakdown-double-bottom","title":"9) Pattern breakdown - double bottom","text":"<pre><code>symbol := \"EURUSD\"\n\n// Double bottom pattern - two lows at 1.08000\ndoubleBottomLevel := 1.08000\n\n// Place sell stop below double bottom (invalidation = strong breakdown)\nentryPrice := doubleBottomLevel - 0.00015 // 15 pips below\n\nticket, _ := sugar.SellStop(symbol, 0.1, entryPrice)\n\nfmt.Printf(\"Double bottom breakdown strategy:\\n\")\nfmt.Printf(\"Double bottom: %.5f\\n\", doubleBottomLevel)\nfmt.Printf(\"SELL STOP:     %.5f (-15 pips)\\n\", entryPrice)\nfmt.Printf(\"Logic:         If double bottom breaks = strong bearish signal\\n\")\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#10-advanced-breakdown-with-monitoring","title":"10) Advanced breakdown with monitoring","text":"<pre><code>func PlaceSellStopWithMonitoring(sugar *mt5.MT5Sugar, symbol string, breakdownLevel float64) {\n    currentBid, _ := sugar.GetBid(symbol)\n\n    fmt.Printf(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\\n\")\n    fmt.Printf(\"\u2551       BREAKDOWN SELL STOP             \u2551\\n\")\n    fmt.Printf(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\\n\")\n    fmt.Printf(\"Symbol:       %s\\n\", symbol)\n    fmt.Printf(\"Current BID:  %.5f\\n\", currentBid)\n    fmt.Printf(\"Breakdown:    %.5f\\n\", breakdownLevel)\n    fmt.Printf(\"Distance:     %.0f pips\\n\", (currentBid-breakdownLevel)/0.00001)\n\n    // Place sell stop\n    ticket, err := sugar.SellStop(symbol, 0.1, breakdownLevel)\n    if err != nil {\n        fmt.Printf(\"\u274c Order failed: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"\u2705 Order placed: #%d\\n\", ticket)\n    fmt.Println(\"\\nMonitoring for breakdown...\")\n\n    // Monitor until filled or timeout\n    ticker := time.NewTicker(5 * time.Second)\n    defer ticker.Stop()\n\n    timeout := time.After(2 * time.Hour)\n\n    highestBid := currentBid\n\n    for {\n        select {\n        case &lt;-timeout:\n            fmt.Println(\"\u23f0 Timeout - breakdown didn't occur in 2 hours\")\n            return\n\n        case &lt;-ticker.C:\n            bid, _ := sugar.GetBid(symbol)\n            distance := bid - breakdownLevel\n            distancePips := distance / 0.00001\n\n            if bid &gt; highestBid {\n                highestBid = bid\n            }\n\n            // Check if filled\n            _, err := sugar.GetPositionByTicket(ticket)\n            if err == nil {\n                fmt.Printf(\"\\n\ud83d\udcc9 BREAKDOWN! Order filled at %.5f!\\n\", bid)\n                fmt.Printf(\"   High before breakdown: %.5f\\n\", highestBid)\n                return\n            }\n\n            if distancePips &lt; 10 {\n                fmt.Printf(\"\u26a0\ufe0f  BID: %.5f (%.0f pips from breakdown - CLOSE!)\\n\",\n                    bid, distancePips)\n            } else {\n                fmt.Printf(\"BID: %.5f (%.0f pips from breakdown)\\n\",\n                    bid, distancePips)\n            }\n        }\n    }\n}\n\n// Usage:\nPlaceSellStopWithMonitoring(sugar, \"EURUSD\", 1.08000)\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other stop orders:</p> <ul> <li><code>BuyStop()</code> - BUY when price breaks UP</li> <li><code>SellStopWithSLTP()</code> - SELL STOP with SL/TP</li> </ul> <p>\ud83c\udf6c Limit orders (for rallies):</p> <ul> <li><code>SellLimit()</code> - SELL when price rises to resistance</li> </ul> <p>\ud83c\udf6c Market orders:</p> <ul> <li><code>SellMarket()</code> - SELL immediately at current price</li> </ul>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#1-setting-entry-price-above-current-price","title":"1) Setting entry price above current price","text":"<pre><code>// \u274c WRONG - Sell Stop must be BELOW current price\ncurrentBid := 1.08500\nsugar.SellStop(\"EURUSD\", 0.1, 1.09000) // ABOVE! Will be rejected!\n\n// \u2705 CORRECT - Below current price\nsugar.SellStop(\"EURUSD\", 0.1, 1.08000) // Below BID\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#2-confusing-sellstop-with-selllimit","title":"2) Confusing SellStop with SellLimit","text":"<pre><code>// SELL STOP = wait for price to FALL then sell (breakdown)\nsugar.SellStop(\"EURUSD\", 0.1, 1.08000) // Sell when falls to 1.08000\n\n// SELL LIMIT = wait for price to RISE then sell (rally)\nsugar.SellLimit(\"EURUSD\", 0.1, 1.09000) // Sell when rises to 1.09000\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#3-chasing-breakdowns-too-close-to-current-price","title":"3) Chasing breakdowns too close to current price","text":"<pre><code>// \u274c WRONG - too close to current price (might trigger immediately)\ncurrentBid := 1.08005\nsugar.SellStop(\"EURUSD\", 0.1, 1.08000) // Only 5 pips away!\n\n// \u2705 CORRECT - proper distance for confirmed breakdown\nsugar.SellStop(\"EURUSD\", 0.1, 1.07500) // Clear breakdown level\n</code></pre>"},{"location":"MT5Sugar/4.%20Simple_Trading/SellStop/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>SELL STOP = sell on weakness - Wait for breakdown confirmation</p> </li> <li> <p>Set below support - Use previous lows, round numbers</p> </li> <li> <p>Add buffer - Place 10-20 pips below support for confirmation</p> </li> <li> <p>Use SL above breakdown - If price reverses, exit quickly</p> </li> <li> <p>Remember OCO - If using both buy/sell stops, cancel one when other fills</p> </li> </ol> <p>See also: <code>BuyStop.md</code>, <code>SellLimit.md</code></p>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/","title":"\ud83d\udfe2\ud83d\udcc9\ud83d\udee1\ufe0f Buy Limit with SL/TP (<code>BuyLimitWithSLTP</code>)","text":"<p>Sugar method: Places pending BUY LIMIT order with Stop Loss and Take Profit set from the start.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.BuyLimitWithSLTP(symbol, volume, price, sl, tp)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Pending order ticket number</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) BuyLimitWithSLTP(symbol string, volume, price, sl, tp float64) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1) <code>price</code> <code>float64</code> Entry price (must be BELOW current ASK) <code>sl</code> <code>float64</code> Stop Loss price (0 = no SL) <code>tp</code> <code>float64</code> Take Profit price (0 = no TP) Output Type Description <code>ticket</code> <code>uint64</code> Pending order ticket number <code>error</code> <code>error</code> Error if order rejected"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: BUY LIMIT pending order with SL/TP - complete setup in one call.</li> <li>Why you need it: Set everything (entry, SL, TP) and forget - activates automatically.</li> <li>Sanity check: Entry below ASK, SL below entry, TP above entry.</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#logic","title":"\ud83d\udcca Logic","text":"<pre><code>Current ASK: 1.08500\nEntry:       1.08000 (LIMIT - 50 pips below)\nSL:          1.07500 (50 pips below entry)\nTP:          1.09000 (100 pips above entry)\n\nWhen price drops to 1.08000 \u2192 Order fills with SL/TP already set\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Support level entries - Buy at support with protection</p> <p>\u2705 Pullback trading - Wait for dip, enter with risk management</p> <p>\u2705 Set and forget - Don't need to monitor for fill</p> <p>\u2705 Automated strategies - Complete order setup in advance</p>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#1-basic-usage-support-with-sltp","title":"1) Basic usage - support with SL/TP","text":"<pre><code>symbol := \"EURUSD\"\ncurrentAsk, _ := sugar.GetAsk(symbol)\n\nentryPrice := 1.08000 // Support level\nsl := 1.07500         // 50 pips below entry\ntp := 1.09000         // 100 pips above entry\n\nticket, err := sugar.BuyLimitWithSLTP(symbol, 0.1, entryPrice, sl, tp)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 BUY LIMIT with SL/TP placed\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Entry:  %.5f (current: %.5f)\\n\", entryPrice, currentAsk)\nfmt.Printf(\"   SL:     %.5f (-50 pips from entry)\\n\", sl)\nfmt.Printf(\"   TP:     %.5f (+100 pips from entry)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#2-calculate-sltp-from-entry-price","title":"2) Calculate SL/TP from entry price","text":"<pre><code>symbol := \"EURUSD\"\nentryPrice := 1.08000\nvolume := 0.1\n\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Calculate SL/TP relative to entry\nsl := entryPrice - (50 * info.Point)  // 50 pips SL\ntp := entryPrice + (100 * info.Point) // 100 pips TP\n\nticket, _ := sugar.BuyLimitWithSLTP(symbol, volume, entryPrice, sl, tp)\n\nfmt.Printf(\"\u2705 BUY LIMIT with calculated SL/TP\\n\")\nfmt.Printf(\"   Entry: %.5f\\n\", entryPrice)\nfmt.Printf(\"   SL:    %.5f (50 pips)\\n\", sl)\nfmt.Printf(\"   TP:    %.5f (100 pips)\\n\", tp)\nfmt.Printf(\"   R:R:   1:2\\n\")\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#3-using-calculatesltp-helper","title":"3) Using CalculateSLTP helper","text":"<pre><code>symbol := \"EURUSD\"\nentryPrice := 1.08000\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Calculate SL/TP from entry price\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", entryPrice, slPips, tpPips)\n\nticket, _ := sugar.BuyLimitWithSLTP(symbol, volume, entryPrice, sl, tp)\n\nfmt.Printf(\"\u2705 BUY LIMIT using helper\\n\")\nfmt.Printf(\"   Entry: %.5f\\n\", entryPrice)\nfmt.Printf(\"   SL:    %.5f (%.0f pips)\\n\", sl, slPips)\nfmt.Printf(\"   TP:    %.5f (%.0f pips)\\n\", tp, tpPips)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#4-multiple-buy-limits-at-support-zones","title":"4) Multiple buy limits at support zones","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.05\n\n// Three support levels\nsupports := []struct {\n    entry float64\n    sl    float64\n    tp    float64\n}{\n    {1.08000, 1.07500, 1.09000}, // Strong support\n    {1.07500, 1.07000, 1.08500}, // Medium support\n    {1.07000, 1.06500, 1.08000}, // Weak support\n}\n\nfmt.Println(\"Placing BUY LIMITS at support zones:\")\n\nfor i, level := range supports {\n    ticket, err := sugar.BuyLimitWithSLTP(symbol, volume, level.entry, level.sl, level.tp)\n    if err != nil {\n        fmt.Printf(\"Level %d failed: %v\\n\", i+1, err)\n        continue\n    }\n\n    fmt.Printf(\"\u2705 Level %d: Entry %.5f, SL %.5f, TP %.5f - Ticket #%d\\n\",\n        i+1, level.entry, level.sl, level.tp, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#5-fibonacci-retracement-with-tight-sl","title":"5) Fibonacci retracement with tight SL","text":"<pre><code>symbol := \"EURUSD\"\n\n// Previous swing\nswingHigh := 1.09000\nswingLow := 1.08000\nrange_ := swingHigh - swingLow\n\n// 61.8% Fibonacci retracement\nfib618 := swingHigh - (range_ * 0.618)\n\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Tight SL below Fib level, TP at swing high\nsl := fib618 - (30 * info.Point)  // 30 pips SL\ntp := swingHigh                    // Target swing high\n\nticket, _ := sugar.BuyLimitWithSLTP(symbol, 0.1, fib618, sl, tp)\n\nfmt.Printf(\"\u2705 Fibonacci BUY LIMIT\\n\")\nfmt.Printf(\"   Entry: %.5f (Fib 61.8%%)\\n\", fib618)\nfmt.Printf(\"   SL:    %.5f (30 pips)\\n\", sl)\nfmt.Printf(\"   TP:    %.5f (swing high)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#6-risk-based-position-sizing-with-limit-order","title":"6) Risk-based position sizing with limit order","text":"<pre><code>symbol := \"EURUSD\"\nentryPrice := 1.08000\nriskPercent := 2.0\nslPips := 50.0\ntpPips := 100.0\n\n// Calculate lot size based on risk\nlotSize, _ := sugar.CalculatePositionSize(symbol, riskPercent, slPips)\n\n// Calculate SL/TP from entry\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", entryPrice, slPips, tpPips)\n\nticket, _ := sugar.BuyLimitWithSLTP(symbol, lotSize, entryPrice, sl, tp)\n\nfmt.Printf(\"\u2705 Risk-managed BUY LIMIT\\n\")\nfmt.Printf(\"   Entry:  %.5f\\n\", entryPrice)\nfmt.Printf(\"   Risk:   %.1f%% of balance\\n\", riskPercent)\nfmt.Printf(\"   Size:   %.2f lots\\n\", lotSize)\nfmt.Printf(\"   SL:     %.0f pips\\n\", slPips)\nfmt.Printf(\"   TP:     %.0f pips\\n\", tpPips)\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#7-scale-in-strategy-with-sltp","title":"7) Scale in strategy with SL/TP","text":"<pre><code>symbol := \"EURUSD\"\ntotalVolume := 0.3\nentries := 3\n\nvolumePerEntry := totalVolume / float64(entries)\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\nfmt.Printf(\"Scaling in with %d BUY LIMIT orders:\\n\", entries)\n\nbaseEntry := 1.08000\nbaseSL := 1.07500\nbaseTP := 1.09000\n\nfor i := 0; i &lt; entries; i++ {\n    // Each entry 20 pips lower\n    entry := baseEntry - (float64(i) * 20 * info.Point)\n    sl := baseSL - (float64(i) * 20 * info.Point)\n    tp := baseTP // Same TP for all\n\n    ticket, err := sugar.BuyLimitWithSLTP(symbol, volumePerEntry, entry, sl, tp)\n    if err != nil {\n        continue\n    }\n\n    fmt.Printf(\"Entry %d: %.2f lots at %.5f (SL %.5f, TP %.5f) - #%d\\n\",\n        i+1, volumePerEntry, entry, sl, tp, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#8-pending-order-with-validation","title":"8) Pending order with validation","text":"<pre><code>symbol := \"EURUSD\"\nentryPrice := 1.08000\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Validate entry is below current ASK\ncurrentAsk, _ := sugar.GetAsk(symbol)\nif entryPrice &gt;= currentAsk {\n    fmt.Printf(\"\u274c Entry %.5f must be below ASK %.5f\\n\", entryPrice, currentAsk)\n    return\n}\n\n// Check minimum stop level\nstopLevel, _ := sugar.GetMinStopLevel(symbol)\ninfo, _ := sugar.GetSymbolInfo(symbol)\nminDistance := float64(stopLevel) * info.Point\n\nif (currentAsk - entryPrice) &lt; minDistance {\n    fmt.Printf(\"\u274c Entry too close to current price\\n\")\n    return\n}\n\n// Calculate SL/TP\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", entryPrice, slPips, tpPips)\n\n// Validate SL/TP distances\nif (entryPrice - sl) &lt; minDistance {\n    fmt.Printf(\"\u274c SL too close to entry\\n\")\n    return\n}\n\nticket, _ := sugar.BuyLimitWithSLTP(symbol, volume, entryPrice, sl, tp)\nfmt.Printf(\"\u2705 Validated BUY LIMIT placed - Ticket #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#9-weekend-gap-strategy","title":"9) Weekend gap strategy","text":"<pre><code>// Friday close: 1.08500\n// Expecting gap down Monday morning\nsymbol := \"EURUSD\"\n\n// Set buy limit below Friday close\nentryPrice := 1.08000 // 50 pips gap\nvolume := 0.1\n\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Tight SL (gap fill expected)\nsl := entryPrice - (30 * info.Point)\ntp := 1.08500 // Target Friday close\n\nticket, _ := sugar.BuyLimitWithSLTP(symbol, volume, entryPrice, sl, tp)\n\nfmt.Printf(\"Weekend gap strategy:\\n\")\nfmt.Printf(\"   Friday close: 1.08500\\n\")\nfmt.Printf(\"   Entry:        %.5f (gap down)\\n\", entryPrice)\nfmt.Printf(\"   SL:           %.5f (30 pips)\\n\", sl)\nfmt.Printf(\"   TP:           %.5f (gap fill)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#10-complete-limit-order-function","title":"10) Complete limit order function","text":"<pre><code>func PlaceBuyLimitWithProtection(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    entryPrice float64,\n    riskPercent float64,\n    slPips float64,\n    tpPips float64,\n) (uint64, error) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551    BUY LIMIT WITH SL/TP               \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Validate entry price\n    currentAsk, _ := sugar.GetAsk(symbol)\n    if entryPrice &gt;= currentAsk {\n        return 0, fmt.Errorf(\"entry %.5f must be below ASK %.5f\", entryPrice, currentAsk)\n    }\n    fmt.Printf(\"\u2705 Entry: %.5f (%.0f pips below current)\\n\",\n        entryPrice, (currentAsk-entryPrice)/0.00001)\n\n    // Calculate position size\n    lotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, slPips)\n    if err != nil {\n        return 0, err\n    }\n    fmt.Printf(\"\u2705 Size: %.2f lots (%.1f%% risk)\\n\", lotSize, riskPercent)\n\n    // Calculate SL/TP\n    sl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", entryPrice, slPips, tpPips)\n    fmt.Printf(\"\u2705 SL: %.5f (%.0f pips)\\n\", sl, slPips)\n    fmt.Printf(\"\u2705 TP: %.5f (%.0f pips)\\n\", tp, tpPips)\n\n    // Place order\n    ticket, err := sugar.BuyLimitWithSLTP(symbol, lotSize, entryPrice, sl, tp)\n    if err != nil {\n        return 0, err\n    }\n\n    fmt.Printf(\"\\n\ud83c\udfaf BUY LIMIT placed successfully!\\n\")\n    fmt.Printf(\"   Ticket: #%d\\n\", ticket)\n    return ticket, nil\n}\n\n// Usage:\nticket, _ := PlaceBuyLimitWithProtection(sugar, \"EURUSD\", 1.08000, 2.0, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other pending orders with SL/TP:</p> <ul> <li><code>SellLimitWithSLTP()</code> - SELL LIMIT with protection</li> <li><code>BuyStopWithSLTP()</code> - BUY STOP with protection</li> </ul> <p>\ud83c\udf6c Market orders with SL/TP:</p> <ul> <li><code>BuyMarketWithSLTP()</code> - Immediate BUY with protection</li> </ul> <p>\ud83c\udf6c Helper methods:</p> <ul> <li><code>CalculateSLTP()</code> - Calculate SL/TP from pips</li> <li><code>BuyLimit()</code> - Without SL/TP (add manually later)</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#1-wrong-sltp-direction","title":"1) Wrong SL/TP direction","text":"<pre><code>// \u274c WRONG - SL must be BELOW entry for BUY\nentry := 1.08000\nsugar.BuyLimitWithSLTP(\"EURUSD\", 0.1, entry, 1.08500, 1.09000) // SL above!\n\n// \u2705 CORRECT - SL below, TP above\nsugar.BuyLimitWithSLTP(\"EURUSD\", 0.1, entry, 1.07500, 1.09000)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#2-calculating-sltp-from-current-price-instead-of-entry","title":"2) Calculating SL/TP from current price instead of entry","text":"<pre><code>// \u274c WRONG - SL/TP calculated from current price\nask, _ := sugar.GetAsk(\"EURUSD\")\nentry := 1.08000\nsl := ask - (50 * point) // Wrong! Should be from entry!\n\n// \u2705 CORRECT - calculate from entry price\nsl := entry - (50 * point)\ntp := entry + (100 * point)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyLimitWithSLTP/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Calculate from entry price - Not current price</p> </li> <li> <p>Validate entry level - Must be below current ASK</p> </li> <li> <p>Check min stop level - Both entry and SL must respect broker limits</p> </li> <li> <p>Use for support trading - Perfect for buying dips</p> </li> <li> <p>Monitor for fills - Check if order was executed</p> </li> </ol> <p>See also: <code>BuyLimit.md</code>, <code>SellLimitWithSLTP.md</code>, <code>CalculateSLTP.md</code></p>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/","title":"\ud83d\udfe2\ud83d\udee1\ufe0f Buy Market with SL/TP (<code>BuyMarketWithSLTP</code>)","text":"<p>Sugar method: Opens BUY position at market with Stop Loss and Take Profit in one call.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.BuyMarketWithSLTP(symbol, volume, sl, tp)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Position ticket number</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) BuyMarketWithSLTP(symbol string, volume, sl, tp float64) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1) <code>sl</code> <code>float64</code> Stop Loss price (0 = no SL) <code>tp</code> <code>float64</code> Take Profit price (0 = no TP) Output Type Description <code>ticket</code> <code>uint64</code> Position ticket number <code>error</code> <code>error</code> Error if order rejected"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Opens BUY position with SL/TP set immediately - safer than <code>BuyMarket()</code>.</li> <li>Why you need it: Complete risk management in one call, no separate modification needed.</li> <li>Sanity check: For BUY: SL must be below entry, TP must be above entry.</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Production trading - Always use SL/TP in real trading</p> <p>\u2705 Risk-managed entries - Set protection from the start</p> <p>\u2705 Quick entries - One call instead of two (open + modify)</p> <p>\u2705 Automated trading - Ensure every position has risk limits</p> <p>\u274c NOT recommended: Setting SL=0 and TP=0 (use <code>BuyMarket()</code> instead)</p>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#1-basic-usage-fixed-sltp-prices","title":"1) Basic usage - fixed SL/TP prices","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\ncurrentAsk := 1.08500\nsl := 1.08000  // 50 pips below entry\ntp := 1.09500  // 100 pips above entry\n\nticket, err := sugar.BuyMarketWithSLTP(symbol, volume, sl, tp)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 BUY position opened with protection\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Entry:  ~%.5f\\n\", currentAsk)\nfmt.Printf(\"   SL:     %.5f (-50 pips)\\n\", sl)\nfmt.Printf(\"   TP:     %.5f (+100 pips)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#2-calculate-sltp-from-current-price","title":"2) Calculate SL/TP from current price","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Get current price\nask, _ := sugar.GetAsk(symbol)\n\n// Calculate SL/TP\ninfo, _ := sugar.GetSymbolInfo(symbol)\nsl := ask - (50 * info.Point)  // 50 pips SL\ntp := ask + (100 * info.Point) // 100 pips TP\n\nticket, _ := sugar.BuyMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 BUY with calculated SL/TP\\n\")\nfmt.Printf(\"   Entry: %.5f\\n\", ask)\nfmt.Printf(\"   SL:    %.5f (50 pips)\\n\", sl)\nfmt.Printf(\"   TP:    %.5f (100 pips)\\n\", tp)\nfmt.Printf(\"   R:R:   1:2\\n\")\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#3-using-calculatesltp-helper","title":"3) Using CalculateSLTP helper","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Use helper to calculate SL/TP prices\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, slPips, tpPips)\n\nticket, _ := sugar.BuyMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 BUY using CalculateSLTP helper\\n\")\nfmt.Printf(\"   SL: %.5f (%.0f pips)\\n\", sl, slPips)\nfmt.Printf(\"   TP: %.5f (%.0f pips)\\n\", tp, tpPips)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#4-risk-managed-entry-with-position-sizing","title":"4) Risk-managed entry with position sizing","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nslPips := 50.0\ntpPips := 100.0\n\n// Calculate lot size based on risk\nlotSize, _ := sugar.CalculatePositionSize(symbol, riskPercent, slPips)\n\n// Calculate SL/TP prices\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, slPips, tpPips)\n\n// Open with full risk management\nticket, err := sugar.BuyMarketWithSLTP(symbol, lotSize, sl, tp)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Risk-managed BUY position\\n\")\nfmt.Printf(\"   Risk:   %.1f%% of balance\\n\", riskPercent)\nfmt.Printf(\"   Size:   %.2f lots\\n\", lotSize)\nfmt.Printf(\"   SL:     %.0f pips\\n\", slPips)\nfmt.Printf(\"   TP:     %.0f pips\\n\", tpPips)\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#5-21-riskreward-ratio","title":"5) 2:1 Risk/Reward ratio","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nslPips := 30.0\ntpPips := 60.0 // 2:1 R:R\n\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, slPips, tpPips)\nticket, _ := sugar.BuyMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 BUY with 2:1 Risk/Reward\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Risk:   %.0f pips\\n\", slPips)\nfmt.Printf(\"   Reward: %.0f pips\\n\", tpPips)\nfmt.Printf(\"   R:R:    1:%.0f\\n\", tpPips/slPips)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#6-atr-based-sltp","title":"6) ATR-based SL/TP","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Assume we calculated ATR = 80 pips\natrValue := 80.0\n\n// Use 1.5x ATR for SL, 3x ATR for TP\nslPips := 1.5 * atrValue  // 120 pips\ntpPips := 3.0 * atrValue  // 240 pips\n\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, slPips, tpPips)\nticket, _ := sugar.BuyMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 ATR-based BUY position\\n\")\nfmt.Printf(\"   ATR:    %.0f pips\\n\", atrValue)\nfmt.Printf(\"   SL:     %.0f pips (1.5x ATR)\\n\", slPips)\nfmt.Printf(\"   TP:     %.0f pips (3.0x ATR)\\n\", tpPips)\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#7-supportresistance-based-sltp","title":"7) Support/Resistance based SL/TP","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Technical levels\nsupportLevel := 1.08000\nresistanceLevel := 1.09000\n\n// Get current entry\nask, _ := sugar.GetAsk(symbol)\n\n// Set SL below support, TP at resistance\ninfo, _ := sugar.GetSymbolInfo(symbol)\nsl := supportLevel - (10 * info.Point) // 10 pips buffer below support\ntp := resistanceLevel\n\nticket, _ := sugar.BuyMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 BUY with technical levels\\n\")\nfmt.Printf(\"   Entry:      %.5f\\n\", ask)\nfmt.Printf(\"   Support:    %.5f\\n\", supportLevel)\nfmt.Printf(\"   SL:         %.5f (below support)\\n\", sl)\nfmt.Printf(\"   Resistance: %.5f\\n\", resistanceLevel)\nfmt.Printf(\"   TP:         %.5f (at resistance)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#8-only-stop-loss-no-tp","title":"8) Only Stop Loss (no TP)","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nslPips := 50.0\n\nsl, _, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, slPips, 0)\ntp := 0.0 // No take profit\n\nticket, _ := sugar.BuyMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 BUY with SL only (manual TP management)\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   SL:     %.5f (%.0f pips)\\n\", sl, slPips)\nfmt.Printf(\"   TP:     None - will manage manually\\n\")\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#9-validation-before-opening","title":"9) Validation before opening","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Pre-check 1: Can we open?\ncanOpen, reason, _ := sugar.CanOpenPosition(symbol, volume)\nif !canOpen {\n    fmt.Printf(\"\u274c Cannot open: %s\\n\", reason)\n    return\n}\n\n// Pre-check 2: Spread acceptable?\nspread, _ := sugar.GetSpread(symbol)\nif spread &gt; 15 {\n    fmt.Printf(\"\u274c Spread too high: %.0f points\\n\", spread)\n    return\n}\n\n// All checks passed - open position\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, slPips, tpPips)\nticket, _ := sugar.BuyMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 Position opened after validation\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#10-complete-trading-function","title":"10) Complete trading function","text":"<pre><code>func OpenBuyPosition(sugar *mt5.MT5Sugar, symbol string, riskPercent, slPips, tpPips float64) (uint64, error) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      OPENING BUY POSITION             \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Step 1: Validate symbol\n    available, _ := sugar.IsSymbolAvailable(symbol)\n    if !available {\n        return 0, fmt.Errorf(\"symbol %s not available\", symbol)\n    }\n    fmt.Printf(\"\u2705 Symbol: %s\\n\", symbol)\n\n    // Step 2: Check spread\n    spread, _ := sugar.GetSpread(symbol)\n    if spread &gt; 20 {\n        return 0, fmt.Errorf(\"spread too high: %.0f\", spread)\n    }\n    fmt.Printf(\"\u2705 Spread: %.0f points\\n\", spread)\n\n    // Step 3: Calculate position size\n    lotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, slPips)\n    if err != nil {\n        return 0, fmt.Errorf(\"position size calc failed: %w\", err)\n    }\n    fmt.Printf(\"\u2705 Lot size: %.2f (%.1f%% risk)\\n\", lotSize, riskPercent)\n\n    // Step 4: Check margin\n    canOpen, reason, _ := sugar.CanOpenPosition(symbol, lotSize)\n    if !canOpen {\n        return 0, fmt.Errorf(\"insufficient margin: %s\", reason)\n    }\n    fmt.Printf(\"\u2705 Margin: OK\\n\")\n\n    // Step 5: Calculate SL/TP\n    sl, tp, _ := sugar.CalculateSLTP(symbol, \"BUY\", 0, slPips, tpPips)\n    fmt.Printf(\"\u2705 SL: %.5f (%.0f pips)\\n\", sl, slPips)\n    fmt.Printf(\"\u2705 TP: %.5f (%.0f pips)\\n\", tp, tpPips)\n\n    // Step 6: Open position\n    ticket, err := sugar.BuyMarketWithSLTP(symbol, lotSize, sl, tp)\n    if err != nil {\n        return 0, fmt.Errorf(\"order failed: %w\", err)\n    }\n\n    fmt.Printf(\"\\n\ud83c\udfaf Position opened successfully!\\n\")\n    fmt.Printf(\"   Ticket: #%d\\n\", ticket)\n    return ticket, nil\n}\n\n// Usage:\nticket, err := OpenBuyPosition(sugar, \"EURUSD\", 2.0, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Alternative (using pips instead of prices):</p> <ul> <li><code>BuyMarketWithPips()</code> - More intuitive, specify SL/TP in pips \u2b50 RECOMMENDED</li> </ul> <p>\ud83c\udf6c Other market orders:</p> <ul> <li><code>BuyMarket()</code> - No SL/TP (NOT recommended for production)</li> <li><code>SellMarketWithSLTP()</code> - SELL with SL/TP</li> </ul> <p>\ud83c\udf6c Helper methods:</p> <ul> <li><code>CalculateSLTP()</code> - Calculate SL/TP prices from pips</li> <li><code>CalculatePositionSize()</code> - Risk-based position sizing</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#1-wrong-sltp-direction","title":"1) Wrong SL/TP direction","text":"<pre><code>// \u274c WRONG - SL must be BELOW entry for BUY\nask := 1.08500\nsugar.BuyMarketWithSLTP(\"EURUSD\", 0.1, 1.09000, 1.10000) // SL above entry!\n\n// \u2705 CORRECT - SL below, TP above\nsugar.BuyMarketWithSLTP(\"EURUSD\", 0.1, 1.08000, 1.09000)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#2-not-validating-sltp-distances","title":"2) Not validating SL/TP distances","text":"<pre><code>// \u274c WRONG - SL too close (might be rejected)\nask := 1.08500\nsl := 1.08499 // Only 1 pip!\nsugar.BuyMarketWithSLTP(\"EURUSD\", 0.1, sl, 1.09000)\n\n// \u2705 CORRECT - check minimum stop level\nstopLevel, _ := sugar.GetMinStopLevel(\"EURUSD\")\n// Ensure SL is at least stopLevel pips away\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#3-using-prices-instead-of-pips","title":"3) Using prices instead of pips","text":"<pre><code>// \u274c HARDER - calculate prices manually\nask, _ := sugar.GetAsk(\"EURUSD\")\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\nsl := ask - (50 * info.Point)\ntp := ask + (100 * info.Point)\nsugar.BuyMarketWithSLTP(\"EURUSD\", 0.1, sl, tp)\n\n// \u2705 EASIER - use BuyMarketWithPips\nsugar.BuyMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/BuyMarketWithSLTP/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Use <code>BuyMarketWithPips()</code> - More intuitive than calculating prices</p> </li> <li> <p>Always set SL - Never trade without stop loss in production</p> </li> <li> <p>2:1 minimum R:R - TP should be at least 2x SL distance</p> </li> <li> <p>Validate before opening - Check spread, margin, symbol availability</p> </li> <li> <p>Calculate position size - Use <code>CalculatePositionSize()</code> for risk management</p> </li> </ol> <p>See also: <code>BuyMarketWithPips.md</code>, <code>CalculateSLTP.md</code>, <code>SellMarketWithSLTP.md</code></p>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/","title":"\ud83d\udd34\ud83d\udcc8\ud83d\udee1\ufe0f Sell Limit with SL/TP (<code>SellLimitWithSLTP</code>)","text":"<p>Sugar method: Places pending SELL LIMIT order with Stop Loss and Take Profit set from the start.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.SellLimitWithSLTP(symbol, volume, price, sl, tp)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Pending order ticket number</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) SellLimitWithSLTP(symbol string, volume, price, sl, tp float64) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1) <code>price</code> <code>float64</code> Entry price (must be ABOVE current BID) <code>sl</code> <code>float64</code> Stop Loss price (0 = no SL) <code>tp</code> <code>float64</code> Take Profit price (0 = no TP) Output Type Description <code>ticket</code> <code>uint64</code> Pending order ticket number <code>error</code> <code>error</code> Error if order rejected"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: SELL LIMIT pending order with SL/TP - complete setup in one call.</li> <li>Why you need it: Set everything (entry, SL, TP) and forget - activates automatically.</li> <li>Sanity check: Entry above BID, SL above entry, TP below entry.</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#logic","title":"\ud83d\udcca Logic","text":"<pre><code>Current BID: 1.08500\nEntry:       1.09000 (LIMIT - 50 pips above)\nSL:          1.09500 (50 pips above entry)\nTP:          1.08000 (100 pips below entry)\n\nWhen price rises to 1.09000 \u2192 Order fills with SL/TP already set\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Resistance level entries - Sell at resistance with protection</p> <p>\u2705 Rally exhaustion - Wait for price rise, enter with risk management</p> <p>\u2705 Set and forget - Don't need to monitor for fill</p> <p>\u2705 Automated strategies - Complete order setup in advance</p>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#1-basic-usage-resistance-with-sltp","title":"1) Basic usage - resistance with SL/TP","text":"<pre><code>symbol := \"EURUSD\"\ncurrentBid, _ := sugar.GetBid(symbol)\n\nentryPrice := 1.09000 // Resistance level\nsl := 1.09500         // 50 pips above entry\ntp := 1.08000         // 100 pips below entry\n\nticket, err := sugar.SellLimitWithSLTP(symbol, 0.1, entryPrice, sl, tp)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 SELL LIMIT with SL/TP placed\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Entry:  %.5f (current: %.5f)\\n\", entryPrice, currentBid)\nfmt.Printf(\"   SL:     %.5f (+50 pips from entry)\\n\", sl)\nfmt.Printf(\"   TP:     %.5f (-100 pips from entry)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#2-calculate-sltp-from-entry-price","title":"2) Calculate SL/TP from entry price","text":"<pre><code>symbol := \"EURUSD\"\nentryPrice := 1.09000\nvolume := 0.1\n\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Calculate SL/TP relative to entry\nsl := entryPrice + (50 * info.Point)  // 50 pips SL (above entry)\ntp := entryPrice - (100 * info.Point) // 100 pips TP (below entry)\n\nticket, _ := sugar.SellLimitWithSLTP(symbol, volume, entryPrice, sl, tp)\n\nfmt.Printf(\"\u2705 SELL LIMIT with calculated SL/TP\\n\")\nfmt.Printf(\"   Entry: %.5f\\n\", entryPrice)\nfmt.Printf(\"   SL:    %.5f (50 pips above)\\n\", sl)\nfmt.Printf(\"   TP:    %.5f (100 pips below)\\n\", tp)\nfmt.Printf(\"   R:R:   1:2\\n\")\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#3-using-calculatesltp-helper","title":"3) Using CalculateSLTP helper","text":"<pre><code>symbol := \"EURUSD\"\nentryPrice := 1.09000\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Calculate SL/TP from entry price\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", entryPrice, slPips, tpPips)\n\nticket, _ := sugar.SellLimitWithSLTP(symbol, volume, entryPrice, sl, tp)\n\nfmt.Printf(\"\u2705 SELL LIMIT using helper\\n\")\nfmt.Printf(\"   Entry: %.5f\\n\", entryPrice)\nfmt.Printf(\"   SL:    %.5f (%.0f pips)\\n\", sl, slPips)\nfmt.Printf(\"   TP:    %.5f (%.0f pips)\\n\", tp, tpPips)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#4-multiple-sell-limits-at-resistance-zones","title":"4) Multiple sell limits at resistance zones","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.05\n\n// Three resistance levels\nresistances := []struct {\n    entry float64\n    sl    float64\n    tp    float64\n}{\n    {1.09000, 1.09500, 1.08000}, // Strong resistance\n    {1.09500, 1.10000, 1.08500}, // Medium resistance\n    {1.10000, 1.10500, 1.09000}, // Weak resistance\n}\n\nfmt.Println(\"Placing SELL LIMITS at resistance zones:\")\n\nfor i, level := range resistances {\n    ticket, err := sugar.SellLimitWithSLTP(symbol, volume, level.entry, level.sl, level.tp)\n    if err != nil {\n        fmt.Printf(\"Level %d failed: %v\\n\", i+1, err)\n        continue\n    }\n\n    fmt.Printf(\"\u2705 Level %d: Entry %.5f, SL %.5f, TP %.5f - Ticket #%d\\n\",\n        i+1, level.entry, level.sl, level.tp, ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#5-fibonacci-retracement-sell","title":"5) Fibonacci retracement sell","text":"<pre><code>symbol := \"EURUSD\"\n\n// Previous swing in downtrend\nswingHigh := 1.09000\nswingLow := 1.08000\nrange_ := swingHigh - swingLow\n\n// 50% Fibonacci retracement (sell opportunity)\nfib50 := swingLow + (range_ * 0.50)\n\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// SL above Fib level, TP at swing low\nsl := fib50 + (30 * info.Point)  // 30 pips SL\ntp := swingLow                    // Target swing low\n\nticket, _ := sugar.SellLimitWithSLTP(symbol, 0.1, fib50, sl, tp)\n\nfmt.Printf(\"\u2705 Fibonacci SELL LIMIT\\n\")\nfmt.Printf(\"   Entry: %.5f (Fib 50%%)\\n\", fib50)\nfmt.Printf(\"   SL:    %.5f (30 pips)\\n\", sl)\nfmt.Printf(\"   TP:    %.5f (swing low)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#6-risk-based-position-sizing-with-sell-limit","title":"6) Risk-based position sizing with sell limit","text":"<pre><code>symbol := \"EURUSD\"\nentryPrice := 1.09000\nriskPercent := 2.0\nslPips := 50.0\ntpPips := 100.0\n\n// Calculate lot size based on risk\nlotSize, _ := sugar.CalculatePositionSize(symbol, riskPercent, slPips)\n\n// Calculate SL/TP from entry\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", entryPrice, slPips, tpPips)\n\nticket, _ := sugar.SellLimitWithSLTP(symbol, lotSize, entryPrice, sl, tp)\n\nfmt.Printf(\"\u2705 Risk-managed SELL LIMIT\\n\")\nfmt.Printf(\"   Entry:  %.5f\\n\", entryPrice)\nfmt.Printf(\"   Risk:   %.1f%% of balance\\n\", riskPercent)\nfmt.Printf(\"   Size:   %.2f lots\\n\", lotSize)\nfmt.Printf(\"   SL:     %.0f pips\\n\", slPips)\nfmt.Printf(\"   TP:     %.0f pips\\n\", tpPips)\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#7-round-number-resistance","title":"7) Round number resistance","text":"<pre><code>symbol := \"EURUSD\"\n\n// Round number acts as psychological resistance\nroundNumber := 1.09000\n\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Entry at round number\nentry := roundNumber\nsl := entry + (40 * info.Point)  // 40 pips SL\ntp := entry - (80 * info.Point)  // 80 pips TP\n\nticket, _ := sugar.SellLimitWithSLTP(symbol, 0.1, entry, sl, tp)\n\nfmt.Printf(\"\u2705 Round number SELL LIMIT\\n\")\nfmt.Printf(\"   Entry: %.5f (psychological level)\\n\", entry)\nfmt.Printf(\"   SL:    %.5f (40 pips)\\n\", sl)\nfmt.Printf(\"   TP:    %.5f (80 pips, 1:2 R:R)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#8-trendline-resistance-sell","title":"8) Trendline resistance sell","text":"<pre><code>symbol := \"EURUSD\"\n\n// Trendline resistance at current time\ntrendlinePrice := 1.08800\nvolume := 0.1\n\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Tight SL above trendline\nsl := trendlinePrice + (25 * info.Point)  // 25 pips\ntp := trendlinePrice - (75 * info.Point)  // 75 pips (1:3 R:R)\n\nticket, _ := sugar.SellLimitWithSLTP(symbol, volume, trendlinePrice, sl, tp)\n\nfmt.Printf(\"\u2705 Trendline resistance SELL\\n\")\nfmt.Printf(\"   Entry: %.5f (trendline)\\n\", trendlinePrice)\nfmt.Printf(\"   SL:    %.5f (25 pips)\\n\", sl)\nfmt.Printf(\"   TP:    %.5f (75 pips)\\n\", tp)\nfmt.Printf(\"   R:R:   1:3\\n\")\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#9-pending-order-with-full-validation","title":"9) Pending order with full validation","text":"<pre><code>symbol := \"EURUSD\"\nentryPrice := 1.09000\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Validate entry is above current BID\ncurrentBid, _ := sugar.GetBid(symbol)\nif entryPrice &lt;= currentBid {\n    fmt.Printf(\"\u274c Entry %.5f must be above BID %.5f\\n\", entryPrice, currentBid)\n    return\n}\n\n// Check minimum stop level\nstopLevel, _ := sugar.GetMinStopLevel(symbol)\ninfo, _ := sugar.GetSymbolInfo(symbol)\nminDistance := float64(stopLevel) * info.Point\n\nif (entryPrice - currentBid) &lt; minDistance {\n    fmt.Printf(\"\u274c Entry too close to current price\\n\")\n    return\n}\n\n// Calculate SL/TP\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", entryPrice, slPips, tpPips)\n\n// Validate SL/TP distances\nif (sl - entryPrice) &lt; minDistance {\n    fmt.Printf(\"\u274c SL too close to entry\\n\")\n    return\n}\n\nticket, _ := sugar.SellLimitWithSLTP(symbol, volume, entryPrice, sl, tp)\nfmt.Printf(\"\u2705 Validated SELL LIMIT placed - Ticket #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#10-complete-sell-limit-function","title":"10) Complete sell limit function","text":"<pre><code>func PlaceSellLimitWithProtection(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    entryPrice float64,\n    riskPercent float64,\n    slPips float64,\n    tpPips float64,\n) (uint64, error) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551    SELL LIMIT WITH SL/TP              \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Validate entry price\n    currentBid, _ := sugar.GetBid(symbol)\n    if entryPrice &lt;= currentBid {\n        return 0, fmt.Errorf(\"entry %.5f must be above BID %.5f\", entryPrice, currentBid)\n    }\n    fmt.Printf(\"\u2705 Entry: %.5f (%.0f pips above current)\\n\",\n        entryPrice, (entryPrice-currentBid)/0.00001)\n\n    // Calculate position size\n    lotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, slPips)\n    if err != nil {\n        return 0, err\n    }\n    fmt.Printf(\"\u2705 Size: %.2f lots (%.1f%% risk)\\n\", lotSize, riskPercent)\n\n    // Calculate SL/TP\n    sl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", entryPrice, slPips, tpPips)\n    fmt.Printf(\"\u2705 SL: %.5f (%.0f pips)\\n\", sl, slPips)\n    fmt.Printf(\"\u2705 TP: %.5f (%.0f pips)\\n\", tp, tpPips)\n\n    // Place order\n    ticket, err := sugar.SellLimitWithSLTP(symbol, lotSize, entryPrice, sl, tp)\n    if err != nil {\n        return 0, err\n    }\n\n    fmt.Printf(\"\\n\ud83c\udfaf SELL LIMIT placed successfully!\\n\")\n    fmt.Printf(\"   Ticket: #%d\\n\", ticket)\n    return ticket, nil\n}\n\n// Usage:\nticket, _ := PlaceSellLimitWithProtection(sugar, \"EURUSD\", 1.09000, 2.0, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other pending orders with SL/TP:</p> <ul> <li><code>BuyLimitWithSLTP()</code> - BUY LIMIT with protection</li> <li><code>SellStopWithSLTP()</code> - SELL STOP with protection</li> </ul> <p>\ud83c\udf6c Market orders with SL/TP:</p> <ul> <li><code>SellMarketWithSLTP()</code> - Immediate SELL with protection</li> </ul> <p>\ud83c\udf6c Helper methods:</p> <ul> <li><code>CalculateSLTP()</code> - Calculate SL/TP from pips</li> <li><code>SellLimit()</code> - Without SL/TP (add manually later)</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#1-wrong-sltp-direction","title":"1) Wrong SL/TP direction","text":"<pre><code>// \u274c WRONG - SL must be ABOVE entry for SELL\nentry := 1.09000\nsugar.SellLimitWithSLTP(\"EURUSD\", 0.1, entry, 1.08500, 1.08000) // SL below!\n\n// \u2705 CORRECT - SL above, TP below\nsugar.SellLimitWithSLTP(\"EURUSD\", 0.1, entry, 1.09500, 1.08000)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#2-calculating-sltp-from-current-price-instead-of-entry","title":"2) Calculating SL/TP from current price instead of entry","text":"<pre><code>// \u274c WRONG - SL/TP calculated from current price\nbid, _ := sugar.GetBid(\"EURUSD\")\nentry := 1.09000\nsl := bid + (50 * point) // Wrong! Should be from entry!\n\n// \u2705 CORRECT - calculate from entry price\nsl := entry + (50 * point)\ntp := entry - (100 * point)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#3-entry-price-below-current-bid","title":"3) Entry price below current BID","text":"<pre><code>// \u274c WRONG - SELL LIMIT must be ABOVE current BID\nbid := 1.08500\nsugar.SellLimitWithSLTP(\"EURUSD\", 0.1, 1.08000, sl, tp) // Below!\n\n// \u2705 CORRECT - entry above current BID\nsugar.SellLimitWithSLTP(\"EURUSD\", 0.1, 1.09000, sl, tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellLimitWithSLTP/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Calculate from entry price - Not current price</p> </li> <li> <p>Validate entry level - Must be above current BID</p> </li> <li> <p>Check min stop level - Both entry and SL must respect broker limits</p> </li> <li> <p>Use for resistance trading - Perfect for selling rallies</p> </li> <li> <p>Monitor for fills - Check if order was executed</p> </li> </ol> <p>See also: <code>SellLimit.md</code>, <code>BuyLimitWithSLTP.md</code>, <code>CalculateSLTP.md</code></p>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/","title":"\ud83d\udd34\ud83d\udee1\ufe0f Sell Market with SL/TP (<code>SellMarketWithSLTP</code>)","text":"<p>Sugar method: Opens SELL position at market with Stop Loss and Take Profit in one call.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.SellMarketWithSLTP(symbol, volume, sl, tp)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Position ticket number</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) SellMarketWithSLTP(symbol string, volume, sl, tp float64) (uint64, error)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") <code>volume</code> <code>float64</code> Lot size (e.g., 0.1) <code>sl</code> <code>float64</code> Stop Loss price (0 = no SL) <code>tp</code> <code>float64</code> Take Profit price (0 = no TP) Output Type Description <code>ticket</code> <code>uint64</code> Position ticket number <code>error</code> <code>error</code> Error if order rejected"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Opens SELL position with SL/TP set immediately - safer than <code>SellMarket()</code>.</li> <li>Why you need it: Complete risk management in one call, no separate modification needed.</li> <li>Sanity check: For SELL: SL must be above entry, TP must be below entry.</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Production trading - Always use SL/TP in real trading</p> <p>\u2705 Risk-managed entries - Set protection from the start</p> <p>\u2705 Quick entries - One call instead of two (open + modify)</p> <p>\u2705 Automated trading - Ensure every position has risk limits</p> <p>\u274c NOT recommended: Setting SL=0 and TP=0 (use <code>SellMarket()</code> instead)</p>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#1-basic-usage-fixed-sltp-prices","title":"1) Basic usage - fixed SL/TP prices","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\ncurrentBid := 1.08500\nsl := 1.09000  // 50 pips above entry\ntp := 1.07500  // 100 pips below entry\n\nticket, err := sugar.SellMarketWithSLTP(symbol, volume, sl, tp)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 SELL position opened with protection\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Entry:  ~%.5f\\n\", currentBid)\nfmt.Printf(\"   SL:     %.5f (+50 pips)\\n\", sl)\nfmt.Printf(\"   TP:     %.5f (-100 pips)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#2-calculate-sltp-from-current-price","title":"2) Calculate SL/TP from current price","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Get current price\nbid, _ := sugar.GetBid(symbol)\n\n// Calculate SL/TP\ninfo, _ := sugar.GetSymbolInfo(symbol)\nsl := bid + (50 * info.Point)  // 50 pips SL (above entry)\ntp := bid - (100 * info.Point) // 100 pips TP (below entry)\n\nticket, _ := sugar.SellMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 SELL with calculated SL/TP\\n\")\nfmt.Printf(\"   Entry: %.5f\\n\", bid)\nfmt.Printf(\"   SL:    %.5f (50 pips above)\\n\", sl)\nfmt.Printf(\"   TP:    %.5f (100 pips below)\\n\", tp)\nfmt.Printf(\"   R:R:   1:2\\n\")\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#3-using-calculatesltp-helper","title":"3) Using CalculateSLTP helper","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Use helper to calculate SL/TP prices\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", 0, slPips, tpPips)\n\nticket, _ := sugar.SellMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 SELL using CalculateSLTP helper\\n\")\nfmt.Printf(\"   SL: %.5f (%.0f pips)\\n\", sl, slPips)\nfmt.Printf(\"   TP: %.5f (%.0f pips)\\n\", tp, tpPips)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#4-risk-managed-entry-with-position-sizing","title":"4) Risk-managed entry with position sizing","text":"<pre><code>symbol := \"EURUSD\"\nriskPercent := 2.0\nslPips := 50.0\ntpPips := 100.0\n\n// Calculate lot size based on risk\nlotSize, _ := sugar.CalculatePositionSize(symbol, riskPercent, slPips)\n\n// Calculate SL/TP prices\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", 0, slPips, tpPips)\n\n// Open with full risk management\nticket, err := sugar.SellMarketWithSLTP(symbol, lotSize, sl, tp)\nif err != nil {\n    fmt.Printf(\"Order failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Risk-managed SELL position\\n\")\nfmt.Printf(\"   Risk:   %.1f%% of balance\\n\", riskPercent)\nfmt.Printf(\"   Size:   %.2f lots\\n\", lotSize)\nfmt.Printf(\"   SL:     %.0f pips\\n\", slPips)\nfmt.Printf(\"   TP:     %.0f pips\\n\", tpPips)\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#5-31-riskreward-ratio","title":"5) 3:1 Risk/Reward ratio","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nslPips := 30.0\ntpPips := 90.0 // 3:1 R:R\n\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", 0, slPips, tpPips)\nticket, _ := sugar.SellMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 SELL with 3:1 Risk/Reward\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\nfmt.Printf(\"   Risk:   %.0f pips\\n\", slPips)\nfmt.Printf(\"   Reward: %.0f pips\\n\", tpPips)\nfmt.Printf(\"   R:R:    1:%.0f\\n\", tpPips/slPips)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#6-resistancesupport-based-sltp","title":"6) Resistance/Support based SL/TP","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Technical levels\nresistanceLevel := 1.09000\nsupportLevel := 1.08000\n\n// Get current entry\nbid, _ := sugar.GetBid(symbol)\n\n// Set SL above resistance, TP at support\ninfo, _ := sugar.GetSymbolInfo(symbol)\nsl := resistanceLevel + (10 * info.Point) // 10 pips buffer above resistance\ntp := supportLevel\n\nticket, _ := sugar.SellMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 SELL with technical levels\\n\")\nfmt.Printf(\"   Entry:      %.5f\\n\", bid)\nfmt.Printf(\"   Resistance: %.5f\\n\", resistanceLevel)\nfmt.Printf(\"   SL:         %.5f (above resistance)\\n\", sl)\nfmt.Printf(\"   Support:    %.5f\\n\", supportLevel)\nfmt.Printf(\"   TP:         %.5f (at support)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#7-trend-following-sell","title":"7) Trend following sell","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Strong downtrend - previous low at 1.08000\ntargetLevel := 1.08000\n\nbid, _ := sugar.GetBid(symbol)\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Tight SL above recent swing high\nsl := bid + (40 * info.Point)  // 40 pips SL\ntp := targetLevel              // Target previous low\n\nticket, _ := sugar.SellMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 Trend following SELL\\n\")\nfmt.Printf(\"   Entry:  %.5f\\n\", bid)\nfmt.Printf(\"   SL:     %.5f (above swing)\\n\", sl)\nfmt.Printf(\"   Target: %.5f (previous low)\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#8-breakdown-sell-with-wide-sl","title":"8) Breakdown sell with wide SL","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.05 // Smaller size for wider SL\n\nbid, _ := sugar.GetBid(symbol)\ninfo, _ := sugar.GetSymbolInfo(symbol)\n\n// Wide SL for breakdown volatility\nslPips := 100.0\ntpPips := 200.0\n\nsl := bid + (slPips * info.Point)\ntp := bid - (tpPips * info.Point)\n\nticket, _ := sugar.SellMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 Breakdown SELL with wide SL\\n\")\nfmt.Printf(\"   Volume: %.2f (reduced for wider SL)\\n\", volume)\nfmt.Printf(\"   SL:     %.0f pips\\n\", slPips)\nfmt.Printf(\"   TP:     %.0f pips\\n\", tpPips)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#9-validation-before-opening","title":"9) Validation before opening","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nslPips := 50.0\ntpPips := 100.0\n\n// Pre-check 1: Can we open?\ncanOpen, reason, _ := sugar.CanOpenPosition(symbol, volume)\nif !canOpen {\n    fmt.Printf(\"\u274c Cannot open: %s\\n\", reason)\n    return\n}\n\n// Pre-check 2: Spread acceptable?\nspread, _ := sugar.GetSpread(symbol)\nif spread &gt; 15 {\n    fmt.Printf(\"\u274c Spread too high: %.0f points\\n\", spread)\n    return\n}\n\n// Pre-check 3: Check price direction\nbid, _ := sugar.GetBid(symbol)\nfmt.Printf(\"Current BID: %.5f\\n\", bid)\n\n// All checks passed - open position\nsl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", 0, slPips, tpPips)\nticket, _ := sugar.SellMarketWithSLTP(symbol, volume, sl, tp)\n\nfmt.Printf(\"\u2705 Position opened after validation\\n\")\nfmt.Printf(\"   Ticket: #%d\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#10-complete-trading-function","title":"10) Complete trading function","text":"<pre><code>func OpenSellPosition(sugar *mt5.MT5Sugar, symbol string, riskPercent, slPips, tpPips float64) (uint64, error) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      OPENING SELL POSITION            \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Step 1: Validate symbol\n    available, _ := sugar.IsSymbolAvailable(symbol)\n    if !available {\n        return 0, fmt.Errorf(\"symbol %s not available\", symbol)\n    }\n    fmt.Printf(\"\u2705 Symbol: %s\\n\", symbol)\n\n    // Step 2: Check spread\n    spread, _ := sugar.GetSpread(symbol)\n    if spread &gt; 20 {\n        return 0, fmt.Errorf(\"spread too high: %.0f\", spread)\n    }\n    fmt.Printf(\"\u2705 Spread: %.0f points\\n\", spread)\n\n    // Step 3: Calculate position size\n    lotSize, err := sugar.CalculatePositionSize(symbol, riskPercent, slPips)\n    if err != nil {\n        return 0, fmt.Errorf(\"position size calc failed: %w\", err)\n    }\n    fmt.Printf(\"\u2705 Lot size: %.2f (%.1f%% risk)\\n\", lotSize, riskPercent)\n\n    // Step 4: Check margin\n    canOpen, reason, _ := sugar.CanOpenPosition(symbol, lotSize)\n    if !canOpen {\n        return 0, fmt.Errorf(\"insufficient margin: %s\", reason)\n    }\n    fmt.Printf(\"\u2705 Margin: OK\\n\")\n\n    // Step 5: Calculate SL/TP\n    sl, tp, _ := sugar.CalculateSLTP(symbol, \"SELL\", 0, slPips, tpPips)\n    fmt.Printf(\"\u2705 SL: %.5f (%.0f pips)\\n\", sl, slPips)\n    fmt.Printf(\"\u2705 TP: %.5f (%.0f pips)\\n\", tp, tpPips)\n\n    // Step 6: Open position\n    ticket, err := sugar.SellMarketWithSLTP(symbol, lotSize, sl, tp)\n    if err != nil {\n        return 0, fmt.Errorf(\"order failed: %w\", err)\n    }\n\n    fmt.Printf(\"\\n\ud83c\udfaf Position opened successfully!\\n\")\n    fmt.Printf(\"   Ticket: #%d\\n\", ticket)\n    return ticket, nil\n}\n\n// Usage:\nticket, err := OpenSellPosition(sugar, \"EURUSD\", 2.0, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Alternative (using pips instead of prices):</p> <ul> <li><code>SellMarketWithPips()</code> - More intuitive, specify SL/TP in pips \u2b50 RECOMMENDED</li> </ul> <p>\ud83c\udf6c Other market orders:</p> <ul> <li><code>SellMarket()</code> - No SL/TP (NOT recommended for production)</li> <li><code>BuyMarketWithSLTP()</code> - BUY with SL/TP</li> </ul> <p>\ud83c\udf6c Helper methods:</p> <ul> <li><code>CalculateSLTP()</code> - Calculate SL/TP prices from pips</li> <li><code>CalculatePositionSize()</code> - Risk-based position sizing</li> </ul>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#1-wrong-sltp-direction","title":"1) Wrong SL/TP direction","text":"<pre><code>// \u274c WRONG - SL must be ABOVE entry for SELL\nbid := 1.08500\nsugar.SellMarketWithSLTP(\"EURUSD\", 0.1, 1.08000, 1.07000) // SL below entry!\n\n// \u2705 CORRECT - SL above, TP below\nsugar.SellMarketWithSLTP(\"EURUSD\", 0.1, 1.09000, 1.08000)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#2-confusing-bid-and-ask","title":"2) Confusing BID and ASK","text":"<pre><code>// \u274c WRONG - using ASK for SELL (SELL uses BID price)\nask, _ := sugar.GetAsk(\"EURUSD\")\nsl := ask + (50 * point)\n\n// \u2705 CORRECT - use BID for SELL calculations\nbid, _ := sugar.GetBid(\"EURUSD\")\nsl := bid + (50 * point)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#3-using-prices-instead-of-pips","title":"3) Using prices instead of pips","text":"<pre><code>// \u274c HARDER - calculate prices manually\nbid, _ := sugar.GetBid(\"EURUSD\")\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\nsl := bid + (50 * info.Point)\ntp := bid - (100 * info.Point)\nsugar.SellMarketWithSLTP(\"EURUSD\", 0.1, sl, tp)\n\n// \u2705 EASIER - use SellMarketWithPips\nsugar.SellMarketWithPips(\"EURUSD\", 0.1, 50, 100)\n</code></pre>"},{"location":"MT5Sugar/5.%20Trading_SLTP/SellMarketWithSLTP/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Use <code>SellMarketWithPips()</code> - More intuitive than calculating prices</p> </li> <li> <p>Always set SL - Never trade without stop loss in production</p> </li> <li> <p>2:1 minimum R:R - TP should be at least 2x SL distance</p> </li> <li> <p>Validate before opening - Check spread, margin, symbol availability</p> </li> <li> <p>Calculate position size - Use <code>CalculatePositionSize()</code> for risk management</p> </li> </ol> <p>See also: <code>SellMarketWithPips.md</code>, <code>CalculateSLTP.md</code>, <code>BuyMarketWithSLTP.md</code></p>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/","title":"\ud83d\udd12\ud83d\udd01 Close All Positions (<code>CloseAllPositions</code>)","text":"<p>Sugar method: Closes all open positions at once across all symbols.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.CloseAllPositions()</code></li> <li>Timeout: 10 seconds per position</li> <li>Returns: Error if any close failed</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) CloseAllPositions() error\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters required Output Type Description <code>error</code> <code>error</code> <code>nil</code> if all closed successfully, error otherwise"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Emergency \"close everything\" button - closes all open positions.</li> <li>Why you need it: Emergency exit, end of trading day, major news event.</li> <li>Sanity check: Closes ALL positions - no undo! Use with caution.</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#danger-zone","title":"\u26a0\ufe0f DANGER ZONE","text":"<p>This method closes EVERY open position!</p> <ul> <li>No confirmation prompt</li> <li>No way to undo</li> <li>Affects all symbols</li> <li>Use carefully in production!</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Emergency exit - Market crash, major news, need to exit NOW</p> <p>\u2705 End of day - Close all positions before weekend</p> <p>\u2705 Account protection - Margin call prevention</p> <p>\u2705 Strategy reset - Start fresh, close everything</p> <p>\u274c NOT for selective closing - Use <code>ClosePosition()</code> or <code>ClosePositionsBySymbol()</code> instead</p>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#1-basic-usage-emergency-close","title":"1) Basic usage - emergency close","text":"<pre><code>fmt.Println(\"\u26a0\ufe0f  EMERGENCY: Closing all positions!\")\n\nerr := sugar.CloseAllPositions()\nif err != nil {\n    fmt.Printf(\"\u274c Failed to close all: %v\\n\", err)\n    return\n}\n\nfmt.Println(\"\u2705 All positions closed\")\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#2-close-all-with-confirmation","title":"2) Close all with confirmation","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\nif len(positions) == 0 {\n    fmt.Println(\"No positions to close\")\n    return\n}\n\nfmt.Printf(\"\u26a0\ufe0f  WARNING: About to close %d positions\\n\", len(positions))\n\n// Show what will be closed\ntotalProfit := 0.0\nfor _, pos := range positions {\n    fmt.Printf(\"  - #%d: %s %.2f lots ($%.2f)\\n\",\n        pos.Ticket, pos.Symbol, pos.Volume, pos.Profit)\n    totalProfit += pos.Profit\n}\n\nfmt.Printf(\"\\nTotal P/L: $%.2f\\n\", totalProfit)\nfmt.Println(\"\\nClosing all positions in 3 seconds...\")\ntime.Sleep(3 * time.Second)\n\nerr := sugar.CloseAllPositions()\nif err != nil {\n    fmt.Printf(\"Failed: %v\\n\", err)\n} else {\n    fmt.Printf(\"\u2705 Closed %d positions with $%.2f total P/L\\n\",\n        len(positions), totalProfit)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#3-end-of-trading-day-routine","title":"3) End of trading day routine","text":"<pre><code>func EndOfDayClose(sugar *mt5.MT5Sugar) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      END OF DAY ROUTINE               \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Check current positions\n    positions, _ := sugar.GetOpenPositions()\n    fmt.Printf(\"Open positions: %d\\n\", len(positions))\n\n    if len(positions) == 0 {\n        fmt.Println(\"\u2705 No positions to close - ready for weekend\")\n        return\n    }\n\n    // Show summary\n    var totalProfit float64\n    buyCount, sellCount := 0, 0\n\n    for _, pos := range positions {\n        totalProfit += pos.Profit\n        if pos.Type == \"BUY\" {\n            buyCount++\n        } else {\n            sellCount++\n        }\n    }\n\n    fmt.Printf(\"\\nSummary:\\n\")\n    fmt.Printf(\"  BUY positions:  %d\\n\", buyCount)\n    fmt.Printf(\"  SELL positions: %d\\n\", sellCount)\n    fmt.Printf(\"  Total P/L:      $%.2f\\n\", totalProfit)\n\n    // Close all\n    fmt.Println(\"\\nClosing all positions...\")\n    err := sugar.CloseAllPositions()\n    if err != nil {\n        fmt.Printf(\"\u274c Error: %v\\n\", err)\n        return\n    }\n\n    fmt.Println(\"\u2705 All positions closed - have a nice weekend!\")\n}\n\n// Usage: Run at 16:55 on Friday\nEndOfDayClose(sugar)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#4-close-all-on-drawdown-threshold","title":"4) Close all on drawdown threshold","text":"<pre><code>maxDrawdown := -500.0 // $500 max loss\n\nticker := time.NewTicker(10 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    equity, _ := sugar.GetEquity()\n    profit, _ := sugar.GetProfit()\n\n    fmt.Printf(\"Equity: $%.2f, Floating P/L: $%.2f\\n\", equity, profit)\n\n    if profit &lt;= maxDrawdown {\n        fmt.Printf(\"\ud83d\udea8 DRAWDOWN LIMIT REACHED: $%.2f\\n\", profit)\n        fmt.Println(\"Closing all positions NOW!\")\n\n        err := sugar.CloseAllPositions()\n        if err != nil {\n            fmt.Printf(\"\u274c Failed to close: %v\\n\", err)\n        } else {\n            fmt.Println(\"\u2705 All positions closed - loss limited\")\n        }\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#5-close-all-before-major-news","title":"5) Close all before major news","text":"<pre><code>// News event in 5 minutes\nnewsTime := time.Now().Add(5 * time.Minute)\n\nfmt.Printf(\"Major news at %s - closing all positions\\n\",\n    newsTime.Format(\"15:04\"))\n\npositions, _ := sugar.GetOpenPositions()\n\nif len(positions) &gt; 0 {\n    fmt.Printf(\"Closing %d positions before news...\\n\", len(positions))\n\n    err := sugar.CloseAllPositions()\n    if err != nil {\n        fmt.Printf(\"\u274c Failed: %v\\n\", err)\n        return\n    }\n\n    fmt.Println(\"\u2705 All positions closed - ready for news event\")\n} else {\n    fmt.Println(\"No positions to close\")\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#6-close-all-and-show-summary","title":"6) Close all and show summary","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\nif len(positions) == 0 {\n    fmt.Println(\"No positions to close\")\n    return\n}\n\nfmt.Printf(\"Closing %d positions:\\n\", len(positions))\n\n// Record positions before closing\ntype ClosedPosition struct {\n    Ticket uint64\n    Symbol string\n    Type   string\n    Volume float64\n    Profit float64\n}\n\nvar closedPositions []ClosedPosition\n\nfor _, pos := range positions {\n    closedPositions = append(closedPositions, ClosedPosition{\n        Ticket: pos.Ticket,\n        Symbol: pos.Symbol,\n        Type:   pos.Type,\n        Volume: pos.Volume,\n        Profit: pos.Profit,\n    })\n}\n\n// Close all\nerr := sugar.CloseAllPositions()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\n// Show what was closed\nfmt.Println(\"\\n\u2705 Closed positions:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\ntotalProfit := 0.0\nfor _, pos := range closedPositions {\n    fmt.Printf(\"#%d: %s %s %.2f lots - $%.2f\\n\",\n        pos.Ticket, pos.Symbol, pos.Type, pos.Volume, pos.Profit)\n    totalProfit += pos.Profit\n}\n\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Total P/L: $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#7-close-all-with-error-handling","title":"7) Close all with error handling","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\ntotalPositions := len(positions)\n\nif totalPositions == 0 {\n    fmt.Println(\"No positions to close\")\n    return\n}\n\nfmt.Printf(\"Attempting to close %d positions...\\n\", totalPositions)\n\nerr := sugar.CloseAllPositions()\n\n// Verify all closed\ntime.Sleep(2 * time.Second)\nremainingPositions, _ := sugar.GetOpenPositions()\n\nif len(remainingPositions) == 0 {\n    fmt.Printf(\"\u2705 Success: All %d positions closed\\n\", totalPositions)\n} else {\n    fmt.Printf(\"\u26a0\ufe0f  Warning: %d positions still open\\n\", len(remainingPositions))\n    fmt.Println(\"Remaining positions:\")\n    for _, pos := range remainingPositions {\n        fmt.Printf(\"  - #%d: %s %.2f lots\\n\", pos.Ticket, pos.Symbol, pos.Volume)\n    }\n}\n\nif err != nil {\n    fmt.Printf(\"Error occurred: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#8-scheduled-close-all-cron-style","title":"8) Scheduled close all (cron-style)","text":"<pre><code>func ScheduledCloseAll(sugar *mt5.MT5Sugar, closeTime string) {\n    fmt.Printf(\"Scheduled close at %s\\n\", closeTime)\n\n    ticker := time.NewTicker(1 * time.Minute)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        now := time.Now().Format(\"15:04\")\n\n        if now == closeTime {\n            fmt.Printf(\"\ud83d\udd50 %s - Closing all positions\\n\", closeTime)\n\n            positions, _ := sugar.GetOpenPositions()\n            if len(positions) &gt; 0 {\n                err := sugar.CloseAllPositions()\n                if err != nil {\n                    fmt.Printf(\"Failed: %v\\n\", err)\n                } else {\n                    fmt.Printf(\"\u2705 Closed %d positions\\n\", len(positions))\n                }\n            } else {\n                fmt.Println(\"No positions to close\")\n            }\n            return\n        }\n\n        fmt.Printf(\"Waiting... (current: %s, target: %s)\\n\", now, closeTime)\n    }\n}\n\n// Usage: Close all positions at 16:55\nScheduledCloseAll(sugar, \"16:55\")\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#9-close-all-on-margin-level","title":"9) Close all on margin level","text":"<pre><code>dangerMarginLevel := 150.0 // 150%\n\nticker := time.NewTicker(15 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    marginLevel, _ := sugar.GetMarginLevel()\n\n    fmt.Printf(\"Margin Level: %.0f%%\\n\", marginLevel)\n\n    if marginLevel &lt; dangerMarginLevel {\n        fmt.Printf(\"\ud83d\udea8 DANGER: Margin level %.0f%% &lt; %.0f%%\\n\",\n            marginLevel, dangerMarginLevel)\n\n        positions, _ := sugar.GetOpenPositions()\n        fmt.Printf(\"Closing all %d positions to protect account!\\n\", len(positions))\n\n        err := sugar.CloseAllPositions()\n        if err != nil {\n            fmt.Printf(\"\u274c EMERGENCY CLOSE FAILED: %v\\n\", err)\n        } else {\n            fmt.Println(\"\u2705 All positions closed - margin call avoided\")\n        }\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#10-advanced-close-all-with-retry","title":"10) Advanced close all with retry","text":"<pre><code>func CloseAllPositionsWithRetry(sugar *mt5.MT5Sugar, maxRetries int) error {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      CLOSING ALL POSITIONS            \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    positions, _ := sugar.GetOpenPositions()\n    if len(positions) == 0 {\n        fmt.Println(\"No positions to close\")\n        return nil\n    }\n\n    initialCount := len(positions)\n    fmt.Printf(\"Positions to close: %d\\n\\n\", initialCount)\n\n    for attempt := 1; attempt &lt;= maxRetries; attempt++ {\n        fmt.Printf(\"Attempt %d/%d...\\n\", attempt, maxRetries)\n\n        err := sugar.CloseAllPositions()\n\n        // Check how many closed\n        time.Sleep(2 * time.Second)\n        remainingPositions, _ := sugar.GetOpenPositions()\n        closedCount := initialCount - len(remainingPositions)\n\n        fmt.Printf(\"  Closed: %d/%d\\n\", closedCount, initialCount)\n\n        if len(remainingPositions) == 0 {\n            fmt.Println(\"\\n\u2705 All positions closed successfully!\")\n            return nil\n        }\n\n        if attempt &lt; maxRetries {\n            fmt.Printf(\"  %d positions still open - retrying...\\n\\n\", len(remainingPositions))\n            time.Sleep(2 * time.Second)\n        }\n    }\n\n    // Final check\n    finalPositions, _ := sugar.GetOpenPositions()\n    return fmt.Errorf(\"failed to close all positions - %d still open\", len(finalPositions))\n}\n\n// Usage:\nerr := CloseAllPositionsWithRetry(sugar, 3)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Selective close methods:</p> <ul> <li><code>ClosePosition()</code> - Close single position</li> <li><code>ClosePositionsBySymbol()</code> - Close all positions for specific symbol</li> </ul> <p>\ud83c\udf6c Position info:</p> <ul> <li><code>GetOpenPositions()</code> - See what will be closed</li> <li><code>GetProfit()</code> - Check total P/L before closing</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#1-not-checking-what-youre-closing","title":"1) Not checking what you're closing","text":"<pre><code>// \u274c WRONG - blindly closing everything\nsugar.CloseAllPositions()\n\n// \u2705 CORRECT - check first\npositions, _ := sugar.GetOpenPositions()\nfmt.Printf(\"About to close %d positions\\n\", len(positions))\n// Show details, then close\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#2-no-verification-after-close","title":"2) No verification after close","text":"<pre><code>// \u274c WRONG - assuming success\nsugar.CloseAllPositions()\nfmt.Println(\"Done!\")\n\n// \u2705 CORRECT - verify\nsugar.CloseAllPositions()\ntime.Sleep(2 * time.Second)\nremaining, _ := sugar.GetOpenPositions()\nif len(remaining) &gt; 0 {\n    fmt.Printf(\"\u26a0\ufe0f  %d positions still open!\\n\", len(remaining))\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#3-using-in-loopstriggers-without-protection","title":"3) Using in loops/triggers without protection","text":"<pre><code>// \u274c WRONG - might trigger multiple times\nif someCondition {\n    sugar.CloseAllPositions() // Could run every tick!\n}\n\n// \u2705 CORRECT - add flag\nvar alreadyClosed bool\nif someCondition &amp;&amp; !alreadyClosed {\n    sugar.CloseAllPositions()\n    alreadyClosed = true\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Always preview - Check what you're closing first</p> </li> <li> <p>Record P/L - Save profit/loss before closing</p> </li> <li> <p>Verify closure - Check no positions remain after</p> </li> <li> <p>Use sparingly - This is an emergency tool</p> </li> <li> <p>Add confirmation - Especially in production systems</p> </li> </ol>"},{"location":"MT5Sugar/6.%20Position_Management/CloseAllPositions/#production-warning","title":"\ud83d\udea8 Production Warning","text":"<p>In production:</p> <ul> <li>Add multiple confirmations before closing all</li> <li>Log all positions before closing</li> <li>Implement rate limiting (don't allow rapid repeated calls)</li> <li>Consider user confirmation for manual systems</li> <li>Have rollback plan if needed</li> </ul> <p>See also: <code>ClosePosition.md</code>, <code>GetOpenPositions.md</code></p>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/","title":"\ud83d\udd12 Close Position (<code>ClosePosition</code>)","text":"<p>Sugar method: Closes an open position completely by ticket number.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.ClosePosition(ticket)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Error if close failed</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) ClosePosition(ticket uint64) error\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>ticket</code> <code>uint64</code> Position ticket number to close Output Type Description <code>error</code> <code>error</code> <code>nil</code> if successful, error if failed"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Closes entire position immediately at current market price.</li> <li>Why you need it: Exit trades manually, cut losses, take profits.</li> <li>Sanity check: Position must exist and be open. Returns error if position not found.</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Manual exit - Close position when you want to exit</p> <p>\u2705 Stop loss hit - Manually close after SL triggered</p> <p>\u2705 Take profit - Lock in gains</p> <p>\u2705 Emergency close - Get out of bad trade quickly</p>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#1-basic-usage-close-by-ticket","title":"1) Basic usage - close by ticket","text":"<pre><code>ticket := uint64(12345) // Position ticket from opening\n\nerr := sugar.ClosePosition(ticket)\nif err != nil {\n    fmt.Printf(\"Failed to close: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Position #%d closed successfully\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#2-close-and-verify","title":"2) Close and verify","text":"<pre><code>ticket := uint64(12345)\n\nfmt.Printf(\"Closing position #%d...\\n\", ticket)\n\nerr := sugar.ClosePosition(ticket)\nif err != nil {\n    fmt.Printf(\"\u274c Close failed: %v\\n\", err)\n    return\n}\n\nfmt.Println(\"\u2705 Close successful\")\n\n// Verify position no longer exists\ntime.Sleep(1 * time.Second)\n_, err = sugar.GetPositionByTicket(ticket)\nif err != nil {\n    fmt.Println(\"\u2705 Confirmed - position no longer exists\")\n} else {\n    fmt.Println(\"\u26a0\ufe0f  Warning - position still exists\")\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#3-close-with-profit-check","title":"3) Close with profit check","text":"<pre><code>ticket := uint64(12345)\n\n// Check profit before closing\npos, err := sugar.GetPositionByTicket(ticket)\nif err != nil {\n    fmt.Printf(\"Position not found: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Position #%d status:\\n\", ticket)\nfmt.Printf(\"  Symbol: %s\\n\", pos.Symbol)\nfmt.Printf(\"  Volume: %.2f\\n\", pos.Volume)\nfmt.Printf(\"  Profit: $%.2f\\n\", pos.Profit)\n\n// Close position\nerr = sugar.ClosePosition(ticket)\nif err != nil {\n    fmt.Printf(\"Close failed: %v\\n\", err)\n    return\n}\n\nif pos.Profit &gt; 0 {\n    fmt.Printf(\"\u2705 Profit locked: $%.2f\\n\", pos.Profit)\n} else {\n    fmt.Printf(\"\u2705 Loss cut: $%.2f\\n\", pos.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#4-close-at-target-profit","title":"4) Close at target profit","text":"<pre><code>ticket := uint64(12345)\ntargetProfit := 100.0 // $100\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\nfmt.Printf(\"Monitoring position #%d for $%.2f profit...\\n\", ticket, targetProfit)\n\nfor range ticker.C {\n    pos, err := sugar.GetPositionByTicket(ticket)\n    if err != nil {\n        fmt.Println(\"Position no longer exists\")\n        return\n    }\n\n    fmt.Printf(\"Current profit: $%.2f\\n\", pos.Profit)\n\n    if pos.Profit &gt;= targetProfit {\n        fmt.Printf(\"\ud83c\udfaf Target reached! Closing...\\n\")\n        sugar.ClosePosition(ticket)\n        fmt.Printf(\"\u2705 Position closed at $%.2f profit\\n\", pos.Profit)\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#5-close-on-stop-loss-breach","title":"5) Close on stop loss breach","text":"<pre><code>ticket := uint64(12345)\nmaxLoss := -50.0 // Stop at $50 loss\n\nticker := time.NewTicker(2 * time.Second)\ndefer ticker.Stop()\n\nfmt.Printf(\"Monitoring position #%d with $%.2f max loss...\\n\", ticket, maxLoss)\n\nfor range ticker.C {\n    pos, err := sugar.GetPositionByTicket(ticket)\n    if err != nil {\n        return\n    }\n\n    if pos.Profit &lt;= maxLoss {\n        fmt.Printf(\"\ud83d\uded1 Stop loss hit: $%.2f\\n\", pos.Profit)\n        err := sugar.ClosePosition(ticket)\n        if err != nil {\n            fmt.Printf(\"\u274c Emergency close failed: %v\\n\", err)\n        } else {\n            fmt.Println(\"\u2705 Position closed - loss limited\")\n        }\n        return\n    }\n\n    fmt.Printf(\"Current P/L: $%.2f (SL: $%.2f)\\n\", pos.Profit, maxLoss)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#6-close-all-positions-for-a-symbol","title":"6) Close all positions for a symbol","text":"<pre><code>symbol := \"EURUSD\"\n\npositions, _ := sugar.GetPositionsBySymbol(symbol)\n\nfmt.Printf(\"Closing %d %s positions...\\n\", len(positions), symbol)\n\nclosedCount := 0\nfor _, pos := range positions {\n    err := sugar.ClosePosition(pos.Ticket)\n    if err != nil {\n        fmt.Printf(\"\u274c Failed to close #%d: %v\\n\", pos.Ticket, err)\n        continue\n    }\n\n    closedCount++\n    fmt.Printf(\"\u2705 Closed #%d (%.2f lots, $%.2f P/L)\\n\",\n        pos.Ticket, pos.Volume, pos.Profit)\n}\n\nfmt.Printf(\"\\n%d/%d positions closed\\n\", closedCount, len(positions))\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#7-close-oldest-position-first","title":"7) Close oldest position first","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\nif len(positions) == 0 {\n    fmt.Println(\"No positions to close\")\n    return\n}\n\n// Find oldest position\nvar oldest *PositionInfo\nfor _, pos := range positions {\n    if oldest == nil || pos.TimeOpen.Before(oldest.TimeOpen) {\n        oldest = pos\n    }\n}\n\nfmt.Printf(\"Closing oldest position #%d (opened: %s)\\n\",\n    oldest.Ticket, oldest.TimeOpen.Format(\"2006-01-02 15:04:05\"))\n\nerr := sugar.ClosePosition(oldest.Ticket)\nif err != nil {\n    fmt.Printf(\"Close failed: %v\\n\", err)\n} else {\n    fmt.Printf(\"\u2705 Closed - held for %v\\n\", time.Since(oldest.TimeOpen).Round(time.Minute))\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#8-close-losing-positions-only","title":"8) Close losing positions only","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\nfmt.Println(\"Closing losing positions...\")\n\nfor _, pos := range positions {\n    if pos.Profit &lt; 0 {\n        fmt.Printf(\"Closing #%d: %s (loss: $%.2f)\\n\",\n            pos.Ticket, pos.Symbol, pos.Profit)\n\n        err := sugar.ClosePosition(pos.Ticket)\n        if err != nil {\n            fmt.Printf(\"  \u274c Failed: %v\\n\", err)\n        } else {\n            fmt.Printf(\"  \u2705 Closed\\n\")\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#9-close-with-retry-logic","title":"9) Close with retry logic","text":"<pre><code>func ClosePositionWithRetry(sugar *mt5.MT5Sugar, ticket uint64, maxRetries int) error {\n    for attempt := 1; attempt &lt;= maxRetries; attempt++ {\n        err := sugar.ClosePosition(ticket)\n        if err == nil {\n            fmt.Printf(\"\u2705 Position #%d closed (attempt %d)\\n\", ticket, attempt)\n            return nil\n        }\n\n        fmt.Printf(\"\u274c Attempt %d failed: %v\\n\", attempt, err)\n\n        if attempt &lt; maxRetries {\n            fmt.Printf(\"   Retrying in 2 seconds...\\n\")\n            time.Sleep(2 * time.Second)\n        }\n    }\n\n    return fmt.Errorf(\"failed to close after %d attempts\", maxRetries)\n}\n\n// Usage:\nerr := ClosePositionWithRetry(sugar, 12345, 3)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#10-advanced-close-with-analysis","title":"10) Advanced close with analysis","text":"<pre><code>func ClosePositionWithAnalysis(sugar *mt5.MT5Sugar, ticket uint64) error {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      CLOSING POSITION                 \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Get position details before closing\n    pos, err := sugar.GetPositionByTicket(ticket)\n    if err != nil {\n        return fmt.Errorf(\"position not found: %w\", err)\n    }\n\n    fmt.Printf(\"Position #%d:\\n\", ticket)\n    fmt.Printf(\"  Symbol:    %s\\n\", pos.Symbol)\n    fmt.Printf(\"  Type:      %s\\n\", pos.Type)\n    fmt.Printf(\"  Volume:    %.2f lots\\n\", pos.Volume)\n    fmt.Printf(\"  Open:      %.5f\\n\", pos.PriceOpen)\n    fmt.Printf(\"  Current:   %.5f\\n\", pos.PriceCurrent)\n    fmt.Printf(\"  Profit:    $%.2f\\n\", pos.Profit)\n    fmt.Printf(\"  Duration:  %v\\n\", time.Since(pos.TimeOpen).Round(time.Minute))\n\n    // Calculate metrics\n    var pips float64\n    if pos.Type == \"BUY\" {\n        pips = (pos.PriceCurrent - pos.PriceOpen) / 0.00001\n    } else {\n        pips = (pos.PriceOpen - pos.PriceCurrent) / 0.00001\n    }\n\n    fmt.Printf(\"  Pips:      %.1f\\n\", pips)\n\n    // Close position\n    fmt.Println(\"\\nClosing...\")\n    err = sugar.ClosePosition(ticket)\n    if err != nil {\n        return fmt.Errorf(\"close failed: %w\", err)\n    }\n\n    fmt.Println(\"\\n\u2705 Position closed successfully\")\n    fmt.Printf(\"   Final P/L: $%.2f (%.1f pips)\\n\", pos.Profit, pips)\n\n    return nil\n}\n\n// Usage:\nClosePositionWithAnalysis(sugar, 12345)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other close methods:</p> <ul> <li><code>ClosePositionPartial()</code> - Close only part of position</li> <li><code>CloseAllPositions()</code> - Close all positions at once</li> </ul> <p>\ud83c\udf6c Position info:</p> <ul> <li><code>GetPositionByTicket()</code> - Get position details before closing</li> <li><code>GetOpenPositions()</code> - List all positions</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#1-not-checking-if-position-exists","title":"1) Not checking if position exists","text":"<pre><code>// \u274c WRONG - blindly closing\nsugar.ClosePosition(12345) // Might not exist!\n\n// \u2705 CORRECT - check first\npos, err := sugar.GetPositionByTicket(12345)\nif err != nil {\n    fmt.Println(\"Position doesn't exist\")\n    return\n}\nsugar.ClosePosition(12345)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#2-ignoring-close-errors","title":"2) Ignoring close errors","text":"<pre><code>// \u274c WRONG - ignoring errors\nsugar.ClosePosition(ticket)\nfmt.Println(\"Closed!\") // Maybe not!\n\n// \u2705 CORRECT - handle errors\nerr := sugar.ClosePosition(ticket)\nif err != nil {\n    fmt.Printf(\"Failed: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#3-closing-during-high-spread","title":"3) Closing during high spread","text":"<pre><code>// \u274c WRONG - close regardless of spread\nsugar.ClosePosition(ticket)\n\n// \u2705 BETTER - check spread first\nspread, _ := sugar.GetSpread(\"EURUSD\")\nif spread &gt; 20 {\n    fmt.Printf(\"\u26a0\ufe0f  High spread: %.0f - wait for better conditions?\\n\", spread)\n}\n// Then decide whether to close\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePosition/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Check profit first - Know what you're closing</p> </li> <li> <p>Verify close - Check position no longer exists after</p> </li> <li> <p>Handle errors - Market might be closed, position might not exist</p> </li> <li> <p>Be patient - Sometimes close takes a few seconds to execute</p> </li> <li> <p>Consider spread - Closing during wide spread = worse exit price</p> </li> </ol> <p>See also: <code>ClosePositionPartial.md</code>, <code>CloseAllPositions.md</code>, <code>GetPositionByTicket.md</code></p>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/","title":"\ud83d\udd13 Close Position Partial (<code>ClosePositionPartial</code>)","text":"<p>Sugar method: Closes part of a position, leaving the rest open.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.ClosePositionPartial(ticket, volume)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Error if close failed</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) ClosePositionPartial(ticket uint64, volume float64) error\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>ticket</code> <code>uint64</code> Position ticket number <code>volume</code> <code>float64</code> Volume to close (must be less than position volume) Output Type Description <code>error</code> <code>error</code> <code>nil</code> if successful, error if failed"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Close part of position, keep rest running.</li> <li>Why you need it: Lock in partial profits while letting winners run.</li> <li>Sanity check: Volume must be less than position size. Position stays open with reduced volume.</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Scale out - Take partial profits at targets</p> <p>\u2705 Risk reduction - Close half, move SL to breakeven</p> <p>\u2705 Pyramid exit - Exit scaled positions gradually</p> <p>\u2705 Lock profits - Secure gains while staying in trade</p>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#1-basic-usage-close-half-position","title":"1) Basic usage - close half position","text":"<pre><code>ticket := uint64(12345)\n\n// Get current position\npos, _ := sugar.GetPositionByTicket(ticket)\nfmt.Printf(\"Position: %.2f lots\\n\", pos.Volume)\n\n// Close half\nhalfVolume := pos.Volume / 2\nerr := sugar.ClosePositionPartial(ticket, halfVolume)\nif err != nil {\n    fmt.Printf(\"Partial close failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Closed %.2f lots\\n\", halfVolume)\nfmt.Printf(\"   Remaining: %.2f lots\\n\", pos.Volume-halfVolume)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#2-take-profits-at-first-target","title":"2) Take profits at first target","text":"<pre><code>ticket := uint64(12345)\nfirstTargetProfit := 50.0 // $50\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\nalreadyScaled := false\n\nfor range ticker.C {\n    pos, _ := sugar.GetPositionByTicket(ticket)\n\n    if !alreadyScaled &amp;&amp; pos.Profit &gt;= firstTargetProfit {\n        fmt.Printf(\"\ud83c\udfaf First target reached: $%.2f\\n\", pos.Profit)\n\n        // Close 50% of position\n        halfVolume := pos.Volume / 2\n        err := sugar.ClosePositionPartial(ticket, halfVolume)\n        if err != nil {\n            fmt.Printf(\"Failed to scale out: %v\\n\", err)\n            continue\n        }\n\n        fmt.Printf(\"\u2705 Scaled out 50%% at $%.2f profit\\n\", pos.Profit)\n        fmt.Printf(\"   Remaining: %.2f lots\\n\", halfVolume)\n        alreadyScaled = true\n    }\n\n    fmt.Printf(\"Current P/L: $%.2f\\n\", pos.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#3-three-target-strategy","title":"3) Three-target strategy","text":"<pre><code>ticket := uint64(12345)\n\n// Close 1/3 at each target\ntargets := []float64{50.0, 100.0, 150.0}\nclosedTargets := 0\n\npos, _ := sugar.GetPositionByTicket(ticket)\noriginalVolume := pos.Volume\nvolumePerTarget := originalVolume / 3.0\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    pos, _ := sugar.GetPositionByTicket(ticket)\n\n    if closedTargets &lt; len(targets) &amp;&amp; pos.Profit &gt;= targets[closedTargets] {\n        targetNum := closedTargets + 1\n\n        fmt.Printf(\"\ud83c\udfaf Target %d reached: $%.2f\\n\", targetNum, pos.Profit)\n\n        err := sugar.ClosePositionPartial(ticket, volumePerTarget)\n        if err != nil {\n            fmt.Printf(\"Failed to close: %v\\n\", err)\n            continue\n        }\n\n        fmt.Printf(\"\u2705 Closed 1/3 at target %d\\n\", targetNum)\n        closedTargets++\n\n        if closedTargets == len(targets) {\n            fmt.Println(\"All targets hit - position fully closed\")\n            return\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#4-close-half-move-sl-to-breakeven","title":"4) Close half, move SL to breakeven","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\nfmt.Printf(\"Position #%d:\\n\", ticket)\nfmt.Printf(\"  Volume: %.2f\\n\", pos.Volume)\nfmt.Printf(\"  Entry:  %.5f\\n\", pos.PriceOpen)\nfmt.Printf(\"  Profit: $%.2f\\n\", pos.Profit)\n\n// Close half\nhalfVolume := pos.Volume / 2\nerr := sugar.ClosePositionPartial(ticket, halfVolume)\nif err != nil {\n    fmt.Printf(\"Partial close failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Closed half position (%.2f lots)\\n\", halfVolume)\n\n// Move SL to breakeven\nerr = sugar.ModifyPositionSLTP(ticket, pos.PriceOpen, pos.TakeProfit)\nif err != nil {\n    fmt.Printf(\"\u26a0\ufe0f  Failed to move SL: %v\\n\", err)\n} else {\n    fmt.Printf(\"\u2705 SL moved to breakeven: %.5f\\n\", pos.PriceOpen)\n}\n\nfmt.Println(\"\\n\ud83c\udfaf Now trading risk-free!\")\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#5-progressive-scaling-out","title":"5) Progressive scaling out","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\noriginalVolume := pos.Volume\n\n// Close 25% at each profit milestone\nmilestones := []float64{30.0, 60.0, 100.0}\nclosePercents := []float64{0.25, 0.33, 0.50} // 25%, 33%, 50% of remaining\n\nclosedMilestones := 0\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    pos, _ := sugar.GetPositionByTicket(ticket)\n\n    if closedMilestones &lt; len(milestones) &amp;&amp; pos.Profit &gt;= milestones[closedMilestones] {\n        percent := closePercents[closedMilestones]\n        closeVolume := pos.Volume * percent\n\n        fmt.Printf(\"\ud83c\udfaf Milestone %d: $%.2f\\n\", closedMilestones+1, pos.Profit)\n        fmt.Printf(\"   Closing %.0f%% (%.2f lots)\\n\", percent*100, closeVolume)\n\n        err := sugar.ClosePositionPartial(ticket, closeVolume)\n        if err != nil {\n            fmt.Printf(\"Failed: %v\\n\", err)\n            continue\n        }\n\n        closedMilestones++\n        newVolume := pos.Volume - closeVolume\n\n        fmt.Printf(\"\u2705 Scaled out - remaining: %.2f lots (%.0f%% of original)\\n\",\n            newVolume, (newVolume/originalVolume)*100)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#6-partial-close-on-pip-target","title":"6) Partial close on pip target","text":"<pre><code>ticket := uint64(12345)\ntargetPips := 50.0\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\nticker := time.NewTicker(3 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    pos, _ := sugar.GetPositionByTicket(ticket)\n\n    var currentPips float64\n    if pos.Type == \"BUY\" {\n        currentPips = (pos.PriceCurrent - pos.PriceOpen) / 0.00001\n    } else {\n        currentPips = (pos.PriceOpen - pos.PriceCurrent) / 0.00001\n    }\n\n    fmt.Printf(\"Current: %.1f pips\\n\", currentPips)\n\n    if currentPips &gt;= targetPips {\n        fmt.Printf(\"\ud83c\udfaf Target reached: %.1f pips\\n\", currentPips)\n\n        // Close 2/3 of position\n        closeVolume := pos.Volume * 0.66\n        err := sugar.ClosePositionPartial(ticket, closeVolume)\n        if err != nil {\n            fmt.Printf(\"Failed: %v\\n\", err)\n            continue\n        }\n\n        fmt.Printf(\"\u2705 Closed 66%% at %.1f pips\\n\", currentPips)\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#7-reduce-risk-on-drawdown","title":"7) Reduce risk on drawdown","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\noriginalVolume := pos.Volume\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    pos, _ := sugar.GetPositionByTicket(ticket)\n\n    // If losing more than $30, reduce position size\n    if pos.Profit &lt; -30.0 &amp;&amp; pos.Volume == originalVolume {\n        // Close 50% to reduce risk\n        closeVolume := pos.Volume / 2\n\n        fmt.Printf(\"\u26a0\ufe0f  Drawdown: $%.2f - reducing position\\n\", pos.Profit)\n\n        err := sugar.ClosePositionPartial(ticket, closeVolume)\n        if err != nil {\n            fmt.Printf(\"Failed to reduce: %v\\n\", err)\n            continue\n        }\n\n        fmt.Printf(\"\u2705 Reduced position by 50%%\\n\")\n        fmt.Printf(\"   New size: %.2f lots\\n\", pos.Volume-closeVolume)\n    }\n\n    fmt.Printf(\"P/L: $%.2f, Volume: %.2f\\n\", pos.Profit, pos.Volume)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#8-close-specific-lot-amount","title":"8) Close specific lot amount","text":"<pre><code>ticket := uint64(12345)\nlotsToClose := 0.05 // Close exactly 0.05 lots\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\nfmt.Printf(\"Position: %.2f lots\\n\", pos.Volume)\n\nif lotsToClose &gt;= pos.Volume {\n    fmt.Printf(\"\u274c Cannot close %.2f - only %.2f available\\n\", lotsToClose, pos.Volume)\n    return\n}\n\nerr := sugar.ClosePositionPartial(ticket, lotsToClose)\nif err != nil {\n    fmt.Printf(\"Close failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Closed %.2f lots\\n\", lotsToClose)\nfmt.Printf(\"   Remaining: %.2f lots\\n\", pos.Volume-lotsToClose)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#9-trailing-partial-close","title":"9) Trailing partial close","text":"<pre><code>ticket := uint64(12345)\nhighestProfit := 0.0\npartialClosed := false\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    pos, _ := sugar.GetPositionByTicket(ticket)\n\n    if pos.Profit &gt; highestProfit {\n        highestProfit = pos.Profit\n    }\n\n    // If profit drops 30% from highest, close half\n    profitDrop := highestProfit - pos.Profit\n    dropPercent := (profitDrop / highestProfit) * 100\n\n    fmt.Printf(\"Profit: $%.2f (High: $%.2f, Drop: %.1f%%)\\n\",\n        pos.Profit, highestProfit, dropPercent)\n\n    if !partialClosed &amp;&amp; dropPercent &gt;= 30.0 &amp;&amp; highestProfit &gt; 50.0 {\n        fmt.Printf(\"\u26a0\ufe0f  Profit dropped 30%% from peak - scaling out\\n\")\n\n        halfVolume := pos.Volume / 2\n        err := sugar.ClosePositionPartial(ticket, halfVolume)\n        if err != nil {\n            fmt.Printf(\"Failed: %v\\n\", err)\n            continue\n        }\n\n        fmt.Printf(\"\u2705 Closed half position at $%.2f\\n\", pos.Profit)\n        partialClosed = true\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#10-advanced-partial-close-function","title":"10) Advanced partial close function","text":"<pre><code>func ScaleOutPosition(\n    sugar *mt5.MT5Sugar,\n    ticket uint64,\n    closePercent float64,\n    reason string,\n) error {\n    pos, err := sugar.GetPositionByTicket(ticket)\n    if err != nil {\n        return fmt.Errorf(\"position not found: %w\", err)\n    }\n\n    closeVolume := pos.Volume * (closePercent / 100.0)\n\n    // Validate close volume\n    if closeVolume &gt;= pos.Volume {\n        return fmt.Errorf(\"close volume %.2f &gt;= position volume %.2f\",\n            closeVolume, pos.Volume)\n    }\n\n    if closeVolume &lt; 0.01 {\n        return fmt.Errorf(\"close volume too small: %.2f\", closeVolume)\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      PARTIAL CLOSE                    \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Reason:    %s\\n\", reason)\n    fmt.Printf(\"Position:  #%d\\n\", ticket)\n    fmt.Printf(\"Current:   %.2f lots\\n\", pos.Volume)\n    fmt.Printf(\"Closing:   %.2f lots (%.0f%%)\\n\", closeVolume, closePercent)\n    fmt.Printf(\"Remaining: %.2f lots\\n\\n\", pos.Volume-closeVolume)\n\n    err = sugar.ClosePositionPartial(ticket, closeVolume)\n    if err != nil {\n        return fmt.Errorf(\"partial close failed: %w\", err)\n    }\n\n    fmt.Println(\"\u2705 Partial close successful\")\n    return nil\n}\n\n// Usage:\nScaleOutPosition(sugar, 12345, 50.0, \"First profit target reached\")\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other close methods:</p> <ul> <li><code>ClosePosition()</code> - Close entire position</li> <li><code>CloseAllPositions()</code> - Close all positions</li> </ul> <p>\ud83c\udf6c Position management:</p> <ul> <li><code>ModifyPositionSLTP()</code> - Adjust SL/TP after partial close</li> <li><code>GetPositionByTicket()</code> - Check remaining volume</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#1-closing-more-than-position-size","title":"1) Closing more than position size","text":"<pre><code>// \u274c WRONG - trying to close more than available\npos, _ := sugar.GetPositionByTicket(ticket)\nsugar.ClosePositionPartial(ticket, pos.Volume+0.1) // Will fail!\n\n// \u2705 CORRECT - validate first\nif closeVolume &gt;= pos.Volume {\n    fmt.Println(\"Cannot close more than position size\")\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#2-not-updating-sl-after-partial-close","title":"2) Not updating SL after partial close","text":"<pre><code>// \u274c WRONG - SL stays same after reducing position\nsugar.ClosePositionPartial(ticket, halfVolume)\n// Risk is now different but SL unchanged!\n\n// \u2705 CORRECT - adjust SL for new position size\nsugar.ClosePositionPartial(ticket, halfVolume)\nsugar.ModifyPositionSLTP(ticket, newSL, tp)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#3-forgetting-minimum-volume-requirements","title":"3) Forgetting minimum volume requirements","text":"<pre><code>// \u274c WRONG - might be below broker minimum\nsugar.ClosePositionPartial(ticket, 0.001) // Too small!\n\n// \u2705 CORRECT - check minimum volume (usually 0.01)\nif closeVolume &lt; 0.01 {\n    fmt.Println(\"Volume too small\")\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ClosePositionPartial/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Scale out gradually - Don't close too much at once</p> </li> <li> <p>Move SL to breakeven - After taking partial profits</p> </li> <li> <p>Let winners run - Keep part of position for big moves</p> </li> <li> <p>3-target strategy - Close 1/3 at each profit level</p> </li> <li> <p>Check minimum volume - Ensure remaining position meets broker minimums</p> </li> </ol> <p>See also: <code>ClosePosition.md</code>, <code>ModifyPositionSLTP.md</code>, <code>GetPositionByTicket.md</code></p>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/","title":"\ud83d\udccb Get Open Positions (<code>GetOpenPositions</code>)","text":"<p>Sugar method: Retrieves all currently open positions across all symbols.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetOpenPositions()</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Slice of <code>*PositionInfo</code> structures</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetOpenPositions() ([]*PositionInfo, error)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters required Output Type Description <code>[]*PositionInfo</code> slice All open positions <code>error</code> <code>error</code> Error if retrieval failed"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get complete list of all open positions.</li> <li>Why you need it: Dashboard, P/L tracking, risk monitoring, batch operations.</li> <li>Sanity check: Returns empty slice if no positions. Never returns nil.</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Dashboard - Show all active trades</p> <p>\u2705 Total P/L - Calculate combined profit/loss</p> <p>\u2705 Risk check - See total exposure</p> <p>\u2705 Batch operations - Close/modify multiple positions</p>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#1-basic-usage-list-all-positions","title":"1) Basic usage - list all positions","text":"<pre><code>positions, err := sugar.GetOpenPositions()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif len(positions) == 0 {\n    fmt.Println(\"No open positions\")\n    return\n}\n\nfmt.Printf(\"Open positions: %d\\n\\n\", len(positions))\n\nfor _, pos := range positions {\n    fmt.Printf(\"#%d: %s %s %.2f lots - $%.2f\\n\",\n        pos.Ticket, pos.Symbol, pos.Type, pos.Volume, pos.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#2-calculate-total-pl","title":"2) Calculate total P/L","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\nif len(positions) == 0 {\n    fmt.Println(\"No positions\")\n    return\n}\n\ntotalProfit := 0.0\ntotalCommission := 0.0\ntotalSwap := 0.0\n\nfor _, pos := range positions {\n    totalProfit += pos.Profit\n    totalCommission += pos.Commission\n    totalSwap += pos.Swap\n}\n\nnetProfit := totalProfit + totalCommission + totalSwap\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551       TOTAL P/L SUMMARY               \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Positions:   %d\\n\", len(positions))\nfmt.Printf(\"Profit:      $%.2f\\n\", totalProfit)\nfmt.Printf(\"Commission:  $%.2f\\n\", totalCommission)\nfmt.Printf(\"Swap:        $%.2f\\n\", totalSwap)\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Net P/L:     $%.2f\\n\", netProfit)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#3-group-by-symbol","title":"3) Group by symbol","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\n// Group positions by symbol\nsymbolMap := make(map[string][]*PositionInfo)\n\nfor _, pos := range positions {\n    symbolMap[pos.Symbol] = append(symbolMap[pos.Symbol], pos)\n}\n\nfmt.Println(\"Positions by symbol:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor symbol, posList := range symbolMap {\n    totalVolume := 0.0\n    totalProfit := 0.0\n\n    for _, pos := range posList {\n        totalVolume += pos.Volume\n        totalProfit += pos.Profit\n    }\n\n    fmt.Printf(\"%-8s: %d positions, %.2f lots, $%.2f\\n\",\n        symbol, len(posList), totalVolume, totalProfit)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#4-count-buy-vs-sell","title":"4) Count BUY vs SELL","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\nbuyCount := 0\nsellCount := 0\nbuyProfit := 0.0\nsellProfit := 0.0\n\nfor _, pos := range positions {\n    if pos.Type == \"BUY\" {\n        buyCount++\n        buyProfit += pos.Profit\n    } else {\n        sellCount++\n        sellProfit += pos.Profit\n    }\n}\n\nfmt.Println(\"Position breakdown:\")\nfmt.Printf(\"  BUY:  %d positions ($%.2f)\\n\", buyCount, buyProfit)\nfmt.Printf(\"  SELL: %d positions ($%.2f)\\n\", sellCount, sellProfit)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#5-find-largest-winninglosing-position","title":"5) Find largest winning/losing position","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\nif len(positions) == 0 {\n    fmt.Println(\"No positions\")\n    return\n}\n\nvar largestWin, largestLoss *PositionInfo\n\nfor _, pos := range positions {\n    if pos.Profit &gt; 0 {\n        if largestWin == nil || pos.Profit &gt; largestWin.Profit {\n            largestWin = pos\n        }\n    } else {\n        if largestLoss == nil || pos.Profit &lt; largestLoss.Profit {\n            largestLoss = pos\n        }\n    }\n}\n\nif largestWin != nil {\n    fmt.Printf(\"\ud83c\udfc6 Largest winner: #%d %s - $%.2f\\n\",\n        largestWin.Ticket, largestWin.Symbol, largestWin.Profit)\n}\n\nif largestLoss != nil {\n    fmt.Printf(\"\ud83d\udcc9 Largest loser: #%d %s - $%.2f\\n\",\n        largestLoss.Ticket, largestLoss.Symbol, largestLoss.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#6-positions-without-sltp","title":"6) Positions without SL/TP","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\nunprotected := []*PositionInfo{}\n\nfor _, pos := range positions {\n    if pos.StopLoss == 0 || pos.TakeProfit == 0 {\n        unprotected = append(unprotected, pos)\n    }\n}\n\nif len(unprotected) &gt; 0 {\n    fmt.Printf(\"\u26a0\ufe0f  %d positions without full protection:\\n\", len(unprotected))\n    for _, pos := range unprotected {\n        fmt.Printf(\"  #%d %s: \", pos.Ticket, pos.Symbol)\n        if pos.StopLoss == 0 {\n            fmt.Print(\"No SL \")\n        }\n        if pos.TakeProfit == 0 {\n            fmt.Print(\"No TP\")\n        }\n        fmt.Println()\n    }\n} else {\n    fmt.Println(\"\u2705 All positions have SL and TP\")\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#7-real-time-dashboard","title":"7) Real-time dashboard","text":"<pre><code>func PositionsDashboard(sugar *mt5.MT5Sugar) {\n    ticker := time.NewTicker(3 * time.Second)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        positions, _ := sugar.GetOpenPositions()\n\n        // Clear screen\n        fmt.Print(\"\\033[H\\033[2J\")\n\n        fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n        fmt.Println(\"\u2551                    POSITIONS DASHBOARD                        \u2551\")\n        fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n        fmt.Printf(\"Updated: %s\\n\\n\", time.Now().Format(\"15:04:05\"))\n\n        if len(positions) == 0 {\n            fmt.Println(\"No open positions\")\n            continue\n        }\n\n        fmt.Printf(\"%-8s %-8s %-6s %-10s %-10s %-10s\\n\",\n            \"Ticket\", \"Symbol\", \"Type\", \"Lots\", \"Entry\", \"P/L\")\n        fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n        totalPL := 0.0\n        for _, pos := range positions {\n            fmt.Printf(\"%-8d %-8s %-6s %-10.2f %-10.5f %-10.2f\\n\",\n                pos.Ticket, pos.Symbol, pos.Type,\n                pos.Volume, pos.PriceOpen, pos.Profit)\n            totalPL += pos.Profit\n        }\n\n        fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n        fmt.Printf(\"Total positions: %d | Total P/L: $%.2f\\n\", len(positions), totalPL)\n    }\n}\n\n// Usage:\nPositionsDashboard(sugar)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#8-calculate-total-risk","title":"8) Calculate total risk","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\ntotalRisk := 0.0\n\nfor _, pos := range positions {\n    if pos.StopLoss &gt; 0 {\n        // Calculate potential loss if SL hit\n        var riskPips float64\n        if pos.Type == \"BUY\" {\n            riskPips = (pos.PriceOpen - pos.StopLoss) / 0.00001\n        } else {\n            riskPips = (pos.StopLoss - pos.PriceOpen) / 0.00001\n        }\n\n        // Estimate risk in dollars (simplified)\n        info, _ := sugar.GetSymbolInfo(pos.Symbol)\n        riskPerLot := riskPips * info.Point * info.ContractSize\n        positionRisk := riskPerLot * pos.Volume\n\n        totalRisk += positionRisk\n    }\n}\n\nbalance, _ := sugar.GetBalance()\nriskPercent := (totalRisk / balance) * 100\n\nfmt.Printf(\"Total account risk:\\n\")\nfmt.Printf(\"  Balance:     $%.2f\\n\", balance)\nfmt.Printf(\"  Total risk:  $%.2f\\n\", totalRisk)\nfmt.Printf(\"  Risk %%:      %.2f%%\\n\", riskPercent)\n\nif riskPercent &gt; 10 {\n    fmt.Println(\"  \u26a0\ufe0f  Risk over 10%!\")\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#9-export-positions-to-csv-format","title":"9) Export positions to CSV format","text":"<pre><code>positions, _ := sugar.GetOpenPositions()\n\nif len(positions) == 0 {\n    fmt.Println(\"No positions to export\")\n    return\n}\n\nfmt.Println(\"Ticket,Symbol,Type,Volume,Entry,Current,SL,TP,Profit\")\n\nfor _, pos := range positions {\n    fmt.Printf(\"%d,%s,%s,%.2f,%.5f,%.5f,%.5f,%.5f,%.2f\\n\",\n        pos.Ticket, pos.Symbol, pos.Type, pos.Volume,\n        pos.PriceOpen, pos.PriceCurrent,\n        pos.StopLoss, pos.TakeProfit, pos.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#10-advanced-position-analysis","title":"10) Advanced position analysis","text":"<pre><code>func AnalyzePositions(sugar *mt5.MT5Sugar) {\n    positions, _ := sugar.GetOpenPositions()\n\n    if len(positions) == 0 {\n        fmt.Println(\"No positions to analyze\")\n        return\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      POSITION ANALYSIS                \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Statistics\n    totalPositions := len(positions)\n    totalVolume := 0.0\n    totalProfit := 0.0\n    winningCount := 0\n    losingCount := 0\n    oldestTime := positions[0].TimeOpen\n\n    for _, pos := range positions {\n        totalVolume += pos.Volume\n        totalProfit += pos.Profit\n\n        if pos.Profit &gt; 0 {\n            winningCount++\n        } else if pos.Profit &lt; 0 {\n            losingCount++\n        }\n\n        if pos.TimeOpen.Before(oldestTime) {\n            oldestTime = pos.TimeOpen\n        }\n    }\n\n    winRate := 0.0\n    if totalPositions &gt; 0 {\n        winRate = (float64(winningCount) / float64(totalPositions)) * 100\n    }\n\n    avgProfit := totalProfit / float64(totalPositions)\n\n    fmt.Printf(\"Total positions: %d\\n\", totalPositions)\n    fmt.Printf(\"Total volume:    %.2f lots\\n\", totalVolume)\n    fmt.Printf(\"Total P/L:       $%.2f\\n\", totalProfit)\n    fmt.Printf(\"Avg P/L:         $%.2f\\n\", avgProfit)\n    fmt.Println()\n    fmt.Printf(\"Winning:         %d (%.1f%%)\\n\", winningCount, winRate)\n    fmt.Printf(\"Losing:          %d\\n\", losingCount)\n    fmt.Printf(\"Breakeven:       %d\\n\", totalPositions-winningCount-losingCount)\n    fmt.Println()\n    fmt.Printf(\"Oldest position: %v ago\\n\",\n        time.Since(oldestTime).Round(time.Minute))\n\n    // Symbol exposure\n    symbolCount := make(map[string]int)\n    for _, pos := range positions {\n        symbolCount[pos.Symbol]++\n    }\n\n    fmt.Println(\"\\nSymbol exposure:\")\n    for symbol, count := range symbolCount {\n        percent := (float64(count) / float64(totalPositions)) * 100\n        fmt.Printf(\"  %-8s: %d (%.1f%%)\\n\", symbol, count, percent)\n    }\n}\n\n// Usage:\nAnalyzePositions(sugar)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Related position info:</p> <ul> <li><code>GetPositionByTicket()</code> - Get specific position</li> <li><code>GetPositionsBySymbol()</code> - Filter by symbol</li> </ul> <p>\ud83c\udf6c Batch operations:</p> <ul> <li><code>CloseAllPositions()</code> - Close all positions</li> <li><code>GetProfit()</code> - Total P/L (faster than summing manually)</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#1-not-checking-for-empty-slice","title":"1) Not checking for empty slice","text":"<pre><code>// \u274c WRONG - assuming positions exist\npositions, _ := sugar.GetOpenPositions()\nfirstPos := positions[0] // Might panic!\n\n// \u2705 CORRECT - check length\npositions, _ := sugar.GetOpenPositions()\nif len(positions) &gt; 0 {\n    firstPos := positions[0]\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#2-modifying-while-iterating","title":"2) Modifying while iterating","text":"<pre><code>// \u274c WRONG - modifying positions during iteration\nfor _, pos := range positions {\n    sugar.ClosePosition(pos.Ticket) // Slice changes during loop!\n}\n\n// \u2705 CORRECT - collect tickets first\ntickets := []uint64{}\nfor _, pos := range positions {\n    tickets = append(tickets, pos.Ticket)\n}\nfor _, ticket := range tickets {\n    sugar.ClosePosition(ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#3-not-handling-errors","title":"3) Not handling errors","text":"<pre><code>// \u274c WRONG - ignoring errors\npositions, _ := sugar.GetOpenPositions()\n\n// \u2705 CORRECT - check errors\npositions, err := sugar.GetOpenPositions()\nif err != nil {\n    fmt.Printf(\"Failed to get positions: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetOpenPositions/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Cache results - Don't call repeatedly in tight loops</p> </li> <li> <p>Filter efficiently - Use GetPositionsBySymbol() for specific symbols</p> </li> <li> <p>Check length - Always verify slice isn't empty</p> </li> <li> <p>Real-time updates - Refresh every 2-5 seconds for dashboards</p> </li> <li> <p>Batch operations - Collect tickets before modifying/closing</p> </li> </ol> <p>See also: <code>GetPositionByTicket.md</code>, <code>GetPositionsBySymbol.md</code>, <code>CloseAllPositions.md</code></p>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/","title":"\ud83d\udd0d Get Position By Ticket (<code>GetPositionByTicket</code>)","text":"<p>Sugar method: Retrieves detailed information about a specific position by ticket number.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetPositionByTicket(ticket)</code></li> <li>Timeout: 3 seconds</li> <li>Returns: <code>*PositionInfo</code> structure</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetPositionByTicket(ticket uint64) (*PositionInfo, error)\n\n// PositionInfo structure\ntype PositionInfo struct {\n    Ticket        uint64    // Position ticket\n    Symbol        string    // Trading symbol\n    Type          string    // \"BUY\" or \"SELL\"\n    Volume        float64   // Position volume (lots)\n    PriceOpen     float64   // Entry price\n    PriceCurrent  float64   // Current price\n    StopLoss      float64   // Stop Loss price (0 if none)\n    TakeProfit    float64   // Take Profit price (0 if none)\n    Profit        float64   // Current profit/loss ($)\n    Commission    float64   // Commission paid ($)\n    Swap          float64   // Swap/rollover ($)\n    TimeOpen      time.Time // Time position was opened\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>ticket</code> <code>uint64</code> Position ticket number Output Type Description <code>*PositionInfo</code> struct Position details <code>error</code> <code>error</code> Error if position not found"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get all information about a specific position.</li> <li>Why you need it: Check profit, check if still open, get entry price, check SL/TP.</li> <li>Sanity check: Returns error if position doesn't exist (closed or never existed).</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Check profit - Monitor specific position P/L</p> <p>\u2705 Verify existence - Check if position still open</p> <p>\u2705 Get details - Before modifying or closing</p> <p>\u2705 Track position - Monitor progress of specific trade</p>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#1-basic-usage-get-position-details","title":"1) Basic usage - get position details","text":"<pre><code>ticket := uint64(12345)\n\npos, err := sugar.GetPositionByTicket(ticket)\nif err != nil {\n    fmt.Printf(\"Position not found: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Position #%d:\\n\", pos.Ticket)\nfmt.Printf(\"  Symbol:   %s\\n\", pos.Symbol)\nfmt.Printf(\"  Type:     %s\\n\", pos.Type)\nfmt.Printf(\"  Volume:   %.2f lots\\n\", pos.Volume)\nfmt.Printf(\"  Entry:    %.5f\\n\", pos.PriceOpen)\nfmt.Printf(\"  Current:  %.5f\\n\", pos.PriceCurrent)\nfmt.Printf(\"  SL:       %.5f\\n\", pos.StopLoss)\nfmt.Printf(\"  TP:       %.5f\\n\", pos.TakeProfit)\nfmt.Printf(\"  Profit:   $%.2f\\n\", pos.Profit)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#2-check-if-position-still-exists","title":"2) Check if position still exists","text":"<pre><code>ticket := uint64(12345)\n\n_, err := sugar.GetPositionByTicket(ticket)\nif err != nil {\n    fmt.Printf(\"\u274c Position #%d no longer exists (closed or SL/TP hit)\\n\", ticket)\n    return\n}\n\nfmt.Printf(\"\u2705 Position #%d is still open\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#3-monitor-position-until-target","title":"3) Monitor position until target","text":"<pre><code>ticket := uint64(12345)\ntargetProfit := 100.0\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\nfmt.Printf(\"Monitoring position #%d until $%.2f profit\\n\", ticket, targetProfit)\n\nfor range ticker.C {\n    pos, err := sugar.GetPositionByTicket(ticket)\n    if err != nil {\n        fmt.Println(\"Position closed\")\n        return\n    }\n\n    fmt.Printf(\"Profit: $%.2f / $%.2f (%.1f%%)\\n\",\n        pos.Profit, targetProfit, (pos.Profit/targetProfit)*100)\n\n    if pos.Profit &gt;= targetProfit {\n        fmt.Printf(\"\ud83c\udfaf Target reached! Final profit: $%.2f\\n\", pos.Profit)\n        return\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#4-calculate-pips-profit","title":"4) Calculate pips profit","text":"<pre><code>ticket := uint64(12345)\n\npos, err := sugar.GetPositionByTicket(ticket)\nif err != nil {\n    fmt.Printf(\"Position not found: %v\\n\", err)\n    return\n}\n\n// Calculate pips\nvar pips float64\nif pos.Type == \"BUY\" {\n    pips = (pos.PriceCurrent - pos.PriceOpen) / 0.00001\n} else {\n    pips = (pos.PriceOpen - pos.PriceCurrent) / 0.00001\n}\n\nfmt.Printf(\"Position #%d:\\n\", pos.Ticket)\nfmt.Printf(\"  Type:        %s\\n\", pos.Type)\nfmt.Printf(\"  Entry:       %.5f\\n\", pos.PriceOpen)\nfmt.Printf(\"  Current:     %.5f\\n\", pos.PriceCurrent)\nfmt.Printf(\"  Pips:        %.1f\\n\", pips)\nfmt.Printf(\"  Dollar P/L:  $%.2f\\n\", pos.Profit)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#5-check-time-in-trade","title":"5) Check time in trade","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\nduration := time.Since(pos.TimeOpen)\n\nfmt.Printf(\"Position #%d opened at %s\\n\",\n    pos.Ticket, pos.TimeOpen.Format(\"2006-01-02 15:04:05\"))\nfmt.Printf(\"Time in trade: %v\\n\", duration.Round(time.Minute))\nfmt.Printf(\"Current P/L: $%.2f\\n\", pos.Profit)\n\nif duration &gt; 24*time.Hour {\n    fmt.Println(\"\u26a0\ufe0f  Position open for more than 24 hours\")\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#6-verify-sltp-are-set","title":"6) Verify SL/TP are set","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\nfmt.Printf(\"Position #%d protection check:\\n\", pos.Ticket)\n\nif pos.StopLoss == 0 {\n    fmt.Println(\"  \u274c No Stop Loss - DANGEROUS!\")\n} else {\n    fmt.Printf(\"  \u2705 Stop Loss: %.5f\\n\", pos.StopLoss)\n}\n\nif pos.TakeProfit == 0 {\n    fmt.Println(\"  \u26a0\ufe0f  No Take Profit\")\n} else {\n    fmt.Printf(\"  \u2705 Take Profit: %.5f\\n\", pos.TakeProfit)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#7-display-position-summary","title":"7) Display position summary","text":"<pre><code>func ShowPositionSummary(sugar *mt5.MT5Sugar, ticket uint64) {\n    pos, err := sugar.GetPositionByTicket(ticket)\n    if err != nil {\n        fmt.Printf(\"Position #%d not found\\n\", ticket)\n        return\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551       POSITION SUMMARY                \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Ticket:      #%d\\n\", pos.Ticket)\n    fmt.Printf(\"Symbol:      %s\\n\", pos.Symbol)\n    fmt.Printf(\"Type:        %s\\n\", pos.Type)\n    fmt.Printf(\"Volume:      %.2f lots\\n\", pos.Volume)\n    fmt.Println()\n    fmt.Printf(\"Entry:       %.5f\\n\", pos.PriceOpen)\n    fmt.Printf(\"Current:     %.5f\\n\", pos.PriceCurrent)\n    fmt.Printf(\"Stop Loss:   %.5f\\n\", pos.StopLoss)\n    fmt.Printf(\"Take Profit: %.5f\\n\", pos.TakeProfit)\n    fmt.Println()\n\n    // Calculate pips\n    var pips float64\n    if pos.Type == \"BUY\" {\n        pips = (pos.PriceCurrent - pos.PriceOpen) / 0.00001\n    } else {\n        pips = (pos.PriceOpen - pos.PriceCurrent) / 0.00001\n    }\n\n    fmt.Printf(\"Pips:        %.1f\\n\", pips)\n    fmt.Printf(\"Profit:      $%.2f\\n\", pos.Profit)\n    fmt.Printf(\"Commission:  $%.2f\\n\", pos.Commission)\n    fmt.Printf(\"Swap:        $%.2f\\n\", pos.Swap)\n    fmt.Printf(\"Net:         $%.2f\\n\", pos.Profit+pos.Commission+pos.Swap)\n    fmt.Println()\n    fmt.Printf(\"Opened:      %s\\n\", pos.TimeOpen.Format(\"2006-01-02 15:04:05\"))\n    fmt.Printf(\"Duration:    %v\\n\", time.Since(pos.TimeOpen).Round(time.Minute))\n}\n\n// Usage:\nShowPositionSummary(sugar, 12345)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#8-distance-to-sltp","title":"8) Distance to SL/TP","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\ninfo, _ := sugar.GetSymbolInfo(pos.Symbol)\n\nfmt.Printf(\"Position #%d distances:\\n\", pos.Ticket)\n\nif pos.StopLoss &gt; 0 {\n    var slDistance float64\n    if pos.Type == \"BUY\" {\n        slDistance = (pos.PriceCurrent - pos.StopLoss) / info.Point\n    } else {\n        slDistance = (pos.StopLoss - pos.PriceCurrent) / info.Point\n    }\n    fmt.Printf(\"  Distance to SL: %.0f pips\\n\", slDistance)\n}\n\nif pos.TakeProfit &gt; 0 {\n    var tpDistance float64\n    if pos.Type == \"BUY\" {\n        tpDistance = (pos.TakeProfit - pos.PriceCurrent) / info.Point\n    } else {\n        tpDistance = (pos.PriceCurrent - pos.TakeProfit) / info.Point\n    }\n    fmt.Printf(\"  Distance to TP: %.0f pips\\n\", tpDistance)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#9-position-riskreward-ratio","title":"9) Position risk/reward ratio","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\nif pos.StopLoss &gt; 0 &amp;&amp; pos.TakeProfit &gt; 0 {\n    var riskPips, rewardPips float64\n\n    if pos.Type == \"BUY\" {\n        riskPips = (pos.PriceOpen - pos.StopLoss) / 0.00001\n        rewardPips = (pos.TakeProfit - pos.PriceOpen) / 0.00001\n    } else {\n        riskPips = (pos.StopLoss - pos.PriceOpen) / 0.00001\n        rewardPips = (pos.PriceOpen - pos.TakeProfit) / 0.00001\n    }\n\n    rr := rewardPips / riskPips\n\n    fmt.Printf(\"Position #%d Risk/Reward:\\n\", pos.Ticket)\n    fmt.Printf(\"  Risk:   %.0f pips\\n\", riskPips)\n    fmt.Printf(\"  Reward: %.0f pips\\n\", rewardPips)\n    fmt.Printf(\"  R:R:    1:%.1f\\n\", rr)\n\n    if rr &lt; 2.0 {\n        fmt.Println(\"  \u26a0\ufe0f  R:R less than 1:2\")\n    } else {\n        fmt.Println(\"  \u2705 Good R:R ratio\")\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#10-advanced-position-monitor","title":"10) Advanced position monitor","text":"<pre><code>func MonitorPosition(sugar *mt5.MT5Sugar, ticket uint64, duration time.Duration) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551       POSITION MONITOR                \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    ticker := time.NewTicker(10 * time.Second)\n    defer ticker.Stop()\n\n    timeout := time.After(duration)\n\n    highestProfit := 0.0\n    lowestProfit := 0.0\n\n    for {\n        select {\n        case &lt;-timeout:\n            fmt.Println(\"\\n\u23f0 Monitoring ended\")\n            return\n\n        case &lt;-ticker.C:\n            pos, err := sugar.GetPositionByTicket(ticket)\n            if err != nil {\n                fmt.Println(\"\\n\u274c Position closed\")\n                return\n            }\n\n            // Track high/low\n            if pos.Profit &gt; highestProfit {\n                highestProfit = pos.Profit\n            }\n            if pos.Profit &lt; lowestProfit {\n                lowestProfit = pos.Profit\n            }\n\n            // Calculate pips\n            var pips float64\n            if pos.Type == \"BUY\" {\n                pips = (pos.PriceCurrent - pos.PriceOpen) / 0.00001\n            } else {\n                pips = (pos.PriceOpen - pos.PriceCurrent) / 0.00001\n            }\n\n            // Display update\n            fmt.Printf(\"[%s] \", time.Now().Format(\"15:04:05\"))\n            fmt.Printf(\"%.5f | \", pos.PriceCurrent)\n            fmt.Printf(\"%.1f pips | \", pips)\n            fmt.Printf(\"$%.2f \", pos.Profit)\n\n            if pos.Profit &gt; 0 {\n                fmt.Printf(\"\ud83d\udcc8\")\n            } else {\n                fmt.Printf(\"\ud83d\udcc9\")\n            }\n\n            fmt.Printf(\" (High: $%.2f, Low: $%.2f)\\n\", highestProfit, lowestProfit)\n        }\n    }\n}\n\n// Usage: Monitor for 30 minutes\nMonitorPosition(sugar, 12345, 30*time.Minute)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other position info:</p> <ul> <li><code>GetOpenPositions()</code> - Get all positions</li> <li><code>GetPositionsBySymbol()</code> - Get positions for specific symbol</li> </ul> <p>\ud83c\udf6c Position management:</p> <ul> <li><code>ModifyPositionSLTP()</code> - Modify position after getting info</li> <li><code>ClosePosition()</code> - Close position</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#1-not-checking-for-errors","title":"1) Not checking for errors","text":"<pre><code>// \u274c WRONG - position might not exist\npos, _ := sugar.GetPositionByTicket(ticket)\nfmt.Printf(\"Profit: $%.2f\\n\", pos.Profit) // Might panic!\n\n// \u2705 CORRECT - check error\npos, err := sugar.GetPositionByTicket(ticket)\nif err != nil {\n    fmt.Println(\"Position not found\")\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#2-using-wrong-ticket-number","title":"2) Using wrong ticket number","text":"<pre><code>// \u274c WRONG - using position from hours ago\noldTicket := uint64(12345)\npos, _ := sugar.GetPositionByTicket(oldTicket) // Might be closed!\n\n// \u2705 CORRECT - use fresh ticket from recent open\nticket, _ := sugar.BuyMarket(\"EURUSD\", 0.1)\npos, _ := sugar.GetPositionByTicket(ticket)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#3-assuming-price-direction","title":"3) Assuming price direction","text":"<pre><code>// \u274c WRONG - assuming BUY\npips := (pos.PriceCurrent - pos.PriceOpen) / 0.00001\n\n// \u2705 CORRECT - check position type\nvar pips float64\nif pos.Type == \"BUY\" {\n    pips = (pos.PriceCurrent - pos.PriceOpen) / 0.00001\n} else {\n    pips = (pos.PriceOpen - pos.PriceCurrent) / 0.00001\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionByTicket/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Check errors - Position might be closed</p> </li> <li> <p>Cache ticket - Store ticket when opening position</p> </li> <li> <p>Type checking - Always check BUY vs SELL for calculations</p> </li> <li> <p>Monitor changes - Compare values over time</p> </li> <li> <p>Use for decisions - Check profit before modifying/closing</p> </li> </ol> <p>See also: <code>GetOpenPositions.md</code>, <code>ModifyPositionSLTP.md</code>, <code>ClosePosition.md</code></p>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/","title":"\ud83c\udfaf Get Positions By Symbol (<code>GetPositionsBySymbol</code>)","text":"<p>Sugar method: Retrieves all open positions for a specific trading symbol.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetPositionsBySymbol(symbol)</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Slice of <code>*PositionInfo</code> structures</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetPositionsBySymbol(symbol string) ([]*PositionInfo, error)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") Output Type Description <code>[]*PositionInfo</code> slice Positions for specified symbol <code>error</code> <code>error</code> Error if retrieval failed"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Filter open positions to show only one symbol.</li> <li>Why you need it: Symbol-specific operations, hedging, symbol P/L tracking.</li> <li>Sanity check: Returns empty slice if no positions for that symbol.</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Symbol analysis - Check exposure on specific pair</p> <p>\u2705 Hedging - See existing positions before opening opposite</p> <p>\u2705 Symbol P/L - Calculate profit for one symbol</p> <p>\u2705 Batch close - Close all positions for specific symbol</p>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#1-basic-usage-get-symbol-positions","title":"1) Basic usage - get symbol positions","text":"<pre><code>symbol := \"EURUSD\"\n\npositions, err := sugar.GetPositionsBySymbol(symbol)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif len(positions) == 0 {\n    fmt.Printf(\"No open %s positions\\n\", symbol)\n    return\n}\n\nfmt.Printf(\"%s positions: %d\\n\\n\", symbol, len(positions))\n\nfor _, pos := range positions {\n    fmt.Printf(\"#%d: %s %.2f lots - $%.2f\\n\",\n        pos.Ticket, pos.Type, pos.Volume, pos.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#2-calculate-symbol-pl","title":"2) Calculate symbol P/L","text":"<pre><code>symbol := \"EURUSD\"\n\npositions, _ := sugar.GetPositionsBySymbol(symbol)\n\nif len(positions) == 0 {\n    fmt.Printf(\"No %s positions\\n\", symbol)\n    return\n}\n\ntotalProfit := 0.0\ntotalVolume := 0.0\n\nfor _, pos := range positions {\n    totalProfit += pos.Profit\n    totalVolume += pos.Volume\n}\n\nfmt.Printf(\"%s Summary:\\n\", symbol)\nfmt.Printf(\"  Positions: %d\\n\", len(positions))\nfmt.Printf(\"  Volume:    %.2f lots\\n\", totalVolume)\nfmt.Printf(\"  Total P/L: $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#3-check-net-position-buy-vs-sell","title":"3) Check net position (BUY vs SELL)","text":"<pre><code>symbol := \"EURUSD\"\n\npositions, _ := sugar.GetPositionsBySymbol(symbol)\n\nbuyVolume := 0.0\nsellVolume := 0.0\n\nfor _, pos := range positions {\n    if pos.Type == \"BUY\" {\n        buyVolume += pos.Volume\n    } else {\n        sellVolume += pos.Volume\n    }\n}\n\nnetVolume := buyVolume - sellVolume\n\nfmt.Printf(\"%s Net Position:\\n\", symbol)\nfmt.Printf(\"  BUY:  %.2f lots\\n\", buyVolume)\nfmt.Printf(\"  SELL: %.2f lots\\n\", sellVolume)\nfmt.Printf(\"  NET:  %.2f lots \", netVolume)\n\nif netVolume &gt; 0 {\n    fmt.Println(\"(NET LONG)\")\n} else if netVolume &lt; 0 {\n    fmt.Println(\"(NET SHORT)\")\n} else {\n    fmt.Println(\"(NEUTRAL)\")\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#4-close-all-positions-for-symbol","title":"4) Close all positions for symbol","text":"<pre><code>symbol := \"EURUSD\"\n\npositions, _ := sugar.GetPositionsBySymbol(symbol)\n\nif len(positions) == 0 {\n    fmt.Printf(\"No %s positions to close\\n\", symbol)\n    return\n}\n\nfmt.Printf(\"Closing %d %s positions...\\n\", len(positions), symbol)\n\nclosedCount := 0\ntotalProfit := 0.0\n\nfor _, pos := range positions {\n    totalProfit += pos.Profit\n\n    err := sugar.ClosePosition(pos.Ticket)\n    if err != nil {\n        fmt.Printf(\"\u274c Failed to close #%d: %v\\n\", pos.Ticket, err)\n        continue\n    }\n\n    closedCount++\n    fmt.Printf(\"\u2705 Closed #%d ($%.2f)\\n\", pos.Ticket, pos.Profit)\n}\n\nfmt.Printf(\"\\nClosed %d/%d positions\\n\", closedCount, len(positions))\nfmt.Printf(\"Total P/L: $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#5-check-if-hedged","title":"5) Check if hedged","text":"<pre><code>symbol := \"EURUSD\"\n\npositions, _ := sugar.GetPositionsBySymbol(symbol)\n\nif len(positions) == 0 {\n    fmt.Printf(\"No %s positions\\n\", symbol)\n    return\n}\n\nhasBuy := false\nhasSell := false\n\nfor _, pos := range positions {\n    if pos.Type == \"BUY\" {\n        hasBuy = true\n    } else {\n        hasSell = true\n    }\n}\n\nif hasBuy &amp;&amp; hasSell {\n    fmt.Printf(\"\u2705 %s is HEDGED (both BUY and SELL positions)\\n\", symbol)\n} else if hasBuy {\n    fmt.Printf(\"\ud83d\udcc8 %s: Only LONG positions\\n\", symbol)\n} else {\n    fmt.Printf(\"\ud83d\udcc9 %s: Only SHORT positions\\n\", symbol)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#6-average-entry-price","title":"6) Average entry price","text":"<pre><code>symbol := \"EURUSD\"\n\npositions, _ := sugar.GetPositionsBySymbol(symbol)\n\nif len(positions) == 0 {\n    fmt.Printf(\"No %s positions\\n\", symbol)\n    return\n}\n\n// Separate BUY and SELL\nbuyPositions := []*PositionInfo{}\nsellPositions := []*PositionInfo{}\n\nfor _, pos := range positions {\n    if pos.Type == \"BUY\" {\n        buyPositions = append(buyPositions, pos)\n    } else {\n        sellPositions = append(sellPositions, pos)\n    }\n}\n\n// Calculate weighted average for BUY\nif len(buyPositions) &gt; 0 {\n    totalWeightedPrice := 0.0\n    totalVolume := 0.0\n\n    for _, pos := range buyPositions {\n        totalWeightedPrice += pos.PriceOpen * pos.Volume\n        totalVolume += pos.Volume\n    }\n\n    avgEntry := totalWeightedPrice / totalVolume\n    fmt.Printf(\"BUY average entry: %.5f (%.2f lots)\\n\", avgEntry, totalVolume)\n}\n\n// Calculate weighted average for SELL\nif len(sellPositions) &gt; 0 {\n    totalWeightedPrice := 0.0\n    totalVolume := 0.0\n\n    for _, pos := range sellPositions {\n        totalWeightedPrice += pos.PriceOpen * pos.Volume\n        totalVolume += pos.Volume\n    }\n\n    avgEntry := totalWeightedPrice / totalVolume\n    fmt.Printf(\"SELL average entry: %.5f (%.2f lots)\\n\", avgEntry, totalVolume)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#7-find-oldest-and-newest-positions","title":"7) Find oldest and newest positions","text":"<pre><code>symbol := \"EURUSD\"\n\npositions, _ := sugar.GetPositionsBySymbol(symbol)\n\nif len(positions) == 0 {\n    fmt.Printf(\"No %s positions\\n\", symbol)\n    return\n}\n\noldest := positions[0]\nnewest := positions[0]\n\nfor _, pos := range positions {\n    if pos.TimeOpen.Before(oldest.TimeOpen) {\n        oldest = pos\n    }\n    if pos.TimeOpen.After(newest.TimeOpen) {\n        newest = pos\n    }\n}\n\nfmt.Printf(\"%s Position Age:\\n\", symbol)\nfmt.Printf(\"Oldest: #%d opened %v ago ($%.2f)\\n\",\n    oldest.Ticket, time.Since(oldest.TimeOpen).Round(time.Minute), oldest.Profit)\nfmt.Printf(\"Newest: #%d opened %v ago ($%.2f)\\n\",\n    newest.Ticket, time.Since(newest.TimeOpen).Round(time.Minute), newest.Profit)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#8-symbol-exposure-check-before-trading","title":"8) Symbol exposure check before trading","text":"<pre><code>symbol := \"EURUSD\"\nmaxPositions := 3\nmaxVolume := 0.5\n\npositions, _ := sugar.GetPositionsBySymbol(symbol)\n\ncurrentCount := len(positions)\ncurrentVolume := 0.0\n\nfor _, pos := range positions {\n    currentVolume += pos.Volume\n}\n\nfmt.Printf(\"%s Exposure Check:\\n\", symbol)\nfmt.Printf(\"  Current positions: %d / %d max\\n\", currentCount, maxPositions)\nfmt.Printf(\"  Current volume:    %.2f / %.2f max\\n\", currentVolume, maxVolume)\n\ncanTrade := true\nnewVolume := 0.1\n\nif currentCount &gt;= maxPositions {\n    fmt.Println(\"  \u274c Max positions reached\")\n    canTrade = false\n}\n\nif currentVolume+newVolume &gt; maxVolume {\n    fmt.Println(\"  \u274c Max volume would be exceeded\")\n    canTrade = false\n}\n\nif canTrade {\n    fmt.Printf(\"  \u2705 Can open %.2f lots\\n\", newVolume)\n} else {\n    fmt.Println(\"  \u26d4 Cannot open new position\")\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#9-monitor-symbol-positions-dashboard","title":"9) Monitor symbol positions dashboard","text":"<pre><code>func MonitorSymbol(sugar *mt5.MT5Sugar, symbol string) {\n    ticker := time.NewTicker(5 * time.Second)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        positions, _ := sugar.GetPositionsBySymbol(symbol)\n\n        // Clear screen\n        fmt.Print(\"\\033[H\\033[2J\")\n\n        fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n        fmt.Printf(\"\u2551      %s POSITIONS\", symbol)\n        for i := 0; i &lt; 23-len(symbol); i++ {\n            fmt.Print(\" \")\n        }\n        fmt.Println(\"\u2551\")\n        fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n        fmt.Printf(\"Updated: %s\\n\\n\", time.Now().Format(\"15:04:05\"))\n\n        if len(positions) == 0 {\n            fmt.Printf(\"No %s positions\\n\", symbol)\n            continue\n        }\n\n        buyCount, sellCount := 0, 0\n        buyVolume, sellVolume := 0.0, 0.0\n        buyProfit, sellProfit := 0.0, 0.0\n\n        for _, pos := range positions {\n            if pos.Type == \"BUY\" {\n                buyCount++\n                buyVolume += pos.Volume\n                buyProfit += pos.Profit\n            } else {\n                sellCount++\n                sellVolume += pos.Volume\n                sellProfit += pos.Profit\n            }\n        }\n\n        fmt.Printf(\"BUY:  %d positions, %.2f lots, $%.2f\\n\",\n            buyCount, buyVolume, buyProfit)\n        fmt.Printf(\"SELL: %d positions, %.2f lots, $%.2f\\n\",\n            sellCount, sellVolume, sellProfit)\n        fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n        fmt.Printf(\"NET:  %.2f lots, $%.2f\\n\",\n            buyVolume-sellVolume, buyProfit+sellProfit)\n\n        fmt.Println(\"\\nPositions:\")\n        for _, pos := range positions {\n            fmt.Printf(\"  #%d %s %.2f lots @ %.5f \u2192 $%.2f\\n\",\n                pos.Ticket, pos.Type, pos.Volume, pos.PriceOpen, pos.Profit)\n        }\n    }\n}\n\n// Usage:\nMonitorSymbol(sugar, \"EURUSD\")\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#10-advanced-symbol-position-analysis","title":"10) Advanced symbol position analysis","text":"<pre><code>func AnalyzeSymbolPositions(sugar *mt5.MT5Sugar, symbol string) {\n    positions, _ := sugar.GetPositionsBySymbol(symbol)\n\n    if len(positions) == 0 {\n        fmt.Printf(\"No %s positions to analyze\\n\", symbol)\n        return\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Printf(\"\u2551      %s ANALYSIS\", symbol)\n    for i := 0; i &lt; 22-len(symbol); i++ {\n        fmt.Print(\" \")\n    }\n    fmt.Println(\"\u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Separate by type\n    buyPos := []*PositionInfo{}\n    sellPos := []*PositionInfo{}\n\n    for _, pos := range positions {\n        if pos.Type == \"BUY\" {\n            buyPos = append(buyPos, pos)\n        } else {\n            sellPos = append(sellPos, pos)\n        }\n    }\n\n    // BUY analysis\n    if len(buyPos) &gt; 0 {\n        buyVolume := 0.0\n        buyProfit := 0.0\n        buyWeightedEntry := 0.0\n\n        for _, pos := range buyPos {\n            buyVolume += pos.Volume\n            buyProfit += pos.Profit\n            buyWeightedEntry += pos.PriceOpen * pos.Volume\n        }\n\n        avgBuyEntry := buyWeightedEntry / buyVolume\n\n        fmt.Println(\"\\n\ud83d\udcc8 LONG Positions:\")\n        fmt.Printf(\"   Count:       %d\\n\", len(buyPos))\n        fmt.Printf(\"   Volume:      %.2f lots\\n\", buyVolume)\n        fmt.Printf(\"   Avg Entry:   %.5f\\n\", avgBuyEntry)\n        fmt.Printf(\"   Total P/L:   $%.2f\\n\", buyProfit)\n    }\n\n    // SELL analysis\n    if len(sellPos) &gt; 0 {\n        sellVolume := 0.0\n        sellProfit := 0.0\n        sellWeightedEntry := 0.0\n\n        for _, pos := range sellPos {\n            sellVolume += pos.Volume\n            sellProfit += pos.Profit\n            sellWeightedEntry += pos.PriceOpen * pos.Volume\n        }\n\n        avgSellEntry := sellWeightedEntry / sellVolume\n\n        fmt.Println(\"\\n\ud83d\udcc9 SHORT Positions:\")\n        fmt.Printf(\"   Count:       %d\\n\", len(sellPos))\n        fmt.Printf(\"   Volume:      %.2f lots\\n\", sellVolume)\n        fmt.Printf(\"   Avg Entry:   %.5f\\n\", avgSellEntry)\n        fmt.Printf(\"   Total P/L:   $%.2f\\n\", sellProfit)\n    }\n\n    // Net position\n    netVolume := 0.0\n    netProfit := 0.0\n    for _, pos := range positions {\n        if pos.Type == \"BUY\" {\n            netVolume += pos.Volume\n        } else {\n            netVolume -= pos.Volume\n        }\n        netProfit += pos.Profit\n    }\n\n    fmt.Println(\"\\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\")\n    fmt.Printf(\"Net Position:    %.2f lots \", netVolume)\n    if netVolume &gt; 0 {\n        fmt.Println(\"(LONG)\")\n    } else if netVolume &lt; 0 {\n        fmt.Println(\"(SHORT)\")\n    } else {\n        fmt.Println(\"(NEUTRAL)\")\n    }\n    fmt.Printf(\"Combined P/L:    $%.2f\\n\", netProfit)\n}\n\n// Usage:\nAnalyzeSymbolPositions(sugar, \"EURUSD\")\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Related position info:</p> <ul> <li><code>GetOpenPositions()</code> - Get all positions (all symbols)</li> <li><code>GetPositionByTicket()</code> - Get specific position</li> </ul> <p>\ud83c\udf6c Symbol-specific operations:</p> <ul> <li><code>CloseAllPositions()</code> - Close all (use with filter for symbol)</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#1-wrong-symbol-case","title":"1) Wrong symbol case","text":"<pre><code>// \u274c WRONG - case sensitive!\npositions, _ := sugar.GetPositionsBySymbol(\"eurusd\") // Won't find \"EURUSD\"\n\n// \u2705 CORRECT - match MT5 symbol exactly\npositions, _ := sugar.GetPositionsBySymbol(\"EURUSD\")\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#2-not-checking-empty-result","title":"2) Not checking empty result","text":"<pre><code>// \u274c WRONG - assuming positions exist\npositions, _ := sugar.GetPositionsBySymbol(\"EURUSD\")\nfirstPos := positions[0] // Might panic!\n\n// \u2705 CORRECT - check length\nif len(positions) &gt; 0 {\n    firstPos := positions[0]\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#3-using-instead-of-getopenpositions-filter","title":"3) Using instead of GetOpenPositions + filter","text":"<pre><code>// \u274c INEFFICIENT - if you need all symbols anyway\neurusdPos, _ := sugar.GetPositionsBySymbol(\"EURUSD\")\ngbpusdPos, _ := sugar.GetPositionsBySymbol(\"GBPUSD\")\n// Multiple API calls!\n\n// \u2705 BETTER - one call, filter in code\nallPositions, _ := sugar.GetOpenPositions()\n// Filter yourself if needed\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/GetPositionsBySymbol/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Symbol case - Use exact MT5 symbol name (usually uppercase)</p> </li> <li> <p>Net position - Calculate BUY - SELL to see exposure</p> </li> <li> <p>Before trading - Check existing positions to avoid over-exposure</p> </li> <li> <p>Hedging - Useful to see both sides of hedged positions</p> </li> <li> <p>Batch operations - Collect tickets before closing/modifying</p> </li> </ol> <p>See also: <code>GetOpenPositions.md</code>, <code>GetPositionByTicket.md</code>, <code>ClosePosition.md</code></p>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/","title":"\u270f\ufe0f Modify Position SL/TP (<code>ModifyPositionSLTP</code>)","text":"<p>Sugar method: Modifies Stop Loss and Take Profit of an open position.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.ModifyPositionSLTP(ticket, sl, tp)</code></li> <li>Timeout: 10 seconds</li> <li>Returns: Error if modification failed</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) ModifyPositionSLTP(ticket uint64, sl, tp float64) error\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>ticket</code> <code>uint64</code> Position ticket number <code>sl</code> <code>float64</code> New Stop Loss price (0 = remove SL) <code>tp</code> <code>float64</code> New Take Profit price (0 = remove TP) Output Type Description <code>error</code> <code>error</code> <code>nil</code> if successful, error if failed"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Change SL and TP of an existing position.</li> <li>Why you need it: Trailing stop, breakeven, adjust risk after partial close.</li> <li>Sanity check: For BUY: SL below entry, TP above. For SELL: SL above entry, TP below.</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Move to breakeven - Set SL to entry price once in profit</p> <p>\u2705 Trailing stop - Follow price with moving SL</p> <p>\u2705 Adjust risk - Change SL/TP based on market conditions</p> <p>\u2705 Add protection - Add SL/TP to position that has none</p>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#1-basic-usage-set-new-sltp","title":"1) Basic usage - set new SL/TP","text":"<pre><code>ticket := uint64(12345)\nnewSL := 1.08000\nnewTP := 1.09000\n\nerr := sugar.ModifyPositionSLTP(ticket, newSL, newTP)\nif err != nil {\n    fmt.Printf(\"Modification failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Position #%d modified\\n\", ticket)\nfmt.Printf(\"   New SL: %.5f\\n\", newSL)\nfmt.Printf(\"   New TP: %.5f\\n\", newTP)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#2-move-stop-loss-to-breakeven","title":"2) Move Stop Loss to breakeven","text":"<pre><code>ticket := uint64(12345)\nprofitThreshold := 50.0 // $50\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\nif pos.Profit &gt;= profitThreshold {\n    fmt.Printf(\"Profit $%.2f reached threshold $%.2f\\n\", pos.Profit, profitThreshold)\n    fmt.Println(\"Moving SL to breakeven...\")\n\n    // Set SL to entry price\n    err := sugar.ModifyPositionSLTP(ticket, pos.PriceOpen, pos.TakeProfit)\n    if err != nil {\n        fmt.Printf(\"Failed: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"\u2705 SL moved to breakeven: %.5f\\n\", pos.PriceOpen)\n    fmt.Println(\"   Now trading risk-free!\")\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#3-trailing-stop-loss","title":"3) Trailing stop loss","text":"<pre><code>ticket := uint64(12345)\ntrailDistance := 50.0 // 50 pips\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\ntrailDistancePrice := trailDistance * info.Point\n\nfor range ticker.C {\n    pos, err := sugar.GetPositionByTicket(ticket)\n    if err != nil {\n        fmt.Println(\"Position closed\")\n        return\n    }\n\n    var newSL float64\n\n    if pos.Type == \"BUY\" {\n        // Trail below current price\n        newSL = pos.PriceCurrent - trailDistancePrice\n\n        // Only move SL up, never down\n        if newSL &gt; pos.StopLoss {\n            err := sugar.ModifyPositionSLTP(ticket, newSL, pos.TakeProfit)\n            if err != nil {\n                fmt.Printf(\"Trail failed: %v\\n\", err)\n                continue\n            }\n\n            fmt.Printf(\"\u2705 Trailing SL: %.5f \u2192 %.5f (%.0f pips)\\n\",\n                pos.StopLoss, newSL, trailDistance)\n        }\n    } else { // SELL\n        // Trail above current price\n        newSL = pos.PriceCurrent + trailDistancePrice\n\n        // Only move SL down, never up\n        if newSL &lt; pos.StopLoss || pos.StopLoss == 0 {\n            err := sugar.ModifyPositionSLTP(ticket, newSL, pos.TakeProfit)\n            if err != nil {\n                fmt.Printf(\"Trail failed: %v\\n\", err)\n                continue\n            }\n\n            fmt.Printf(\"\u2705 Trailing SL: %.5f \u2192 %.5f (%.0f pips)\\n\",\n                pos.StopLoss, newSL, trailDistance)\n        }\n    }\n\n    fmt.Printf(\"Current: %.5f, SL: %.5f, Profit: $%.2f\\n\",\n        pos.PriceCurrent, pos.StopLoss, pos.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#4-add-sltp-to-position-without-protection","title":"4) Add SL/TP to position without protection","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\n// Check if position has no SL/TP\nif pos.StopLoss == 0 &amp;&amp; pos.TakeProfit == 0 {\n    fmt.Printf(\"\u26a0\ufe0f  Position #%d has no protection!\\n\", ticket)\n    fmt.Println(\"Adding SL/TP...\")\n\n    // Calculate SL/TP\n    sl, tp, _ := sugar.CalculateSLTP(pos.Symbol, pos.Type, 0, 50, 100)\n\n    err := sugar.ModifyPositionSLTP(ticket, sl, tp)\n    if err != nil {\n        fmt.Printf(\"Failed: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"\u2705 Protection added:\\n\")\n    fmt.Printf(\"   SL: %.5f (50 pips)\\n\", sl)\n    fmt.Printf(\"   TP: %.5f (100 pips)\\n\", tp)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#5-widen-stop-loss-reduce-risk-after-profit","title":"5) Widen Stop Loss (reduce risk after profit)","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\nif pos.Profit &gt; 100.0 {\n    fmt.Printf(\"Large profit: $%.2f - widening SL\\n\", pos.Profit)\n\n    info, _ := sugar.GetSymbolInfo(pos.Symbol)\n\n    var newSL float64\n    if pos.Type == \"BUY\" {\n        // Move SL closer to entry (widen stop distance)\n        newSL = pos.PriceOpen - (20 * info.Point) // 20 pips instead of original 50\n    } else {\n        newSL = pos.PriceOpen + (20 * info.Point)\n    }\n\n    err := sugar.ModifyPositionSLTP(ticket, newSL, pos.TakeProfit)\n    if err != nil {\n        fmt.Printf(\"Failed: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"\u2705 SL widened to give position more room\\n\")\n    fmt.Printf(\"   New SL: %.5f\\n\", newSL)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#6-tighten-take-profit","title":"6) Tighten Take Profit","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\n\n// If 80% to target, tighten TP to lock profit sooner\nif pos.TakeProfit &gt; 0 {\n    var distanceToTP float64\n    if pos.Type == \"BUY\" {\n        distanceToTP = pos.TakeProfit - pos.PriceCurrent\n        targetDistance := pos.TakeProfit - pos.PriceOpen\n\n        if distanceToTP &lt; (targetDistance * 0.2) { // 80% there\n            // Tighten TP to halfway between current and original TP\n            newTP := pos.PriceCurrent + (distanceToTP * 0.5)\n\n            err := sugar.ModifyPositionSLTP(ticket, pos.StopLoss, newTP)\n            if err != nil {\n                fmt.Printf(\"Failed: %v\\n\", err)\n                return\n            }\n\n            fmt.Printf(\"\u2705 TP tightened to lock profit\\n\")\n            fmt.Printf(\"   Old TP: %.5f\\n\", pos.TakeProfit)\n            fmt.Printf(\"   New TP: %.5f\\n\", newTP)\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#7-remove-sltp-completely","title":"7) Remove SL/TP completely","text":"<pre><code>ticket := uint64(12345)\n\n// Remove both SL and TP (set to 0)\nerr := sugar.ModifyPositionSLTP(ticket, 0, 0)\nif err != nil {\n    fmt.Printf(\"Failed: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"\u2705 Position #%d: SL and TP removed\\n\", ticket)\nfmt.Println(\"\u26a0\ufe0f  WARNING: Position now has no protection!\")\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#8-step-trailing-move-in-increments","title":"8) Step trailing (move in increments)","text":"<pre><code>ticket := uint64(12345)\nstepSize := 20.0 // Move SL every 20 pips profit\n\npos, _ := sugar.GetPositionByTicket(ticket)\ninfo, _ := sugar.GetSymbolInfo(pos.Symbol)\nstepPrice := stepSize * info.Point\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\nlastSLUpdate := 0.0\n\nfor range ticker.C {\n    pos, _ := sugar.GetPositionByTicket(ticket)\n\n    var profitPips float64\n    if pos.Type == \"BUY\" {\n        profitPips = (pos.PriceCurrent - pos.PriceOpen) / info.Point\n    } else {\n        profitPips = (pos.PriceOpen - pos.PriceCurrent) / info.Point\n    }\n\n    // Move SL in 20 pip steps\n    steps := math.Floor(profitPips / stepSize)\n\n    if steps &gt; lastSLUpdate &amp;&amp; steps &gt; 0 {\n        var newSL float64\n        if pos.Type == \"BUY\" {\n            newSL = pos.PriceOpen + (steps * stepPrice)\n        } else {\n            newSL = pos.PriceOpen - (steps * stepPrice)\n        }\n\n        err := sugar.ModifyPositionSLTP(ticket, newSL, pos.TakeProfit)\n        if err == nil {\n            fmt.Printf(\"\u2705 Step %d: SL moved to %.5f\\n\", int(steps), newSL)\n            lastSLUpdate = steps\n        }\n    }\n\n    fmt.Printf(\"Profit: %.1f pips, Steps: %.0f, SL: %.5f\\n\",\n        profitPips, steps, pos.StopLoss)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#9-time-based-sl-tightening","title":"9) Time-based SL tightening","text":"<pre><code>ticket := uint64(12345)\n\npos, _ := sugar.GetPositionByTicket(ticket)\nopenDuration := time.Since(pos.TimeOpen)\n\n// After 2 hours, tighten SL\nif openDuration &gt; 2*time.Hour {\n    fmt.Printf(\"Position open for %v - tightening SL\\n\", openDuration.Round(time.Minute))\n\n    info, _ := sugar.GetSymbolInfo(pos.Symbol)\n\n    var newSL float64\n    if pos.Type == \"BUY\" {\n        // Move SL to 20 pips below current (was 50 pips)\n        newSL = pos.PriceCurrent - (20 * info.Point)\n\n        if newSL &gt; pos.StopLoss {\n            err := sugar.ModifyPositionSLTP(ticket, newSL, pos.TakeProfit)\n            if err != nil {\n                fmt.Printf(\"Failed: %v\\n\", err)\n                return\n            }\n\n            fmt.Printf(\"\u2705 SL tightened after 2 hours\\n\")\n            fmt.Printf(\"   New SL: %.5f\\n\", newSL)\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#10-advanced-modification-function","title":"10) Advanced modification function","text":"<pre><code>func ModifySLTP(\n    sugar *mt5.MT5Sugar,\n    ticket uint64,\n    slPips float64,\n    tpPips float64,\n    reason string,\n) error {\n    pos, err := sugar.GetPositionByTicket(ticket)\n    if err != nil {\n        return fmt.Errorf(\"position not found: %w\", err)\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      MODIFYING POSITION               \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Reason:   %s\\n\", reason)\n    fmt.Printf(\"Position: #%d\\n\", ticket)\n    fmt.Printf(\"Symbol:   %s %s\\n\", pos.Symbol, pos.Type)\n    fmt.Printf(\"Entry:    %.5f\\n\", pos.PriceOpen)\n    fmt.Printf(\"Current:  %.5f\\n\\n\", pos.PriceCurrent)\n\n    // Calculate new SL/TP\n    sl, tp, _ := sugar.CalculateSLTP(pos.Symbol, pos.Type, pos.PriceOpen, slPips, tpPips)\n\n    fmt.Printf(\"Old SL:   %.5f\\n\", pos.StopLoss)\n    fmt.Printf(\"New SL:   %.5f (%.0f pips)\\n\", sl, slPips)\n    fmt.Printf(\"Old TP:   %.5f\\n\", pos.TakeProfit)\n    fmt.Printf(\"New TP:   %.5f (%.0f pips)\\n\\n\", tp, tpPips)\n\n    // Validate new SL is better (tighter or breakeven)\n    if pos.Type == \"BUY\" {\n        if sl &lt; pos.StopLoss &amp;&amp; pos.StopLoss &gt; 0 {\n            return fmt.Errorf(\"new SL %.5f is worse than current %.5f\", sl, pos.StopLoss)\n        }\n    } else {\n        if sl &gt; pos.StopLoss &amp;&amp; pos.StopLoss &gt; 0 {\n            return fmt.Errorf(\"new SL %.5f is worse than current %.5f\", sl, pos.StopLoss)\n        }\n    }\n\n    // Apply modification\n    err = sugar.ModifyPositionSLTP(ticket, sl, tp)\n    if err != nil {\n        return fmt.Errorf(\"modification failed: %w\", err)\n    }\n\n    fmt.Println(\"\u2705 Position modified successfully\")\n    return nil\n}\n\n// Usage:\nModifySLTP(sugar, 12345, 30, 100, \"Moving to tighter stop\")\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Helper methods:</p> <ul> <li><code>CalculateSLTP()</code> - Calculate SL/TP prices from pips</li> <li><code>GetPositionByTicket()</code> - Get current position details</li> </ul> <p>\ud83c\udf6c Opening with SL/TP:</p> <ul> <li><code>BuyMarketWithSLTP()</code> - Open with SL/TP from start</li> <li><code>SellMarketWithSLTP()</code> - Open with SL/TP from start</li> </ul>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#1-wrong-sl-direction","title":"1) Wrong SL direction","text":"<pre><code>// \u274c WRONG - SL in wrong direction for BUY\npos, _ := sugar.GetPositionByTicket(ticket)\n// BUY position, setting SL above entry!\nsugar.ModifyPositionSLTP(ticket, 1.09000, tp) // Wrong!\n\n// \u2705 CORRECT - SL below entry for BUY\nsugar.ModifyPositionSLTP(ticket, 1.08000, tp)\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#2-moving-sl-in-wrong-direction","title":"2) Moving SL in wrong direction","text":"<pre><code>// \u274c WRONG - making SL worse\noldSL := 1.08000\nnewSL := 1.07500 // Moving SL further from current price!\nsugar.ModifyPositionSLTP(ticket, newSL, tp)\n\n// \u2705 CORRECT - only improve SL (move closer to profit)\nif newSL &gt; oldSL { // For BUY positions\n    sugar.ModifyPositionSLTP(ticket, newSL, tp)\n}\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#3-not-validating-minimum-stop-level","title":"3) Not validating minimum stop level","text":"<pre><code>// \u274c WRONG - SL might be too close\nsugar.ModifyPositionSLTP(ticket, currentPrice-0.00001, tp)\n\n// \u2705 CORRECT - check minimum stop level\nstopLevel, _ := sugar.GetMinStopLevel(symbol)\nminDistance := float64(stopLevel) * point\n// Ensure new SL respects minimum distance\n</code></pre>"},{"location":"MT5Sugar/6.%20Position_Management/ModifyPositionSLTP/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Breakeven first - Move to breakeven at +30-50 pips</p> </li> <li> <p>Trail wisely - Don't trail too tight (give position room)</p> </li> <li> <p>Only improve SL - Never move SL to worse position</p> </li> <li> <p>Step trailing - Move in increments, not continuously</p> </li> <li> <p>Time-based - Tighten SL after position open for hours</p> </li> </ol> <p>See also: <code>GetPositionByTicket.md</code>, <code>CalculateSLTP.md</code>, <code>ClosePosition.md</code></p>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/","title":"\ud83d\udd22 Count Open Positions (<code>CountOpenPositions</code>)","text":"<p>Sugar method: Returns the exact count of open positions (fastest way to get count).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.CountOpenPositions()</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Integer count</li> </ul>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) CountOpenPositions() (int, error)\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters required Output Type Description <code>int</code> integer Number of open positions <code>error</code> <code>error</code> Error if count failed"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get count of open positions without fetching any position data.</li> <li>Why you need it: Fastest way to count - more efficient than <code>len(GetOpenPositions())</code>.</li> <li>Sanity check: Returns 0 if no positions. Most efficient counting method.</li> </ul>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Quick count - Fast integer answer without fetching data</p> <p>\u2705 Validation - Check position count limits</p> <p>\u2705 Dashboards - Display count efficiently</p> <p>\u2705 Monitoring - Track position count over time</p>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#1-basic-usage-get-count","title":"1) Basic usage - get count","text":"<pre><code>count, err := sugar.CountOpenPositions()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Open positions: %d\\n\", count)\n\nif count == 0 {\n    fmt.Println(\"No positions - ready to trade\")\n} else {\n    fmt.Printf(\"Currently managing %d positions\\n\", count)\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#2-position-limit-enforcement","title":"2) Position limit enforcement","text":"<pre><code>maxPositions := 10\n\ncount, _ := sugar.CountOpenPositions()\n\nfmt.Printf(\"Position count: %d / %d max\\n\", count, maxPositions)\n\nif count &gt;= maxPositions {\n    fmt.Println(\"\u274c Position limit reached - cannot open new trades\")\n    return\n}\n\nremaining := maxPositions - count\nfmt.Printf(\"\u2705 Can open %d more positions\\n\", remaining)\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#3-before-opening-position","title":"3) Before opening position","text":"<pre><code>maxSimultaneous := 5\n\n// Check current count\ncount, _ := sugar.CountOpenPositions()\n\nif count &gt;= maxSimultaneous {\n    fmt.Printf(\"\u26a0\ufe0f  Already at max (%d positions)\\n\", maxSimultaneous)\n    fmt.Println(\"   Wait for position to close before opening new\")\n    return\n}\n\nfmt.Printf(\"Current: %d/%d - opening new position...\\n\", count, maxSimultaneous)\nticket, _ := sugar.BuyMarket(\"EURUSD\", 0.1)\nfmt.Printf(\"\u2705 Opened #%d (now %d/%d)\\n\", ticket, count+1, maxSimultaneous)\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#4-monitor-position-count-changes","title":"4) Monitor position count changes","text":"<pre><code>func MonitorPositionCount(sugar *mt5.MT5Sugar, duration time.Duration) {\n    ticker := time.NewTicker(10 * time.Second)\n    defer ticker.Stop()\n\n    timeout := time.After(duration)\n\n    previousCount := -1\n\n    for {\n        select {\n        case &lt;-timeout:\n            return\n\n        case &lt;-ticker.C:\n            count, _ := sugar.CountOpenPositions()\n\n            if previousCount == -1 {\n                fmt.Printf(\"Initial count: %d positions\\n\", count)\n            } else if count &gt; previousCount {\n                fmt.Printf(\"\ud83d\udcc8 Count increased: %d \u2192 %d (+%d)\\n\",\n                    previousCount, count, count-previousCount)\n            } else if count &lt; previousCount {\n                fmt.Printf(\"\ud83d\udcc9 Count decreased: %d \u2192 %d (-%d)\\n\",\n                    previousCount, count, previousCount-count)\n            } else {\n                fmt.Printf(\"\u27a1\ufe0f  Count unchanged: %d\\n\", count)\n            }\n\n            previousCount = count\n        }\n    }\n}\n\n// Usage: Monitor for 5 minutes\nMonitorPositionCount(sugar, 5*time.Minute)\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#5-dashboard-counter","title":"5) Dashboard counter","text":"<pre><code>func ShowDashboard(sugar *mt5.MT5Sugar) {\n    count, _ := sugar.CountOpenPositions()\n    balance, _ := sugar.GetBalance()\n    equity, _ := sugar.GetEquity()\n    profit, _ := sugar.GetProfit()\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551         ACCOUNT DASHBOARD             \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Positions:  %d\\n\", count)\n    fmt.Printf(\"Balance:    $%.2f\\n\", balance)\n    fmt.Printf(\"Equity:     $%.2f\\n\", equity)\n    fmt.Printf(\"Profit:     $%.2f\\n\", profit)\n\n    if count &gt; 0 {\n        avgProfitPerPosition := profit / float64(count)\n        fmt.Printf(\"Avg P/L:    $%.2f per position\\n\", avgProfitPerPosition)\n    }\n}\n\n// Usage:\nticker := time.NewTicker(5 * time.Second)\nfor range ticker.C {\n    ShowDashboard(sugar)\n    fmt.Println()\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#6-position-count-alert","title":"6) Position count alert","text":"<pre><code>warnThreshold := 7\nmaxThreshold := 10\n\nticker := time.NewTicker(30 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    count, _ := sugar.CountOpenPositions()\n\n    fmt.Printf(\"[%s] Positions: %d \",\n        time.Now().Format(\"15:04:05\"), count)\n\n    if count &gt;= maxThreshold {\n        fmt.Println(\"\ud83d\udd34 MAX REACHED\")\n    } else if count &gt;= warnThreshold {\n        fmt.Println(\"\ud83d\udfe1 WARNING\")\n    } else {\n        fmt.Println(\"\ud83d\udfe2 OK\")\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#7-compare-position-count-with-target","title":"7) Compare position count with target","text":"<pre><code>targetPositions := 3\n\ncount, _ := sugar.CountOpenPositions()\n\nfmt.Printf(\"Target: %d positions\\n\", targetPositions)\nfmt.Printf(\"Current: %d positions\\n\", count)\n\ndiff := count - targetPositions\n\nif diff == 0 {\n    fmt.Println(\"\u2705 At target\")\n} else if diff &gt; 0 {\n    fmt.Printf(\"\u26a0\ufe0f  %d over target\\n\", diff)\n} else {\n    fmt.Printf(\"\ud83d\udcc9 %d below target\\n\", -diff)\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#8-wait-for-all-positions-to-close","title":"8) Wait for all positions to close","text":"<pre><code>fmt.Println(\"Waiting for all positions to close...\")\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\ntimeout := time.After(10 * time.Minute)\n\nfor {\n    select {\n    case &lt;-timeout:\n        count, _ := sugar.CountOpenPositions()\n        fmt.Printf(\"\u23f0 Timeout - still %d positions open\\n\", count)\n        return\n\n    case &lt;-ticker.C:\n        count, _ := sugar.CountOpenPositions()\n\n        if count == 0 {\n            fmt.Println(\"\u2705 All positions closed!\")\n            return\n        }\n\n        fmt.Printf(\"%d positions remaining...\\n\", count)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#9-position-count-statistics","title":"9) Position count statistics","text":"<pre><code>func TrackPositionCountStats(sugar *mt5.MT5Sugar, duration time.Duration) {\n    ticker := time.NewTicker(1 * time.Minute)\n    defer ticker.Stop()\n\n    timeout := time.After(duration)\n\n    minCount := 999999\n    maxCount := 0\n    totalCount := 0\n    samples := 0\n\n    for {\n        select {\n        case &lt;-timeout:\n            avgCount := float64(totalCount) / float64(samples)\n\n            fmt.Println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n            fmt.Println(\"\u2551    POSITION COUNT STATISTICS          \u2551\")\n            fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n            fmt.Printf(\"Duration:   %v\\n\", duration)\n            fmt.Printf(\"Samples:    %d\\n\", samples)\n            fmt.Printf(\"Minimum:    %d positions\\n\", minCount)\n            fmt.Printf(\"Maximum:    %d positions\\n\", maxCount)\n            fmt.Printf(\"Average:    %.1f positions\\n\", avgCount)\n            return\n\n        case &lt;-ticker.C:\n            count, _ := sugar.CountOpenPositions()\n\n            if count &lt; minCount {\n                minCount = count\n            }\n            if count &gt; maxCount {\n                maxCount = count\n            }\n\n            totalCount += count\n            samples++\n\n            fmt.Printf(\"Count: %d (min: %d, max: %d, avg: %.1f)\\n\",\n                count, minCount, maxCount, float64(totalCount)/float64(samples))\n        }\n    }\n}\n\n// Usage: Track for 1 hour\nTrackPositionCountStats(sugar, 1*time.Hour)\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#10-advanced-position-count-manager","title":"10) Advanced position count manager","text":"<pre><code>type PositionCountManager struct {\n    MinPositions int\n    MaxPositions int\n    TargetPositions int\n}\n\nfunc (pcm *PositionCountManager) GetStatus(sugar *mt5.MT5Sugar) string {\n    count, err := sugar.CountOpenPositions()\n    if err != nil {\n        return \"ERROR\"\n    }\n\n    if count &lt; pcm.MinPositions {\n        return \"UNDEREXPOSED\"\n    } else if count &gt; pcm.MaxPositions {\n        return \"OVEREXPOSED\"\n    } else if count == pcm.TargetPositions {\n        return \"OPTIMAL\"\n    } else {\n        return \"NORMAL\"\n    }\n}\n\nfunc (pcm *PositionCountManager) ShowReport(sugar *mt5.MT5Sugar) {\n    count, _ := sugar.CountOpenPositions()\n    status := pcm.GetStatus(sugar)\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551    POSITION COUNT MANAGER             \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n    fmt.Printf(\"Current:  %d positions\\n\", count)\n    fmt.Printf(\"Target:   %d positions\\n\", pcm.TargetPositions)\n    fmt.Printf(\"Range:    %d - %d\\n\", pcm.MinPositions, pcm.MaxPositions)\n    fmt.Printf(\"Status:   %s\\n\\n\", status)\n\n    // Show recommendations\n    switch status {\n    case \"UNDEREXPOSED\":\n        needed := pcm.MinPositions - count\n        fmt.Printf(\"\ud83d\udca1 Recommendation: Open %d more positions\\n\", needed)\n\n    case \"OVEREXPOSED\":\n        excess := count - pcm.MaxPositions\n        fmt.Printf(\"\u26a0\ufe0f  Warning: Close %d positions\\n\", excess)\n\n    case \"OPTIMAL\":\n        fmt.Println(\"\u2705 Perfect - at target\")\n\n    case \"NORMAL\":\n        fmt.Println(\"\u2705 Within acceptable range\")\n    }\n}\n\nfunc (pcm *PositionCountManager) CanOpenNew(sugar *mt5.MT5Sugar) bool {\n    count, _ := sugar.CountOpenPositions()\n    return count &lt; pcm.MaxPositions\n}\n\n// Usage:\nmanager := &amp;PositionCountManager{\n    MinPositions:    2,\n    TargetPositions: 5,\n    MaxPositions:    10,\n}\n\nmanager.ShowReport(sugar)\n\nif manager.CanOpenNew(sugar) {\n    fmt.Println(\"\\n\u2705 Approved to open new position\")\n} else {\n    fmt.Println(\"\\n\u274c Cannot open - at maximum\")\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Symbol-specific:</p> <ul> <li><code>CountOpenPositionsBySymbol()</code> - Count for specific symbol</li> </ul> <p>\ud83c\udf6c Related checks:</p> <ul> <li><code>HasOpenPosition()</code> - Boolean check (faster)</li> <li><code>GetPositionTickets()</code> - Get tickets (slower but still fast)</li> <li><code>GetOpenPositions()</code> - Full data (slowest)</li> </ul>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#1-using-getopenpositions-when-you-only-need-count","title":"1) Using GetOpenPositions() when you only need count","text":"<pre><code>// \u274c WRONG - fetching all data just to count\npositions, _ := sugar.GetOpenPositions()\ncount := len(positions) // Wasteful!\n\n// \u2705 CORRECT - dedicated count method\ncount, _ := sugar.CountOpenPositions() // Much faster!\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#2-not-handling-errors","title":"2) Not handling errors","text":"<pre><code>// \u274c WRONG - ignoring errors\ncount, _ := sugar.CountOpenPositions()\nif count &gt;= 10 {\n    // Might be wrong if error occurred!\n}\n\n// \u2705 CORRECT - check errors\ncount, err := sugar.CountOpenPositions()\nif err != nil {\n    fmt.Printf(\"Count failed: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#3-assuming-count-means-specific-positions-exist","title":"3) Assuming count means specific positions exist","text":"<pre><code>// \u274c WRONG - count doesn't tell you WHICH positions\ncount, _ := sugar.CountOpenPositions()\nif count &gt; 0 {\n    // Can't assume anything about the positions themselves\n}\n\n// \u2705 CORRECT - fetch positions if you need details\ncount, _ := sugar.CountOpenPositions()\nif count &gt; 0 {\n    positions, _ := sugar.GetOpenPositions()\n    // Now work with actual positions\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Fastest count - Use this instead of <code>len(GetOpenPositions())</code></p> </li> <li> <p>Limits - Perfect for enforcing position count limits</p> </li> <li> <p>Monitoring - Track count changes over time</p> </li> <li> <p>Dashboards - Display count without overhead</p> </li> <li> <p>Combine with Has - Use <code>HasOpenPosition()</code> for boolean, this for count</p> </li> </ol>"},{"location":"MT5Sugar/7.%20Position_Information/CountOpenPositions/#performance-hierarchy","title":"\ud83d\udd0d Performance Hierarchy","text":"<p>From fastest to slowest: <pre><code>1. HasOpenPosition()           - Boolean only\n2. CountOpenPositions()        - Integer count \u2b50 YOU ARE HERE\n3. GetPositionTickets()        - Ticket numbers only\n4. GetOpenPositions()          - Full position data\n</code></pre></p> <p>Use <code>CountOpenPositions()</code> when you:</p> <ul> <li>Need exact count</li> <li>Don't need position details</li> <li>Want to enforce limits</li> <li>Track count over time</li> </ul> <p>See also: <code>HasOpenPosition.md</code>, <code>GetOpenPositions.md</code></p>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/","title":"\u2714\ufe0f Has Open Position (<code>HasOpenPosition</code>)","text":"<p>Sugar method: Quickly checks if ANY open position exists (across all symbols).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.HasOpenPosition()</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Boolean (true if any position open)</li> </ul>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) HasOpenPosition() (bool, error)\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters required Output Type Description <code>bool</code> boolean <code>true</code> if any position open, <code>false</code> if none <code>error</code> <code>error</code> Error if check failed"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Fast boolean check - \"Do I have any open positions?\"</li> <li>Why you need it: Quick validation before opening new positions or ending session.</li> <li>Sanity check: More efficient than <code>len(GetOpenPositions()) &gt; 0</code>.</li> </ul>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Quick check - Fast boolean answer without fetching full position data</p> <p>\u2705 Before trading - Verify no positions before starting new strategy</p> <p>\u2705 End of day - Confirm everything closed before shutdown</p> <p>\u2705 Validation - Check state without overhead of full position retrieval</p>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#1-basic-usage-quick-check","title":"1) Basic usage - quick check","text":"<pre><code>hasPos, err := sugar.HasOpenPosition()\nif err != nil {\n    fmt.Printf(\"Check failed: %v\\n\", err)\n    return\n}\n\nif hasPos {\n    fmt.Println(\"\u2705 You have open positions\")\n} else {\n    fmt.Println(\"\u274c No open positions\")\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#2-verify-clean-slate-before-trading","title":"2) Verify clean slate before trading","text":"<pre><code>hasPos, _ := sugar.HasOpenPosition()\n\nif hasPos {\n    fmt.Println(\"\u26a0\ufe0f  WARNING: Positions already open!\")\n    fmt.Println(\"   Close existing positions before starting strategy\")\n    return\n}\n\nfmt.Println(\"\u2705 Clean slate - ready to trade\")\n// Start trading strategy\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#3-end-of-day-validation","title":"3) End of day validation","text":"<pre><code>func ValidateEndOfDay(sugar *mt5.MT5Sugar) error {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      END OF DAY VALIDATION            \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    hasPos, err := sugar.HasOpenPosition()\n    if err != nil {\n        return fmt.Errorf(\"validation failed: %w\", err)\n    }\n\n    if hasPos {\n        fmt.Println(\"\u274c ALERT: Positions still open!\")\n        fmt.Println(\"   Action required: Close all positions\")\n        return fmt.Errorf(\"positions still open\")\n    }\n\n    fmt.Println(\"\u2705 All clear - no open positions\")\n    fmt.Println(\"   Safe to shutdown\")\n    return nil\n}\n\n// Usage: Run before weekend shutdown\nerr := ValidateEndOfDay(sugar)\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#4-polling-for-position-close","title":"4) Polling for position close","text":"<pre><code>// Wait for all positions to close\nfmt.Println(\"Waiting for all positions to close...\")\n\nticker := time.NewTicker(5 * time.Second)\ndefer ticker.Stop()\n\ntimeout := time.After(5 * time.Minute)\n\nfor {\n    select {\n    case &lt;-timeout:\n        fmt.Println(\"\u23f0 Timeout - positions still open\")\n        return\n\n    case &lt;-ticker.C:\n        hasPos, _ := sugar.HasOpenPosition()\n\n        if !hasPos {\n            fmt.Println(\"\u2705 All positions closed!\")\n            return\n        }\n\n        fmt.Println(\"Positions still open - waiting...\")\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#5-before-opening-first-position","title":"5) Before opening first position","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Check if already trading\nhasPos, _ := sugar.HasOpenPosition()\n\nif hasPos {\n    fmt.Println(\"\u26a0\ufe0f  Already have active positions\")\n    fmt.Println(\"   Strategy: Only one position at a time allowed\")\n    return\n}\n\nfmt.Println(\"\u2705 No active positions - opening first trade\")\nticket, _ := sugar.BuyMarket(symbol, volume)\nfmt.Printf(\"Position #%d opened\\n\", ticket)\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#6-monitoring-for-exit-signal","title":"6) Monitoring for exit signal","text":"<pre><code>// Close all when specific condition met\nticker := time.NewTicker(10 * time.Second)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    hasPos, _ := sugar.HasOpenPosition()\n\n    if !hasPos {\n        fmt.Println(\"No positions - waiting for entry signal...\")\n        continue\n    }\n\n    // Check exit condition (example: time-based)\n    currentHour := time.Now().Hour()\n\n    if currentHour &gt;= 17 { // Close at 5 PM\n        fmt.Println(\"\ud83d\udd54 17:00 - Closing all positions\")\n        sugar.CloseAllPositions()\n        return\n    }\n\n    fmt.Println(\"Positions active - monitoring...\")\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#7-system-health-check","title":"7) System health check","text":"<pre><code>func SystemHealthCheck(sugar *mt5.MT5Sugar) {\n    fmt.Println(\"System Health Check:\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    // Check connection\n    connected := sugar.IsConnected()\n    if connected {\n        fmt.Println(\"\u2705 Connection: OK\")\n    } else {\n        fmt.Println(\"\u274c Connection: FAILED\")\n    }\n\n    // Check positions\n    hasPos, err := sugar.HasOpenPosition()\n    if err != nil {\n        fmt.Println(\"\u274c Position check: FAILED\")\n    } else if hasPos {\n        fmt.Println(\"\u26a0\ufe0f  Positions: OPEN\")\n    } else {\n        fmt.Println(\"\u2705 Positions: NONE\")\n    }\n\n    // Check balance\n    balance, _ := sugar.GetBalance()\n    fmt.Printf(\"\ud83d\udcb0 Balance: $%.2f\\n\", balance)\n}\n\n// Usage:\nSystemHealthCheck(sugar)\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#8-strategy-state-machine","title":"8) Strategy state machine","text":"<pre><code>type StrategyState int\n\nconst (\n    StateIdle StrategyState = iota\n    StateTrading\n    StateClosing\n)\n\nfunc GetStrategyState(sugar *mt5.MT5Sugar) StrategyState {\n    hasPos, err := sugar.HasOpenPosition()\n    if err != nil {\n        return StateIdle\n    }\n\n    if hasPos {\n        return StateTrading\n    }\n\n    return StateIdle\n}\n\n// Usage:\nstate := GetStrategyState(sugar)\n\nswitch state {\ncase StateIdle:\n    fmt.Println(\"State: IDLE - Looking for entries\")\ncase StateTrading:\n    fmt.Println(\"State: TRADING - Managing positions\")\ncase StateClosing:\n    fmt.Println(\"State: CLOSING - Exiting positions\")\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#9-auto-restart-after-close","title":"9) Auto-restart after close","text":"<pre><code>func MonitorAndRestart(sugar *mt5.MT5Sugar) {\n    fmt.Println(\"Monitoring positions - will restart when all closed\")\n\n    ticker := time.NewTicker(30 * time.Second)\n    defer ticker.Stop()\n\n    wasOpen := false\n\n    for range ticker.C {\n        hasPos, _ := sugar.HasOpenPosition()\n\n        if hasPos {\n            wasOpen = true\n            fmt.Println(\"Positions open - monitoring...\")\n        } else if wasOpen {\n            // Positions were open, now all closed\n            fmt.Println(\"\\n\u2705 All positions closed!\")\n            fmt.Println(\"\ud83d\udd04 Restarting trading strategy...\")\n\n            wasOpen = false\n            // Restart your strategy here\n            // StartTradingStrategy(sugar)\n        } else {\n            fmt.Println(\"No positions - waiting for entry signal...\")\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#10-advanced-position-validator","title":"10) Advanced position validator","text":"<pre><code>func ValidatePositionState(sugar *mt5.MT5Sugar) error {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      POSITION STATE VALIDATOR         \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    // Quick check first\n    hasPos, err := sugar.HasOpenPosition()\n    if err != nil {\n        return fmt.Errorf(\"position check failed: %w\", err)\n    }\n\n    fmt.Printf(\"Has open positions: %v\\n\\n\", hasPos)\n\n    if !hasPos {\n        fmt.Println(\"\u2705 VALIDATION PASSED\")\n        fmt.Println(\"   No positions to validate\")\n        return nil\n    }\n\n    // If positions exist, get details\n    positions, _ := sugar.GetOpenPositions()\n\n    fmt.Printf(\"Found %d open positions:\\n\", len(positions))\n\n    // Validate each position\n    issues := 0\n    for _, pos := range positions {\n        fmt.Printf(\"\\n#%d %s:\\n\", pos.Ticket, pos.Symbol)\n\n        if pos.StopLoss == 0 {\n            fmt.Println(\"  \u274c No Stop Loss\")\n            issues++\n        } else {\n            fmt.Println(\"  \u2705 Stop Loss set\")\n        }\n\n        if pos.TakeProfit == 0 {\n            fmt.Println(\"  \u26a0\ufe0f  No Take Profit\")\n        } else {\n            fmt.Println(\"  \u2705 Take Profit set\")\n        }\n    }\n\n    if issues &gt; 0 {\n        return fmt.Errorf(\"%d positions have issues\", issues)\n    }\n\n    fmt.Println(\"\\n\u2705 VALIDATION PASSED\")\n    return nil\n}\n\n// Usage:\nerr := ValidatePositionState(sugar)\nif err != nil {\n    fmt.Printf(\"Validation failed: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c More specific checks: * <code>HasOpenPositionBySymbol()</code> - Check for specific symbol * <code>CountOpenPositions()</code> - Get exact count</p> <p>\ud83c\udf6c Full position info:</p> <ul> <li><code>GetOpenPositions()</code> - Get all position details (slower)</li> <li><code>GetPositionTickets()</code> - Get just ticket numbers</li> </ul>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#1-using-when-you-need-details","title":"1) Using when you need details","text":"<pre><code>// \u274c WRONG - checking, then fetching separately\nhasPos, _ := sugar.HasOpenPosition()\nif hasPos {\n    positions, _ := sugar.GetOpenPositions() // Duplicate API call!\n}\n\n// \u2705 CORRECT - just get positions directly\npositions, _ := sugar.GetOpenPositions()\nif len(positions) &gt; 0 {\n    // Work with positions\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#2-not-handling-errors","title":"2) Not handling errors","text":"<pre><code>// \u274c WRONG - ignoring errors\nhasPos, _ := sugar.HasOpenPosition()\nif hasPos {\n    // Might be false negative due to error!\n}\n\n// \u2705 CORRECT - check errors\nhasPos, err := sugar.HasOpenPosition()\nif err != nil {\n    fmt.Printf(\"Check failed: %v\\n\", err)\n    return\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#3-polling-too-frequently","title":"3) Polling too frequently","text":"<pre><code>// \u274c WRONG - checking every second (wasteful)\nfor {\n    hasPos, _ := sugar.HasOpenPosition()\n    time.Sleep(1 * time.Second)\n}\n\n// \u2705 CORRECT - reasonable interval\nticker := time.NewTicker(5 * time.Second)\nfor range ticker.C {\n    hasPos, _ := sugar.HasOpenPosition()\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Fast check - Use when you only need yes/no answer</p> </li> <li> <p>Before GetOpenPositions() - Check first to avoid unnecessary API call</p> </li> <li> <p>Validation - Perfect for end-of-day or startup checks</p> </li> <li> <p>State machines - Use to track trading state</p> </li> <li> <p>Combine with other checks - Connection + positions = system health</p> </li> </ol>"},{"location":"MT5Sugar/7.%20Position_Information/HasOpenPosition/#performance-note","title":"\ud83d\udd0d Performance Note","text":"<p>This method is optimized for speed:</p> <ul> <li>\u2705 Faster than <code>GetOpenPositions()</code> (doesn't fetch full position data)</li> <li>\u2705 More efficient than counting positions</li> <li>\u2705 Perfect for frequent polling/monitoring</li> <li>\u274c Don't use if you need position details anyway</li> </ul> <p>See also: <code>CountOpenPositions.md</code>, <code>GetOpenPositions.md</code></p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/","title":"\ud83d\udcca\ud83d\udcc8 Get Daily Stats (<code>GetDailyStats</code>)","text":"<p>Sugar method: Returns comprehensive trading statistics for today (all-in-one daily performance).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetDailyStats()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: DailyStats structure with complete statistics</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetDailyStats() (*DailyStats, error)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters (auto-calculates today) Output Type Description <code>*DailyStats</code> struct Complete daily statistics structure <code>error</code> <code>error</code> Error if calculation failed"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#dailystats-structure","title":"\ud83d\udcca DailyStats Structure","text":"<pre><code>type DailyStats struct {\n    TotalDeals   int     // Total closed deals today\n    WinningDeals int     // Number of profitable deals\n    LosingDeals  int     // Number of losing deals\n    WinRate      float64 // Win rate percentage (0-100)\n    TotalProfit  float64 // Total realized P/L today\n    BestDeal     float64 // Largest profitable deal\n    WorstDeal    float64 // Largest losing deal\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get complete trading statistics for today in one convenient structure.</li> <li>Why you need it: Daily performance reports, dashboard displays, comprehensive analysis.</li> <li>Sanity check: Returns empty stats if no deals today (not error). All metrics calculated automatically.</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Daily reports - Generate comprehensive daily summary</p> <p>\u2705 Dashboards - Display all key metrics at once</p> <p>\u2705 Performance analysis - Detailed today's performance review</p> <p>\u2705 Trading journal - Record complete daily statistics</p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#1-basic-usage-show-todays-stats","title":"1) Basic usage - show today's stats","text":"<pre><code>stats, err := sugar.GetDailyStats()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif stats.TotalDeals == 0 {\n    fmt.Println(\"No trades today\")\n    return\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      TODAY'S TRADING STATISTICS       \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Total Deals:     %d\\n\", stats.TotalDeals)\nfmt.Printf(\"Winners:         %d\\n\", stats.WinningDeals)\nfmt.Printf(\"Losers:          %d\\n\", stats.LosingDeals)\nfmt.Printf(\"Win Rate:        %.1f%%\\n\\n\", stats.WinRate)\n\nfmt.Printf(\"Total Profit:    $%.2f\\n\", stats.TotalProfit)\nfmt.Printf(\"Best Trade:      $%.2f\\n\", stats.BestDeal)\nfmt.Printf(\"Worst Trade:     $%.2f\\n\", stats.WorstDeal)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#2-daily-report-with-assessment","title":"2) Daily report with assessment","text":"<pre><code>stats, _ := sugar.GetDailyStats()\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      DAILY PERFORMANCE REPORT         \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nif stats.TotalDeals == 0 {\n    fmt.Println(\"No trading activity today\")\n    return\n}\n\n// Trading volume\nfmt.Printf(\"Trading Activity:\\n\")\nfmt.Printf(\"  Total trades:    %d\\n\", stats.TotalDeals)\nfmt.Printf(\"  Winners:         %d (%.1f%%)\\n\",\n    stats.WinningDeals, stats.WinRate)\nfmt.Printf(\"  Losers:          %d (%.1f%%)\\n\\n\",\n    stats.LosingDeals, 100-stats.WinRate)\n\n// Profitability\nfmt.Printf(\"Profitability:\\n\")\nfmt.Printf(\"  Total P/L:       $%.2f\\n\", stats.TotalProfit)\n\nif stats.TotalDeals &gt; 0 {\n    avgProfit := stats.TotalProfit / float64(stats.TotalDeals)\n    fmt.Printf(\"  Avg per trade:   $%.2f\\n\\n\", avgProfit)\n}\n\n// Best/Worst\nfmt.Printf(\"Extremes:\\n\")\nfmt.Printf(\"  Best trade:      $%.2f\\n\", stats.BestDeal)\nfmt.Printf(\"  Worst trade:     $%.2f\\n\\n\", stats.WorstDeal)\n\n// Assessment\nfmt.Println(\"Assessment:\")\nif stats.TotalProfit &gt; 0 &amp;&amp; stats.WinRate &gt;= 60 {\n    fmt.Println(\"  \ud83c\udf1f Excellent day!\")\n} else if stats.TotalProfit &gt; 0 &amp;&amp; stats.WinRate &gt;= 50 {\n    fmt.Println(\"  \u2705 Good day\")\n} else if stats.TotalProfit &gt;= 0 {\n    fmt.Println(\"  \ud83d\udfe1 Breakeven - could improve\")\n} else if stats.WinRate &gt;= 50 {\n    fmt.Println(\"  \u26a0\ufe0f  Losing despite good win rate\")\n} else {\n    fmt.Println(\"  \u274c Poor day - review trades\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#3-compare-with-target-metrics","title":"3) Compare with target metrics","text":"<pre><code>stats, _ := sugar.GetDailyStats()\n\n// Target metrics\ntargetTrades := 10\ntargetWinRate := 60.0\ntargetProfit := 100.0\n\nfmt.Println(\"Target vs Actual:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n// Trades\nif stats.TotalDeals &gt;= targetTrades {\n    fmt.Printf(\"\u2705 Trades: %d / %d\\n\", stats.TotalDeals, targetTrades)\n} else {\n    fmt.Printf(\"\u274c Trades: %d / %d (need %d more)\\n\",\n        stats.TotalDeals, targetTrades, targetTrades-stats.TotalDeals)\n}\n\n// Win rate\nif stats.WinRate &gt;= targetWinRate {\n    fmt.Printf(\"\u2705 Win rate: %.1f%% / %.1f%%\\n\", stats.WinRate, targetWinRate)\n} else {\n    fmt.Printf(\"\u274c Win rate: %.1f%% / %.1f%%\\n\", stats.WinRate, targetWinRate)\n}\n\n// Profit\nif stats.TotalProfit &gt;= targetProfit {\n    fmt.Printf(\"\u2705 Profit: $%.2f / $%.2f\\n\", stats.TotalProfit, targetProfit)\n} else {\n    fmt.Printf(\"\u274c Profit: $%.2f / $%.2f\\n\", stats.TotalProfit, targetProfit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#4-real-time-statistics-monitor","title":"4) Real-time statistics monitor","text":"<pre><code>func MonitorDailyStats(sugar *mt5.MT5Sugar, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    previousDeals := 0\n\n    for range ticker.C {\n        stats, _ := sugar.GetDailyStats()\n\n        if stats.TotalDeals &gt; previousDeals {\n            fmt.Printf(\"\\n[%s] New trade closed!\\n\",\n                time.Now().Format(\"15:04:05\"))\n\n            fmt.Printf(\"  Today's stats: %d trades, %.1f%% win, $%.2f\\n\",\n                stats.TotalDeals, stats.WinRate, stats.TotalProfit)\n\n            previousDeals = stats.TotalDeals\n        }\n    }\n}\n\n// Usage: Monitor every 30 seconds\ngo MonitorDailyStats(sugar, 30*time.Second)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#5-riskreward-ratio-analysis","title":"5) Risk/reward ratio analysis","text":"<pre><code>stats, _ := sugar.GetDailyStats()\n\nif stats.TotalDeals == 0 {\n    fmt.Println(\"No trades today\")\n    return\n}\n\n// Calculate average win/loss\navgWin := 0.0\nif stats.WinningDeals &gt; 0 {\n    // Estimate avg win\n    totalWins := stats.TotalProfit - (stats.WorstDeal * float64(stats.LosingDeals))\n    avgWin = totalWins / float64(stats.WinningDeals)\n}\n\navgLoss := 0.0\nif stats.LosingDeals &gt; 0 {\n    // Estimate avg loss\n    totalLosses := stats.WorstDeal * float64(stats.LosingDeals)\n    avgLoss = totalLosses / float64(stats.LosingDeals)\n}\n\nriskRewardRatio := 0.0\nif avgLoss != 0 {\n    riskRewardRatio = avgWin / -avgLoss\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      RISK/REWARD ANALYSIS             \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Average Win:      $%.2f\\n\", avgWin)\nfmt.Printf(\"Average Loss:     $%.2f\\n\", avgLoss)\nfmt.Printf(\"Risk/Reward:      %.2f:1\\n\\n\", riskRewardRatio)\n\nif riskRewardRatio &gt;= 2.0 {\n    fmt.Println(\"\u2705 Excellent risk management\")\n} else if riskRewardRatio &gt;= 1.5 {\n    fmt.Println(\"\u2705 Good risk/reward\")\n} else if riskRewardRatio &gt;= 1.0 {\n    fmt.Println(\"\ud83d\udfe1 Acceptable\")\n} else {\n    fmt.Println(\"\u26a0\ufe0f  Poor risk/reward - review trades\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#6-performance-grade-calculator","title":"6) Performance grade calculator","text":"<pre><code>func GradeDailyPerformance(stats *DailyStats) string {\n    if stats.TotalDeals == 0 {\n        return \"N/A - No trades\"\n    }\n\n    score := 0.0\n\n    // Profitability (50 points)\n    if stats.TotalProfit &gt; 0 {\n        score += 50\n    }\n\n    // Win rate (30 points)\n    if stats.WinRate &gt;= 70 {\n        score += 30\n    } else if stats.WinRate &gt;= 60 {\n        score += 25\n    } else if stats.WinRate &gt;= 50 {\n        score += 20\n    } else if stats.WinRate &gt;= 40 {\n        score += 10\n    }\n\n    // Trading volume (20 points)\n    if stats.TotalDeals &gt;= 10 {\n        score += 20\n    } else if stats.TotalDeals &gt;= 5 {\n        score += 10\n    }\n\n    // Assign grade\n    if score &gt;= 90 {\n        return \"\ud83c\udf1f A+ (Excellent)\"\n    } else if score &gt;= 80 {\n        return \"\u2b50 A (Very Good)\"\n    } else if score &gt;= 70 {\n        return \"\u2705 B (Good)\"\n    } else if score &gt;= 60 {\n        return \"\ud83d\udfe1 C (Fair)\"\n    } else if score &gt;= 50 {\n        return \"\u26a0\ufe0f  D (Poor)\"\n    } else {\n        return \"\u274c F (Fail)\"\n    }\n}\n\n// Usage:\nstats, _ := sugar.GetDailyStats()\ngrade := GradeDailyPerformance(stats)\nfmt.Printf(\"Today's Grade: %s\\n\", grade)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#7-export-to-csv-for-journal","title":"7) Export to CSV for journal","text":"<pre><code>func ExportDailyStatsToCSV(sugar *mt5.MT5Sugar) error {\n    stats, err := sugar.GetDailyStats()\n    if err != nil {\n        return err\n    }\n\n    filename := fmt.Sprintf(\"daily_stats_%s.csv\",\n        time.Now().Format(\"2006-01-02\"))\n\n    file, err := os.OpenFile(filename, os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)\n    if err != nil {\n        return err\n    }\n    defer file.Close()\n\n    writer := csv.NewWriter(file)\n    defer writer.Flush()\n\n    // Check if file is new (write header)\n    fileInfo, _ := file.Stat()\n    if fileInfo.Size() == 0 {\n        writer.Write([]string{\n            \"Date\", \"Total Deals\", \"Winning Deals\", \"Losing Deals\",\n            \"Win Rate\", \"Total Profit\", \"Best Deal\", \"Worst Deal\"})\n    }\n\n    // Write stats\n    writer.Write([]string{\n        time.Now().Format(\"2006-01-02\"),\n        fmt.Sprintf(\"%d\", stats.TotalDeals),\n        fmt.Sprintf(\"%d\", stats.WinningDeals),\n        fmt.Sprintf(\"%d\", stats.LosingDeals),\n        fmt.Sprintf(\"%.2f\", stats.WinRate),\n        fmt.Sprintf(\"%.2f\", stats.TotalProfit),\n        fmt.Sprintf(\"%.2f\", stats.BestDeal),\n        fmt.Sprintf(\"%.2f\", stats.WorstDeal),\n    })\n\n    fmt.Printf(\"\u2705 Exported stats to %s\\n\", filename)\n    return nil\n}\n\n// Usage:\nExportDailyStatsToCSV(sugar)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#8-consistency-checker","title":"8) Consistency checker","text":"<pre><code>func CheckDailyConsistency(sugar *mt5.MT5Sugar) {\n    stats, _ := sugar.GetDailyStats()\n\n    if stats.TotalDeals == 0 {\n        fmt.Println(\"No trades today\")\n        return\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      CONSISTENCY CHECK                \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    issues := []string{}\n\n    // Check win rate consistency\n    if stats.WinRate &lt; 40 {\n        issues = append(issues, \"Win rate too low (&lt;40%)\")\n    }\n\n    // Check if best/worst are balanced\n    if stats.BestDeal &gt; 0 &amp;&amp; stats.WorstDeal &lt; 0 {\n        ratio := stats.BestDeal / -stats.WorstDeal\n        if ratio &lt; 1.0 {\n            issues = append(issues, \"Best win smaller than worst loss\")\n        }\n    }\n\n    // Check trading volume\n    if stats.TotalDeals &lt; 5 {\n        issues = append(issues, \"Low trading volume (&lt;5 trades)\")\n    } else if stats.TotalDeals &gt; 50 {\n        issues = append(issues, \"Very high volume (&gt;50 trades) - overtrading?\")\n    }\n\n    // Check profitability\n    if stats.TotalProfit &lt; 0 {\n        issues = append(issues, \"Negative day\")\n    }\n\n    // Report\n    if len(issues) == 0 {\n        fmt.Println(\"\u2705 All consistency checks passed\")\n    } else {\n        fmt.Println(\"\u26a0\ufe0f  Issues found:\")\n        for _, issue := range issues {\n            fmt.Printf(\"  - %s\\n\", issue)\n        }\n    }\n}\n\n// Usage:\nCheckDailyConsistency(sugar)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#9-streak-tracker","title":"9) Streak tracker","text":"<pre><code>type StreakTracker struct {\n    WinStreak  int\n    LossStreak int\n}\n\nfunc (st *StreakTracker) Update(stats *DailyStats) {\n    if stats.TotalProfit &gt; 0 {\n        st.WinStreak++\n        st.LossStreak = 0\n    } else if stats.TotalProfit &lt; 0 {\n        st.LossStreak++\n        st.WinStreak = 0\n    }\n}\n\nfunc (st *StreakTracker) Show() {\n    fmt.Println(\"Current Streak:\")\n    if st.WinStreak &gt; 0 {\n        fmt.Printf(\"  \ud83d\udd25 %d winning days\\n\", st.WinStreak)\n        if st.WinStreak &gt;= 5 {\n            fmt.Println(\"  \ud83c\udf1f Excellent streak!\")\n        }\n    } else if st.LossStreak &gt; 0 {\n        fmt.Printf(\"  \u2744\ufe0f  %d losing days\\n\", st.LossStreak)\n        if st.LossStreak &gt;= 3 {\n            fmt.Println(\"  \u26a0\ufe0f  Consider reviewing strategy\")\n        }\n    } else {\n        fmt.Println(\"  \u27a1\ufe0f  No active streak\")\n    }\n}\n\n// Usage:\ntracker := &amp;StreakTracker{}\n\nstats, _ := sugar.GetDailyStats()\ntracker.Update(stats)\ntracker.Show()\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#10-advanced-daily-statistics-analyzer","title":"10) Advanced daily statistics analyzer","text":"<pre><code>type DailyStatsAnalyzer struct {\n    Stats       *DailyStats\n    TargetStats *DailyStats\n}\n\nfunc NewDailyStatsAnalyzer(sugar *mt5.MT5Sugar, targetProfit float64, targetWinRate float64) (*DailyStatsAnalyzer, error) {\n    stats, err := sugar.GetDailyStats()\n    if err != nil {\n        return nil, err\n    }\n\n    return &amp;DailyStatsAnalyzer{\n        Stats: stats,\n        TargetStats: &amp;DailyStats{\n            TotalProfit: targetProfit,\n            WinRate:     targetWinRate,\n        },\n    }, nil\n}\n\nfunc (dsa *DailyStatsAnalyzer) GenerateReport() {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      COMPREHENSIVE DAILY ANALYSIS     \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    if dsa.Stats.TotalDeals == 0 {\n        fmt.Println(\"No trading activity today\")\n        return\n    }\n\n    // Overview\n    fmt.Println(\"Trading Overview:\")\n    fmt.Printf(\"  Total trades:    %d\\n\", dsa.Stats.TotalDeals)\n    fmt.Printf(\"  Win rate:        %.1f%%\\n\", dsa.Stats.WinRate)\n    fmt.Printf(\"  Total P/L:       $%.2f\\n\\n\", dsa.Stats.TotalProfit)\n\n    // Performance vs Target\n    fmt.Println(\"Target Comparison:\")\n\n    profitDiff := dsa.Stats.TotalProfit - dsa.TargetStats.TotalProfit\n    if profitDiff &gt;= 0 {\n        fmt.Printf(\"  \u2705 Profit: $%.2f over target\\n\", profitDiff)\n    } else {\n        fmt.Printf(\"  \u274c Profit: $%.2f under target\\n\", -profitDiff)\n    }\n\n    winRateDiff := dsa.Stats.WinRate - dsa.TargetStats.WinRate\n    if winRateDiff &gt;= 0 {\n        fmt.Printf(\"  \u2705 Win rate: %.1f%% over target\\n\\n\", winRateDiff)\n    } else {\n        fmt.Printf(\"  \u274c Win rate: %.1f%% under target\\n\\n\", -winRateDiff)\n    }\n\n    // Trade quality\n    fmt.Println(\"Trade Quality:\")\n\n    avgProfit := dsa.Stats.TotalProfit / float64(dsa.Stats.TotalDeals)\n    fmt.Printf(\"  Avg per trade:   $%.2f\\n\", avgProfit)\n\n    if dsa.Stats.BestDeal &gt; 0 &amp;&amp; dsa.Stats.WorstDeal &lt; 0 {\n        ratio := dsa.Stats.BestDeal / -dsa.Stats.WorstDeal\n        fmt.Printf(\"  Best/Worst:      %.2f:1\\n\", ratio)\n    }\n\n    range_ := dsa.Stats.BestDeal - dsa.Stats.WorstDeal\n    fmt.Printf(\"  P/L range:       $%.2f\\n\\n\", range_)\n\n    // Recommendations\n    fmt.Println(\"Recommendations:\")\n\n    if dsa.Stats.WinRate &lt; 50 {\n        fmt.Println(\"  \u26a0\ufe0f  Win rate below 50% - review entry criteria\")\n    }\n\n    if avgProfit &lt; 0 {\n        fmt.Println(\"  \u26a0\ufe0f  Negative average - review risk management\")\n    }\n\n    if dsa.Stats.TotalDeals &lt; 5 {\n        fmt.Println(\"  \ud83d\udcca Low volume - consider more opportunities\")\n    } else if dsa.Stats.TotalDeals &gt; 30 {\n        fmt.Println(\"  \u26a0\ufe0f  High volume - risk of overtrading\")\n    }\n\n    if dsa.Stats.TotalProfit &gt;= dsa.TargetStats.TotalProfit &amp;&amp;\n       dsa.Stats.WinRate &gt;= dsa.TargetStats.WinRate {\n        fmt.Println(\"  \ud83c\udf1f All targets met - excellent day!\")\n    }\n}\n\n// Usage:\nanalyzer, _ := NewDailyStatsAnalyzer(sugar, 100.0, 60.0)\nanalyzer.GenerateReport()\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Individual stats:</p> <ul> <li><code>GetDealsToday()</code> - Get full deal information</li> <li><code>GetProfitToday()</code> - Just profit total</li> </ul> <p>\ud83c\udf6c Other periods:</p> <ul> <li>Create similar stats for week/month using GetDeals* methods</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#1-not-checking-for-zero-trades","title":"1) Not checking for zero trades","text":"<pre><code>// \u274c WRONG - division by zero!\nstats, _ := sugar.GetDailyStats()\navgProfit := stats.TotalProfit / stats.TotalDeals\n\n// \u2705 CORRECT - check first\nif stats.TotalDeals &gt; 0 {\n    avgProfit := stats.TotalProfit / float64(stats.TotalDeals)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#2-confusing-stats-with-floating-profit","title":"2) Confusing stats with floating profit","text":"<pre><code>// \u274c WRONG - DailyStats is CLOSED positions only\nstats, _ := sugar.GetDailyStats()\n// Does NOT include open positions!\n\n// \u2705 CORRECT - get open profit separately\nfloatingProfit, _ := sugar.GetProfit()\ntotalProfit := stats.TotalProfit + floatingProfit\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#3-assuming-bestdealworstdeal-are-set","title":"3) Assuming BestDeal/WorstDeal are set","text":"<pre><code>// \u274c WRONG - might be zero if no wins/losses\nstats, _ := sugar.GetDailyStats()\nratio := stats.BestDeal / stats.WorstDeal // Panic if WorstDeal = 0!\n\n// \u2705 CORRECT - check first\nif stats.BestDeal &gt; 0 &amp;&amp; stats.WorstDeal &lt; 0 {\n    ratio := stats.BestDeal / -stats.WorstDeal\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>All-in-one - Single call gets complete daily picture</p> </li> <li> <p>Calculated fields - Win rate automatically calculated</p> </li> <li> <p>Empty OK - Returns empty stats if no trades (not error)</p> </li> <li> <p>Today only - Stats from 00:00 server time to now</p> </li> <li> <p>Efficient - More efficient than manually calculating from deals</p> </li> </ol>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDailyStats/#field-relationships","title":"\ud83d\udcca Field Relationships","text":"<pre><code>Total relationships:\n- TotalDeals = WinningDeals + LosingDeals + BreakevenDeals\n- WinRate = (WinningDeals / TotalDeals) * 100\n- TotalProfit = Sum of all deal profits\n\nQuality checks:\n- If WinRate &gt; 50% but TotalProfit &lt; 0: Wins too small\n- If WinRate &lt; 50% but TotalProfit &gt; 0: Wins are large\n- BestDeal / |WorstDeal| &gt; 1.5: Good risk management\n</code></pre> <p>See also: <code>GetDealsToday.md</code>, <code>GetProfitToday.md</code></p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/","title":"\ud83d\udcc5\ud83c\udfaf Get Deals Date Range (<code>GetDealsDateRange</code>)","text":"<p>Sugar method: Returns all closed positions (deals) within a custom date range.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetDealsDateRange(from, to)</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Slice of position history info</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetDealsDateRange(from, to time.Time) ([]*pb.PositionHistoryInfo, error)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>from</code> <code>time.Time</code> Start date/time (inclusive) <code>to</code> <code>time.Time</code> End date/time (inclusive) Output Type Description <code>[]*pb.PositionHistoryInfo</code> slice All closed positions in range <code>error</code> <code>error</code> Error if retrieval failed"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get all closed trades within a custom time range you specify.</li> <li>Why you need it: Custom period analysis, backtesting, specific timeframe reports.</li> <li>Sanity check: Returns empty slice if no deals in range. Both <code>from</code> and <code>to</code> are inclusive.</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Custom reports - Analyze specific time periods</p> <p>\u2705 Backtesting - Review performance for exact date ranges</p> <p>\u2705 Comparison - Compare different periods</p> <p>\u2705 Historical analysis - Study past performance patterns</p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#1-basic-usage-last-7-days","title":"1) Basic usage - last 7 days","text":"<pre><code>to := time.Now()\nfrom := to.AddDate(0, 0, -7) // 7 days ago\n\ndeals, err := sugar.GetDealsDateRange(from, to)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals in last 7 days\")\n    return\n}\n\nfmt.Printf(\"Last 7 days: %d deals\\n\\n\", len(deals))\n\ntotalProfit := 0.0\nfor i, deal := range deals {\n    fmt.Printf(\"%d. #%d %s: $%.2f\\n\",\n        i+1, deal.Ticket, deal.Symbol, deal.Profit)\n    totalProfit += deal.Profit\n}\n\nfmt.Printf(\"\\nTotal: $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#2-specific-month-analysis-last-month","title":"2) Specific month analysis (last month)","text":"<pre><code>now := time.Now()\n\n// First day of last month\nfirstOfLastMonth := time.Date(now.Year(), now.Month()-1, 1, 0, 0, 0, 0, now.Location())\n\n// First day of this month (exclusive end)\nfirstOfThisMonth := time.Date(now.Year(), now.Month(), 1, 0, 0, 0, 0, now.Location())\n\ndeals, _ := sugar.GetDealsDateRange(\n    firstOfLastMonth,\n    firstOfThisMonth.Add(-time.Second),\n)\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals last month\")\n    return\n}\n\ntotalProfit := 0.0\nfor _, deal := range deals {\n    totalProfit += deal.Profit\n}\n\nmonthName := firstOfLastMonth.Format(\"January 2006\")\n\nfmt.Printf(\"%s Performance:\\n\", monthName)\nfmt.Printf(\"  Trades:  %d\\n\", len(deals))\nfmt.Printf(\"  Profit:  $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#3-compare-two-equal-periods","title":"3) Compare two equal periods","text":"<pre><code>// This week\nnow := time.Now()\nweekday := int(now.Weekday())\nif weekday == 0 {\n    weekday = 7\n}\nthisWeekStart := now.AddDate(0, 0, -(weekday - 1))\nthisWeekStart = time.Date(thisWeekStart.Year(), thisWeekStart.Month(),\n    thisWeekStart.Day(), 0, 0, 0, 0, thisWeekStart.Location())\n\nthisWeekDeals, _ := sugar.GetDealsDateRange(thisWeekStart, now)\n\n// Last week\nlastWeekStart := thisWeekStart.AddDate(0, 0, -7)\nlastWeekEnd := thisWeekStart.Add(-time.Second)\n\nlastWeekDeals, _ := sugar.GetDealsDateRange(lastWeekStart, lastWeekEnd)\n\nthisWeekProfit := 0.0\nfor _, deal := range thisWeekDeals {\n    thisWeekProfit += deal.Profit\n}\n\nlastWeekProfit := 0.0\nfor _, deal := range lastWeekDeals {\n    lastWeekProfit += deal.Profit\n}\n\nfmt.Println(\"Week Comparison:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Last week:  %d trades, $%.2f\\n\",\n    len(lastWeekDeals), lastWeekProfit)\nfmt.Printf(\"This week:  %d trades, $%.2f\\n\",\n    len(thisWeekDeals), thisWeekProfit)\n\ndiff := thisWeekProfit - lastWeekProfit\nif diff &gt; 0 {\n    fmt.Printf(\"Improvement: +$%.2f \ud83d\udcc8\\n\", diff)\n} else if diff &lt; 0 {\n    fmt.Printf(\"Decline: $%.2f \ud83d\udcc9\\n\", diff)\n} else {\n    fmt.Println(\"No change \u27a1\ufe0f\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#4-specific-date-range-eg-between-two-events","title":"4) Specific date range (e.g., between two events)","text":"<pre><code>// Example: Performance between two specific dates\nfrom := time.Date(2024, 1, 15, 0, 0, 0, 0, time.UTC)\nto := time.Date(2024, 1, 31, 23, 59, 59, 0, time.UTC)\n\ndeals, _ := sugar.GetDealsDateRange(from, to)\n\nif len(deals) == 0 {\n    fmt.Printf(\"No deals between %s and %s\\n\",\n        from.Format(\"Jan 2\"), to.Format(\"Jan 2\"))\n    return\n}\n\ntotalProfit := 0.0\nfor _, deal := range deals {\n    totalProfit += deal.Profit\n}\n\nfmt.Printf(\"Period: %s - %s\\n\",\n    from.Format(\"Jan 2, 2006\"),\n    to.Format(\"Jan 2, 2006\"))\nfmt.Printf(\"Trades:  %d\\n\", len(deals))\nfmt.Printf(\"Profit:  $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#5-last-n-trading-days","title":"5) Last N trading days","text":"<pre><code>func GetLastNTradingDays(sugar *mt5.MT5Sugar, n int) ([]*pb.PositionHistoryInfo, error) {\n    to := time.Now()\n    from := to.AddDate(0, 0, -n)\n\n    return sugar.GetDealsDateRange(from, to)\n}\n\n// Usage: Last 30 trading days\ndeals, _ := GetLastNTradingDays(sugar, 30)\n\nif len(deals) &gt; 0 {\n    totalProfit := 0.0\n    for _, deal := range deals {\n        totalProfit += deal.Profit\n    }\n\n    fmt.Printf(\"Last 30 days:\\n\")\n    fmt.Printf(\"  Trades: %d\\n\", len(deals))\n    fmt.Printf(\"  Profit: $%.2f\\n\", totalProfit)\n    fmt.Printf(\"  Avg/day: $%.2f\\n\", totalProfit/30.0)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#6-quarter-analysis-q1-q2-etc","title":"6) Quarter analysis (Q1, Q2, etc.)","text":"<pre><code>func GetQuarterDeals(sugar *mt5.MT5Sugar, year, quarter int) ([]*pb.PositionHistoryInfo, error) {\n    var startMonth time.Month\n    switch quarter {\n    case 1:\n        startMonth = time.January\n    case 2:\n        startMonth = time.April\n    case 3:\n        startMonth = time.July\n    case 4:\n        startMonth = time.October\n    default:\n        return nil, fmt.Errorf(\"invalid quarter: %d\", quarter)\n    }\n\n    from := time.Date(year, startMonth, 1, 0, 0, 0, 0, time.UTC)\n    to := from.AddDate(0, 3, 0).Add(-time.Second) // 3 months later minus 1 second\n\n    return sugar.GetDealsDateRange(from, to)\n}\n\n// Usage: Q1 2024\ndeals, _ := GetQuarterDeals(sugar, 2024, 1)\n\nif len(deals) &gt; 0 {\n    totalProfit := 0.0\n    for _, deal := range deals {\n        totalProfit += deal.Profit\n    }\n\n    fmt.Println(\"Q1 2024 Performance:\")\n    fmt.Printf(\"  Trades: %d\\n\", len(deals))\n    fmt.Printf(\"  Profit: $%.2f\\n\", totalProfit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#7-year-to-date-performance","title":"7) Year-to-date performance","text":"<pre><code>now := time.Now()\nstartOfYear := time.Date(now.Year(), 1, 1, 0, 0, 0, 0, now.Location())\n\ndeals, _ := sugar.GetDealsDateRange(startOfYear, now)\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals year-to-date\")\n    return\n}\n\ntotalProfit := 0.0\nwinCount := 0\n\nfor _, deal := range deals {\n    totalProfit += deal.Profit\n    if deal.Profit &gt; 0 {\n        winCount++\n    }\n}\n\nwinRate := float64(winCount) / float64(len(deals)) * 100\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      YEAR-TO-DATE PERFORMANCE         \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Year:        %d\\n\", now.Year())\nfmt.Printf(\"Trades:      %d\\n\", len(deals))\nfmt.Printf(\"Win rate:    %.1f%%\\n\", winRate)\nfmt.Printf(\"Total P/L:   $%.2f\\n\", totalProfit)\n\ndaysInYear := now.YearDay()\navgPerDay := totalProfit / float64(daysInYear)\nfmt.Printf(\"Avg/day:     $%.2f\\n\", avgPerDay)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#8-hourly-range-analysis-specific-trading-hours","title":"8) Hourly range analysis (specific trading hours)","text":"<pre><code>// Analyze performance during specific hours (e.g., 9 AM - 5 PM)\nfrom := time.Now().AddDate(0, 0, -30) // Last 30 days\nto := time.Now()\n\ndeals, _ := sugar.GetDealsDateRange(from, to)\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals in range\")\n    return\n}\n\n// Filter by closing hour\ntradingHoursDeals := []*pb.PositionHistoryInfo{}\nfor _, deal := range deals {\n    hour := deal.TimeClose.Hour()\n    if hour &gt;= 9 &amp;&amp; hour &lt; 17 { // 9 AM to 5 PM\n        tradingHoursDeals = append(tradingHoursDeals, deal)\n    }\n}\n\ntradingHoursProfit := 0.0\nfor _, deal := range tradingHoursDeals {\n    tradingHoursProfit += deal.Profit\n}\n\nfmt.Println(\"Trading Hours Analysis (9 AM - 5 PM):\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Total deals:         %d\\n\", len(deals))\nfmt.Printf(\"In trading hours:    %d (%.1f%%)\\n\",\n    len(tradingHoursDeals),\n    float64(len(tradingHoursDeals))/float64(len(deals))*100)\nfmt.Printf(\"Trading hours P/L:   $%.2f\\n\", tradingHoursProfit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#9-compare-same-period-from-different-years","title":"9) Compare same period from different years","text":"<pre><code>// This year January\nthisYearJan := time.Date(2024, 1, 1, 0, 0, 0, 0, time.UTC)\nthisYearFeb := time.Date(2024, 2, 1, 0, 0, 0, 0, time.UTC)\n\nthisYearDeals, _ := sugar.GetDealsDateRange(thisYearJan, thisYearFeb.Add(-time.Second))\n\n// Last year January\nlastYearJan := time.Date(2023, 1, 1, 0, 0, 0, 0, time.UTC)\nlastYearFeb := time.Date(2023, 2, 1, 0, 0, 0, 0, time.UTC)\n\nlastYearDeals, _ := sugar.GetDealsDateRange(lastYearJan, lastYearFeb.Add(-time.Second))\n\nthisYearProfit := 0.0\nfor _, deal := range thisYearDeals {\n    thisYearProfit += deal.Profit\n}\n\nlastYearProfit := 0.0\nfor _, deal := range lastYearDeals {\n    lastYearProfit += deal.Profit\n}\n\nfmt.Println(\"January Year-over-Year Comparison:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Jan 2023:  %d trades, $%.2f\\n\",\n    len(lastYearDeals), lastYearProfit)\nfmt.Printf(\"Jan 2024:  %d trades, $%.2f\\n\",\n    len(thisYearDeals), thisYearProfit)\n\nif thisYearProfit &gt; lastYearProfit {\n    fmt.Println(\"\ud83d\udcc8 Better performance this year\")\n} else if thisYearProfit &lt; lastYearProfit {\n    fmt.Println(\"\ud83d\udcc9 Worse performance this year\")\n} else {\n    fmt.Println(\"\u27a1\ufe0f  Same performance\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#10-advanced-date-range-analyzer","title":"10) Advanced date range analyzer","text":"<pre><code>type DateRangeStats struct {\n    From            time.Time\n    To              time.Time\n    TotalDeals      int\n    TotalProfit     float64\n    WinRate         float64\n    BestDay         string\n    BestDayProfit   float64\n    WorstDay        string\n    WorstDayProfit  float64\n    DaysWithTrades  int\n}\n\nfunc AnalyzeDateRange(sugar *mt5.MT5Sugar, from, to time.Time) (*DateRangeStats, error) {\n    deals, err := sugar.GetDealsDateRange(from, to)\n    if err != nil {\n        return nil, err\n    }\n\n    stats := &amp;DateRangeStats{\n        From:       from,\n        To:         to,\n        TotalDeals: len(deals),\n    }\n\n    if len(deals) == 0 {\n        return stats, nil\n    }\n\n    winCount := 0\n    dailyProfit := make(map[string]float64)\n\n    for _, deal := range deals {\n        stats.TotalProfit += deal.Profit\n\n        if deal.Profit &gt; 0 {\n            winCount++\n        }\n\n        dayKey := deal.TimeClose.Format(\"2006-01-02\")\n        dailyProfit[dayKey] += deal.Profit\n    }\n\n    stats.WinRate = float64(winCount) / float64(len(deals)) * 100\n    stats.DaysWithTrades = len(dailyProfit)\n\n    // Find best/worst days\n    stats.BestDayProfit = -999999\n    stats.WorstDayProfit = 999999\n\n    for day, profit := range dailyProfit {\n        if profit &gt; stats.BestDayProfit {\n            stats.BestDayProfit = profit\n            stats.BestDay = day\n        }\n\n        if profit &lt; stats.WorstDayProfit {\n            stats.WorstDayProfit = profit\n            stats.WorstDay = day\n        }\n    }\n\n    return stats, nil\n}\n\nfunc (s *DateRangeStats) Print() {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      DATE RANGE ANALYSIS              \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"From:              %s\\n\", s.From.Format(\"2006-01-02\"))\n    fmt.Printf(\"To:                %s\\n\\n\", s.To.Format(\"2006-01-02\"))\n\n    if s.TotalDeals == 0 {\n        fmt.Println(\"No trading activity in this period\")\n        return\n    }\n\n    duration := s.To.Sub(s.From)\n    days := int(duration.Hours() / 24)\n\n    fmt.Printf(\"Total Deals:       %d\\n\", s.TotalDeals)\n    fmt.Printf(\"Total Profit:      $%.2f\\n\", s.TotalProfit)\n    fmt.Printf(\"Win Rate:          %.1f%%\\n\\n\", s.WinRate)\n\n    fmt.Printf(\"Period Length:     %d days\\n\", days)\n    fmt.Printf(\"Days with Trades:  %d\\n\", s.DaysWithTrades)\n\n    if days &gt; 0 {\n        fmt.Printf(\"Avg Profit/Day:    $%.2f\\n\\n\", s.TotalProfit/float64(days))\n    }\n\n    fmt.Printf(\"Best Day:          %s ($%.2f)\\n\", s.BestDay, s.BestDayProfit)\n    fmt.Printf(\"Worst Day:         %s ($%.2f)\\n\", s.WorstDay, s.WorstDayProfit)\n}\n\n// Usage:\nfrom := time.Now().AddDate(0, -1, 0) // 1 month ago\nto := time.Now()\n\nstats, _ := AnalyzeDateRange(sugar, from, to)\nstats.Print()\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Pre-defined periods:</p> <ul> <li><code>GetDealsToday()</code> - Today's deals (00:00 to now)</li> <li><code>GetDealsYesterday()</code> - Yesterday's deals (full day)</li> <li><code>GetDealsThisWeek()</code> - This week's deals (Monday to now)</li> <li><code>GetDealsThisMonth()</code> - This month's deals (1st to now)</li> </ul> <p>\ud83c\udf6c Profit calculations:</p> <ul> <li><code>GetProfitToday()</code> - Profit total methods</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#1-inverted-date-range","title":"1) Inverted date range","text":"<pre><code>// \u274c WRONG - from &gt; to\nto := time.Now()\nfrom := to.AddDate(0, 0, 7) // 7 days in future!\ndeals, _ := sugar.GetDealsDateRange(from, to) // Returns nothing\n\n// \u2705 CORRECT - from &lt; to\nfrom := to.AddDate(0, 0, -7) // 7 days in past\ndeals, _ := sugar.GetDealsDateRange(from, to)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#2-not-handling-timezone","title":"2) Not handling timezone","text":"<pre><code>// \u274c WRONG - mixing timezones\nfrom := time.Date(2024, 1, 1, 0, 0, 0, 0, time.UTC)\nto := time.Date(2024, 1, 31, 23, 59, 59, 0, time.Local) // Different TZ!\n\n// \u2705 CORRECT - same timezone\nfrom := time.Date(2024, 1, 1, 0, 0, 0, 0, time.UTC)\nto := time.Date(2024, 1, 31, 23, 59, 59, 0, time.UTC)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#3-exclusive-vs-inclusive-range","title":"3) Exclusive vs inclusive range","text":"<pre><code>// \u274c WRONG - assuming exclusive end\nto := time.Date(2024, 1, 31, 0, 0, 0, 0, time.UTC) // Excludes Jan 31!\n\n// \u2705 CORRECT - include full last day\nto := time.Date(2024, 1, 31, 23, 59, 59, 0, time.UTC)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Both inclusive - Both <code>from</code> and <code>to</code> are inclusive</p> </li> <li> <p>Timezone aware - Use same timezone for both parameters</p> </li> <li> <p>Flexible - Most flexible history method for custom periods</p> </li> <li> <p>Performance - 5-second timeout, suitable for analysis</p> </li> <li> <p>Empty OK - Returns empty slice if no trades (not error)</p> </li> </ol>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsDateRange/#common-date-range-patterns","title":"\ud83d\udcca Common Date Range Patterns","text":"<pre><code>// Last 7 days\nfrom := time.Now().AddDate(0, 0, -7)\nto := time.Now()\n\n// Last 30 days\nfrom := time.Now().AddDate(0, 0, -30)\nto := time.Now()\n\n// Last month (complete)\nnow := time.Now()\nfirstOfThisMonth := time.Date(now.Year(), now.Month(), 1, 0, 0, 0, 0, now.Location())\nfirstOfLastMonth := firstOfThisMonth.AddDate(0, -1, 0)\nfrom := firstOfLastMonth\nto := firstOfThisMonth.Add(-time.Second)\n\n// This year\nfrom := time.Date(time.Now().Year(), 1, 1, 0, 0, 0, 0, time.Local)\nto := time.Now()\n\n// Specific month\nfrom := time.Date(2024, 1, 1, 0, 0, 0, 0, time.UTC)\nto := time.Date(2024, 1, 31, 23, 59, 59, 0, time.UTC)\n</code></pre> <p>See also: <code>GetDealsToday.md</code>, <code>GetDealsThisWeek.md</code>, <code>GetDealsThisMonth.md</code></p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/","title":"\ud83d\udcc5\ud83d\udcc6 Get Deals This Month (<code>GetDealsThisMonth</code>)","text":"<p>Sugar method: Returns all closed positions (deals) from this month (1st day 00:00 to now).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetDealsThisMonth()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Slice of position history info</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetDealsThisMonth() ([]*pb.PositionHistoryInfo, error)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters (auto-calculates month range) Output Type Description <code>[]*pb.PositionHistoryInfo</code> slice All closed positions from this month <code>error</code> <code>error</code> Error if retrieval failed"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get all closed trades from 1st day of month 00:00 to current time.</li> <li>Why you need it: Monthly performance tracking, strategy evaluation, profit/loss reports.</li> <li>Sanity check: Returns empty slice if no deals this month. Auto-calculates month range.</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Monthly reports - Generate month-to-date summaries</p> <p>\u2705 Performance tracking - Monitor monthly profit/loss</p> <p>\u2705 Strategy analysis - Review month's trading performance</p> <p>\u2705 Goal tracking - Check progress toward monthly targets</p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#1-basic-usage-show-this-months-deals","title":"1) Basic usage - show this month's deals","text":"<pre><code>deals, err := sugar.GetDealsThisMonth()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this month\")\n    return\n}\n\nfmt.Printf(\"This month's deals: %d\\n\\n\", len(deals))\n\ntotalProfit := 0.0\nfor i, deal := range deals {\n    fmt.Printf(\"%d. #%d %s: $%.2f\\n\",\n        i+1, deal.Ticket, deal.Symbol, deal.Profit)\n    totalProfit += deal.Profit\n}\n\nfmt.Printf(\"\\nMonth total: $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#2-monthly-performance-summary","title":"2) Monthly performance summary","text":"<pre><code>deals, _ := sugar.GetDealsThisMonth()\n\nif len(deals) == 0 {\n    fmt.Println(\"No trading this month\")\n    return\n}\n\ntotalProfit := 0.0\nwinCount := 0\nlossCount := 0\n\nfor _, deal := range deals {\n    totalProfit += deal.Profit\n    if deal.Profit &gt; 0 {\n        winCount++\n    } else if deal.Profit &lt; 0 {\n        lossCount++\n    }\n}\n\nwinRate := float64(winCount) / float64(len(deals)) * 100\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      THIS MONTH'S PERFORMANCE         \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nmonthName := time.Now().Format(\"January 2006\")\nfmt.Printf(\"Month:         %s\\n\\n\", monthName)\n\nfmt.Printf(\"Total trades:  %d\\n\", len(deals))\nfmt.Printf(\"Winners:       %d (%.1f%%)\\n\", winCount, winRate)\nfmt.Printf(\"Losers:        %d (%.1f%%)\\n\", lossCount, 100-winRate)\nfmt.Printf(\"Total P/L:     $%.2f\\n\", totalProfit)\n\nif totalProfit &gt; 0 {\n    fmt.Println(\"\\n\u2705 Profitable month so far\")\n} else {\n    fmt.Println(\"\\n\u274c Losing month so far\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#3-check-monthly-target-progress","title":"3) Check monthly target progress","text":"<pre><code>monthlyTarget := 2000.0 // $2000 per month\n\ndeals, _ := sugar.GetDealsThisMonth()\n\nif len(deals) == 0 {\n    fmt.Printf(\"Monthly target: $%.2f\\n\", monthlyTarget)\n    fmt.Println(\"No trades yet this month\")\n    return\n}\n\nactualProfit := 0.0\nfor _, deal := range deals {\n    actualProfit += deal.Profit\n}\n\nprogress := (actualProfit / monthlyTarget) * 100\n\n// Calculate days into month\nnow := time.Now()\ndayOfMonth := now.Day()\ndaysInMonth := time.Date(now.Year(), now.Month()+1, 0, 0, 0, 0, 0, now.Location()).Day()\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      MONTHLY TARGET PROGRESS          \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Target:       $%.2f\\n\", monthlyTarget)\nfmt.Printf(\"Current:      $%.2f\\n\", actualProfit)\nfmt.Printf(\"Progress:     %.1f%%\\n\\n\", progress)\n\nfmt.Printf(\"Day %d of %d (%.0f%% of month)\\n\",\n    dayOfMonth, daysInMonth,\n    float64(dayOfMonth)/float64(daysInMonth)*100)\n\nremaining := monthlyTarget - actualProfit\n\nif actualProfit &gt;= monthlyTarget {\n    fmt.Printf(\"\\n\ud83c\udfaf Target achieved! (+$%.2f)\\n\",\n        actualProfit-monthlyTarget)\n} else {\n    fmt.Printf(\"\\n\ud83d\udcca $%.2f remaining\\n\", remaining)\n\n    // Project if on track\n    projected := (actualProfit / float64(dayOfMonth)) * float64(daysInMonth)\n    fmt.Printf(\"Projected month-end: $%.2f\\n\", projected)\n\n    if projected &gt;= monthlyTarget {\n        fmt.Println(\"\u2705 On track to meet target\")\n    } else {\n        fmt.Println(\"\u26a0\ufe0f  Behind pace\")\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#4-weekly-breakdown-of-this-month","title":"4) Weekly breakdown of this month","text":"<pre><code>deals, _ := sugar.GetDealsThisMonth()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this month\")\n    return\n}\n\n// Group by week number\nweeklyStats := make(map[int]struct {\n    Count  int\n    Profit float64\n})\n\nfor _, deal := range deals {\n    _, week := deal.TimeClose.ISOWeek()\n    stats := weeklyStats[week]\n    stats.Count++\n    stats.Profit += deal.Profit\n    weeklyStats[week] = stats\n}\n\nfmt.Println(\"This Month - Weekly Breakdown:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n// Get current week range\n_, currentWeek := time.Now().ISOWeek()\n\n// Print weeks in order\nfor week := currentWeek - 3; week &lt;= currentWeek; week++ {\n    stats, exists := weeklyStats[week]\n    if !exists {\n        continue\n    }\n\n    status := \"\u2705\"\n    if stats.Profit &lt; 0 {\n        status = \"\u274c\"\n    }\n\n    fmt.Printf(\"%s Week %d: %d trades, $%.2f\\n\",\n        status, week, stats.Count, stats.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#5-top-5-most-profitable-trades-this-month","title":"5) Top 5 most profitable trades this month","text":"<pre><code>deals, _ := sugar.GetDealsThisMonth()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this month\")\n    return\n}\n\n// Sort by profit (descending)\nsort.Slice(deals, func(i, j int) bool {\n    return deals[i].Profit &gt; deals[j].Profit\n})\n\nfmt.Println(\"Top 5 Most Profitable Trades This Month:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\ncount := 5\nif len(deals) &lt; 5 {\n    count = len(deals)\n}\n\nfor i := 0; i &lt; count; i++ {\n    deal := deals[i]\n    fmt.Printf(\"%d. #%d %s %.2f lots: $%.2f\\n\",\n        i+1, deal.Ticket, deal.Symbol,\n        deal.Volume, deal.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#6-symbol-performance-this-month","title":"6) Symbol performance this month","text":"<pre><code>deals, _ := sugar.GetDealsThisMonth()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this month\")\n    return\n}\n\nsymbolStats := make(map[string]struct {\n    Count  int\n    Profit float64\n    Wins   int\n})\n\nfor _, deal := range deals {\n    stats := symbolStats[deal.Symbol]\n    stats.Count++\n    stats.Profit += deal.Profit\n    if deal.Profit &gt; 0 {\n        stats.Wins++\n    }\n    symbolStats[deal.Symbol] = stats\n}\n\nfmt.Println(\"This Month - Symbol Performance:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor symbol, stats := range symbolStats {\n    winRate := float64(stats.Wins) / float64(stats.Count) * 100\n    avgProfit := stats.Profit / float64(stats.Count)\n\n    status := \"\u2705\"\n    if stats.Profit &lt; 0 {\n        status = \"\u274c\"\n    }\n\n    fmt.Printf(\"%s %-8s: %d trades (%.0f%% win), $%.2f (avg: $%.2f)\\n\",\n        status, symbol, stats.Count, winRate,\n        stats.Profit, avgProfit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#7-month-over-month-comparison","title":"7) Month-over-month comparison","text":"<pre><code>thisMonthDeals, _ := sugar.GetDealsThisMonth()\n\n// Get last month's range\nnow := time.Now()\nfirstOfThisMonth := time.Date(now.Year(), now.Month(), 1, 0, 0, 0, 0, now.Location())\nfirstOfLastMonth := firstOfThisMonth.AddDate(0, -1, 0)\n\nlastMonthDeals, _ := sugar.GetDealsDateRange(\n    firstOfLastMonth,\n    firstOfThisMonth.Add(-time.Second),\n)\n\nthisMonthProfit := 0.0\nfor _, deal := range thisMonthDeals {\n    thisMonthProfit += deal.Profit\n}\n\nlastMonthProfit := 0.0\nfor _, deal := range lastMonthDeals {\n    lastMonthProfit += deal.Profit\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      MONTH-OVER-MONTH COMPARISON      \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nlastMonthName := firstOfLastMonth.Format(\"January\")\nthisMonthName := now.Format(\"January\")\n\nfmt.Printf(\"%s:  %d trades, $%.2f\\n\",\n    lastMonthName, len(lastMonthDeals), lastMonthProfit)\nfmt.Printf(\"%s:  %d trades, $%.2f\\n\",\n    thisMonthName, len(thisMonthDeals), thisMonthProfit)\n\ndiff := thisMonthProfit - lastMonthProfit\n\nfmt.Printf(\"\\nDifference: $%.2f \", diff)\nif diff &gt; 0 {\n    if lastMonthProfit != 0 {\n        pct := (diff / lastMonthProfit) * 100\n        fmt.Printf(\"\ud83d\udcc8 (+%.1f%%)\\n\", pct)\n    } else {\n        fmt.Println(\"\ud83d\udcc8\")\n    }\n} else if diff &lt; 0 {\n    if lastMonthProfit != 0 {\n        pct := (-diff / lastMonthProfit) * 100\n        fmt.Printf(\"\ud83d\udcc9 (-%.1f%%)\\n\", pct)\n    } else {\n        fmt.Println(\"\ud83d\udcc9\")\n    }\n} else {\n    fmt.Println(\"\u27a1\ufe0f  (No change)\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#8-daily-average-this-month","title":"8) Daily average this month","text":"<pre><code>deals, _ := sugar.GetDealsThisMonth()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this month\")\n    return\n}\n\ntotalProfit := 0.0\nfor _, deal := range deals {\n    totalProfit += deal.Profit\n}\n\nnow := time.Now()\ndaysElapsed := now.Day()\ndaysInMonth := time.Date(now.Year(), now.Month()+1, 0, 0, 0, 0, 0, now.Location()).Day()\n\navgPerDay := totalProfit / float64(daysElapsed)\nprojectedMonthEnd := avgPerDay * float64(daysInMonth)\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      MONTHLY DAILY AVERAGES           \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Days elapsed:       %d / %d\\n\", daysElapsed, daysInMonth)\nfmt.Printf(\"Total profit:       $%.2f\\n\", totalProfit)\nfmt.Printf(\"Avg per day:        $%.2f\\n\", avgPerDay)\nfmt.Printf(\"Projected end:      $%.2f\\n\", projectedMonthEnd)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#9-riskreward-analysis-this-month","title":"9) Risk/reward analysis this month","text":"<pre><code>deals, _ := sugar.GetDealsThisMonth()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this month\")\n    return\n}\n\nvar totalWins float64\nvar totalLosses float64\nwinCount := 0\nlossCount := 0\n\nfor _, deal := range deals {\n    if deal.Profit &gt; 0 {\n        totalWins += deal.Profit\n        winCount++\n    } else if deal.Profit &lt; 0 {\n        totalLosses += deal.Profit\n        lossCount++\n    }\n}\n\navgWin := 0.0\nif winCount &gt; 0 {\n    avgWin = totalWins / float64(winCount)\n}\n\navgLoss := 0.0\nif lossCount &gt; 0 {\n    avgLoss = totalLosses / float64(lossCount)\n}\n\nriskRewardRatio := 0.0\nif avgLoss != 0 {\n    riskRewardRatio = avgWin / -avgLoss\n}\n\nprofitFactor := 0.0\nif totalLosses != 0 {\n    profitFactor = totalWins / -totalLosses\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      RISK/REWARD ANALYSIS             \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Avg Win:           $%.2f\\n\", avgWin)\nfmt.Printf(\"Avg Loss:          $%.2f\\n\", avgLoss)\nfmt.Printf(\"Risk/Reward:       %.2f:1\\n\", riskRewardRatio)\nfmt.Printf(\"Profit Factor:     %.2f\\n\\n\", profitFactor)\n\nif profitFactor &gt;= 2.0 {\n    fmt.Println(\"\u2705 Excellent risk management\")\n} else if profitFactor &gt;= 1.5 {\n    fmt.Println(\"\u2705 Good risk management\")\n} else if profitFactor &gt;= 1.0 {\n    fmt.Println(\"\ud83d\udfe1 Acceptable\")\n} else {\n    fmt.Println(\"\u26a0\ufe0f  Needs improvement\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#10-advanced-monthly-statistics-analyzer","title":"10) Advanced monthly statistics analyzer","text":"<pre><code>type MonthlyStats struct {\n    MonthName       string\n    TotalDeals      int\n    TotalProfit     float64\n    WinRate         float64\n    ProfitFactor    float64\n    BestWeek        int\n    BestWeekProfit  float64\n    DaysTraded      int\n    AvgDailyProfit  float64\n    LargestWin      float64\n    LargestLoss     float64\n}\n\nfunc AnalyzeMonthlyPerformance(sugar *mt5.MT5Sugar) (*MonthlyStats, error) {\n    deals, err := sugar.GetDealsThisMonth()\n    if err != nil {\n        return nil, err\n    }\n\n    now := time.Now()\n    stats := &amp;MonthlyStats{\n        MonthName:  now.Format(\"January 2006\"),\n        TotalDeals: len(deals),\n    }\n\n    if len(deals) == 0 {\n        return stats, nil\n    }\n\n    winCount := 0\n    var totalWins, totalLosses float64\n    weeklyProfit := make(map[int]float64)\n    tradingDays := make(map[string]bool)\n\n    for _, deal := range deals {\n        stats.TotalProfit += deal.Profit\n        tradingDays[deal.TimeClose.Format(\"2006-01-02\")] = true\n\n        if deal.Profit &gt; 0 {\n            winCount++\n            totalWins += deal.Profit\n\n            if deal.Profit &gt; stats.LargestWin {\n                stats.LargestWin = deal.Profit\n            }\n        } else if deal.Profit &lt; 0 {\n            totalLosses += deal.Profit\n\n            if deal.Profit &lt; stats.LargestLoss {\n                stats.LargestLoss = deal.Profit\n            }\n        }\n\n        _, week := deal.TimeClose.ISOWeek()\n        weeklyProfit[week] += deal.Profit\n    }\n\n    stats.WinRate = float64(winCount) / float64(len(deals)) * 100\n    stats.DaysTraded = len(tradingDays)\n\n    if stats.DaysTraded &gt; 0 {\n        stats.AvgDailyProfit = stats.TotalProfit / float64(stats.DaysTraded)\n    }\n\n    if totalLosses != 0 {\n        stats.ProfitFactor = totalWins / -totalLosses\n    }\n\n    // Find best week\n    for week, profit := range weeklyProfit {\n        if profit &gt; stats.BestWeekProfit {\n            stats.BestWeekProfit = profit\n            stats.BestWeek = week\n        }\n    }\n\n    return stats, nil\n}\n\nfunc (s *MonthlyStats) Print() {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      MONTHLY STATISTICS ANALYSIS      \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Month:              %s\\n\\n\", s.MonthName)\n\n    if s.TotalDeals == 0 {\n        fmt.Println(\"No trading activity this month\")\n        return\n    }\n\n    fmt.Printf(\"Total Deals:        %d\\n\", s.TotalDeals)\n    fmt.Printf(\"Total Profit:       $%.2f\\n\", s.TotalProfit)\n    fmt.Printf(\"Win Rate:           %.1f%%\\n\", s.WinRate)\n    fmt.Printf(\"Profit Factor:      %.2f\\n\\n\", s.ProfitFactor)\n\n    fmt.Printf(\"Days Traded:        %d\\n\", s.DaysTraded)\n    fmt.Printf(\"Avg Daily Profit:   $%.2f\\n\\n\", s.AvgDailyProfit)\n\n    fmt.Printf(\"Largest Win:        $%.2f\\n\", s.LargestWin)\n    fmt.Printf(\"Largest Loss:       $%.2f\\n\\n\", s.LargestLoss)\n\n    fmt.Printf(\"Best Week:          Week %d ($%.2f)\\n\", s.BestWeek, s.BestWeekProfit)\n\n    fmt.Println(\"\\nMonth Assessment:\")\n    if s.TotalProfit &gt; 0 &amp;&amp; s.WinRate &gt;= 60 &amp;&amp; s.ProfitFactor &gt;= 1.5 {\n        fmt.Println(\"\ud83c\udf1f Excellent month\")\n    } else if s.TotalProfit &gt; 0 &amp;&amp; s.WinRate &gt;= 50 {\n        fmt.Println(\"\u2705 Good month\")\n    } else if s.TotalProfit &gt;= 0 {\n        fmt.Println(\"\ud83d\udfe1 Breakeven month\")\n    } else {\n        fmt.Println(\"\u274c Losing month - review strategy\")\n    }\n}\n\n// Usage:\nstats, _ := AnalyzeMonthlyPerformance(sugar)\nstats.Print()\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other time periods:</p> <ul> <li><code>GetDealsToday()</code> - Today's deals</li> <li><code>GetDealsYesterday()</code> - Yesterday's deals</li> <li><code>GetDealsThisWeek()</code> - This week's deals</li> <li><code>GetDealsDateRange()</code> - Custom date range</li> </ul> <p>\ud83c\udf6c Profit calculations:</p> <ul> <li><code>GetProfitThisMonth()</code> - Just this month's profit total</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#1-early-month-incomplete-data","title":"1) Early month = incomplete data","text":"<pre><code>// \u274c WRONG - comparing incomplete month to complete month\nthisMonthProfit, _ := sugar.GetProfitThisMonth()  // Day 5\nlastMonthProfit := 2000.0                         // Full 30 days\n// Not fair comparison!\n\n// \u2705 CORRECT - adjust for days\ndaysPassed := time.Now().Day()\ndailyAvg := thisMonthProfit / float64(daysPassed)\nfmt.Printf(\"Daily average: $%.2f\\n\", dailyAvg)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#2-not-handling-timezone","title":"2) Not handling timezone","text":"<pre><code>// \u274c WRONG - \"this month\" is server timezone\n\n// \u2705 CORRECT - aware that it's server's month\ndeals, _ := sugar.GetDealsThisMonth()\nfmt.Println(\"Server's current month\")\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#3-assuming-deals-exist","title":"3) Assuming deals exist","text":"<pre><code>// \u274c WRONG - might panic\ndeals, _ := sugar.GetDealsThisMonth()\navgProfit := totalProfit / len(deals) // Panic if empty!\n\n// \u2705 CORRECT - check length\nif len(deals) &gt; 0 {\n    avgProfit := totalProfit / float64(len(deals))\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Month starts 1st - Always starts from 1st day 00:00:00</p> </li> <li> <p>Incomplete data - Mid-month calls return partial month</p> </li> <li> <p>Performance - 5-second timeout, suitable for regular calls</p> </li> <li> <p>Empty OK - Returns empty slice if no trades (not error)</p> </li> <li> <p>Auto-range - Automatically calculates from 1st to now</p> </li> </ol>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisMonth/#month-range-calculation","title":"\ud83d\udcca Month Range Calculation","text":"<pre><code>Month range calculation:\nnow = time.Now()\nstartOfMonth = Date(now.Year(), now.Month(), 1, 0, 0, 0, 0, now.Location())\n\nReturns all deals from startOfMonth to now\n</code></pre> <p>See also: <code>GetDealsToday.md</code>, <code>GetDealsThisWeek.md</code>, <code>GetProfitThisMonth.md</code>, <code>GetDealsDateRange.md</code></p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/","title":"\ud83d\udcc5\ud83d\udcca Get Deals This Week (<code>GetDealsThisWeek</code>)","text":"<p>Sugar method: Returns all closed positions (deals) from this week (Monday 00:00 to now).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetDealsThisWeek()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Slice of position history info</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetDealsThisWeek() ([]*pb.PositionHistoryInfo, error)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters (auto-calculates week range) Output Type Description <code>[]*pb.PositionHistoryInfo</code> slice All closed positions from this week <code>error</code> <code>error</code> Error if retrieval failed"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get all closed trades from Monday 00:00 to current time.</li> <li>Why you need it: Weekly performance tracking, strategy analysis, week-over-week comparison.</li> <li>Sanity check: Returns empty slice if no deals this week. Week starts on Monday.</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Weekly reports - Generate week-to-date summaries</p> <p>\u2705 Performance tracking - Monitor weekly profit/loss</p> <p>\u2705 Strategy analysis - Review week's trading decisions</p> <p>\u2705 Goal tracking - Check progress toward weekly targets</p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#1-basic-usage-show-this-weeks-deals","title":"1) Basic usage - show this week's deals","text":"<pre><code>deals, err := sugar.GetDealsThisWeek()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this week\")\n    return\n}\n\nfmt.Printf(\"This week's deals: %d\\n\\n\", len(deals))\n\ntotalProfit := 0.0\nfor i, deal := range deals {\n    fmt.Printf(\"%d. #%d %s: $%.2f\\n\",\n        i+1, deal.Ticket, deal.Symbol, deal.Profit)\n    totalProfit += deal.Profit\n}\n\nfmt.Printf(\"\\nWeek total: $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#2-weekly-performance-summary","title":"2) Weekly performance summary","text":"<pre><code>deals, _ := sugar.GetDealsThisWeek()\n\nif len(deals) == 0 {\n    fmt.Println(\"No trading this week\")\n    return\n}\n\ntotalProfit := 0.0\nwinCount := 0\nlossCount := 0\n\nfor _, deal := range deals {\n    totalProfit += deal.Profit\n    if deal.Profit &gt; 0 {\n        winCount++\n    } else if deal.Profit &lt; 0 {\n        lossCount++\n    }\n}\n\nwinRate := float64(winCount) / float64(len(deals)) * 100\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      THIS WEEK'S PERFORMANCE          \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Total trades:  %d\\n\", len(deals))\nfmt.Printf(\"Winners:       %d (%.1f%%)\\n\", winCount, winRate)\nfmt.Printf(\"Losers:        %d (%.1f%%)\\n\", lossCount, 100-winRate)\nfmt.Printf(\"Total P/L:     $%.2f\\n\", totalProfit)\n\nif totalProfit &gt; 0 {\n    fmt.Println(\"\\n\u2705 Profitable week so far\")\n} else {\n    fmt.Println(\"\\n\u274c Losing week so far\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#3-daily-breakdown-of-this-week","title":"3) Daily breakdown of this week","text":"<pre><code>deals, _ := sugar.GetDealsThisWeek()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this week\")\n    return\n}\n\n// Group by day\ndailyDeals := make(map[string][]float64)\n\nfor _, deal := range deals {\n    dayKey := deal.TimeClose.Format(\"Mon 01/02\")\n    dailyDeals[dayKey] = append(dailyDeals[dayKey], deal.Profit)\n}\n\nfmt.Println(\"This Week - Daily Breakdown:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n// Get days in order (Monday to Sunday)\nnow := time.Now()\nweekday := int(now.Weekday())\nif weekday == 0 {\n    weekday = 7 // Sunday becomes 7\n}\n\nfor i := 0; i &lt; weekday; i++ {\n    day := now.AddDate(0, 0, -(weekday - 1 - i))\n    dayKey := day.Format(\"Mon 01/02\")\n\n    profits, exists := dailyDeals[dayKey]\n    if !exists {\n        fmt.Printf(\"%s: No trades\\n\", dayKey)\n        continue\n    }\n\n    dayProfit := 0.0\n    for _, p := range profits {\n        dayProfit += p\n    }\n\n    status := \"\u2705\"\n    if dayProfit &lt; 0 {\n        status = \"\u274c\"\n    }\n\n    fmt.Printf(\"%s %s: %d trades, $%.2f\\n\",\n        status, dayKey, len(profits), dayProfit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#4-check-weekly-target-progress","title":"4) Check weekly target progress","text":"<pre><code>weeklyTarget := 500.0 // $500 per week\n\ndeals, _ := sugar.GetDealsThisWeek()\n\nif len(deals) == 0 {\n    fmt.Printf(\"Weekly target: $%.2f\\n\", weeklyTarget)\n    fmt.Println(\"No trades yet this week\")\n    return\n}\n\nactualProfit := 0.0\nfor _, deal := range deals {\n    actualProfit += deal.Profit\n}\n\nprogress := (actualProfit / weeklyTarget) * 100\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      WEEKLY TARGET PROGRESS           \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Target:    $%.2f\\n\", weeklyTarget)\nfmt.Printf(\"Current:   $%.2f\\n\", actualProfit)\nfmt.Printf(\"Progress:  %.1f%%\\n\\n\", progress)\n\nremaining := weeklyTarget - actualProfit\n\nif actualProfit &gt;= weeklyTarget {\n    fmt.Printf(\"\ud83c\udfaf Target achieved! (+$%.2f)\\n\",\n        actualProfit-weeklyTarget)\n} else if progress &gt;= 80 {\n    fmt.Printf(\"\ud83d\udfe1 Almost there! ($%.2f remaining)\\n\", remaining)\n} else {\n    fmt.Printf(\"\ud83d\udcca In progress ($%.2f remaining)\\n\", remaining)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#5-best-trading-day-this-week","title":"5) Best trading day this week","text":"<pre><code>deals, _ := sugar.GetDealsThisWeek()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this week\")\n    return\n}\n\n// Group by day and calculate daily profit\ndailyProfit := make(map[string]float64)\n\nfor _, deal := range deals {\n    dayKey := deal.TimeClose.Format(\"Monday 01/02\")\n    dailyProfit[dayKey] += deal.Profit\n}\n\nvar bestDay string\nvar bestProfit float64 = -999999\n\nfor day, profit := range dailyProfit {\n    if profit &gt; bestProfit {\n        bestProfit = profit\n        bestDay = day\n    }\n}\n\nfmt.Println(\"This Week's Best Day:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Day:     %s\\n\", bestDay)\nfmt.Printf(\"Profit:  $%.2f\\n\", bestProfit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#6-symbol-performance-this-week","title":"6) Symbol performance this week","text":"<pre><code>deals, _ := sugar.GetDealsThisWeek()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this week\")\n    return\n}\n\nsymbolStats := make(map[string]struct {\n    Count  int\n    Profit float64\n})\n\nfor _, deal := range deals {\n    stats := symbolStats[deal.Symbol]\n    stats.Count++\n    stats.Profit += deal.Profit\n    symbolStats[deal.Symbol] = stats\n}\n\nfmt.Println(\"This Week - Symbol Performance:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor symbol, stats := range symbolStats {\n    avgProfit := stats.Profit / float64(stats.Count)\n\n    status := \"\u2705\"\n    if stats.Profit &lt; 0 {\n        status = \"\u274c\"\n    }\n\n    fmt.Printf(\"%s %-8s: %d trades, $%.2f (avg: $%.2f)\\n\",\n        status, symbol, stats.Count, stats.Profit, avgProfit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#7-week-over-week-comparison","title":"7) Week-over-week comparison","text":"<pre><code>thisWeekDeals, _ := sugar.GetDealsThisWeek()\n\n// Get last week's range\nnow := time.Now()\nweekday := int(now.Weekday())\nif weekday == 0 {\n    weekday = 7\n}\n\n// Last week: previous Monday to Sunday\nlastMonday := now.AddDate(0, 0, -(weekday + 6))\nlastSunday := now.AddDate(0, 0, -(weekday))\n\nlastWeekDeals, _ := sugar.GetDealsDateRange(lastMonday, lastSunday)\n\nthisWeekProfit := 0.0\nfor _, deal := range thisWeekDeals {\n    thisWeekProfit += deal.Profit\n}\n\nlastWeekProfit := 0.0\nfor _, deal := range lastWeekDeals {\n    lastWeekProfit += deal.Profit\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      WEEK-OVER-WEEK COMPARISON        \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Last week:  %d trades, $%.2f\\n\",\n    len(lastWeekDeals), lastWeekProfit)\nfmt.Printf(\"This week:  %d trades, $%.2f\\n\",\n    len(thisWeekDeals), thisWeekProfit)\n\ndiff := thisWeekProfit - lastWeekProfit\n\nfmt.Printf(\"\\nDifference: $%.2f \", diff)\nif diff &gt; 0 {\n    pct := (diff / lastWeekProfit) * 100\n    fmt.Printf(\"\ud83d\udcc8 (+%.1f%%)\\n\", pct)\n} else if diff &lt; 0 {\n    pct := (-diff / lastWeekProfit) * 100\n    fmt.Printf(\"\ud83d\udcc9 (-%.1f%%)\\n\", pct)\n} else {\n    fmt.Println(\"\u27a1\ufe0f  (No change)\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#8-weekly-consistency-check","title":"8) Weekly consistency check","text":"<pre><code>deals, _ := sugar.GetDealsThisWeek()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this week\")\n    return\n}\n\n// Group by day\ndailyProfit := make(map[string]float64)\n\nfor _, deal := range deals {\n    dayKey := deal.TimeClose.Format(\"Mon\")\n    dailyProfit[dayKey] += deal.Profit\n}\n\npositiveDays := 0\nfor _, profit := range dailyProfit {\n    if profit &gt; 0 {\n        positiveDays++\n    }\n}\n\nconsistency := float64(positiveDays) / float64(len(dailyProfit)) * 100\n\nfmt.Println(\"Weekly Consistency:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Trading days:     %d\\n\", len(dailyProfit))\nfmt.Printf(\"Profitable days:  %d (%.1f%%)\\n\",\n    positiveDays, consistency)\n\nif consistency &gt;= 80 {\n    fmt.Println(\"\u2705 Excellent consistency\")\n} else if consistency &gt;= 60 {\n    fmt.Println(\"\ud83d\udfe1 Good consistency\")\n} else {\n    fmt.Println(\"\u26a0\ufe0f  Needs improvement\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#9-week-projection-estimate-end-of-week","title":"9) Week projection (estimate end-of-week)","text":"<pre><code>deals, _ := sugar.GetDealsThisWeek()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals this week yet\")\n    return\n}\n\ncurrentProfit := 0.0\nfor _, deal := range deals {\n    currentProfit += deal.Profit\n}\n\nnow := time.Now()\nweekday := int(now.Weekday())\nif weekday == 0 {\n    weekday = 7\n}\n\n// Days elapsed in week (including today)\ndaysElapsed := weekday\n\n// Project to end of week (5 trading days)\nprojectedProfit := (currentProfit / float64(daysElapsed)) * 5.0\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      WEEKLY PROJECTION                \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Days elapsed:      %d\\n\", daysElapsed)\nfmt.Printf(\"Current profit:    $%.2f\\n\", currentProfit)\nfmt.Printf(\"Daily average:     $%.2f\\n\",\n    currentProfit/float64(daysElapsed))\nfmt.Printf(\"Week projection:   $%.2f\\n\", projectedProfit)\n\nfmt.Println(\"\\n\u26a0\ufe0f  Note: Projection assumes consistent daily performance\")\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#10-advanced-weekly-statistics-analyzer","title":"10) Advanced weekly statistics analyzer","text":"<pre><code>type WeeklyStats struct {\n    TotalDeals      int\n    TotalProfit     float64\n    WinRate         float64\n    BestDay         string\n    BestDayProfit   float64\n    WorstDay        string\n    WorstDayProfit  float64\n    MostTradedDay   string\n    DaysTraded      int\n    AvgDailyProfit  float64\n}\n\nfunc AnalyzeWeeklyPerformance(sugar *mt5.MT5Sugar) (*WeeklyStats, error) {\n    deals, err := sugar.GetDealsThisWeek()\n    if err != nil {\n        return nil, err\n    }\n\n    stats := &amp;WeeklyStats{\n        TotalDeals: len(deals),\n    }\n\n    if len(deals) == 0 {\n        return stats, nil\n    }\n\n    winCount := 0\n    dailyProfit := make(map[string]float64)\n    dailyCount := make(map[string]int)\n\n    for _, deal := range deals {\n        stats.TotalProfit += deal.Profit\n\n        if deal.Profit &gt; 0 {\n            winCount++\n        }\n\n        dayKey := deal.TimeClose.Format(\"Mon 01/02\")\n        dailyProfit[dayKey] += deal.Profit\n        dailyCount[dayKey]++\n    }\n\n    stats.WinRate = float64(winCount) / float64(len(deals)) * 100\n    stats.DaysTraded = len(dailyProfit)\n\n    if stats.DaysTraded &gt; 0 {\n        stats.AvgDailyProfit = stats.TotalProfit / float64(stats.DaysTraded)\n    }\n\n    // Find best/worst days\n    maxCount := 0\n    stats.BestDayProfit = -999999\n    stats.WorstDayProfit = 999999\n\n    for day, profit := range dailyProfit {\n        if profit &gt; stats.BestDayProfit {\n            stats.BestDayProfit = profit\n            stats.BestDay = day\n        }\n\n        if profit &lt; stats.WorstDayProfit {\n            stats.WorstDayProfit = profit\n            stats.WorstDay = day\n        }\n\n        if dailyCount[day] &gt; maxCount {\n            maxCount = dailyCount[day]\n            stats.MostTradedDay = day\n        }\n    }\n\n    return stats, nil\n}\n\nfunc (s *WeeklyStats) Print() {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      WEEKLY STATISTICS ANALYSIS       \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    if s.TotalDeals == 0 {\n        fmt.Println(\"No trading activity this week\")\n        return\n    }\n\n    fmt.Printf(\"Total Deals:        %d\\n\", s.TotalDeals)\n    fmt.Printf(\"Total Profit:       $%.2f\\n\", s.TotalProfit)\n    fmt.Printf(\"Win Rate:           %.1f%%\\n\", s.WinRate)\n    fmt.Printf(\"Days Traded:        %d\\n\", s.DaysTraded)\n    fmt.Printf(\"Avg Daily Profit:   $%.2f\\n\\n\", s.AvgDailyProfit)\n\n    fmt.Printf(\"Best Day:           %s ($%.2f)\\n\",\n        s.BestDay, s.BestDayProfit)\n    fmt.Printf(\"Worst Day:          %s ($%.2f)\\n\",\n        s.WorstDay, s.WorstDayProfit)\n    fmt.Printf(\"Most Traded Day:    %s\\n\", s.MostTradedDay)\n\n    fmt.Println(\"\\nWeek Assessment:\")\n    if s.TotalProfit &gt; 0 &amp;&amp; s.WinRate &gt;= 60 {\n        fmt.Println(\"\ud83c\udf1f Excellent week\")\n    } else if s.TotalProfit &gt; 0 &amp;&amp; s.WinRate &gt;= 50 {\n        fmt.Println(\"\u2705 Good week\")\n    } else if s.TotalProfit &gt;= 0 {\n        fmt.Println(\"\ud83d\udfe1 Breakeven week\")\n    } else {\n        fmt.Println(\"\u274c Losing week - review strategy\")\n    }\n}\n\n// Usage:\nstats, _ := AnalyzeWeeklyPerformance(sugar)\nstats.Print()\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other time periods:</p> <ul> <li><code>GetDealsToday()</code> - Today's deals</li> <li><code>GetDealsYesterday()</code> - Yesterday's deals</li> <li><code>GetDealsThisMonth()</code> - This month's deals</li> <li><code>GetDealsDateRange()</code> - Custom date range</li> </ul> <p>\ud83c\udf6c Profit calculations:</p> <ul> <li><code>GetProfitThisWeek()</code> - Just this week's profit total</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#1-assuming-week-starts-on-sunday","title":"1) Assuming week starts on Sunday","text":"<pre><code>// \u274c WRONG - week starts Monday in MT5\n// Your local culture might use Sunday\n\n// \u2705 CORRECT - aware that week starts Monday\ndeals, _ := sugar.GetDealsThisWeek()\n// Returns Monday 00:00 to now\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#2-comparing-incomplete-week-to-complete-week","title":"2) Comparing incomplete week to complete week","text":"<pre><code>// \u274c WRONG - comparing mid-week to full week\nthisWeekProfit, _ := sugar.GetProfitThisWeek()  // Mon-Wed\nlastWeekProfit := 500.0                         // Mon-Fri\n// Not fair comparison!\n\n// \u2705 CORRECT - note the difference\nfmt.Println(\"This week (incomplete) vs last week (complete)\")\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#3-empty-slice-on-sundaymonday","title":"3) Empty slice on Sunday/Monday","text":"<pre><code>// \u274c WRONG - not handling early week\ndeals, _ := sugar.GetDealsThisWeek()\navgProfit := totalProfit / len(deals) // Panic if empty!\n\n// \u2705 CORRECT - check for empty\nif len(deals) &gt; 0 {\n    avgProfit := totalProfit / float64(len(deals))\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Week starts Monday - MT5 uses Monday as first day of week</p> </li> <li> <p>Incomplete data - Mid-week calls return partial week data</p> </li> <li> <p>Performance - 5-second timeout, suitable for regular calls</p> </li> <li> <p>Empty OK - Returns empty slice if no trades (not error)</p> </li> <li> <p>Auto-range - Automatically calculates Monday 00:00 to now</p> </li> </ol>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsThisWeek/#week-range-calculation","title":"\ud83d\udcca Week Range Calculation","text":"<pre><code>Week range calculation:\nnow = time.Now()\nweekday = int(now.Weekday())\nif weekday == 0 { weekday = 7 }  // Sunday becomes 7\n\nstartOfWeek = now - (weekday - 1) days at 00:00:00\n\nReturns all deals from startOfWeek to now\n</code></pre> <p>See also: <code>GetDealsToday.md</code>, <code>GetDealsThisMonth.md</code>, <code>GetProfitThisWeek.md</code>, <code>GetDealsDateRange.md</code></p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/","title":"\ud83d\udcc5\ud83d\udcbc Get Deals Today (<code>GetDealsToday</code>)","text":"<p>Sugar method: Returns all closed positions (deals) from today (00:00 to now).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetDealsToday()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Slice of position history info</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetDealsToday() ([]*pb.PositionHistoryInfo, error)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters (auto-calculates today's range) Output Type Description <code>[]*pb.PositionHistoryInfo</code> slice All closed positions from today <code>error</code> <code>error</code> Error if retrieval failed"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get all closed trades from today (00:00 to current time).</li> <li>Why you need it: Daily performance tracking, today's profit/loss analysis, trade review.</li> <li>Sanity check: Returns empty slice if no deals today. Automatically calculates today's time range.</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Daily reports - Generate today's trading summary</p> <p>\u2705 Performance tracking - Monitor today's profit/loss</p> <p>\u2705 Trade journal - Review today's completed trades</p> <p>\u2705 Real-time updates - Check latest closed positions</p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#1-basic-usage-show-todays-deals","title":"1) Basic usage - show today's deals","text":"<pre><code>deals, err := sugar.GetDealsToday()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals today\")\n    return\n}\n\nfmt.Printf(\"Today's deals: %d\\n\\n\", len(deals))\n\nfor i, deal := range deals {\n    fmt.Printf(\"%d. Ticket #%d: %s %.2f lots\\n\",\n        i+1, deal.Ticket, deal.Symbol, deal.Volume)\n    fmt.Printf(\"   Profit: $%.2f\\n\", deal.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#2-calculate-todays-profit","title":"2) Calculate today's profit","text":"<pre><code>deals, _ := sugar.GetDealsToday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No trades today\")\n    return\n}\n\ntotalProfit := 0.0\nwinCount := 0\nlossCount := 0\n\nfor _, deal := range deals {\n    totalProfit += deal.Profit\n\n    if deal.Profit &gt; 0 {\n        winCount++\n    } else if deal.Profit &lt; 0 {\n        lossCount++\n    }\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      TODAY'S PERFORMANCE              \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\nfmt.Printf(\"Total trades: %d\\n\", len(deals))\nfmt.Printf(\"Winners:      %d (%.1f%%)\\n\", winCount,\n    float64(winCount)/float64(len(deals))*100)\nfmt.Printf(\"Losers:       %d (%.1f%%)\\n\", lossCount,\n    float64(lossCount)/float64(len(deals))*100)\nfmt.Printf(\"Total P/L:    $%.2f\\n\", totalProfit)\n\nif totalProfit &gt; 0 {\n    fmt.Println(\"\u2705 Profitable day\")\n} else {\n    fmt.Println(\"\u274c Losing day\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#3-todays-trading-summary-by-symbol","title":"3) Today's trading summary by symbol","text":"<pre><code>deals, _ := sugar.GetDealsToday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals today\")\n    return\n}\n\n// Group by symbol\nsymbolStats := make(map[string]struct {\n    Count  int\n    Profit float64\n})\n\nfor _, deal := range deals {\n    stats := symbolStats[deal.Symbol]\n    stats.Count++\n    stats.Profit += deal.Profit\n    symbolStats[deal.Symbol] = stats\n}\n\nfmt.Println(\"Today's Performance by Symbol:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor symbol, stats := range symbolStats {\n    fmt.Printf(\"%-8s: %d trades, $%.2f\\n\",\n        symbol, stats.Count, stats.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#4-find-largest-winloss-today","title":"4) Find largest win/loss today","text":"<pre><code>deals, _ := sugar.GetDealsToday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals today\")\n    return\n}\n\nvar largestWin *pb.PositionHistoryInfo\nvar largestLoss *pb.PositionHistoryInfo\n\nfor _, deal := range deals {\n    if largestWin == nil || deal.Profit &gt; largestWin.Profit {\n        largestWin = deal\n    }\n\n    if largestLoss == nil || deal.Profit &lt; largestLoss.Profit {\n        largestLoss = deal\n    }\n}\n\nfmt.Println(\"Today's Extremes:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nif largestWin != nil {\n    fmt.Printf(\"\ud83c\udfc6 Largest win:\\n\")\n    fmt.Printf(\"   #%d %s %.2f lots: $%.2f\\n\",\n        largestWin.Ticket, largestWin.Symbol,\n        largestWin.Volume, largestWin.Profit)\n}\n\nif largestLoss != nil &amp;&amp; largestLoss.Profit &lt; 0 {\n    fmt.Printf(\"\\n\ud83d\udc94 Largest loss:\\n\")\n    fmt.Printf(\"   #%d %s %.2f lots: $%.2f\\n\",\n        largestLoss.Ticket, largestLoss.Symbol,\n        largestLoss.Volume, largestLoss.Profit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#5-track-hourly-trading-activity","title":"5) Track hourly trading activity","text":"<pre><code>deals, _ := sugar.GetDealsToday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals today\")\n    return\n}\n\n// Group by hour\nhourlyActivity := make(map[int]int)\n\nfor _, deal := range deals {\n    hour := deal.TimeClose.Hour()\n    hourlyActivity[hour]++\n}\n\nfmt.Println(\"Hourly Trading Activity:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor hour := 0; hour &lt; 24; hour++ {\n    count := hourlyActivity[hour]\n    if count &gt; 0 {\n        fmt.Printf(\"%02d:00 - %02d:59: %d trades\\n\",\n            hour, hour, count)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#6-check-if-breakeven-or-profitable-today","title":"6) Check if breakeven or profitable today","text":"<pre><code>deals, _ := sugar.GetDealsToday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No trades today - day just started?\")\n    return\n}\n\ntotalProfit := 0.0\nfor _, deal := range deals {\n    totalProfit += deal.Profit\n}\n\nfmt.Printf(\"Today: %d trades, $%.2f\\n\", len(deals), totalProfit)\n\nswitch {\ncase totalProfit &gt; 100:\n    fmt.Println(\"\ud83c\udf89 Great day! Target exceeded\")\ncase totalProfit &gt; 0:\n    fmt.Println(\"\u2705 Profitable day\")\ncase totalProfit == 0:\n    fmt.Println(\"\u27a1\ufe0f  Breakeven\")\ncase totalProfit &gt; -100:\n    fmt.Println(\"\u26a0\ufe0f  Small loss - recoverable\")\ndefault:\n    fmt.Println(\"\ud83d\uded1 Significant loss - stop trading\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#7-real-time-deal-monitor","title":"7) Real-time deal monitor","text":"<pre><code>func MonitorTodaysDeals(sugar *mt5.MT5Sugar, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    previousCount := 0\n\n    for range ticker.C {\n        deals, _ := sugar.GetDealsToday()\n        currentCount := len(deals)\n\n        if currentCount &gt; previousCount {\n            // New deals closed\n            newDeals := currentCount - previousCount\n\n            // Get latest deal\n            if len(deals) &gt; 0 {\n                latest := deals[len(deals)-1]\n\n                fmt.Printf(\"[%s] New deal closed!\\n\",\n                    time.Now().Format(\"15:04:05\"))\n                fmt.Printf(\"   #%d %s: $%.2f\\n\",\n                    latest.Ticket, latest.Symbol, latest.Profit)\n            }\n        }\n\n        previousCount = currentCount\n    }\n}\n\n// Usage: Monitor every 10 seconds\ngo MonitorTodaysDeals(sugar, 10*time.Second)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#8-daily-performance-grade","title":"8) Daily performance grade","text":"<pre><code>deals, _ := sugar.GetDealsToday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No trades today - grade: N/A\")\n    return\n}\n\ntotalProfit := 0.0\nwinCount := 0\n\nfor _, deal := range deals {\n    totalProfit += deal.Profit\n    if deal.Profit &gt; 0 {\n        winCount++\n    }\n}\n\nwinRate := float64(winCount) / float64(len(deals)) * 100\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      TODAY'S PERFORMANCE GRADE        \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Trades:    %d\\n\", len(deals))\nfmt.Printf(\"Win rate:  %.1f%%\\n\", winRate)\nfmt.Printf(\"P/L:       $%.2f\\n\\n\", totalProfit)\n\n// Grade based on win rate and profitability\ngrade := \"\"\nif totalProfit &gt; 0 &amp;&amp; winRate &gt;= 70 {\n    grade = \"\ud83c\udf1f A+ (Excellent)\"\n} else if totalProfit &gt; 0 &amp;&amp; winRate &gt;= 60 {\n    grade = \"\u2b50 A (Very Good)\"\n} else if totalProfit &gt; 0 &amp;&amp; winRate &gt;= 50 {\n    grade = \"\u2705 B (Good)\"\n} else if totalProfit &gt;= 0 {\n    grade = \"\ud83d\udfe1 C (Fair)\"\n} else if totalProfit &gt; -100 {\n    grade = \"\u26a0\ufe0f  D (Poor)\"\n} else {\n    grade = \"\u274c F (Fail)\"\n}\n\nfmt.Printf(\"Grade:     %s\\n\", grade)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#9-export-todays-deals-to-csv","title":"9) Export today's deals to CSV","text":"<pre><code>deals, _ := sugar.GetDealsToday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals to export\")\n    return\n}\n\nfilename := fmt.Sprintf(\"deals_%s.csv\",\n    time.Now().Format(\"2006-01-02\"))\n\nfile, _ := os.Create(filename)\ndefer file.Close()\n\nwriter := csv.NewWriter(file)\ndefer writer.Flush()\n\n// Header\nwriter.Write([]string{\n    \"Ticket\", \"Symbol\", \"Volume\", \"Profit\",\n    \"Open Time\", \"Close Time\", \"Duration\"})\n\n// Data\nfor _, deal := range deals {\n    duration := deal.TimeClose.Sub(deal.TimeOpen)\n\n    writer.Write([]string{\n        fmt.Sprintf(\"%d\", deal.Ticket),\n        deal.Symbol,\n        fmt.Sprintf(\"%.2f\", deal.Volume),\n        fmt.Sprintf(\"%.2f\", deal.Profit),\n        deal.TimeOpen.Format(\"15:04:05\"),\n        deal.TimeClose.Format(\"15:04:05\"),\n        duration.String(),\n    })\n}\n\nfmt.Printf(\"\u2705 Exported %d deals to %s\\n\", len(deals), filename)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#10-advanced-daily-statistics-manager","title":"10) Advanced daily statistics manager","text":"<pre><code>type DailyDealStats struct {\n    TotalDeals    int\n    WinningDeals  int\n    LosingDeals   int\n    TotalProfit   float64\n    LargestWin    float64\n    LargestLoss   float64\n    AvgProfit     float64\n    WinRate       float64\n}\n\nfunc GetDailyDealStats(sugar *mt5.MT5Sugar) (*DailyDealStats, error) {\n    deals, err := sugar.GetDealsToday()\n    if err != nil {\n        return nil, err\n    }\n\n    stats := &amp;DailyDealStats{\n        TotalDeals: len(deals),\n    }\n\n    if len(deals) == 0 {\n        return stats, nil\n    }\n\n    stats.LargestWin = 0\n    stats.LargestLoss = 0\n\n    for _, deal := range deals {\n        stats.TotalProfit += deal.Profit\n\n        if deal.Profit &gt; 0 {\n            stats.WinningDeals++\n            if deal.Profit &gt; stats.LargestWin {\n                stats.LargestWin = deal.Profit\n            }\n        } else if deal.Profit &lt; 0 {\n            stats.LosingDeals++\n            if deal.Profit &lt; stats.LargestLoss {\n                stats.LargestLoss = deal.Profit\n            }\n        }\n    }\n\n    stats.AvgProfit = stats.TotalProfit / float64(len(deals))\n    stats.WinRate = float64(stats.WinningDeals) / float64(len(deals)) * 100\n\n    return stats, nil\n}\n\nfunc (s *DailyDealStats) Print() {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      DAILY DEAL STATISTICS            \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    if s.TotalDeals == 0 {\n        fmt.Println(\"No deals today\")\n        return\n    }\n\n    fmt.Printf(\"Total Deals:     %d\\n\", s.TotalDeals)\n    fmt.Printf(\"Winning:         %d (%.1f%%)\\n\",\n        s.WinningDeals, s.WinRate)\n    fmt.Printf(\"Losing:          %d (%.1f%%)\\n\",\n        s.LosingDeals, 100-s.WinRate)\n    fmt.Printf(\"\\n\")\n    fmt.Printf(\"Total Profit:    $%.2f\\n\", s.TotalProfit)\n    fmt.Printf(\"Average P/L:     $%.2f\\n\", s.AvgProfit)\n    fmt.Printf(\"Largest Win:     $%.2f\\n\", s.LargestWin)\n    fmt.Printf(\"Largest Loss:    $%.2f\\n\", s.LargestLoss)\n}\n\n// Usage:\nstats, _ := GetDailyDealStats(sugar)\nstats.Print()\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other time periods:</p> <ul> <li><code>GetDealsYesterday()</code> - Yesterday's deals</li> <li><code>GetDealsThisWeek()</code> - This week's deals</li> <li><code>GetDealsThisMonth()</code> - This month's deals</li> <li><code>GetDealsDateRange()</code> - Custom date range</li> </ul> <p>\ud83c\udf6c Profit calculations:</p> <ul> <li><code>GetProfitToday()</code> - Just today's profit total</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#1-assuming-deals-exist","title":"1) Assuming deals exist","text":"<pre><code>// \u274c WRONG - might panic if no deals\ndeals, _ := sugar.GetDealsToday()\nfirstDeal := deals[0] // Panic if empty!\n\n// \u2705 CORRECT - check length first\ndeals, _ := sugar.GetDealsToday()\nif len(deals) &gt; 0 {\n    firstDeal := deals[0]\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#2-not-considering-timezone","title":"2) Not considering timezone","text":"<pre><code>// \u274c WRONG - \"today\" depends on server timezone\n// MT5 server might be in different timezone\ndeals, _ := sugar.GetDealsToday()\n\n// \u2705 CORRECT - aware of timezone difference\n// Today = 00:00 server time to now server time\ndeals, _ := sugar.GetDealsToday()\nfmt.Println(\"Deals from server's 'today' (00:00 to now)\")\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#3-treating-as-real-time-feed","title":"3) Treating as real-time feed","text":"<pre><code>// \u274c WRONG - this is closed positions only!\ndeals, _ := sugar.GetDealsToday()\n// This doesn't include currently OPEN positions\n\n// \u2705 CORRECT - for open positions use different method\nopenPositions, _ := sugar.GetOpenPositions() // Current positions\nclosedDeals, _ := sugar.GetDealsToday()      // Closed today\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Empty slice OK - Returns empty slice if no deals (not an error)</p> </li> <li> <p>Closed only - Only includes closed positions, not currently open</p> </li> <li> <p>Server time - \"Today\" is based on MT5 server time (00:00 server time)</p> </li> <li> <p>Performance - Uses 5-second timeout, suitable for frequent calls</p> </li> <li> <p>Auto-range - Automatically calculates today's range (00:00 to now)</p> </li> </ol>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsToday/#deal-structure","title":"\ud83d\udcca Deal Structure","text":"<p>Each deal (<code>*pb.PositionHistoryInfo</code>) contains: <pre><code>Ticket       - Position ticket number\nSymbol       - Trading symbol (e.g., \"EURUSD\")\nVolume       - Trade volume in lots\nProfit       - Realized profit/loss\nCommission   - Trading commission\nSwap         - Swap charges\nTimeOpen     - Position open time\nTimeClose    - Position close time\nPriceOpen    - Entry price\nPriceClose   - Exit price\nType         - Position type (BUY/SELL)\n</code></pre></p> <p>See also: <code>GetDealsYesterday.md</code>, <code>GetDealsThisWeek.md</code>, <code>GetProfitToday.md</code>, <code>GetDealsDateRange.md</code></p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/","title":"\ud83d\udcc5\ud83d\udccb Get Deals Yesterday (<code>GetDealsYesterday</code>)","text":"<p>Sugar method: Returns all closed positions (deals) from yesterday (full day 00:00 to 23:59:59).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetDealsYesterday()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Slice of position history info</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetDealsYesterday() ([]*pb.PositionHistoryInfo, error)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters (auto-calculates yesterday's range) Output Type Description <code>[]*pb.PositionHistoryInfo</code> slice All closed positions from yesterday <code>error</code> <code>error</code> Error if retrieval failed"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get all closed trades from yesterday's full trading day.</li> <li>Why you need it: Historical analysis, compare with today, daily reports.</li> <li>Sanity check: Returns empty slice if no deals yesterday. Auto-calculates full day range.</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Daily comparisons - Compare yesterday vs today</p> <p>\u2705 Historical analysis - Review previous day's performance</p> <p>\u2705 Morning reports - Check yesterday's results at day start</p> <p>\u2705 Trend analysis - Track daily performance over time</p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#1-basic-usage-show-yesterdays-deals","title":"1) Basic usage - show yesterday's deals","text":"<pre><code>deals, err := sugar.GetDealsYesterday()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals yesterday\")\n    return\n}\n\nfmt.Printf(\"Yesterday's deals: %d\\n\\n\", len(deals))\n\ntotalProfit := 0.0\nfor i, deal := range deals {\n    fmt.Printf(\"%d. #%d %s: $%.2f\\n\",\n        i+1, deal.Ticket, deal.Symbol, deal.Profit)\n    totalProfit += deal.Profit\n}\n\nfmt.Printf(\"\\nTotal: $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#2-compare-yesterday-vs-today","title":"2) Compare yesterday vs today","text":"<pre><code>yesterdayDeals, _ := sugar.GetDealsYesterday()\ntodayDeals, _ := sugar.GetDealsToday()\n\nyesterdayProfit := 0.0\nfor _, deal := range yesterdayDeals {\n    yesterdayProfit += deal.Profit\n}\n\ntodayProfit := 0.0\nfor _, deal := range todayDeals {\n    todayProfit += deal.Profit\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      YESTERDAY VS TODAY               \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Yesterday: %d trades, $%.2f\\n\",\n    len(yesterdayDeals), yesterdayProfit)\nfmt.Printf(\"Today:     %d trades, $%.2f\\n\",\n    len(todayDeals), todayProfit)\n\ndiff := todayProfit - yesterdayProfit\n\nfmt.Printf(\"\\nDifference: $%.2f \", diff)\nif diff &gt; 0 {\n    fmt.Printf(\"\ud83d\udcc8 (Better today)\\n\")\n} else if diff &lt; 0 {\n    fmt.Printf(\"\ud83d\udcc9 (Worse today)\\n\")\n} else {\n    fmt.Println(\"\u27a1\ufe0f  (Same)\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#3-yesterdays-win-rate","title":"3) Yesterday's win rate","text":"<pre><code>deals, _ := sugar.GetDealsYesterday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals yesterday\")\n    return\n}\n\nwinCount := 0\nlossCount := 0\ntotalProfit := 0.0\n\nfor _, deal := range deals {\n    totalProfit += deal.Profit\n\n    if deal.Profit &gt; 0 {\n        winCount++\n    } else if deal.Profit &lt; 0 {\n        lossCount++\n    }\n}\n\nwinRate := float64(winCount) / float64(len(deals)) * 100\n\nfmt.Println(\"Yesterday's Performance:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Total trades: %d\\n\", len(deals))\nfmt.Printf(\"Winners:      %d (%.1f%%)\\n\", winCount, winRate)\nfmt.Printf(\"Losers:       %d (%.1f%%)\\n\", lossCount, 100-winRate)\nfmt.Printf(\"Total P/L:    $%.2f\\n\", totalProfit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#4-morning-report-yesterdays-summary","title":"4) Morning report - yesterday's summary","text":"<pre><code>func ShowMorningReport(sugar *mt5.MT5Sugar) {\n    deals, _ := sugar.GetDealsYesterday()\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      MORNING REPORT - YESTERDAY       \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    if len(deals) == 0 {\n        fmt.Println(\"No trading activity yesterday\")\n        return\n    }\n\n    totalProfit := 0.0\n    symbolProfit := make(map[string]float64)\n\n    for _, deal := range deals {\n        totalProfit += deal.Profit\n        symbolProfit[deal.Symbol] += deal.Profit\n    }\n\n    fmt.Printf(\"Total Trades:  %d\\n\", len(deals))\n    fmt.Printf(\"Total P/L:     $%.2f\\n\\n\", totalProfit)\n\n    fmt.Println(\"By Symbol:\")\n    for symbol, profit := range symbolProfit {\n        fmt.Printf(\"  %-8s: $%.2f\\n\", symbol, profit)\n    }\n\n    if totalProfit &gt; 0 {\n        fmt.Println(\"\\n\u2705 Yesterday was profitable\")\n    } else {\n        fmt.Println(\"\\n\u274c Yesterday was a loss\")\n    }\n}\n\n// Usage: Call this in your morning routine\nShowMorningReport(sugar)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#5-find-bestworst-trades-yesterday","title":"5) Find best/worst trades yesterday","text":"<pre><code>deals, _ := sugar.GetDealsYesterday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals yesterday\")\n    return\n}\n\nvar bestTrade *pb.PositionHistoryInfo\nvar worstTrade *pb.PositionHistoryInfo\n\nfor _, deal := range deals {\n    if bestTrade == nil || deal.Profit &gt; bestTrade.Profit {\n        bestTrade = deal\n    }\n    if worstTrade == nil || deal.Profit &lt; worstTrade.Profit {\n        worstTrade = deal\n    }\n}\n\nfmt.Println(\"Yesterday's Best &amp; Worst:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfmt.Printf(\"\ud83c\udfc6 Best:  #%d %s: $%.2f\\n\",\n    bestTrade.Ticket, bestTrade.Symbol, bestTrade.Profit)\n\nfmt.Printf(\"\ud83d\udc94 Worst: #%d %s: $%.2f\\n\",\n    worstTrade.Ticket, worstTrade.Symbol, worstTrade.Profit)\n\ndiff := bestTrade.Profit - worstTrade.Profit\nfmt.Printf(\"\\nRange: $%.2f\\n\", diff)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#6-yesterdays-trading-hours-analysis","title":"6) Yesterday's trading hours analysis","text":"<pre><code>deals, _ := sugar.GetDealsYesterday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals yesterday\")\n    return\n}\n\n// Analyze when most trades closed\nhourlyCount := make(map[int]int)\nhourlyProfit := make(map[int]float64)\n\nfor _, deal := range deals {\n    hour := deal.TimeClose.Hour()\n    hourlyCount[hour]++\n    hourlyProfit[hour] += deal.Profit\n}\n\nfmt.Println(\"Yesterday's Trading Hours:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor hour := 0; hour &lt; 24; hour++ {\n    count := hourlyCount[hour]\n    if count &gt; 0 {\n        profit := hourlyProfit[hour]\n        fmt.Printf(\"%02d:00-%02d:59: %d trades, $%.2f\\n\",\n            hour, hour, count, profit)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#7-check-if-yesterday-met-target","title":"7) Check if yesterday met target","text":"<pre><code>targetProfit := 100.0 // $100 daily target\n\ndeals, _ := sugar.GetDealsYesterday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No trading yesterday\")\n    return\n}\n\nactualProfit := 0.0\nfor _, deal := range deals {\n    actualProfit += deal.Profit\n}\n\nfmt.Printf(\"Yesterday's Performance:\\n\")\nfmt.Printf(\"Target:  $%.2f\\n\", targetProfit)\nfmt.Printf(\"Actual:  $%.2f\\n\", actualProfit)\n\nif actualProfit &gt;= targetProfit {\n    pct := (actualProfit / targetProfit) * 100\n    fmt.Printf(\"\u2705 Target achieved (%.0f%%)\\n\", pct)\n} else {\n    shortfall := targetProfit - actualProfit\n    fmt.Printf(\"\u274c Missed target by $%.2f\\n\", shortfall)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#8-yesterday-vs-last-7-days-average","title":"8) Yesterday vs last 7 days average","text":"<pre><code>yesterdayDeals, _ := sugar.GetDealsYesterday()\n\nyesterdayProfit := 0.0\nfor _, deal := range yesterdayDeals {\n    yesterdayProfit += deal.Profit\n}\n\n// Get last 7 days\nto := time.Now().AddDate(0, 0, -1) // End at yesterday\nfrom := to.AddDate(0, 0, -7)       // 7 days before\n\nweekDeals, _ := sugar.GetDealsDateRange(from, to)\n\nweekProfit := 0.0\nfor _, deal := range weekDeals {\n    weekProfit += deal.Profit\n}\n\navgProfit := weekProfit / 7.0\n\nfmt.Println(\"Yesterday vs Weekly Average:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Yesterday:       $%.2f\\n\", yesterdayProfit)\nfmt.Printf(\"7-day average:   $%.2f\\n\", avgProfit)\n\ndiff := yesterdayProfit - avgProfit\nif diff &gt; 0 {\n    fmt.Printf(\"Above average by $%.2f \ud83d\udcc8\\n\", diff)\n} else if diff &lt; 0 {\n    fmt.Printf(\"Below average by $%.2f \ud83d\udcc9\\n\", -diff)\n} else {\n    fmt.Println(\"Exactly average \u27a1\ufe0f\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#9-symbol-diversity-check-yesterday","title":"9) Symbol diversity check (yesterday)","text":"<pre><code>deals, _ := sugar.GetDealsYesterday()\n\nif len(deals) == 0 {\n    fmt.Println(\"No deals yesterday\")\n    return\n}\n\nsymbolCount := make(map[string]int)\n\nfor _, deal := range deals {\n    symbolCount[deal.Symbol]++\n}\n\nfmt.Println(\"Yesterday's Symbol Diversity:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"Total symbols traded: %d\\n\\n\", len(symbolCount))\n\nfor symbol, count := range symbolCount {\n    pct := float64(count) / float64(len(deals)) * 100\n    fmt.Printf(\"%-8s: %d trades (%.1f%%)\\n\",\n        symbol, count, pct)\n}\n\n// Diversity assessment\nif len(symbolCount) == 1 {\n    fmt.Println(\"\\n\u26a0\ufe0f  Warning: Trading only 1 symbol\")\n} else if len(symbolCount) &gt;= 3 {\n    fmt.Println(\"\\n\u2705 Good diversification\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#10-advanced-yesterday-performance-analyzer","title":"10) Advanced yesterday performance analyzer","text":"<pre><code>type YesterdayPerformance struct {\n    TotalDeals     int\n    TotalProfit    float64\n    WinRate        float64\n    BestTrade      float64\n    WorstTrade     float64\n    AvgWin         float64\n    AvgLoss        float64\n    ProfitFactor   float64\n    SymbolsTraded  int\n}\n\nfunc AnalyzeYesterday(sugar *mt5.MT5Sugar) (*YesterdayPerformance, error) {\n    deals, err := sugar.GetDealsYesterday()\n    if err != nil {\n        return nil, err\n    }\n\n    perf := &amp;YesterdayPerformance{\n        TotalDeals: len(deals),\n    }\n\n    if len(deals) == 0 {\n        return perf, nil\n    }\n\n    winCount := 0\n    winSum := 0.0\n    lossSum := 0.0\n    symbols := make(map[string]bool)\n\n    for _, deal := range deals {\n        perf.TotalProfit += deal.Profit\n        symbols[deal.Symbol] = true\n\n        if deal.Profit &gt; 0 {\n            winCount++\n            winSum += deal.Profit\n            if deal.Profit &gt; perf.BestTrade {\n                perf.BestTrade = deal.Profit\n            }\n        } else if deal.Profit &lt; 0 {\n            lossSum += deal.Profit\n            if deal.Profit &lt; perf.WorstTrade {\n                perf.WorstTrade = deal.Profit\n            }\n        }\n    }\n\n    perf.WinRate = float64(winCount) / float64(len(deals)) * 100\n    perf.SymbolsTraded = len(symbols)\n\n    if winCount &gt; 0 {\n        perf.AvgWin = winSum / float64(winCount)\n    }\n\n    lossCount := len(deals) - winCount\n    if lossCount &gt; 0 {\n        perf.AvgLoss = lossSum / float64(lossCount)\n    }\n\n    if lossSum != 0 {\n        perf.ProfitFactor = winSum / -lossSum\n    }\n\n    return perf, nil\n}\n\nfunc (p *YesterdayPerformance) Print() {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551    YESTERDAY'S PERFORMANCE ANALYSIS   \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    if p.TotalDeals == 0 {\n        fmt.Println(\"No trading activity yesterday\")\n        return\n    }\n\n    fmt.Printf(\"Total Deals:     %d\\n\", p.TotalDeals)\n    fmt.Printf(\"Total Profit:    $%.2f\\n\", p.TotalProfit)\n    fmt.Printf(\"Win Rate:        %.1f%%\\n\", p.WinRate)\n    fmt.Printf(\"Best Trade:      $%.2f\\n\", p.BestTrade)\n    fmt.Printf(\"Worst Trade:     $%.2f\\n\", p.WorstTrade)\n    fmt.Printf(\"Avg Win:         $%.2f\\n\", p.AvgWin)\n    fmt.Printf(\"Avg Loss:        $%.2f\\n\", p.AvgLoss)\n    fmt.Printf(\"Profit Factor:   %.2f\\n\", p.ProfitFactor)\n    fmt.Printf(\"Symbols Traded:  %d\\n\", p.SymbolsTraded)\n\n    fmt.Println(\"\\nAssessment:\")\n    if p.TotalProfit &gt; 0 &amp;&amp; p.WinRate &gt;= 60 &amp;&amp; p.ProfitFactor &gt;= 1.5 {\n        fmt.Println(\"\ud83c\udf1f Excellent performance\")\n    } else if p.TotalProfit &gt; 0 &amp;&amp; p.WinRate &gt;= 50 {\n        fmt.Println(\"\u2705 Good performance\")\n    } else if p.TotalProfit &gt;= 0 {\n        fmt.Println(\"\ud83d\udfe1 Breakeven - could improve\")\n    } else {\n        fmt.Println(\"\u274c Needs improvement\")\n    }\n}\n\n// Usage:\nperf, _ := AnalyzeYesterday(sugar)\nperf.Print()\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other time periods:</p> <ul> <li><code>GetDealsToday()</code> - Today's deals (00:00 to now)</li> <li><code>GetDealsThisWeek()</code> - This week's deals</li> <li><code>GetDealsThisMonth()</code> - This month's deals</li> <li><code>GetDealsDateRange()</code> - Custom date range</li> </ul> <p>\ud83c\udf6c Profit calculations:</p> <ul> <li><code>GetProfitToday()</code> - Today's profit total</li> <li><code>GetProfitThisWeek()</code> - This week's profit</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#1-calling-too-early-in-the-day","title":"1) Calling too early in the day","text":"<pre><code>// \u274c WRONG - calling at 00:01 AM\n// Yesterday's data might not be finalized yet\ndeals, _ := sugar.GetDealsYesterday()\n\n// \u2705 CORRECT - call after market has been open for a while\n// Or in morning report after server has processed\ntime.Sleep(1 * time.Hour) // Wait until reasonable hour\ndeals, _ := sugar.GetDealsYesterday()\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#2-timezone-confusion","title":"2) Timezone confusion","text":"<pre><code>// \u274c WRONG - \"yesterday\" is server timezone\n// Your local \"yesterday\" might be different\ndeals, _ := sugar.GetDealsYesterday()\n\n// \u2705 CORRECT - aware of timezone\n// Yesterday = server's yesterday (full 24h period)\ndeals, _ := sugar.GetDealsYesterday()\nfmt.Println(\"Server's yesterday (full day)\")\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#3-not-handling-empty-result","title":"3) Not handling empty result","text":"<pre><code>// \u274c WRONG - assuming deals exist\ndeals, _ := sugar.GetDealsYesterday()\nfirstDeal := deals[0] // Panic if no deals!\n\n// \u2705 CORRECT - check length\nif len(deals) &gt; 0 {\n    firstDeal := deals[0]\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Full day - Returns complete 24-hour period (00:00 to 23:59:59)</p> </li> <li> <p>Morning reports - Perfect for generating morning summary reports</p> </li> <li> <p>Comparison - Easy to compare with today using <code>GetDealsToday()</code></p> </li> <li> <p>Empty OK - Returns empty slice if no trading (not an error)</p> </li> <li> <p>Performance - 5-second timeout, suitable for frequent calls</p> </li> </ol>"},{"location":"MT5Sugar/8.%20History_Statistics/GetDealsYesterday/#yesterdays-date-range","title":"\ud83d\udcca Yesterday's Date Range","text":"<pre><code>Yesterday's range calculation:\nnow = time.Now()\nyesterday = now.AddDate(0, 0, -1)\nstartOfYesterday = yesterday at 00:00:00\nendOfYesterday = yesterday at 23:59:59\n\nReturns all deals in this complete 24-hour window\n</code></pre> <p>See also: <code>GetDealsToday.md</code>, <code>GetDealsThisWeek.md</code>, <code>GetDealsDateRange.md</code></p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/","title":"\ud83d\udcb0\ud83d\udcc6 Get Profit This Month (<code>GetProfitThisMonth</code>)","text":"<p>Sugar method: Returns total realized profit/loss from this month's closed positions (1st day to now).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetProfitThisMonth()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Total profit as float64</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetProfitThisMonth() (float64, error)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters (auto-calculates month range) Output Type Description <code>float64</code> float Total realized profit/loss from this month <code>error</code> <code>error</code> Error if calculation failed"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get this month's total profit/loss from closed positions (1st day 00:00 to now).</li> <li>Why you need it: Monthly performance tracking, goal monitoring, month-over-month comparison.</li> <li>Sanity check: Returns 0 if no closed positions this month. Month starts on 1st.</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Monthly targets - Check if monthly goal met</p> <p>\u2705 Performance tracking - Monitor month-to-date profit</p> <p>\u2705 Dashboard display - Show monthly performance</p> <p>\u2705 Reporting - Generate monthly profit summaries</p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#1-basic-usage-check-this-months-profit","title":"1) Basic usage - check this month's profit","text":"<pre><code>profit, err := sugar.GetProfitThisMonth()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nmonthName := time.Now().Format(\"January\")\n\nfmt.Printf(\"%s profit: $%.2f\\n\", monthName, profit)\n\nif profit &gt; 0 {\n    fmt.Println(\"\u2705 Profitable month so far\")\n} else if profit &lt; 0 {\n    fmt.Println(\"\u274c Losing month so far\")\n} else {\n    fmt.Println(\"\u27a1\ufe0f  Breakeven\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#2-monthly-target-tracking","title":"2) Monthly target tracking","text":"<pre><code>monthlyTarget := 2000.0 // $2000 per month\n\nprofit, _ := sugar.GetProfitThisMonth()\n\nprogress := (profit / monthlyTarget) * 100\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      MONTHLY TARGET PROGRESS          \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nmonthName := time.Now().Format(\"January 2006\")\nfmt.Printf(\"Month:      %s\\n\\n\", monthName)\n\nfmt.Printf(\"Target:     $%.2f\\n\", monthlyTarget)\nfmt.Printf(\"Current:    $%.2f\\n\", profit)\nfmt.Printf(\"Progress:   %.1f%%\\n\\n\", progress)\n\n// Calculate if on track\ndayOfMonth := time.Now().Day()\ndaysInMonth := time.Date(time.Now().Year(), time.Now().Month()+1, 0,\n    0, 0, 0, 0, time.Now().Location()).Day()\n\nmonthProgress := float64(dayOfMonth) / float64(daysInMonth) * 100\n\nif profit &gt;= monthlyTarget {\n    fmt.Printf(\"\ud83c\udfaf Target achieved! (+$%.2f)\\n\", profit-monthlyTarget)\n} else {\n    remaining := monthlyTarget - profit\n    fmt.Printf(\"Remaining:  $%.2f\\n\", remaining)\n\n    projected := (profit / float64(dayOfMonth)) * float64(daysInMonth)\n    fmt.Printf(\"Projected:  $%.2f\\n\\n\", projected)\n\n    if projected &gt;= monthlyTarget {\n        fmt.Println(\"\u2705 On track to meet target\")\n    } else {\n        shortfall := monthlyTarget - projected\n        fmt.Printf(\"\u26a0\ufe0f  Projected shortfall: $%.2f\\n\", shortfall)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#3-month-over-month-comparison","title":"3) Month-over-month comparison","text":"<pre><code>thisMonthProfit, _ := sugar.GetProfitThisMonth()\n\n// Get last month\nnow := time.Now()\nfirstOfThisMonth := time.Date(now.Year(), now.Month(), 1, 0, 0, 0, 0, now.Location())\nfirstOfLastMonth := firstOfThisMonth.AddDate(0, -1, 0)\n\nlastMonthDeals, _ := sugar.GetDealsDateRange(\n    firstOfLastMonth,\n    firstOfThisMonth.Add(-time.Second),\n)\n\nlastMonthProfit := 0.0\nfor _, deal := range lastMonthDeals {\n    lastMonthProfit += deal.Profit\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      MONTH-OVER-MONTH COMPARISON      \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nlastMonthName := firstOfLastMonth.Format(\"January\")\nthisMonthName := now.Format(\"January\")\n\nfmt.Printf(\"%s:  $%.2f\\n\", lastMonthName, lastMonthProfit)\nfmt.Printf(\"%s:  $%.2f\\n\", thisMonthName, thisMonthProfit)\n\ndiff := thisMonthProfit - lastMonthProfit\n\nif diff &gt; 0 {\n    if lastMonthProfit != 0 {\n        pct := (diff / lastMonthProfit) * 100\n        fmt.Printf(\"\\nImprovement: +$%.2f (%.1f%%) \ud83d\udcc8\\n\", diff, pct)\n    } else {\n        fmt.Printf(\"\\nImprovement: +$%.2f \ud83d\udcc8\\n\", diff)\n    }\n} else if diff &lt; 0 {\n    if lastMonthProfit != 0 {\n        pct := (-diff / lastMonthProfit) * 100\n        fmt.Printf(\"\\nDecline: $%.2f (-%.1f%%) \ud83d\udcc9\\n\", -diff, pct)\n    } else {\n        fmt.Printf(\"\\nDecline: $%.2f \ud83d\udcc9\\n\", -diff)\n    }\n} else {\n    fmt.Println(\"\\nNo change \u27a1\ufe0f\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#4-daily-average-this-month","title":"4) Daily average this month","text":"<pre><code>profit, _ := sugar.GetProfitThisMonth()\n\nnow := time.Now()\ndaysElapsed := now.Day()\ndaysInMonth := time.Date(now.Year(), now.Month()+1, 0, 0, 0, 0, 0, now.Location()).Day()\n\navgPerDay := profit / float64(daysElapsed)\nprojectedMonthEnd := avgPerDay * float64(daysInMonth)\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      MONTHLY PERFORMANCE ANALYSIS     \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nmonthName := now.Format(\"January 2006\")\nfmt.Printf(\"Month:              %s\\n\\n\", monthName)\n\nfmt.Printf(\"Days elapsed:       %d / %d\\n\", daysElapsed, daysInMonth)\nfmt.Printf(\"Month-to-date:      $%.2f\\n\", profit)\nfmt.Printf(\"Daily average:      $%.2f\\n\", avgPerDay)\nfmt.Printf(\"Month projection:   $%.2f\\n\", projectedMonthEnd)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#5-monthly-profit-limit-check","title":"5) Monthly profit limit check","text":"<pre><code>maxMonthlyLoss := -1000.0 // Stop if lose $1000 in a month\n\nprofit, _ := sugar.GetProfitThisMonth()\n\nmonthName := time.Now().Format(\"January\")\n\nfmt.Printf(\"%s profit: $%.2f\\n\", monthName, profit)\n\nif profit &lt;= maxMonthlyLoss {\n    fmt.Println(\"\ud83d\uded1 MONTHLY LOSS LIMIT REACHED\")\n    fmt.Println(\"   STOP TRADING AND REVIEW STRATEGY\")\n    return\n}\n\nif profit &lt; maxMonthlyLoss*0.8 {\n    fmt.Printf(\"\u26a0\ufe0f  Warning: Approaching monthly loss limit ($%.2f)\\n\",\n        maxMonthlyLoss)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#6-monthly-dashboard","title":"6) Monthly dashboard","text":"<pre><code>func ShowMonthlyDashboard(sugar *mt5.MT5Sugar) {\n    monthProfit, _ := sugar.GetProfitThisMonth()\n    weekProfit, _ := sugar.GetProfitThisWeek()\n    todayProfit, _ := sugar.GetProfitToday()\n\n    balance, _ := sugar.GetBalance()\n    equity, _ := sugar.GetEquity()\n\n    now := time.Now()\n    monthName := now.Format(\"January 2006\")\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      MONTHLY PERFORMANCE DASHBOARD    \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Month:         %s\\n\\n\", monthName)\n\n    fmt.Printf(\"Balance:       $%.2f\\n\", balance)\n    fmt.Printf(\"Equity:        $%.2f\\n\\n\", equity)\n\n    fmt.Printf(\"This month:    $%.2f\\n\", monthProfit)\n    fmt.Printf(\"This week:     $%.2f\\n\", weekProfit)\n    fmt.Printf(\"Today:         $%.2f\\n\\n\", todayProfit)\n\n    if monthProfit &gt; 0 {\n        monthlyROI := (monthProfit / balance) * 100\n        fmt.Printf(\"Monthly ROI:   +%.2f%%\\n\", monthlyROI)\n    }\n}\n\n// Usage:\nShowMonthlyDashboard(sugar)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#7-last-6-months-tracking","title":"7) Last 6 months tracking","text":"<pre><code>func ShowLast6Months(sugar *mt5.MT5Sugar) {\n    fmt.Println(\"Last 6 Months Performance:\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    now := time.Now()\n\n    for i := 5; i &gt;= 0; i-- {\n        monthStart := time.Date(now.Year(), now.Month()-time.Month(i), 1,\n            0, 0, 0, 0, now.Location())\n\n        monthEnd := monthStart.AddDate(0, 1, 0)\n\n        if monthEnd.After(now) {\n            monthEnd = now\n        } else {\n            monthEnd = monthEnd.Add(-time.Second)\n        }\n\n        deals, _ := sugar.GetDealsDateRange(monthStart, monthEnd)\n\n        profit := 0.0\n        for _, deal := range deals {\n            profit += deal.Profit\n        }\n\n        monthName := monthStart.Format(\"Jan 2006\")\n        status := \"\u2705\"\n        if profit &lt; 0 {\n            status = \"\u274c\"\n        }\n\n        if i == 0 {\n            fmt.Printf(\"%s %-12s: $%.2f (current)\\n\", status, monthName, profit)\n        } else {\n            fmt.Printf(\"%s %-12s: $%.2f\\n\", status, monthName, profit)\n        }\n    }\n}\n\n// Usage:\nShowLast6Months(sugar)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#8-monthly-milestone-tracker","title":"8) Monthly milestone tracker","text":"<pre><code>monthlyMilestones := []struct {\n    Amount  float64\n    Message string\n}{\n    {500, \"\ud83d\udfe2 $500 milestone\"},\n    {1000, \"\u2705 $1,000 milestone\"},\n    {2000, \"\ud83c\udf1f $2,000 milestone - monthly target!\"},\n    {3000, \"\ud83c\udf89 $3,000 milestone - excellent!\"},\n    {5000, \"\ud83c\udfc6 $5,000 milestone - outstanding!\"},\n}\n\nprofit, _ := sugar.GetProfitThisMonth()\n\nmonthName := time.Now().Format(\"January\")\n\nfmt.Printf(\"%s profit: $%.2f\\n\\n\", monthName, profit)\n\nfmt.Println(\"Milestones:\")\nfor _, milestone := range monthlyMilestones {\n    if profit &gt;= milestone.Amount {\n        fmt.Printf(\"\u2705 %s\\n\", milestone.Message)\n    } else {\n        remaining := milestone.Amount - profit\n        fmt.Printf(\"\u2b1c $%.2f to %s\\n\", remaining, milestone.Message)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#9-monthly-consistency-rating","title":"9) Monthly consistency rating","text":"<pre><code>profit, _ := sugar.GetProfitThisMonth()\n\n// Get last 6 months for comparison\nnow := time.Now()\nmonthlyProfits := []float64{}\n\nfor i := 1; i &lt;= 6; i++ {\n    monthStart := time.Date(now.Year(), now.Month()-time.Month(i), 1,\n        0, 0, 0, 0, now.Location())\n    monthEnd := monthStart.AddDate(0, 1, 0).Add(-time.Second)\n\n    deals, _ := sugar.GetDealsDateRange(monthStart, monthEnd)\n\n    monthProfit := 0.0\n    for _, deal := range deals {\n        monthProfit += deal.Profit\n    }\n\n    monthlyProfits = append(monthlyProfits, monthProfit)\n}\n\n// Calculate average\navgMonthlyProfit := 0.0\nfor _, p := range monthlyProfits {\n    avgMonthlyProfit += p\n}\navgMonthlyProfit /= float64(len(monthlyProfits))\n\nfmt.Println(\"Monthly Consistency Analysis:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"This month:   $%.2f\\n\", profit)\nfmt.Printf(\"6-month avg:  $%.2f\\n\\n\", avgMonthlyProfit)\n\nif profit &gt; avgMonthlyProfit*1.2 {\n    fmt.Println(\"\ud83c\udf1f Exceptional month - well above average!\")\n} else if profit &gt; avgMonthlyProfit*0.8 {\n    fmt.Println(\"\u2705 Consistent with recent months\")\n} else {\n    fmt.Println(\"\u26a0\ufe0f  Below recent average - review needed\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#10-advanced-monthly-profit-manager","title":"10) Advanced monthly profit manager","text":"<pre><code>type MonthlyProfitManager struct {\n    Target          float64\n    MaxLoss         float64\n    MinWeekly       float64\n}\n\nfunc NewMonthlyProfitManager(target, maxLoss, minWeekly float64) *MonthlyProfitManager {\n    return &amp;MonthlyProfitManager{\n        Target:    target,\n        MaxLoss:   maxLoss,\n        MinWeekly: minWeekly,\n    }\n}\n\nfunc (mpm *MonthlyProfitManager) Assess(sugar *mt5.MT5Sugar) {\n    monthProfit, _ := sugar.GetProfitThisMonth()\n    weekProfit, _ := sugar.GetProfitThisWeek()\n    todayProfit, _ := sugar.GetProfitToday()\n\n    now := time.Now()\n    dayOfMonth := now.Day()\n    daysInMonth := time.Date(now.Year(), now.Month()+1, 0,\n        0, 0, 0, 0, now.Location()).Day()\n\n    monthName := now.Format(\"January 2006\")\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      MONTHLY PROFIT ASSESSMENT        \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Month:             %s\\n\\n\", monthName)\n\n    fmt.Printf(\"Monthly target:    $%.2f\\n\", mpm.Target)\n    fmt.Printf(\"Current profit:    $%.2f\\n\", monthProfit)\n    fmt.Printf(\"This week:         $%.2f\\n\", weekProfit)\n    fmt.Printf(\"Today:             $%.2f\\n\\n\", todayProfit)\n\n    // Progress\n    progress := (monthProfit / mpm.Target) * 100\n    fmt.Printf(\"Progress:          %.1f%%\\n\\n\", progress)\n\n    // Assessment\n    fmt.Println(\"Assessment:\")\n\n    if monthProfit &gt;= mpm.Target {\n        fmt.Println(\"  \ud83c\udfaf Monthly target achieved!\")\n    } else {\n        remaining := mpm.Target - monthProfit\n        daysLeft := daysInMonth - dayOfMonth\n\n        if daysLeft &gt; 0 {\n            neededPerDay := remaining / float64(daysLeft)\n            fmt.Printf(\"  \ud83d\udcca $%.2f remaining ($%.2f/day needed)\\n\",\n                remaining, neededPerDay)\n        }\n    }\n\n    if monthProfit &lt;= mpm.MaxLoss {\n        fmt.Println(\"  \ud83d\uded1 Monthly loss limit reached\")\n    }\n\n    if weekProfit &lt; mpm.MinWeekly {\n        fmt.Printf(\"  \u26a0\ufe0f  This week below minimum ($%.2f)\\n\", mpm.MinWeekly)\n    }\n\n    // Daily/weekly averages\n    avgDaily := monthProfit / float64(dayOfMonth)\n    fmt.Printf(\"\\nDaily average:     $%.2f\\n\", avgDaily)\n\n    // Estimate weeks\n    weeksInMonth := float64(daysInMonth) / 7.0\n    avgWeekly := monthProfit / (float64(dayOfMonth) / 7.0)\n    fmt.Printf(\"Weekly average:    $%.2f\\n\", avgWeekly)\n\n    if avgWeekly &gt;= mpm.MinWeekly {\n        fmt.Println(\"\u2705 Good weekly pace\")\n    } else {\n        fmt.Println(\"\u26a0\ufe0f  Below target weekly pace\")\n    }\n\n    // Projection\n    projected := avgDaily * float64(daysInMonth)\n    fmt.Printf(\"\\nProjected month:   $%.2f\\n\", projected)\n\n    if projected &gt;= mpm.Target {\n        fmt.Println(\"\u2705 On track for target\")\n    } else {\n        shortfall := mpm.Target - projected\n        fmt.Printf(\"\u26a0\ufe0f  Projected shortfall: $%.2f\\n\", shortfall)\n    }\n}\n\n// Usage:\nmanager := NewMonthlyProfitManager(2000, -1000, 400)\nmanager.Assess(sugar)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other time periods:</p> <ul> <li><code>GetProfitToday()</code> - Today's profit total</li> <li><code>GetProfitThisWeek()</code> - This week's profit total</li> </ul> <p>\ud83c\udf6c Detailed data:</p> <ul> <li><code>GetDealsThisMonth()</code> - Get full month's deal information</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#1-confusing-with-floating-profit","title":"1) Confusing with floating profit","text":"<pre><code>// \u274c WRONG - this is CLOSED positions only\nmonthProfit, _ := sugar.GetProfitThisMonth()\n// Does NOT include currently OPEN positions!\n\n// \u2705 CORRECT - for total including open\nclosedProfit, _ := sugar.GetProfitThisMonth()\nfloatingProfit, _ := sugar.GetProfit()\ntotalProfit := closedProfit + floatingProfit\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#2-early-month-incomplete-data","title":"2) Early month = incomplete data","text":"<pre><code>// \u274c WRONG - comparing Day 5 to full month\nthisMonthProfit, _ := sugar.GetProfitThisMonth()  // Day 5\nlastMonthProfit := 2000.0                         // Full 30 days\n// Not fair comparison!\n\n// \u2705 CORRECT - adjust for days\ndayOfMonth := time.Now().Day()\ndailyAvg := thisMonthProfit / float64(dayOfMonth)\nfmt.Printf(\"Daily average: $%.2f\\n\", dailyAvg)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#3-not-handling-month-boundaries","title":"3) Not handling month boundaries","text":"<pre><code>// \u274c WRONG - month changes at midnight\n// Calling at 23:59 on last day of month\n\n// \u2705 CORRECT - aware of month transitions\nmonthProfit, _ := sugar.GetProfitThisMonth()\nmonthName := time.Now().Format(\"January\")\nfmt.Printf(\"%s profit: $%.2f\\n\", monthName, monthProfit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Month starts 1st - Always starts from 1st day 00:00:00</p> </li> <li> <p>Closed only - Returns profit from CLOSED positions (not open)</p> </li> <li> <p>Zero OK - Returns 0 if no closed positions (not error)</p> </li> <li> <p>Partial data - Mid-month calls return incomplete month</p> </li> <li> <p>Server time - Based on MT5 server timezone</p> </li> </ol>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisMonth/#month-range","title":"\ud83d\udcca Month Range","text":"<pre><code>Month range calculation:\nnow = time.Now()\nstartOfMonth = Date(now.Year(), now.Month(), 1, 0, 0, 0, 0, now.Location())\n\nReturns profit from 1st day 00:00 to now\n</code></pre> <p>See also: <code>GetDealsThisMonth.md</code>, <code>GetProfitToday.md</code>, <code>GetProfitThisWeek.md</code></p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/","title":"\ud83d\udcb0\ud83d\udcca Get Profit This Week (<code>GetProfitThisWeek</code>)","text":"<p>Sugar method: Returns total realized profit/loss from this week's closed positions (Monday to now).</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetProfitThisWeek()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Total profit as float64</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetProfitThisWeek() (float64, error)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters (auto-calculates week range) Output Type Description <code>float64</code> float Total realized profit/loss from this week <code>error</code> <code>error</code> Error if calculation failed"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get this week's total profit/loss from closed positions (Monday 00:00 to now).</li> <li>Why you need it: Weekly performance tracking, target monitoring, week-over-week comparison.</li> <li>Sanity check: Returns 0 if no closed positions this week. Week starts Monday.</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Weekly targets - Check if weekly goal met</p> <p>\u2705 Performance tracking - Monitor week-to-date profit</p> <p>\u2705 Dashboard display - Show weekly performance</p> <p>\u2705 Trend analysis - Track weekly performance over time</p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#1-basic-usage-check-this-weeks-profit","title":"1) Basic usage - check this week's profit","text":"<pre><code>profit, err := sugar.GetProfitThisWeek()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"This week's profit: $%.2f\\n\", profit)\n\nif profit &gt; 0 {\n    fmt.Println(\"\u2705 Profitable week so far\")\n} else if profit &lt; 0 {\n    fmt.Println(\"\u274c Losing week so far\")\n} else {\n    fmt.Println(\"\u27a1\ufe0f  Breakeven\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#2-weekly-target-tracking","title":"2) Weekly target tracking","text":"<pre><code>weeklyTarget := 500.0 // $500 per week\n\nprofit, _ := sugar.GetProfitThisWeek()\n\nprogress := (profit / weeklyTarget) * 100\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      WEEKLY TARGET PROGRESS           \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Target:    $%.2f\\n\", weeklyTarget)\nfmt.Printf(\"Current:   $%.2f\\n\", profit)\nfmt.Printf(\"Progress:  %.1f%%\\n\\n\", progress)\n\nremaining := weeklyTarget - profit\n\nif profit &gt;= weeklyTarget {\n    fmt.Printf(\"\ud83c\udfaf Target achieved! (+$%.2f)\\n\", profit-weeklyTarget)\n} else if progress &gt;= 80 {\n    fmt.Printf(\"\ud83d\udfe1 Almost there! ($%.2f remaining)\\n\", remaining)\n} else {\n    fmt.Printf(\"\ud83d\udcca In progress ($%.2f remaining)\\n\", remaining)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#3-compare-with-last-week","title":"3) Compare with last week","text":"<pre><code>thisWeekProfit, _ := sugar.GetProfitThisWeek()\n\n// Get last week's range\nnow := time.Now()\nweekday := int(now.Weekday())\nif weekday == 0 {\n    weekday = 7\n}\n\nlastWeekStart := now.AddDate(0, 0, -(weekday + 6))\nlastWeekEnd := now.AddDate(0, 0, -(weekday))\n\nlastWeekDeals, _ := sugar.GetDealsDateRange(lastWeekStart, lastWeekEnd)\n\nlastWeekProfit := 0.0\nfor _, deal := range lastWeekDeals {\n    lastWeekProfit += deal.Profit\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      WEEK-OVER-WEEK COMPARISON        \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Last week:  $%.2f\\n\", lastWeekProfit)\nfmt.Printf(\"This week:  $%.2f\\n\", thisWeekProfit)\n\ndiff := thisWeekProfit - lastWeekProfit\n\nif diff &gt; 0 {\n    pct := (diff / lastWeekProfit) * 100\n    fmt.Printf(\"Improvement: +$%.2f (%.1f%%) \ud83d\udcc8\\n\", diff, pct)\n} else if diff &lt; 0 {\n    pct := (-diff / lastWeekProfit) * 100\n    fmt.Printf(\"Decline: $%.2f (-%.1f%%) \ud83d\udcc9\\n\", -diff, pct)\n} else {\n    fmt.Println(\"No change \u27a1\ufe0f\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#4-daily-average-this-week","title":"4) Daily average this week","text":"<pre><code>profit, _ := sugar.GetProfitThisWeek()\n\nnow := time.Now()\nweekday := int(now.Weekday())\nif weekday == 0 {\n    weekday = 7 // Sunday becomes 7\n}\n\ndaysElapsed := weekday\navgPerDay := profit / float64(daysElapsed)\n\n// Project to end of week (5 trading days)\nprojectedWeekEnd := avgPerDay * 5\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      WEEKLY PERFORMANCE ANALYSIS      \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Days elapsed:       %d\\n\", daysElapsed)\nfmt.Printf(\"Week-to-date:       $%.2f\\n\", profit)\nfmt.Printf(\"Daily average:      $%.2f\\n\", avgPerDay)\nfmt.Printf(\"Week projection:    $%.2f\\n\", projectedWeekEnd)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#5-weekly-profit-limit-check","title":"5) Weekly profit limit check","text":"<pre><code>maxWeeklyLoss := -500.0 // Stop if lose $500 in a week\n\nprofit, _ := sugar.GetProfitThisWeek()\n\nfmt.Printf(\"This week's profit: $%.2f\\n\", profit)\n\nif profit &lt;= maxWeeklyLoss {\n    fmt.Println(\"\ud83d\uded1 WEEKLY LOSS LIMIT REACHED\")\n    fmt.Println(\"   REVIEW STRATEGY BEFORE CONTINUING\")\n    return\n}\n\nif profit &lt; maxWeeklyLoss*0.8 {\n    fmt.Printf(\"\u26a0\ufe0f  Warning: Approaching weekly loss limit ($%.2f)\\n\",\n        maxWeeklyLoss)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#6-weekly-progress-dashboard","title":"6) Weekly progress dashboard","text":"<pre><code>func ShowWeeklyDashboard(sugar *mt5.MT5Sugar) {\n    profit, _ := sugar.GetProfitThisWeek()\n\n    // Get account info\n    balance, _ := sugar.GetBalance()\n    equity, _ := sugar.GetEquity()\n\n    // Get today's profit\n    todayProfit, _ := sugar.GetProfitToday()\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      WEEKLY PERFORMANCE DASHBOARD     \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Balance:       $%.2f\\n\", balance)\n    fmt.Printf(\"Equity:        $%.2f\\n\\n\", equity)\n\n    fmt.Printf(\"This week:     $%.2f\\n\", profit)\n    fmt.Printf(\"Today:         $%.2f\\n\\n\", todayProfit)\n\n    if profit &gt; 0 {\n        weeklyROI := (profit / balance) * 100\n        fmt.Printf(\"Weekly ROI:    +%.2f%%\\n\", weeklyROI)\n    }\n}\n\n// Usage:\nShowWeeklyDashboard(sugar)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#7-multi-week-tracking","title":"7) Multi-week tracking","text":"<pre><code>func ShowLastNWeeks(sugar *mt5.MT5Sugar, n int) {\n    fmt.Println(\"Last Weeks Performance:\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    now := time.Now()\n\n    for i := 0; i &lt; n; i++ {\n        // Calculate week range\n        offset := i * 7\n        weekEnd := now.AddDate(0, 0, -offset)\n\n        weekday := int(weekEnd.Weekday())\n        if weekday == 0 {\n            weekday = 7\n        }\n\n        weekStart := weekEnd.AddDate(0, 0, -(weekday - 1))\n        weekStart = time.Date(weekStart.Year(), weekStart.Month(),\n            weekStart.Day(), 0, 0, 0, 0, weekStart.Location())\n\n        if i == 0 {\n            // Current week (partial)\n            deals, _ := sugar.GetDealsThisWeek()\n            profit := 0.0\n            for _, deal := range deals {\n                profit += deal.Profit\n            }\n\n            fmt.Printf(\"This week:   $%.2f (partial)\\n\", profit)\n        } else {\n            // Complete weeks\n            weekEndTime := weekStart.AddDate(0, 0, 7).Add(-time.Second)\n            deals, _ := sugar.GetDealsDateRange(weekStart, weekEndTime)\n\n            profit := 0.0\n            for _, deal := range deals {\n                profit += deal.Profit\n            }\n\n            weekLabel := weekStart.Format(\"Jan 02\")\n            status := \"\u2705\"\n            if profit &lt; 0 {\n                status = \"\u274c\"\n            }\n\n            fmt.Printf(\"%s Week of %s: $%.2f\\n\", status, weekLabel, profit)\n        }\n    }\n}\n\n// Usage: Show last 4 weeks\nShowLastNWeeks(sugar, 4)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#8-weekly-milestone-tracker","title":"8) Weekly milestone tracker","text":"<pre><code>weeklyMilestones := []struct {\n    Amount  float64\n    Message string\n}{\n    {100, \"\ud83d\udfe2 $100 milestone\"},\n    {250, \"\u2705 $250 milestone\"},\n    {500, \"\ud83c\udf1f $500 milestone - weekly target!\"},\n    {750, \"\ud83c\udf89 $750 milestone - excellent week!\"},\n    {1000, \"\ud83c\udfc6 $1000 milestone - outstanding!\"},\n}\n\nprofit, _ := sugar.GetProfitThisWeek()\n\nfmt.Printf(\"This week's profit: $%.2f\\n\\n\", profit)\n\nfmt.Println(\"Milestones:\")\nfor _, milestone := range weeklyMilestones {\n    if profit &gt;= milestone.Amount {\n        fmt.Printf(\"\u2705 %s\\n\", milestone.Message)\n    } else {\n        remaining := milestone.Amount - profit\n        fmt.Printf(\"\u2b1c $%.2f to %s\\n\", remaining, milestone.Message)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#9-weekly-consistency-rating","title":"9) Weekly consistency rating","text":"<pre><code>profit, _ := sugar.GetProfitThisWeek()\n\n// Get last 4 weeks for comparison\nnow := time.Now()\nweeklyProfits := []float64{}\n\nfor i := 1; i &lt;= 4; i++ {\n    offset := i * 7\n    weekEnd := now.AddDate(0, 0, -offset)\n\n    weekday := int(weekEnd.Weekday())\n    if weekday == 0 {\n        weekday = 7\n    }\n\n    weekStart := weekEnd.AddDate(0, 0, -(weekday - 1))\n    weekStart = time.Date(weekStart.Year(), weekStart.Month(),\n        weekStart.Day(), 0, 0, 0, 0, weekStart.Location())\n\n    weekEndTime := weekStart.AddDate(0, 0, 7).Add(-time.Second)\n    deals, _ := sugar.GetDealsDateRange(weekStart, weekEndTime)\n\n    weekProfit := 0.0\n    for _, deal := range deals {\n        weekProfit += deal.Profit\n    }\n\n    weeklyProfits = append(weeklyProfits, weekProfit)\n}\n\n// Calculate average\navgWeeklyProfit := 0.0\nfor _, p := range weeklyProfits {\n    avgWeeklyProfit += p\n}\navgWeeklyProfit /= float64(len(weeklyProfits))\n\nfmt.Println(\"Weekly Consistency Analysis:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\nfmt.Printf(\"This week:   $%.2f\\n\", profit)\nfmt.Printf(\"4-week avg:  $%.2f\\n\\n\", avgWeeklyProfit)\n\nif profit &gt; avgWeeklyProfit*1.2 {\n    fmt.Println(\"\ud83c\udf1f Exceptional week - above average!\")\n} else if profit &gt; avgWeeklyProfit*0.8 {\n    fmt.Println(\"\u2705 Consistent with recent weeks\")\n} else {\n    fmt.Println(\"\u26a0\ufe0f  Below recent average\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#10-advanced-weekly-profit-manager","title":"10) Advanced weekly profit manager","text":"<pre><code>type WeeklyProfitManager struct {\n    Target      float64\n    MaxLoss     float64\n    MinDaily    float64\n}\n\nfunc NewWeeklyProfitManager(target, maxLoss, minDaily float64) *WeeklyProfitManager {\n    return &amp;WeeklyProfitManager{\n        Target:   target,\n        MaxLoss:  maxLoss,\n        MinDaily: minDaily,\n    }\n}\n\nfunc (wpm *WeeklyProfitManager) Assess(sugar *mt5.MT5Sugar) {\n    weekProfit, _ := sugar.GetProfitThisWeek()\n    todayProfit, _ := sugar.GetProfitToday()\n\n    now := time.Now()\n    weekday := int(now.Weekday())\n    if weekday == 0 {\n        weekday = 7\n    }\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      WEEKLY PROFIT ASSESSMENT         \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Weekly target:     $%.2f\\n\", wpm.Target)\n    fmt.Printf(\"Current profit:    $%.2f\\n\", weekProfit)\n    fmt.Printf(\"Today's profit:    $%.2f\\n\\n\", todayProfit)\n\n    // Progress\n    progress := (weekProfit / wpm.Target) * 100\n    fmt.Printf(\"Progress:          %.1f%%\\n\\n\", progress)\n\n    // Assessment\n    fmt.Println(\"Assessment:\")\n\n    if weekProfit &gt;= wpm.Target {\n        fmt.Println(\"  \ud83c\udfaf Weekly target achieved!\")\n    } else {\n        remaining := wpm.Target - weekProfit\n        daysLeft := 5 - weekday // Assume 5 trading days\n        if daysLeft &gt; 0 {\n            neededPerDay := remaining / float64(daysLeft)\n            fmt.Printf(\"  \ud83d\udcca $%.2f remaining ($%.2f/day needed)\\n\",\n                remaining, neededPerDay)\n        }\n    }\n\n    if weekProfit &lt;= wpm.MaxLoss {\n        fmt.Println(\"  \ud83d\uded1 Weekly loss limit reached\")\n    }\n\n    if todayProfit &lt; wpm.MinDaily {\n        fmt.Printf(\"  \u26a0\ufe0f  Today below minimum daily ($%.2f)\\n\", wpm.MinDaily)\n    }\n\n    // Daily average\n    avgDaily := weekProfit / float64(weekday)\n    fmt.Printf(\"\\nDaily average:     $%.2f\\n\", avgDaily)\n\n    if avgDaily &gt;= wpm.MinDaily {\n        fmt.Println(\"\u2705 Good daily pace\")\n    } else {\n        fmt.Println(\"\u26a0\ufe0f  Below target pace\")\n    }\n}\n\n// Usage:\nmanager := NewWeeklyProfitManager(500, -500, 50)\nmanager.Assess(sugar)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other time periods:</p> <ul> <li><code>GetProfitToday()</code> - Today's profit total</li> <li><code>GetProfitThisMonth()</code> - This month's profit total</li> </ul> <p>\ud83c\udf6c Detailed data:</p> <ul> <li><code>GetDealsThisWeek()</code> - Get full week's deal information</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#1-confusing-with-floating-profit","title":"1) Confusing with floating profit","text":"<pre><code>// \u274c WRONG - this is CLOSED positions only\nweekProfit, _ := sugar.GetProfitThisWeek()\n// Does NOT include currently OPEN positions!\n\n// \u2705 CORRECT - for total including open\nclosedProfit, _ := sugar.GetProfitThisWeek()\nfloatingProfit, _ := sugar.GetProfit()\ntotalProfit := closedProfit + floatingProfit\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#2-week-starts-monday","title":"2) Week starts Monday","text":"<pre><code>// \u274c WRONG - assuming week starts Sunday\n\n// \u2705 CORRECT - MT5 week starts Monday\nprofit, _ := sugar.GetProfitThisWeek()\nfmt.Println(\"Monday to now profit: $%.2f\", profit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#3-incomplete-week-comparisons","title":"3) Incomplete week comparisons","text":"<pre><code>// \u274c WRONG - comparing mid-week to full week\nthisWeekProfit, _ := sugar.GetProfitThisWeek()  // Mon-Wed\nlastWeekProfit := 500.0                         // Full week\n// Not fair comparison!\n\n// \u2705 CORRECT - note the difference\nfmt.Println(\"This week (partial) vs last week (complete)\")\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Week starts Monday - MT5 uses Monday as first day of week</p> </li> <li> <p>Closed only - Returns profit from CLOSED positions (not open)</p> </li> <li> <p>Zero OK - Returns 0 if no closed positions (not error)</p> </li> <li> <p>Partial data - Mid-week calls return incomplete week</p> </li> <li> <p>Server time - Based on MT5 server timezone</p> </li> </ol>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitThisWeek/#week-range","title":"\ud83d\udcca Week Range","text":"<pre><code>Week range calculation:\nnow = time.Now()\nweekday = int(now.Weekday())\nif weekday == 0 { weekday = 7 }  // Sunday becomes 7\n\nstartOfWeek = now - (weekday - 1) days at 00:00:00\n\nReturns profit from Monday 00:00 to now\n</code></pre> <p>See also: <code>GetDealsThisWeek.md</code>, <code>GetProfitToday.md</code>, <code>GetProfitThisMonth.md</code></p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/","title":"\ud83d\udcb0\ud83d\udcc5 Get Profit Today (<code>GetProfitToday</code>)","text":"<p>Sugar method: Returns total realized profit/loss from today's closed positions.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetProfitToday()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Total profit as float64</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetProfitToday() (float64, error)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters (auto-calculates today) Output Type Description <code>float64</code> float Total realized profit/loss from today <code>error</code> <code>error</code> Error if calculation failed"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get today's total profit/loss from closed positions (00:00 to now).</li> <li>Why you need it: Quick profit check, daily targets, performance dashboards.</li> <li>Sanity check: Returns 0 if no closed positions today. Positive = profit, negative = loss.</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Quick profit check - Fast single number answer</p> <p>\u2705 Daily targets - Check if target met</p> <p>\u2705 Dashboard display - Show today's performance</p> <p>\u2705 Performance monitoring - Track profit in real-time</p>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#1-basic-usage-check-todays-profit","title":"1) Basic usage - check today's profit","text":"<pre><code>profit, err := sugar.GetProfitToday()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Today's profit: $%.2f\\n\", profit)\n\nif profit &gt; 0 {\n    fmt.Println(\"\u2705 Profitable day\")\n} else if profit &lt; 0 {\n    fmt.Println(\"\u274c Losing day\")\n} else {\n    fmt.Println(\"\u27a1\ufe0f  Breakeven\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#2-daily-target-tracking","title":"2) Daily target tracking","text":"<pre><code>dailyTarget := 100.0 // $100 per day\n\nprofit, _ := sugar.GetProfitToday()\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      DAILY TARGET PROGRESS            \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Target:   $%.2f\\n\", dailyTarget)\nfmt.Printf(\"Current:  $%.2f\\n\", profit)\n\nprogress := (profit / dailyTarget) * 100\n\nif profit &gt;= dailyTarget {\n    fmt.Printf(\"\ud83c\udfaf Target achieved! (%.0f%%)\\n\", progress)\n} else if progress &gt;= 80 {\n    remaining := dailyTarget - profit\n    fmt.Printf(\"\ud83d\udfe1 Close! ($%.2f remaining)\\n\", remaining)\n} else {\n    remaining := dailyTarget - profit\n    fmt.Printf(\"\ud83d\udcca In progress ($%.2f remaining)\\n\", remaining)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#3-real-time-profit-monitor","title":"3) Real-time profit monitor","text":"<pre><code>func MonitorDailyProfit(sugar *mt5.MT5Sugar, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    for range ticker.C {\n        profit, _ := sugar.GetProfitToday()\n\n        timeStr := time.Now().Format(\"15:04:05\")\n\n        status := \"\u27a1\ufe0f\"\n        if profit &gt; 0 {\n            status = \"\u2705\"\n        } else if profit &lt; 0 {\n            status = \"\u274c\"\n        }\n\n        fmt.Printf(\"[%s] Today's P/L: $%.2f %s\\n\",\n            timeStr, profit, status)\n    }\n}\n\n// Usage: Monitor every 30 seconds\ngo MonitorDailyProfit(sugar, 30*time.Second)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#4-profit-limit-check-stop-trading-rule","title":"4) Profit limit check (stop trading rule)","text":"<pre><code>maxDailyLoss := -200.0 // Stop if lose $200\n\nprofit, _ := sugar.GetProfitToday()\n\nfmt.Printf(\"Today's profit: $%.2f\\n\", profit)\n\nif profit &lt;= maxDailyLoss {\n    fmt.Println(\"\ud83d\uded1 DAILY LOSS LIMIT REACHED\")\n    fmt.Println(\"   STOP TRADING FOR TODAY\")\n    return\n}\n\nif profit &lt; maxDailyLoss*0.8 {\n    fmt.Printf(\"\u26a0\ufe0f  Warning: Approaching loss limit ($%.2f)\\n\",\n        maxDailyLoss)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#5-hourly-profit-check","title":"5) Hourly profit check","text":"<pre><code>hourlyTarget := 10.0 // $10 per hour\n\ncurrentHour := time.Now().Hour()\n\nprofit, _ := sugar.GetProfitToday()\n\n// Simple hourly pace calculation\nhoursElapsed := float64(currentHour)\nif hoursElapsed == 0 {\n    hoursElapsed = 1 // Avoid division by zero\n}\n\nhourlyRate := profit / hoursElapsed\n\nfmt.Printf(\"Today's Performance:\\n\")\nfmt.Printf(\"  Total:       $%.2f\\n\", profit)\nfmt.Printf(\"  Hours:       %d\\n\", currentHour)\nfmt.Printf(\"  Hourly rate: $%.2f\\n\", hourlyRate)\n\nif hourlyRate &gt;= hourlyTarget {\n    fmt.Println(\"\u2705 Above target pace\")\n} else {\n    fmt.Println(\"\u26a0\ufe0f  Below target pace\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#6-compare-with-yesterday","title":"6) Compare with yesterday","text":"<pre><code>todayProfit, _ := sugar.GetProfitToday()\n\n// Get yesterday's deals and sum profit\nyesterdayDeals, _ := sugar.GetDealsYesterday()\nyesterdayProfit := 0.0\nfor _, deal := range yesterdayDeals {\n    yesterdayProfit += deal.Profit\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      TODAY VS YESTERDAY               \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Yesterday: $%.2f\\n\", yesterdayProfit)\nfmt.Printf(\"Today:     $%.2f\\n\", todayProfit)\n\ndiff := todayProfit - yesterdayProfit\n\nif diff &gt; 0 {\n    fmt.Printf(\"Improvement: +$%.2f \ud83d\udcc8\\n\", diff)\n} else if diff &lt; 0 {\n    fmt.Printf(\"Decline: $%.2f \ud83d\udcc9\\n\", -diff)\n} else {\n    fmt.Println(\"Same \u27a1\ufe0f\")\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#7-dashboard-widget","title":"7) Dashboard widget","text":"<pre><code>func ShowProfitDashboard(sugar *mt5.MT5Sugar) {\n    todayProfit, _ := sugar.GetProfitToday()\n    balance, _ := sugar.GetBalance()\n    equity, _ := sugar.GetEquity()\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551         PROFIT DASHBOARD              \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Balance:       $%.2f\\n\", balance)\n    fmt.Printf(\"Equity:        $%.2f\\n\", equity)\n    fmt.Printf(\"Today's P/L:   $%.2f\\n\", todayProfit)\n\n    if todayProfit &gt; 0 {\n        pct := (todayProfit / balance) * 100\n        fmt.Printf(\"Daily ROI:     +%.2f%%\\n\", pct)\n    }\n}\n\n// Usage: Call periodically\nticker := time.NewTicker(1 * time.Minute)\nfor range ticker.C {\n    ShowProfitDashboard(sugar)\n    fmt.Println()\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#8-profit-rate-alert-system","title":"8) Profit rate alert system","text":"<pre><code>profitThresholds := []struct {\n    Amount  float64\n    Message string\n}{\n    {50, \"\ud83d\udfe2 $50 milestone\"},\n    {100, \"\u2705 $100 milestone - daily target!\"},\n    {200, \"\ud83c\udf1f $200 milestone - excellent!\"},\n    {300, \"\ud83c\udf89 $300 milestone - outstanding!\"},\n}\n\npreviousProfit := 0.0\n\nticker := time.NewTicker(1 * time.Minute)\ndefer ticker.Stop()\n\nfor range ticker.C {\n    currentProfit, _ := sugar.GetProfitToday()\n\n    // Check if crossed any threshold\n    for _, threshold := range profitThresholds {\n        if previousProfit &lt; threshold.Amount &amp;&amp; currentProfit &gt;= threshold.Amount {\n            fmt.Printf(\"[%s] %s\\n\",\n                time.Now().Format(\"15:04\"), threshold.Message)\n        }\n    }\n\n    previousProfit = currentProfit\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#9-profit-consistency-checker","title":"9) Profit consistency checker","text":"<pre><code>func CheckProfitConsistency(sugar *mt5.MT5Sugar) {\n    // Get today's profit\n    todayProfit, _ := sugar.GetProfitToday()\n\n    // Get last 5 days\n    profitHistory := []float64{}\n\n    for i := 1; i &lt;= 5; i++ {\n        from := time.Now().AddDate(0, 0, -i).Truncate(24 * time.Hour)\n        to := from.Add(24 * time.Hour)\n\n        deals, _ := sugar.GetDealsDateRange(from, to)\n\n        dayProfit := 0.0\n        for _, deal := range deals {\n            dayProfit += deal.Profit\n        }\n\n        profitHistory = append(profitHistory, dayProfit)\n    }\n\n    // Calculate average\n    avgProfit := 0.0\n    for _, p := range profitHistory {\n        avgProfit += p\n    }\n    avgProfit /= float64(len(profitHistory))\n\n    fmt.Println(\"Profit Consistency Check:\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Today:      $%.2f\\n\", todayProfit)\n    fmt.Printf(\"5-day avg:  $%.2f\\n\", avgProfit)\n\n    if todayProfit &gt; avgProfit*1.2 {\n        fmt.Println(\"\ud83c\udf1f Above average performance today!\")\n    } else if todayProfit &lt; avgProfit*0.8 {\n        fmt.Println(\"\u26a0\ufe0f  Below average performance\")\n    } else {\n        fmt.Println(\"\u2705 Consistent with recent performance\")\n    }\n}\n\n// Usage:\nCheckProfitConsistency(sugar)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#10-advanced-daily-profit-tracker","title":"10) Advanced daily profit tracker","text":"<pre><code>type DailyProfitTracker struct {\n    Target          float64\n    MaxLoss         float64\n    LastUpdate      time.Time\n    LastProfit      float64\n}\n\nfunc NewDailyProfitTracker(target, maxLoss float64) *DailyProfitTracker {\n    return &amp;DailyProfitTracker{\n        Target:  target,\n        MaxLoss: maxLoss,\n    }\n}\n\nfunc (dpt *DailyProfitTracker) Update(sugar *mt5.MT5Sugar) (bool, string) {\n    currentProfit, _ := sugar.GetProfitToday()\n    now := time.Now()\n\n    // Check if profit changed\n    if currentProfit != dpt.LastProfit {\n        dpt.LastProfit = currentProfit\n        dpt.LastUpdate = now\n    }\n\n    // Check target achieved\n    if currentProfit &gt;= dpt.Target {\n        return false, fmt.Sprintf(\"\ud83c\udfaf Target achieved: $%.2f\", currentProfit)\n    }\n\n    // Check max loss\n    if currentProfit &lt;= dpt.MaxLoss {\n        return false, fmt.Sprintf(\"\ud83d\uded1 Stop trading: Max loss reached ($%.2f)\", currentProfit)\n    }\n\n    // Continue trading\n    return true, fmt.Sprintf(\"Current: $%.2f / $%.2f target\", currentProfit, dpt.Target)\n}\n\nfunc (dpt *DailyProfitTracker) ShowStatus(sugar *mt5.MT5Sugar) {\n    currentProfit, _ := sugar.GetProfitToday()\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      DAILY PROFIT TRACKER             \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Target:        $%.2f\\n\", dpt.Target)\n    fmt.Printf(\"Max Loss:      $%.2f\\n\", dpt.MaxLoss)\n    fmt.Printf(\"Current:       $%.2f\\n\", currentProfit)\n\n    progress := (currentProfit / dpt.Target) * 100\n    fmt.Printf(\"Progress:      %.1f%%\\n\\n\", progress)\n\n    remaining := dpt.Target - currentProfit\n    riskUsed := (currentProfit / dpt.MaxLoss) * 100\n\n    fmt.Printf(\"To target:     $%.2f\\n\", remaining)\n    fmt.Printf(\"Risk used:     %.1f%%\\n\", riskUsed)\n}\n\n// Usage:\ntracker := NewDailyProfitTracker(100, -200)\n\nticker := time.NewTicker(30 * time.Second)\nfor range ticker.C {\n    canContinue, message := tracker.Update(sugar)\n\n    fmt.Printf(\"[%s] %s\\n\", time.Now().Format(\"15:04\"), message)\n\n    if !canContinue {\n        tracker.ShowStatus(sugar)\n        break\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Other time periods:</p> <ul> <li><code>GetProfitThisWeek()</code> - This week's profit total</li> <li><code>GetProfitThisMonth()</code> - This month's profit total</li> </ul> <p>\ud83c\udf6c Detailed data:</p> <ul> <li><code>GetDealsToday()</code> - Get full deal information</li> <li><code>GetProfit()</code> - Get floating profit from OPEN positions</li> </ul>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#1-confusing-with-floating-profit","title":"1) Confusing with floating profit","text":"<pre><code>// \u274c WRONG - this is CLOSED positions only\ntodayProfit, _ := sugar.GetProfitToday()\n// Does NOT include currently OPEN positions!\n\n// \u2705 CORRECT - for total including open positions\nclosedProfit, _ := sugar.GetProfitToday()  // Closed today\nfloatingProfit, _ := sugar.GetProfit()     // Open positions\ntotalProfit := closedProfit + floatingProfit\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#2-not-handling-zero","title":"2) Not handling zero","text":"<pre><code>// \u274c WRONG - assuming non-zero means trades\nprofit, _ := sugar.GetProfitToday()\nif profit != 0 {\n    // Might be no trades, just checking if profitable\n}\n\n// \u2705 CORRECT - check if there were deals\ndeals, _ := sugar.GetDealsToday()\nif len(deals) &gt; 0 {\n    profit, _ := sugar.GetProfitToday()\n    fmt.Printf(\"Profit from %d trades: $%.2f\\n\", len(deals), profit)\n}\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#3-timezone-assumptions","title":"3) Timezone assumptions","text":"<pre><code>// \u274c WRONG - \"today\" is server's today\n\n// \u2705 CORRECT - aware that it's server time\nprofit, _ := sugar.GetProfitToday()\nfmt.Println(\"Today's profit (server time): $%.2f\", profit)\n</code></pre>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Closed only - Returns profit from CLOSED positions (not open)</p> </li> <li> <p>Zero OK - Returns 0 if no closed positions (not an error)</p> </li> <li> <p>Fast - Single number result, faster than <code>GetDealsToday()</code></p> </li> <li> <p>Real-time safe - Can call frequently for dashboards</p> </li> <li> <p>Server time - \"Today\" based on MT5 server timezone</p> </li> </ol>"},{"location":"MT5Sugar/8.%20History_Statistics/GetProfitToday/#profit-sign-convention","title":"\ud83d\udcca Profit Sign Convention","text":"<pre><code>Positive value: Net profit today\nZero: Breakeven (or no closed positions)\nNegative value: Net loss today\n\nExample:\n+150.50 = $150.50 profit\n0.00 = Breakeven or no trades\n-75.25 = $75.25 loss\n</code></pre> <p>See also: <code>GetDealsToday.md</code>, <code>GetProfitThisWeek.md</code></p>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/","title":"\ud83d\udccb\ud83d\udd0d Get All Symbols (<code>GetAllSymbols</code>)","text":"<p>Sugar method: Returns a list of all available trading symbols on the broker.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetAllSymbols()</code></li> <li>Timeout: 5 seconds</li> <li>Returns: Slice of symbol names</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetAllSymbols() ([]string, error)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description None - No parameters required Output Type Description <code>[]string</code> slice List of all symbol names <code>error</code> <code>error</code> Error if query failed"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get a complete list of all symbols available on your broker.</li> <li>Why you need it: Symbol discovery, building watchlists, symbol validation.</li> <li>Sanity check: Returns symbol names only (not full info). Use GetSymbolInfo() for details.</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Symbol discovery - Find available instruments</p> <p>\u2705 Watchlist building - Create custom symbol lists</p> <p>\u2705 Symbol validation - Check if symbol exists</p> <p>\u2705 Market scanner - Iterate through all symbols</p>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#1-basic-usage-list-all-symbols","title":"1) Basic usage - list all symbols","text":"<pre><code>symbols, err := sugar.GetAllSymbols()\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Total symbols: %d\\n\\n\", len(symbols))\n\n// Show first 20\nfor i := 0; i &lt; 20 &amp;&amp; i &lt; len(symbols); i++ {\n    fmt.Printf(\"%d. %s\\n\", i+1, symbols[i])\n}\n\nif len(symbols) &gt; 20 {\n    fmt.Printf(\"... and %d more\\n\", len(symbols)-20)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#2-filter-by-symbol-pattern","title":"2) Filter by symbol pattern","text":"<pre><code>symbols, _ := sugar.GetAllSymbols()\n\n// Find all USD pairs\nusdPairs := []string{}\nfor _, symbol := range symbols {\n    if strings.Contains(symbol, \"USD\") {\n        usdPairs = append(usdPairs, symbol)\n    }\n}\n\nfmt.Printf(\"USD pairs: %d\\n\", len(usdPairs))\nfor _, pair := range usdPairs {\n    fmt.Println(\"  \" + pair)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#3-group-symbols-by-type","title":"3) Group symbols by type","text":"<pre><code>symbols, _ := sugar.GetAllSymbols()\n\nforex := []string{}\nmetals := []string{}\nindices := []string{}\ncrypto := []string{}\nother := []string{}\n\nfor _, symbol := range symbols {\n    // Simple classification based on common patterns\n    if strings.HasPrefix(symbol, \"XAU\") || strings.HasPrefix(symbol, \"XAG\") {\n        metals = append(metals, symbol)\n    } else if strings.Contains(symbol, \"BTC\") || strings.Contains(symbol, \"ETH\") {\n        crypto = append(crypto, symbol)\n    } else if strings.HasSuffix(symbol, \"USD\") || strings.HasSuffix(symbol, \"EUR\") {\n        forex = append(forex, symbol)\n    } else if len(symbol) &lt;= 6 &amp;&amp; !strings.Contains(symbol, \".\") {\n        forex = append(forex, symbol)\n    } else {\n        other = append(other, symbol)\n    }\n}\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      SYMBOLS BY CATEGORY              \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Forex:   %d symbols\\n\", len(forex))\nfmt.Printf(\"Metals:  %d symbols\\n\", len(metals))\nfmt.Printf(\"Crypto:  %d symbols\\n\", len(crypto))\nfmt.Printf(\"Indices: %d symbols\\n\", len(indices))\nfmt.Printf(\"Other:   %d symbols\\n\", len(other))\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#4-check-if-symbol-exists","title":"4) Check if symbol exists","text":"<pre><code>func SymbolExists(sugar *mt5.MT5Sugar, searchSymbol string) bool {\n    symbols, err := sugar.GetAllSymbols()\n    if err != nil {\n        return false\n    }\n\n    for _, symbol := range symbols {\n        if symbol == searchSymbol {\n            return true\n        }\n    }\n\n    return false\n}\n\n// Usage:\nif SymbolExists(sugar, \"EURUSD\") {\n    fmt.Println(\"\u2705 EURUSD is available\")\n} else {\n    fmt.Println(\"\u274c EURUSD not found\")\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#5-build-custom-watchlist","title":"5) Build custom watchlist","text":"<pre><code>// Define symbols of interest\nwatchlist := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"}\n\nallSymbols, _ := sugar.GetAllSymbols()\n\n// Convert to map for faster lookup\nsymbolMap := make(map[string]bool)\nfor _, symbol := range allSymbols {\n    symbolMap[symbol] = true\n}\n\nfmt.Println(\"Watchlist Validation:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\navailableSymbols := []string{}\n\nfor _, symbol := range watchlist {\n    if symbolMap[symbol] {\n        fmt.Printf(\"\u2705 %s - Available\\n\", symbol)\n        availableSymbols = append(availableSymbols, symbol)\n    } else {\n        fmt.Printf(\"\u274c %s - Not found\\n\", symbol)\n    }\n}\n\nfmt.Printf(\"\\n%d/%d symbols available\\n\",\n    len(availableSymbols), len(watchlist))\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#6-find-symbols-by-suffix","title":"6) Find symbols by suffix","text":"<pre><code>func FindSymbolsBySuffix(symbols []string, suffix string) []string {\n    matches := []string{}\n\n    for _, symbol := range symbols {\n        if strings.HasSuffix(symbol, suffix) {\n            matches = append(matches, symbol)\n        }\n    }\n\n    return matches\n}\n\n// Usage:\nallSymbols, _ := sugar.GetAllSymbols()\n\n// Find all pairs vs USD\nusdPairs := FindSymbolsBySuffix(allSymbols, \"USD\")\nfmt.Printf(\"Pairs vs USD: %d\\n\", len(usdPairs))\n\n// Find all pairs vs EUR\neurPairs := FindSymbolsBySuffix(allSymbols, \"EUR\")\nfmt.Printf(\"Pairs vs EUR: %d\\n\", len(eurPairs))\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#7-symbol-market-scanner","title":"7) Symbol market scanner","text":"<pre><code>func ScanMarketForSymbols(sugar *mt5.MT5Sugar, pattern string) {\n    symbols, _ := sugar.GetAllSymbols()\n\n    fmt.Printf(\"Scanning for symbols matching '%s'...\\n\\n\", pattern)\n\n    matches := []string{}\n\n    for _, symbol := range symbols {\n        if strings.Contains(strings.ToUpper(symbol), strings.ToUpper(pattern)) {\n            matches = append(matches, symbol)\n        }\n    }\n\n    if len(matches) == 0 {\n        fmt.Println(\"No matches found\")\n        return\n    }\n\n    fmt.Printf(\"Found %d matches:\\n\", len(matches))\n    for i, symbol := range matches {\n        fmt.Printf(\"%d. %s\\n\", i+1, symbol)\n    }\n}\n\n// Usage:\nScanMarketForSymbols(sugar, \"GBP\")  // Find all GBP pairs\nScanMarketForSymbols(sugar, \"XAU\")  // Find gold symbols\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#8-export-symbols-to-file","title":"8) Export symbols to file","text":"<pre><code>func ExportSymbolsToFile(symbols []string, filename string) error {\n    file, err := os.Create(filename)\n    if err != nil {\n        return err\n    }\n    defer file.Close()\n\n    writer := bufio.NewWriter(file)\n    defer writer.Flush()\n\n    for _, symbol := range symbols {\n        fmt.Fprintln(writer, symbol)\n    }\n\n    return nil\n}\n\n// Usage:\nsymbols, _ := sugar.GetAllSymbols()\nerr := ExportSymbolsToFile(symbols, \"all_symbols.txt\")\nif err != nil {\n    fmt.Printf(\"Export failed: %v\\n\", err)\n} else {\n    fmt.Printf(\"\u2705 Exported %d symbols to all_symbols.txt\\n\", len(symbols))\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#9-symbol-statistics","title":"9) Symbol statistics","text":"<pre><code>func AnalyzeSymbolList(symbols []string) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      SYMBOL STATISTICS                \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Total symbols:    %d\\n\\n\", len(symbols))\n\n    // Length distribution\n    lengthCount := make(map[int]int)\n    for _, symbol := range symbols {\n        lengthCount[len(symbol)]++\n    }\n\n    fmt.Println(\"Symbol length distribution:\")\n    for length := 1; length &lt;= 20; length++ {\n        if count := lengthCount[length]; count &gt; 0 {\n            fmt.Printf(\"  %d chars:  %d symbols\\n\", length, count)\n        }\n    }\n\n    // Common prefixes\n    prefixCount := make(map[string]int)\n    for _, symbol := range symbols {\n        if len(symbol) &gt;= 3 {\n            prefix := symbol[:3]\n            prefixCount[prefix]++\n        }\n    }\n\n    fmt.Println(\"\\nMost common prefixes:\")\n    type prefixPair struct {\n        prefix string\n        count  int\n    }\n\n    pairs := []prefixPair{}\n    for prefix, count := range prefixCount {\n        pairs = append(pairs, prefixPair{prefix, count})\n    }\n\n    sort.Slice(pairs, func(i, j int) bool {\n        return pairs[i].count &gt; pairs[j].count\n    })\n\n    for i := 0; i &lt; 5 &amp;&amp; i &lt; len(pairs); i++ {\n        fmt.Printf(\"  %s: %d symbols\\n\", pairs[i].prefix, pairs[i].count)\n    }\n}\n\n// Usage:\nsymbols, _ := sugar.GetAllSymbols()\nAnalyzeSymbolList(symbols)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#10-advanced-symbol-manager","title":"10) Advanced symbol manager","text":"<pre><code>type SymbolManager struct {\n    AllSymbols    []string\n    SymbolMap     map[string]bool\n    Favorites     []string\n}\n\nfunc NewSymbolManager(sugar *mt5.MT5Sugar) (*SymbolManager, error) {\n    symbols, err := sugar.GetAllSymbols()\n    if err != nil {\n        return nil, err\n    }\n\n    symbolMap := make(map[string]bool)\n    for _, symbol := range symbols {\n        symbolMap[symbol] = true\n    }\n\n    return &amp;SymbolManager{\n        AllSymbols: symbols,\n        SymbolMap:  symbolMap,\n        Favorites:  []string{},\n    }, nil\n}\n\nfunc (sm *SymbolManager) Exists(symbol string) bool {\n    return sm.SymbolMap[symbol]\n}\n\nfunc (sm *SymbolManager) AddFavorite(symbol string) error {\n    if !sm.Exists(symbol) {\n        return fmt.Errorf(\"symbol %s not available\", symbol)\n    }\n\n    // Check if already in favorites\n    for _, fav := range sm.Favorites {\n        if fav == symbol {\n            return fmt.Errorf(\"symbol %s already in favorites\", symbol)\n        }\n    }\n\n    sm.Favorites = append(sm.Favorites, symbol)\n    return nil\n}\n\nfunc (sm *SymbolManager) SearchByPattern(pattern string) []string {\n    matches := []string{}\n\n    for _, symbol := range sm.AllSymbols {\n        if strings.Contains(strings.ToUpper(symbol), strings.ToUpper(pattern)) {\n            matches = append(matches, symbol)\n        }\n    }\n\n    return matches\n}\n\nfunc (sm *SymbolManager) GetForexPairs() []string {\n    forex := []string{}\n\n    for _, symbol := range sm.AllSymbols {\n        // Simple heuristic: 6 chars, all letters\n        if len(symbol) == 6 {\n            allLetters := true\n            for _, c := range symbol {\n                if !unicode.IsLetter(c) {\n                    allLetters = false\n                    break\n                }\n            }\n            if allLetters {\n                forex = append(forex, symbol)\n            }\n        }\n    }\n\n    return forex\n}\n\nfunc (sm *SymbolManager) ShowReport() {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      SYMBOL MANAGER REPORT            \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Total symbols:     %d\\n\", len(sm.AllSymbols))\n    fmt.Printf(\"Favorites:         %d\\n\", len(sm.Favorites))\n\n    forexPairs := sm.GetForexPairs()\n    fmt.Printf(\"Forex pairs:       %d\\n\\n\", len(forexPairs))\n\n    if len(sm.Favorites) &gt; 0 {\n        fmt.Println(\"Favorite Symbols:\")\n        for i, symbol := range sm.Favorites {\n            fmt.Printf(\"  %d. %s\\n\", i+1, symbol)\n        }\n    }\n}\n\n// Usage:\nmanager, _ := NewSymbolManager(sugar)\n\n// Add favorites\nmanager.AddFavorite(\"EURUSD\")\nmanager.AddFavorite(\"GBPUSD\")\nmanager.AddFavorite(\"XAUUSD\")\n\n// Search\ngbpSymbols := manager.SearchByPattern(\"GBP\")\nfmt.Printf(\"Found %d GBP symbols\\n\", len(gbpSymbols))\n\n// Report\nmanager.ShowReport()\n\n// Check availability\nif manager.Exists(\"BTCUSD\") {\n    fmt.Println(\"\u2705 BTCUSD available\")\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Symbol details:</p> <ul> <li><code>GetSymbolInfo()</code> - Get full symbol information</li> <li><code>IsSymbolAvailable()</code> - Check if specific symbol is tradeable</li> </ul> <p>\ud83c\udf6c Symbol properties:</p> <ul> <li><code>GetMinStopLevel()</code> - Get stop level</li> <li><code>GetSymbolDigits()</code> - Get decimal precision</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#1-assuming-all-symbols-are-tradeable","title":"1) Assuming all symbols are tradeable","text":"<pre><code>// \u274c WRONG - symbol in list doesn't mean it's tradeable\nsymbols, _ := sugar.GetAllSymbols()\n// Some might be for display only!\n\n// \u2705 CORRECT - verify tradeable status\nfor _, symbol := range symbols {\n    available, _ := sugar.IsSymbolAvailable(symbol)\n    if available {\n        // Now safe to trade\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#2-not-handling-large-lists","title":"2) Not handling large lists","text":"<pre><code>// \u274c WRONG - might be hundreds of symbols\nsymbols, _ := sugar.GetAllSymbols()\nfor _, symbol := range symbols {\n    // Doing expensive operation per symbol\n    info, _ := sugar.GetSymbolInfo(symbol) // Slow!\n}\n\n// \u2705 CORRECT - filter first, then get details\nsymbols, _ := sugar.GetAllSymbols()\nforexPairs := FilterForexPairs(symbols)\nfor _, symbol := range forexPairs {\n    info, _ := sugar.GetSymbolInfo(symbol)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#3-case-insensitive-matching","title":"3) Case-insensitive matching","text":"<pre><code>// \u274c WRONG - case matters!\nif symbol == \"eurusd\" {\n\n// \u2705 CORRECT - case-insensitive comparison\nif strings.EqualFold(symbol, \"eurusd\") {\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Cache the list - Symbols rarely change, cache to avoid repeated calls</p> </li> <li> <p>Filter before details - Get symbol list, filter, then fetch details</p> </li> <li> <p>Case handling - Symbol names are case-sensitive, use exact names</p> </li> <li> <p>Availability - Symbol in list doesn't guarantee tradeability</p> </li> <li> <p>Large lists - Brokers may have 100+ symbols, handle efficiently</p> </li> </ol>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetAllSymbols/#common-symbol-patterns","title":"\ud83d\udcca Common Symbol Patterns","text":"<pre><code>Forex pairs (6 chars):\n- EURUSD, GBPUSD, USDJPY, etc.\n- Pattern: [A-Z]{6}\n\nMetals:\n- XAUUSD (Gold vs USD)\n- XAGUSD (Silver vs USD)\n- Pattern: XA[GU]USD\n\nIndices:\n- US30, NAS100, SPX500\n- Pattern: [A-Z]+[0-9]+\n\nCrypto:\n- BTCUSD, ETHUSD\n- Pattern: .*BTC.*, .*ETH.*\n</code></pre> <p>See also: <code>GetSymbolInfo.md</code>, <code>IsSymbolAvailable.md</code></p>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/","title":"\ud83d\udccf\ud83d\uded1 Get Min Stop Level (<code>GetMinStopLevel</code>)","text":"<p>Sugar method: Returns the minimum allowed distance for Stop Loss/Take Profit in points.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetMinStopLevel(symbol)</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Minimum stop level in points</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetMinStopLevel(symbol string) (int64, error)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") Output Type Description <code>int64</code> integer Minimum stop level in points <code>error</code> <code>error</code> Error if symbol not found"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Minimum distance from current price for SL/TP orders (in points).</li> <li>Why you need it: Validate SL/TP distances, avoid order rejections, calculate valid levels.</li> <li>Sanity check: Returns 0 for symbols with no restriction. Measured in points, not pips!</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Before setting SL/TP - Validate stop distances</p> <p>\u2705 Order validation - Check if SL/TP is valid</p> <p>\u2705 Strategy design - Know minimum stop requirements</p> <p>\u2705 Error prevention - Avoid \"stops too close\" errors</p>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#1-basic-usage-check-stop-level","title":"1) Basic usage - check stop level","text":"<pre><code>stopLevel, err := sugar.GetMinStopLevel(\"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif stopLevel == 0 {\n    fmt.Println(\"No stop level restriction\")\n} else {\n    fmt.Printf(\"Minimum stop level: %d points\\n\", stopLevel)\n\n    // Convert to pips (for 5-digit broker)\n    stopLevelPips := float64(stopLevel) / 10.0\n    fmt.Printf(\"                   %.1f pips\\n\", stopLevelPips)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#2-validate-sl-distance-before-placing-order","title":"2) Validate SL distance before placing order","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\nstopLossPips := 20.0\n\n// Get minimum stop level\nminStopLevel, _ := sugar.GetMinStopLevel(symbol)\n\n// Convert our SL pips to points (5-digit broker)\nourStopPoints := stopLossPips * 10\n\nif ourStopPoints &lt; float64(minStopLevel) {\n    fmt.Printf(\"\u274c SL too close!\\n\")\n    fmt.Printf(\"   Requested: %.0f points (%.1f pips)\\n\",\n        ourStopPoints, stopLossPips)\n    fmt.Printf(\"   Minimum:   %d points (%.1f pips)\\n\",\n        minStopLevel, float64(minStopLevel)/10.0)\n\n    // Adjust to minimum\n    stopLossPips = float64(minStopLevel) / 10.0\n    fmt.Printf(\"   Adjusted to: %.1f pips\\n\", stopLossPips)\n}\n\nfmt.Printf(\"\u2705 SL distance valid: %.1f pips\\n\", stopLossPips)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#3-calculate-valid-sltp-prices","title":"3) Calculate valid SL/TP prices","text":"<pre><code>func CalculateValidSLTP(sugar *mt5.MT5Sugar, symbol string, direction string, slPips, tpPips float64) (float64, float64, error) {\n    // Get current prices and stop level\n    info, err := sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        return 0, 0, err\n    }\n\n    minStopLevel, _ := sugar.GetMinStopLevel(symbol)\n\n    // Convert pips to points (5-digit)\n    slPoints := slPips * 10\n    tpPoints := tpPips * 10\n\n    // Validate against minimum\n    if slPoints &lt; float64(minStopLevel) {\n        slPoints = float64(minStopLevel)\n    }\n    if tpPoints &lt; float64(minStopLevel) {\n        tpPoints = float64(minStopLevel)\n    }\n\n    // Convert to price distance\n    slDistance := slPoints * info.Point\n    tpDistance := tpPoints * info.Point\n\n    // Calculate SL/TP prices\n    var sl, tp float64\n\n    if direction == \"BUY\" {\n        sl = info.Bid - slDistance\n        tp = info.Bid + tpDistance\n    } else { // SELL\n        sl = info.Ask + slDistance\n        tp = info.Ask - tpDistance\n    }\n\n    return sl, tp, nil\n}\n\n// Usage:\nsl, tp, _ := CalculateValidSLTP(sugar, \"EURUSD\", \"BUY\", 20, 40)\nfmt.Printf(\"Valid SL: %.5f\\n\", sl)\nfmt.Printf(\"Valid TP: %.5f\\n\", tp)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#4-compare-stop-levels-across-symbols","title":"4) Compare stop levels across symbols","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"}\n\nfmt.Println(\"Stop Level Comparison:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, symbol := range symbols {\n    stopLevel, err := sugar.GetMinStopLevel(symbol)\n    if err != nil {\n        fmt.Printf(\"%s: Error - %v\\n\", symbol, err)\n        continue\n    }\n\n    stopLevelPips := float64(stopLevel) / 10.0\n\n    status := \"\u2705\"\n    if stopLevel &gt; 50 {\n        status = \"\u26a0\ufe0f\"\n    }\n\n    fmt.Printf(\"%s %-8s: %3d points (%.1f pips)\\n\",\n        status, symbol, stopLevel, stopLevelPips)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#5-check-if-scalping-is-allowed","title":"5) Check if scalping is allowed","text":"<pre><code>func CanScalp(sugar *mt5.MT5Sugar, symbol string, maxStopPips float64) (bool, string) {\n    stopLevel, err := sugar.GetMinStopLevel(symbol)\n    if err != nil {\n        return false, fmt.Sprintf(\"error: %v\", err)\n    }\n\n    stopLevelPips := float64(stopLevel) / 10.0\n\n    if stopLevelPips &gt; maxStopPips {\n        return false, fmt.Sprintf(\"min stop %.1f pips exceeds max %.1f pips\",\n            stopLevelPips, maxStopPips)\n    }\n\n    return true, fmt.Sprintf(\"can use stops as tight as %.1f pips\", stopLevelPips)\n}\n\n// Usage:\ncanScalp, message := CanScalp(sugar, \"EURUSD\", 10.0)\nif canScalp {\n    fmt.Printf(\"\u2705 %s is scalping-friendly: %s\\n\", \"EURUSD\", message)\n} else {\n    fmt.Printf(\"\u274c %s not suitable for scalping: %s\\n\", \"EURUSD\", message)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#6-sltp-distance-validator","title":"6) SL/TP distance validator","text":"<pre><code>type StopValidator struct {\n    Symbol       string\n    MinStopLevel int64\n    Point        float64\n}\n\nfunc NewStopValidator(sugar *mt5.MT5Sugar, symbol string) (*StopValidator, error) {\n    minStop, err := sugar.GetMinStopLevel(symbol)\n    if err != nil {\n        return nil, err\n    }\n\n    info, err := sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        return nil, err\n    }\n\n    return &amp;StopValidator{\n        Symbol:       symbol,\n        MinStopLevel: minStop,\n        Point:        info.Point,\n    }, nil\n}\n\nfunc (sv *StopValidator) ValidateSLDistance(currentPrice, slPrice float64) (bool, string) {\n    distance := math.Abs(currentPrice - slPrice)\n    distancePoints := distance / sv.Point\n\n    minDistance := float64(sv.MinStopLevel) * sv.Point\n\n    if distance &lt; minDistance {\n        return false, fmt.Sprintf(\"SL too close: %.0f points (min: %d)\",\n            distancePoints, sv.MinStopLevel)\n    }\n\n    return true, fmt.Sprintf(\"valid: %.0f points\", distancePoints)\n}\n\nfunc (sv *StopValidator) AdjustSLToMin(currentPrice float64, direction string) float64 {\n    minDistance := float64(sv.MinStopLevel) * sv.Point\n\n    if direction == \"BUY\" {\n        return currentPrice - minDistance\n    } else { // SELL\n        return currentPrice + minDistance\n    }\n}\n\n// Usage:\nvalidator, _ := NewStopValidator(sugar, \"EURUSD\")\n\n// Validate specific SL\ncurrentPrice := 1.10000\nproposedSL := 1.09950\n\nvalid, message := validator.ValidateSLDistance(currentPrice, proposedSL)\nif valid {\n    fmt.Printf(\"\u2705 %s\\n\", message)\n} else {\n    fmt.Printf(\"\u274c %s\\n\", message)\n\n    // Get minimum valid SL\n    minSL := validator.AdjustSLToMin(currentPrice, \"BUY\")\n    fmt.Printf(\"   Minimum SL: %.5f\\n\", minSL)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#7-display-stop-level-in-multiple-formats","title":"7) Display stop level in multiple formats","text":"<pre><code>stopLevel, _ := sugar.GetMinStopLevel(\"EURUSD\")\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      STOP LEVEL INFORMATION           \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Symbol:        %s\\n\\n\", \"EURUSD\")\n\nfmt.Printf(\"Minimum Stop Level:\\n\")\nfmt.Printf(\"  Points:      %d\\n\", stopLevel)\nfmt.Printf(\"  Pips:        %.1f (5-digit)\\n\", float64(stopLevel)/10.0)\nfmt.Printf(\"  Price:       %.5f\\n\", float64(stopLevel)*info.Point)\n\n// Calculate examples\nbid := info.Bid\nminSLBuy := bid - (float64(stopLevel) * info.Point)\nminTPBuy := bid + (float64(stopLevel) * info.Point)\n\nfmt.Printf(\"\\nExample (BUY at %.5f):\\n\", bid)\nfmt.Printf(\"  Min SL:      %.5f\\n\", minSLBuy)\nfmt.Printf(\"  Min TP:      %.5f\\n\", minTPBuy)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#8-strategy-compatibility-checker","title":"8) Strategy compatibility checker","text":"<pre><code>type TradingStrategy struct {\n    Name           string\n    TypicalSLPips  float64\n    TypicalTPPips  float64\n}\n\nfunc (ts *TradingStrategy) IsCompatible(sugar *mt5.MT5Sugar, symbol string) (bool, string) {\n    stopLevel, err := sugar.GetMinStopLevel(symbol)\n    if err != nil {\n        return false, fmt.Sprintf(\"error: %v\", err)\n    }\n\n    minStopPips := float64(stopLevel) / 10.0\n\n    if ts.TypicalSLPips &lt; minStopPips {\n        return false, fmt.Sprintf(\"SL %.1f pips &lt; min %.1f pips\",\n            ts.TypicalSLPips, minStopPips)\n    }\n\n    if ts.TypicalTPPips &lt; minStopPips {\n        return false, fmt.Sprintf(\"TP %.1f pips &lt; min %.1f pips\",\n            ts.TypicalTPPips, minStopPips)\n    }\n\n    return true, \"compatible\"\n}\n\n// Usage:\nscalpStrategy := &amp;TradingStrategy{\n    Name:          \"Scalping\",\n    TypicalSLPips: 5.0,\n    TypicalTPPips: 10.0,\n}\n\nswingStrategy := &amp;TradingStrategy{\n    Name:          \"Swing Trading\",\n    TypicalSLPips: 50.0,\n    TypicalTPPips: 100.0,\n}\n\nsymbols := []string{\"EURUSD\", \"GBPUSD\", \"XAUUSD\"}\n\nfor _, symbol := range symbols {\n    compatible, message := scalpStrategy.IsCompatible(sugar, symbol)\n\n    if compatible {\n        fmt.Printf(\"\u2705 %s: %s compatible with %s\\n\",\n            symbol, scalpStrategy.Name, message)\n    } else {\n        fmt.Printf(\"\u274c %s: %s not compatible - %s\\n\",\n            symbol, scalpStrategy.Name, message)\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#9-pending-order-distance-calculator","title":"9) Pending order distance calculator","text":"<pre><code>func CalculatePendingOrderDistance(sugar *mt5.MT5Sugar, symbol string) {\n    stopLevel, _ := sugar.GetMinStopLevel(symbol)\n    info, _ := sugar.GetSymbolInfo(symbol)\n\n    minDistance := float64(stopLevel) * info.Point\n\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551   PENDING ORDER DISTANCE RULES        \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Symbol:              %s\\n\", symbol)\n    fmt.Printf(\"Current Bid:         %.5f\\n\", info.Bid)\n    fmt.Printf(\"Current Ask:         %.5f\\n\\n\", info.Ask)\n\n    fmt.Printf(\"Minimum Distance:    %d points (%.5f)\\n\\n\",\n        stopLevel, minDistance)\n\n    fmt.Println(\"Pending Order Limits:\")\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\n    // Buy Stop (above Ask)\n    buyStopMin := info.Ask + minDistance\n    fmt.Printf(\"Buy Stop:   \u2265 %.5f\\n\", buyStopMin)\n\n    // Buy Limit (below Bid)\n    buyLimitMax := info.Bid - minDistance\n    fmt.Printf(\"Buy Limit:  \u2264 %.5f\\n\", buyLimitMax)\n\n    // Sell Stop (below Bid)\n    sellStopMax := info.Bid - minDistance\n    fmt.Printf(\"Sell Stop:  \u2264 %.5f\\n\", sellStopMax)\n\n    // Sell Limit (above Ask)\n    sellLimitMin := info.Ask + minDistance\n    fmt.Printf(\"Sell Limit: \u2265 %.5f\\n\", sellLimitMin)\n}\n\n// Usage:\nCalculatePendingOrderDistance(sugar, \"EURUSD\")\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#10-advanced-stop-level-manager","title":"10) Advanced stop level manager","text":"<pre><code>type StopLevelManager struct {\n    cache     map[string]int64\n    cacheTime map[string]time.Time\n    cacheTTL  time.Duration\n}\n\nfunc NewStopLevelManager() *StopLevelManager {\n    return &amp;StopLevelManager{\n        cache:     make(map[string]int64),\n        cacheTime: make(map[string]time.Time),\n        cacheTTL:  10 * time.Minute, // Stop levels rarely change\n    }\n}\n\nfunc (slm *StopLevelManager) GetStopLevel(sugar *mt5.MT5Sugar, symbol string) (int64, error) {\n    // Check cache\n    if cachedTime, exists := slm.cacheTime[symbol]; exists {\n        if time.Since(cachedTime) &lt; slm.cacheTTL {\n            return slm.cache[symbol], nil\n        }\n    }\n\n    // Fetch from MT5\n    stopLevel, err := sugar.GetMinStopLevel(symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    // Update cache\n    slm.cache[symbol] = stopLevel\n    slm.cacheTime[symbol] = time.Now()\n\n    return stopLevel, nil\n}\n\nfunc (slm *StopLevelManager) GetStopLevelPips(sugar *mt5.MT5Sugar, symbol string) (float64, error) {\n    stopLevel, err := slm.GetStopLevel(sugar, symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    // Convert to pips (assumes 5-digit)\n    return float64(stopLevel) / 10.0, nil\n}\n\nfunc (slm *StopLevelManager) ValidateStopDistance(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    distancePips float64,\n) (bool, error) {\n    minStopPips, err := slm.GetStopLevelPips(sugar, symbol)\n    if err != nil {\n        return false, err\n    }\n\n    return distancePips &gt;= minStopPips, nil\n}\n\nfunc (slm *StopLevelManager) GenerateReport(sugar *mt5.MT5Sugar, symbols []string) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      STOP LEVEL REPORT                \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    for _, symbol := range symbols {\n        stopPips, err := slm.GetStopLevelPips(sugar, symbol)\n        if err != nil {\n            fmt.Printf(\"%-8s: Error - %v\\n\", symbol, err)\n            continue\n        }\n\n        rating := \"\u2705 Low\"\n        if stopPips &gt; 50 {\n            rating = \"\u26a0\ufe0f  High\"\n        } else if stopPips &gt; 20 {\n            rating = \"\ud83d\udfe1 Medium\"\n        }\n\n        fmt.Printf(\"%-8s: %5.1f pips  %s\\n\", symbol, stopPips, rating)\n    }\n}\n\n// Usage:\nmanager := NewStopLevelManager()\n\n// Get stop level (cached)\nstopLevel, _ := manager.GetStopLevel(sugar, \"EURUSD\")\nfmt.Printf(\"EURUSD stop level: %d points\\n\", stopLevel)\n\n// Validate distance\nvalid, _ := manager.ValidateStopDistance(sugar, \"EURUSD\", 20.0)\nif valid {\n    fmt.Println(\"\u2705 20 pip stop is valid\")\n}\n\n// Generate report\nsymbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"}\nmanager.GenerateReport(sugar, symbols)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Symbol information:</p> <ul> <li><code>GetSymbolInfo()</code> - Gets StopLevel as part of full info</li> <li><code>GetSymbolDigits()</code> - Get decimal precision</li> </ul> <p>\ud83c\udf6c Price methods:</p> <ul> <li><code>GetBid()</code> / <code>GetAsk()</code> - Current prices for SL/TP calculation</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#1-confusing-points-and-pips","title":"1) Confusing points and pips","text":"<pre><code>// \u274c WRONG - stopLevel is in POINTS, not pips\nstopLevel, _ := sugar.GetMinStopLevel(\"EURUSD\")\n// For 5-digit: 20 points = 2 pips!\n\n// \u2705 CORRECT - convert to pips\nstopLevelPips := float64(stopLevel) / 10.0 // For 5-digit broker\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#2-not-validating-sltp-before-placing-order","title":"2) Not validating SL/TP before placing order","text":"<pre><code>// \u274c WRONG - might be rejected\nsugar.BuyMarketWithSLTP(\"EURUSD\", 0.1, sl, tp)\n\n// \u2705 CORRECT - validate first\nstopLevel, _ := sugar.GetMinStopLevel(\"EURUSD\")\n// Check SL/TP distances are &gt;= stopLevel points\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#3-assuming-zero-means-no-restriction","title":"3) Assuming zero means no restriction","text":"<pre><code>// \u274c WRONG - zero might mean error\nstopLevel, _ := sugar.GetMinStopLevel(\"EURUSD\")\nif stopLevel == 0 {\n    // Could be error OR no restriction\n}\n\n// \u2705 CORRECT - check error\nstopLevel, err := sugar.GetMinStopLevel(\"EURUSD\")\nif err != nil {\n    // Error\n} else if stopLevel == 0 {\n    // No restriction\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Points not pips - Return value is in POINTS (\u00f710 for pips on 5-digit)</p> </li> <li> <p>Cache safe - Stop levels rarely change, safe to cache</p> </li> <li> <p>Zero valid - Zero means no stop level restriction</p> </li> <li> <p>Both SL and TP - Applies to both SL and TP distances</p> </li> <li> <p>Pending orders - Also applies to pending order distance from current price</p> </li> </ol>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetMinStopLevel/#stop-level-in-different-units","title":"\ud83d\udcca Stop Level in Different Units","text":"<pre><code>For EURUSD (5-digit broker):\nStopLevel = 20 points\n\nConversions:\n- Points:  20\n- Pips:    2.0 (\u00f710)\n- Price:   0.00020 (\u00d7Point size)\n\nFor USDJPY (3-digit broker):\nStopLevel = 20 points\n\nConversions:\n- Points:  20\n- Pips:    2.0 (\u00f710)\n- Price:   0.020 (\u00d7Point size)\n</code></pre> <p>See also: <code>GetSymbolInfo.md</code>, <code>GetSymbolDigits.md</code></p>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/","title":"\ud83d\udd22\ud83d\udcca Get Symbol Digits (<code>GetSymbolDigits</code>)","text":"<p>Sugar method: Returns the number of decimal places (precision) for a symbol.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetSymbolDigits(symbol)</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Number of decimal digits</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetSymbolDigits(symbol string) (int32, error)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\") Output Type Description <code>int32</code> integer Number of decimal places <code>error</code> <code>error</code> Error if symbol not found"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get the decimal precision used for price quotes.</li> <li>Why you need it: Price formatting, calculations, point size determination.</li> <li>Sanity check: EURUSD = 5 digits (1.10500), USDJPY = 3 digits (110.500).</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Price formatting - Display prices correctly</p> <p>\u2705 Calculations - Determine point size</p> <p>\u2705 Validation - Check price precision</p> <p>\u2705 Rounding - Round prices to valid precision</p>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#1-basic-usage-get-digits","title":"1) Basic usage - get digits","text":"<pre><code>digits, err := sugar.GetSymbolDigits(\"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"EURUSD uses %d decimal places\\n\", digits)\n\n// Calculate point size\npointSize := 1.0\nfor i := int32(0); i &lt; digits; i++ {\n    pointSize /= 10.0\n}\n\nfmt.Printf(\"Point size: %.5f\\n\", pointSize)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#2-format-price-with-correct-precision","title":"2) Format price with correct precision","text":"<pre><code>func FormatPrice(sugar *mt5.MT5Sugar, symbol string, price float64) string {\n    digits, err := sugar.GetSymbolDigits(symbol)\n    if err != nil {\n        return fmt.Sprintf(\"%.5f\", price) // Default\n    }\n\n    format := fmt.Sprintf(\"%%.%df\", digits)\n    return fmt.Sprintf(format, price)\n}\n\n// Usage:\nprice := 1.105003\nformatted := FormatPrice(sugar, \"EURUSD\", price)\nfmt.Printf(\"Price: %s\\n\", formatted) // \"1.10500\"\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#3-round-price-to-valid-precision","title":"3) Round price to valid precision","text":"<pre><code>func RoundToDigits(sugar *mt5.MT5Sugar, symbol string, price float64) (float64, error) {\n    digits, err := sugar.GetSymbolDigits(symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    multiplier := math.Pow(10, float64(digits))\n    rounded := math.Round(price*multiplier) / multiplier\n\n    return rounded, nil\n}\n\n// Usage:\nprice := 1.1050033333\nrounded, _ := RoundToDigits(sugar, \"EURUSD\", price)\nfmt.Printf(\"Original: %.10f\\n\", price)\nfmt.Printf(\"Rounded:  %.5f\\n\", rounded) // 1.10500\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#4-calculate-point-size-from-digits","title":"4) Calculate point size from digits","text":"<pre><code>digits, _ := sugar.GetSymbolDigits(\"EURUSD\")\n\npointSize := math.Pow(10, -float64(digits))\n\nfmt.Printf(\"Symbol:      EURUSD\\n\")\nfmt.Printf(\"Digits:      %d\\n\", digits)\nfmt.Printf(\"Point size:  %.5f\\n\", pointSize)\n\n// Calculate pip size (usually 10x point for 5-digit)\npipSize := pointSize * 10\nfmt.Printf(\"Pip size:    %.5f\\n\", pipSize)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#5-compare-precision-across-symbols","title":"5) Compare precision across symbols","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\", \"BTCUSD\"}\n\nfmt.Println(\"Symbol Precision Comparison:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, symbol := range symbols {\n    digits, err := sugar.GetSymbolDigits(symbol)\n    if err != nil {\n        fmt.Printf(\"%-8s: Error - %v\\n\", symbol, err)\n        continue\n    }\n\n    pointSize := math.Pow(10, -float64(digits))\n\n    fmt.Printf(\"%-8s: %d digits (point: %.5f)\\n\",\n        symbol, digits, pointSize)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#6-validate-price-precision","title":"6) Validate price precision","text":"<pre><code>func ValidatePricePrecision(sugar *mt5.MT5Sugar, symbol string, price float64) (bool, string) {\n    digits, err := sugar.GetSymbolDigits(symbol)\n    if err != nil {\n        return false, fmt.Sprintf(\"error: %v\", err)\n    }\n\n    // Convert to string to count decimals\n    priceStr := fmt.Sprintf(\"%.10f\", price)\n    parts := strings.Split(priceStr, \".\")\n\n    if len(parts) != 2 {\n        return false, \"invalid price format\"\n    }\n\n    // Count actual decimal places (excluding trailing zeros)\n    decimals := strings.TrimRight(parts[1], \"0\")\n    actualDigits := len(decimals)\n\n    if actualDigits &gt; int(digits) {\n        return false, fmt.Sprintf(\"price has %d decimals, max is %d\",\n            actualDigits, digits)\n    }\n\n    return true, \"valid precision\"\n}\n\n// Usage:\nprice := 1.10500\nvalid, message := ValidatePricePrecision(sugar, \"EURUSD\", price)\nif valid {\n    fmt.Printf(\"\u2705 Price %f: %s\\n\", price, message)\n} else {\n    fmt.Printf(\"\u274c Price %f: %s\\n\", price, message)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#7-display-price-with-symbols-precision","title":"7) Display price with symbol's precision","text":"<pre><code>func DisplayPriceQuote(sugar *mt5.MT5Sugar, symbol string) {\n    digits, _ := sugar.GetSymbolDigits(symbol)\n    bid, _ := sugar.GetBid(symbol)\n    ask, _ := sugar.GetAsk(symbol)\n\n    format := fmt.Sprintf(\"%%.%df\", digits)\n\n    fmt.Printf(\"Symbol: %s (%d digits)\\n\", symbol, digits)\n    fmt.Printf(\"Bid:    %s\\n\", fmt.Sprintf(format, bid))\n    fmt.Printf(\"Ask:    %s\\n\", fmt.Sprintf(format, ask))\n}\n\n// Usage:\nDisplayPriceQuote(sugar, \"EURUSD\")\n// Output:\n// Symbol: EURUSD (5 digits)\n// Bid:    1.10500\n// Ask:    1.10502\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#8-normalize-price-to-symbols-precision","title":"8) Normalize price to symbol's precision","text":"<pre><code>type PriceNormalizer struct {\n    Symbol     string\n    Digits     int32\n    Multiplier float64\n}\n\nfunc NewPriceNormalizer(sugar *mt5.MT5Sugar, symbol string) (*PriceNormalizer, error) {\n    digits, err := sugar.GetSymbolDigits(symbol)\n    if err != nil {\n        return nil, err\n    }\n\n    return &amp;PriceNormalizer{\n        Symbol:     symbol,\n        Digits:     digits,\n        Multiplier: math.Pow(10, float64(digits)),\n    }, nil\n}\n\nfunc (pn *PriceNormalizer) Normalize(price float64) float64 {\n    return math.Round(price*pn.Multiplier) / pn.Multiplier\n}\n\nfunc (pn *PriceNormalizer) Format(price float64) string {\n    normalized := pn.Normalize(price)\n    format := fmt.Sprintf(\"%%.%df\", pn.Digits)\n    return fmt.Sprintf(format, normalized)\n}\n\nfunc (pn *PriceNormalizer) GetPointSize() float64 {\n    return 1.0 / pn.Multiplier\n}\n\n// Usage:\nnormalizer, _ := NewPriceNormalizer(sugar, \"EURUSD\")\n\nprice := 1.1050033333\nnormalized := normalizer.Normalize(price)\nformatted := normalizer.Format(price)\n\nfmt.Printf(\"Original:   %.10f\\n\", price)\nfmt.Printf(\"Normalized: %.5f\\n\", normalized)\nfmt.Printf(\"Formatted:  %s\\n\", formatted)\nfmt.Printf(\"Point size: %.5f\\n\", normalizer.GetPointSize())\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#9-calculate-price-increments","title":"9) Calculate price increments","text":"<pre><code>func CalculatePriceIncrements(sugar *mt5.MT5Sugar, symbol string, basePrice float64, steps int) {\n    digits, _ := sugar.GetSymbolDigits(symbol)\n    pointSize := math.Pow(10, -float64(digits))\n\n    fmt.Printf(\"Symbol: %s (%d digits)\\n\", symbol, digits)\n    fmt.Printf(\"Base price: %.*f\\n\", digits, basePrice)\n    fmt.Printf(\"Point size: %.5f\\n\\n\", pointSize)\n\n    fmt.Println(\"Price increments:\")\n    for i := -steps; i &lt;= steps; i++ {\n        price := basePrice + (float64(i) * pointSize)\n\n        marker := \" \"\n        if i == 0 {\n            marker = \"\u2192\"\n        }\n\n        fmt.Printf(\"%s %3d points: %.*f\\n\",\n            marker, i, digits, price)\n    }\n}\n\n// Usage:\nCalculatePriceIncrements(sugar, \"EURUSD\", 1.10500, 5)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#10-advanced-symbol-precision-manager","title":"10) Advanced symbol precision manager","text":"<pre><code>type SymbolPrecisionManager struct {\n    cache      map[string]int32\n    formatters map[string]string\n}\n\nfunc NewSymbolPrecisionManager() *SymbolPrecisionManager {\n    return &amp;SymbolPrecisionManager{\n        cache:      make(map[string]int32),\n        formatters: make(map[string]string),\n    }\n}\n\nfunc (spm *SymbolPrecisionManager) GetDigits(sugar *mt5.MT5Sugar, symbol string) (int32, error) {\n    // Check cache\n    if digits, exists := spm.cache[symbol]; exists {\n        return digits, nil\n    }\n\n    // Fetch from MT5\n    digits, err := sugar.GetSymbolDigits(symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    // Cache\n    spm.cache[symbol] = digits\n    spm.formatters[symbol] = fmt.Sprintf(\"%%.%df\", digits)\n\n    return digits, nil\n}\n\nfunc (spm *SymbolPrecisionManager) FormatPrice(sugar *mt5.MT5Sugar, symbol string, price float64) (string, error) {\n    digits, err := spm.GetDigits(sugar, symbol)\n    if err != nil {\n        return \"\", err\n    }\n\n    formatter := spm.formatters[symbol]\n    return fmt.Sprintf(formatter, price), nil\n}\n\nfunc (spm *SymbolPrecisionManager) NormalizePrice(sugar *mt5.MT5Sugar, symbol string, price float64) (float64, error) {\n    digits, err := spm.GetDigits(sugar, symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    multiplier := math.Pow(10, float64(digits))\n    return math.Round(price*multiplier) / multiplier, nil\n}\n\nfunc (spm *SymbolPrecisionManager) GetPointSize(sugar *mt5.MT5Sugar, symbol string) (float64, error) {\n    digits, err := spm.GetDigits(sugar, symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    return math.Pow(10, -float64(digits)), nil\n}\n\nfunc (spm *SymbolPrecisionManager) CalculatePipValue(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    volume float64,\n) (float64, error) {\n    // Get symbol info for contract size\n    info, err := sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    // Get point size\n    pointSize, err := spm.GetPointSize(sugar, symbol)\n    if err != nil {\n        return 0, err\n    }\n\n    // Pip = 10 points (for 5-digit broker)\n    pipSize := pointSize * 10\n\n    // Pip value = pip size \u00d7 contract size \u00d7 volume\n    pipValue := pipSize * info.ContractSize * volume\n\n    return pipValue, nil\n}\n\nfunc (spm *SymbolPrecisionManager) GenerateReport(sugar *mt5.MT5Sugar, symbols []string) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      PRECISION ANALYSIS REPORT        \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    for _, symbol := range symbols {\n        digits, err := spm.GetDigits(sugar, symbol)\n        if err != nil {\n            fmt.Printf(\"%-8s: Error - %v\\n\", symbol, err)\n            continue\n        }\n\n        pointSize, _ := spm.GetPointSize(sugar, symbol)\n        pipValue, _ := spm.CalculatePipValue(sugar, symbol, 1.0)\n\n        fmt.Printf(\"\\n%-8s:\\n\", symbol)\n        fmt.Printf(\"  Digits:     %d\\n\", digits)\n        fmt.Printf(\"  Point:      %.5f\\n\", pointSize)\n        fmt.Printf(\"  Pip value:  $%.2f per lot\\n\", pipValue)\n\n        // Show example price\n        bid, _ := sugar.GetBid(symbol)\n        formatted, _ := spm.FormatPrice(sugar, symbol, bid)\n        fmt.Printf(\"  Example:    %s\\n\", formatted)\n    }\n}\n\n// Usage:\nmanager := NewSymbolPrecisionManager()\n\n// Format prices (cached for performance)\nprice1, _ := manager.FormatPrice(sugar, \"EURUSD\", 1.105003)\nprice2, _ := manager.FormatPrice(sugar, \"USDJPY\", 110.5033)\n\nfmt.Printf(\"EURUSD: %s\\n\", price1) // 1.10500\nfmt.Printf(\"USDJPY: %s\\n\", price2) // 110.503\n\n// Normalize price\nnormalized, _ := manager.NormalizePrice(sugar, \"EURUSD\", 1.1050033)\nfmt.Printf(\"Normalized: %.5f\\n\", normalized)\n\n// Calculate pip value\npipValue, _ := manager.CalculatePipValue(sugar, \"EURUSD\", 1.0)\nfmt.Printf(\"Pip value: $%.2f\\n\", pipValue)\n\n// Generate report\nsymbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"}\nmanager.GenerateReport(sugar, symbols)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Symbol information:</p> <ul> <li><code>GetSymbolInfo()</code> - Gets Digits as part of full info</li> <li><code>GetMinStopLevel()</code> - Stop level in points</li> </ul> <p>\ud83c\udf6c Price methods:</p> <ul> <li><code>GetBid()</code> / <code>GetAsk()</code> - Get current prices</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#1-confusing-digits-with-decimals","title":"1) Confusing digits with decimals","text":"<pre><code>// \u274c WRONG - digits = total decimal places\ndigits := 5\n// For 1.10500: digits = 5 (all decimals)\n\n// \u2705 CORRECT - understand it's decimal precision\ndigits := 5\npointSize := math.Pow(10, -float64(digits)) // 0.00001\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#2-not-rounding-prices","title":"2) Not rounding prices","text":"<pre><code>// \u274c WRONG - using raw float\nprice := 1.1050033333\nsugar.BuyMarket(\"EURUSD\", 0.1) // Might fail!\n\n// \u2705 CORRECT - round to valid precision\ndigits, _ := sugar.GetSymbolDigits(\"EURUSD\")\nmultiplier := math.Pow(10, float64(digits))\nprice = math.Round(price*multiplier) / multiplier\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#3-hardcoding-precision","title":"3) Hardcoding precision","text":"<pre><code>// \u274c WRONG - assuming 5 digits\nprice := fmt.Sprintf(\"%.5f\", value)\n\n// \u2705 CORRECT - use actual digits\ndigits, _ := sugar.GetSymbolDigits(symbol)\nformat := fmt.Sprintf(\"%%.%df\", digits)\nprice := fmt.Sprintf(format, value)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Cache digits - Digits never change, safe to cache</p> </li> <li> <p>Point size - Calculate as 10^(-digits)</p> </li> <li> <p>Formatting - Use digits for display formatting</p> </li> <li> <p>Validation - Round prices to symbol's precision</p> </li> <li> <p>Pip = 10 points - For 5-digit brokers (EURUSD, GBPUSD)</p> </li> </ol>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolDigits/#common-digit-values","title":"\ud83d\udcca Common Digit Values","text":"<pre><code>Standard Forex (5 digits):\nEURUSD, GBPUSD, etc. = 5 digits\n- Example: 1.10500\n- Point: 0.00001\n- Pip: 0.0001 (10 points)\n\nYen pairs (3 digits):\nUSDJPY, EURJPY, etc. = 3 digits\n- Example: 110.500\n- Point: 0.001\n- Pip: 0.01 (10 points)\n\nGold (2 digits):\nXAUUSD = 2 digits\n- Example: 1850.50\n- Point: 0.01\n- Pip: 0.10 (10 points)\n\nCrypto (varies):\nBTCUSD = 2 digits\n- Example: 45000.50\n- Point: 0.01\n</code></pre> <p>See also: <code>GetSymbolInfo.md</code>, <code>GetMinStopLevel.md</code></p>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/","title":"\ud83d\udd0d\ud83d\udcca Get Symbol Info (<code>GetSymbolInfo</code>)","text":"<p>Sugar method: Returns comprehensive symbol information in one convenient structure.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.GetSymbolInfo(symbol)</code></li> <li>Timeout: 5 seconds</li> <li>Returns: SymbolInfo structure with all parameters</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) GetSymbolInfo(symbol string) (*SymbolInfo, error)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Trading symbol (e.g., \"EURUSD\", \"XAUUSD\") Output Type Description <code>*SymbolInfo</code> struct Complete symbol information <code>error</code> <code>error</code> Error if symbol not found"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#symbolinfo-structure","title":"\ud83d\udcca SymbolInfo Structure","text":"<pre><code>type SymbolInfo struct {\n    Name         string  // Symbol name (e.g., \"EURUSD\")\n    Bid          float64 // Current BID price\n    Ask          float64 // Current ASK price\n    Digits       int32   // Number of decimal places\n    Point        float64 // Point size (minimal price change)\n    VolumeMin    float64 // Minimum volume for trading\n    VolumeMax    float64 // Maximum volume for trading\n    VolumeStep   float64 // Volume step\n    Spread       int32   // Current spread in points\n    StopLevel    int32   // Minimum stop level in points\n    ContractSize float64 // Contract size (for 1 lot)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Get all important symbol parameters in one call.</li> <li>Why you need it: Validation before trading, position sizing, SL/TP calculations.</li> <li>Sanity check: More efficient than calling individual methods for each property.</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Before trading - Validate symbol parameters</p> <p>\u2705 Position sizing - Calculate lot sizes with constraints</p> <p>\u2705 SL/TP validation - Check stop level requirements</p> <p>\u2705 Symbol comparison - Compare trading conditions</p>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#1-basic-usage-get-symbol-info","title":"1) Basic usage - get symbol info","text":"<pre><code>info, err := sugar.GetSymbolInfo(\"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nfmt.Printf(\"Symbol: %s\\n\", info.Name)\nfmt.Printf(\"Bid:    %.5f\\n\", info.Bid)\nfmt.Printf(\"Ask:    %.5f\\n\", info.Ask)\nfmt.Printf(\"Spread: %d points\\n\", info.Spread)\nfmt.Printf(\"Digits: %d\\n\", info.Digits)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#2-validate-symbol-before-trading","title":"2) Validate symbol before trading","text":"<pre><code>func ValidateSymbol(sugar *mt5.MT5Sugar, symbol string, volume float64) (bool, string) {\n    info, err := sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        return false, fmt.Sprintf(\"symbol not found: %v\", err)\n    }\n\n    // Check volume limits\n    if volume &lt; info.VolumeMin {\n        return false, fmt.Sprintf(\"volume %.2f below minimum %.2f\",\n            volume, info.VolumeMin)\n    }\n\n    if volume &gt; info.VolumeMax {\n        return false, fmt.Sprintf(\"volume %.2f exceeds maximum %.2f\",\n            volume, info.VolumeMax)\n    }\n\n    // Check volume step\n    steps := volume / info.VolumeStep\n    if steps != float64(int(steps)) {\n        return false, fmt.Sprintf(\"volume %.2f not multiple of step %.2f\",\n            volume, info.VolumeStep)\n    }\n\n    return true, \"validated\"\n}\n\n// Usage:\nvalid, message := ValidateSymbol(sugar, \"EURUSD\", 0.1)\nif valid {\n    fmt.Println(\"\u2705 Symbol validated\")\n} else {\n    fmt.Printf(\"\u274c Validation failed: %s\\n\", message)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#3-calculate-sltp-distances","title":"3) Calculate SL/TP distances","text":"<pre><code>info, _ := sugar.GetSymbolInfo(\"EURUSD\")\n\n// Calculate SL distance in price\nstopLossPips := 20.0\nslDistancePoints := stopLossPips * 10 // For 5-digit broker\n\n// Check against stop level\nif slDistancePoints &lt; float64(info.StopLevel) {\n    fmt.Printf(\"\u26a0\ufe0f  SL too close! Minimum: %d points\\n\", info.StopLevel)\n    slDistancePoints = float64(info.StopLevel)\n}\n\nslDistancePrice := slDistancePoints * info.Point\n\nfmt.Printf(\"Symbol: %s\\n\", info.Name)\nfmt.Printf(\"Point size: %.5f\\n\", info.Point)\nfmt.Printf(\"Min stop level: %d points\\n\", info.StopLevel)\nfmt.Printf(\"SL distance: %.5f price units\\n\", slDistancePrice)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#4-display-trading-conditions","title":"4) Display trading conditions","text":"<pre><code>info, _ := sugar.GetSymbolInfo(\"EURUSD\")\n\nfmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\nfmt.Println(\"\u2551      TRADING CONDITIONS               \u2551\")\nfmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\nfmt.Printf(\"Symbol:        %s\\n\\n\", info.Name)\n\nfmt.Printf(\"Current Prices:\\n\")\nfmt.Printf(\"  Bid:         %.5f\\n\", info.Bid)\nfmt.Printf(\"  Ask:         %.5f\\n\", info.Ask)\nfmt.Printf(\"  Spread:      %d points\\n\\n\", info.Spread)\n\nfmt.Printf(\"Volume Limits:\\n\")\nfmt.Printf(\"  Min:         %.2f lots\\n\", info.VolumeMin)\nfmt.Printf(\"  Max:         %.2f lots\\n\", info.VolumeMax)\nfmt.Printf(\"  Step:        %.2f lots\\n\\n\", info.VolumeStep)\n\nfmt.Printf(\"Trading Info:\\n\")\nfmt.Printf(\"  Digits:      %d\\n\", info.Digits)\nfmt.Printf(\"  Point:       %.5f\\n\", info.Point)\nfmt.Printf(\"  Stop level:  %d points\\n\", info.StopLevel)\nfmt.Printf(\"  Contract:    %.0f\\n\", info.ContractSize)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#5-compare-multiple-symbols","title":"5) Compare multiple symbols","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\"}\n\nfmt.Println(\"Symbol Comparison:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\nfor _, symbol := range symbols {\n    info, err := sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        fmt.Printf(\"%s: Error - %v\\n\", symbol, err)\n        continue\n    }\n\n    spreadCost := float64(info.Spread) * info.Point\n\n    fmt.Printf(\"%-8s: Spread %d pts (%.5f), Min lot %.2f\\n\",\n        symbol, info.Spread, spreadCost, info.VolumeMin)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#6-calculate-position-value","title":"6) Calculate position value","text":"<pre><code>info, _ := sugar.GetSymbolInfo(\"EURUSD\")\n\nvolume := 1.0 // 1 lot\n\npositionValue := volume * info.ContractSize\n\nfmt.Printf(\"Symbol:         %s\\n\", info.Name)\nfmt.Printf(\"Volume:         %.2f lots\\n\", volume)\nfmt.Printf(\"Contract size:  %.0f\\n\", info.ContractSize)\nfmt.Printf(\"Position value: $%.2f\\n\", positionValue)\n\n// Pip value (for 1 lot)\npipValue := info.Point * 10 * info.ContractSize\nfmt.Printf(\"Pip value:      $%.2f per lot\\n\", pipValue)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#7-round-volume-to-valid-step","title":"7) Round volume to valid step","text":"<pre><code>func RoundVolumeToStep(volume float64, info *SymbolInfo) float64 {\n    // Round to nearest valid step\n    steps := volume / info.VolumeStep\n    roundedSteps := math.Round(steps)\n    rounded := roundedSteps * info.VolumeStep\n\n    // Clamp to min/max\n    if rounded &lt; info.VolumeMin {\n        return info.VolumeMin\n    }\n    if rounded &gt; info.VolumeMax {\n        return info.VolumeMax\n    }\n\n    return rounded\n}\n\n// Usage:\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\n\nrequestedVolume := 0.15 // Want 0.15 lots\nvalidVolume := RoundVolumeToStep(requestedVolume, info)\n\nfmt.Printf(\"Requested: %.2f lots\\n\", requestedVolume)\nfmt.Printf(\"Valid:     %.2f lots (step: %.2f)\\n\",\n    validVolume, info.VolumeStep)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#8-spread-cost-calculator","title":"8) Spread cost calculator","text":"<pre><code>info, _ := sugar.GetSymbolInfo(\"EURUSD\")\n\nvolume := 1.0 // 1 lot\n\n// Spread in price units\nspreadPrice := float64(info.Spread) * info.Point\n\n// Spread cost for position\nspreadCost := spreadPrice * info.ContractSize * volume\n\nfmt.Printf(\"Symbol:      %s\\n\", info.Name)\nfmt.Printf(\"Spread:      %d points\\n\", info.Spread)\nfmt.Printf(\"Volume:      %.2f lots\\n\", volume)\nfmt.Printf(\"Spread cost: $%.2f\\n\", spreadCost)\n\nif spreadCost &gt; 10 {\n    fmt.Println(\"\u26a0\ufe0f  High spread - consider waiting\")\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#9-symbol-quality-checker","title":"9) Symbol quality checker","text":"<pre><code>func AssessSymbolQuality(info *SymbolInfo) string {\n    issues := []string{}\n\n    // Check spread\n    if info.Spread &gt; 30 {\n        issues = append(issues, \"High spread\")\n    }\n\n    // Check minimum volume\n    if info.VolumeMin &gt; 0.01 {\n        issues = append(issues, \"High minimum volume\")\n    }\n\n    // Check stop level\n    if info.StopLevel &gt; 50 {\n        issues = append(issues, \"Large stop level restriction\")\n    }\n\n    if len(issues) == 0 {\n        return \"\u2705 Excellent trading conditions\"\n    } else if len(issues) == 1 {\n        return fmt.Sprintf(\"\ud83d\udfe1 Good (%s)\", issues[0])\n    } else {\n        return fmt.Sprintf(\"\u26a0\ufe0f  Fair (%s)\", strings.Join(issues, \", \"))\n    }\n}\n\n// Usage:\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\nassessment := AssessSymbolQuality(info)\nfmt.Printf(\"%s: %s\\n\", info.Name, assessment)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#10-advanced-symbol-analyzer","title":"10) Advanced symbol analyzer","text":"<pre><code>type SymbolAnalyzer struct {\n    Info *SymbolInfo\n}\n\nfunc NewSymbolAnalyzer(sugar *mt5.MT5Sugar, symbol string) (*SymbolAnalyzer, error) {\n    info, err := sugar.GetSymbolInfo(symbol)\n    if err != nil {\n        return nil, err\n    }\n\n    return &amp;SymbolAnalyzer{Info: info}, nil\n}\n\nfunc (sa *SymbolAnalyzer) CalculatePipValue(volume float64) float64 {\n    // For standard pairs (10 pips = 1 point movement)\n    return sa.Info.Point * 10 * sa.Info.ContractSize * volume\n}\n\nfunc (sa *SymbolAnalyzer) CalculateSpreadCost(volume float64) float64 {\n    spreadPrice := float64(sa.Info.Spread) * sa.Info.Point\n    return spreadPrice * sa.Info.ContractSize * volume\n}\n\nfunc (sa *SymbolAnalyzer) ValidateVolume(volume float64) (float64, error) {\n    // Check minimum\n    if volume &lt; sa.Info.VolumeMin {\n        return 0, fmt.Errorf(\"volume %.2f below minimum %.2f\",\n            volume, sa.Info.VolumeMin)\n    }\n\n    // Check maximum\n    if volume &gt; sa.Info.VolumeMax {\n        return 0, fmt.Errorf(\"volume %.2f exceeds maximum %.2f\",\n            volume, sa.Info.VolumeMax)\n    }\n\n    // Round to step\n    steps := volume / sa.Info.VolumeStep\n    rounded := math.Round(steps) * sa.Info.VolumeStep\n\n    return rounded, nil\n}\n\nfunc (sa *SymbolAnalyzer) CalculateMinSLDistance() float64 {\n    // Minimum SL distance in price units\n    return float64(sa.Info.StopLevel) * sa.Info.Point\n}\n\nfunc (sa *SymbolAnalyzer) GenerateReport() {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      SYMBOL ANALYSIS REPORT           \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    fmt.Printf(\"Symbol:        %s\\n\\n\", sa.Info.Name)\n\n    // Current market\n    fmt.Println(\"Market Snapshot:\")\n    fmt.Printf(\"  Bid:         %.5f\\n\", sa.Info.Bid)\n    fmt.Printf(\"  Ask:         %.5f\\n\", sa.Info.Ask)\n    fmt.Printf(\"  Spread:      %d points (%.5f)\\n\",\n        sa.Info.Spread, float64(sa.Info.Spread)*sa.Info.Point)\n\n    // Trading specs\n    fmt.Println(\"\\nTrading Specifications:\")\n    fmt.Printf(\"  Precision:   %d decimals\\n\", sa.Info.Digits)\n    fmt.Printf(\"  Point:       %.5f\\n\", sa.Info.Point)\n    fmt.Printf(\"  Stop level:  %d points (%.5f)\\n\",\n        sa.Info.StopLevel, sa.CalculateMinSLDistance())\n\n    // Volume constraints\n    fmt.Println(\"\\nVolume Constraints:\")\n    fmt.Printf(\"  Minimum:     %.2f lots\\n\", sa.Info.VolumeMin)\n    fmt.Printf(\"  Maximum:     %.2f lots\\n\", sa.Info.VolumeMax)\n    fmt.Printf(\"  Step:        %.2f lots\\n\", sa.Info.VolumeStep)\n\n    // Contract\n    fmt.Println(\"\\nContract Information:\")\n    fmt.Printf(\"  Size:        %.0f units\\n\", sa.Info.ContractSize)\n    fmt.Printf(\"  Pip value:   $%.2f per lot\\n\",\n        sa.CalculatePipValue(1.0))\n\n    // Cost analysis (1 lot)\n    fmt.Println(\"\\nCost Analysis (1 lot):\")\n    spreadCost := sa.CalculateSpreadCost(1.0)\n    fmt.Printf(\"  Spread cost: $%.2f\\n\", spreadCost)\n\n    // Assessment\n    fmt.Println(\"\\nAssessment:\")\n    if sa.Info.Spread &lt;= 20 {\n        fmt.Println(\"  \u2705 Low spread - good for scalping\")\n    } else if sa.Info.Spread &lt;= 50 {\n        fmt.Println(\"  \ud83d\udfe1 Moderate spread - suitable for day trading\")\n    } else {\n        fmt.Println(\"  \u26a0\ufe0f  High spread - best for swing trading\")\n    }\n\n    if sa.Info.VolumeMin &lt;= 0.01 {\n        fmt.Println(\"  \u2705 Micro lots available - good for small accounts\")\n    }\n\n    if sa.Info.StopLevel &lt;= 30 {\n        fmt.Println(\"  \u2705 Low stop level - flexible SL/TP placement\")\n    } else {\n        fmt.Println(\"  \u26a0\ufe0f  High stop level - limits tight stops\")\n    }\n}\n\n// Usage:\nanalyzer, _ := NewSymbolAnalyzer(sugar, \"EURUSD\")\nanalyzer.GenerateReport()\n\n// Calculate for specific volume\npipValue := analyzer.CalculatePipValue(0.5)\nfmt.Printf(\"\\nPip value for 0.5 lots: $%.2f\\n\", pipValue)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Individual properties:</p> <ul> <li><code>GetBid()</code> - Just BID price</li> <li><code>GetAsk()</code> - Just ASK price</li> <li><code>GetSpread()</code> - Just spread</li> <li><code>GetSymbolDigits()</code> - Just digits</li> <li><code>GetMinStopLevel()</code> - Just stop level</li> </ul> <p>\ud83c\udf6c Symbol availability:</p> <ul> <li><code>IsSymbolAvailable()</code> - Check if tradeable</li> <li><code>GetAllSymbols()</code> - List all symbols</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#1-symbol-name-case-sensitivity","title":"1) Symbol name case sensitivity","text":"<pre><code>// \u274c WRONG - case matters!\ninfo, _ := sugar.GetSymbolInfo(\"eurusd\")\n\n// \u2705 CORRECT - use exact broker symbol name\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#2-not-checking-volume-step","title":"2) Not checking volume step","text":"<pre><code>// \u274c WRONG - ignoring volume step\nvolume := 0.15 // Might not be valid!\n\n// \u2705 CORRECT - round to step\ninfo, _ := sugar.GetSymbolInfo(\"EURUSD\")\nsteps := math.Round(volume / info.VolumeStep)\nvalidVolume := steps * info.VolumeStep\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#3-confusing-points-and-pips","title":"3) Confusing points and pips","text":"<pre><code>// \u274c WRONG - points \u2260 pips for 5-digit brokers\nspread := info.Spread // This is in POINTS\n// For EURUSD with 5 digits: 10 points = 1 pip\n\n// \u2705 CORRECT - convert if needed\nspreadPips := float64(info.Spread) / 10.0 // For 5-digit\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Cache info - Symbol info changes rarely, can cache for efficiency</p> </li> <li> <p>All-in-one - More efficient than multiple individual calls</p> </li> <li> <p>Validation - Always validate volumes against VolumeMin/Max/Step</p> </li> <li> <p>Stop level - Check StopLevel before placing tight SL/TP</p> </li> <li> <p>Point size - Use Point for price calculations, not hardcoded values</p> </li> </ol>"},{"location":"MT5Sugar/9.%20Symbol_Information/GetSymbolInfo/#important-relationships","title":"\ud83d\udcca Important Relationships","text":"<pre><code>Price calculations:\n- Spread in price = Spread points \u00d7 Point size\n- Pip value = Point \u00d7 10 \u00d7 ContractSize (for 5-digit)\n- SL distance = (SL pips \u00d7 10) \u00d7 Point size\n\nVolume validation:\n- Volume must be \u2265 VolumeMin\n- Volume must be \u2264 VolumeMax\n- Volume must be multiple of VolumeStep\n\nStop validation:\n- SL/TP distance must be \u2265 StopLevel points\n- StopLevel distance in price = StopLevel \u00d7 Point\n</code></pre> <p>See also: <code>GetAllSymbols.md</code>, <code>IsSymbolAvailable.md</code>, <code>GetMinStopLevel.md</code>, <code>GetSymbolDigits.md</code></p>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/","title":"\u2705\ud83d\udd0d Is Symbol Available (<code>IsSymbolAvailable</code>)","text":"<p>Sugar method: Checks if a symbol exists and is available for trading.</p> <p>API Information:</p> <ul> <li>Method: <code>sugar.IsSymbolAvailable(symbol)</code></li> <li>Timeout: 3 seconds</li> <li>Returns: Boolean availability status</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#method-signature","title":"\ud83d\udccb Method Signature","text":"<pre><code>func (s *MT5Sugar) IsSymbolAvailable(symbol string) (bool, error)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#input-output","title":"\ud83d\udd3d Input / \u2b06\ufe0f Output","text":"Input Type Description <code>symbol</code> <code>string</code> Symbol name to check (e.g., \"EURUSD\") Output Type Description <code>bool</code> boolean <code>true</code> if available, <code>false</code> otherwise <code>error</code> <code>error</code> Error if query failed"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#just-the-essentials","title":"\ud83d\udcac Just the Essentials","text":"<ul> <li>What it is: Check if a symbol exists and can be traded.</li> <li>Why you need it: Validation before trading, symbol verification, error prevention.</li> <li>Sanity check: Returns <code>false</code> for non-existent or disabled symbols (not an error).</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#when-to-use","title":"\ud83c\udfaf When to Use","text":"<p>\u2705 Before trading - Validate symbol exists</p> <p>\u2705 User input - Verify user-entered symbols</p> <p>\u2705 Symbol switching - Check availability when changing symbols</p> <p>\u2705 Error prevention - Avoid errors from invalid symbols</p>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#1-basic-usage-check-if-symbol-available","title":"1) Basic usage - check if symbol available","text":"<pre><code>available, err := sugar.IsSymbolAvailable(\"EURUSD\")\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n    return\n}\n\nif available {\n    fmt.Println(\"\u2705 EURUSD is available for trading\")\n} else {\n    fmt.Println(\"\u274c EURUSD is not available\")\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#2-validate-before-opening-position","title":"2) Validate before opening position","text":"<pre><code>symbol := \"EURUSD\"\nvolume := 0.1\n\n// Check symbol first\navailable, _ := sugar.IsSymbolAvailable(symbol)\nif !available {\n    fmt.Printf(\"\u274c Cannot trade %s - symbol not available\\n\", symbol)\n    return\n}\n\n// Safe to trade\nfmt.Printf(\"\u2705 %s available - opening position...\\n\", symbol)\nticket, err := sugar.BuyMarket(symbol, volume)\nif err != nil {\n    fmt.Printf(\"Error: %v\\n\", err)\n} else {\n    fmt.Printf(\"Position #%d opened\\n\", ticket)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#3-validate-user-input","title":"3) Validate user input","text":"<pre><code>func ValidateUserSymbol(sugar *mt5.MT5Sugar, userInput string) (string, error) {\n    // Normalize input\n    symbol := strings.ToUpper(strings.TrimSpace(userInput))\n\n    // Check availability\n    available, err := sugar.IsSymbolAvailable(symbol)\n    if err != nil {\n        return \"\", fmt.Errorf(\"validation failed: %w\", err)\n    }\n\n    if !available {\n        return \"\", fmt.Errorf(\"symbol %s is not available\", symbol)\n    }\n\n    return symbol, nil\n}\n\n// Usage:\nuserInput := \"eurusd\"\nvalidSymbol, err := ValidateUserSymbol(sugar, userInput)\nif err != nil {\n    fmt.Printf(\"\u274c Invalid symbol: %v\\n\", err)\n} else {\n    fmt.Printf(\"\u2705 Valid symbol: %s\\n\", validSymbol)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#4-check-multiple-symbols","title":"4) Check multiple symbols","text":"<pre><code>symbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"INVALID\"}\n\nfmt.Println(\"Symbol Availability Check:\")\nfmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n\navailableCount := 0\n\nfor _, symbol := range symbols {\n    available, _ := sugar.IsSymbolAvailable(symbol)\n\n    if available {\n        fmt.Printf(\"\u2705 %s\\n\", symbol)\n        availableCount++\n    } else {\n        fmt.Printf(\"\u274c %s\\n\", symbol)\n    }\n}\n\nfmt.Printf(\"\\n%d/%d symbols available\\n\", availableCount, len(symbols))\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#5-build-available-symbols-list","title":"5) Build available symbols list","text":"<pre><code>func GetAvailableSymbols(sugar *mt5.MT5Sugar, candidates []string) []string {\n    available := []string{}\n\n    for _, symbol := range candidates {\n        isAvailable, _ := sugar.IsSymbolAvailable(symbol)\n        if isAvailable {\n            available = append(available, symbol)\n        }\n    }\n\n    return available\n}\n\n// Usage:\nwatchlist := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\", \"BTCUSD\"}\navailable := GetAvailableSymbols(sugar, watchlist)\n\nfmt.Printf(\"Available from watchlist: %d/%d\\n\", len(available), len(watchlist))\nfor _, symbol := range available {\n    fmt.Println(\"  \" + symbol)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#6-symbol-switcher-with-validation","title":"6) Symbol switcher with validation","text":"<pre><code>func SwitchToSymbol(sugar *mt5.MT5Sugar, newSymbol string) error {\n    fmt.Printf(\"Switching to %s...\\n\", newSymbol)\n\n    // Check availability\n    available, err := sugar.IsSymbolAvailable(newSymbol)\n    if err != nil {\n        return fmt.Errorf(\"availability check failed: %w\", err)\n    }\n\n    if !available {\n        return fmt.Errorf(\"symbol %s is not available\", newSymbol)\n    }\n\n    // Symbol is available, proceed\n    fmt.Printf(\"\u2705 %s is available\\n\", newSymbol)\n\n    // Get symbol info\n    info, err := sugar.GetSymbolInfo(newSymbol)\n    if err != nil {\n        return fmt.Errorf(\"failed to get symbol info: %w\", err)\n    }\n\n    fmt.Printf(\"   Spread: %d points\\n\", info.Spread)\n    fmt.Printf(\"   Min lot: %.2f\\n\", info.VolumeMin)\n\n    return nil\n}\n\n// Usage:\nerr := SwitchToSymbol(sugar, \"GBPUSD\")\nif err != nil {\n    fmt.Printf(\"Switch failed: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#7-safe-symbol-operation-wrapper","title":"7) Safe symbol operation wrapper","text":"<pre><code>func WithValidSymbol(sugar *mt5.MT5Sugar, symbol string, operation func(string) error) error {\n    // Validate symbol first\n    available, err := sugar.IsSymbolAvailable(symbol)\n    if err != nil {\n        return fmt.Errorf(\"validation error: %w\", err)\n    }\n\n    if !available {\n        return fmt.Errorf(\"symbol %s not available\", symbol)\n    }\n\n    // Execute operation\n    return operation(symbol)\n}\n\n// Usage:\nerr := WithValidSymbol(sugar, \"EURUSD\", func(symbol string) error {\n    // This only runs if symbol is valid\n    ticket, err := sugar.BuyMarket(symbol, 0.1)\n    if err != nil {\n        return err\n    }\n\n    fmt.Printf(\"Opened position #%d on %s\\n\", ticket, symbol)\n    return nil\n})\n\nif err != nil {\n    fmt.Printf(\"Operation failed: %v\\n\", err)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#8-symbol-availability-monitor","title":"8) Symbol availability monitor","text":"<pre><code>func MonitorSymbolAvailability(sugar *mt5.MT5Sugar, symbol string, interval time.Duration) {\n    ticker := time.NewTicker(interval)\n    defer ticker.Stop()\n\n    wasAvailable := false\n\n    for range ticker.C {\n        available, _ := sugar.IsSymbolAvailable(symbol)\n\n        if available != wasAvailable {\n            // Status changed\n            if available {\n                fmt.Printf(\"[%s] %s: \u274c \u2192 \u2705 Now available\\n\",\n                    time.Now().Format(\"15:04:05\"), symbol)\n            } else {\n                fmt.Printf(\"[%s] %s: \u2705 \u2192 \u274c No longer available\\n\",\n                    time.Now().Format(\"15:04:05\"), symbol)\n            }\n\n            wasAvailable = available\n        }\n    }\n}\n\n// Usage: Monitor EURUSD every 30 seconds\ngo MonitorSymbolAvailability(sugar, \"EURUSD\", 30*time.Second)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#9-batch-symbol-validator","title":"9) Batch symbol validator","text":"<pre><code>type SymbolValidationResult struct {\n    Symbol    string\n    Available bool\n    Error     error\n}\n\nfunc ValidateSymbolsBatch(sugar *mt5.MT5Sugar, symbols []string) []SymbolValidationResult {\n    results := make([]SymbolValidationResult, len(symbols))\n\n    for i, symbol := range symbols {\n        available, err := sugar.IsSymbolAvailable(symbol)\n\n        results[i] = SymbolValidationResult{\n            Symbol:    symbol,\n            Available: available,\n            Error:     err,\n        }\n    }\n\n    return results\n}\n\nfunc ShowValidationResults(results []SymbolValidationResult) {\n    fmt.Println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    fmt.Println(\"\u2551      SYMBOL VALIDATION RESULTS        \u2551\")\n    fmt.Println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\")\n\n    availableCount := 0\n    errorCount := 0\n\n    for _, result := range results {\n        if result.Error != nil {\n            fmt.Printf(\"\u26a0\ufe0f  %-8s: Error - %v\\n\", result.Symbol, result.Error)\n            errorCount++\n        } else if result.Available {\n            fmt.Printf(\"\u2705 %-8s: Available\\n\", result.Symbol)\n            availableCount++\n        } else {\n            fmt.Printf(\"\u274c %-8s: Not available\\n\", result.Symbol)\n        }\n    }\n\n    fmt.Println(\"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\")\n    fmt.Printf(\"Available:  %d\\n\", availableCount)\n    fmt.Printf(\"Unavailable: %d\\n\", len(results)-availableCount-errorCount)\n    fmt.Printf(\"Errors:     %d\\n\", errorCount)\n}\n\n// Usage:\nsymbols := []string{\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"INVALID\", \"BTCUSD\"}\nresults := ValidateSymbolsBatch(sugar, symbols)\nShowValidationResults(results)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#10-advanced-symbol-availability-manager","title":"10) Advanced symbol availability manager","text":"<pre><code>type SymbolAvailabilityManager struct {\n    cache      map[string]bool\n    cacheTime  map[string]time.Time\n    cacheTTL   time.Duration\n}\n\nfunc NewSymbolAvailabilityManager(ttl time.Duration) *SymbolAvailabilityManager {\n    return &amp;SymbolAvailabilityManager{\n        cache:     make(map[string]bool),\n        cacheTime: make(map[string]time.Time),\n        cacheTTL:  ttl,\n    }\n}\n\nfunc (sam *SymbolAvailabilityManager) IsAvailable(sugar *mt5.MT5Sugar, symbol string) (bool, error) {\n    // Check cache\n    if cachedTime, exists := sam.cacheTime[symbol]; exists {\n        if time.Since(cachedTime) &lt; sam.cacheTTL {\n            // Cache hit\n            return sam.cache[symbol], nil\n        }\n    }\n\n    // Cache miss or expired - query MT5\n    available, err := sugar.IsSymbolAvailable(symbol)\n    if err != nil {\n        return false, err\n    }\n\n    // Update cache\n    sam.cache[symbol] = available\n    sam.cacheTime[symbol] = time.Now()\n\n    return available, nil\n}\n\nfunc (sam *SymbolAvailabilityManager) ClearCache() {\n    sam.cache = make(map[string]bool)\n    sam.cacheTime = make(map[string]time.Time)\n}\n\nfunc (sam *SymbolAvailabilityManager) GetCacheStats() (int, int) {\n    total := len(sam.cache)\n    expired := 0\n\n    for symbol, cachedTime := range sam.cacheTime {\n        if time.Since(cachedTime) &gt;= sam.cacheTTL {\n            expired++\n            // Clean up expired\n            delete(sam.cache, symbol)\n            delete(sam.cacheTime, symbol)\n        }\n    }\n\n    return total - expired, expired\n}\n\nfunc (sam *SymbolAvailabilityManager) ValidateAndExecute(\n    sugar *mt5.MT5Sugar,\n    symbol string,\n    operation func() error,\n) error {\n    available, err := sam.IsAvailable(sugar, symbol)\n    if err != nil {\n        return fmt.Errorf(\"validation failed: %w\", err)\n    }\n\n    if !available {\n        return fmt.Errorf(\"symbol %s not available\", symbol)\n    }\n\n    return operation()\n}\n\n// Usage:\nmanager := NewSymbolAvailabilityManager(5 * time.Minute)\n\n// Check with caching\navailable, _ := manager.IsAvailable(sugar, \"EURUSD\")\nif available {\n    fmt.Println(\"\u2705 EURUSD available (may be cached)\")\n}\n\n// Validate and execute\nerr := manager.ValidateAndExecute(sugar, \"EURUSD\", func() error {\n    ticket, err := sugar.BuyMarket(\"EURUSD\", 0.1)\n    if err != nil {\n        return err\n    }\n    fmt.Printf(\"Opened position #%d\\n\", ticket)\n    return nil\n})\n\nif err != nil {\n    fmt.Printf(\"Operation failed: %v\\n\", err)\n}\n\n// Cache stats\nvalid, expired := manager.GetCacheStats()\nfmt.Printf(\"Cache: %d valid, %d expired\\n\", valid, expired)\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#related-methods","title":"\ud83d\udd17 Related Methods","text":"<p>\ud83c\udf6c Symbol information:</p> <ul> <li><code>GetSymbolInfo()</code> - Get full symbol details</li> <li><code>GetAllSymbols()</code> - List all symbols</li> </ul> <p>\ud83c\udf6c Symbol properties:</p> <ul> <li><code>GetMinStopLevel()</code> - Get stop level</li> <li><code>GetSymbolDigits()</code> - Get decimal precision</li> </ul>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#common-pitfalls","title":"\u26a0\ufe0f Common Pitfalls","text":""},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#1-not-checking-the-result","title":"1) Not checking the result","text":"<pre><code>// \u274c WRONG - ignoring return value\nsugar.IsSymbolAvailable(\"EURUSD\")\nsugar.BuyMarket(\"EURUSD\", 0.1) // Might fail!\n\n// \u2705 CORRECT - check before trading\navailable, _ := sugar.IsSymbolAvailable(\"EURUSD\")\nif available {\n    sugar.BuyMarket(\"EURUSD\", 0.1)\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#2-assuming-false-means-error","title":"2) Assuming false means error","text":"<pre><code>// \u274c WRONG - false is not an error\navailable, _ := sugar.IsSymbolAvailable(\"INVALID\")\nif !available {\n    // This is expected for invalid symbols!\n}\n\n// \u2705 CORRECT - check error separately\navailable, err := sugar.IsSymbolAvailable(\"INVALID\")\nif err != nil {\n    // Actual error\n} else if !available {\n    // Symbol just doesn't exist or isn't available\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#3-case-sensitivity","title":"3) Case sensitivity","text":"<pre><code>// \u274c WRONG - case matters\navailable, _ := sugar.IsSymbolAvailable(\"eurusd\")\n\n// \u2705 CORRECT - use exact symbol name\navailable, _ := sugar.IsSymbolAvailable(\"EURUSD\")\n</code></pre>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#pro-tips","title":"\ud83d\udc8e Pro Tips","text":"<ol> <li> <p>Fast check - Lightweight operation, safe to call frequently</p> </li> <li> <p>Cache results - Symbol availability rarely changes, can cache</p> </li> <li> <p>Validate early - Check before expensive operations</p> </li> <li> <p>Case matters - Symbol names are case-sensitive</p> </li> <li> <p>Not an error - <code>false</code> means unavailable (not necessarily an error)</p> </li> </ol>"},{"location":"MT5Sugar/9.%20Symbol_Information/IsSymbolAvailable/#availability-states","title":"\ud83d\udcca Availability States","text":"<pre><code>Symbol states:\n\u2705 Available (true)   - Symbol exists and can be traded\n\u274c Unavailable (false) - Symbol doesn't exist OR\n                       - Symbol exists but trading disabled OR\n                       - Symbol not synchronized\n\nCommon reasons for unavailable:\n- Symbol doesn't exist on this broker\n- Symbol is disabled by broker\n- Symbol not in user's watchlist\n- Market is closed for this symbol\n- Insufficient permissions\n</code></pre> <p>See also: <code>GetSymbolInfo.md</code>, <code>GetAllSymbols.md</code></p>"},{"location":"Orchestrators/11_Trailing_stop/","title":"TrailingStopManager - Automated Profit Protection","text":""},{"location":"Orchestrators/11_Trailing_stop/#description","title":"Description","text":"<p>\ud83e\udde9 TrailingStopManager is an automated orchestrator designed to PROTECT PROFITS on open positions. It continuously monitors all positions and automatically moves stop-loss orders as price moves favorably, locking in gains without manual intervention. Perfect for trending markets where you want to let winners run while protecting accumulated profits.</p> <p>Strategy Principle: Once a position reaches a specified profit threshold, the manager activates a trailing stop mechanism:</p> <ul> <li>BUY positions: Stop loss moves UPWARD only as price rises (never down)</li> <li>SELL positions: Stop loss moves DOWNWARD only as price falls (never up)</li> <li>Maintains fixed distance from current price (e.g., 200 points behind)</li> <li>Locks in profits automatically during reversals</li> <li>Works 24/7 managing multiple positions simultaneously</li> <li>No manual chart watching required</li> </ul> <p>File: <code>examples/demos/orchestrators/11_trailing_stop.go</code></p> <p>IMPORTANT DISCLAIMER - EDUCATIONAL EXAMPLE ONLY</p> <p>This orchestrator is a demonstration showing how GoMT5 methods function and combine into automated strategies. NOT a production-ready trading strategy! Always test on demo accounts first.</p>"},{"location":"Orchestrators/11_Trailing_stop/#architecture","title":"\u2699\ufe0f Architecture","text":"<pre><code>TRAILING STOP MANAGER ORCHESTRATOR\n    |\nMT5Sugar Instance\n    |\n    |  |  |\nGetOpenPositions  GetPriceInfo  ModifyPositionSL\n(monitoring)      (tracking)     (adjusting)\n</code></pre>"},{"location":"Orchestrators/11_Trailing_stop/#dependencies","title":"Dependencies","text":"<ul> <li>MT5Sugar: High-level convenience API (<code>GetOpenPositions</code>, <code>GetPriceInfo</code>, <code>ModifyPositionSL</code>)</li> <li>BaseOrchestrator: Foundation pattern with metrics tracking and lifecycle management</li> <li>protobuf types: <code>pb.PositionInfo</code> for position data structures</li> </ul>"},{"location":"Orchestrators/11_Trailing_stop/#configuration-parameters","title":"Configuration Parameters","text":"Parameter Type Default Description <code>TrailingDistance</code> float64 <code>200</code> Distance in points to trail behind current price <code>ActivationProfit</code> float64 <code>300</code> Profit in points needed to activate trailing <code>UpdateInterval</code> time.Duration <code>2s</code> How often to check and update positions <code>Symbols</code> []string <code>[]</code> Symbols to manage (empty = all symbols) <code>MinDistance</code> float64 <code>100</code> Minimum distance from current price (safety) <code>StepSize</code> float64 <code>50</code> Minimum step size for SL adjustments (avoid excessive mods)"},{"location":"Orchestrators/11_Trailing_stop/#configuration-example","title":"Configuration Example","text":"<pre><code>config := orchestrators.TrailingStopConfig{\n    TrailingDistance: 200,           // Tail 200 points behind price\n    ActivationProfit: 300,           // Activate after +300 points profit\n    UpdateInterval:   2 * time.Second, // Check every 2 seconds\n    Symbols:          []string{},    // Manage all symbols\n    MinDistance:      100,           // Min 100pts from current price\n    StepSize:         50,            // Adjust in 50pt increments\n}\n\ntsManager := orchestrators.NewTrailingStopManager(sugar, config)\n</code></pre>"},{"location":"Orchestrators/11_Trailing_stop/#how-to-run","title":"How to Run","text":"<p>You can execute this orchestrator using several command variations:</p> <pre><code># Navigate to examples directory\ncd examples/demos\n\n# Option 1: By number\ngo run main.go 11\n\n# Option 2: By keyword\ngo run main.go trailing\n</code></pre> <p>Both commands will launch the TrailingStopManager orchestrator with the configuration specified in <code>main.go -&gt; RunOrchestrator_TrailingStop()</code>.</p>"},{"location":"Orchestrators/11_Trailing_stop/#algorithm","title":"Algorithm","text":""},{"location":"Orchestrators/11_Trailing_stop/#flowchart","title":"\ud83d\udfe2 Flowchart","text":"<pre><code>START\n  |\nInitialize TrailingStopManager\n  |\nCreate empty tracker map for positions\n  |\nMONITORING LOOP (every UpdateInterval):\n  | Get all open positions\n  |\n  FOR each position:\n    | Check if symbol is tracked (if Symbols list specified)\n    | Get or create position tracker\n    | Get current price (Bid for BUY, Ask for SELL)\n    | Calculate profit in points\n    |\n    | Is profit &gt;= ActivationProfit?\n      -&gt; NO                       -&gt; YES\n      Skip (not active)           Activate trailing\n                                     |\n                                  Calculate new SL:\n                                     | BUY:  newSL = currentPrice - TrailingDistance\n                                     | SELL: newSL = currentPrice + TrailingDistance\n                                     |\n                                  Is new SL better than current SL?\n                                     | BUY:  newSL &gt; currentSL?\n                                     | SELL: newSL &lt; currentSL?\n                                     |\n                                  YES -&gt; Modify position SL\n                                  NO  -&gt; Skip (don't move SL unfavorably)\n  |\nClean up trackers for closed positions\n  |\nREPEAT until stopped\n  |\nON STOP:\n  | Cancel monitoring loop\n  | Clear all trackers\n  |\nEND\n</code></pre>"},{"location":"Orchestrators/11_Trailing_stop/#step-by-step-description","title":"\ud83d\udee0\ufe0f Step-by-step Description","text":""},{"location":"Orchestrators/11_Trailing_stop/#1-initialization","title":"1. Initialization","text":"<p>Source: <code>examples/demos/orchestrators/11_trailing_stop.go</code> Lines: <code>169\u2013179</code></p> <pre><code>func NewTrailingStopManager(sugar *mt5.MT5Sugar, config TrailingStopConfig) *TrailingStopManager {\n    return &amp;TrailingStopManager{\n        BaseOrchestrator: NewBaseOrchestrator(\"Trailing Stop Manager\"),\n        sugar:            sugar,\n        config:           config,\n        trackedPositions: make(map[uint64]*positionTracker),\n        symbolDigits:     make(map[string]int),\n        symbolPoints:     make(map[string]float64),\n    }\n}\n</code></pre> <p>What happens:</p> <ul> <li>Creates new manager instance with provided configuration</li> <li>Initializes empty tracker maps for positions and symbol parameters</li> <li>Each position gets a dedicated tracker storing its state</li> <li>Symbol parameters (digits, point value) are cached for efficiency</li> </ul>"},{"location":"Orchestrators/11_Trailing_stop/#2-starting-the-manager","title":"2. Starting the Manager","text":"<p>Lines <code>182\u2013198</code> </p> <pre><code>func (t *TrailingStopManager) Start() error {\n    if t.IsRunning() {\n        return fmt.Errorf(\"trailing stop manager already running\")\n    }\n\n    // Create context\n    ctx, cancel := context.WithCancel(context.Background())\n    t.SetContext(ctx, cancel)\n\n    // Mark as started\n    t.MarkStarted()\n\n    // Start monitoring loop\n    go t.monitorLoop()\n\n    return nil\n}\n</code></pre> <p>What happens:</p> <ul> <li>Checks if already running (prevents duplicate starts)</li> <li>Creates cancellable context for graceful shutdown</li> <li>Marks orchestrator as started in metrics</li> <li>Launches monitoring loop in separate goroutine</li> <li>Returns immediately (non-blocking)</li> </ul>"},{"location":"Orchestrators/11_Trailing_stop/#3-monitoring-loop","title":"3. Monitoring Loop","text":"<p>Lines <code>218\u2013231</code> </p> <pre><code>func (t *TrailingStopManager) monitorLoop() {\n    ticker := time.NewTicker(t.config.UpdateInterval)\n    defer ticker.Stop()\n\n    for {\n        select {\n        case &lt;-t.GetContext().Done():\n            return\n        case &lt;-ticker.C:\n            t.updateAllTrailingStops()\n        }\n    }\n}\n</code></pre> <p>Monitoring actions every UpdateInterval:</p> <ol> <li>Ticker triggers: Every 2 seconds by default</li> <li>Context check: Monitors for stop signal</li> <li>Update all: Calls <code>updateAllTrailingStops()</code> to process positions</li> <li>Graceful exit: Stops cleanly when context is cancelled</li> </ol>"},{"location":"Orchestrators/11_Trailing_stop/#visual-example","title":"Visual Example","text":""},{"location":"Orchestrators/11_Trailing_stop/#scenario-buy-eurusd-position-with-trailing","title":"Scenario: BUY EURUSD Position with Trailing","text":"<p>Configuration: - Entry: 1.10000 - TrailingDistance: 200 points - ActivationProfit: 300 points - StepSize: 50 points</p> <pre><code>TIME 0: Position Opened\n\nPrice:        1.10000 (Entry)\nSL:           0 (no stop loss yet)\nProfit:       0 points\nStatus:       Waiting for activation (need +300pts)\n\nTIME 1: Price Rises to 1.10300\n\nPrice:        1.10300\nSL:           0 -&gt; unchanged\nProfit:       +300 points\nStatus:       TRAILING ACTIVATED!\n              Next update will set SL\n\nTIME 2: Price at 1.10400 (First SL Update)\n\nPrice:        1.10400\nCalculation:  newSL = 1.10400 - 0.00200 = 1.10200\nSL:           0 -&gt; 1.10200  UPDATED\nProfit:       +400 points\nLocked:       +200 points guaranteed\n\nTIME 3: Price at 1.10500\n\nPrice:        1.10500\nCalculation:  newSL = 1.10500 - 0.00200 = 1.10300\nSL:           1.10200 -&gt; 1.10300  UPDATED\nProfit:       +500 points\nLocked:       +300 points guaranteed\n\nTIME 4: Price Drops to 1.10450\n\nPrice:        1.10450\nCalculation:  newSL = 1.10450 - 0.00200 = 1.10250\nCheck:        1.10250 &lt; 1.10300? NO\nSL:           1.10300 -&gt; unchanged (SL only moves UP for BUY)\nProfit:       +450 points (floating)\nLocked:       +300 points guaranteed\n\nTIME 5: Price Reverses to 1.10300\n\nPrice:        1.10300\nEvent:        STOP LOSS TRIGGERED @ 1.10300\nPosition:     CLOSED\nFinal Profit: +300 points = $30 (for 0.01 lots)\nResult:       Profit protected from reversal!\n\nWITHOUT TRAILING STOP:\n\nPrice reached 1.10500 (+500pts)\nThen reversed to 1.10000 (entry)\nFinal result: $0 profit (or worse if continues down)\n\nWITH TRAILING STOP:\n\nPrice reached 1.10500 (+500pts)\nTrailing activated, SL moved to 1.10300\nPrice reversed, stopped out at 1.10300\nFinal result: +300pts = $30 profit LOCKED IN\n</code></pre>"},{"location":"Orchestrators/11_Trailing_stop/#used-mt5sugar-methods","title":"\ud83d\udca1 Used MT5Sugar Methods","text":""},{"location":"Orchestrators/11_Trailing_stop/#1-getopenpositions","title":"1. GetOpenPositions","text":"<pre><code>func (s *MT5Sugar) GetOpenPositions() ([]*pb.PositionInfo, error)\n</code></pre> <p>Purpose: Retrieves all currently open positions across all symbols.</p> <p>Usage in TrailingStopManager: - Called every UpdateInterval (default 2 seconds) - Returns full list of positions with: ticket, symbol, type, open price, current SL/TP, profit - Used to identify which positions need trailing stop management</p> <p>Returns: Slice of position info or error</p>"},{"location":"Orchestrators/11_Trailing_stop/#2-getpriceinfo","title":"2. GetPriceInfo","text":"<pre><code>func (s *MT5Sugar) GetPriceInfo(symbol string) (*mt5.PriceInfo, error)\n</code></pre> <p>Purpose: Gets current Bid/Ask prices for a symbol.</p> <p>Usage in TrailingStopManager: - Called for each position to get current price - BUY positions use Bid price (exit price) - SELL positions use Ask price (exit price) - Used to calculate profit in points and new trailing SL</p> <p>Returns: PriceInfo with Bid, Ask, and other quote data</p>"},{"location":"Orchestrators/11_Trailing_stop/#3-modifypositionsl","title":"3. ModifyPositionSL","text":"<pre><code>func (s *MT5Sugar) ModifyPositionSL(ticket uint64, newSL float64) error\n</code></pre> <p>Purpose: Modifies only the stop loss for an existing position (keeps TP unchanged).</p> <p>Usage in TrailingStopManager: - Called when new calculated SL is more favorable than current - Updates stop loss on MT5 server - Preserves existing take profit settings - Core method for implementing trailing logic</p> <p>Parameters: - <code>ticket</code>: Position ticket number - <code>newSL</code>: New stop loss price</p>"},{"location":"Orchestrators/11_Trailing_stop/#risk-management","title":"Risk Management","text":""},{"location":"Orchestrators/11_Trailing_stop/#protection-benefits","title":"Protection Benefits","text":"<p>TrailingStopManager provides:</p> <ol> <li>Profit Protection:</li> <li>Locks in gains automatically</li> <li>Prevents giving back large profits</li> <li> <p>No manual monitoring required</p> </li> <li> <p>Psychological Benefit:</p> </li> <li>Removes emotion from profit-taking</li> <li>Enforces discipline on winning trades</li> <li> <p>Lets winners run without fear</p> </li> <li> <p>Risk Reduction:</p> </li> <li>Converts open profit to guaranteed minimum</li> <li>Reduces risk as position becomes profitable</li> <li>Provides downside protection on winning trades</li> </ol>"},{"location":"Orchestrators/11_Trailing_stop/#risk-considerations","title":"Risk Considerations","text":"<ol> <li>Premature Exits:</li> <li>Too tight TrailingDistance -&gt; stopped out on normal volatility</li> <li>Solution: Match TrailingDistance to symbol's ATR</li> <li> <p>Example: EURUSD 200pts, XAUUSD 500pts</p> </li> <li> <p>Late Activation:</p> </li> <li>Too high ActivationProfit -&gt; miss protection on smaller winners</li> <li>Solution: Set based on average winning trade size</li> <li> <p>Example: Scalping 100pts, Swing 300pts</p> </li> <li> <p>Excessive Modifications:</p> </li> <li>Too small StepSize -&gt; many server calls, slippage</li> <li>Solution: Set StepSize to 25-50% of TrailingDistance</li> <li> <p>Example: TrailingDistance 200pts -&gt; StepSize 50pts</p> </li> <li> <p>Gap Risk:</p> </li> <li>Stop loss can be triggered at worse price during gaps</li> <li>Trailing doesn't protect against weekend gaps</li> <li>Solution: Close positions before high-risk events</li> </ol>"},{"location":"Orchestrators/11_Trailing_stop/#configuration-profiles","title":"Configuration Profiles","text":""},{"location":"Orchestrators/11_Trailing_stop/#conservative-wider-safety","title":"Conservative (Wider Safety)","text":"<pre><code>TrailingDistance: 200,   // Wide buffer to avoid premature exits\nActivationProfit: 300,   // Wait for solid profit before activating\nUpdateInterval:   2s\n</code></pre>"},{"location":"Orchestrators/11_Trailing_stop/#aggressive-tighter-trailing","title":"Aggressive (Tighter Trailing)","text":"<pre><code>TrailingDistance: 100,   // Closer trailing = higher risk/reward\nActivationProfit: 150,   // Activate sooner\nUpdateInterval:   1s     // More frequent checks\n</code></pre>"},{"location":"Orchestrators/11_Trailing_stop/#scalping-very-tight","title":"Scalping (Very Tight)","text":"<pre><code>TrailingDistance: 50,    // Very tight trailing for quick exits\nActivationProfit: 100,   // Activate on small profits\nUpdateInterval:   500ms  // Near real-time monitoring\n</code></pre>"},{"location":"Orchestrators/11_Trailing_stop/#when-to-use-trailing-stops","title":"When to Use Trailing Stops","text":""},{"location":"Orchestrators/11_Trailing_stop/#suitable-conditions","title":"Suitable Conditions","text":"<ul> <li>Trending markets: Strong directional movement (uptrend for BUY, downtrend for SELL)</li> <li>Breakout trades: After level breaks, let winners run</li> <li>Momentum strategies: When price moves quickly in your favor</li> <li>Swing trading: Multi-hour or multi-day positions</li> <li>Hands-off management: When you can't watch charts constantly</li> <li>Multiple positions: Managing several trades simultaneously</li> <li>Profit protection: Want to lock in gains on winning trades</li> </ul>"},{"location":"Orchestrators/11_Trailing_stop/#unsuitable-conditions","title":"Unsuitable Conditions","text":"<ul> <li>Range-bound markets: Sideways price action will trigger stops prematurely</li> <li>High volatility: Wide swings can stop you out on normal fluctuations</li> <li>News events: Spikes can trigger stops before reversal</li> <li>Scalping with fixed targets: Better to use fixed TP for quick exits</li> <li>Mean reversion strategies: Trailing fights the core strategy</li> <li>Very tight stops: Sub-20 pip stops get triggered by noise</li> </ul>"},{"location":"Orchestrators/11_Trailing_stop/#configuration-location","title":"Configuration Location","text":"<p>Runtime configuration is located in: <code>examples/demos/main.go -&gt; RunOrchestrator_TrailingStop()</code></p> <p>This separation exists because:</p> <ol> <li>Code Reusability: Same orchestrator runs with different parameters</li> <li>Quick Testing: Change numbers without modifying strategy logic</li> <li>User Examples: Shows how to properly configure the orchestrator</li> <li>Centralized Entry Point: Single place for all orchestrator launches</li> </ol>"},{"location":"Orchestrators/12_Position_scaler/","title":"PositionScaler - Advanced Position Sizing","text":""},{"location":"Orchestrators/12_Position_scaler/#description","title":"Description","text":"<p>\ud83e\udde9 PositionScaler is an advanced position management orchestrator that implements three sophisticated scaling strategies: PYRAMIDING (add to winners), AVERAGING DOWN (add to losers), and SCALE OUT (gradual profit taking). It maximizes profits in trending markets or manages recovery from drawdowns using intelligent scaling algorithms.</p> <p>Strategy Modes:</p> <ol> <li>PYRAMIDING MODE (Recommended for trending markets):</li> <li>Adds to WINNING positions as they move favorably</li> <li>Increases exposure when trend is confirmed by price action</li> <li>Uses smaller lot sizes for each additional scale-in (risk management)</li> <li>Locks in profits at each level while letting winners run</li> <li> <p>Best for strong trending markets (EURUSD trending, XAUUSD rallies)</p> </li> <li> <p>AVERAGING DOWN MODE (High risk - use with caution):</p> </li> <li>Adds to LOSING positions at better prices</li> <li>Reduces average entry price to recover faster</li> <li>VERY RISKY - requires strict maximum loss limits</li> <li>Only suitable in strong support/resistance areas</li> <li> <p>NOT recommended for beginners</p> </li> <li> <p>SCALE OUT MODE (Profit protection):</p> </li> <li>Gradually exits positions at predefined profit levels</li> <li>Takes partial profits while letting remainder run</li> <li>Reduces risk exposure over time</li> <li>Secures gains while maintaining market exposure</li> <li>Best for volatile markets or profit protection</li> </ol> <p>File: <code>examples/demos/orchestrators/12_position_scaler.go</code></p> <p>IMPORTANT DISCLAIMER - EDUCATIONAL EXAMPLE ONLY</p> <p>This orchestrator demonstrates how GoMT5 methods function and combine into automated strategies. NOT a production-ready trading strategy! Averaging down is especially dangerous if price continues falling. Always test on demo accounts first.</p>"},{"location":"Orchestrators/12_Position_scaler/#architecture","title":"\u2699\ufe0f Architecture","text":"<pre><code>POSITION SCALER ORCHESTRATOR\n    |\nMT5Sugar Instance\n    |\n    |  |  |  |\nGetOpenPositions  GetPriceInfo  BuyMarketWithSLTP  ClosePositionPartial\n(monitoring)      (tracking)    (scaling in)        (scaling out)\n</code></pre>"},{"location":"Orchestrators/12_Position_scaler/#dependencies","title":"Dependencies","text":"<ul> <li>MT5Sugar: High-level convenience API (<code>GetOpenPositions</code>, <code>GetPriceInfo</code>, <code>BuyMarketWithSLTP</code>, <code>SellMarketWithSLTP</code>, <code>ClosePositionPartial</code>)</li> <li>BaseOrchestrator: Foundation pattern with metrics tracking and lifecycle management</li> <li>protobuf types: <code>pb.PositionInfo</code> for position data structures</li> </ul>"},{"location":"Orchestrators/12_Position_scaler/#configuration-parameters","title":"Configuration Parameters","text":"Parameter Type Default Description <code>Mode</code> ScalingMode <code>Pyramiding</code> Scaling strategy (Pyramiding/AveragingDown/ScaleOut) <code>TriggerDistance</code> float64 <code>200</code> Points moved to trigger next scale <code>MinProfitToScale</code> float64 <code>100</code> Min profit before scaling (pyramiding mode) <code>MaxLossToAverage</code> float64 <code>500</code> Max loss before stopping averaging (critical safety) <code>InitialLotSize</code> float64 <code>0.10</code> Base position size in lots <code>ScaleLotSize</code> float64 <code>0.05</code> Size for each scale-in operation <code>MaxScales</code> int <code>3</code> Maximum number of scale-ins allowed <code>ReducePerScale</code> float64 <code>0.0</code> Reduce lot size by this % per scale (0-1) <code>TotalMaxLotSize</code> float64 <code>1.0</code> Maximum total position size across all scales <code>ScaleOutPercent</code> float64 <code>0.33</code> % of position to close at each level (scale-out) <code>StopLossPerScale</code> float64 <code>150</code> SL distance in points for each scale-in <code>Symbols</code> []string <code>[]</code> Symbols to manage (empty = all symbols) <code>CheckInterval</code> time.Duration <code>5s</code> How often to check for scaling opportunities"},{"location":"Orchestrators/12_Position_scaler/#configuration-example","title":"Configuration Example","text":"<pre><code>// Pyramiding Configuration\nconfig := orchestrators.PositionScalerConfig{\n    Mode:             orchestrators.Pyramiding,\n    TriggerDistance:  200,           // Scale every 200 points\n    MinProfitToScale: 100,           // Activate after +100 points profit\n    InitialLotSize:   0.10,          // Base position size\n    ScaleLotSize:     0.05,          // Add 0.05 lots each scale\n    MaxScales:        3,             // Maximum 3 additional positions\n    TotalMaxLotSize:  1.0,           // Total max 1.0 lots\n    StopLossPerScale: 150,           // 150pt SL for scale-ins\n    Symbols:          []string{\"EURUSD\"},\n    CheckInterval:    5 * time.Second,\n}\n\nscaler := orchestrators.NewPositionScaler(sugar, config)\n</code></pre>"},{"location":"Orchestrators/12_Position_scaler/#how-to-run","title":"How to Run","text":"<p>You can execute this orchestrator using several command variations:</p> <pre><code># Navigate to examples directory\ncd examples/demos\n\n# Option 1: By number\ngo run main.go 12\n\n# Option 2: By keyword\ngo run main.go scaler\n</code></pre> <p>Both commands will launch the PositionScaler orchestrator with the configuration specified in <code>main.go -&gt; RunOrchestrator_PositionScaler()</code>.</p>"},{"location":"Orchestrators/12_Position_scaler/#algorithm","title":"\ud83d\udfe2 Algorithm","text":""},{"location":"Orchestrators/12_Position_scaler/#flowchart","title":"Flowchart","text":"<pre><code>START\n  |\nInitialize PositionScaler\n  |\nCreate empty position group tracker\n  |\nMONITORING LOOP (every CheckInterval):\n  | Get all open positions\n  |\n  FOR each position:\n    | Check if symbol is tracked (if Symbols list specified)\n    | Get or create PositionGroup for this symbol\n    | Calculate total lot size for this symbol\n    |\n    | Should we scale this group?\n      |\n      | Check 1: Have we reached MaxScales? -&gt; YES: Skip\n      | Check 2: Would total exceed TotalMaxLotSize? -&gt; YES: Skip\n      | Check 3: Get current price for profit calculation\n      |\n      | MODE-SPECIFIC CHECKS:\n      |\n      | PYRAMIDING MODE:\n      |   | Is profit &gt;= MinProfitToScale? -&gt; NO: Skip\n      |   | Has price moved TriggerDistance from last scale? -&gt; NO: Skip\n      |   | YES -&gt; SCALE IN (open additional position)\n      |\n      | AVERAGING DOWN MODE:\n      |   | Is position in loss? -&gt; NO: Skip\n      |   | Is loss &lt; MaxLossToAverage? -&gt; NO: Skip (safety)\n      |   | Has price moved TriggerDistance against us? -&gt; NO: Skip\n      |   | YES -&gt; SCALE IN (open additional position at better price)\n      |\n      | SCALE OUT MODE:\n      |   | Is profit &gt;= TriggerDistance? -&gt; NO: Skip\n      |   | YES -&gt; SCALE OUT (close ScaleOutPercent of position)\n      |\n  FOR SCALE IN operation:\n    | Calculate next scale lot size\n    | Get current price\n    | Calculate stop loss for scale-in\n    | Open BUY or SELL position\n    | Add ticket to PositionGroup.ScaleTickets\n    | Increment PositionGroup.ScaleCount\n    | Update PositionGroup.TotalLotSize\n    | Update metrics\n  |\n  FOR SCALE OUT operation:\n    | Find largest position for symbol\n    | Calculate close volume (position size \u00d7 ScaleOutPercent)\n    | Close partial position\n    | Update PositionGroup.ScaleCount\n    | Update PositionGroup.TotalLotSize\n    | Update metrics\n  |\n  Clean up groups for closed positions\n  |\nREPEAT until stopped\n  |\nON STOP:\n  | Cancel monitoring loop\n  | Clear all position groups\n  |\nEND\n</code></pre>"},{"location":"Orchestrators/12_Position_scaler/#step-by-step-description","title":"Step-by-step Description","text":""},{"location":"Orchestrators/12_Position_scaler/#1-initialization","title":"1. Initialization","text":"<p>Lines <code>194\u2013202</code> <code>examples/demos/orchestrators/12_position_scaler.go</code></p> <pre><code>func NewPositionScaler(sugar *mt5.MT5Sugar, config PositionScalerConfig) *PositionScaler {\n    return &amp;PositionScaler{\n        BaseOrchestrator: NewBaseOrchestrator(\"Position Scaler\"),\n        sugar:            sugar,\n        config:           config,\n        trackedGroups:    make(map[string]*PositionGroup),\n        symbolPoints:     make(map[string]float64),\n    }\n}\n</code></pre> <p>What happens:</p> <ul> <li>Creates new scaler instance with provided configuration</li> <li>Initializes empty position group tracker (maps symbol to PositionGroup)</li> <li>Each symbol gets one PositionGroup tracking all related positions</li> <li>Symbol parameters (point values) are cached for efficiency</li> </ul> <p>PositionGroup structure: <pre><code>type PositionGroup struct {\n    Symbol         string    // Symbol being traded\n    IsBuy          bool      // Direction (true=BUY, false=SELL)\n    BaseTicket     uint64    // Original position ticket\n    ScaleTickets   []uint64  // Tickets of scale-in positions\n    BasePrice      float64   // Entry price of base position\n    TotalLotSize   float64   // Total position size across all scales\n    ScaleCount     int       // Number of scales executed\n    LastScalePrice float64   // Price of last scale-in\n    LastScaleTime  time.Time // When last scaled\n}\n</code></pre></p>"},{"location":"Orchestrators/12_Position_scaler/#2-starting-the-scaler","title":"2. Starting the Scaler","text":"<pre><code>func (p *PositionScaler) Start() error {\n    if p.IsRunning() {\n        return fmt.Errorf(\"position scaler already running\")\n    }\n\n    // Create context\n    ctx, cancel := context.WithCancel(context.Background())\n    p.SetContext(ctx, cancel)\n\n    // Mark as started\n    p.MarkStarted()\n\n    // Start monitoring loop\n    go p.monitorLoop()\n\n    return nil\n}\n</code></pre> <p>What happens:</p> <ul> <li>Checks if already running (prevents duplicate starts)</li> <li>Creates cancellable context for graceful shutdown</li> <li>Marks orchestrator as started in metrics</li> <li>Launches monitoring loop in separate goroutine</li> <li>Returns immediately (non-blocking)</li> </ul>"},{"location":"Orchestrators/12_Position_scaler/#3-monitoring-loop","title":"3. Monitoring Loop","text":"<pre><code>func (p *PositionScaler) monitorLoop() {\n    ticker := time.NewTicker(p.config.CheckInterval)\n    defer ticker.Stop()\n\n    for {\n        select {\n        case &lt;-p.GetContext().Done():\n            return\n        case &lt;-ticker.C:\n            p.checkScalingOpportunities()\n        }\n    }\n}\n</code></pre> <p>Monitoring actions every CheckInterval:</p> <ol> <li>Ticker triggers: Every 5 seconds by default</li> <li>Context check: Monitors for stop signal</li> <li>Check opportunities: Calls <code>checkScalingOpportunities()</code> to process positions</li> <li>Graceful exit: Stops cleanly when context is cancelled</li> </ol>"},{"location":"Orchestrators/12_Position_scaler/#4-scaling-decision-logic","title":"4. Scaling Decision Logic","text":"<p>For Pyramiding Mode (lines 371-396): <pre><code>case Pyramiding:\n    // Position must be in profit\n    if profitPoints &lt; p.config.MinProfitToScale {\n        return false\n    }\n\n    // Check if price moved enough from last scale\n    if group.ScaleCount &gt; 0 {\n        priceMove := (currentPrice - group.LastScalePrice) / point\n        if priceMove &lt; p.config.TriggerDistance {\n            return false\n        }\n    }\n</code></pre></p> <p>For Averaging Down Mode (lines 398-426): <pre><code>case AveragingDown:\n    // Position must be in loss but not too much\n    if profitPoints &gt; 0 {\n        return false\n    }\n\n    if -profitPoints &gt; p.config.MaxLossToAverage {\n        return false  // SAFETY: Stop averaging at max loss\n    }\n\n    // Check if price moved enough against us\n    priceMove := (group.LastScalePrice - currentPrice) / point\n    if priceMove &lt; p.config.TriggerDistance {\n        return false\n    }\n</code></pre></p> <p>For Scale Out Mode (lines 428-433): <pre><code>case ScaleOut:\n    // Check if profit target reached\n    if profitPoints &lt; p.config.TriggerDistance {\n        return false\n    }\n    return true\n</code></pre></p>"},{"location":"Orchestrators/12_Position_scaler/#visual-examples","title":"\ud83d\udca1 Visual Examples","text":""},{"location":"Orchestrators/12_Position_scaler/#scenario-1-pyramiding-mode-recommended","title":"Scenario 1: PYRAMIDING MODE (Recommended)","text":"<p>Configuration:</p> <ul> <li>Entry: 1.10000 BUY EURUSD 0.10 lots</li> <li>TriggerDistance: 200 points</li> <li>MinProfitToScale: 100 points</li> <li>ScaleLotSize: 0.05 lots</li> <li>MaxScales: 3</li> </ul> <pre><code>TIME 0: Initial Position Opened\n\nPrice:        1.10000 (Entry)\nPosition:     0.10 lots\nProfit:       0 points\nStatus:       Waiting for activation (need +100pts)\n\nTIME 1: Price Rises to 1.10100\n\nPrice:        1.10100\nPosition:     0.10 lots\nProfit:       +100 points\nStatus:       Profit threshold met but waiting for TriggerDistance\n\nTIME 2: Price at 1.10200 (FIRST SCALE)\n\nPrice:        1.10200\nProfit:       +200 points\nAction:       PYRAMIDING! Add 0.05 lots @ 1.10200\nNew Position: 0.15 lots total\nBreakdown:    - Base: 0.10 lots @ 1.10000\n              - Scale #1: 0.05 lots @ 1.10200\nStatus:       Watching for next trigger (+200pts from 1.10200)\n\nTIME 3: Price at 1.10400 (SECOND SCALE)\n\nPrice:        1.10400\nProfit:       +400 points (base), +200pts (scale #1)\nAction:       PYRAMIDING! Add 0.05 lots @ 1.10400\nNew Position: 0.20 lots total\nBreakdown:    - Base: 0.10 lots @ 1.10000 (+400pts)\n              - Scale #1: 0.05 lots @ 1.10200 (+200pts)\n              - Scale #2: 0.05 lots @ 1.10400 (just opened)\nStatus:       Watching for next trigger\n\nTIME 4: Price at 1.10600 (THIRD SCALE)\n\nPrice:        1.10600\nProfit:       +600 points (base), +400pts (scale #1), +200pts (scale #2)\nAction:       PYRAMIDING! Add 0.05 lots @ 1.10600\nNew Position: 0.25 lots total\nBreakdown:    - Base: 0.10 lots @ 1.10000 (+600pts)\n              - Scale #1: 0.05 lots @ 1.10200 (+400pts)\n              - Scale #2: 0.05 lots @ 1.10400 (+200pts)\n              - Scale #3: 0.05 lots @ 1.10600 (just opened)\nStatus:       MAX SCALES REACHED (3/3) - No more pyramiding\n\nTIME 5: Price at 1.11000 (Holding)\n\nPrice:        1.11000\nPosition:     0.25 lots\nTotal Profit: 0.10\u00d71000 + 0.05\u00d7800 + 0.05\u00d7600 + 0.05\u00d7400 = $170\nWithout Pyramiding: 0.10\u00d71000 = $100\nImprovement:  70% more profit!\n\nRESULT COMPARISON:\n\nWithout Pyramiding:\n  - Single position: 0.10 lots\n  - Profit: 1000 points \u00d7 0.10 lots = $100\n\nWith Pyramiding:\n  - Total positions: 0.25 lots across 4 entries\n  - Average entry: ~1.10200 (weighted)\n  - Total profit: $170 (70% increase!)\n  - Captured more of the trend's momentum\n</code></pre>"},{"location":"Orchestrators/12_Position_scaler/#scenario-2-averaging-down-mode-high-risk","title":"Scenario 2: AVERAGING DOWN MODE (High Risk!)","text":"<p>Configuration:</p> <ul> <li>Entry: 1.10000 BUY EURUSD 0.10 lots</li> <li>TriggerDistance: 200 points</li> <li>MaxLossToAverage: 500 points (CRITICAL SAFETY)</li> <li>ScaleLotSize: 0.05 lots</li> <li>MaxScales: 2</li> </ul> <pre><code>TIME 0: Initial Position Opened\n\nPrice:        1.10000 (Entry - expecting rise)\nPosition:     0.10 lots\nProfit:       0 points\nStatus:       Waiting for price movement\n\nTIME 1: Price Falls to 1.09800 (First Trigger)\n\nPrice:        1.09800\nPosition:     0.10 lots\nProfit:       -200 points (-$20)\nAction:       AVERAGING DOWN! Add 0.05 lots @ 1.09800\nNew Position: 0.15 lots total\nNew Avg Entry: (1.10000\u00d70.10 + 1.09800\u00d70.05) / 0.15 = 1.09933\nBreakdown:    - Base: 0.10 lots @ 1.10000 (-200pts)\n              - Average #1: 0.05 lots @ 1.09800 (just opened)\nStatus:       Average entry improved from 1.10000 to 1.09933\n\nTIME 2: Price Falls Further to 1.09600 (Second Trigger)\n\nPrice:        1.09600\nPosition:     0.15 lots\nLoss:         -400 points total (still under MaxLossToAverage)\nAction:       AVERAGING DOWN! Add 0.05 lots @ 1.09600\nNew Position: 0.20 lots total\nNew Avg Entry: (1.10000\u00d70.10 + 1.09800\u00d70.05 + 1.09600\u00d70.05) / 0.20 = 1.09850\nBreakdown:    - Base: 0.10 lots @ 1.10000 (-400pts)\n              - Average #1: 0.05 lots @ 1.09800 (-200pts)\n              - Average #2: 0.05 lots @ 1.09600 (just opened)\nStatus:       MAX SCALES REACHED (2/2) - No more averaging\n\nTIME 3: Price Falls to 1.09400 (DANGER ZONE)\n\nPrice:        1.09400\nPosition:     0.20 lots\nLoss:         -600 points base, -400 average #1, -200 average #2\nTotal Loss:   -$90\nStatus:       Would trigger another average but:\n              - MaxScales reached (2/2)\n              - Loss would exceed MaxLossToAverage (500pts)\n              SAFETY MECHANISM PREVENTS FURTHER AVERAGING!\n\nTIME 4: SCENARIO A - Recovery!\n\nPrice:        1.09850 (matches our average entry!)\nPosition:     0.20 lots\nProfit:       $0 (break even)\nStatus:       WITHOUT averaging: would still be -$15 loss\n              WITH averaging: break even achieved\n\nTIME 5: Price Recovers to 1.10000 (Original Entry)\n\nPrice:        1.10000\nPosition:     0.20 lots\nProfit:       (1.10000 - 1.09850) \u00d7 0.20 lots = 150 points = +$30\nStatus:       WITHOUT averaging: $0 profit\n              WITH averaging: +$30 profit\n              Recovery successful!\n\nWARNING - What if price continued falling?\n\nTIME X: Price Falls to 1.09000 (Disaster Scenario)\n\nPrice:        1.09000\nPosition:     0.20 lots (averaging stopped at 2 scales)\nTotal Loss:   -1000pts base, -800 average #1, -600 average #2 = -$240\n\nWithout averaging: 0.10 lots \u00d7 -1000pts = -$100 loss\nWith averaging:    0.20 lots \u00d7 -1000pts avg = -$240 loss\nResult:           DOUBLED THE LOSS by averaging into losing position!\n\nThis is why MaxLossToAverage and MaxScales are CRITICAL safety parameters!\n</code></pre>"},{"location":"Orchestrators/12_Position_scaler/#scenario-3-scale-out-mode-profit-protection","title":"Scenario 3: SCALE OUT MODE (Profit Protection)","text":"<p>Configuration:</p> <ul> <li>Entry: 1.10000 BUY EURUSD 0.30 lots</li> <li>TriggerDistance: 300 points</li> <li>ScaleOutPercent: 0.33 (33%)</li> <li>MaxScales: 3</li> </ul> <pre><code>TIME 0: Large Position Opened\n\nPrice:        1.10000 (Entry)\nPosition:     0.30 lots\nProfit:       0 points\nStatus:       Waiting for profit target\n\nTIME 1: Price at 1.10300 (FIRST SCALE OUT)\n\nPrice:        1.10300\nProfit:       +300 points\nAction:       SCALE OUT! Close 33% of position\nClose:        0.30 \u00d7 0.33 = 0.10 lots CLOSED\nLocked Profit: 0.10 lots \u00d7 300pts = +$30 SECURED\nRemaining:    0.20 lots still open\nStatus:       Profit locked, still have exposure\n\nTIME 2: Price at 1.10600 (SECOND SCALE OUT)\n\nPrice:        1.10600\nProfit:       +600 points on remaining position\nAction:       SCALE OUT! Close 33% of remaining\nClose:        0.20 \u00d7 0.33 = 0.066 lots CLOSED\nLocked Profit: 0.066 lots \u00d7 600pts = +$40 SECURED\nRemaining:    0.134 lots still open\nTotal Locked: $30 + $40 = $70 secured\nStatus:       More profit locked, reduced risk\n\nTIME 3: Price at 1.10900 (THIRD SCALE OUT)\n\nPrice:        1.10900\nProfit:       +900 points on remaining position\nAction:       SCALE OUT! Close 33% of remaining\nClose:        0.134 \u00d7 0.33 = 0.044 lots CLOSED\nLocked Profit: 0.044 lots \u00d7 900pts = +$40 SECURED\nRemaining:    0.090 lots still open\nTotal Locked: $70 + $40 = $110 secured\nStatus:       MAX SCALES REACHED (3/3)\n\nTIME 4: Price Reverses to 1.10500\n\nPrice:        1.10500\nRemaining:    0.090 lots\nProfit:       +500 points on remaining = +$45\nTotal Profit: $110 (locked) + $45 (floating) = $155\n\nWITHOUT SCALE OUT:\n  - Position: 0.30 lots @ 1.10500\n  - Profit: 0.30 \u00d7 500pts = $150\n\nWITH SCALE OUT:\n  - Locked: $110 (can't lose this)\n  - Floating: $45\n  - Total: $155\n  - Risk reduced: Only 0.090 lots at risk vs 0.30 lots\n\nRESULT:\n  - Similar total profit\n  - MUCH lower risk exposure (70% reduced)\n  - Psychological benefit: profits already secured\n  - Protected from further reversals\n</code></pre>"},{"location":"Orchestrators/12_Position_scaler/#used-mt5sugar-methods","title":"Used MT5Sugar Methods","text":""},{"location":"Orchestrators/12_Position_scaler/#1-getopenpositions","title":"1. GetOpenPositions","text":"<pre><code>func (s *MT5Sugar) GetOpenPositions() ([]*pb.PositionInfo, error)\n</code></pre> <p>Purpose: Retrieves all currently open positions across all symbols.</p> <p>Usage in PositionScaler:</p> <ul> <li>Called every CheckInterval (default 5 seconds)</li> <li>Returns full list of positions with: ticket, symbol, type, open price, volume, profit</li> <li>Used to update PositionGroups and identify scaling opportunities</li> </ul> <p>Returns: Slice of position info or error</p>"},{"location":"Orchestrators/12_Position_scaler/#2-getpriceinfo","title":"2. GetPriceInfo","text":"<pre><code>func (s *MT5Sugar) GetPriceInfo(symbol string) (*mt5.PriceInfo, error)\n</code></pre> <p>Purpose: Gets current Bid/Ask prices for a symbol.</p> <p>Usage in PositionScaler:</p> <ul> <li>Called when evaluating scaling conditions</li> <li>BUY positions use Bid price (exit price) for profit calculation</li> <li>SELL positions use Ask price (exit price) for profit calculation</li> <li>Used to determine if TriggerDistance threshold is met</li> </ul> <p>Returns: PriceInfo with Bid, Ask, and other quote data</p>"},{"location":"Orchestrators/12_Position_scaler/#3-buymarketwithsltp-sellmarketwithsltp","title":"3. BuyMarketWithSLTP / SellMarketWithSLTP","text":"<pre><code>func (s *MT5Sugar) BuyMarketWithSLTP(symbol string, lots, sl, tp float64) (uint64, error)\nfunc (s *MT5Sugar) SellMarketWithSLTP(symbol string, lots, sl, tp float64) (uint64, error)\n</code></pre> <p>Purpose: Opens market order with stop loss and take profit.</p> <p>Usage in PositionScaler:</p> <ul> <li>Called when scaling into position (Pyramiding or Averaging Down)</li> <li>Opens additional position with calculated lot size</li> <li>Sets stop loss based on StopLossPerScale parameter</li> <li>TP usually set to 0 (managed separately)</li> </ul> <p>Parameters:</p> <ul> <li><code>symbol</code>: Trading symbol</li> <li><code>lots</code>: Position size (ScaleLotSize)</li> <li><code>sl</code>: Stop loss price</li> <li><code>tp</code>: Take profit price (usually 0)</li> </ul> <p>Returns: Position ticket number or error</p>"},{"location":"Orchestrators/12_Position_scaler/#4-getpositionsbysymbol","title":"4. GetPositionsBySymbol","text":"<pre><code>func (s *MT5Sugar) GetPositionsBySymbol(symbol string) ([]*pb.PositionInfo, error)\n</code></pre> <p>Purpose: Gets all positions for a specific symbol.</p> <p>Usage in PositionScaler:</p> <ul> <li>Used in Scale Out mode to find positions to close</li> <li>Identifies largest position for partial closure</li> <li>Returns positions sorted/filtered by symbol</li> </ul> <p>Returns: Slice of positions for the symbol</p>"},{"location":"Orchestrators/12_Position_scaler/#5-closepositionpartial","title":"5. ClosePositionPartial","text":"<pre><code>func (s *MT5Sugar) ClosePositionPartial(ticket uint64, volume float64) error\n</code></pre> <p>Purpose: Closes a partial amount of a position.</p> <p>Usage in PositionScaler:</p> <ul> <li>Core method for Scale Out mode</li> <li>Closes specified percentage of position</li> <li>Allows gradual profit taking while maintaining exposure</li> </ul> <p>Parameters:</p> <ul> <li><code>ticket</code>: Position ticket to partially close</li> <li><code>volume</code>: Amount in lots to close</li> </ul>"},{"location":"Orchestrators/12_Position_scaler/#risk-management","title":"Risk Management","text":""},{"location":"Orchestrators/12_Position_scaler/#protection-benefits","title":"Protection Benefits","text":"<p>PositionScaler provides:</p> <ol> <li> <p>Pyramiding Mode:</p> </li> <li> <p>Maximizes profit in trending markets</p> </li> <li>Adds to winners only (reduced risk)</li> <li>Smaller lot sizes for scales (risk control)</li> <li> <p>Best risk/reward when trend is confirmed</p> </li> <li> <p>Scale Out Mode:</p> </li> <li> <p>Locks in partial profits progressively</p> </li> <li>Reduces position risk over time</li> <li>Psychological benefit of secured profits</li> <li> <p>Maintains some exposure for further gains</p> </li> <li> <p>Position Size Control:</p> </li> <li> <p>TotalMaxLotSize prevents over-exposure</p> </li> <li>MaxScales limits number of additions</li> <li>ReducePerScale can decrease size per level</li> </ol>"},{"location":"Orchestrators/12_Position_scaler/#risk-considerations","title":"Risk Considerations","text":"<ol> <li> <p>Averaging Down Dangers:</p> </li> <li> <p>Can DOUBLE or TRIPLE losses if trend continues</p> </li> <li>Critical: Always set MaxLossToAverage</li> <li>Critical: Limit MaxScales to 2-3 maximum</li> <li>Only use at strong support/resistance levels</li> <li> <p>NOT recommended for beginners</p> </li> <li> <p>Pyramiding Risks:</p> </li> <li> <p>Too aggressive scaling can create top-heavy position</p> </li> <li>Reversal can eliminate profits quickly</li> <li>Solution: Use trailing stops on entire group</li> <li> <p>Solution: Set conservative TriggerDistance</p> </li> <li> <p>Over-Scaling:</p> </li> <li> <p>Too small TriggerDistance -&gt; too many scales</p> </li> <li>Solution: Match TriggerDistance to symbol volatility</li> <li> <p>Example: EURUSD 200pts, XAUUSD 500pts</p> </li> <li> <p>Capital Requirements:</p> </li> <li> <p>Scaling requires available margin for additional positions</p> </li> <li>Solution: Never use more than 30% of account for scaling strategies</li> <li> <p>Solution: Monitor margin levels continuously</p> </li> <li> <p>Correlation Risk:</p> </li> <li> <p>Scaling on correlated symbols compounds risk</p> </li> <li>Example: Pyramiding EURUSD and GBPUSD simultaneously</li> <li>Solution: Limit scaling to uncorrelated symbols</li> </ol>"},{"location":"Orchestrators/12_Position_scaler/#configuration-profiles","title":"\ud83d\udd27 Configuration Profiles","text":""},{"location":"Orchestrators/12_Position_scaler/#conservative-pyramiding","title":"Conservative Pyramiding","text":"<pre><code>Mode:             Pyramiding,\nTriggerDistance:  200,     // Wide spacing = fewer scales\nMinProfitToScale: 150,     // Wait for confirmed profit\nMaxScales:        2,       // Limited scales = controlled risk\nScaleLotSize:     0.03,    // Smaller additions\nTotalMaxLotSize:  0.50,    // Conservative total\nStopLossPerScale: 200,     // Wider stops\n</code></pre>"},{"location":"Orchestrators/12_Position_scaler/#aggressive-pyramiding","title":"Aggressive Pyramiding","text":"<pre><code>Mode:             Pyramiding,\nTriggerDistance:  100,     // Tighter spacing = more scales\nMinProfitToScale: 50,      // Scale sooner\nMaxScales:        5,       // More aggressive\nScaleLotSize:     0.05,    // Larger additions\nTotalMaxLotSize:  1.50,    // Higher total\nStopLossPerScale: 100,     // Tighter stops\n</code></pre>"},{"location":"Orchestrators/12_Position_scaler/#cautious-averaging-down-high-risk","title":"Cautious Averaging Down (High Risk!)","text":"<pre><code>Mode:             AveragingDown,\nTriggerDistance:  200,     // Average every 200pts down\nMaxLossToAverage: 300,     // CRITICAL: Stop early\nMaxScales:        2,       // LIMIT exposure\nScaleLotSize:     0.03,    // SMALL additions only\nTotalMaxLotSize:  0.30,    // Very conservative\nStopLossPerScale: 150,\n</code></pre>"},{"location":"Orchestrators/12_Position_scaler/#gradual-profit-taking","title":"Gradual Profit Taking","text":"<pre><code>Mode:             ScaleOut,\nTriggerDistance:  200,     // Take profits every 200pts\nScaleOutPercent:  0.25,    // Close 25% each time\nMaxScales:        4,       // Exit in 4 stages\n</code></pre>"},{"location":"Orchestrators/12_Position_scaler/#when-to-use-position-scaling","title":"When to Use Position Scaling","text":""},{"location":"Orchestrators/12_Position_scaler/#pyramiding-suitable-conditions","title":"Pyramiding - Suitable Conditions","text":"<ul> <li>Strong trending markets: Clear directional movement confirmed by multiple timeframes</li> <li>Breakout trades: After resistance/support breaks, trend continuation expected</li> <li>Momentum strategies: When price accelerates in your favor</li> <li>Good risk/reward: Each scale-in has better R:R than previous</li> <li>Examples:</li> <li>NFP data confirms USD strength, pyramid EURUSD shorts</li> <li>Gold breaks $2000 resistance, pyramid long positions</li> <li>GBPUSD trending down 500+ pips, add to shorts</li> </ul>"},{"location":"Orchestrators/12_Position_scaler/#pyramiding-unsuitable-conditions","title":"Pyramiding - Unsuitable Conditions","text":"<ul> <li>Range-bound markets: Sideways movement will create losing scales</li> <li>Counter-trend positions: Fighting main trend direction</li> <li>High volatility: Whipsaws will trigger stops on scales</li> <li>Weak account balance: Need margin for multiple positions</li> <li>Overextended moves: Price already moved 80%+ of expected range</li> </ul>"},{"location":"Orchestrators/12_Position_scaler/#averaging-down-suitable-conditions-very-limited","title":"Averaging Down - Suitable Conditions (VERY LIMITED!)","text":"<ul> <li>ONLY at major support/resistance: Multi-year levels, round numbers</li> <li>Mean reversion expected: Statistical probability of bounce</li> <li>Small position sizes: Never more than 20% of account</li> <li>Strict loss limits: Always set MaxLossToAverage</li> <li>High confidence setups: Multiple confirmations required</li> <li>Examples:</li> <li>EURUSD at 1.0500 major support (tested 5+ times)</li> <li>Gold at $1900 psychological level with RSI oversold</li> <li>Index retracements to key Fibonacci levels</li> </ul>"},{"location":"Orchestrators/12_Position_scaler/#averaging-down-avoid-these-conditions","title":"Averaging Down - AVOID These Conditions","text":"<ul> <li>Trending markets: NEVER average against a strong trend</li> <li>Breaking support/resistance: Price acceleration usually continues</li> <li>News-driven moves: Fundamental shifts create sustained trends</li> <li>Weak support zones: Untested or recently broken levels</li> <li>Large positions: Risk of catastrophic loss</li> <li>Beginners: Requires experience to manage psychology</li> </ul>"},{"location":"Orchestrators/12_Position_scaler/#scale-out-suitable-conditions","title":"Scale Out - Suitable Conditions","text":"<ul> <li>Large profitable positions: Want to secure partial gains</li> <li>Volatile markets: Protect profits from reversals</li> <li>Approaching resistance: Profit-taking expected</li> <li>Uncertain outlook: Bullish but cautious</li> <li>Risk management: Reducing exposure gradually</li> <li>Examples:</li> <li>Gold up $50, approaching resistance, scale out 30%</li> <li>EURUSD +300 pips profit, volatility increasing</li> <li>Large swing trade position, take profits in stages</li> </ul>"},{"location":"Orchestrators/12_Position_scaler/#configuration-location","title":"Configuration Location","text":"<p>Runtime configuration is located in: <code>examples/demos/main.go -&gt; RunOrchestrator_PositionScaler()</code></p> <p>This separation exists because:</p> <ol> <li> <p>Code Reusability: Same orchestrator runs different strategies (Pyramiding/Averaging/ScaleOut)</p> </li> <li> <p>Quick Testing: Change mode and parameters without modifying strategy logic</p> </li> <li> <p>User Examples: Shows how to properly configure each scaling mode</p> </li> <li> <p>Centralized Entry Point: Single place for all orchestrator launches</p> </li> </ol>"},{"location":"Orchestrators/13_Grid_trader/","title":"GridTrader - Grid Trading Orchestrator","text":""},{"location":"Orchestrators/13_Grid_trader/#description","title":"Description","text":"<p>\ud83e\udde9 GridTrader is an automated grid trading orchestrator designed for RANGE-BOUND and SIDEWAYS markets. It places a \"fishing net\" of pending BUY and SELL orders at fixed price intervals, profiting from oscillations as price bounces between levels. Perfect for choppy, non-trending markets where price moves back and forth.</p> <p>Strategy Principle: A symmetrical grid of pending orders is created above AND below current price: - SELL LIMIT orders placed above current price (profit when price rises then falls back) - BUY LIMIT orders placed below current price (profit when price falls then rises back) - Each level acts as a profit target for the opposite direction - Grid automatically rebuilds when price moves significantly - Works 24/7 capturing small profits from price oscillations</p> <p>File: <code>examples/demos/orchestrators/13_grid_trader.go</code></p> <p>IMPORTANT DISCLAIMER - EDUCATIONAL EXAMPLE ONLY</p> <p>This orchestrator is a demonstration showing how GoMT5 methods function and combine into automated strategies. NOT a production-ready trading strategy! Always test on demo accounts first.</p>"},{"location":"Orchestrators/13_Grid_trader/#architecture","title":"Architecture","text":"<pre><code>GRID TRADER ORCHESTRATOR\n    |\nMT5Sugar Instance\n    |\n    |  |  |\nBuyLimit  SellLimit  GetPositions\n(below)   (above)    (monitoring)\n</code></pre>"},{"location":"Orchestrators/13_Grid_trader/#dependencies","title":"Dependencies","text":"<ul> <li>MT5Sugar: High-level convenience API (<code>BuyLimit</code>, <code>SellLimit</code>, <code>GetPositionsBySymbol</code>)</li> <li>MT5Service: Mid-level API for cleanup operations (<code>CloseOrder</code>)</li> <li>BaseOrchestrator: Foundation pattern with metrics tracking</li> <li>protobuf types: <code>pb.OrderCloseRequest</code> for order management</li> </ul>"},{"location":"Orchestrators/13_Grid_trader/#configuration-parameters","title":"Configuration Parameters","text":"Parameter Type Default Description <code>Symbol</code> string required Trading instrument (e.g., \"EURUSD\") <code>GridSize</code> int <code>5</code> Number of grid levels above AND below current price <code>GridStep</code> float64 <code>100</code> Distance between levels in points (100pts=10pips for EURUSD) <code>LotSize</code> float64 <code>0.01</code> Volume (lots) for each order in the grid <code>MaxPositions</code> int <code>10</code> Maximum concurrent open positions allowed <code>TakeProfit</code> float64 <code>0</code> Take profit in points (0=use GridStep as TP) <code>StopLoss</code> float64 <code>0</code> Stop loss in points (0=no SL) <code>CheckInterval</code> time.Duration <code>5s</code> How often to check and update grid <code>RebuildOnFill</code> bool <code>false</code> Whether to rebuild entire grid when order fills"},{"location":"Orchestrators/13_Grid_trader/#configuration-example","title":"Configuration Example","text":"<pre><code>config := orchestrators.GridTraderConfig{\n    Symbol:        \"EURUSD\",\n    GridSize:      5,                // 5 levels each side (10 total orders)\n    GridStep:      100,              // 100 points = 10 pips spacing\n    LotSize:       0.01,             // 0.01 lots per order\n    MaxPositions:  10,               // Max 10 concurrent positions\n    TakeProfit:    0,                // Use grid step as TP\n    StopLoss:      0,                // No SL by default\n    CheckInterval: 5 * time.Second,  // Check every 5 seconds\n    RebuildOnFill: false,            // Don't rebuild on each fill\n}\n\ngridTrader := orchestrators.NewGridTrader(sugar, config)\n</code></pre>"},{"location":"Orchestrators/13_Grid_trader/#how-to-run","title":"How to Run","text":"<p>You can execute this orchestrator using several command variations:</p> <pre><code># Navigate to examples directory\ncd examples/demos\n\n# Option 1: By number\ngo run main.go 13\n\n# Option 2: By keyword\ngo run main.go grid\n</code></pre> <p>Both commands will launch the GridTrader orchestrator with the configuration specified in <code>main.go -&gt; RunOrchestrator_Grid()</code>.</p>"},{"location":"Orchestrators/13_Grid_trader/#algorithm","title":"\ud83d\udfe2 Algorithm","text":""},{"location":"Orchestrators/13_Grid_trader/#flowchart","title":"Flowchart","text":"<pre><code>START\n  |\nInitialize symbol parameters (digits, point value)\n  |\nGet current price (Bid/Ask midpoint)\n  |\nCalculate grid levels:\n  Levels ABOVE: currentPrice + (1\u00d7step), (2\u00d7step), ..., (GridSize\u00d7step)\n  Levels BELOW: currentPrice - (1\u00d7step), (2\u00d7step), ..., (GridSize\u00d7step)\n  |\nFOR each level ABOVE current price:\n  | Place SELL LIMIT at level\n  | Set TP at (level - GridStep)\n  |\nFOR each level BELOW current price:\n  | Place BUY LIMIT at level\n  | Set TP at (level + GridStep)\n  |\nMONITORING LOOP (every CheckInterval):\n  | Get current positions count\n  | Check if max positions reached -&gt; pause if yes\n  | Get current price\n  | If price moved &gt; 2\u00d7GridStep from center -&gt; rebuild grid\n  | Track total P/L of open positions\n  |\nON STOP:\n  | Cancel all pending orders\n  | Close all positions (if configured)\n  |\nEND\n</code></pre>"},{"location":"Orchestrators/13_Grid_trader/#step-by-step-description","title":"Step-by-step Description","text":""},{"location":"Orchestrators/13_Grid_trader/#1-initialization","title":"1. Initialization","text":"<p>Lines <code>272\u2013286</code> </p> <pre><code>func (g *GridTrader) initializeSymbol() error {\n    priceInfo, err := g.sugar.GetPriceInfo(g.config.Symbol)\n    if err != nil {\n        return fmt.Errorf(\"failed to get price: %w\", err)\n    }\n    g.currentPrice = priceInfo.Bid\n\n    g.digits = 5         // Symbol decimal digits\n    g.point = 0.00001    // Point value for EURUSD\n\n    return nil\n}\n</code></pre> <p>What happens:</p> <ul> <li>Current Bid price is obtained for grid center calculation</li> <li>Symbol parameters (digits, point value) are initialized</li> <li>For EURUSD: 5 digits, point = 0.00001</li> </ul>"},{"location":"Orchestrators/13_Grid_trader/#2-building-the-grid","title":"2. Building the Grid","text":"<p>Lines <code>289\u2013331</code> </p> <pre><code>func (g *GridTrader) buildGrid() error {\n    g.cleanupOrders()  // Remove old grid first\n\n    // Get fresh current price\n    priceInfo, err := g.sugar.GetPriceInfo(g.config.Symbol)\n    g.currentPrice = (priceInfo.Bid + priceInfo.Ask) / 2\n\n    // Calculate grid step in price units\n    gridStepPrice := g.config.GridStep * g.point\n\n    // Build levels above and below\n    for i := 1; i &lt;= g.config.GridSize; i++ {\n        levelAbove := g.currentPrice + float64(i)*gridStepPrice\n        levelBelow := g.currentPrice - float64(i)*gridStepPrice\n\n        g.placeSellLimit(levelAbove)  // SELL above\n        g.placeBuyLimit(levelBelow)   // BUY below\n    }\n\n    return nil\n}\n</code></pre> <p>Critical Details:</p> <ul> <li>Grid center = (Bid + Ask) / 2 for balanced placement</li> <li>Each level is <code>GridStep \u00d7 point</code> distance from center</li> <li>SELL LIMIT orders go ABOVE current price</li> <li>BUY LIMIT orders go BELOW current price</li> <li>Old grid is cleaned up before rebuilding</li> </ul> <p>Example with GridSize=5, GridStep=100, CurrentPrice=1.10000:</p> <pre><code>Grid levels calculated:\nlevelAbove[1] = 1.10000 + (1\u00d70.00100) = 1.10100  SELL LIMIT\nlevelAbove[2] = 1.10000 + (2\u00d70.00100) = 1.10200  SELL LIMIT\nlevelAbove[3] = 1.10000 + (3\u00d70.00100) = 1.10300  SELL LIMIT\nlevelAbove[4] = 1.10000 + (4\u00d70.00100) = 1.10400  SELL LIMIT\nlevelAbove[5] = 1.10000 + (5\u00d70.00100) = 1.10500  SELL LIMIT\n\nlevelBelow[1] = 1.10000 - (1\u00d70.00100) = 1.09900  BUY LIMIT\nlevelBelow[2] = 1.10000 - (2\u00d70.00100) = 1.09800  BUY LIMIT\nlevelBelow[3] = 1.10000 - (3\u00d70.00100) = 1.09700  BUY LIMIT\nlevelBelow[4] = 1.10000 - (4\u00d70.00100) = 1.09600  BUY LIMIT\nlevelBelow[5] = 1.10000 - (5\u00d70.00100) = 1.09500  BUY LIMIT\n\nTotal: 10 pending orders\n</code></pre>"},{"location":"Orchestrators/13_Grid_trader/#3-placing-buy-limit-orders","title":"3. Placing BUY LIMIT Orders","text":"<p>Lines <code>334\u2013379</code> </p> <pre><code>func (g *GridTrader) placeBuyLimit(price float64) error {\n    // Calculate TP/SL\n    tp := price + g.config.GridStep*g.point  // TP one grid level up\n    sl := 0.0\n    if g.config.StopLoss &gt; 0 {\n        sl = price - g.config.StopLoss*g.point\n    }\n\n    // Place order\n    ticket, err := g.sugar.BuyLimitWithSLTP(\n        g.config.Symbol,\n        g.config.LotSize,\n        price,\n        sl,\n        tp,\n    )\n\n    g.activeOrders = append(g.activeOrders, ticket)\n    return nil\n}\n</code></pre> <p>Key Points:</p> <ul> <li>TP is set one grid level ABOVE entry (price + GridStep)</li> <li>This means: when BUY fills at 1.09900, TP is at 1.10000</li> <li>As price rises back to grid center, position closes with profit</li> <li>SL is optional (default 0 = no SL)</li> </ul> <p>Example BUY order placement: <pre><code>Price: 1.09900 (BUY LIMIT)\nTP:    1.10000 (price + 100pts)\nSL:    none (StopLoss = 0)\n</code></pre></p>"},{"location":"Orchestrators/13_Grid_trader/#4-placing-sell-limit-orders","title":"4. Placing SELL LIMIT Orders","text":"<p>Lines <code>382\u2013427</code> </p> <pre><code>func (g *GridTrader) placeSellLimit(price float64) error {\n    // Calculate TP/SL\n    tp := price - g.config.GridStep*g.point  // TP one grid level down\n    sl := 0.0\n    if g.config.StopLoss &gt; 0 {\n        sl = price + g.config.StopLoss*g.point\n    }\n\n    // Place order\n    ticket, err := g.sugar.SellLimitWithSLTP(\n        g.config.Symbol,\n        g.config.LotSize,\n        price,\n        sl,\n        tp,\n    )\n\n    g.activeOrders = append(g.activeOrders, ticket)\n    return nil\n}\n</code></pre> <p>Key Points:</p> <ul> <li>TP is set one grid level BELOW entry (price - GridStep)</li> <li>This means: when SELL fills at 1.10100, TP is at 1.10000</li> <li>As price falls back to grid center, position closes with profit</li> </ul> <p>Example SELL order placement: <pre><code>Price: 1.10100 (SELL LIMIT)\nTP:    1.10000 (price - 100pts)\nSL:    none (StopLoss = 0)\n</code></pre></p>"},{"location":"Orchestrators/13_Grid_trader/#5-monitoring-loop","title":"5. Monitoring Loop","text":"<p>Lines <code>430\u2013501</code> </p> <pre><code>func (g *GridTrader) monitorLoop() {\n    ticker := time.NewTicker(g.config.CheckInterval)\n    defer ticker.Stop()\n\n    for {\n        select {\n        case &lt;-g.GetContext().Done():\n            return\n        case &lt;-ticker.C:\n            g.checkAndUpdateGrid()\n        }\n    }\n}\n</code></pre> <p>Monitoring actions every CheckInterval:</p> <ol> <li>Get current positions: Count open positions for the symbol</li> <li>Check max positions: If <code>CurrentPositions &gt;= MaxPositions</code>, pause</li> <li>Get current price: Fetch latest Bid/Ask</li> <li>Check price drift: If price moved &gt; 2\u00d7GridStep from center, rebuild grid</li> <li>Track P/L: Sum profit/loss of all open positions</li> <li>Update metrics: Store in orchestrator metrics for reporting</li> </ol> <p>Grid rebuild trigger:</p> <pre><code>priceDiff := currentPrice - g.currentPrice\ngridStepPrice := g.config.GridStep * g.point\n\n// Rebuild if price moved more than 2 grid steps\nif priceDiff &gt; 2*gridStepPrice || priceDiff &lt; -2*gridStepPrice {\n    g.buildGrid()  // Rebuild centered on new price\n}\n</code></pre>"},{"location":"Orchestrators/13_Grid_trader/#6-cleanup-on-stop","title":"6. Cleanup on Stop","text":"<p>Lines <code>504\u2013536</code> </p> <pre><code>func (g *GridTrader) cleanupOrders() {\n    ctx := context.Background()\n    service := g.sugar.GetService()\n\n    for _, ticket := range g.activeOrders {\n        req := &amp;pb.OrderCloseRequest{Ticket: ticket}\n        service.CloseOrder(ctx, req)  // Delete pending order\n    }\n\n    g.activeOrders = make([]uint64, 0)  // Clear list\n}\n</code></pre> <p>What happens:</p> <ul> <li>All pending orders in <code>activeOrders</code> list are canceled</li> <li>Uses <code>Service.CloseOrder()</code> which can delete pending orders</li> <li>Grid is fully cleaned up to prevent hanging orders</li> <li>Orchestrator exits cleanly</li> </ul>"},{"location":"Orchestrators/13_Grid_trader/#grid-visualization","title":"Grid Visualization","text":""},{"location":"Orchestrators/13_Grid_trader/#scenario-gridsize5-gridstep100-currentprice110000","title":"Scenario: GridSize=5, GridStep=100, CurrentPrice=1.10000","text":"<pre><code>1.10500  [SELL LIMIT #5]  &lt;- Level +5 (+500pts)      TP: 1.10400\n         +500pts from center                          SL: none\n\n1.10400  [SELL LIMIT #4]  &lt;- Level +4 (+400pts)      TP: 1.10300\n         +400pts from center                          SL: none\n\n1.10300  [SELL LIMIT #3]  &lt;- Level +3 (+300pts)      TP: 1.10200\n         +300pts from center                          SL: none\n\n1.10200  [SELL LIMIT #2]  &lt;- Level +2 (+200pts)      TP: 1.10100\n         +200pts from center                          SL: none\n\n1.10100  [SELL LIMIT #1]  &lt;- Level +1 (+100pts)      TP: 1.10000\n         +100pts from center                          SL: none\n\n1.10000  &gt;&gt;&gt; CURRENT PRICE &lt;&lt;&lt;  [Grid Center]\n\n1.09900  [BUY LIMIT #1]   &lt;- Level -1 (-100pts)      TP: 1.10000\n         -100pts from center                          SL: none\n\n1.09800  [BUY LIMIT #2]   &lt;- Level -2 (-200pts)      TP: 1.09900\n         -200pts from center                          SL: none\n\n1.09700  [BUY LIMIT #3]   &lt;- Level -3 (-300pts)      TP: 1.09800\n         -300pts from center                          SL: none\n\n1.09600  [BUY LIMIT #4]   &lt;- Level -4 (-400pts)      TP: 1.09700\n         -400pts from center                          SL: none\n\n1.09500  [BUY LIMIT #5]   &lt;- Level -5 (-500pts)      TP: 1.09600\n         -500pts from center                          SL: none\n\nTotal: 10 pending orders (5 BUY + 5 SELL)\n</code></pre>"},{"location":"Orchestrators/13_Grid_trader/#working-scenario-price-movement-profit","title":"Working Scenario: Price Movement &amp; Profit","text":"<p>Time 0: Grid Placed <pre><code>Price:     1.10000\nStatus:    All 10 pending orders active\nPositions: 0\nP/L:       $0.00\n</code></pre></p> <p>Time 1: Price Drops to 1.09900 <pre><code>Event:     BUY LIMIT #1 @ 1.09900 TRIGGERED\nPosition:  LONG 0.01 lots @ 1.09900\nTP:        1.10000 (next grid level up)\nStatus:    1 position open, 9 pending orders remain\n</code></pre></p> <p>Time 2: Price Returns to 1.10000 <pre><code>Event:     BUY position CLOSED by TP @ 1.10000\nProfit:    +100 points = +$10 (for 0.01 lots)\nAction:    Grid rebuilds, new 10 pending orders placed\nTotal P/L: +$10\n</code></pre></p> <p>Time 3: Price Rises to 1.10200 <pre><code>Event:     SELL LIMIT #2 @ 1.10200 TRIGGERED\nPosition:  SHORT 0.01 lots @ 1.10200\nTP:        1.10100 (next grid level down)\nStatus:    1 position open, 9 pending orders remain\n</code></pre></p> <p>Time 4: Price Falls to 1.10100 <pre><code>Event:     SELL position CLOSED by TP @ 1.10100\nProfit:    +100 points = +$10\nTotal P/L: +$20\n</code></pre></p> <p>Time 5: Multiple Oscillations <pre><code>Price oscillates: 1.09900 -&gt; 1.10000 -&gt; 1.09800 -&gt; 1.10100\nResult:  4 trades triggered, each with +100pts profit\nTotal profit: 4 \u00d7 $10 = $40\n</code></pre></p> <p>Summary:</p> <ul> <li>Range-bound market (1.09500 - 1.10500): Grid captures EVERY oscillation</li> <li>Without grid: Hard to catch manually, many small movements missed</li> <li>With grid: Automatic profit on each bounce</li> <li>Typical result: 10-20 small wins per day in choppy markets</li> </ul>"},{"location":"Orchestrators/13_Grid_trader/#used-mt5sugar-methods","title":"Used MT5Sugar Methods","text":""},{"location":"Orchestrators/13_Grid_trader/#1-buylimit-buylimitwithsltp","title":"1. BuyLimit / BuyLimitWithSLTP","text":"<pre><code>func (s *MT5Sugar) BuyLimit(symbol string, volume float64, price float64) (uint64, error)\n\nfunc (s *MT5Sugar) BuyLimitWithSLTP(\n    symbol string,\n    volume float64,\n    price float64,\n    sl float64,\n    tp float64,\n) (uint64, error)\n</code></pre> <p>Purpose: Places pending Buy Limit order at specified price.</p> <p>Parameters in GridTrader:</p> <ul> <li><code>symbol</code>: Trading instrument (from config.Symbol)</li> <li><code>volume</code>: <code>config.LotSize</code> (e.g., 0.01)</li> <li><code>price</code>: Calculated grid level BELOW current price</li> <li><code>sl</code>: Stop loss price (0 if disabled)</li> <li><code>tp</code>: Take profit price (price + GridStep)</li> </ul> <p>Returns: Order ticket number or error</p>"},{"location":"Orchestrators/13_Grid_trader/#2-selllimit-selllimitwithsltp","title":"2. SellLimit / SellLimitWithSLTP","text":"<pre><code>func (s *MT5Sugar) SellLimit(symbol string, volume float64, price float64) (uint64, error)\n\nfunc (s *MT5Sugar) SellLimitWithSLTP(\n    symbol string,\n    volume float64,\n    price float64,\n    sl float64,\n    tp float64,\n) (uint64, error)\n</code></pre> <p>Purpose: Places pending Sell Limit order at specified price.</p> <p>Parameters in GridTrader:</p> <ul> <li><code>price</code>: Calculated grid level ABOVE current price</li> <li><code>tp</code>: Take profit price (price - GridStep)</li> </ul>"},{"location":"Orchestrators/13_Grid_trader/#3-getpositionsbysymbol","title":"3. GetPositionsBySymbol","text":"<pre><code>func (s *MT5Sugar) GetPositionsBySymbol(symbol string) ([]*mt5.Position, error)\n</code></pre> <p>Purpose: Retrieves all open positions for a symbol.</p> <p>Usage in GridTrader:</p> <ul> <li>Called every CheckInterval in monitoring loop</li> <li>Counts positions to enforce MaxPositions limit</li> <li>Calculates total P/L across all positions</li> </ul>"},{"location":"Orchestrators/13_Grid_trader/#4-getpriceinfo","title":"4. GetPriceInfo","text":"<pre><code>func (s *MT5Sugar) GetPriceInfo(symbol string) (*mt5.PriceInfo, error)\n</code></pre> <p>Purpose: Gets current Bid/Ask prices for a symbol.</p> <p>Usage in GridTrader:</p> <ul> <li>Gets current price for grid center calculation</li> <li>Monitors price drift to trigger grid rebuilds</li> </ul>"},{"location":"Orchestrators/13_Grid_trader/#5-servicecloseorder-via-getservice","title":"5. Service.CloseOrder (via GetService)","text":"<pre><code>service := sugar.GetService()\nservice.CloseOrder(ctx context.Context, req *pb.OrderCloseRequest) (*pb.OrderCloseData, error)\n</code></pre> <p>Purpose: Closes position or deletes pending order.</p> <p>Usage in GridTrader:</p> <ul> <li>Cleanup operation when stopping orchestrator</li> <li>Deletes all pending orders in <code>activeOrders</code> list</li> <li>Ensures no hanging orders after exit</li> </ul>"},{"location":"Orchestrators/13_Grid_trader/#risk-management","title":"Risk Management","text":""},{"location":"Orchestrators/13_Grid_trader/#maximum-risk-calculation","title":"Maximum Risk Calculation","text":"<pre><code>Risk per level = LotSize \u00d7 StopLoss \u00d7 PointValue\n\nFor EURUSD (PointValue ~$10 per 1.0 lot):\n- LotSize = 0.01\n- StopLoss = 500 points (if configured)\n- Risk per level = 0.01 \u00d7 500 \u00d7 $10 = $50\n\nTotal maximum risk (if all orders trigger):\n- GridSize = 5 -&gt; 10 orders total\n- Maximum risk = 10 \u00d7 $50 = $500\n</code></pre>"},{"location":"Orchestrators/13_Grid_trader/#risk-considerations","title":"Risk Considerations","text":"<ol> <li> <p>No Stop Loss Default:</p> </li> <li> <p>Default <code>StopLoss = 0</code> means NO stop loss protection</p> </li> <li>Grid trading relies on price returning to range</li> <li>If range breaks violently, losses can be severe</li> <li> <p>Recommendation: Set <code>StopLoss = 3 \u00d7 GridStep</code> for safety</p> </li> <li> <p>Overexposure Risk:</p> </li> <li> <p><code>GridSize \u00d7 LotSize</code> = total volume exposure</p> </li> <li>Example: GridSize=10, LotSize=0.1 -&gt; 1.0 lots total</li> <li> <p>Ensure account has adequate margin for full grid</p> </li> <li> <p>Trending Market Danger:</p> </li> <li> <p>Grid designed for RANGES, not TRENDS</p> </li> <li>In strong trend: all orders on one side fill</li> <li>Result: Multiple losing positions, no offsetting wins</li> <li> <p>Solution: Only use during range-bound sessions</p> </li> <li> <p>MaxPositions Safety:</p> </li> <li> <p>Limits concurrent exposure</p> </li> <li>Prevents runaway position accumulation</li> <li>Set to <code>GridSize \u00d7 2</code> or higher for buffer</li> </ol>"},{"location":"Orchestrators/13_Grid_trader/#recommended-settings-by-account-size","title":"Recommended Settings by Account Size","text":"<p>Small Account ($500-$1000): <pre><code>GridSize:      3,    // Limited exposure\nGridStep:      100,  // Standard spacing\nLotSize:       0.01, // Minimum lots\nMaxPositions:  6,    // Safety limit\nStopLoss:      300,  // 30 pip SL for protection\n</code></pre></p> <p>Medium Account ($5000-$10000): <pre><code>GridSize:      5,    // Balanced grid\nGridStep:      100,\nLotSize:       0.02,\nMaxPositions:  10,\nStopLoss:      200,  // Tighter SL\n</code></pre></p> <p>Large Account ($10000+): <pre><code>GridSize:      10,   // Wide grid\nGridStep:      50,   // Tighter spacing\nLotSize:       0.05,\nMaxPositions:  20,\nStopLoss:      0,    // No SL (experienced only)\n</code></pre></p>"},{"location":"Orchestrators/13_Grid_trader/#when-to-use-grid-trading","title":"When to Use Grid Trading","text":""},{"location":"Orchestrators/13_Grid_trader/#suitable-conditions","title":"Suitable Conditions","text":"<ul> <li>Range-bound markets: Price oscillating within defined levels</li> <li>Low volatility: Small, predictable price movements</li> <li>Asian session: Typically calmer trading hours</li> <li>Post-news consolidation: After big moves, price settles into range</li> <li>Clear support/resistance: Known price boundaries</li> <li>Sideways forex pairs: EURUSD at night, consolidating pairs</li> <li>Cryptocurrency weekends: Lower volatility, tighter ranges</li> </ul>"},{"location":"Orchestrators/13_Grid_trader/#unsuitable-conditions","title":"Unsuitable Conditions","text":"<ul> <li>Trending markets: Strong directional movement</li> <li>High-impact news events: NFP, FOMC, Brexit votes</li> <li>Breakout scenarios: Price breaking key levels</li> <li>Low liquidity: Wide spreads, gap risk</li> <li>High volatility: Violent price swings</li> <li>Pre-news periods: Uncertainty before announcements</li> </ul>"},{"location":"Orchestrators/13_Grid_trader/#best-market-sessions","title":"Best Market Sessions","text":"Session Suitability Notes Asian (Tokyo) Excellent Low volatility, tight ranges European (London) Moderate Higher volatility, watch for trends US (New York) Moderate Can be volatile, use wider grids Overlap (London+NY) Risky High volatility, trending tendency Weekend (Crypto) Good Lower volatility in crypto markets"},{"location":"Orchestrators/13_Grid_trader/#configuration-location","title":"Configuration Location","text":"<p>Runtime configuration is located in: <code>examples/demos/main.go -&gt; RunOrchestrator_Grid()</code></p> <p>This separation exists because:</p> <ol> <li> <p>Code reusability: Same orchestrator runs with different parameters</p> </li> <li> <p>Quick testing: Change numbers without modifying strategy logic</p> </li> <li> <p>User examples: Shows how to properly configure the orchestrator</p> </li> <li> <p>Centralized entry point: Single place for all orchestrator launches</p> </li> </ol>"},{"location":"Orchestrators/14_Risk_manager/","title":"RiskManager - Account Protection System","text":""},{"location":"Orchestrators/14_Risk_manager/#description","title":"Description","text":"<p>\ud83e\udde9 RiskManager is an automated account guardian that monitors risk metrics 24/7 and automatically intervenes when danger limits are exceeded. It PREVENTS ACCOUNT BLOW-UPS by enforcing strict risk rules: drawdown limits, daily loss caps, margin monitoring, and position limits. The \"safety net\" that saves you from catastrophic losses.</p> <p>Strategy Principle: Continuously monitors critical account parameters and takes protective action when thresholds are breached:</p> <ul> <li>Drawdown Protection: Monitors both percentage and absolute drawdown from peak balance</li> <li>Daily Loss Limit: Enforces maximum daily loss caps (prevents revenge trading)</li> <li>Daily Profit Target: Locks in good days by stopping trading at profit goal</li> <li>Margin Safety: Monitors margin levels and prevents margin calls</li> <li>Position Limits: Controls maximum position counts and per-symbol exposure</li> <li>Emergency Actions: Automatically closes positions or blocks new trades when limits hit</li> </ul> <p>File: <code>examples/demos/orchestrators/14_risk_manager.go</code></p> <p>IMPORTANT DISCLAIMER - EDUCATIONAL EXAMPLE ONLY</p> <p>This orchestrator is a demonstration showing how GoMT5 methods function and combine into automated risk management systems. NOT a production-ready trading strategy! Always test on demo accounts first and adjust limits to your specific risk tolerance.</p>"},{"location":"Orchestrators/14_Risk_manager/#architecture","title":"\ud83d\udfe2 Architecture","text":"<pre><code>RISK MANAGER ORCHESTRATOR\n    |\nMT5Sugar Instance\n    |\n    |  |  |  |\nGetEquity  GetBalance  GetMarginLevel  GetOpenPositions\n(monitoring) (tracking)    (safety)        (limits)\n    |\nCloseAllPositions / ClosePosition\n(emergency intervention)\n</code></pre>"},{"location":"Orchestrators/14_Risk_manager/#dependencies","title":"Dependencies","text":"<ul> <li>MT5Sugar: High-level convenience API (<code>GetEquity</code>, <code>GetBalance</code>, <code>GetMarginLevel</code>, <code>GetOpenPositions</code>, <code>CloseAllPositions</code>, <code>ClosePosition</code>)</li> <li>BaseOrchestrator: Foundation pattern with metrics tracking and lifecycle management</li> <li>protobuf types: <code>pb.PositionInfo</code> for position data structures</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#configuration-parameters","title":"Configuration Parameters","text":"Parameter Type Default Description <code>MaxDrawdownPercent</code> float64 <code>10.0</code> Maximum account drawdown percentage from peak <code>MaxDrawdownAbsolute</code> float64 <code>1000.0</code> Maximum absolute drawdown amount <code>DailyLossLimit</code> float64 <code>500.0</code> Maximum daily loss allowed <code>DailyProfitTarget</code> float64 <code>1000.0</code> Stop trading after hitting this profit <code>MinMarginLevel</code> float64 <code>150.0</code> Minimum margin level percentage <code>MaxMarginUsed</code> float64 <code>80.0</code> Maximum margin usage percentage <code>MaxOpenPositions</code> int <code>20</code> Maximum concurrent positions <code>MaxSymbolExposure</code> int <code>5</code> Maximum positions per symbol <code>MaxPositionSize</code> float64 <code>1.0</code> Maximum lot size per position <code>CheckInterval</code> time.Duration <code>5s</code> How often to check risk metrics <code>EnableAutoClose</code> bool <code>true</code> Automatically close positions on breach <code>EnableTradeBlocking</code> bool <code>true</code> Block new trades when limits hit"},{"location":"Orchestrators/14_Risk_manager/#configuration-example","title":"Configuration Example","text":"<pre><code>config := orchestrators.RiskManagerConfig{\n    MaxDrawdownPercent:  10.0,              // 10% max drawdown from peak\n    MaxDrawdownAbsolute: 1000.0,            // $1000 max drawdown\n    DailyLossLimit:      500.0,             // $500 daily loss limit\n    DailyProfitTarget:   1000.0,            // $1000 daily profit target\n    MinMarginLevel:      150.0,             // 150% min margin level\n    MaxMarginUsed:       80.0,              // 80% max margin usage\n    MaxOpenPositions:    20,                // Max 20 positions\n    MaxSymbolExposure:   5,                 // Max 5 per symbol\n    MaxPositionSize:     1.0,               // Max 1.0 lot\n    CheckInterval:       5 * time.Second,   // Check every 5 seconds\n    EnableAutoClose:     true,              // Auto-close on breach\n    EnableTradeBlocking: true,              // Block trades on breach\n}\n\nriskManager := orchestrators.NewRiskManager(sugar, config)\n</code></pre>"},{"location":"Orchestrators/14_Risk_manager/#how-to-run","title":"How to Run","text":"<p>You can execute this orchestrator using several command variations:</p> <pre><code># Navigate to examples directory\ncd examples/demos\n\n# Option 1: By number\ngo run main.go 14\n\n# Option 2: By keyword\ngo run main.go risk\n</code></pre> <p>Both commands will launch the RiskManager orchestrator with the configuration specified in <code>main.go -&gt; RunOrchestrator_RiskManager()</code>.</p>"},{"location":"Orchestrators/14_Risk_manager/#algorithm","title":"\ud83d\udfe2 Algorithm","text":""},{"location":"Orchestrators/14_Risk_manager/#flowchart","title":"Flowchart","text":"<pre><code>START\n  |\nInitialize baseline values:\n  - Starting balance\n  - Peak balance\n  - Daily start balance\n  - Trading blocked = false\n  |\nMONITORING LOOP (every CheckInterval):\n  |\n  Check if new day -&gt; Reset daily counters\n  |\n  Get current account state:\n    - Equity\n    - Balance\n    - Margin Level\n    - Open positions\n  |\n  Update peak balance if equity higher\n  |\n  Calculate metrics:\n    - Current drawdown = peak - equity\n    - Drawdown % = (drawdown / peak) \u00d7 100\n    - Today profit = balance - daily start balance\n  |\n  CHECK RISK LIMITS:\n    |\n    1. DRAWDOWN LIMITS:\n       | If drawdown % &gt;= MaxDrawdownPercent:\n       |   -&gt; Log CRITICAL event\n       |   -&gt; If EnableAutoClose: CLOSE ALL POSITIONS\n       |\n       | If drawdown $ &gt;= MaxDrawdownAbsolute:\n       |   -&gt; Log CRITICAL event\n       |   -&gt; If EnableAutoClose: CLOSE ALL POSITIONS\n    |\n    2. DAILY LIMITS:\n       | If today loss &gt;= DailyLossLimit:\n       |   -&gt; Log CRITICAL event\n       |   -&gt; If EnableAutoClose: CLOSE ALL POSITIONS\n       |   -&gt; If EnableTradeBlocking: Block trading\n       |\n       | If today profit &gt;= DailyProfitTarget:\n       |   -&gt; Log INFO event\n       |   -&gt; If EnableTradeBlocking: Block trading\n    |\n    3. MARGIN LIMITS:\n       | If margin level &lt; MinMarginLevel:\n       |   -&gt; Log CRITICAL event\n       |   -&gt; If EnableAutoClose: Close most losing position\n    |\n    4. POSITION LIMITS:\n       | If open positions &gt; MaxOpenPositions:\n       |   -&gt; Log WARNING event\n       |\n       | For each symbol:\n       |   If positions &gt; MaxSymbolExposure:\n       |     -&gt; Log WARNING event\n  |\n  Update status metrics\n  |\nREPEAT until stopped\n  |\nON STOP:\n  | Cancel monitoring loop\n  | Print risk event summary\n  |\nEND\n</code></pre>"},{"location":"Orchestrators/14_Risk_manager/#step-by-step-description","title":"\ud83d\udee0\ufe0f Step-by-step Description","text":""},{"location":"Orchestrators/14_Risk_manager/#1-initialization","title":"1. Initialization","text":"<p>Lines <code>188\u2013201</code> </p> <pre><code>func (r *RiskManager) initialize() error {\n    // Get starting balance\n    balance, err := r.sugar.GetBalance()\n    if err != nil {\n        return fmt.Errorf(\"failed to get balance: %w\", err)\n    }\n\n    r.startingBalance = balance\n    r.peakBalance = balance\n    r.dailyStartBalance = balance\n    r.tradingBlocked = false\n\n    return nil\n}\n</code></pre> <p>What happens:</p> <ul> <li>Gets current account balance as baseline</li> <li>Sets peak balance (tracks highest equity reached)</li> <li>Sets daily start balance (for daily P/L calculations)</li> <li>Initializes trading as unblocked</li> <li>All subsequent drawdown is measured from this peak</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#2-monitoring-loop","title":"2. Monitoring Loop","text":"<p>Lines <code>204\u2013216</code> </p> <pre><code>func (r *RiskManager) monitorLoop() {\n    ticker := time.NewTicker(r.config.CheckInterval)\n    defer ticker.Stop()\n\n    for {\n        select {\n        case &lt;-r.GetContext().Done():\n            return\n        case &lt;-ticker.C:\n            r.checkRiskLimits()\n        }\n    }\n}\n</code></pre> <p>Monitoring actions every CheckInterval:</p> <ol> <li>Ticker triggers: Every 5 seconds by default</li> <li>Context check: Monitors for stop signal</li> <li>Risk checks: Calls <code>checkRiskLimits()</code> to evaluate all parameters</li> <li>Graceful exit: Stops cleanly when context is cancelled</li> </ol>"},{"location":"Orchestrators/14_Risk_manager/#3-daily-reset-check","title":"3. Daily Reset Check","text":"<p>Lines <code>411\u2013425</code> </p> <pre><code>func (r *RiskManager) checkDailyReset() {\n    now := time.Now()\n    if now.Day() != r.lastResetDate.Day() {\n        balance, err := r.sugar.GetBalance()\n        if err == nil {\n            r.dailyStartBalance = balance\n            r.tradingBlocked = false\n            r.lastResetDate = now\n        }\n    }\n}\n</code></pre> <p>What happens:</p> <ul> <li>Checks if current day differs from last reset day</li> <li>If new day: resets daily start balance to current balance</li> <li>Unblocks trading (allows new trading day to begin)</li> <li>Resets today's profit to zero (new calculations start)</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#4-drawdown-protection","title":"4. Drawdown Protection","text":"<p>Lines <code>266\u2013288</code> </p> <pre><code>func (r *RiskManager) checkDrawdownLimit(drawdownPercent, drawdownAbsolute float64) {\n    // Check percentage drawdown\n    if drawdownPercent &gt;= r.config.MaxDrawdownPercent {\n        r.logRiskEvent(\"MAX_DRAWDOWN_PERCENT\", \"CRITICAL\",\n            fmt.Sprintf(\"Drawdown %.1f%% exceeds limit %.1f%%\", drawdownPercent, r.config.MaxDrawdownPercent),\n            drawdownPercent, r.config.MaxDrawdownPercent)\n\n        if r.config.EnableAutoClose {\n            r.closeAllPositionsEmergency(\"Maximum drawdown exceeded\")\n        }\n    }\n\n    // Check absolute drawdown\n    if drawdownAbsolute &gt;= r.config.MaxDrawdownAbsolute {\n        r.logRiskEvent(\"MAX_DRAWDOWN_ABSOLUTE\", \"CRITICAL\",\n            fmt.Sprintf(\"Drawdown $%.2f exceeds limit $%.2f\", drawdownAbsolute, r.config.MaxDrawdownAbsolute),\n            drawdownAbsolute, r.config.MaxDrawdownAbsolute)\n\n        if r.config.EnableAutoClose {\n            r.closeAllPositionsEmergency(\"Maximum absolute drawdown exceeded\")\n        }\n    }\n}\n</code></pre> <p>Critical protection:</p> <ul> <li>Percentage drawdown: Triggers when equity drops X% from peak</li> <li>Example: Peak = $10,000, MaxDrawdownPercent = 10%</li> <li>Trigger at equity = $9,000 (10% drop from peak)</li> <li>Absolute drawdown: Triggers when equity drops $X from peak</li> <li>Example: Peak = $10,000, MaxDrawdownAbsolute = $1000</li> <li>Trigger at equity = $9,000 ($1000 drop from peak)</li> <li>Both are checked: Whichever threshold is hit first triggers emergency action</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#5-daily-limits-protection","title":"5. Daily Limits Protection","text":"<p>Lines <code>291\u2013320</code> </p> <pre><code>func (r *RiskManager) checkDailyLimits() {\n    // Check daily loss limit\n    if r.todayProfit &lt; 0 &amp;&amp; (-r.todayProfit) &gt;= r.config.DailyLossLimit {\n        r.logRiskEvent(\"DAILY_LOSS_LIMIT\", \"CRITICAL\",\n            fmt.Sprintf(\"Daily loss $%.2f exceeds limit $%.2f\", -r.todayProfit, r.config.DailyLossLimit),\n            -r.todayProfit, r.config.DailyLossLimit)\n\n        if r.config.EnableAutoClose {\n            r.closeAllPositionsEmergency(\"Daily loss limit exceeded\")\n        }\n\n        if r.config.EnableTradeBlocking {\n            r.tradingBlocked = true\n        }\n    }\n\n    // Check daily profit target\n    if r.config.DailyProfitTarget &gt; 0 &amp;&amp; r.todayProfit &gt;= r.config.DailyProfitTarget {\n        r.logRiskEvent(\"DAILY_PROFIT_TARGET\", \"INFO\",\n            fmt.Sprintf(\"Daily profit target $%.2f reached\", r.config.DailyProfitTarget),\n            r.todayProfit, r.config.DailyProfitTarget)\n\n        if r.config.EnableTradeBlocking {\n            r.tradingBlocked = true\n        }\n    }\n}\n</code></pre> <p>Daily protections:</p> <ul> <li>Daily loss limit: Stops trading after losing too much today</li> <li>Prevents \"revenge trading\" after bad day</li> <li>Closes all positions and blocks new trades</li> <li>Daily profit target: Stops trading after hitting profit goal</li> <li>Locks in good days</li> <li>Only blocks new trades (keeps existing positions open)</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#6-margin-safety","title":"6. Margin Safety","text":"<p>Lines <code>323\u2013335</code> </p> <pre><code>func (r *RiskManager) checkMarginLimits(marginLevel float64) {\n    // Check minimum margin level\n    if marginLevel &gt; 0 &amp;&amp; marginLevel &lt; r.config.MinMarginLevel {\n        r.logRiskEvent(\"LOW_MARGIN_LEVEL\", \"CRITICAL\",\n            fmt.Sprintf(\"Margin level %.0f%% below minimum %.0f%%\", marginLevel, r.config.MinMarginLevel),\n            marginLevel, r.config.MinMarginLevel)\n\n        if r.config.EnableAutoClose {\n            // Close most losing position to free margin\n            r.closeMostLosingPosition(\"Low margin level\")\n        }\n    }\n}\n</code></pre> <p>Margin protection:</p> <ul> <li>Margin Level = (Equity / Margin Used) \u00d7 100</li> <li>When margin level drops below threshold:</li> <li>Closes most losing position to free up margin</li> <li>Prevents broker margin call (typically at 50-100%)</li> <li>Example: MinMarginLevel = 150%</li> <li>Equity = $10,000, Margin = $6,667</li> <li>Margin Level = 150% (borderline)</li> <li>If drops to 149%: close worst position</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#7-emergency-close-all","title":"7. Emergency Close All","text":"<p>Lines <code>367\u2013382</code> </p> <pre><code>func (r *RiskManager) closeAllPositionsEmergency(reason string) {\n    closed, err := r.sugar.CloseAllPositions()\n    if err != nil {\n        r.IncrementError(fmt.Sprintf(\"emergency close failed: %v\", err))\n        return\n    }\n\n    r.UpdateMetrics(func(m *OrchestratorMetrics) {\n        m.LastOperation = fmt.Sprintf(\"EMERGENCY: Closed %d positions - %s\", closed, reason)\n        m.OperationsTotal += closed\n    })\n\n    r.logRiskEvent(\"EMERGENCY_CLOSE\", \"CRITICAL\",\n        fmt.Sprintf(\"Closed all %d positions: %s\", closed, reason),\n        float64(closed), 0)\n}\n</code></pre> <p>Emergency action:</p> <ul> <li>Immediately closes ALL open positions</li> <li>Cannot be undone</li> <li>Triggered by:</li> <li>Maximum drawdown exceeded (% or $)</li> <li>Daily loss limit exceeded</li> <li>Logs critical event for analysis</li> <li>Updates metrics with emergency action</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#visual-examples","title":"Visual Examples","text":""},{"location":"Orchestrators/14_Risk_manager/#scenario-1-drawdown-protection-in-action","title":"Scenario 1: Drawdown Protection in Action","text":"<p>Initial State:</p> <ul> <li>Account balance: $10,000</li> <li>MaxDrawdownPercent: 10%</li> <li>MaxDrawdownAbsolute: $1,000</li> </ul> <pre><code>TIME 0: Trading Starts\n\nBalance:      $10,000\nPeak Balance: $10,000\nDrawdown:     $0 (0%)\nPositions:    0\nStatus:       Monitoring\n\nTIME 1: Good Trading Day\n\nBalance:      $11,500\nPeak Balance: $11,500 (new peak!)\nDrawdown:     $0 (0%)\nPositions:    3\nStatus:       Monitoring - all good\n\nTIME 2: Market Turns Against Positions\n\nBalance:      $10,800\nPeak Balance: $11,500 (unchanged - peak is max)\nDrawdown:     $700 (6.1%)\nPositions:    5\nStatus:       Monitoring - within limits\n\nTIME 3: Drawdown Approaching Limit\n\nBalance:      $10,400\nPeak Balance: $11,500\nDrawdown:     $1,100 (9.6%)\nStatus:       WARNING - approaching 10% limit\n\nTIME 4: DRAWDOWN LIMIT EXCEEDED\n\nBalance:      $10,350\nPeak Balance: $11,500\nDrawdown:     $1,150 (10.0%)\nTRIGGER:      MaxDrawdownPercent HIT!\nACTION:       EMERGENCY CLOSE ALL 5 POSITIONS\nResult:       Trading stopped, account protected at $10,350\nPrevented:    Further losses from uncontrolled drawdown\n\nWITHOUT RISK MANAGER:\n- Positions could continue losing\n- Drawdown could reach 20-30% or more\n- Account could blow up completely\n\nWITH RISK MANAGER:\n- Loss limited to 10% from peak\n- $1,150 loss vs potential $3,000+ loss\n- Account survives to trade another day\n</code></pre>"},{"location":"Orchestrators/14_Risk_manager/#scenario-2-daily-loss-limit","title":"Scenario 2: Daily Loss Limit","text":"<p>Configuration:</p> <ul> <li>DailyLossLimit: $500</li> <li>EnableAutoClose: true</li> <li>EnableTradeBlocking: true</li> </ul> <pre><code>TIME 0: Start of Day (Midnight Reset)\n\nDaily Start Balance: $10,000\nCurrent Balance:     $10,000\nToday Profit:        $0\nTrading Blocked:     false\n\nTIME 1: Morning Trades (09:00)\n\nCurrent Balance:     $9,800\nToday Profit:        -$200\nStatus:              Within limits\n\nTIME 2: Bad Trading Session (11:00)\n\nCurrent Balance:     $9,600\nToday Profit:        -$400\nStatus:              WARNING - approaching limit\n\nTIME 3: DAILY LIMIT HIT (12:30)\n\nCurrent Balance:     $9,500\nToday Profit:        -$500\nTRIGGER:             DailyLossLimit HIT!\nACTION:              1. CLOSE ALL POSITIONS\n                     2. BLOCK NEW TRADES\nStatus:              Trading blocked for rest of day\n\nTIME 4: Attempt to Trade (14:00)\n\nStatus:              Trading blocked - limit reached\nResult:              Cannot open new positions\n                     Prevents revenge trading\n\nTIME 5: Next Day (Midnight Reset)\n\nDaily Start Balance: $9,500 (updated to current)\nToday Profit:        $0 (reset)\nTrading Blocked:     false (unblocked)\nStatus:              New day, trading allowed again\n\nBENEFIT:\n- Prevented emotional \"revenge trading\"\n- Limited daily loss to exactly $500\n- Forced break to reassess strategy\n- Protected remaining capital\n</code></pre>"},{"location":"Orchestrators/14_Risk_manager/#scenario-3-margin-level-protection","title":"Scenario 3: Margin Level Protection","text":"<p>Configuration:</p> <ul> <li>MinMarginLevel: 150%</li> <li>EnableAutoClose: true</li> </ul> <pre><code>TIME 0: Normal Trading\n\nEquity:       $10,000\nMargin Used:  $5,000\nMargin Level: 200% (healthy)\nPositions:    5 positions\nStatus:       All systems normal\n\nTIME 1: Positions Move Against\n\nEquity:       $9,000\nMargin Used:  $5,000\nMargin Level: 180%\nStatus:       Still safe\n\nTIME 2: Approaching Danger\n\nEquity:       $8,000\nMargin Used:  $5,000\nMargin Level: 160%\nStatus:       Getting close to limit\n\nTIME 3: MARGIN LEVEL LOW\n\nEquity:       $7,500\nMargin Used:  $5,000\nMargin Level: 150%\nTRIGGER:      MarginLevel = MinMarginLevel\nACTION:       Close most losing position\n\nPosition Details:\n- Position 1: -$200\n- Position 2: +$50\n- Position 3: -$500 &lt;- WORST LOSS\n- Position 4: +$100\n- Position 5: -$150\n\nACTION TAKEN: Close Position #3 (worst loser)\n\nTIME 4: After Closing Worst Position\n\nEquity:       $7,500\nMargin Used:  $4,000 (reduced)\nMargin Level: 187.5% (improved!)\nPositions:    4 remaining\nStatus:       Margin level safe again\n\nRESULT:\n- Prevented broker margin call\n- Closed only worst position\n- Other positions remain open\n- Can continue trading\n</code></pre>"},{"location":"Orchestrators/14_Risk_manager/#used-mt5sugar-methods","title":"Used MT5Sugar Methods","text":""},{"location":"Orchestrators/14_Risk_manager/#1-getequity","title":"1. GetEquity","text":"<pre><code>func (s *MT5Sugar) GetEquity() (float64, error)\n</code></pre> <p>Purpose: Gets current account equity (balance + floating P/L).</p> <p>Usage in RiskManager:</p> <ul> <li>Called every CheckInterval</li> <li>Used to calculate current drawdown from peak</li> <li>Core metric for drawdown protection</li> </ul> <p>Returns: Current equity or error</p>"},{"location":"Orchestrators/14_Risk_manager/#2-getbalance","title":"2. GetBalance","text":"<pre><code>func (s *MT5Sugar) GetBalance() (float64, error)\n</code></pre> <p>Purpose: Gets current account balance (closed positions only).</p> <p>Usage in RiskManager:</p> <ul> <li>Used for daily profit/loss calculations</li> <li>Compared to dailyStartBalance to get today's performance</li> <li>Reset baseline at start of each day</li> </ul> <p>Returns: Current balance or error</p>"},{"location":"Orchestrators/14_Risk_manager/#3-getmarginlevel","title":"3. GetMarginLevel","text":"<pre><code>func (s *MT5Sugar) GetMarginLevel() (float64, error)\n</code></pre> <p>Purpose: Gets current margin level percentage.</p> <p>Usage in RiskManager:</p> <ul> <li>Monitors risk of margin call</li> <li>Triggers protective action when too low</li> <li>Formula: (Equity / Margin) \u00d7 100</li> </ul> <p>Returns: Margin level percentage or error</p>"},{"location":"Orchestrators/14_Risk_manager/#4-getopenpositions","title":"4. GetOpenPositions","text":"<pre><code>func (s *MT5Sugar) GetOpenPositions() ([]*pb.PositionInfo, error)\n</code></pre> <p>Purpose: Retrieves all currently open positions.</p> <p>Usage in RiskManager:</p> <ul> <li>Counts total positions vs MaxOpenPositions</li> <li>Counts per-symbol exposure</li> <li>Identifies worst losing position for margin protection</li> </ul> <p>Returns: Slice of position info or error</p>"},{"location":"Orchestrators/14_Risk_manager/#5-closeallpositions","title":"5. CloseAllPositions","text":"<pre><code>func (s *MT5Sugar) CloseAllPositions() (int, error)\n</code></pre> <p>Purpose: Closes all open positions immediately.</p> <p>Usage in RiskManager:</p> <ul> <li>Emergency action when critical limits breached</li> <li>Used for drawdown limits and daily loss limits</li> <li>Cannot be undone - final protective measure</li> </ul> <p>Returns: Number of positions closed or error</p>"},{"location":"Orchestrators/14_Risk_manager/#6-closeposition","title":"6. ClosePosition","text":"<pre><code>func (s *MT5Sugar) ClosePosition(ticket uint64) error\n</code></pre> <p>Purpose: Closes a specific position by ticket number.</p> <p>Usage in RiskManager:</p> <ul> <li>Closes worst losing position when margin low</li> <li>Frees up margin without closing all positions</li> <li>More surgical than CloseAllPositions</li> </ul> <p>Parameters: - <code>ticket</code>: Position ticket to close</p> <p>Returns: Error if failed</p>"},{"location":"Orchestrators/14_Risk_manager/#risk-profiles","title":"Risk Profiles","text":""},{"location":"Orchestrators/14_Risk_manager/#conservative-profile-beginners","title":"Conservative Profile (Beginners)","text":"<pre><code>RiskManagerConfig{\n    MaxDrawdownPercent:  5.0,              // Very tight\n    MaxDrawdownAbsolute: 500.0,            // Small absolute limit\n    DailyLossLimit:      200.0,            // Stop early on losses\n    DailyProfitTarget:   300.0,            // Lock in profits early\n    MinMarginLevel:      200.0,            // High margin safety\n    MaxMarginUsed:       50.0,             // Conservative margin usage\n    MaxOpenPositions:    10,               // Limited positions\n    MaxSymbolExposure:   2,                // Minimal per-symbol\n    MaxPositionSize:     0.5,              // Small sizes\n    CheckInterval:       3 * time.Second,  // Frequent checks\n    EnableAutoClose:     true,\n    EnableTradeBlocking: true,\n}\n</code></pre> <p>Best for:</p> <ul> <li>New traders learning risk management</li> <li>Small accounts ($1,000-$5,000)</li> <li>Demo account testing</li> <li>High-risk strategies needing tight control</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#moderate-profile-default","title":"Moderate Profile (Default)","text":"<pre><code>RiskManagerConfig{\n    MaxDrawdownPercent:  10.0,             // Moderate tolerance\n    MaxDrawdownAbsolute: 1000.0,           // Reasonable limit\n    DailyLossLimit:      500.0,            // Balanced daily limit\n    DailyProfitTarget:   1000.0,           // Good profit target\n    MinMarginLevel:      150.0,            // Standard margin safety\n    MaxMarginUsed:       80.0,             // Healthy margin usage\n    MaxOpenPositions:    20,               // Moderate count\n    MaxSymbolExposure:   5,                // Reasonable per-symbol\n    MaxPositionSize:     1.0,              // Standard lot size\n    CheckInterval:       5 * time.Second,  // Regular checks\n    EnableAutoClose:     true,\n    EnableTradeBlocking: true,\n}\n</code></pre> <p>Best for:</p> <ul> <li>Experienced traders</li> <li>Medium accounts ($5,000-$20,000)</li> <li>Swing trading strategies</li> <li>Multi-pair trading</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#aggressive-profile-experienced","title":"Aggressive Profile (Experienced)","text":"<pre><code>RiskManagerConfig{\n    MaxDrawdownPercent:  20.0,             // Wider tolerance\n    MaxDrawdownAbsolute: 5000.0,           // Large absolute limit\n    DailyLossLimit:      2000.0,           // Higher daily tolerance\n    DailyProfitTarget:   5000.0,           // Ambitious target\n    MinMarginLevel:      100.0,            // Minimal margin safety\n    MaxMarginUsed:       90.0,             // Aggressive margin usage\n    MaxOpenPositions:    50,               // Many positions\n    MaxSymbolExposure:   10,               // High per-symbol\n    MaxPositionSize:     5.0,              // Large sizes\n    CheckInterval:       10 * time.Second, // Less frequent checks\n    EnableAutoClose:     true,\n    EnableTradeBlocking: false,            // No trade blocking\n}\n</code></pre> <p>Best for:</p> <ul> <li>Professional traders only</li> <li>Large accounts ($20,000+)</li> <li>Grid/martingale strategies</li> <li>When you can monitor actively</li> </ul> <p>WARNING: Only use aggressive profile if you fully understand the risks!</p>"},{"location":"Orchestrators/14_Risk_manager/#risk-event-types","title":"Risk Event Types","text":""},{"location":"Orchestrators/14_Risk_manager/#event-types","title":"Event Types","text":"<ol> <li> <p>MAX_DRAWDOWN_PERCENT: Drawdown percentage exceeded</p> </li> <li> <p>MAX_DRAWDOWN_ABSOLUTE: Drawdown dollar amount exceeded</p> </li> <li> <p>DAILY_LOSS_LIMIT: Daily loss limit hit</p> </li> <li> <p>DAILY_PROFIT_TARGET: Daily profit target reached</p> </li> <li> <p>LOW_MARGIN_LEVEL: Margin level too low</p> </li> <li> <p>MAX_POSITIONS: Too many open positions</p> </li> <li> <p>SYMBOL_EXPOSURE: Too many positions on one symbol</p> </li> <li> <p>EMERGENCY_CLOSE: Positions closed by risk manager</p> </li> </ol>"},{"location":"Orchestrators/14_Risk_manager/#severity-levels","title":"Severity Levels","text":"<ul> <li>INFO: Informational (profit target reached)</li> <li>WARNING: Potential issue (position count high)</li> <li>CRITICAL: Immediate action taken (drawdown exceeded, emergency close)</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#event-logging","title":"Event Logging","text":"<ul> <li>Last 100 events kept in memory</li> <li>Accessible via <code>GetRiskEvents()</code></li> <li>Each event contains:</li> <li>Timestamp</li> <li>EventType</li> <li>Severity</li> <li>Description</li> <li>Current value vs limit</li> <li>Action taken</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#best-practices","title":"Best Practices","text":""},{"location":"Orchestrators/14_Risk_manager/#set-limits-based-on-account-size","title":"Set Limits Based on Account Size","text":"<ul> <li>Drawdown: 5-10% of account</li> <li>Daily loss: 2-5% of account</li> <li>Position size: 1-2% risk per trade</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#test-on-demo-first","title":"Test on Demo First","text":"<ul> <li>Run risk manager on demo for 1 week minimum</li> <li>Ensure limits trigger correctly</li> <li>Verify emergency close works as expected</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#monitor-risk-events","title":"Monitor Risk Events","text":"<ul> <li>Check <code>GetRiskEvents()</code> regularly</li> <li>Look for patterns (same limit hit repeatedly?)</li> <li>Adjust limits if needed</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#combine-with-trading-strategy","title":"Combine with Trading Strategy","text":"<ul> <li>Risk manager complements your strategy, doesn't replace it</li> <li>Your strategy should have its own stop losses</li> <li>Risk manager is \"last line of defense\"</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#use-daily-profit-target","title":"Use Daily Profit Target","text":"<ul> <li>Lock in good days by stopping at target</li> <li>Prevents \"giving it all back\" syndrome</li> <li>Set realistic targets (don't be too greedy)</li> </ul>"},{"location":"Orchestrators/14_Risk_manager/#configuration-location","title":"Configuration Location","text":"<p>Runtime configuration is located in: <code>examples/demos/main.go -&gt; RunOrchestrator_RiskManager()</code></p> <p>This separation exists because:</p> <ol> <li> <p>Code reusability: Same risk engine runs with different limits</p> </li> <li> <p>Quick testing: Change limits without modifying protection logic</p> </li> <li> <p>User examples: Shows how to configure risk management</p> </li> <li> <p>Centralized entry point: Single place for all orchestrator launches</p> </li> </ol>"},{"location":"Orchestrators/15_Portfolio_rebalancer/","title":"PortfolioRebalancer - Automated Portfolio Management","text":""},{"location":"Orchestrators/15_Portfolio_rebalancer/#description","title":"Description","text":"<p>\ud83e\udde9 PortfolioRebalancer maintains balanced exposure across multiple trading symbols by automatically rebalancing positions to match target allocations. Like a mutual fund manager, it ensures diversification and prevents over-concentration in any single symbol.</p> <p>Strategy Principle: Continuously monitors actual exposure vs. target allocations and rebalances when deviation exceeds threshold:</p> <ul> <li>Multi-Symbol Trading: Manages portfolio of 2-10+ symbols simultaneously</li> <li>Target Allocations: Each symbol gets specific percentage (e.g., 25% each for 4 symbols)</li> <li>Automatic Rebalancing: When symbol deviates &gt;10% from target, rebalances</li> <li>Diversification: Reduces risk by spreading exposure across multiple instruments</li> <li>Set-and-Forget: Runs automatically without manual intervention</li> </ul> <p>File: <code>examples/demos/orchestrators/15_portfolio_rebalancer.go</code></p> <p>IMPORTANT DISCLAIMER - EDUCATIONAL EXAMPLE ONLY</p> <p>This orchestrator is a demonstration showing how GoMT5 methods function and combine into automated portfolio management. NOT a production-ready trading strategy! Always test on demo accounts first. Exposure calculation is simplified and may not match your broker's margin requirements.</p>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#what-is-portfolio-rebalancing","title":"What is Portfolio Rebalancing?","text":""},{"location":"Orchestrators/15_Portfolio_rebalancer/#simple-explanation","title":"Simple Explanation","text":"<p>Imagine you don't trade just one currency pair (like EURUSD), but trade SEVERAL pairs at the same time. This collection is called a portfolio.</p> <p>Example Portfolio: Instead of only EURUSD, you trade:</p> <ul> <li>EURUSD (Euro/Dollar) - 25%</li> <li>GBPUSD (British Pound/Dollar) - 25%</li> <li>USDJPY (Dollar/Japanese Yen) - 25%</li> <li>XAUUSD (Gold) - 25%</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#why-trade-multiple-symbols","title":"Why Trade Multiple Symbols?","text":"<p>Diversification: If EURUSD moves against you, other pairs might profit</p> <p>Risk Reduction: Don't put all eggs in one basket</p> <p>More Opportunities: Different markets move at different times</p>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#real-world-analogy","title":"Real-World Analogy","text":"<p>Think of 4 jars where you store coins. You want each jar to always have exactly 25% of your total coins. But as you add/remove coins, the balance shifts. Rebalancing means moving coins between jars to restore 25% in each.</p>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#architecture","title":"\ud83d\udfe2 Architecture","text":"<pre><code>PORTFOLIO REBALANCER ORCHESTRATOR\n    |\nMT5Sugar Instance\n    |\n    |  |  |\nGetOpenPositions  BuyMarket  ClosePosition\n(monitoring)      (increase) (decrease)\n</code></pre>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#dependencies","title":"Dependencies","text":"<ul> <li>MT5Sugar: High-level convenience API (<code>GetOpenPositions</code>, <code>GetPositionsBySymbol</code>, <code>BuyMarket</code>, <code>SellMarket</code>, <code>ClosePosition</code>)</li> <li>BaseOrchestrator: Foundation pattern with metrics tracking and lifecycle management</li> <li>protobuf types: <code>pb.PositionInfo</code> for position data structures</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#configuration-parameters","title":"Configuration Parameters","text":"Parameter Type Default Description <code>Allocations</code> map[string]float64 required Target allocation % per symbol (must sum to 1.0) <code>TotalExposure</code> float64 <code>10000.0</code> Total portfolio value to maintain <code>MaxDeviation</code> float64 <code>0.20</code> Maximum deviation from target (20%) <code>RebalanceThreshold</code> float64 <code>10.0</code> % deviation to trigger rebalance <code>CheckInterval</code> time.Duration <code>1h</code> How often to check balance <code>MinPositionSize</code> float64 <code>0.01</code> Minimum lot size for positions <code>UseMarketOrders</code> bool <code>true</code> Use market orders (true) or limit (false) <code>SlippageTolerance</code> float64 <code>50</code> Max slippage in points for limit orders <code>MaxTradesPerCycle</code> int <code>10</code> Max trades per rebalancing cycle"},{"location":"Orchestrators/15_Portfolio_rebalancer/#configuration-example","title":"Configuration Example","text":"<pre><code>config := orchestrators.PortfolioRebalancerConfig{\n    Allocations: map[string]float64{\n        \"EURUSD\": 0.25,  // 25% EURUSD\n        \"GBPUSD\": 0.25,  // 25% GBPUSD\n        \"USDJPY\": 0.25,  // 25% USDJPY\n        \"XAUUSD\": 0.25,  // 25% Gold\n    },\n    TotalExposure:      10000.0,          // $10k total portfolio\n    MaxDeviation:       0.20,             // 20% max deviation\n    RebalanceThreshold: 10.0,             // Rebalance at 10% off\n    CheckInterval:      30 * time.Minute, // Check every 30 min\n    MinPositionSize:    0.01,             // Min lot size\n    UseMarketOrders:    true,             // Use market orders\n    SlippageTolerance:  50,               // Max 50 points slippage\n    MaxTradesPerCycle:  10,               // Max 10 trades per rebalance\n}\n\nrebalancer := orchestrators.NewPortfolioRebalancer(sugar, config)\n</code></pre>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#how-to-run","title":"How to Run","text":"<pre><code># Navigate to examples directory\ncd examples/demos\n\n# Option 1: By number\ngo run main.go 15\n\n# Option 2: By keyword\ngo run main.go rebalancer\n</code></pre> <p>Both commands launch the PortfolioRebalancer orchestrator with configuration from <code>main.go -&gt; RunOrchestrator_PortfolioRebalancer()</code>.</p>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#algorithm","title":"\ud83d\udfe2 Algorithm","text":""},{"location":"Orchestrators/15_Portfolio_rebalancer/#flowchart","title":"Flowchart","text":"<pre><code>START\n  |\nValidate Configuration:\n  - Do allocations sum to 100%?\n  - Calculate target dollar values per symbol\n  |\nMONITORING LOOP (every CheckInterval):\n  |\n  Get all open positions\n  |\n  Calculate current exposure per symbol:\n    For each position:\n      currentExposure[symbol] += position.Volume \u00d7 100000\n  |\n  Analyze each symbol:\n    | Current value vs. target value\n    | Deviation percentage\n    | Action needed: BUY / SELL / HOLD\n  |\n  Is rebalancing needed?\n    -&gt; If ANY symbol deviation &gt; RebalanceThreshold:\n       |\n       REBALANCING:\n         For each symbol that needs adjustment:\n           | Calculate lot size needed\n           | If ActionRequired == \"BUY\":\n           |   -&gt; Open BUY position\n           | If ActionRequired == \"SELL\":\n           |   -&gt; Close existing position\n           |\n         Update rebalanceCount\n         Update lastRebalance timestamp\n    |\n    -&gt; If all within threshold:\n       Continue monitoring\n  |\nREPEAT until stopped\n  |\nEND\n</code></pre>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#visual-example","title":"\ud83d\udca1 Visual Example","text":"<p>Portfolio: $10,000 across 4 symbols, 25% each</p>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#initial-state-balanced","title":"Initial State (Balanced)","text":"<pre><code>Target Allocations:\n+--------+----------+-------------+\n| Symbol | Target % | Target $    |\n+--------+----------+-------------+\n| EURUSD |   25%    | $2,500      |\n| GBPUSD |   25%    | $2,500      |\n| USDJPY |   25%    | $2,500      |\n| XAUUSD |   25%    | $2,500      |\n+--------+----------+-------------+\nPortfolio: BALANCED\n</code></pre>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#after-market-moves-unbalanced","title":"After Market Moves (Unbalanced)","text":"<pre><code>EURUSD rises +20%, USDJPY falls -15%\n\n+--------+----------+-------------+-----------+-----------+--------+\n| Symbol | Target % | Target $    | Current $ | Deviation | Action |\n+--------+----------+-------------+-----------+-----------+--------+\n| EURUSD |   25%    | $2,500      | $3,000    | +20%      | SELL   |\n| GBPUSD |   25%    | $2,500      | $2,400    | -4%       | HOLD   |\n| USDJPY |   25%    | $2,500      | $2,125    | -15%      | BUY    |\n| XAUUSD |   25%    | $2,500      | $2,475    | -1%       | HOLD   |\n+--------+----------+-------------+-----------+-----------+--------+\nPortfolio: UNBALANCED\n\nTRIGGER: EURUSD deviation (+20%) exceeds RebalanceThreshold (10%)\nACTION: Rebalancing needed!\n</code></pre>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#after-rebalancing","title":"After Rebalancing","text":"<pre><code>Rebalancing Actions:\n1. SELL $500 of EURUSD ($3,000 -&gt; $2,500)\n2. BUY $375 of USDJPY ($2,125 -&gt; $2,500)\n\n+--------+----------+-------------+-----------+-----------+--------+\n| Symbol | Target % | Target $    | Current $ | Deviation | Action |\n+--------+----------+-------------+-----------+-----------+--------+\n| EURUSD |   25%    | $2,500      | $2,500    | 0%        | HOLD   |\n| GBPUSD |   25%    | $2,500      | $2,400    | -4%       | HOLD   |\n| USDJPY |   25%    | $2,500      | $2,500    | 0%        | HOLD   |\n| XAUUSD |   25%    | $2,500      | $2,475    | -1%       | HOLD   |\n+--------+----------+-------------+-----------+-----------+--------+\nPortfolio: BALANCED\n</code></pre>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#used-mt5sugar-methods","title":"Used MT5Sugar Methods","text":""},{"location":"Orchestrators/15_Portfolio_rebalancer/#1-getopenpositions","title":"1. GetOpenPositions","text":"<pre><code>func (s *MT5Sugar) GetOpenPositions() ([]*pb.PositionInfo, error)\n</code></pre> <p>Purpose: Retrieves all currently open positions.</p> <p>Usage in PortfolioRebalancer:</p> <ul> <li>Called every CheckInterval</li> <li>Calculates current exposure per symbol</li> <li>Returns all positions for analysis</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#2-getpositionsbysymbol","title":"2. GetPositionsBySymbol","text":"<pre><code>func (s *MT5Sugar) GetPositionsBySymbol(symbol string) ([]*pb.PositionInfo, error)\n</code></pre> <p>Purpose: Gets positions for a specific symbol.</p> <p>Usage in PortfolioRebalancer:</p> <ul> <li>Used when reducing exposure (SELL action)</li> <li>Identifies positions to close</li> <li>Returns positions filtered by symbol</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#3-buymarket-sellmarket","title":"3. BuyMarket / SellMarket","text":"<pre><code>func (s *MT5Sugar) BuyMarket(symbol string, lots float64) (uint64, error)\nfunc (s *MT5Sugar) SellMarket(symbol string, lots float64) (uint64, error)\n</code></pre> <p>Purpose: Opens market position at current price.</p> <p>Usage in PortfolioRebalancer:</p> <ul> <li>Called when increasing exposure (BUY action)</li> <li>Opens new positions to restore target allocation</li> <li>Returns ticket number</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#4-closeposition","title":"4. ClosePosition","text":"<pre><code>func (s *MT5Sugar) ClosePosition(ticket uint64) error\n</code></pre> <p>Purpose: Closes specific position by ticket.</p> <p>Usage in PortfolioRebalancer:</p> <ul> <li>Called when reducing exposure (SELL action)</li> <li>Closes positions to restore target allocation</li> <li>Reduces over-allocated symbols</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#configuration-profiles","title":"Configuration Profiles","text":""},{"location":"Orchestrators/15_Portfolio_rebalancer/#conservative-diversified","title":"Conservative Diversified","text":"<pre><code>Allocations: map[string]float64{\n    \"EURUSD\": 0.40,  // 40% major currency\n    \"GBPUSD\": 0.20,  // 20% secondary\n    \"USDJPY\": 0.20,  // 20% yen\n    \"XAUUSD\": 0.20,  // 20% gold hedge\n},\nTotalExposure:      5000.0,           // Small portfolio\nRebalanceThreshold: 5.0,              // Tight rebalancing\nCheckInterval:      1 * time.Hour,    // Check hourly\n</code></pre> <p>Best for: Beginners, small accounts ($5k-$10k)</p>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#balanced-equal-weight","title":"Balanced Equal-Weight","text":"<pre><code>Allocations: map[string]float64{\n    \"EURUSD\": 0.25,  // 25% each\n    \"GBPUSD\": 0.25,\n    \"USDJPY\": 0.25,\n    \"XAUUSD\": 0.25,\n},\nTotalExposure:      10000.0,          // Medium portfolio\nRebalanceThreshold: 10.0,             // Moderate\nCheckInterval:      30 * time.Minute, // Every 30 min\n</code></pre> <p>Best for: Intermediate traders, medium accounts ($10k-$50k)</p>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#aggressive-commodity-heavy","title":"Aggressive Commodity-Heavy","text":"<pre><code>Allocations: map[string]float64{\n    \"XAUUSD\": 0.50,  // 50% gold (aggressive!)\n    \"EURUSD\": 0.25,  // 25% euro\n    \"USDJPY\": 0.25,  // 25% yen\n},\nTotalExposure:      20000.0,          // Larger portfolio\nRebalanceThreshold: 15.0,             // Wider tolerance\nCheckInterval:      1 * time.Hour,    // Hourly\n</code></pre> <p>Best for: Experienced traders, large accounts ($20k+)</p>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#best-practices","title":"Best Practices","text":""},{"location":"Orchestrators/15_Portfolio_rebalancer/#set-realistic-totalexposure","title":"Set Realistic TotalExposure","text":"<ul> <li>Don't use full account balance</li> <li>Recommended: 30-50% of account</li> <li>Leave buffer for drawdowns</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#match-checkinterval-to-trading-style","title":"Match CheckInterval to Trading Style","text":"<ul> <li>Day trading: 10-30 minutes</li> <li>Swing trading: 1-4 hours</li> <li>Position trading: 12-24 hours</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#monitor-rebalancing-costs","title":"Monitor Rebalancing Costs","text":"<ul> <li>Track: Number of rebalances \u00d7 average spread</li> <li>If costs &gt; 2% of TotalExposure -&gt; increase RebalanceThreshold</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#use-uncorrelated-symbols","title":"Use Uncorrelated Symbols","text":"<ul> <li>EURUSD + GBPUSD are highly correlated (both move together)</li> <li>Better: Mix currencies + commodities (EURUSD + XAUUSD)</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#combine-with-risk-manager","title":"Combine with Risk Manager","text":"<ul> <li>PortfolioRebalancer manages allocation</li> <li>RiskManager manages total drawdown</li> <li>Together = complete risk control</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#when-to-use","title":"When to Use","text":""},{"location":"Orchestrators/15_Portfolio_rebalancer/#good-use-cases","title":"Good Use Cases","text":"<ul> <li>Multi-symbol trading systems (4-10 symbols)</li> <li>Diversification strategy</li> <li>Automated portfolio management</li> <li>Risk control across symbols</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#bad-use-cases","title":"Bad Use Cases","text":"<ul> <li>Single-symbol trading (no portfolio needed)</li> <li>High-frequency trading (overhead too high)</li> <li>Strong trending markets (cuts winners early)</li> <li>Very small accounts (&lt;$1,000)</li> </ul>"},{"location":"Orchestrators/15_Portfolio_rebalancer/#configuration-location","title":"Configuration Location","text":"<p>Runtime configuration is located in: <code>examples/demos/main.go -&gt; RunOrchestrator_PortfolioRebalancer()</code></p> <p>This separation exists because:</p> <ol> <li> <p>Code reusability: Same rebalancer runs with different symbol allocations</p> </li> <li> <p>Quick testing: Change allocations without modifying logic</p> </li> <li> <p>User examples: Shows how to configure portfolio</p> </li> <li> <p>Centralized entry point: Single place for all orchestrator launches</p> </li> </ol>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/","title":"\ud83e\udde9 Adaptive Orchestrator Preset \u2014 Intelligent Multi-Strategy System","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#description","title":"Description","text":"<p>Adaptive Orchestrator Preset is an intelligent trading system that automatically selects and executes the most appropriate orchestrator based on real-time market condition analysis.</p> <p>It combines all five orchestrators into a single adaptive system that dynamically switches strategies every cycle.</p>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#strategy-principle","title":"Strategy Principle","text":"<p>Continuously analyzes market conditions and adapts the trading approach:</p> <ul> <li>Market Analysis \u2014 calculates volatility, detects trends, and counts active positions</li> <li>Strategy Selection \u2014 chooses the best orchestrator for current conditions</li> <li>Dynamic Execution \u2014 runs the selected orchestrator in 5-minute cycles</li> <li>Continuous Adaptation \u2014 repeats analysis and switches strategies as markets change</li> <li>Safety Controls \u2014 built-in stop-loss, daily limits, and risk management</li> </ul> <p>File: <code>examples/demos/pesets/16_AdaptiveOrchestratorPreset.go</code></p> <p>IMPORTANT DISCLAIMER \u2014 EDUCATIONAL EXAMPLE ONLY</p> <p>This preset demonstrates advanced orchestrator composition and adaptive strategy selection. NOT production-ready! Market analysis is simplified for demonstration purposes. Always test extensively on demo accounts and customize for your specific market knowledge and risk tolerance.</p>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#what-is-an-adaptive-preset","title":"What Is an Adaptive Preset?","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#simple-explanation","title":"Simple Explanation","text":"<p>Instead of running one fixed strategy, the Adaptive Orchestrator Preset acts like an intelligent trading manager that:</p> <ol> <li>Looks at the market every 5 minutes</li> <li>Decides which strategy fits best (grid, trailing, risk protection, etc.)</li> <li>Runs that strategy for one cycle</li> <li>Repeats with continuous market analysis</li> </ol> <p>Analogy: Like a professional trader who switches between different strategies:</p> <ul> <li>Quiet market (low volatility) \u2192 Grid trading</li> <li>Normal market \u2192 Trailing stops with position scaling</li> <li>Volatile market \u2192 Risk protection mode</li> <li>Trending market \u2192 Pyramiding into winning positions</li> <li>Multiple symbols \u2192 Portfolio balancing</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#dependencies","title":"Dependencies","text":"<ul> <li>MT5 Suga \u2014 high-level convenience API</li> <li>All 5 Orchestrators \u2014 GridTrade, TrailingStopManage, PositionScale, RiskManage, PortfolioRebalance</li> <li>Helpers \u2014 progress bar and utility helpers</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#market-modes-and-strategy-selection","title":"\ud83d\udca1 Market Modes and Strategy Selection","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#mode-1-grid-mode-low-volatility","title":"Mode 1: Grid Mode (Low Volatility)","text":"<p>Condition: Volatility &lt; 25 points</p> <p>Why: Range-bound markets are perfect for grid strategies.</p> <p>Orchestrator Used: GridTrade</p> <p>Configuration:</p> <pre><code>GridTradeConfig{\n    Symbol:        \"EURUSD\",\n    GridSize:      5,      // 5 grid levels\n    GridStep:      100,    // 100 points spacing\n    LotSize:       0.01,   // Micro-lots\n    MaxPositions:  10,\n    CheckInterval: 5 * time.Second,\n}\n</code></pre> <p>Expected Behavior:</p> <ul> <li>Places a grid of buy/sell orders</li> <li>Profits from small price oscillations</li> <li>Works best in sideways markets</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#mode-2-managed-mode-medium-volatility","title":"Mode 2: Managed Mode (Medium Volatility)","text":"<p>Condition: 25\u201350 points volatility</p> <p>Why: Normal conditions suit position management with scaling.</p> <p>Orchestrators Used:</p> <ol> <li>TrailingStopManage (profit protection)</li> <li>PositionScale (pyramiding)</li> </ol> <p>Configuration:</p> <pre><code>// Trailing Stop\nTrailingStopConfig{\n    TrailingDistance: 200, // 200 points trail\n    ActivationProfit: 300, // Activate at 300 points profit\n    UpdateInterval:   2 * time.Second,\n}\n\n// Position Scaling\nPositionScaleConfig{\n    Mode:            Pyramiding, // Add to winners\n    TriggerDistance: 200,        // 200 points trigger\n    MaxScales:       3,          // Max 3 additions\n}\n</code></pre> <p>Expected Behavior:</p> <ul> <li>Protects profits with trailing stops</li> <li>Scales into winning positions</li> <li>Balanced approach for normal markets</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#mode-3-protection-mode-high-volatility","title":"Mode 3: Protection Mode (High Volatility)","text":"<p>Condition: Volatility &gt; 50 points</p> <p>Why: Volatile markets require strict risk control.</p> <p>Orchestrator Used: RiskManage</p> <p>Configuration:</p> <pre><code>RiskManageConfig{\n    MaxDrawdownPercent: 5.0,  // 5% max drawdown\n    EnableAutoClose:    true, // Auto-close on breach\n    CheckInterval:      5 * time.Second,\n}\n</code></pre> <p>Expected Behavior:</p> <ul> <li>Continuously monitors risk limits</li> <li>Closes positions if drawdown exceeds 5%</li> <li>Defensive mode to prevent blow-ups</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#mode-4-portfolio-mode-multi-symbol","title":"Mode 4: Portfolio Mode (Multi-Symbol)","text":"<p>Condition: Two or more different symbols have open positions</p> <p>Why: Multiple symbols require balanced exposure.</p> <p>Orchestrator Used: PortfolioRebalance</p> <p>Configuration:</p> <pre><code>PortfolioRebalanceConfig{\n    Allocations: map[string]float64{\n        \"EURUSD\": 0.25,\n        \"GBPUSD\": 0.25,\n        \"USDJPY\": 0.25,\n        \"XAUUSD\": 0.25,\n    },\n    TotalExposure:     10000.0,\n    RebalanceThreshold: 10.0,\n}\n</code></pre> <p>Expected Behavior:</p> <ul> <li>Maintains balanced allocation</li> <li>Rebalances when deviation &gt; 10%</li> <li>Diversification management</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#mode-5-trending-mode-strong-directional-movement","title":"Mode 5: TRENDING MODE (Strong Directional Movement)","text":"<p>Condition: Trend strength &gt; 70%</p> <p>Why: Strong trends are perfect for pyramiding strategies</p> <p>Orchestrator Used: PositionScale (pyramiding mode)</p> <p>Configuration:</p> <pre><code>PositionScaleConfig{\n    Mode:            Pyramiding, // Add to winners\n    TriggerDistance: 200,        // 200 points trigger\n    MaxScales:       3,          // Max 3 scales\n}\n</code></pre> <p>Expected Behavior:</p> <ul> <li>Adds to winning positions</li> <li>Rides strong trends</li> <li>Maximizes profit in directional markets</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#configuration-parameters","title":"Configuration Parameters","text":"Parameter Type Default Description <code>Symbol</code> string <code>\"EURUSD\"</code> Primary trading symbol <code>BaseRiskAmount</code> float64 <code>20.0</code> Risk per trade in dollars <code>LowVolatilityThreshold</code> float64 <code>25.0</code> Max points for grid mode <code>HighVolatilityThreshold</code> float64 <code>50.0</code> Min points for protection mode <code>CycleDuration</code> time.Duration <code>5m</code> Duration of one cycle <code>EnablePortfolioMode</code> bool <code>false</code> Enable multi-symbol management <code>PortfolioSymbols</code> []string 4 symbols Symbols for portfolio mode <code>MaxConcurrentOrchestrators</code> int <code>2</code> Max orchestrators at once <code>MaxDailyLoss</code> float64 <code>500.0</code> Maximum daily loss allowed <code>MaxDailyProfit</code> float64 <code>1000.0</code> Daily profit target"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#configuration-example","title":"Configuration Example","text":"<pre><code>preset := presets.NewAdaptiveOrchestratorPreset(suga)\n\n// Customize parameters\npreset.Symbol = \"EURUSD\"\npreset.BaseRiskAmount = 20.0\npreset.LowVolatilityThreshold = 25.0\npreset.HighVolatilityThreshold = 50.0\npreset.CycleDuration = 5 * time.Minute\npreset.EnablePortfolioMode = false\npreset.MaxDailyLoss = 500.0\npreset.MaxDailyProfit = 1000.0\n\n// Execute\ntotalProfit, err := preset.Execute()\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#how-to-run","title":"How to Run","text":"<p>You can execute this preset using several command variations:</p> <pre><code># Navigate to examples directory\ncd examples/demos\n\n# Option 1: By number\ngo run main.go 16\n\n# Option 2: By keyword\ngo run main.go adaptive\n\n# Option 3: By category\ngo run main.go preset\n</code></pre> <p>All commands launch the Adaptive Orchestrator Preset with default configuration. To stop execution, press <code>Ctrl+C</code>.</p>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#algorithm","title":"\ud83d\udfe2 Algorithm","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#complete-flow","title":"Complete Flow","text":"<pre><code>START\n|\nInitialize Preset\n- Get starting balance\n- Set thresholds\n- Setup signal handling\n|\nINFINITE CYCLE LOOP:\n|\n+-- CYCLE #N START\n|\n+-- STEP 1: ANALYZE MARKET\n|   - Get price info for primary symbol\n|   - Calculate volatility (spread \u00d7 10)\n|   - Count open positions and symbols\n|   - Estimate trend strength\n|\n| SELECT MODE (priority order):\n|   1. Portfolio mode? (2+ symbols)\n|   2. High volatility? (&gt;50 pts) \u2192 Protection Mode\n|   3. Low volatility? (&lt;25 pts) \u2192 Grid Mode\n|   4. Strong trend? (&gt;70%) \u2192 Trending Mode\n|   5. Otherwise \u2192 Managed Mode\n|\n+-- STEP 2: STOP PREVIOUS ORCHESTRATORS\n|   - Stop all orchestrators from last cycle\n|   - Clear active orchestrators list\n|\n+-- STEP 3: EXECUTE SELECTED MODE\n|   - Grid Mode \u2192 Start GridTrade\n|   - Managed Mode \u2192 Start TrailingStop + PositionScale\n|   - Protection Mode \u2192 Start RiskManage\n|   - Portfolio Mode \u2192 Start PortfolioRebalance\n|   - Trending Mode \u2192 Start PositionScale (pyramiding)\n|\n+-- STEP 4: MONITOR CYCLE\n|   - Wait for CycleDuration (5 minutes)\n|   - Show progress bar\n|   - Display orchestrator status every 10 seconds\n|\n+-- STEP 5: CALCULATE RESULTS\n|   - Get end balance\n|   - Calculate cycle profit/loss\n|   - Update total profit\n|\n+-- STEP 6: CHECK SAFETY LIMITS\n|   - Total loss &gt; $100? \u2192 STOP\n|   - Daily loss &gt; $500? \u2192 STOP\n|   - Daily profit &gt; $1000? \u2192 STOP (success)\n|\n+-- STEP 7: PAUSE\n|   - Wait 30 seconds before next cycle\n|\n+-- REPEAT CYCLE\n|\nON STOP (Ctrl+C or safety limit):\n- Stop all active orchestrators\n- Show final results\n- Return total profit\n|\nEND\n</code></pre> <pre><code>func (p *AdaptiveOrchestratorPreset) Execute() (float64, error) {\n    // Get starting balance\n    p.initialBalance, err := p.suga.GetBalance()\n    p.dailyStartBalance = p.initialBalance\n\n    // Setup context and signal handling\n    p.ctx, p.cancel = context.WithCancel(context.Background())\n    sigChan := make(chan os.Signal, 1)\n    signal.Notify(sigChan, os.Interrupt, syscall.SIGTERM)\n\n    // Start main cycle loop\n    go p.runCycles()\n\n    // Wait for interrupt\n    &lt;-sigChan\n}\n</code></pre> <p>What happens:</p> <ul> <li>Gets starting balance for profit calculation</li> <li>Creates context for graceful shutdown</li> <li>Sets up Ctrl+C handling</li> <li>Launches main cycle loop in a goroutine</li> <li>Blocks until user stops execution (Ctrl+C)</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#2-main-cycle-loop","title":"2. Main Cycle Loop","text":"<p>Lines <code>307\u2013331</code> </p> <pre><code>func (p *AdaptiveOrchestratorPreset) runCycles() {\n    for {\n        select {\n        case &lt;-p.ctx.Done():\n            return\n        default:\n            p.cycleNumber++\n            p.executeCycle()\n\n            // Check safety limits\n            if p.checkSafetyLimits() {\n                p.cancel()\n                return\n            }\n\n            // Pause 30 seconds\n            time.Sleep(30 * time.Second)\n        }\n    }\n}\n</code></pre> <p>What happens:</p> <ul> <li>Infinite loop running cycles</li> <li>Increments cycle counter</li> <li>Executes one trading cycle</li> <li>Checks safety limits after each cycle</li> <li>Stops if limits are breached</li> <li>Pauses 30 seconds between cycles</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#3-execute-single-cycle","title":"3. Execute Single Cycle","text":"<p>Lines <code>334\u2013387</code> </p> <pre><code>func (p *AdaptiveOrchestratorPreset) executeCycle() {\n    // Step 1: Analyze market\n    condition, err := p.analyzeMarketConditions()\n\n    // Step 2: Stop previous orchestrators\n    p.stopAllOrchestrators()\n\n    // Step 3: Execute appropriate mode\n    cycleStartBalance, _ := p.suga.GetBalance()\n\n    switch condition.Mode {\n    case GridMode:\n        p.executeGridMode(condition)\n    case ManagedMode:\n        p.executeManagedMode(condition)\n    case ProtectionMode:\n        p.executeProtectionMode(condition)\n    case PortfolioMode:\n        p.executePortfolioMode(condition)\n    case TrendingMode:\n        p.executeTrendingMode(condition)\n    }\n\n    // Step 4: Monitor cycle\n    p.monitorCycle()\n\n    // Step 5: Calculate profit\n    cycleEndBalance, _ := p.suga.GetBalance()\n    cycleProfit := cycleEndBalance - cycleStartBalance\n    p.totalProfit += cycleProfit\n}\n</code></pre> <p>What happens:</p> <ul> <li>Analyzes current market conditions</li> <li>Stops any orchestrators from the previous cycle</li> <li>Records starting balance</li> <li>Selects and executes the appropriate mode</li> <li>Monitors execution for the cycle duration (5 minutes)</li> <li>Calculates profit for this cycle</li> <li>Updates total profit</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#4-market-analysis","title":"4. Market Analysis","text":"<p>Lines <code>394\u2013447</code> </p> <pre><code>func (p *AdaptiveOrchestratorPreset) analyzeMarketConditions() (*MarketCondition, error) {\n    // Get price info\n    priceInfo, err := p.suga.GetPriceInfo(p.Symbol)\n\n    // Calculate volatility from spread\n    spreadPoints := priceInfo.SpreadPips\n    estimatedVolatility := spreadPoints * 10\n\n    // Get active positions\n    positions, _ := p.suga.GetOpenPositions()\n\n    // Count unique symbols\n    symbolMap := make(map[string]bool)\n    for _, pos := range positions {\n        symbolMap[pos.Symbol] = true\n    }\n\n    // Determine mode (priority order)\n    if p.EnablePortfolioMode &amp;&amp; len(symbolMap) &gt;= 2 {\n        condition.Mode = PortfolioMode\n    } else if estimatedVolatility &gt; p.HighVolatilityThreshold {\n        condition.Mode = ProtectionMode\n    } else if estimatedVolatility &lt; p.LowVolatilityThreshold {\n        condition.Mode = GridMode\n    } else if math.Abs(condition.TrendStrength) &gt; 0.7 {\n        condition.Mode = TrendingMode\n    } else {\n        condition.Mode = ManagedMode\n    }\n}\n</code></pre> <p>What happens:</p> <ul> <li>Fetches current price info using <code>GetPriceInfo()</code></li> <li>Calculates volatility as <code>spread \u00d7 10</code> (simplified estimate)</li> <li>Gets all open positions</li> <li>Counts unique symbols for portfolio detection</li> <li> <p>Applies mode selection logic with priority:</p> </li> <li> <p>Portfolio if 2+ symbols active</p> </li> <li> <p>Protection if volatility &gt; 50 pts</p> </li> <li> <p>Grid if volatility &lt; 25 pts</p> </li> <li> <p>Trending if trend strength &gt; 70%</p> </li> <li> <p>Managed otherwise (default)</p> </li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#5-mode-execution-example-grid-mode","title":"5. Mode Execution Example: Grid Mode","text":"<p>Lines <code>454\u2013477</code> </p> <pre><code>func (p *AdaptiveOrchestratorPreset) executeGridMode(condition *MarketCondition) {\n    config := orchestrators.GridTradeConfig{\n        Symbol:        p.Symbol,\n        GridSize:      5,\n        GridStep:      100,\n        LotSize:       0.01,\n        MaxPositions:  10,\n        CheckInterval: 5 * time.Second,\n    }\n\n    gridTrade := orchestrators.NewGridTrade(p.suga, config)\n    if err := gridTrade.Start(); err != nil {\n        return\n    }\n\n    p.activeOrchestrators = append(p.activeOrchestrators, gridTrade)\n}\n</code></pre> <p>What happens:</p> <ul> <li>Creates configuration for GridTrade</li> <li>Instantiates a new GridTrade orchestrator</li> <li>Starts the orchestrator</li> <li>Adds it to the active orchestrators list</li> <li>Same pattern is used for other modes (ManagedMode, ProtectionMode, etc.)</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#6-cycle-monitoring","title":"6. Cycle Monitoring","text":"<p>Lines <code>562\u2013580</code> </p> <pre><code>func (p *AdaptiveOrchestratorPreset) monitorCycle() {\n    totalSeconds := int(p.CycleDuration.Seconds())\n\n    helpers.WaitWithProgressBarAndCallback(\n        totalSeconds,\n        fmt.Sprintf(\"Cycle #%d monitoring\", p.cycleNumber),\n        10*time.Second, // Update every 10 seconds\n        func() bool {\n            p.showOrchestratorStatus()\n            return true\n        },\n        p.ctx,\n    )\n}\n</code></pre> <p>What happens:</p> <ul> <li>Waits for the cycle duration (default: 5 minutes)</li> <li>Shows a progress bar</li> <li>Every 10 seconds displays orchestrator status</li> <li>Shows operations count, success, and errors</li> <li>User can see live performance</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#7-safety-limits-check","title":"7. Safety Limits Check","text":"<p>Lines <code>609\u2013632</code> </p> <pre><code>func (p *AdaptiveOrchestratorPreset) checkSafetyLimits() bool {\n    // Check total loss\n    if p.totalProfit &lt; -p.BaseRiskAmount*5 {\n        fmt.Printf(\"STOP: Total loss exceeds $%.2f\\n\", p.BaseRiskAmount*5)\n        return true\n    }\n\n    // Check daily loss\n    currentBalance, _ := p.suga.GetBalance()\n    dailyProfit := currentBalance - p.dailyStartBalance\n\n    if dailyProfit &lt; -p.MaxDailyLoss {\n        fmt.Printf(\"STOP: Daily loss limit ($%.2f) reached\\n\", p.MaxDailyLoss)\n        return true\n    }\n\n    // Check daily profit target\n    if dailyProfit &gt; p.MaxDailyProfit {\n        fmt.Printf(\"SUCCESS: Daily profit target ($%.2f) reached!\\n\", p.MaxDailyProfit)\n        return true\n    }\n\n    return false\n}\n</code></pre> <p>What happens:</p> <ul> <li>Total loss check: Stops if loss &gt; $100 (5 \u00d7 $20 base risk)</li> <li>Daily loss check: Stops if daily loss &gt; $500</li> <li>Daily profit check: Stops if daily profit &gt; $1000 (success)</li> <li>Returns <code>true</code> if any limit is breached, stopping the preset</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#8-stop-all-orchestrators","title":"8. Stop All Orchestrators","text":"<p>Lines <code>599\u2013606</code> </p> <pre><code>func (p *AdaptiveOrchestratorPreset) stopAllOrchestrators() {\n    for _, orch := range p.activeOrchestrators {\n        if orch.IsRunning() {\n            orch.Stop()\n        }\n    }\n    p.activeOrchestrators = make([]orchestrators.Orchestrator, 0)\n}\n</code></pre> <p>What happens:</p> <ul> <li>Iterates through all active orchestrators</li> <li>Stops each one if still running</li> <li>Clears the orchestrators list</li> <li>Called before starting a new cycle</li> <li>Ensures a clean slate for the next mode</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#mode-selection-priority","title":"Mode Selection Priority","text":"<p>The preset uses priority-based mode selection to handle conflicting conditions:</p>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#priority-order-highest-to-lowest","title":"Priority Order (Highest to Lowest)","text":"<ol> <li> <p>Portfolio Mode \u2014 if <code>EnablePortfolioMode = true</code> AND 2+ symbols are active</p> </li> <li> <p>Protection Mode \u2014 if volatility &gt; 50 points</p> </li> <li> <p>Grid Mode \u2014 if volatility &lt; 25 points</p> </li> <li> <p>Trending Mode \u2014 if trend strength &gt; 70%</p> </li> <li> <p>Managed Mode \u2014 default fallback for medium volatility</p> </li> </ol>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#why-this-order","title":"Why This Order?","text":"<ul> <li>Portfolio First \u2014 multi-symbol management overrides single-symbol strategies</li> <li>Protection Second \u2014 safety takes priority in high volatility</li> <li>Grid Third \u2014 low-volatility grid comes before trend detection</li> <li>Trending Fourth \u2014 only if volatility is medium but strong trend exists</li> <li>Managed Last \u2014 balanced approach when no special conditions apply</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#volatility-calculation","title":"Volatility Calculation","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#simplified-method-demo","title":"Simplified Method (Demo)","text":"<pre><code>spreadPoints := priceInfo.SpreadPips\nestimatedVolatility := spreadPoints * 10\n</code></pre> <p>Current Implementation:</p> <ul> <li>Uses spread as a volatility proxy</li> <li>Multiplies by 10 for point estimation</li> <li>Simplified for demonstration purposes</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#production-alternatives","title":"Production Alternatives","text":"<p>For real trading, calculate volatility using:</p> <ol> <li>ATR (Average True Range) \u2014 14-period ATR from bars</li> <li>Historical Volatility \u2014 standard deviation of price changes</li> <li>VWAP Deviation \u2014 distance from volume-weighted average price</li> </ol> <p>Example with bars:</p> <pre><code>// Get recent bars\nbars, _ := suga.GetBars(symbol, timeframe, 100)\n\n// Calculate ATR\natr := calculateATR(bars, 14)\n\n// Use ATR as volatility\nif atr &lt; 20 {\n    mode = GridMode\n} else if atr &gt; 50 {\n    mode = ProtectionMode\n}\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#safety-features","title":"Safety Features","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#1-stop-loss-protection","title":"1. Stop-Loss Protection","text":"<p>Total Loss Limit: Stops if loss &gt; 5 \u00d7 base risk</p> <pre><code>if p.totalProfit &lt; -p.BaseRiskAmount*5 {\n    // Stop preset\n}\n</code></pre> <p>Default: $100 total loss limit ($20 \u00d7 5)</p>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#2-daily-loss-limit","title":"2. Daily Loss Limit","text":"<p>Maximum Daily Loss: Stops if daily loss exceeds configured limit</p> <pre><code>dailyProfit := currentBalance - dailyStartBalance\nif dailyProfit &lt; -p.MaxDailyLoss {\n    // Stop preset\n}\n</code></pre> <p>Default: $500 daily loss limit</p>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#3-daily-profit-target","title":"3. Daily Profit Target","text":"<p>Profit Goal: Stops when daily profit target is reached</p> <pre><code>if dailyProfit &gt; p.MaxDailyProfit {\n    // Stop preset (success!)\n}\n</code></pre> <p>Default: $1000 daily profit target</p>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#4-maximum-concurrent-orchestrators","title":"4. Maximum Concurrent Orchestrators","text":"<p>Orchestrator Limit: Controls maximum orchestrators running at once</p> <pre><code>MaxConcurrentOrchestrators: 2\n</code></pre> <p>Current Usage:</p> <ul> <li>Grid Mode: 1 orchestrator</li> <li>Managed Mode: 2 orchestrators</li> <li>Other modes: 1 orchestrator</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#5-graceful-shutdown","title":"5. Graceful Shutdown","text":"<p>Signal Handling: Catches Ctrl+C for clean exit</p> <pre><code>sigChan := make(chan os.Signal, 1)\nsignal.Notify(sigChan, os.Interrupt, syscall.SIGTERM)\n\n&lt;-sigChan // Wait for Ctrl+C\np.stopAllOrchestrators() // Clean shutdown\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#critical-warnings","title":"\u2699\ufe0f Critical Warnings","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#1-simplified-volatility-calculation","title":"1. Simplified Volatility Calculation","text":"<ul> <li>Current implementation: <code>spread \u00d7 10</code></li> <li>Not accurate for production trading</li> <li>Use ATR, historical volatility, or proper indicators</li> <li>Test calculations on demo accounts first</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#2-trend-detection-is-placeholder","title":"2. Trend Detection Is Placeholder","text":"<ul> <li>Current: based on spread modulo</li> <li>Not real trend analysis</li> <li>Production: use moving averages, MACD, trend lines</li> <li>Implement proper technical analysis</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#3-continuous-operation-risks","title":"3. Continuous Operation Risks","text":"<ul> <li>Preset runs in an infinite loop until stopped</li> <li>Can accumulate losses if market analysis fails</li> <li>Monitor actively during first runs</li> <li>Set conservative safety limits</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#4-mode-switching-overhead","title":"4. Mode Switching Overhead","text":"<ul> <li>Stops and starts orchestrators every cycle</li> <li>May close positions prematurely</li> <li>Consider longer cycle durations (10\u201315 minutes)</li> <li>Balance adaptation speed vs. stability</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#5-multiple-orchestrators-complexity","title":"5. Multiple Orchestrators Complexity","text":"<ul> <li>Managed Mode runs 2 orchestrators simultaneously</li> <li>Ensure they don\u2019t conflict (e.g., both modifying the same position)</li> <li>Current implement</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#best-practices","title":"Best Practices","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#start-with-demo-account","title":"Start with Demo Account","text":"<ul> <li>Run the preset on a demo account for a minimum of 1 week</li> <li>Observe mode switches and orchestrator behavior</li> <li>Verify volatility and trend detection accuracy</li> <li>Adjust thresholds based on your symbols</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#customize-thresholds-for-your-market","title":"Customize Thresholds for Your Market","text":"<ul> <li>Default thresholds (25 pts, 50 pts) are tuned for EURUSD</li> <li>Volatile pairs (e.g. GBPJPY) need higher thresholds</li> <li>Stable pairs (e.g. EURCHF) need lower thresholds</li> <li>Always test on your specific symbols</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#monitor-first-10-cycles-manually","title":"Monitor First 10 Cycles Manually","text":"<ul> <li>Watch mode selection logic closely</li> <li>Verify the appropriate orchestrator is chosen</li> <li>Check if modes switch too frequently</li> <li>Adjust <code>CycleDuration</code> if needed</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#set-conservative-safety-limits","title":"Set Conservative Safety Limits","text":"<ul> <li>Start with low <code>BaseRiskAmount</code> ($10\u2013$20)</li> <li>Set tight <code>MaxDailyLoss</code> (1\u20132% of balance)</li> <li>Use realistic <code>MaxDailyProfit</code> (2\u20133% of balance)</li> <li>Tighten limits until you trust the system</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#improve-market-analysis","title":"Improve Market Analysis","text":"<ul> <li>Replace spread-based volatility with ATR</li> <li>Implement proper trend detection (MA crossovers)</li> <li>Add time-of-day filters (avoid low-liquidity hours)</li> <li>Consider fundamental factors (news events)</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#log-all-mode-switches","title":"Log All Mode Switches","text":"<ul> <li>Record why each mode was selected</li> <li>Track mode effectiveness (profit per mode)</li> <li>Identify which modes work best</li> <li>Disable underperforming modes</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#regular-performance-review","title":"Regular Performance Review","text":"<ul> <li>Check <code>GetCycleNumber()</code> and <code>GetTotalProfit()</code></li> <li>Calculate average profit per cycle</li> <li>Identify loss-making modes</li> <li>Optimize orchestrator configurations</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#when-to-use-this-preset","title":"\ud83d\udd27 When to Use This Preset","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#ideal-use-cases","title":"Ideal Use Cases","text":"<p>Set-and-Forget Trading</p> <ul> <li>Want automated strategy that adapts to markets</li> <li>Don\u2019t want to manually switch strategies</li> <li>Available to monitor but not actively trade</li> </ul> <p>Multi-Strategy Testing</p> <ul> <li>Want to compare different orchestrators</li> <li>Test which strategies work in which conditions</li> <li>Learn orchestrator behavior</li> </ul> <p>24/7 Automated Trading</p> <ul> <li>Running unattended trading system</li> <li>Need adaptive approach for changing markets</li> <li>Built-in safety stops for protection</li> </ul> <p>Learning Advanced Patterns</p> <ul> <li>Understanding orchestrator composition</li> <li>Learning market condition detection</li> <li>Building your own adaptive systems</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#avoid-using-when","title":"Avoid Using When","text":"<p>High-Frequency Trading</p> <ul> <li>5-minute cycles are too slow for HFT</li> <li>Mode switching overhead too high</li> <li>Use single specialized orchestrator instead</li> </ul> <p>Very Specific Strategy</p> <ul> <li>You already have one proven strategy</li> <li>No need for adaptation</li> <li>Use that single orchestrator directly</li> </ul> <p>Small Account (&lt; $500)</p> <ul> <li>Preset complexity not worth it for small capital</li> <li>Safety limits may stop prematurely</li> <li>Use simpler single-orchestrator approach</li> </ul> <p>During Major News Events</p> <ul> <li>Market analysis may fail in extreme volatility</li> <li>Unpredictable mode switching</li> <li>Disable preset or use manual trading</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#monitoring-and-control","title":"Monitoring and Control","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#checking-status-during-execution","title":"Checking Status During Execution","text":"<p>The preset displays live status every 10 seconds during monitoring:</p> <pre><code>[15:04:05] Active orchestrators: 2\n- TrailingStopManage: 5 ops (4 success, 1 error)\n- PositionScale: 3 ops (3 success, 0 errors)\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#accessing-metrics-programmatically","title":"Accessing Metrics Programmatically","text":"<pre><code>// Get current cycle number\ncycleNum := preset.GetCycleNumber()\n\n// Get total profit / loss\ntotalProfit := preset.GetTotalProfit()\n\n// Get active orchestrators count\nactiveCount := preset.GetActiveOrchestratorCount()\n\n// Get orchestrator details\norchestrators := preset.GetActiveOrchestrators()\nfor _, orch := range orchestrators {\n    status := orch.GetStatus()\n    fmt.Printf(\"%s: %d operations\\n\", status.Name, status.SuccessCount)\n}\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#final-results-display","title":"\ud83d\udca1 Final Results Display","text":"<p>When the preset stops (Ctrl+C or safety limit), it shows a summary:</p> <pre><code>+============================================================+\n| FINAL RESULTS                                              |\n+============================================================+\nInitial Balance:      $10000.00\nFinal Balance:        $10350.00\nTotal Profit / Loss:  $350.00\nCycles Completed:     12\nAverage Per Cycle:    $29.17\n+============================================================+\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#troubleshooting","title":"Troubleshooting","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#problem-preset-never-enters-grid-mode","title":"Problem: Preset Never Enters Grid Mode","text":"<p>Solution: Check volatility threshold</p> <ul> <li>Current: <code>LowVolatilityThreshold = 25.0</code></li> <li>If your market always has spread &gt; 2.5 pips, increase the threshold</li> <li>Try: <code>preset.LowVolatilityThreshold = 40.0</code></li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#problem-switches-modes-every-cycle-unstable","title":"Problem: Switches Modes Every Cycle (Unstable)","text":"<p>Solution: Widen volatility bands</p> <ul> <li>Create a buffer zone between thresholds</li> <li>Example: Low &lt; 20 pts, High &gt; 60 pts (40 pt gap)</li> <li>Or increase <code>CycleDuration</code> to 10\u201315 minutes</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#problem-always-in-protection-mode","title":"Problem: Always in Protection Mode","text":"<p>Solution: Increase high volatility threshold</p> <ul> <li>Current: <code>HighVolatilityThreshold = 50.0</code></li> <li>Increase to 80\u2013100 for volatile pairs</li> <li>Example: <code>preset.HighVolatilityThreshold = 80.0</code></li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#problem-hit-max-daily-loss-quickly","title":"Problem: Hit Max Daily Loss Quickly","text":"<p>Solution: Reduce risk or increase limit</p> <ul> <li>Lower <code>BaseRiskAmount</code> from $20 to $10</li> <li>Or increase <code>MaxDailyLoss</code> from $500 to $1000</li> <li>Verify orchestrator configurations are conservative</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#problem-orchestrator-errors-during-execution","title":"Problem: Orchestrator Errors During Execution","text":"<p>Solution: Check individual orchestrator logs</p> <ul> <li>Review error messages in status display</li> <li>Verify the symbol is tradable</li> <li>Check account has sufficient margin</li> <li>Test individual orchestrators separately first</li> </ul>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#improving-the-preset","title":"Improving the Preset","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#custom-market-analysis","title":"Custom Market Analysis","text":"<p>Replace simplified volatility calculation:</p> <pre><code>func (p *AdaptiveOrchestratorPreset) analyzeMarketConditions() (*MarketCondition, error) {\n    // Get bars for analysis\n    bars, _ := p.suga.GetBars(p.Symbol, pb.Timeframe_M15, 100)\n\n    // Calculate ATR\n    atr := calculateATR(bars, 14)\n\n    // Calculate moving averages for trend\n    ma20 := calculateMA(bars, 20)\n    ma50 := calculateMA(bars, 50)\n\n    // Detect trend\n    trendStrength := 0.0\n    if ma20 &gt; ma50 {\n        trendStrength = (ma20 - ma50) / ma50\n    } else {\n        trendStrength = (ma20 - ma50) / ma50\n    }\n\n    // Use ATR for volatility\n    condition.VolatilityPoints = atr\n    condition.TrendStrength = trendStrength\n\n    // ...rest of mode selection logic\n}\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#adding-time-of-day-filters","title":"Adding Time-of-Day Filters","text":"<pre><code>// Don\u2019t trade during low-liquidity hours\nfunc (p *AdaptiveOrchestratorPreset) isTradingHours() bool {\n    now := time.Now().UTC()\n    hour := now.Hour()\n\n    // Avoid Asian session (22:00\u201302:00 UTC)\n    if hour &gt;= 22 || hour &lt; 2 {\n        return false\n    }\n\n    return true\n}\n\n// In executeCycle():\nif !p.isTradingHours() {\n    fmt.Println(\"Outside trading hours, skipping cycle\")\n    return\n}\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#mode-specific-optimization","title":"Mode-Specific Optimization","text":"<pre><code>// Track performance per mode\ntype ModePerformance struct {\n    Mode          MarketMode\n    TotalCycles   int\n    TotalProfit   float64\n    SuccessRate   float64\n}\n\n// Disable underperforming modes\nif modePerf[GridMode].SuccessRate &lt; 0.4 {\n    // Skip Grid Mode for this session\n    continue\n}\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#integration-with-other-systems","title":"Integration with Other Systems","text":""},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#with-external-signals","title":"With External Signals","text":"<pre><code>// Add signal integration\ntype ExternalSignal struct {\n    Symbol    string\n    Direction string // \"BUY\" or \"SELL\"\n    Strength  float64\n}\n\nfunc (p *AdaptiveOrchestratorPreset) checkExternalSignals() *ExternalSignal {\n    // Check your signal provider\n    signal := fetchSignalFromAPI()\n    return signal\n}\n\n// Modify mode selection\nif signal := p.checkExternalSignals(); signal != nil {\n    if signal.Direction == \"BUY\" &amp;&amp; signal.Strength &gt; 0.8 {\n        condition.Mode = TrendingMode\n        condition.Reason = \"Strong external buy signal\"\n    }\n}\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#with-custom-risk-management","title":"With Custom Risk Management","text":"<pre><code>// Override default RiskManage configuration\nfunc (p *AdaptiveOrchestratorPreset) executeProtectionMode(condition *MarketCondition) {\n    config := orchestrators.RiskManageConfig{\n        MaxDrawdownPercent: 3.0,  // Stricter limit\n        DailyLossLimit:     200.0, // Lower daily limit\n        MinMarginLevel:     200.0, // Higher margin safety\n        EnableAutoClose:    true,\n    }\n\n    riskManage := orchestrators.NewRiskManage(p.suga, config)\n    riskManage.Start()\n}\n</code></pre>"},{"location":"Orchestrators/16_AdaptiveOrchestratorPreset/#summary","title":"Summary","text":"<p>Adaptive Orchestrator Preset is an intelligent multi-strategy trading system:</p> <ul> <li>Adaptive Selection \u2014 automatically chooses the best orchestrator based on market conditions</li> <li>Five Market Modes \u2014 Grid, Managed, Protection, Portfolio, Trending</li> <li>Continuous Operation \u2014 runs in cycles with automatic adaptation</li> <li>Built-in Safety \u2014 multiple safety stops and daily limits</li> <li>Highly Customizable \u2014 thresholds and configurations are adjustable</li> </ul> <p>Remember:</p> <ul> <li>Market analysis is simplified (improve for production use)</li> <li>Test extensively on demo accounts</li> <li>Monitor first runs closely</li> <li>Customize thresholds for your symbols</li> <li>Start with conservative limits</li> </ul> <p>The goal: Create a complete adaptive trading system that automatically selects the right strategy for current market conditions, providing true set-and-forget automated trading with intelligent risk management.</p>"},{"location":"Orchestrators/Strategies.Master.Overview/","title":"Orchestrators &amp; Presets \u2014 Complete Overview","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#introduction","title":"Introduction","text":"<p>Orchestrators are advanced trading strategies that combine multiple Go MT5 methods into sophisticated automated systems. Think of them as trading robots that handle complex scenarios like trailing stops, position scaling, grid trading, risk management, and portfolio balancing.</p> <p>\ud83e\udde0 Presets are intelligent systems that combine multiple orchestrators and automatically switch between them based on market conditions.</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#quick-navigation","title":"Quick Navigation","text":"Orchestrator Purpose Jump to Docs TrailingStopManage Protect profits by auto-moving stop-loss Details \u00b7 Full Docs PositionScale Scale into winning/losing positions Details \u00b7 Full Docs GridTrade Profit from range-bound markets Details \u00b7 Full Docs RiskManage Monitor and enforce account safety limits Details \u00b7 Full Docs PortfolioRebalance Maintain balanced multi-symbol allocation Details \u00b7 Full Docs Adaptive Preset Auto-switch strategies based on conditions Details \u00b7 Full Docs"},{"location":"Orchestrators/Strategies.Master.Overview/#architecture-hierarchy","title":"Architecture Hierarchy","text":"<pre><code>MT5 Account (Low-level gRPC)\n|\nMT5 Service (Go wrappers)\n|\nMT5 Suga (High-level convenience)\n|\nORCHESTRATORS (Automated strategies)\n|\n+-- TrailingStopManage (Profit protection)\n+-- PositionScale (Position sizing)\n+-- GridTrade (Range-bound trading)\n+-- RiskManage (Account protection)\n+-- PortfolioRebalance (Multi-symbol management)\n|\nPRESETS (Multi-strategy systems)\n|\n+-- Adaptive Orchestrator Preset (Intelligent mode switching)\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#quick-comparison-table","title":"Quick Comparison Table","text":"Orchestrator Purpose Best For Complexity Risk Level TrailingStopManage Protect profits Trending markets Low Low PositionScale Add to winners/losers Active trading Medium Medium\u2013High GridTrade Range-bound profits Sideways markets Medium Medium RiskManage Account protection All conditions Low Very Low (protective) PortfolioRebalance Multi-symbol balance Diversification Medium Low\u2013Medium Adaptive Preset Auto strategy switching All conditions High Medium"},{"location":"Orchestrators/Strategies.Master.Overview/#orchestrator-11-trailingstopmanage","title":"Orchestrator #11: TrailingStopManage","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#overview","title":"Overview","text":"<p>Automatically moves stop-loss orders to protect profits as price moves favorably.</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#key-features","title":"Key Features","text":"<ul> <li>Activates after profit threshold is reached</li> <li>Trails stop-loss behind price (never moves unfavorably)</li> <li>Handles multiple positions simultaneously</li> <li>Works 24/7 without manual intervention</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#configuration-example","title":"Configuration Example","text":"<pre><code>config := orchestrators.TrailingStopConfig{\n    TrailingDistance: 200, // Tail 200 points behind\n    ActivationProfit: 300, // Activate at 300 points profit\n    UpdateInterval:   2 * time.Second,\n}\n\nmanager := orchestrators.NewTrailingStopManage(suga, config)\nmanager.Start()\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#when-to-use","title":"When to Use","text":"<p>\u2705 IDEAL FOR:</p> <ul> <li>Trending markets where you want to let winners run</li> <li>Protecting accumulated profits automatically</li> <li>\"Set-and-forget\" profit protection</li> </ul> <p>\u26a0\ufe0f AVOID:</p> <ul> <li>Ranging or choppy markets (may exit prematurely)</li> <li>When you prefer manual stop management</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#quick-stats","title":"Quick Stats","text":"<ul> <li>Input: Open positions</li> <li>Action: Modifies stop-loss levels</li> <li>Output: Protected profits</li> <li>Cycle Time: 2 seconds (configurable)</li> </ul> <p>Full Documentation</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#orchestrator-12-positionscale","title":"Orchestrator #12: PositionScale","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#overview_1","title":"Overview","text":"<p>Adds to winning or losing positions based on the configured mode (Pyramiding, Averaging Down, Scale Out).</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#key-features_1","title":"Key Features","text":"<ul> <li> <p>3 Modes:</p> </li> <li> <p>Pyramiding \u2014 add to winners (trend trading)</p> </li> <li>Averaging Down \u2014 add to losers (high risk!)</li> <li>Scale Out \u2014 gradually exit positions</li> <li>Configurable trigger distances</li> <li>Maximum scale limits</li> <li>Automatic lot size calculation</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#configuration-example_1","title":"Configuration Example","text":"<pre><code>config := orchestrators.PositionScaleConfig{\n    Mode:            Pyramiding, // Add to winners\n    Symbol:          \"EURUSD\",\n    TriggerDistance: 200,        // Add every 200 points profit\n    MaxScales:       3,          // Max 3 additions\n    ScaleLotSize:    0.01,\n}\n\nscale := orchestrators.NewPositionScale(suga, config)\nscale.Start()\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#when-to-use_1","title":"When to Use","text":"<p>\u2705 IDEAL FOR:</p> <ul> <li>Pyramiding \u2014 strong trending markets</li> <li>Averaging Down \u2014 range-bound markets (risky!)</li> <li>Scale Out \u2014 taking profits gradually</li> </ul> <p>\u26a0\ufe0f AVOID:</p> <ul> <li>Averaging down in trending markets (disaster!)</li> <li>Small accounts (need margin for scaling)</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#quick-stats_1","title":"Quick Stats","text":"<ul> <li>Input: Open position + price movement</li> <li>Action: Opens additional positions</li> <li>Output: Scaled exposure</li> <li>Cycle Time: 5 seconds (configurable)</li> </ul> <p>Full Documentation</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#orchestrator-13-gridtrade","title":"Orchestrator #13: GridTrade","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#overview_2","title":"Overview","text":"<p>\ud83d\udcca Places a grid of buy/sell orders at regular intervals, profiting from price oscillations in range-bound markets.</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#key-features_2","title":"Key Features","text":"<ul> <li>Configurable grid size and spacing</li> <li>Automatic order placement</li> <li>Works best in sideways markets</li> <li>Optional grid rebuilding after fills</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#configuration-example_2","title":"Configuration Example","text":"<pre><code>config := orchestrators.GridTradeConfig{\n    Symbol:        \"EURUSD\",\n    GridSize:      5,   // 5 grid levels\n    GridStep:      100, // 100 points spacing\n    LotSize:       0.01,\n    MaxPositions:  10,\n    CheckInterval: 5 * time.Second,\n}\n\ngridTrade := orchestrators.NewGridTrade(suga, config)\ngridTrade.Start()\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#when-to-use_2","title":"When to Use","text":"<p>\u2705 IDEAL FOR:</p> <ul> <li>Range-bound, sideways markets</li> <li>Low volatility conditions</li> <li>Markets with clear support/resistance</li> </ul> <p>\u26a0\ufe0f AVOID:</p> <ul> <li>Strong trending markets (losses accumulate)</li> <li>High volatility (grid gets overrun)</li> <li>News events or breakouts</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#quick-stats_2","title":"Quick Stats","text":"<ul> <li>Input: Price range</li> <li>Action: Places grid of orders</li> <li>Output: Small frequent profits</li> <li>Cycle Time: 5 seconds (configurable)</li> </ul> <p>Full Documentation</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#orchestrator-14-riskmanage","title":"Orchestrator #14: RiskManage","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#overview_3","title":"Overview","text":"<p>Monitors account-level risk metrics 24/7 and automatically intervenes when danger limits are exceeded.</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#key-features_3","title":"Key Features","text":"<ul> <li> <p>5 Protection Types:</p> </li> <li> <p>Drawdown protection (percentage and absolute)</p> </li> <li>Daily loss limits</li> <li>Daily profit targets</li> <li>Margin level monitoring</li> <li>Position count limits</li> <li>Emergency close of all positions</li> <li>Trade blocking when limits are hit</li> <li>Daily automatic reset</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#configuration-example_3","title":"Configuration Example","text":"<pre><code>config := orchestrators.RiskManageConfig{\n    MaxDrawdownPercent:  10.0,  // 10% max drawdown\n    MaxDrawdownAbsolute: 1000.0, // $1000 max loss\n    DailyLossLimit:      500.0,  // $500 daily limit\n    DailyProfitTarget:   1000.0, // $1000 daily goal\n    MinMarginLevel:      150.0,  // 150% minimum margin\n    EnableAutoClose:     true,   // Auto-close on breach\n    CheckInterval:       5 * time.Second,\n}\n\nriskManage := orchestrators.NewRiskManage(suga, config)\nriskManage.Start()\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#when-to-use_3","title":"When to Use","text":"<p>\u2705 IDEAL FOR:</p> <ul> <li>All trading (always use risk management!)</li> <li>Automated systems running unattended</li> <li>Learning proper risk control</li> <li>Protecting against blow-ups</li> </ul> <p>\u26a0\ufe0f AVOID:</p> <ul> <li>Never avoid risk management</li> <li>(Seriously, always use it)</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#quick-stats_3","title":"Quick Stats","text":"<ul> <li>Input: Account metrics (equity, balance, margin)</li> <li>Action: Monitors, alerts, closes positions if needed</li> <li>Output: Protected account</li> <li>Cycle Time: 5 seconds (configurable)</li> </ul> <p>Full Documentation</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#orchestrator-15-portfoliorebalance","title":"Orchestrator #15: PortfolioRebalance","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#overview_4","title":"Overview","text":"<p>Maintains balanced exposure across multiple trading symbols by automatically rebalancing positions to match target allocations.</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#key-features_4","title":"Key Features","text":"<ul> <li>Equal-weight or custom allocation percentages</li> <li>Automatic rebalancing when deviation exceeds threshold</li> <li>Multi-symbol portfolio management</li> <li>Diversification enforcement</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#configuration-example_4","title":"Configuration Example","text":"<pre><code>config := orchestrators.PortfolioRebalanceConfig{\n    Allocations: map[string]float64{\n        \"EURUSD\": 0.25, // 25% each\n        \"GBPUSD\": 0.25,\n        \"USDJPY\": 0.25,\n        \"XAUUSD\": 0.25,\n    },\n    TotalExposure:      10000.0,          // $10k portfolio\n    RebalanceThreshold: 10.0,             // Rebalance at 10% off\n    CheckInterval:      30 * time.Minute,\n}\n\nrebalance := orchestrators.NewPortfolioRebalance(suga, config)\nrebalance.Start()\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#when-to-use_4","title":"When to Use","text":"<p>\u2705 IDEAL FOR:</p> <ul> <li>Multi-symbol trading systems</li> <li>Diversification strategies</li> <li>Portfolio managers</li> <li>Long-term position holding</li> </ul> <p>\u26a0\ufe0f AVOID:</p> <ul> <li>Single-symbol trading</li> <li>High-frequency trading</li> <li>Very small accounts (&lt; $1,000)</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#quick-stats_4","title":"Quick Stats","text":"<ul> <li>Input: Multiple symbol positions</li> <li>Action: Opens/closes positions to restore balance</li> <li>Output: Balanced portfolio allocation</li> <li>Cycle Time: 30 minutes (configurable)</li> </ul> <p>Full Documentation</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#preset-16-adaptive-orchestrator-preset","title":"Preset #16: Adaptive Orchestrator Preset","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#overview_5","title":"Overview","text":"<p>Intelligent multi-strategy system that analyzes market conditions every 5 minutes and automatically selects the most appropriate orchestrator to run.</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#key-features_5","title":"Key Features","text":"<ul> <li> <p>5 Market Modes:</p> </li> <li> <p>Grid Mode \u2014 low volatility \u2192 GridTrade</p> </li> <li>Managed Mode \u2014 medium volatility \u2192 TrailingStop + PositionScale</li> <li>Protection Mode \u2014 high volatility \u2192 RiskManage</li> <li>Portfolio Mode \u2014 multi-symbol \u2192 PortfolioRebalance</li> <li>Trending Mode \u2014 strong trend \u2192 PositionScale (pyramiding)</li> <li>Automatic mode switching every cycle</li> <li>Built-in safety limits</li> <li>Continuous operation with daily limits</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#configuration-example_5","title":"Configuration Example","text":"<pre><code>preset := presets.NewAdaptiveOrchestratorPreset(suga)\n\n// Customize\npreset.Symbol = \"EURUSD\"\npreset.LowVolatilityThreshold = 25.0  // Grid below 25 pts\npreset.HighVolatilityThreshold = 50.0 // Protection above 50 pts\npreset.CycleDuration = 5 * time.Minute\npreset.MaxDailyLoss = 500.0\npreset.MaxDailyProfit = 1000.0\n\n// Run (blocks until stopped with Ctrl+C)\ntotalProfit, _ := preset.Execute()\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#when-to-use_5","title":"When to Use","text":"<p>\u2705 IDEAL FOR:</p> <ul> <li>\"Set-and-forget\" adaptive trading</li> <li>Testing multiple strategies</li> <li>24/7 automated trading</li> <li>Learning orchestrator composition</li> </ul> <p>\u26a0\ufe0f AVOID:</p> <ul> <li>Very specific proven strategy</li> <li>High-frequency trading</li> <li>Small accounts (&lt; $500)</li> <li>Major news events</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#quick-stats_5","title":"Quick Stats","text":"<ul> <li>Input: Market conditions (volatility, trend, positions)</li> <li>Action: Selects and runs the appropriate orchestrator</li> <li>Output: Adaptive multi-strategy performance</li> <li>Cycle Time: 5 minutes + 30-second pause</li> </ul> <p>Full Documentation</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#orchestrator-selection-guide","title":"Orchestrator Selection Guide","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#by-market-condition","title":"By Market Condition","text":"Market Condition Best Orchestrator Why Strong Uptrend TrailingStop + PositionScale (Pyramiding) Protect profits, add to winners Strong Downtrend TrailingStop (short positions) Protect short profits Sideways / Ranging GridTrade Profit from oscillations Low Volatility GridTrade Small frequent profits High Volatility RiskManage Protection mode Multi-Symbol Active PortfolioRebalance Balance allocation Uncertain / Changing Adaptive Preset Auto-adapt to conditions"},{"location":"Orchestrators/Strategies.Master.Overview/#by-trading-style","title":"By Trading Style","text":"Trading Style Recommended Orchestrators Scalping TrailingStop (tight parameters) Day Trading TrailingStop + RiskManage Swing Trading PositionScale (pyramiding) + RiskManage Position Trading PortfolioRebalance + RiskManage Grid Trading GridTrade + RiskManage Automated 24/7 Adaptive Preset"},{"location":"Orchestrators/Strategies.Master.Overview/#by-risk-tolerance","title":"By Risk Tolerance","text":"Risk Level Orchestrator Combination Conservative RiskManage only (5% drawdown limit) Moderate TrailingStop + RiskManage Balanced PortfolioRebalance + RiskManage Aggressive PositionScale + TrailingStop + RiskManage Very Aggressive GridTrade + PositionScale (NOT RECOMMENDED)"},{"location":"Orchestrators/Strategies.Master.Overview/#common-orchestrator-combinations","title":"Common Orchestrator Combinations","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#combination-1-safe-trend-trading","title":"Combination 1: Safe Trend Trading","text":"<p>Orchestrators: TrailingStop + RiskManage</p> <p>Purpose: Follow trends with profit protection and account safety</p> <pre><code>// Trailing stop for profit protection\ntsConfig := orchestrators.DefaultTrailingStopConfig()\ntrailingManage := orchestrators.NewTrailingStopManage(suga, tsConfig)\ntrailingManage.Start()\n\n// Risk management for account protection\nriskConfig := orchestrators.DefaultRiskManageConfig()\nriskManage := orchestrators.NewRiskManage(suga, riskConfig)\nriskManage.Start()\n</code></pre> <p>Best For: Beginners, conservative traders, trending markets</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#combination-2-aggressive-scaling","title":"Combination 2: Aggressive Scaling","text":"<p>Orchestrators: PositionScale + TrailingStop + RiskManage</p> <p>Purpose: Scale into trends, protect profits, limit risk</p> <pre><code>// Scale for pyramiding\nscaleConfig := orchestrators.DefaultPositionScaleConfig(\"EURUSD\")\nscaleConfig.Mode = orchestrators.Pyramiding\nscale := orchestrators.NewPositionScale(suga, scaleConfig)\nscale.Start()\n\n// Trailing stop for profit protection\ntsManage := orchestrators.NewTrailingStopManage(suga, tsConfig)\ntsManage.Start()\n\n// Risk management for safety\nriskManage := orchestrators.NewRiskManage(suga, riskConfig)\nriskManage.Start()\n</code></pre> <p>Best For: Experienced traders, strong trends, large accounts</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#combination-3-portfolio-diversification","title":"Combination 3: Portfolio Diversification","text":"<p>Orchestrators: PortfolioRebalance + RiskManage</p> <p>Purpose: Maintain balanced multi-symbol portfolio with protection</p> <pre><code>// Portfolio rebalance\nportfolioConfig := orchestrators.PortfolioRebalanceConfig{\n    Allocations: map[string]float64{\n        \"EURUSD\": 0.25,\n        \"GBPUSD\": 0.25,\n        \"USDJPY\": 0.25,\n        \"XAUUSD\": 0.25,\n    },\n    TotalExposure: 10000.0,\n}\n\nrebalance := orchestrators.NewPortfolioRebalance(suga, portfolioConfig)\nrebalance.Start()\n\n// Risk management for overall protection\nriskManage := orchestrators.NewRiskManage(suga, riskConfig)\nriskManage.Start()\n</code></pre> <p>Best For: Portfolio managers, diversification seekers, medium\u2013large accounts</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#combination-4-range-trading","title":"Combination 4: Range Trading","text":"<p>Orchestrators: GridTrade + RiskManage</p> <p>Purpose: Profit from sideways markets with risk control</p> <pre><code>// Grid trade\ngridConfig := orchestrators.GridTradeConfig{\n    Symbol:   \"EURUSD\",\n    GridSize: 5,\n    GridStep: 100,\n}\n\ngridTrade := orchestrators.NewGridTrade(suga, gridConfig)\ngridTrade.Start()\n\n// Risk management (important for grid!)\nriskConfig := orchestrators.RiskManageConfig{\n    MaxDrawdownPercent: 15.0, // Wider for grid\n    EnableAutoClose:    true,\n}\n\nriskManage := orchestrators.NewRiskManage(suga, riskConfig)\nriskManage.Start()\n</code></pre> <p>Best For: Range-bound markets, low volatility, experienced traders</p>"},{"location":"Orchestrators/Strategies.Master.Overview/#running-orchestrators","title":"Running Orchestrators","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#command-line-execution","title":"Command-Line Execution","text":"<pre><code>cd examples/demos\n\n# Individual orchestrators\ngo run main.go 11  # TrailingStop\ngo run main.go trailing\n\ngo run main.go 12  # PositionScale\ngo run main.go scale\n\ngo run main.go 13  # GridTrade\ngo run main.go grid\n\ngo run main.go 14  # RiskManage\ngo run main.go risk\n\ngo run main.go 15  # PortfolioRebalance\ngo run main.go rebalance\n\n# Adaptive preset\ngo run main.go 16       # Adaptive Preset\ngo run main.go adaptive\ngo run main.go preset\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#programmatic-usage","title":"Programmatic Usage","text":"<pre><code>// Initialize connection\nsuga := mt5.NewMT5Suga(account)\n\n// Create orchestrator with config\nconfig := orchestrators.DefaultTrailingStopConfig()\norchestrator := orchestrators.NewTrailingStopManage(suga, config)\n\n// Start (non-blocking)\nif err := orchestrator.Start(); err != nil {\n    log.Fatal(err)\n}\n\n// Monitor status\nstatus := orchestrator.GetStatus()\nfmt.Printf(\"Running: %v, Operations: %d\\n\",\n    status.IsRunning,\n    status.SuccessCount+status.ErrorCount)\n\n// Stop when done\norchestrator.Stop()\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#best-practices","title":"\u2705 Best Practices","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#do","title":"DO","text":"<p>Always Use RiskManage</p> <ul> <li>Combine any orchestrator with RiskManage</li> <li>Set conservative limits initially</li> <li>Monitor risk events regularly</li> </ul> <p>Test on Demo First</p> <ul> <li>Run each orchestrator on demo for a minimum of 1 week</li> <li>Verify behavior matches expectations</li> <li>Adjust parameters based on observations</li> </ul> <p>Start Conservative</p> <ul> <li>Use small position sizes initially</li> <li>Set tighter safety limits</li> <li>Gradually loosen as you gain confidence</li> </ul> <p>Monitor Actively at First</p> <ul> <li>Watch first 10 cycles closely</li> <li>Verify orchestrator behavior</li> <li>Check for unexpected actions</li> </ul> <p>Combine Intelligently</p> <ul> <li>TrailingStop + RiskManage = safe</li> <li>GridTrade + PositionScale = dangerous!</li> <li>Portfolio + RiskManage = smart diversification</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#dont","title":"\u26a0\ufe0f DON'T","text":"<p>Never Trade Without Risk Management</p> <ul> <li>Even on demo, practice with RiskManage</li> <li>Learn proper risk control habits</li> <li>Safety should be automatic</li> </ul> <p>Don't Run Conflicting Orchestrators</p> <ul> <li>GridTrade + Trending Mode scaling = conflict</li> <li>Test combinations on demo first</li> <li>Understand how they interact</li> </ul> <p>Don't Set-and-Forget Initially</p> <ul> <li>First week: monitor closely</li> <li>Second week: check daily</li> <li>Third week+: periodic review</li> </ul> <p>Don't Use Production Strategies on Live Immediately</p> <ul> <li>Test all parameters on demo</li> <li>Verify calculations are correct</li> <li>Ensure orchestrators behave as expected</li> </ul> <p>Don't Ignore Warnings</p> <ul> <li>All orchestrators have risk warnings</li> <li>Read \"Critical Warnings\" sections</li> <li>Understand limitations before using</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#troubleshooting-common-issues","title":"Troubleshooting Common Issues","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#problem-orchestrator-doesnt-start","title":"Problem: Orchestrator Doesn't Start","text":"<p>Possible Causes:</p> <ul> <li>Invalid configuration (check error message)</li> <li>Symbol not tradable</li> <li>Insufficient margin</li> <li>Already running</li> </ul> <p>Solution:</p> <pre><code>if err := orchestrator.Start(); err != nil {\n    fmt.Printf(\"Start failed: %v\\n\", err)\n    // Check error details\n}\n</code></pre> <pre><code>---\n\n### Problem: Orchestrator Stops Unexpectedly\n\n**Possible Causes**:\n\n* Safety limit reached (check logs)\n* Context cancelled\n* Fatal error encountered\n\n**Solution**:\n\n```go\nstatus := orchestrator.GetStatus()\nfmt.Printf(\"Status: %+v\\n\", status)\n// Review error count and last operation\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#problem-too-many-operations-trades","title":"Problem: Too Many Operations / Trades","text":"<p>Possible Causes:</p> <ul> <li>Check interval too short</li> <li>Trigger thresholds too sensitive</li> <li>Market too volatile for settings</li> </ul> <p>Solution:</p> <ul> <li>Increase <code>CheckInterval</code> (e.g. 5s \u2192 10s)</li> <li>Widen trigger thresholds</li> <li>Review configuration parameters</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#problem-not-enough-operations","title":"Problem: Not Enough Operations","text":"<p>Possible Causes:</p> <ul> <li>Thresholds too strict</li> <li>No positions meeting criteria</li> <li>Wrong market conditions for strategy</li> </ul> <p>Solution:</p> <ul> <li>Lower activation thresholds</li> <li>Verify positions exist</li> <li>Check if strategy matches market</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#problem-orchestrators-conflict","title":"Problem: Orchestrators Conflict","text":"<p>Possible Causes:</p> <ul> <li>Both modifying the same positions</li> <li>Incompatible strategies (grid + pyramiding)</li> </ul> <p>Solution:</p> <ul> <li>Run only compatible combinations</li> <li>Test on demo first</li> <li>Use Adaptive Preset instead (switches modes automatically)</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#performance-monitoring","title":"Performance Monitoring","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#checking-orchestrator-status","title":"Checking Orchestrator Status","text":"<pre><code>// Get status\nstatus := orchestrator.GetStatus()\n\n// Display metrics\nfmt.Printf(\"Name: %s\\n\", status.Name)\nfmt.Printf(\"Running: %v\\n\", status.IsRunning)\nfmt.Printf(\"SuccessCount: %d\\n\", status.SuccessCount)\nfmt.Printf(\"ErrorCount: %d\\n\", status.ErrorCount)\nfmt.Printf(\"TotalOperations: %d\\n\", status.SuccessCount+status.ErrorCount)\nfmt.Printf(\"LastOperation: %s\\n\", status.LastOperation)\nfmt.Printf(\"Uptime: %v\\n\", time.Since(status.StartTime))\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#metrics-to-track","title":"Metrics to Track","text":"Metric What to Monitor Good Range Success Rate SuccessCount / TotalOps &gt; 90% Error Rate ErrorCount / TotalOps &lt; 10% Operations / Hour TotalOps / Hours Varies by orchestrator Profit / Operation Total P/L / TotalOps Positive average"},{"location":"Orchestrators/Strategies.Master.Overview/#advanced-topics","title":"Advanced Topics","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#custom-orchestrators","title":"Custom Orchestrators","text":"<p>To build your own orchestrator:</p> <ol> <li>Extend BaseOrchestrator:</li> </ol> <pre><code>type MyOrchestrator struct {\n    *orchestrators.BaseOrchestrator\n    suga   *mt5.MT5Suga\n    config MyConfig\n}\n</code></pre> <ol> <li>Implement Required Methods:</li> </ol> <pre><code>func (m *MyOrchestrator) Start() error {\n    // Validation\n    // Setup\n    // Launch goroutine\n    return nil\n}\n\nfunc (m *MyOrchestrator) Stop() error {\n    // Cleanup\n    return nil\n}\n</code></pre> <ol> <li>Add Your Logic:</li> </ol> <pre><code>func (m *MyOrchestrator) executeStrategy() {\n    // Your trading logic here\n}\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#market-analysis-integration","title":"Market Analysis Integration","text":"<p>Enhance orchestrators with technical analysis:</p> <pre><code>// Get bars for analysis\nbars, _ := suga.GetBars(\"EURUSD\", pb.Timeframe_M15, 100)\n\n// Calculate indicators\natr := calculateATR(bars, 14)\nma20 := calculateMA(bars, 20)\n\n// Adjust orchestrator parameters based on analysis\nif atr &gt; 50 {\n    config.TrailingDistance = 300 // Wider trailing in volatile markets\n}\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#external-signal-integration","title":"External Signal Integration","text":"<p>Connect orchestrators to external signals:</p> <pre><code>// Fetch signal from your system\nsignal := fetchTradingSignal()\n\nif signal.Strength &gt; 0.8 {\n    // Start aggressive orchestrator\n    scale.Start()\n} else {\n    // Conservative approach\n    trailingStop.Start()\n}\n</code></pre>"},{"location":"Orchestrators/Strategies.Master.Overview/#summary","title":"Summary","text":""},{"location":"Orchestrators/Strategies.Master.Overview/#orchestrators-overview","title":"Orchestrators Overview","text":"# Name Purpose Complexity 11 TrailingStopManage Profit protection Low 12 PositionScale Position sizing Medium 13 GridTrade Range trading Medium 14 RiskManage Account protection Low 15 PortfolioRebalance Portfolio balance Medium 16 Adaptive Preset Multi-strategy High"},{"location":"Orchestrators/Strategies.Master.Overview/#key-takeaways","title":"Key Takeaways","text":"<p>Always Use RiskManage</p> <ul> <li>Combine with any orchestrator</li> <li>Essential for automated trading</li> <li>Prevents catastrophic losses</li> </ul> <p>Start Simple</p> <ul> <li>Begin with TrailingStop + RiskManage</li> <li>Master one orchestrator before combining</li> <li>Test thoroughly on demo</li> </ul> <p>Match Strategy to Market</p> <ul> <li>Grid for ranging markets</li> <li>Trailing for trends</li> <li>Adaptive for changing conditions</li> </ul> <p>Monitor and Adjust</p> <ul> <li>Review performance regularly</li> <li>Optimize parameters based on results</li> <li>Don\u2019t set-and-forget initially</li> </ul> <p>Understand Risks</p> <ul> <li>Every orchestrator has warnings</li> <li>Read documentation fully</li> <li>Test calculations on demo</li> </ul>"},{"location":"Orchestrators/Strategies.Master.Overview/#next-steps","title":"Next Steps","text":"<ol> <li>Read Individual Documentation \u2014 Review detailed docs for orchestrators you want to use</li> <li>Run on Demo \u2014 Test each orchestrator on a demo account for 1+ week</li> <li>Start with RiskManage \u2014 Always combine with risk management</li> <li>Monitor Performance \u2014 Track metrics and adjust parameters</li> <li>Graduate to Combinations \u2014 Once comfortable, try multi-orchestrator setups</li> <li>Consider Adaptive Preset \u2014 For hands-off adaptive trading</li> </ol>"},{"location":"Orchestrators/Strategies.Master.Overview/#complete-documentation-links","title":"Complete Documentation Links","text":"<ul> <li>TrailingStopManage \u2014 Full Docs</li> <li>PositionScale \u2014 Full Docs</li> <li>GridTrade \u2014 Full Docs</li> <li>RiskManage \u2014 Full Docs</li> <li>PortfolioRebalance \u2014 Full Docs</li> <li>Adaptive Orchestrator Preset \u2014 Full Docs</li> </ul> <p>Remember: Orchestrators are powerful tools, but they require understanding and proper configuration. Always test on demo first, use risk management, and monitor performance actively until you are confident in their behavior.</p>"}]}